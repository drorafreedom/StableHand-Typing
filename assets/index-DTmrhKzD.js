var zC=Object.defineProperty;var HC=(s,r,n)=>r in s?zC(s,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[r]=n;var Qn=(s,r,n)=>HC(s,typeof r!="symbol"?r+"":r,n);function qC(s,r){for(var n=0;n<r.length;n++){const t=r[n];if(typeof t!="string"&&!Array.isArray(t)){for(const o in t)if(o!=="default"&&!(o in s)){const c=Object.getOwnPropertyDescriptor(t,o);c&&Object.defineProperty(s,o,c.get?c:{enumerable:!0,get:()=>t[o]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function t(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var Oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Py(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var ig={exports:{}},Cc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s_;function WC(){if(s_)return Cc;s_=1;var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function n(t,o,c){var l=null;if(c!==void 0&&(l=""+c),o.key!==void 0&&(l=""+o.key),"key"in o){c={};for(var f in o)f!=="key"&&(c[f]=o[f])}else c=o;return o=c.ref,{$$typeof:s,type:t,key:l,ref:o!==void 0?o:null,props:c}}return Cc.Fragment=r,Cc.jsx=n,Cc.jsxs=n,Cc}var i_;function YC(){return i_||(i_=1,ig.exports=WC()),ig.exports}var B=YC(),og={exports:{}},tr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o_;function $C(){if(o_)return tr;o_=1;var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),t=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),l=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),a=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.iterator;function h(K){return K===null||typeof K!="object"?null:(K=w&&K[w]||K["@@iterator"],typeof K=="function"?K:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,v={};function g(K,re,oe){this.props=K,this.context=re,this.refs=v,this.updater=oe||m}g.prototype.isReactComponent={},g.prototype.setState=function(K,re){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,re,"setState")},g.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function p(){}p.prototype=g.prototype;function y(K,re,oe){this.props=K,this.context=re,this.refs=v,this.updater=oe||m}var S=y.prototype=new p;S.constructor=y,b(S,g.prototype),S.isPureReactComponent=!0;var j=Array.isArray,A={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function C(K,re,oe,M,z,$){return oe=$.ref,{$$typeof:s,type:K,key:re,ref:oe!==void 0?oe:null,props:$}}function T(K,re){return C(K.type,re,void 0,void 0,void 0,K.props)}function R(K){return typeof K=="object"&&K!==null&&K.$$typeof===s}function P(K){var re={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(oe){return re[oe]})}var k=/\/+/g;function F(K,re){return typeof K=="object"&&K!==null&&K.key!=null?P(""+K.key):re.toString(36)}function D(){}function q(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(D,D):(K.status="pending",K.then(function(re){K.status==="pending"&&(K.status="fulfilled",K.value=re)},function(re){K.status==="pending"&&(K.status="rejected",K.reason=re)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function H(K,re,oe,M,z){var $=typeof K;($==="undefined"||$==="boolean")&&(K=null);var ee=!1;if(K===null)ee=!0;else switch($){case"bigint":case"string":case"number":ee=!0;break;case"object":switch(K.$$typeof){case s:case r:ee=!0;break;case _:return ee=K._init,H(ee(K._payload),re,oe,M,z)}}if(ee)return z=z(K),ee=M===""?"."+F(K,0):M,j(z)?(oe="",ee!=null&&(oe=ee.replace(k,"$&/")+"/"),H(z,re,oe,"",function(me){return me})):z!=null&&(R(z)&&(z=T(z,oe+(z.key==null||K&&K.key===z.key?"":(""+z.key).replace(k,"$&/")+"/")+ee)),re.push(z)),1;ee=0;var le=M===""?".":M+":";if(j(K))for(var ce=0;ce<K.length;ce++)M=K[ce],$=le+F(M,ce),ee+=H(M,re,oe,$,z);else if(ce=h(K),typeof ce=="function")for(K=ce.call(K),ce=0;!(M=K.next()).done;)M=M.value,$=le+F(M,ce++),ee+=H(M,re,oe,$,z);else if($==="object"){if(typeof K.then=="function")return H(q(K),re,oe,M,z);throw re=String(K),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return ee}function W(K,re,oe){if(K==null)return K;var M=[],z=0;return H(K,M,"","",function($){return re.call(oe,$,z++)}),M}function Q(K){if(K._status===-1){var re=K._result;re=re(),re.then(function(oe){(K._status===0||K._status===-1)&&(K._status=1,K._result=oe)},function(oe){(K._status===0||K._status===-1)&&(K._status=2,K._result=oe)}),K._status===-1&&(K._status=0,K._result=re)}if(K._status===1)return K._result.default;throw K._result}var J=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)};function Z(){}return tr.Children={map:W,forEach:function(K,re,oe){W(K,function(){re.apply(this,arguments)},oe)},count:function(K){var re=0;return W(K,function(){re++}),re},toArray:function(K){return W(K,function(re){return re})||[]},only:function(K){if(!R(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},tr.Component=g,tr.Fragment=n,tr.Profiler=o,tr.PureComponent=y,tr.StrictMode=t,tr.Suspense=a,tr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,tr.act=function(){throw Error("act(...) is not supported in production builds of React.")},tr.cache=function(K){return function(){return K.apply(null,arguments)}},tr.cloneElement=function(K,re,oe){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var M=b({},K.props),z=K.key,$=void 0;if(re!=null)for(ee in re.ref!==void 0&&($=void 0),re.key!==void 0&&(z=""+re.key),re)!N.call(re,ee)||ee==="key"||ee==="__self"||ee==="__source"||ee==="ref"&&re.ref===void 0||(M[ee]=re[ee]);var ee=arguments.length-2;if(ee===1)M.children=oe;else if(1<ee){for(var le=Array(ee),ce=0;ce<ee;ce++)le[ce]=arguments[ce+2];M.children=le}return C(K.type,z,void 0,void 0,$,M)},tr.createContext=function(K){return K={$$typeof:l,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:c,_context:K},K},tr.createElement=function(K,re,oe){var M,z={},$=null;if(re!=null)for(M in re.key!==void 0&&($=""+re.key),re)N.call(re,M)&&M!=="key"&&M!=="__self"&&M!=="__source"&&(z[M]=re[M]);var ee=arguments.length-2;if(ee===1)z.children=oe;else if(1<ee){for(var le=Array(ee),ce=0;ce<ee;ce++)le[ce]=arguments[ce+2];z.children=le}if(K&&K.defaultProps)for(M in ee=K.defaultProps,ee)z[M]===void 0&&(z[M]=ee[M]);return C(K,$,void 0,void 0,null,z)},tr.createRef=function(){return{current:null}},tr.forwardRef=function(K){return{$$typeof:f,render:K}},tr.isValidElement=R,tr.lazy=function(K){return{$$typeof:_,_payload:{_status:-1,_result:K},_init:Q}},tr.memo=function(K,re){return{$$typeof:d,type:K,compare:re===void 0?null:re}},tr.startTransition=function(K){var re=A.T,oe={};A.T=oe;try{var M=K(),z=A.S;z!==null&&z(oe,M),typeof M=="object"&&M!==null&&typeof M.then=="function"&&M.then(Z,J)}catch($){J($)}finally{A.T=re}},tr.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},tr.use=function(K){return A.H.use(K)},tr.useActionState=function(K,re,oe){return A.H.useActionState(K,re,oe)},tr.useCallback=function(K,re){return A.H.useCallback(K,re)},tr.useContext=function(K){return A.H.useContext(K)},tr.useDebugValue=function(){},tr.useDeferredValue=function(K,re){return A.H.useDeferredValue(K,re)},tr.useEffect=function(K,re){return A.H.useEffect(K,re)},tr.useId=function(){return A.H.useId()},tr.useImperativeHandle=function(K,re,oe){return A.H.useImperativeHandle(K,re,oe)},tr.useInsertionEffect=function(K,re){return A.H.useInsertionEffect(K,re)},tr.useLayoutEffect=function(K,re){return A.H.useLayoutEffect(K,re)},tr.useMemo=function(K,re){return A.H.useMemo(K,re)},tr.useOptimistic=function(K,re){return A.H.useOptimistic(K,re)},tr.useReducer=function(K,re,oe){return A.H.useReducer(K,re,oe)},tr.useRef=function(K){return A.H.useRef(K)},tr.useState=function(K){return A.H.useState(K)},tr.useSyncExternalStore=function(K,re,oe){return A.H.useSyncExternalStore(K,re,oe)},tr.useTransition=function(){return A.H.useTransition()},tr.version="19.0.0",tr}var a_;function fd(){return a_||(a_=1,og.exports=$C()),og.exports}var be=fd();const Pu=Py(be),Wg=qC({__proto__:null,default:Pu},[be]);var ag={exports:{}},Ac={},lg={exports:{}},ug={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l_;function XC(){return l_||(l_=1,function(s){function r(W,Q){var J=W.length;W.push(Q);e:for(;0<J;){var Z=J-1>>>1,K=W[Z];if(0<o(K,Q))W[Z]=Q,W[J]=K,J=Z;else break e}}function n(W){return W.length===0?null:W[0]}function t(W){if(W.length===0)return null;var Q=W[0],J=W.pop();if(J!==Q){W[0]=J;e:for(var Z=0,K=W.length,re=K>>>1;Z<re;){var oe=2*(Z+1)-1,M=W[oe],z=oe+1,$=W[z];if(0>o(M,J))z<K&&0>o($,M)?(W[Z]=$,W[z]=J,Z=z):(W[Z]=M,W[oe]=J,Z=oe);else if(z<K&&0>o($,J))W[Z]=$,W[z]=J,Z=z;else break e}}return Q}function o(W,Q){var J=W.sortIndex-Q.sortIndex;return J!==0?J:W.id-Q.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var l=Date,f=l.now();s.unstable_now=function(){return l.now()-f}}var a=[],d=[],_=1,w=null,h=3,m=!1,b=!1,v=!1,g=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;function S(W){for(var Q=n(d);Q!==null;){if(Q.callback===null)t(d);else if(Q.startTime<=W)t(d),Q.sortIndex=Q.expirationTime,r(a,Q);else break;Q=n(d)}}function j(W){if(v=!1,S(W),!b)if(n(a)!==null)b=!0,q();else{var Q=n(d);Q!==null&&H(j,Q.startTime-W)}}var A=!1,N=-1,C=5,T=-1;function R(){return!(s.unstable_now()-T<C)}function P(){if(A){var W=s.unstable_now();T=W;var Q=!0;try{e:{b=!1,v&&(v=!1,p(N),N=-1),m=!0;var J=h;try{t:{for(S(W),w=n(a);w!==null&&!(w.expirationTime>W&&R());){var Z=w.callback;if(typeof Z=="function"){w.callback=null,h=w.priorityLevel;var K=Z(w.expirationTime<=W);if(W=s.unstable_now(),typeof K=="function"){w.callback=K,S(W),Q=!0;break t}w===n(a)&&t(a),S(W)}else t(a);w=n(a)}if(w!==null)Q=!0;else{var re=n(d);re!==null&&H(j,re.startTime-W),Q=!1}}break e}finally{w=null,h=J,m=!1}Q=void 0}}finally{Q?k():A=!1}}}var k;if(typeof y=="function")k=function(){y(P)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,D=F.port2;F.port1.onmessage=P,k=function(){D.postMessage(null)}}else k=function(){g(P,0)};function q(){A||(A=!0,k())}function H(W,Q){N=g(function(){W(s.unstable_now())},Q)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(W){W.callback=null},s.unstable_continueExecution=function(){b||m||(b=!0,q())},s.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<W?Math.floor(1e3/W):5},s.unstable_getCurrentPriorityLevel=function(){return h},s.unstable_getFirstCallbackNode=function(){return n(a)},s.unstable_next=function(W){switch(h){case 1:case 2:case 3:var Q=3;break;default:Q=h}var J=h;h=Q;try{return W()}finally{h=J}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(W,Q){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var J=h;h=W;try{return Q()}finally{h=J}},s.unstable_scheduleCallback=function(W,Q,J){var Z=s.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?Z+J:Z):J=Z,W){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=J+K,W={id:_++,callback:Q,priorityLevel:W,startTime:J,expirationTime:K,sortIndex:-1},J>Z?(W.sortIndex=J,r(d,W),n(a)===null&&W===n(d)&&(v?(p(N),N=-1):v=!0,H(j,J-Z))):(W.sortIndex=K,r(a,W),b||m||(b=!0,q())),W},s.unstable_shouldYield=R,s.unstable_wrapCallback=function(W){var Q=h;return function(){var J=h;h=Q;try{return W.apply(this,arguments)}finally{h=J}}}}(ug)),ug}var u_;function KC(){return u_||(u_=1,lg.exports=XC()),lg.exports}var cg={exports:{}},us={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_;function QC(){if(c_)return us;c_=1;var s=fd();function r(a){var d="https://react.dev/errors/"+a;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)d+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+a+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var t={d:{f:n,r:function(){throw Error(r(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(a,d,_){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:a,containerInfo:d,implementation:_}}var l=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(a,d){if(a==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return us.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=t,us.createPortal=function(a,d){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(r(299));return c(a,d,null,_)},us.flushSync=function(a){var d=l.T,_=t.p;try{if(l.T=null,t.p=2,a)return a()}finally{l.T=d,t.p=_,t.d.f()}},us.preconnect=function(a,d){typeof a=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,t.d.C(a,d))},us.prefetchDNS=function(a){typeof a=="string"&&t.d.D(a)},us.preinit=function(a,d){if(typeof a=="string"&&d&&typeof d.as=="string"){var _=d.as,w=f(_,d.crossOrigin),h=typeof d.integrity=="string"?d.integrity:void 0,m=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;_==="style"?t.d.S(a,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:w,integrity:h,fetchPriority:m}):_==="script"&&t.d.X(a,{crossOrigin:w,integrity:h,fetchPriority:m,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},us.preinitModule=function(a,d){if(typeof a=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var _=f(d.as,d.crossOrigin);t.d.M(a,{crossOrigin:_,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&t.d.M(a)},us.preload=function(a,d){if(typeof a=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var _=d.as,w=f(_,d.crossOrigin);t.d.L(a,_,{crossOrigin:w,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},us.preloadModule=function(a,d){if(typeof a=="string")if(d){var _=f(d.as,d.crossOrigin);t.d.m(a,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:_,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else t.d.m(a)},us.requestFormReset=function(a){t.d.r(a)},us.unstable_batchedUpdates=function(a,d){return a(d)},us.useFormState=function(a,d,_){return l.H.useFormState(a,d,_)},us.useFormStatus=function(){return l.H.useHostTransitionStatus()},us.version="19.0.0",us}var d_;function zx(){if(d_)return cg.exports;d_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(r){console.error(r)}}return s(),cg.exports=QC(),cg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h_;function ZC(){if(h_)return Ac;h_=1;var s=KC(),r=fd(),n=zx();function t(i){var u="https://react.dev/errors/"+i;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)u+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+i+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}var c=Symbol.for("react.element"),l=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),h=Symbol.for("react.consumer"),m=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),S=Symbol.for("react.offscreen"),j=Symbol.for("react.memo_cache_sentinel"),A=Symbol.iterator;function N(i){return i===null||typeof i!="object"?null:(i=A&&i[A]||i["@@iterator"],typeof i=="function"?i:null)}var C=Symbol.for("react.client.reference");function T(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===C?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case a:return"Fragment";case f:return"Portal";case _:return"Profiler";case d:return"StrictMode";case v:return"Suspense";case g:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case m:return(i.displayName||"Context")+".Provider";case h:return(i._context.displayName||"Context")+".Consumer";case b:var u=i.render;return i=i.displayName,i||(i=u.displayName||u.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case p:return u=i.displayName||null,u!==null?u:T(i.type)||"Memo";case y:u=i._payload,i=i._init;try{return T(i(u))}catch{}}return null}var R=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=Object.assign,k,F;function D(i){if(k===void 0)try{throw Error()}catch(x){var u=x.stack.trim().match(/\n( *(at )?)/);k=u&&u[1]||"",F=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+k+i+F}var q=!1;function H(i,u){if(!i||q)return"";q=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var O={DetermineComponentFrameRoot:function(){try{if(u){var pt=function(){throw Error()};if(Object.defineProperty(pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pt,[])}catch(rt){var Qe=rt}Reflect.construct(i,[],pt)}else{try{pt.call()}catch(rt){Qe=rt}i.call(pt.prototype)}}else{try{throw Error()}catch(rt){Qe=rt}(pt=i())&&typeof pt.catch=="function"&&pt.catch(function(){})}}catch(rt){if(rt&&Qe&&typeof rt.stack=="string")return[rt.stack,Qe.stack]}return[null,null]}};O.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var V=Object.getOwnPropertyDescriptor(O.DetermineComponentFrameRoot,"name");V&&V.configurable&&Object.defineProperty(O.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Y=O.DetermineComponentFrameRoot(),ue=Y[0],_e=Y[1];if(ue&&_e){var ke=ue.split(`
`),ze=_e.split(`
`);for(V=O=0;O<ke.length&&!ke[O].includes("DetermineComponentFrameRoot");)O++;for(;V<ze.length&&!ze[V].includes("DetermineComponentFrameRoot");)V++;if(O===ke.length||V===ze.length)for(O=ke.length-1,V=ze.length-1;1<=O&&0<=V&&ke[O]!==ze[V];)V--;for(;1<=O&&0<=V;O--,V--)if(ke[O]!==ze[V]){if(O!==1||V!==1)do if(O--,V--,0>V||ke[O]!==ze[V]){var st=`
`+ke[O].replace(" at new "," at ");return i.displayName&&st.includes("<anonymous>")&&(st=st.replace("<anonymous>",i.displayName)),st}while(1<=O&&0<=V);break}}}finally{q=!1,Error.prepareStackTrace=x}return(x=i?i.displayName||i.name:"")?D(x):""}function W(i){switch(i.tag){case 26:case 27:case 5:return D(i.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 15:return i=H(i.type,!1),i;case 11:return i=H(i.type.render,!1),i;case 1:return i=H(i.type,!0),i;default:return""}}function Q(i){try{var u="";do u+=W(i),i=i.return;while(i);return u}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}function J(i){var u=i,x=i;if(i.alternate)for(;u.return;)u=u.return;else{i=u;do u=i,u.flags&4098&&(x=u.return),i=u.return;while(i)}return u.tag===3?x:null}function Z(i){if(i.tag===13){var u=i.memoizedState;if(u===null&&(i=i.alternate,i!==null&&(u=i.memoizedState)),u!==null)return u.dehydrated}return null}function K(i){if(J(i)!==i)throw Error(t(188))}function re(i){var u=i.alternate;if(!u){if(u=J(i),u===null)throw Error(t(188));return u!==i?null:i}for(var x=i,O=u;;){var V=x.return;if(V===null)break;var Y=V.alternate;if(Y===null){if(O=V.return,O!==null){x=O;continue}break}if(V.child===Y.child){for(Y=V.child;Y;){if(Y===x)return K(V),i;if(Y===O)return K(V),u;Y=Y.sibling}throw Error(t(188))}if(x.return!==O.return)x=V,O=Y;else{for(var ue=!1,_e=V.child;_e;){if(_e===x){ue=!0,x=V,O=Y;break}if(_e===O){ue=!0,O=V,x=Y;break}_e=_e.sibling}if(!ue){for(_e=Y.child;_e;){if(_e===x){ue=!0,x=Y,O=V;break}if(_e===O){ue=!0,O=Y,x=V;break}_e=_e.sibling}if(!ue)throw Error(t(189))}}if(x.alternate!==O)throw Error(t(190))}if(x.tag!==3)throw Error(t(188));return x.stateNode.current===x?i:u}function oe(i){var u=i.tag;if(u===5||u===26||u===27||u===6)return i;for(i=i.child;i!==null;){if(u=oe(i),u!==null)return u;i=i.sibling}return null}var M=Array.isArray,z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},ee=[],le=-1;function ce(i){return{current:i}}function me(i){0>le||(i.current=ee[le],ee[le]=null,le--)}function ve(i,u){le++,ee[le]=i.current,i.current=u}var ge=ce(null),we=ce(null),xe=ce(null),fe=ce(null);function Se(i,u){switch(ve(xe,u),ve(we,i),ve(ge,null),i=u.nodeType,i){case 9:case 11:u=(u=u.documentElement)&&(u=u.namespaceURI)?M1(u):0;break;default:if(i=i===8?u.parentNode:u,u=i.tagName,i=i.namespaceURI)i=M1(i),u=P1(i,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}me(ge),ve(ge,u)}function Ce(){me(ge),me(we),me(xe)}function Ne(i){i.memoizedState!==null&&ve(fe,i);var u=ge.current,x=P1(u,i.type);u!==x&&(ve(we,i),ve(ge,x))}function Oe(i){we.current===i&&(me(ge),me(we)),fe.current===i&&(me(fe),xc._currentValue=$)}var Me=Object.prototype.hasOwnProperty,Ue=s.unstable_scheduleCallback,et=s.unstable_cancelCallback,Fe=s.unstable_shouldYield,mt=s.unstable_requestPaint,ut=s.unstable_now,it=s.unstable_getCurrentPriorityLevel,ft=s.unstable_ImmediatePriority,at=s.unstable_UserBlockingPriority,Le=s.unstable_NormalPriority,Je=s.unstable_LowPriority,Ie=s.unstable_IdlePriority,de=s.log,he=s.unstable_setDisableYieldValue,ie=null,ye=null;function Pe(i){if(ye&&typeof ye.onCommitFiberRoot=="function")try{ye.onCommitFiberRoot(ie,i,void 0,(i.current.flags&128)===128)}catch{}}function Ve(i){if(typeof de=="function"&&he(i),ye&&typeof ye.setStrictMode=="function")try{ye.setStrictMode(ie,i)}catch{}}var $e=Math.clz32?Math.clz32:vt,ct=Math.log,yt=Math.LN2;function vt(i){return i>>>=0,i===0?32:31-(ct(i)/yt|0)|0}var bt=128,Lt=4194304;function Tt(i){var u=i&42;if(u!==0)return u;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function jt(i,u){var x=i.pendingLanes;if(x===0)return 0;var O=0,V=i.suspendedLanes,Y=i.pingedLanes,ue=i.warmLanes;i=i.finishedLanes!==0;var _e=x&134217727;return _e!==0?(x=_e&~V,x!==0?O=Tt(x):(Y&=_e,Y!==0?O=Tt(Y):i||(ue=_e&~ue,ue!==0&&(O=Tt(ue))))):(_e=x&~V,_e!==0?O=Tt(_e):Y!==0?O=Tt(Y):i||(ue=x&~ue,ue!==0&&(O=Tt(ue)))),O===0?0:u!==0&&u!==O&&!(u&V)&&(V=O&-O,ue=u&-u,V>=ue||V===32&&(ue&4194176)!==0)?u:O}function Nt(i,u){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&u)===0}function kt(i,u){switch(i){case 1:case 2:case 4:case 8:return u+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yr(){var i=bt;return bt<<=1,!(bt&4194176)&&(bt=128),i}function Yr(){var i=Lt;return Lt<<=1,!(Lt&62914560)&&(Lt=4194304),i}function Ur(i){for(var u=[],x=0;31>x;x++)u.push(i);return u}function Bt(i,u){i.pendingLanes|=u,u!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Cr(i,u,x,O,V,Y){var ue=i.pendingLanes;i.pendingLanes=x,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=x,i.entangledLanes&=x,i.errorRecoveryDisabledLanes&=x,i.shellSuspendCounter=0;var _e=i.entanglements,ke=i.expirationTimes,ze=i.hiddenUpdates;for(x=ue&~x;0<x;){var st=31-$e(x),pt=1<<st;_e[st]=0,ke[st]=-1;var Qe=ze[st];if(Qe!==null)for(ze[st]=null,st=0;st<Qe.length;st++){var rt=Qe[st];rt!==null&&(rt.lane&=-536870913)}x&=~pt}O!==0&&Zt(i,O,0),Y!==0&&V===0&&i.tag!==0&&(i.suspendedLanes|=Y&~(ue&~u))}function Zt(i,u,x){i.pendingLanes|=u,i.suspendedLanes&=~u;var O=31-$e(u);i.entangledLanes|=u,i.entanglements[O]=i.entanglements[O]|1073741824|x&4194218}function Gr(i,u){var x=i.entangledLanes|=u;for(i=i.entanglements;x;){var O=31-$e(x),V=1<<O;V&u|i[O]&u&&(i[O]|=u),x&=~V}}function Zr(i){return i&=-i,2<i?8<i?i&134217727?32:268435456:8:2}function mr(){var i=z.p;return i!==0?i:(i=window.event,i===void 0?32:Z1(i.type))}function zr(i,u){var x=z.p;try{return z.p=i,u()}finally{z.p=x}}var ss=Math.random().toString(36).slice(2),Qr="__reactFiber$"+ss,$r="__reactProps$"+ss,Ss="__reactContainer$"+ss,Ls="__reactEvents$"+ss,Qs="__reactListeners$"+ss,Ae="__reactHandles$"+ss,dt="__reactResources$"+ss,wt="__reactMarker$"+ss;function ot(i){delete i[Qr],delete i[$r],delete i[Ls],delete i[Qs],delete i[Ae]}function qt(i){var u=i[Qr];if(u)return u;for(var x=i.parentNode;x;){if(u=x[Ss]||x[Qr]){if(x=u.alternate,u.child!==null||x!==null&&x.child!==null)for(i=L1(i);i!==null;){if(x=i[Qr])return x;i=L1(i)}return u}i=x,x=i.parentNode}return null}function tt(i){if(i=i[Qr]||i[Ss]){var u=i.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return i}return null}function Jt(i){var u=i.tag;if(u===5||u===26||u===27||u===6)return i.stateNode;throw Error(t(33))}function _t(i){var u=i[dt];return u||(u=i[dt]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Pt(i){i[wt]=!0}var xt=new Set,Pr={};function gr(i,u){sr(i,u),sr(i+"Capture",u)}function sr(i,u){for(Pr[i]=u,i=0;i<u.length;i++)xt.add(u[i])}var vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),js=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mn={},is={};function Jr(i){return Me.call(is,i)?!0:Me.call(Mn,i)?!1:js.test(i)?is[i]=!0:(Mn[i]=!0,!1)}function vi(i,u,x){if(Jr(u))if(x===null)i.removeAttribute(u);else{switch(typeof x){case"undefined":case"function":case"symbol":i.removeAttribute(u);return;case"boolean":var O=u.toLowerCase().slice(0,5);if(O!=="data-"&&O!=="aria-"){i.removeAttribute(u);return}}i.setAttribute(u,""+x)}}function vn(i,u,x){if(x===null)i.removeAttribute(u);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttribute(u,""+x)}}function Pn(i,u,x,O){if(O===null)i.removeAttribute(x);else{switch(typeof O){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(x);return}i.setAttributeNS(u,x,""+O)}}function bn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Fa(i){var u=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Nl(i){var u=Fa(i)?"checked":"value",x=Object.getOwnPropertyDescriptor(i.constructor.prototype,u),O=""+i[u];if(!i.hasOwnProperty(u)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var V=x.get,Y=x.set;return Object.defineProperty(i,u,{configurable:!0,get:function(){return V.call(this)},set:function(ue){O=""+ue,Y.call(this,ue)}}),Object.defineProperty(i,u,{enumerable:x.enumerable}),{getValue:function(){return O},setValue:function(ue){O=""+ue},stopTracking:function(){i._valueTracker=null,delete i[u]}}}}function Ni(i){i._valueTracker||(i._valueTracker=Nl(i))}function io(i){if(!i)return!1;var u=i._valueTracker;if(!u)return!0;var x=u.getValue(),O="";return i&&(O=Fa(i)?i.checked?"true":"false":i.value),i=O,i!==x?(u.setValue(i),!0):!1}function oo(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Zs=/[\n"\\]/g;function Xr(i){return i.replace(Zs,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Li(i,u,x,O,V,Y,ue,_e){i.name="",ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"?i.type=ue:i.removeAttribute("type"),u!=null?ue==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+bn(u)):i.value!==""+bn(u)&&(i.value=""+bn(u)):ue!=="submit"&&ue!=="reset"||i.removeAttribute("value"),u!=null?ao(i,ue,bn(u)):x!=null?ao(i,ue,bn(x)):O!=null&&i.removeAttribute("value"),V==null&&Y!=null&&(i.defaultChecked=!!Y),V!=null&&(i.checked=V&&typeof V!="function"&&typeof V!="symbol"),_e!=null&&typeof _e!="function"&&typeof _e!="symbol"&&typeof _e!="boolean"?i.name=""+bn(_e):i.removeAttribute("name")}function bi(i,u,x,O,V,Y,ue,_e){if(Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(i.type=Y),u!=null||x!=null){if(!(Y!=="submit"&&Y!=="reset"||u!=null))return;x=x!=null?""+bn(x):"",u=u!=null?""+bn(u):x,_e||u===i.value||(i.value=u),i.defaultValue=u}O=O??V,O=typeof O!="function"&&typeof O!="symbol"&&!!O,i.checked=_e?i.checked:!!O,i.defaultChecked=!!O,ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"&&(i.name=ue)}function ao(i,u,x){u==="number"&&oo(i.ownerDocument)===i||i.defaultValue===""+x||(i.defaultValue=""+x)}function ur(i,u,x,O){if(i=i.options,u){u={};for(var V=0;V<x.length;V++)u["$"+x[V]]=!0;for(x=0;x<i.length;x++)V=u.hasOwnProperty("$"+i[x].value),i[x].selected!==V&&(i[x].selected=V),V&&O&&(i[x].defaultSelected=!0)}else{for(x=""+bn(x),u=null,V=0;V<i.length;V++){if(i[V].value===x){i[V].selected=!0,O&&(i[V].defaultSelected=!0);return}u!==null||i[V].disabled||(u=i[V])}u!==null&&(u.selected=!0)}}function Js(i,u,x){if(u!=null&&(u=""+bn(u),u!==i.value&&(i.value=u),x==null)){i.defaultValue!==u&&(i.defaultValue=u);return}i.defaultValue=x!=null?""+bn(x):""}function Us(i,u,x,O){if(u==null){if(O!=null){if(x!=null)throw Error(t(92));if(M(O)){if(1<O.length)throw Error(t(93));O=O[0]}x=O}x==null&&(x=""),u=x}x=bn(u),i.defaultValue=x,O=i.textContent,O===x&&O!==""&&O!==null&&(i.value=O)}function en(i,u){if(u){var x=i.firstChild;if(x&&x===i.lastChild&&x.nodeType===3){x.nodeValue=u;return}}i.textContent=u}var Ll=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ko(i,u,x){var O=u.indexOf("--")===0;x==null||typeof x=="boolean"||x===""?O?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="":O?i.setProperty(u,x):typeof x!="number"||x===0||Ll.has(u)?u==="float"?i.cssFloat=x:i[u]=(""+x).trim():i[u]=x+"px"}function _i(i,u,x){if(u!=null&&typeof u!="object")throw Error(t(62));if(i=i.style,x!=null){for(var O in x)!x.hasOwnProperty(O)||u!=null&&u.hasOwnProperty(O)||(O.indexOf("--")===0?i.setProperty(O,""):O==="float"?i.cssFloat="":i[O]="");for(var V in u)O=u[V],u.hasOwnProperty(V)&&x[V]!==O&&Ko(i,V,O)}else for(var Y in u)u.hasOwnProperty(Y)&&Ko(i,Y,u[Y])}function Qo(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Va=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fs(i){return Va.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Es=null;function lo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ei=null,wi=null;function ti(i){var u=tt(i);if(u&&(i=u.stateNode)){var x=i[$r]||null;e:switch(i=u.stateNode,u.type){case"input":if(Li(i,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name),u=x.name,x.type==="radio"&&u!=null){for(x=i;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll('input[name="'+Xr(""+u)+'"][type="radio"]'),u=0;u<x.length;u++){var O=x[u];if(O!==i&&O.form===i.form){var V=O[$r]||null;if(!V)throw Error(t(90));Li(O,V.value,V.defaultValue,V.defaultValue,V.checked,V.defaultChecked,V.type,V.name)}}for(u=0;u<x.length;u++)O=x[u],O.form===i.form&&io(O)}break e;case"textarea":Js(i,x.value,x.defaultValue);break e;case"select":u=x.value,u!=null&&ur(i,!!x.multiple,u,!1)}}}var Ba=!1;function Ul(i,u,x){if(Ba)return i(u,x);Ba=!0;try{var O=i(u);return O}finally{if(Ba=!1,(ei!==null||wi!==null)&&(ch(),ei&&(u=ei,i=wi,wi=ei=null,ti(u),i)))for(u=0;u<i.length;u++)ti(i[u])}}function uo(i,u){var x=i.stateNode;if(x===null)return null;var O=x[$r]||null;if(O===null)return null;x=O[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(O=!O.disabled)||(i=i.type,O=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!O;break e;default:i=!1}if(i)return null;if(x&&typeof x!="function")throw Error(t(231,u,typeof x));return x}var Ts=!1;if(vr)try{var Ui={};Object.defineProperty(Ui,"passive",{get:function(){Ts=!0}}),window.addEventListener("test",Ui,Ui),window.removeEventListener("test",Ui,Ui)}catch{Ts=!1}var fn=null,Vn=null,gs=null;function xi(){if(gs)return gs;var i,u=Vn,x=u.length,O,V="value"in fn?fn.value:fn.textContent,Y=V.length;for(i=0;i<x&&u[i]===V[i];i++);var ue=x-i;for(O=1;O<=ue&&u[x-O]===V[Y-O];O++);return gs=V.slice(i,1<O?1-O:void 0)}function _n(i){var u=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&u===13&&(i=13)):i=u,i===10&&(i=13),32<=i||i===13?i:0}function os(){return!0}function Ga(){return!1}function Fr(i){function u(x,O,V,Y,ue){this._reactName=x,this._targetInst=V,this.type=O,this.nativeEvent=Y,this.target=ue,this.currentTarget=null;for(var _e in i)i.hasOwnProperty(_e)&&(x=i[_e],this[_e]=x?x(Y):Y[_e]);return this.isDefaultPrevented=(Y.defaultPrevented!=null?Y.defaultPrevented:Y.returnValue===!1)?os:Ga,this.isPropagationStopped=Ga,this}return P(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=os)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=os)},persist:function(){},isPersistent:os}),u}var cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},co=Fr(cr),Fi=P({},cr,{view:0,detail:0}),za=Fr(Fi),ho,fo,Vs,Si=P({},Fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Et,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Vs&&(Vs&&i.type==="mousemove"?(ho=i.screenX-Vs.screenX,fo=i.screenY-Vs.screenY):fo=ho=0,Vs=i),ho)},movementY:function(i){return"movementY"in i?i.movementY:fo}}),ys=Fr(Si),Ha=P({},Si,{dataTransfer:0}),Fl=Fr(Ha),Vi=P({},Fi,{relatedTarget:0}),po=Fr(Vi),Zo=P({},cr,{animationName:0,elapsedTime:0,pseudoElement:0}),mo=Fr(Zo),qa=P({},cr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),go=Fr(qa),Wa=P({},cr,{data:0}),Bi=Fr(Wa),ji={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ya={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cs(i){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(i):(i=Bs[i])?!!u[i]:!1}function Et(){return Cs}var Vl=P({},Fi,{key:function(i){if(i.key){var u=ji[i.key]||i.key;if(u!=="Unidentified")return u}return i.type==="keypress"?(i=_n(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ya[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Et,charCode:function(i){return i.type==="keypress"?_n(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?_n(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),yo=Fr(Vl),Ei=P({},Si,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$a=Fr(Ei),Ti=P({},Fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Et}),br=Fr(Ti),Xa=P({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bl=Fr(Xa),as=P({},Si,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Jo=Fr(as),Yn=P({},cr,{newState:0,oldState:0}),Gl=Fr(Yn),zl=[9,13,27,32],ri=vr&&"CompositionEvent"in window,U=null;vr&&"documentMode"in document&&(U=document.documentMode);var ne=vr&&"TextEvent"in window&&!U,ae=vr&&(!ri||U&&8<U&&11>=U),Ee=" ",E=!1;function I(i,u){switch(i){case"keyup":return zl.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function L(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var G=!1;function X(i,u){switch(i){case"compositionend":return L(u);case"keypress":return u.which!==32?null:(E=!0,Ee);case"textInput":return i=u.data,i===Ee&&E?null:i;default:return null}}function te(i,u){if(G)return i==="compositionend"||!ri&&I(i,u)?(i=xi(),gs=Vn=fn=null,G=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return ae&&u.locale!=="ko"?null:u.data;default:return null}}var se={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pe(i){var u=i&&i.nodeName&&i.nodeName.toLowerCase();return u==="input"?!!se[i.type]:u==="textarea"}function Te(i,u,x,O){ei?wi?wi.push(O):wi=[O]:ei=O,u=mh(u,"onChange"),0<u.length&&(x=new co("onChange","change",null,x,O),i.push({event:x,listeners:u}))}var je=null,De=null;function He(i){A1(i,0)}function Be(i){var u=Jt(i);if(io(u))return i}function Re(i,u){if(i==="change")return u}var nt=!1;if(vr){var Xe;if(vr){var Ze="oninput"in document;if(!Ze){var qe=document.createElement("div");qe.setAttribute("oninput","return;"),Ze=typeof qe.oninput=="function"}Xe=Ze}else Xe=!1;nt=Xe&&(!document.documentMode||9<document.documentMode)}function We(){je&&(je.detachEvent("onpropertychange",At),De=je=null)}function At(i){if(i.propertyName==="value"&&Be(De)){var u=[];Te(u,De,i,lo(i)),Ul(He,u)}}function Wt(i,u,x){i==="focusin"?(We(),je=u,De=x,je.attachEvent("onpropertychange",At)):i==="focusout"&&We()}function Ot(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Be(De)}function Mt(i,u){if(i==="click")return Be(u)}function er(i,u){if(i==="input"||i==="change")return Be(u)}function Dr(i,u){return i===u&&(i!==0||1/i===1/u)||i!==i&&u!==u}var ar=typeof Object.is=="function"?Object.is:Dr;function Hr(i,u){if(ar(i,u))return!0;if(typeof i!="object"||i===null||typeof u!="object"||u===null)return!1;var x=Object.keys(i),O=Object.keys(u);if(x.length!==O.length)return!1;for(O=0;O<x.length;O++){var V=x[O];if(!Me.call(u,V)||!ar(i[V],u[V]))return!1}return!0}function Dn(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Nn(i,u){var x=Dn(i);i=0;for(var O;x;){if(x.nodeType===3){if(O=i+x.textContent.length,i<=u&&O>=u)return{node:x,offset:u-i};i=O}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=Dn(x)}}function As(i,u){return i&&u?i===u?!0:i&&i.nodeType===3?!1:u&&u.nodeType===3?As(i,u.parentNode):"contains"in i?i.contains(u):i.compareDocumentPosition?!!(i.compareDocumentPosition(u)&16):!1:!1}function Ar(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var u=oo(i.document);u instanceof i.HTMLIFrameElement;){try{var x=typeof u.contentWindow.location.href=="string"}catch{x=!1}if(x)i=u.contentWindow;else break;u=oo(i.document)}return u}function kr(i){var u=i&&i.nodeName&&i.nodeName.toLowerCase();return u&&(u==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||u==="textarea"||i.contentEditable==="true")}function Sr(i,u){var x=Ar(u);u=i.focusedElem;var O=i.selectionRange;if(x!==u&&u&&u.ownerDocument&&As(u.ownerDocument.documentElement,u)){if(O!==null&&kr(u)){if(i=O.start,x=O.end,x===void 0&&(x=i),"selectionStart"in u)u.selectionStart=i,u.selectionEnd=Math.min(x,u.value.length);else if(x=(i=u.ownerDocument||document)&&i.defaultView||window,x.getSelection){x=x.getSelection();var V=u.textContent.length,Y=Math.min(O.start,V);O=O.end===void 0?Y:Math.min(O.end,V),!x.extend&&Y>O&&(V=O,O=Y,Y=V),V=Nn(u,Y);var ue=Nn(u,O);V&&ue&&(x.rangeCount!==1||x.anchorNode!==V.node||x.anchorOffset!==V.offset||x.focusNode!==ue.node||x.focusOffset!==ue.offset)&&(i=i.createRange(),i.setStart(V.node,V.offset),x.removeAllRanges(),Y>O?(x.addRange(i),x.extend(ue.node,ue.offset)):(i.setEnd(ue.node,ue.offset),x.addRange(i)))}}for(i=[],x=u;x=x.parentNode;)x.nodeType===1&&i.push({element:x,left:x.scrollLeft,top:x.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<i.length;u++)x=i[u],x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}var Bn=vr&&"documentMode"in document&&11>=document.documentMode,Rr=null,pn=null,jr=null,on=!1;function ea(i,u,x){var O=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;on||Rr==null||Rr!==oo(O)||(O=Rr,"selectionStart"in O&&kr(O)?O={start:O.selectionStart,end:O.selectionEnd}:(O=(O.ownerDocument&&O.ownerDocument.defaultView||window).getSelection(),O={anchorNode:O.anchorNode,anchorOffset:O.anchorOffset,focusNode:O.focusNode,focusOffset:O.focusOffset}),jr&&Hr(jr,O)||(jr=O,O=mh(pn,"onSelect"),0<O.length&&(u=new co("onSelect","select",null,u,x),i.push({event:u,listeners:O}),u.target=Rr)))}function Rs(i,u){var x={};return x[i.toLowerCase()]=u.toLowerCase(),x["Webkit"+i]="webkit"+u,x["Moz"+i]="moz"+u,x}var vo={animationend:Rs("Animation","AnimationEnd"),animationiteration:Rs("Animation","AnimationIteration"),animationstart:Rs("Animation","AnimationStart"),transitionrun:Rs("Transition","TransitionRun"),transitionstart:Rs("Transition","TransitionStart"),transitioncancel:Rs("Transition","TransitionCancel"),transitionend:Rs("Transition","TransitionEnd")},wp={},f0={};vr&&(f0=document.createElement("div").style,"AnimationEvent"in window||(delete vo.animationend.animation,delete vo.animationiteration.animation,delete vo.animationstart.animation),"TransitionEvent"in window||delete vo.transitionend.transition);function Ka(i){if(wp[i])return wp[i];if(!vo[i])return i;var u=vo[i],x;for(x in u)if(u.hasOwnProperty(x)&&x in f0)return wp[i]=u[x];return i}var p0=Ka("animationend"),m0=Ka("animationiteration"),g0=Ka("animationstart"),TT=Ka("transitionrun"),CT=Ka("transitionstart"),AT=Ka("transitioncancel"),y0=Ka("transitionend"),v0=new Map,b0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Ci(i,u){v0.set(i,u),gr(u,[i])}var ni=[],Hl=0,xp=0;function Pd(){for(var i=Hl,u=xp=Hl=0;u<i;){var x=ni[u];ni[u++]=null;var O=ni[u];ni[u++]=null;var V=ni[u];ni[u++]=null;var Y=ni[u];if(ni[u++]=null,O!==null&&V!==null){var ue=O.pending;ue===null?V.next=V:(V.next=ue.next,ue.next=V),O.pending=V}Y!==0&&_0(x,V,Y)}}function Dd(i,u,x,O){ni[Hl++]=i,ni[Hl++]=u,ni[Hl++]=x,ni[Hl++]=O,xp|=O,i.lanes|=O,i=i.alternate,i!==null&&(i.lanes|=O)}function Sp(i,u,x,O){return Dd(i,u,x,O),Nd(i)}function ta(i,u){return Dd(i,null,null,u),Nd(i)}function _0(i,u,x){i.lanes|=x;var O=i.alternate;O!==null&&(O.lanes|=x);for(var V=!1,Y=i.return;Y!==null;)Y.childLanes|=x,O=Y.alternate,O!==null&&(O.childLanes|=x),Y.tag===22&&(i=Y.stateNode,i===null||i._visibility&1||(V=!0)),i=Y,Y=Y.return;V&&u!==null&&i.tag===3&&(Y=i.stateNode,V=31-$e(x),Y=Y.hiddenUpdates,i=Y[V],i===null?Y[V]=[u]:i.push(u),u.lane=x|536870912)}function Nd(i){if(50<mc)throw mc=0,Rm=null,Error(t(185));for(var u=i.return;u!==null;)i=u,u=i.return;return i.tag===3?i.stateNode:null}var ql={},w0=new WeakMap;function si(i,u){if(typeof i=="object"&&i!==null){var x=w0.get(i);return x!==void 0?x:(u={value:i,source:u,stack:Q(u)},w0.set(i,u),u)}return{value:i,source:u,stack:Q(u)}}var Wl=[],Yl=0,Ld=null,Ud=0,ii=[],oi=0,Qa=null,bo=1,_o="";function Za(i,u){Wl[Yl++]=Ud,Wl[Yl++]=Ld,Ld=i,Ud=u}function x0(i,u,x){ii[oi++]=bo,ii[oi++]=_o,ii[oi++]=Qa,Qa=i;var O=bo;i=_o;var V=32-$e(O)-1;O&=~(1<<V),x+=1;var Y=32-$e(u)+V;if(30<Y){var ue=V-V%5;Y=(O&(1<<ue)-1).toString(32),O>>=ue,V-=ue,bo=1<<32-$e(u)+V|x<<V|O,_o=Y+i}else bo=1<<Y|x<<V|O,_o=i}function jp(i){i.return!==null&&(Za(i,1),x0(i,1,0))}function Ep(i){for(;i===Ld;)Ld=Wl[--Yl],Wl[Yl]=null,Ud=Wl[--Yl],Wl[Yl]=null;for(;i===Qa;)Qa=ii[--oi],ii[oi]=null,_o=ii[--oi],ii[oi]=null,bo=ii[--oi],ii[oi]=null}var vs=null,$n=null,_r=!1,Ai=null,Gi=!1,Tp=Error(t(519));function Ja(i){var u=Error(t(418,""));throw Yu(si(u,i)),Tp}function S0(i){var u=i.stateNode,x=i.type,O=i.memoizedProps;switch(u[Qr]=i,u[$r]=O,x){case"dialog":dr("cancel",u),dr("close",u);break;case"iframe":case"object":case"embed":dr("load",u);break;case"video":case"audio":for(x=0;x<yc.length;x++)dr(yc[x],u);break;case"source":dr("error",u);break;case"img":case"image":case"link":dr("error",u),dr("load",u);break;case"details":dr("toggle",u);break;case"input":dr("invalid",u),bi(u,O.value,O.defaultValue,O.checked,O.defaultChecked,O.type,O.name,!0),Ni(u);break;case"select":dr("invalid",u);break;case"textarea":dr("invalid",u),Us(u,O.value,O.defaultValue,O.children),Ni(u)}x=O.children,typeof x!="string"&&typeof x!="number"&&typeof x!="bigint"||u.textContent===""+x||O.suppressHydrationWarning===!0||k1(u.textContent,x)?(O.popover!=null&&(dr("beforetoggle",u),dr("toggle",u)),O.onScroll!=null&&dr("scroll",u),O.onScrollEnd!=null&&dr("scrollend",u),O.onClick!=null&&(u.onclick=gh),u=!0):u=!1,u||Ja(i)}function j0(i){for(vs=i.return;vs;)switch(vs.tag){case 3:case 27:Gi=!0;return;case 5:case 13:Gi=!1;return;default:vs=vs.return}}function qu(i){if(i!==vs)return!1;if(!_r)return j0(i),_r=!0,!1;var u=!1,x;if((x=i.tag!==3&&i.tag!==27)&&((x=i.tag===5)&&(x=i.type,x=!(x!=="form"&&x!=="button")||Wm(i.type,i.memoizedProps)),x=!x),x&&(u=!0),u&&$n&&Ja(i),j0(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,u=0;i;){if(i.nodeType===8)if(x=i.data,x==="/$"){if(u===0){$n=Oi(i.nextSibling);break e}u--}else x!=="$"&&x!=="$!"&&x!=="$?"||u++;i=i.nextSibling}$n=null}}else $n=vs?Oi(i.stateNode.nextSibling):null;return!0}function Wu(){$n=vs=null,_r=!1}function Yu(i){Ai===null?Ai=[i]:Ai.push(i)}var $u=Error(t(460)),E0=Error(t(474)),Cp={then:function(){}};function T0(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Fd(){}function C0(i,u,x){switch(x=i[x],x===void 0?i.push(u):x!==u&&(u.then(Fd,Fd),u=x),u.status){case"fulfilled":return u.value;case"rejected":throw i=u.reason,i===$u?Error(t(483)):i;default:if(typeof u.status=="string")u.then(Fd,Fd);else{if(i=qr,i!==null&&100<i.shellSuspendCounter)throw Error(t(482));i=u,i.status="pending",i.then(function(O){if(u.status==="pending"){var V=u;V.status="fulfilled",V.value=O}},function(O){if(u.status==="pending"){var V=u;V.status="rejected",V.reason=O}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw i=u.reason,i===$u?Error(t(483)):i}throw Xu=u,$u}}var Xu=null;function A0(){if(Xu===null)throw Error(t(459));var i=Xu;return Xu=null,i}var $l=null,Ku=0;function Vd(i){var u=Ku;return Ku+=1,$l===null&&($l=[]),C0($l,i,u)}function Qu(i,u){u=u.props.ref,i.ref=u!==void 0?u:null}function Bd(i,u){throw u.$$typeof===c?Error(t(525)):(i=Object.prototype.toString.call(u),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":i)))}function R0(i){var u=i._init;return u(i._payload)}function O0(i){function u(Ye,Ge){if(i){var Ke=Ye.deletions;Ke===null?(Ye.deletions=[Ge],Ye.flags|=16):Ke.push(Ge)}}function x(Ye,Ge){if(!i)return null;for(;Ge!==null;)u(Ye,Ge),Ge=Ge.sibling;return null}function O(Ye){for(var Ge=new Map;Ye!==null;)Ye.key!==null?Ge.set(Ye.key,Ye):Ge.set(Ye.index,Ye),Ye=Ye.sibling;return Ge}function V(Ye,Ge){return Ye=fa(Ye,Ge),Ye.index=0,Ye.sibling=null,Ye}function Y(Ye,Ge,Ke){return Ye.index=Ke,i?(Ke=Ye.alternate,Ke!==null?(Ke=Ke.index,Ke<Ge?(Ye.flags|=33554434,Ge):Ke):(Ye.flags|=33554434,Ge)):(Ye.flags|=1048576,Ge)}function ue(Ye){return i&&Ye.alternate===null&&(Ye.flags|=33554434),Ye}function _e(Ye,Ge,Ke,lt){return Ge===null||Ge.tag!==6?(Ge=wm(Ke,Ye.mode,lt),Ge.return=Ye,Ge):(Ge=V(Ge,Ke),Ge.return=Ye,Ge)}function ke(Ye,Ge,Ke,lt){var Rt=Ke.type;return Rt===a?st(Ye,Ge,Ke.props.children,lt,Ke.key):Ge!==null&&(Ge.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===y&&R0(Rt)===Ge.type)?(Ge=V(Ge,Ke.props),Qu(Ge,Ke),Ge.return=Ye,Ge):(Ge=ih(Ke.type,Ke.key,Ke.props,null,Ye.mode,lt),Qu(Ge,Ke),Ge.return=Ye,Ge)}function ze(Ye,Ge,Ke,lt){return Ge===null||Ge.tag!==4||Ge.stateNode.containerInfo!==Ke.containerInfo||Ge.stateNode.implementation!==Ke.implementation?(Ge=xm(Ke,Ye.mode,lt),Ge.return=Ye,Ge):(Ge=V(Ge,Ke.children||[]),Ge.return=Ye,Ge)}function st(Ye,Ge,Ke,lt,Rt){return Ge===null||Ge.tag!==7?(Ge=ul(Ke,Ye.mode,lt,Rt),Ge.return=Ye,Ge):(Ge=V(Ge,Ke),Ge.return=Ye,Ge)}function pt(Ye,Ge,Ke){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return Ge=wm(""+Ge,Ye.mode,Ke),Ge.return=Ye,Ge;if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case l:return Ke=ih(Ge.type,Ge.key,Ge.props,null,Ye.mode,Ke),Qu(Ke,Ge),Ke.return=Ye,Ke;case f:return Ge=xm(Ge,Ye.mode,Ke),Ge.return=Ye,Ge;case y:var lt=Ge._init;return Ge=lt(Ge._payload),pt(Ye,Ge,Ke)}if(M(Ge)||N(Ge))return Ge=ul(Ge,Ye.mode,Ke,null),Ge.return=Ye,Ge;if(typeof Ge.then=="function")return pt(Ye,Vd(Ge),Ke);if(Ge.$$typeof===m)return pt(Ye,rh(Ye,Ge),Ke);Bd(Ye,Ge)}return null}function Qe(Ye,Ge,Ke,lt){var Rt=Ge!==null?Ge.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return Rt!==null?null:_e(Ye,Ge,""+Ke,lt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case l:return Ke.key===Rt?ke(Ye,Ge,Ke,lt):null;case f:return Ke.key===Rt?ze(Ye,Ge,Ke,lt):null;case y:return Rt=Ke._init,Ke=Rt(Ke._payload),Qe(Ye,Ge,Ke,lt)}if(M(Ke)||N(Ke))return Rt!==null?null:st(Ye,Ge,Ke,lt,null);if(typeof Ke.then=="function")return Qe(Ye,Ge,Vd(Ke),lt);if(Ke.$$typeof===m)return Qe(Ye,Ge,rh(Ye,Ke),lt);Bd(Ye,Ke)}return null}function rt(Ye,Ge,Ke,lt,Rt){if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return Ye=Ye.get(Ke)||null,_e(Ge,Ye,""+lt,Rt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case l:return Ye=Ye.get(lt.key===null?Ke:lt.key)||null,ke(Ge,Ye,lt,Rt);case f:return Ye=Ye.get(lt.key===null?Ke:lt.key)||null,ze(Ge,Ye,lt,Rt);case y:var nr=lt._init;return lt=nr(lt._payload),rt(Ye,Ge,Ke,lt,Rt)}if(M(lt)||N(lt))return Ye=Ye.get(Ke)||null,st(Ge,Ye,lt,Rt,null);if(typeof lt.then=="function")return rt(Ye,Ge,Ke,Vd(lt),Rt);if(lt.$$typeof===m)return rt(Ye,Ge,Ke,rh(Ge,lt),Rt);Bd(Ge,lt)}return null}function Dt(Ye,Ge,Ke,lt){for(var Rt=null,nr=null,Ut=Ge,zt=Ge=0,Hn=null;Ut!==null&&zt<Ke.length;zt++){Ut.index>zt?(Hn=Ut,Ut=null):Hn=Ut.sibling;var wr=Qe(Ye,Ut,Ke[zt],lt);if(wr===null){Ut===null&&(Ut=Hn);break}i&&Ut&&wr.alternate===null&&u(Ye,Ut),Ge=Y(wr,Ge,zt),nr===null?Rt=wr:nr.sibling=wr,nr=wr,Ut=Hn}if(zt===Ke.length)return x(Ye,Ut),_r&&Za(Ye,zt),Rt;if(Ut===null){for(;zt<Ke.length;zt++)Ut=pt(Ye,Ke[zt],lt),Ut!==null&&(Ge=Y(Ut,Ge,zt),nr===null?Rt=Ut:nr.sibling=Ut,nr=Ut);return _r&&Za(Ye,zt),Rt}for(Ut=O(Ut);zt<Ke.length;zt++)Hn=rt(Ut,Ye,zt,Ke[zt],lt),Hn!==null&&(i&&Hn.alternate!==null&&Ut.delete(Hn.key===null?zt:Hn.key),Ge=Y(Hn,Ge,zt),nr===null?Rt=Hn:nr.sibling=Hn,nr=Hn);return i&&Ut.forEach(function(_a){return u(Ye,_a)}),_r&&Za(Ye,zt),Rt}function $t(Ye,Ge,Ke,lt){if(Ke==null)throw Error(t(151));for(var Rt=null,nr=null,Ut=Ge,zt=Ge=0,Hn=null,wr=Ke.next();Ut!==null&&!wr.done;zt++,wr=Ke.next()){Ut.index>zt?(Hn=Ut,Ut=null):Hn=Ut.sibling;var _a=Qe(Ye,Ut,wr.value,lt);if(_a===null){Ut===null&&(Ut=Hn);break}i&&Ut&&_a.alternate===null&&u(Ye,Ut),Ge=Y(_a,Ge,zt),nr===null?Rt=_a:nr.sibling=_a,nr=_a,Ut=Hn}if(wr.done)return x(Ye,Ut),_r&&Za(Ye,zt),Rt;if(Ut===null){for(;!wr.done;zt++,wr=Ke.next())wr=pt(Ye,wr.value,lt),wr!==null&&(Ge=Y(wr,Ge,zt),nr===null?Rt=wr:nr.sibling=wr,nr=wr);return _r&&Za(Ye,zt),Rt}for(Ut=O(Ut);!wr.done;zt++,wr=Ke.next())wr=rt(Ut,Ye,zt,wr.value,lt),wr!==null&&(i&&wr.alternate!==null&&Ut.delete(wr.key===null?zt:wr.key),Ge=Y(wr,Ge,zt),nr===null?Rt=wr:nr.sibling=wr,nr=wr);return i&&Ut.forEach(function(GC){return u(Ye,GC)}),_r&&Za(Ye,zt),Rt}function un(Ye,Ge,Ke,lt){if(typeof Ke=="object"&&Ke!==null&&Ke.type===a&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case l:e:{for(var Rt=Ke.key;Ge!==null;){if(Ge.key===Rt){if(Rt=Ke.type,Rt===a){if(Ge.tag===7){x(Ye,Ge.sibling),lt=V(Ge,Ke.props.children),lt.return=Ye,Ye=lt;break e}}else if(Ge.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===y&&R0(Rt)===Ge.type){x(Ye,Ge.sibling),lt=V(Ge,Ke.props),Qu(lt,Ke),lt.return=Ye,Ye=lt;break e}x(Ye,Ge);break}else u(Ye,Ge);Ge=Ge.sibling}Ke.type===a?(lt=ul(Ke.props.children,Ye.mode,lt,Ke.key),lt.return=Ye,Ye=lt):(lt=ih(Ke.type,Ke.key,Ke.props,null,Ye.mode,lt),Qu(lt,Ke),lt.return=Ye,Ye=lt)}return ue(Ye);case f:e:{for(Rt=Ke.key;Ge!==null;){if(Ge.key===Rt)if(Ge.tag===4&&Ge.stateNode.containerInfo===Ke.containerInfo&&Ge.stateNode.implementation===Ke.implementation){x(Ye,Ge.sibling),lt=V(Ge,Ke.children||[]),lt.return=Ye,Ye=lt;break e}else{x(Ye,Ge);break}else u(Ye,Ge);Ge=Ge.sibling}lt=xm(Ke,Ye.mode,lt),lt.return=Ye,Ye=lt}return ue(Ye);case y:return Rt=Ke._init,Ke=Rt(Ke._payload),un(Ye,Ge,Ke,lt)}if(M(Ke))return Dt(Ye,Ge,Ke,lt);if(N(Ke)){if(Rt=N(Ke),typeof Rt!="function")throw Error(t(150));return Ke=Rt.call(Ke),$t(Ye,Ge,Ke,lt)}if(typeof Ke.then=="function")return un(Ye,Ge,Vd(Ke),lt);if(Ke.$$typeof===m)return un(Ye,Ge,rh(Ye,Ke),lt);Bd(Ye,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint"?(Ke=""+Ke,Ge!==null&&Ge.tag===6?(x(Ye,Ge.sibling),lt=V(Ge,Ke),lt.return=Ye,Ye=lt):(x(Ye,Ge),lt=wm(Ke,Ye.mode,lt),lt.return=Ye,Ye=lt),ue(Ye)):x(Ye,Ge)}return function(Ye,Ge,Ke,lt){try{Ku=0;var Rt=un(Ye,Ge,Ke,lt);return $l=null,Rt}catch(Ut){if(Ut===$u)throw Ut;var nr=ci(29,Ut,null,Ye.mode);return nr.lanes=lt,nr.return=Ye,nr}finally{}}}var el=O0(!0),I0=O0(!1),Xl=ce(null),Gd=ce(0);function k0(i,u){i=Io,ve(Gd,i),ve(Xl,u),Io=i|u.baseLanes}function Ap(){ve(Gd,Io),ve(Xl,Xl.current)}function Rp(){Io=Gd.current,me(Xl),me(Gd)}var ai=ce(null),zi=null;function ra(i){var u=i.alternate;ve(Ln,Ln.current&1),ve(ai,i),zi===null&&(u===null||Xl.current!==null||u.memoizedState!==null)&&(zi=i)}function M0(i){if(i.tag===22){if(ve(Ln,Ln.current),ve(ai,i),zi===null){var u=i.alternate;u!==null&&u.memoizedState!==null&&(zi=i)}}else na()}function na(){ve(Ln,Ln.current),ve(ai,ai.current)}function wo(i){me(ai),zi===i&&(zi=null),me(Ln)}var Ln=ce(0);function zd(i){for(var u=i;u!==null;){if(u.tag===13){var x=u.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||x.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if(u.flags&128)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===i)break;for(;u.sibling===null;){if(u.return===null||u.return===i)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var RT=typeof AbortController<"u"?AbortController:function(){var i=[],u=this.signal={aborted:!1,addEventListener:function(x,O){i.push(O)}};this.abort=function(){u.aborted=!0,i.forEach(function(x){return x()})}},OT=s.unstable_scheduleCallback,IT=s.unstable_NormalPriority,Un={$$typeof:m,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Op(){return{controller:new RT,data:new Map,refCount:0}}function Zu(i){i.refCount--,i.refCount===0&&OT(IT,function(){i.controller.abort()})}var Ju=null,Ip=0,Kl=0,Ql=null;function kT(i,u){if(Ju===null){var x=Ju=[];Ip=0,Kl=Lm(),Ql={status:"pending",value:void 0,then:function(O){x.push(O)}}}return Ip++,u.then(P0,P0),u}function P0(){if(--Ip===0&&Ju!==null){Ql!==null&&(Ql.status="fulfilled");var i=Ju;Ju=null,Kl=0,Ql=null;for(var u=0;u<i.length;u++)(0,i[u])()}}function MT(i,u){var x=[],O={status:"pending",value:null,reason:null,then:function(V){x.push(V)}};return i.then(function(){O.status="fulfilled",O.value=u;for(var V=0;V<x.length;V++)(0,x[V])(u)},function(V){for(O.status="rejected",O.reason=V,V=0;V<x.length;V++)(0,x[V])(void 0)}),O}var D0=R.S;R.S=function(i,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&kT(i,u),D0!==null&&D0(i,u)};var tl=ce(null);function kp(){var i=tl.current;return i!==null?i:qr.pooledCache}function Hd(i,u){u===null?ve(tl,tl.current):ve(tl,u.pool)}function N0(){var i=kp();return i===null?null:{parent:Un._currentValue,pool:i}}var sa=0,rr=null,Nr=null,wn=null,qd=!1,Zl=!1,rl=!1,Wd=0,ec=0,Jl=null,PT=0;function mn(){throw Error(t(321))}function Mp(i,u){if(u===null)return!1;for(var x=0;x<u.length&&x<i.length;x++)if(!ar(i[x],u[x]))return!1;return!0}function Pp(i,u,x,O,V,Y){return sa=Y,rr=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,R.H=i===null||i.memoizedState===null?nl:ia,rl=!1,Y=x(O,V),rl=!1,Zl&&(Y=U0(u,x,O,V)),L0(i),Y}function L0(i){R.H=Hi;var u=Nr!==null&&Nr.next!==null;if(sa=0,wn=Nr=rr=null,qd=!1,ec=0,Jl=null,u)throw Error(t(300));i===null||Gn||(i=i.dependencies,i!==null&&th(i)&&(Gn=!0))}function U0(i,u,x,O){rr=i;var V=0;do{if(Zl&&(Jl=null),ec=0,Zl=!1,25<=V)throw Error(t(301));if(V+=1,wn=Nr=null,i.updateQueue!=null){var Y=i.updateQueue;Y.lastEffect=null,Y.events=null,Y.stores=null,Y.memoCache!=null&&(Y.memoCache.index=0)}R.H=sl,Y=u(x,O)}while(Zl);return Y}function DT(){var i=R.H,u=i.useState()[0];return u=typeof u.then=="function"?tc(u):u,i=i.useState()[0],(Nr!==null?Nr.memoizedState:null)!==i&&(rr.flags|=1024),u}function Dp(){var i=Wd!==0;return Wd=0,i}function Np(i,u,x){u.updateQueue=i.updateQueue,u.flags&=-2053,i.lanes&=~x}function Lp(i){if(qd){for(i=i.memoizedState;i!==null;){var u=i.queue;u!==null&&(u.pending=null),i=i.next}qd=!1}sa=0,wn=Nr=rr=null,Zl=!1,ec=Wd=0,Jl=null}function Os(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wn===null?rr.memoizedState=wn=i:wn=wn.next=i,wn}function xn(){if(Nr===null){var i=rr.alternate;i=i!==null?i.memoizedState:null}else i=Nr.next;var u=wn===null?rr.memoizedState:wn.next;if(u!==null)wn=u,Nr=i;else{if(i===null)throw rr.alternate===null?Error(t(467)):Error(t(310));Nr=i,i={memoizedState:Nr.memoizedState,baseState:Nr.baseState,baseQueue:Nr.baseQueue,queue:Nr.queue,next:null},wn===null?rr.memoizedState=wn=i:wn=wn.next=i}return wn}var Yd;Yd=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function tc(i){var u=ec;return ec+=1,Jl===null&&(Jl=[]),i=C0(Jl,i,u),u=rr,(wn===null?u.memoizedState:wn.next)===null&&(u=u.alternate,R.H=u===null||u.memoizedState===null?nl:ia),i}function $d(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return tc(i);if(i.$$typeof===m)return ls(i)}throw Error(t(438,String(i)))}function Up(i){var u=null,x=rr.updateQueue;if(x!==null&&(u=x.memoCache),u==null){var O=rr.alternate;O!==null&&(O=O.updateQueue,O!==null&&(O=O.memoCache,O!=null&&(u={data:O.data.map(function(V){return V.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),x===null&&(x=Yd(),rr.updateQueue=x),x.memoCache=u,x=u.data[u.index],x===void 0)for(x=u.data[u.index]=Array(i),O=0;O<i;O++)x[O]=j;return u.index++,x}function xo(i,u){return typeof u=="function"?u(i):u}function Xd(i){var u=xn();return Fp(u,Nr,i)}function Fp(i,u,x){var O=i.queue;if(O===null)throw Error(t(311));O.lastRenderedReducer=x;var V=i.baseQueue,Y=O.pending;if(Y!==null){if(V!==null){var ue=V.next;V.next=Y.next,Y.next=ue}u.baseQueue=V=Y,O.pending=null}if(Y=i.baseState,V===null)i.memoizedState=Y;else{u=V.next;var _e=ue=null,ke=null,ze=u,st=!1;do{var pt=ze.lane&-536870913;if(pt!==ze.lane?(fr&pt)===pt:(sa&pt)===pt){var Qe=ze.revertLane;if(Qe===0)ke!==null&&(ke=ke.next={lane:0,revertLane:0,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null}),pt===Kl&&(st=!0);else if((sa&Qe)===Qe){ze=ze.next,Qe===Kl&&(st=!0);continue}else pt={lane:0,revertLane:ze.revertLane,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null},ke===null?(_e=ke=pt,ue=Y):ke=ke.next=pt,rr.lanes|=Qe,pa|=Qe;pt=ze.action,rl&&x(Y,pt),Y=ze.hasEagerState?ze.eagerState:x(Y,pt)}else Qe={lane:pt,revertLane:ze.revertLane,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null},ke===null?(_e=ke=Qe,ue=Y):ke=ke.next=Qe,rr.lanes|=pt,pa|=pt;ze=ze.next}while(ze!==null&&ze!==u);if(ke===null?ue=Y:ke.next=_e,!ar(Y,i.memoizedState)&&(Gn=!0,st&&(x=Ql,x!==null)))throw x;i.memoizedState=Y,i.baseState=ue,i.baseQueue=ke,O.lastRenderedState=Y}return V===null&&(O.lanes=0),[i.memoizedState,O.dispatch]}function Vp(i){var u=xn(),x=u.queue;if(x===null)throw Error(t(311));x.lastRenderedReducer=i;var O=x.dispatch,V=x.pending,Y=u.memoizedState;if(V!==null){x.pending=null;var ue=V=V.next;do Y=i(Y,ue.action),ue=ue.next;while(ue!==V);ar(Y,u.memoizedState)||(Gn=!0),u.memoizedState=Y,u.baseQueue===null&&(u.baseState=Y),x.lastRenderedState=Y}return[Y,O]}function F0(i,u,x){var O=rr,V=xn(),Y=_r;if(Y){if(x===void 0)throw Error(t(407));x=x()}else x=u();var ue=!ar((Nr||V).memoizedState,x);if(ue&&(V.memoizedState=x,Gn=!0),V=V.queue,zp(G0.bind(null,O,V,i),[i]),V.getSnapshot!==u||ue||wn!==null&&wn.memoizedState.tag&1){if(O.flags|=2048,eu(9,B0.bind(null,O,V,x,u),{destroy:void 0},null),qr===null)throw Error(t(349));Y||sa&60||V0(O,u,x)}return x}function V0(i,u,x){i.flags|=16384,i={getSnapshot:u,value:x},u=rr.updateQueue,u===null?(u=Yd(),rr.updateQueue=u,u.stores=[i]):(x=u.stores,x===null?u.stores=[i]:x.push(i))}function B0(i,u,x,O){u.value=x,u.getSnapshot=O,z0(u)&&H0(i)}function G0(i,u,x){return x(function(){z0(u)&&H0(i)})}function z0(i){var u=i.getSnapshot;i=i.value;try{var x=u();return!ar(i,x)}catch{return!0}}function H0(i){var u=ta(i,2);u!==null&&bs(u,i,2)}function Bp(i){var u=Os();if(typeof i=="function"){var x=i;if(i=x(),rl){Ve(!0);try{x()}finally{Ve(!1)}}}return u.memoizedState=u.baseState=i,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:i},u}function q0(i,u,x,O){return i.baseState=x,Fp(i,Nr,typeof O=="function"?O:xo)}function NT(i,u,x,O,V){if(Zd(i))throw Error(t(485));if(i=u.action,i!==null){var Y={payload:V,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ue){Y.listeners.push(ue)}};R.T!==null?x(!0):Y.isTransition=!1,O(Y),x=u.pending,x===null?(Y.next=u.pending=Y,W0(u,Y)):(Y.next=x.next,u.pending=x.next=Y)}}function W0(i,u){var x=u.action,O=u.payload,V=i.state;if(u.isTransition){var Y=R.T,ue={};R.T=ue;try{var _e=x(V,O),ke=R.S;ke!==null&&ke(ue,_e),Y0(i,u,_e)}catch(ze){Gp(i,u,ze)}finally{R.T=Y}}else try{Y=x(V,O),Y0(i,u,Y)}catch(ze){Gp(i,u,ze)}}function Y0(i,u,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(O){$0(i,u,O)},function(O){return Gp(i,u,O)}):$0(i,u,x)}function $0(i,u,x){u.status="fulfilled",u.value=x,X0(u),i.state=x,u=i.pending,u!==null&&(x=u.next,x===u?i.pending=null:(x=x.next,u.next=x,W0(i,x)))}function Gp(i,u,x){var O=i.pending;if(i.pending=null,O!==null){O=O.next;do u.status="rejected",u.reason=x,X0(u),u=u.next;while(u!==O)}i.action=null}function X0(i){i=i.listeners;for(var u=0;u<i.length;u++)(0,i[u])()}function K0(i,u){return u}function Q0(i,u){if(_r){var x=qr.formState;if(x!==null){e:{var O=rr;if(_r){if($n){t:{for(var V=$n,Y=Gi;V.nodeType!==8;){if(!Y){V=null;break t}if(V=Oi(V.nextSibling),V===null){V=null;break t}}Y=V.data,V=Y==="F!"||Y==="F"?V:null}if(V){$n=Oi(V.nextSibling),O=V.data==="F!";break e}}Ja(O)}O=!1}O&&(u=x[0])}}return x=Os(),x.memoizedState=x.baseState=u,O={pending:null,lanes:0,dispatch:null,lastRenderedReducer:K0,lastRenderedState:u},x.queue=O,x=mb.bind(null,rr,O),O.dispatch=x,O=Bp(!1),Y=$p.bind(null,rr,!1,O.queue),O=Os(),V={state:u,dispatch:null,action:i,pending:null},O.queue=V,x=NT.bind(null,rr,V,Y,x),V.dispatch=x,O.memoizedState=i,[u,x,!1]}function Z0(i){var u=xn();return J0(u,Nr,i)}function J0(i,u,x){u=Fp(i,u,K0)[0],i=Xd(xo)[0],u=typeof u=="object"&&u!==null&&typeof u.then=="function"?tc(u):u;var O=xn(),V=O.queue,Y=V.dispatch;return x!==O.memoizedState&&(rr.flags|=2048,eu(9,LT.bind(null,V,x),{destroy:void 0},null)),[u,Y,i]}function LT(i,u){i.action=u}function eb(i){var u=xn(),x=Nr;if(x!==null)return J0(u,x,i);xn(),u=u.memoizedState,x=xn();var O=x.queue.dispatch;return x.memoizedState=i,[u,O,!1]}function eu(i,u,x,O){return i={tag:i,create:u,inst:x,deps:O,next:null},u=rr.updateQueue,u===null&&(u=Yd(),rr.updateQueue=u),x=u.lastEffect,x===null?u.lastEffect=i.next=i:(O=x.next,x.next=i,i.next=O,u.lastEffect=i),i}function tb(){return xn().memoizedState}function Kd(i,u,x,O){var V=Os();rr.flags|=i,V.memoizedState=eu(1|u,x,{destroy:void 0},O===void 0?null:O)}function Qd(i,u,x,O){var V=xn();O=O===void 0?null:O;var Y=V.memoizedState.inst;Nr!==null&&O!==null&&Mp(O,Nr.memoizedState.deps)?V.memoizedState=eu(u,x,Y,O):(rr.flags|=i,V.memoizedState=eu(1|u,x,Y,O))}function rb(i,u){Kd(8390656,8,i,u)}function zp(i,u){Qd(2048,8,i,u)}function nb(i,u){return Qd(4,2,i,u)}function sb(i,u){return Qd(4,4,i,u)}function ib(i,u){if(typeof u=="function"){i=i();var x=u(i);return function(){typeof x=="function"?x():u(null)}}if(u!=null)return i=i(),u.current=i,function(){u.current=null}}function ob(i,u,x){x=x!=null?x.concat([i]):null,Qd(4,4,ib.bind(null,u,i),x)}function Hp(){}function ab(i,u){var x=xn();u=u===void 0?null:u;var O=x.memoizedState;return u!==null&&Mp(u,O[1])?O[0]:(x.memoizedState=[i,u],i)}function lb(i,u){var x=xn();u=u===void 0?null:u;var O=x.memoizedState;if(u!==null&&Mp(u,O[1]))return O[0];if(O=i(),rl){Ve(!0);try{i()}finally{Ve(!1)}}return x.memoizedState=[O,u],O}function qp(i,u,x){return x===void 0||sa&1073741824?i.memoizedState=u:(i.memoizedState=x,i=c1(),rr.lanes|=i,pa|=i,x)}function ub(i,u,x,O){return ar(x,u)?x:Xl.current!==null?(i=qp(i,x,O),ar(i,u)||(Gn=!0),i):sa&42?(i=c1(),rr.lanes|=i,pa|=i,u):(Gn=!0,i.memoizedState=x)}function cb(i,u,x,O,V){var Y=z.p;z.p=Y!==0&&8>Y?Y:8;var ue=R.T,_e={};R.T=_e,$p(i,!1,u,x);try{var ke=V(),ze=R.S;if(ze!==null&&ze(_e,ke),ke!==null&&typeof ke=="object"&&typeof ke.then=="function"){var st=MT(ke,O);rc(i,u,st,qs(i))}else rc(i,u,O,qs(i))}catch(pt){rc(i,u,{then:function(){},status:"rejected",reason:pt},qs())}finally{z.p=Y,R.T=ue}}function UT(){}function Wp(i,u,x,O){if(i.tag!==5)throw Error(t(476));var V=db(i).queue;cb(i,V,u,$,x===null?UT:function(){return hb(i),x(O)})}function db(i){var u=i.memoizedState;if(u!==null)return u;u={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:$},next:null};var x={};return u.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:x},next:null},i.memoizedState=u,i=i.alternate,i!==null&&(i.memoizedState=u),u}function hb(i){var u=db(i).next.queue;rc(i,u,{},qs())}function Yp(){return ls(xc)}function fb(){return xn().memoizedState}function pb(){return xn().memoizedState}function FT(i){for(var u=i.return;u!==null;){switch(u.tag){case 24:case 3:var x=qs();i=la(x);var O=ua(u,i,x);O!==null&&(bs(O,u,x),ic(O,u,x)),u={cache:Op()},i.payload=u;return}u=u.return}}function VT(i,u,x){var O=qs();x={lane:O,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null},Zd(i)?gb(u,x):(x=Sp(i,u,x,O),x!==null&&(bs(x,i,O),yb(x,u,O)))}function mb(i,u,x){var O=qs();rc(i,u,x,O)}function rc(i,u,x,O){var V={lane:O,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null};if(Zd(i))gb(u,V);else{var Y=i.alternate;if(i.lanes===0&&(Y===null||Y.lanes===0)&&(Y=u.lastRenderedReducer,Y!==null))try{var ue=u.lastRenderedState,_e=Y(ue,x);if(V.hasEagerState=!0,V.eagerState=_e,ar(_e,ue))return Dd(i,u,V,0),qr===null&&Pd(),!1}catch{}finally{}if(x=Sp(i,u,V,O),x!==null)return bs(x,i,O),yb(x,u,O),!0}return!1}function $p(i,u,x,O){if(O={lane:2,revertLane:Lm(),action:O,hasEagerState:!1,eagerState:null,next:null},Zd(i)){if(u)throw Error(t(479))}else u=Sp(i,x,O,2),u!==null&&bs(u,i,2)}function Zd(i){var u=i.alternate;return i===rr||u!==null&&u===rr}function gb(i,u){Zl=qd=!0;var x=i.pending;x===null?u.next=u:(u.next=x.next,x.next=u),i.pending=u}function yb(i,u,x){if(x&4194176){var O=u.lanes;O&=i.pendingLanes,x|=O,u.lanes=x,Gr(i,x)}}var Hi={readContext:ls,use:$d,useCallback:mn,useContext:mn,useEffect:mn,useImperativeHandle:mn,useLayoutEffect:mn,useInsertionEffect:mn,useMemo:mn,useReducer:mn,useRef:mn,useState:mn,useDebugValue:mn,useDeferredValue:mn,useTransition:mn,useSyncExternalStore:mn,useId:mn};Hi.useCacheRefresh=mn,Hi.useMemoCache=mn,Hi.useHostTransitionStatus=mn,Hi.useFormState=mn,Hi.useActionState=mn,Hi.useOptimistic=mn;var nl={readContext:ls,use:$d,useCallback:function(i,u){return Os().memoizedState=[i,u===void 0?null:u],i},useContext:ls,useEffect:rb,useImperativeHandle:function(i,u,x){x=x!=null?x.concat([i]):null,Kd(4194308,4,ib.bind(null,u,i),x)},useLayoutEffect:function(i,u){return Kd(4194308,4,i,u)},useInsertionEffect:function(i,u){Kd(4,2,i,u)},useMemo:function(i,u){var x=Os();u=u===void 0?null:u;var O=i();if(rl){Ve(!0);try{i()}finally{Ve(!1)}}return x.memoizedState=[O,u],O},useReducer:function(i,u,x){var O=Os();if(x!==void 0){var V=x(u);if(rl){Ve(!0);try{x(u)}finally{Ve(!1)}}}else V=u;return O.memoizedState=O.baseState=V,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:V},O.queue=i,i=i.dispatch=VT.bind(null,rr,i),[O.memoizedState,i]},useRef:function(i){var u=Os();return i={current:i},u.memoizedState=i},useState:function(i){i=Bp(i);var u=i.queue,x=mb.bind(null,rr,u);return u.dispatch=x,[i.memoizedState,x]},useDebugValue:Hp,useDeferredValue:function(i,u){var x=Os();return qp(x,i,u)},useTransition:function(){var i=Bp(!1);return i=cb.bind(null,rr,i.queue,!0,!1),Os().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,u,x){var O=rr,V=Os();if(_r){if(x===void 0)throw Error(t(407));x=x()}else{if(x=u(),qr===null)throw Error(t(349));fr&60||V0(O,u,x)}V.memoizedState=x;var Y={value:x,getSnapshot:u};return V.queue=Y,rb(G0.bind(null,O,Y,i),[i]),O.flags|=2048,eu(9,B0.bind(null,O,Y,x,u),{destroy:void 0},null),x},useId:function(){var i=Os(),u=qr.identifierPrefix;if(_r){var x=_o,O=bo;x=(O&~(1<<32-$e(O)-1)).toString(32)+x,u=":"+u+"R"+x,x=Wd++,0<x&&(u+="H"+x.toString(32)),u+=":"}else x=PT++,u=":"+u+"r"+x.toString(32)+":";return i.memoizedState=u},useCacheRefresh:function(){return Os().memoizedState=FT.bind(null,rr)}};nl.useMemoCache=Up,nl.useHostTransitionStatus=Yp,nl.useFormState=Q0,nl.useActionState=Q0,nl.useOptimistic=function(i){var u=Os();u.memoizedState=u.baseState=i;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=x,u=$p.bind(null,rr,!0,x),x.dispatch=u,[i,u]};var ia={readContext:ls,use:$d,useCallback:ab,useContext:ls,useEffect:zp,useImperativeHandle:ob,useInsertionEffect:nb,useLayoutEffect:sb,useMemo:lb,useReducer:Xd,useRef:tb,useState:function(){return Xd(xo)},useDebugValue:Hp,useDeferredValue:function(i,u){var x=xn();return ub(x,Nr.memoizedState,i,u)},useTransition:function(){var i=Xd(xo)[0],u=xn().memoizedState;return[typeof i=="boolean"?i:tc(i),u]},useSyncExternalStore:F0,useId:fb};ia.useCacheRefresh=pb,ia.useMemoCache=Up,ia.useHostTransitionStatus=Yp,ia.useFormState=Z0,ia.useActionState=Z0,ia.useOptimistic=function(i,u){var x=xn();return q0(x,Nr,i,u)};var sl={readContext:ls,use:$d,useCallback:ab,useContext:ls,useEffect:zp,useImperativeHandle:ob,useInsertionEffect:nb,useLayoutEffect:sb,useMemo:lb,useReducer:Vp,useRef:tb,useState:function(){return Vp(xo)},useDebugValue:Hp,useDeferredValue:function(i,u){var x=xn();return Nr===null?qp(x,i,u):ub(x,Nr.memoizedState,i,u)},useTransition:function(){var i=Vp(xo)[0],u=xn().memoizedState;return[typeof i=="boolean"?i:tc(i),u]},useSyncExternalStore:F0,useId:fb};sl.useCacheRefresh=pb,sl.useMemoCache=Up,sl.useHostTransitionStatus=Yp,sl.useFormState=eb,sl.useActionState=eb,sl.useOptimistic=function(i,u){var x=xn();return Nr!==null?q0(x,Nr,i,u):(x.baseState=i,[i,x.queue.dispatch])};function Xp(i,u,x,O){u=i.memoizedState,x=x(O,u),x=x==null?u:P({},u,x),i.memoizedState=x,i.lanes===0&&(i.updateQueue.baseState=x)}var Kp={isMounted:function(i){return(i=i._reactInternals)?J(i)===i:!1},enqueueSetState:function(i,u,x){i=i._reactInternals;var O=qs(),V=la(O);V.payload=u,x!=null&&(V.callback=x),u=ua(i,V,O),u!==null&&(bs(u,i,O),ic(u,i,O))},enqueueReplaceState:function(i,u,x){i=i._reactInternals;var O=qs(),V=la(O);V.tag=1,V.payload=u,x!=null&&(V.callback=x),u=ua(i,V,O),u!==null&&(bs(u,i,O),ic(u,i,O))},enqueueForceUpdate:function(i,u){i=i._reactInternals;var x=qs(),O=la(x);O.tag=2,u!=null&&(O.callback=u),u=ua(i,O,x),u!==null&&(bs(u,i,x),ic(u,i,x))}};function vb(i,u,x,O,V,Y,ue){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(O,Y,ue):u.prototype&&u.prototype.isPureReactComponent?!Hr(x,O)||!Hr(V,Y):!0}function bb(i,u,x,O){i=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(x,O),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(x,O),u.state!==i&&Kp.enqueueReplaceState(u,u.state,null)}function il(i,u){var x=u;if("ref"in u){x={};for(var O in u)O!=="ref"&&(x[O]=u[O])}if(i=i.defaultProps){x===u&&(x=P({},x));for(var V in i)x[V]===void 0&&(x[V]=i[V])}return x}var Jd=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function _b(i){Jd(i)}function wb(i){console.error(i)}function xb(i){Jd(i)}function eh(i,u){try{var x=i.onUncaughtError;x(u.value,{componentStack:u.stack})}catch(O){setTimeout(function(){throw O})}}function Sb(i,u,x){try{var O=i.onCaughtError;O(x.value,{componentStack:x.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(V){setTimeout(function(){throw V})}}function Qp(i,u,x){return x=la(x),x.tag=3,x.payload={element:null},x.callback=function(){eh(i,u)},x}function jb(i){return i=la(i),i.tag=3,i}function Eb(i,u,x,O){var V=x.type.getDerivedStateFromError;if(typeof V=="function"){var Y=O.value;i.payload=function(){return V(Y)},i.callback=function(){Sb(u,x,O)}}var ue=x.stateNode;ue!==null&&typeof ue.componentDidCatch=="function"&&(i.callback=function(){Sb(u,x,O),typeof V!="function"&&(ma===null?ma=new Set([this]):ma.add(this));var _e=O.stack;this.componentDidCatch(O.value,{componentStack:_e!==null?_e:""})})}function BT(i,u,x,O,V){if(x.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){if(u=x.alternate,u!==null&&sc(u,x,V,!0),x=ai.current,x!==null){switch(x.tag){case 13:return zi===null?km():x.alternate===null&&ln===0&&(ln=3),x.flags&=-257,x.flags|=65536,x.lanes=V,O===Cp?x.flags|=16384:(u=x.updateQueue,u===null?x.updateQueue=new Set([O]):u.add(O),Pm(i,O,V)),!1;case 22:return x.flags|=65536,O===Cp?x.flags|=16384:(u=x.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([O])},x.updateQueue=u):(x=u.retryQueue,x===null?u.retryQueue=new Set([O]):x.add(O)),Pm(i,O,V)),!1}throw Error(t(435,x.tag))}return Pm(i,O,V),km(),!1}if(_r)return u=ai.current,u!==null?(!(u.flags&65536)&&(u.flags|=256),u.flags|=65536,u.lanes=V,O!==Tp&&(i=Error(t(422),{cause:O}),Yu(si(i,x)))):(O!==Tp&&(u=Error(t(423),{cause:O}),Yu(si(u,x))),i=i.current.alternate,i.flags|=65536,V&=-V,i.lanes|=V,O=si(O,x),V=Qp(i.stateNode,O,V),hm(i,V),ln!==4&&(ln=2)),!1;var Y=Error(t(520),{cause:O});if(Y=si(Y,x),fc===null?fc=[Y]:fc.push(Y),ln!==4&&(ln=2),u===null)return!0;O=si(O,x),x=u;do{switch(x.tag){case 3:return x.flags|=65536,i=V&-V,x.lanes|=i,i=Qp(x.stateNode,O,i),hm(x,i),!1;case 1:if(u=x.type,Y=x.stateNode,(x.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(ma===null||!ma.has(Y))))return x.flags|=65536,V&=-V,x.lanes|=V,V=jb(V),Eb(V,i,x,O),hm(x,V),!1}x=x.return}while(x!==null);return!1}var Tb=Error(t(461)),Gn=!1;function Xn(i,u,x,O){u.child=i===null?I0(u,null,x,O):el(u,i.child,x,O)}function Cb(i,u,x,O,V){x=x.render;var Y=u.ref;if("ref"in O){var ue={};for(var _e in O)_e!=="ref"&&(ue[_e]=O[_e])}else ue=O;return al(u),O=Pp(i,u,x,ue,Y,V),_e=Dp(),i!==null&&!Gn?(Np(i,u,V),So(i,u,V)):(_r&&_e&&jp(u),u.flags|=1,Xn(i,u,O,V),u.child)}function Ab(i,u,x,O,V){if(i===null){var Y=x.type;return typeof Y=="function"&&!_m(Y)&&Y.defaultProps===void 0&&x.compare===null?(u.tag=15,u.type=Y,Rb(i,u,Y,O,V)):(i=ih(x.type,null,O,u,u.mode,V),i.ref=u.ref,i.return=u,u.child=i)}if(Y=i.child,!om(i,V)){var ue=Y.memoizedProps;if(x=x.compare,x=x!==null?x:Hr,x(ue,O)&&i.ref===u.ref)return So(i,u,V)}return u.flags|=1,i=fa(Y,O),i.ref=u.ref,i.return=u,u.child=i}function Rb(i,u,x,O,V){if(i!==null){var Y=i.memoizedProps;if(Hr(Y,O)&&i.ref===u.ref)if(Gn=!1,u.pendingProps=O=Y,om(i,V))i.flags&131072&&(Gn=!0);else return u.lanes=i.lanes,So(i,u,V)}return Zp(i,u,x,O,V)}function Ob(i,u,x){var O=u.pendingProps,V=O.children,Y=(u.stateNode._pendingVisibility&2)!==0,ue=i!==null?i.memoizedState:null;if(nc(i,u),O.mode==="hidden"||Y){if(u.flags&128){if(O=ue!==null?ue.baseLanes|x:x,i!==null){for(V=u.child=i.child,Y=0;V!==null;)Y=Y|V.lanes|V.childLanes,V=V.sibling;u.childLanes=Y&~O}else u.childLanes=0,u.child=null;return Ib(i,u,O,x)}if(x&536870912)u.memoizedState={baseLanes:0,cachePool:null},i!==null&&Hd(u,ue!==null?ue.cachePool:null),ue!==null?k0(u,ue):Ap(),M0(u);else return u.lanes=u.childLanes=536870912,Ib(i,u,ue!==null?ue.baseLanes|x:x,x)}else ue!==null?(Hd(u,ue.cachePool),k0(u,ue),na(),u.memoizedState=null):(i!==null&&Hd(u,null),Ap(),na());return Xn(i,u,V,x),u.child}function Ib(i,u,x,O){var V=kp();return V=V===null?null:{parent:Un._currentValue,pool:V},u.memoizedState={baseLanes:x,cachePool:V},i!==null&&Hd(u,null),Ap(),M0(u),i!==null&&sc(i,u,O,!0),null}function nc(i,u){var x=u.ref;if(x===null)i!==null&&i.ref!==null&&(u.flags|=2097664);else{if(typeof x!="function"&&typeof x!="object")throw Error(t(284));(i===null||i.ref!==x)&&(u.flags|=2097664)}}function Zp(i,u,x,O,V){return al(u),x=Pp(i,u,x,O,void 0,V),O=Dp(),i!==null&&!Gn?(Np(i,u,V),So(i,u,V)):(_r&&O&&jp(u),u.flags|=1,Xn(i,u,x,V),u.child)}function kb(i,u,x,O,V,Y){return al(u),u.updateQueue=null,x=U0(u,O,x,V),L0(i),O=Dp(),i!==null&&!Gn?(Np(i,u,Y),So(i,u,Y)):(_r&&O&&jp(u),u.flags|=1,Xn(i,u,x,Y),u.child)}function Mb(i,u,x,O,V){if(al(u),u.stateNode===null){var Y=ql,ue=x.contextType;typeof ue=="object"&&ue!==null&&(Y=ls(ue)),Y=new x(O,Y),u.memoizedState=Y.state!==null&&Y.state!==void 0?Y.state:null,Y.updater=Kp,u.stateNode=Y,Y._reactInternals=u,Y=u.stateNode,Y.props=O,Y.state=u.memoizedState,Y.refs={},cm(u),ue=x.contextType,Y.context=typeof ue=="object"&&ue!==null?ls(ue):ql,Y.state=u.memoizedState,ue=x.getDerivedStateFromProps,typeof ue=="function"&&(Xp(u,x,ue,O),Y.state=u.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof Y.getSnapshotBeforeUpdate=="function"||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(ue=Y.state,typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount(),ue!==Y.state&&Kp.enqueueReplaceState(Y,Y.state,null),ac(u,O,Y,V),oc(),Y.state=u.memoizedState),typeof Y.componentDidMount=="function"&&(u.flags|=4194308),O=!0}else if(i===null){Y=u.stateNode;var _e=u.memoizedProps,ke=il(x,_e);Y.props=ke;var ze=Y.context,st=x.contextType;ue=ql,typeof st=="object"&&st!==null&&(ue=ls(st));var pt=x.getDerivedStateFromProps;st=typeof pt=="function"||typeof Y.getSnapshotBeforeUpdate=="function",_e=u.pendingProps!==_e,st||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(_e||ze!==ue)&&bb(u,Y,O,ue),aa=!1;var Qe=u.memoizedState;Y.state=Qe,ac(u,O,Y,V),oc(),ze=u.memoizedState,_e||Qe!==ze||aa?(typeof pt=="function"&&(Xp(u,x,pt,O),ze=u.memoizedState),(ke=aa||vb(u,x,ke,O,Qe,ze,ue))?(st||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(u.flags|=4194308)):(typeof Y.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=O,u.memoizedState=ze),Y.props=O,Y.state=ze,Y.context=ue,O=ke):(typeof Y.componentDidMount=="function"&&(u.flags|=4194308),O=!1)}else{Y=u.stateNode,dm(i,u),ue=u.memoizedProps,st=il(x,ue),Y.props=st,pt=u.pendingProps,Qe=Y.context,ze=x.contextType,ke=ql,typeof ze=="object"&&ze!==null&&(ke=ls(ze)),_e=x.getDerivedStateFromProps,(ze=typeof _e=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(ue!==pt||Qe!==ke)&&bb(u,Y,O,ke),aa=!1,Qe=u.memoizedState,Y.state=Qe,ac(u,O,Y,V),oc();var rt=u.memoizedState;ue!==pt||Qe!==rt||aa||i!==null&&i.dependencies!==null&&th(i.dependencies)?(typeof _e=="function"&&(Xp(u,x,_e,O),rt=u.memoizedState),(st=aa||vb(u,x,st,O,Qe,rt,ke)||i!==null&&i.dependencies!==null&&th(i.dependencies))?(ze||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(O,rt,ke),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(O,rt,ke)),typeof Y.componentDidUpdate=="function"&&(u.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof Y.componentDidUpdate!="function"||ue===i.memoizedProps&&Qe===i.memoizedState||(u.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ue===i.memoizedProps&&Qe===i.memoizedState||(u.flags|=1024),u.memoizedProps=O,u.memoizedState=rt),Y.props=O,Y.state=rt,Y.context=ke,O=st):(typeof Y.componentDidUpdate!="function"||ue===i.memoizedProps&&Qe===i.memoizedState||(u.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ue===i.memoizedProps&&Qe===i.memoizedState||(u.flags|=1024),O=!1)}return Y=O,nc(i,u),O=(u.flags&128)!==0,Y||O?(Y=u.stateNode,x=O&&typeof x.getDerivedStateFromError!="function"?null:Y.render(),u.flags|=1,i!==null&&O?(u.child=el(u,i.child,null,V),u.child=el(u,null,x,V)):Xn(i,u,x,V),u.memoizedState=Y.state,i=u.child):i=So(i,u,V),i}function Pb(i,u,x,O){return Wu(),u.flags|=256,Xn(i,u,x,O),u.child}var Jp={dehydrated:null,treeContext:null,retryLane:0};function em(i){return{baseLanes:i,cachePool:N0()}}function tm(i,u,x){return i=i!==null?i.childLanes&~x:0,u&&(i|=di),i}function Db(i,u,x){var O=u.pendingProps,V=!1,Y=(u.flags&128)!==0,ue;if((ue=Y)||(ue=i!==null&&i.memoizedState===null?!1:(Ln.current&2)!==0),ue&&(V=!0,u.flags&=-129),ue=(u.flags&32)!==0,u.flags&=-33,i===null){if(_r){if(V?ra(u):na(),_r){var _e=$n,ke;if(ke=_e){e:{for(ke=_e,_e=Gi;ke.nodeType!==8;){if(!_e){_e=null;break e}if(ke=Oi(ke.nextSibling),ke===null){_e=null;break e}}_e=ke}_e!==null?(u.memoizedState={dehydrated:_e,treeContext:Qa!==null?{id:bo,overflow:_o}:null,retryLane:536870912},ke=ci(18,null,null,0),ke.stateNode=_e,ke.return=u,u.child=ke,vs=u,$n=null,ke=!0):ke=!1}ke||Ja(u)}if(_e=u.memoizedState,_e!==null&&(_e=_e.dehydrated,_e!==null))return _e.data==="$!"?u.lanes=16:u.lanes=536870912,null;wo(u)}return _e=O.children,O=O.fallback,V?(na(),V=u.mode,_e=nm({mode:"hidden",children:_e},V),O=ul(O,V,x,null),_e.return=u,O.return=u,_e.sibling=O,u.child=_e,V=u.child,V.memoizedState=em(x),V.childLanes=tm(i,ue,x),u.memoizedState=Jp,O):(ra(u),rm(u,_e))}if(ke=i.memoizedState,ke!==null&&(_e=ke.dehydrated,_e!==null)){if(Y)u.flags&256?(ra(u),u.flags&=-257,u=sm(i,u,x)):u.memoizedState!==null?(na(),u.child=i.child,u.flags|=128,u=null):(na(),V=O.fallback,_e=u.mode,O=nm({mode:"visible",children:O.children},_e),V=ul(V,_e,x,null),V.flags|=2,O.return=u,V.return=u,O.sibling=V,u.child=O,el(u,i.child,null,x),O=u.child,O.memoizedState=em(x),O.childLanes=tm(i,ue,x),u.memoizedState=Jp,u=V);else if(ra(u),_e.data==="$!"){if(ue=_e.nextSibling&&_e.nextSibling.dataset,ue)var ze=ue.dgst;ue=ze,O=Error(t(419)),O.stack="",O.digest=ue,Yu({value:O,source:null,stack:null}),u=sm(i,u,x)}else if(Gn||sc(i,u,x,!1),ue=(x&i.childLanes)!==0,Gn||ue){if(ue=qr,ue!==null){if(O=x&-x,O&42)O=1;else switch(O){case 2:O=1;break;case 8:O=4;break;case 32:O=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:O=64;break;case 268435456:O=134217728;break;default:O=0}if(O=O&(ue.suspendedLanes|x)?0:O,O!==0&&O!==ke.retryLane)throw ke.retryLane=O,ta(i,O),bs(ue,i,O),Tb}_e.data==="$?"||km(),u=sm(i,u,x)}else _e.data==="$?"?(u.flags|=128,u.child=i.child,u=rC.bind(null,i),_e._reactRetry=u,u=null):(i=ke.treeContext,$n=Oi(_e.nextSibling),vs=u,_r=!0,Ai=null,Gi=!1,i!==null&&(ii[oi++]=bo,ii[oi++]=_o,ii[oi++]=Qa,bo=i.id,_o=i.overflow,Qa=u),u=rm(u,O.children),u.flags|=4096);return u}return V?(na(),V=O.fallback,_e=u.mode,ke=i.child,ze=ke.sibling,O=fa(ke,{mode:"hidden",children:O.children}),O.subtreeFlags=ke.subtreeFlags&31457280,ze!==null?V=fa(ze,V):(V=ul(V,_e,x,null),V.flags|=2),V.return=u,O.return=u,O.sibling=V,u.child=O,O=V,V=u.child,_e=i.child.memoizedState,_e===null?_e=em(x):(ke=_e.cachePool,ke!==null?(ze=Un._currentValue,ke=ke.parent!==ze?{parent:ze,pool:ze}:ke):ke=N0(),_e={baseLanes:_e.baseLanes|x,cachePool:ke}),V.memoizedState=_e,V.childLanes=tm(i,ue,x),u.memoizedState=Jp,O):(ra(u),x=i.child,i=x.sibling,x=fa(x,{mode:"visible",children:O.children}),x.return=u,x.sibling=null,i!==null&&(ue=u.deletions,ue===null?(u.deletions=[i],u.flags|=16):ue.push(i)),u.child=x,u.memoizedState=null,x)}function rm(i,u){return u=nm({mode:"visible",children:u},i.mode),u.return=i,i.child=u}function nm(i,u){return a1(i,u,0,null)}function sm(i,u,x){return el(u,i.child,null,x),i=rm(u,u.pendingProps.children),i.flags|=2,u.memoizedState=null,i}function Nb(i,u,x){i.lanes|=u;var O=i.alternate;O!==null&&(O.lanes|=u),lm(i.return,u,x)}function im(i,u,x,O,V){var Y=i.memoizedState;Y===null?i.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:O,tail:x,tailMode:V}:(Y.isBackwards=u,Y.rendering=null,Y.renderingStartTime=0,Y.last=O,Y.tail=x,Y.tailMode=V)}function Lb(i,u,x){var O=u.pendingProps,V=O.revealOrder,Y=O.tail;if(Xn(i,u,O.children,x),O=Ln.current,O&2)O=O&1|2,u.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=u.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Nb(i,x,u);else if(i.tag===19)Nb(i,x,u);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===u)break e;for(;i.sibling===null;){if(i.return===null||i.return===u)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}O&=1}switch(ve(Ln,O),V){case"forwards":for(x=u.child,V=null;x!==null;)i=x.alternate,i!==null&&zd(i)===null&&(V=x),x=x.sibling;x=V,x===null?(V=u.child,u.child=null):(V=x.sibling,x.sibling=null),im(u,!1,V,x,Y);break;case"backwards":for(x=null,V=u.child,u.child=null;V!==null;){if(i=V.alternate,i!==null&&zd(i)===null){u.child=V;break}i=V.sibling,V.sibling=x,x=V,V=i}im(u,!0,x,null,Y);break;case"together":im(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function So(i,u,x){if(i!==null&&(u.dependencies=i.dependencies),pa|=u.lanes,!(x&u.childLanes))if(i!==null){if(sc(i,u,x,!1),(x&u.childLanes)===0)return null}else return null;if(i!==null&&u.child!==i.child)throw Error(t(153));if(u.child!==null){for(i=u.child,x=fa(i,i.pendingProps),u.child=x,x.return=u;i.sibling!==null;)i=i.sibling,x=x.sibling=fa(i,i.pendingProps),x.return=u;x.sibling=null}return u.child}function om(i,u){return i.lanes&u?!0:(i=i.dependencies,!!(i!==null&&th(i)))}function GT(i,u,x){switch(u.tag){case 3:Se(u,u.stateNode.containerInfo),oa(u,Un,i.memoizedState.cache),Wu();break;case 27:case 5:Ne(u);break;case 4:Se(u,u.stateNode.containerInfo);break;case 10:oa(u,u.type,u.memoizedProps.value);break;case 13:var O=u.memoizedState;if(O!==null)return O.dehydrated!==null?(ra(u),u.flags|=128,null):x&u.child.childLanes?Db(i,u,x):(ra(u),i=So(i,u,x),i!==null?i.sibling:null);ra(u);break;case 19:var V=(i.flags&128)!==0;if(O=(x&u.childLanes)!==0,O||(sc(i,u,x,!1),O=(x&u.childLanes)!==0),V){if(O)return Lb(i,u,x);u.flags|=128}if(V=u.memoizedState,V!==null&&(V.rendering=null,V.tail=null,V.lastEffect=null),ve(Ln,Ln.current),O)break;return null;case 22:case 23:return u.lanes=0,Ob(i,u,x);case 24:oa(u,Un,i.memoizedState.cache)}return So(i,u,x)}function Ub(i,u,x){if(i!==null)if(i.memoizedProps!==u.pendingProps)Gn=!0;else{if(!om(i,x)&&!(u.flags&128))return Gn=!1,GT(i,u,x);Gn=!!(i.flags&131072)}else Gn=!1,_r&&u.flags&1048576&&x0(u,Ud,u.index);switch(u.lanes=0,u.tag){case 16:e:{i=u.pendingProps;var O=u.elementType,V=O._init;if(O=V(O._payload),u.type=O,typeof O=="function")_m(O)?(i=il(O,i),u.tag=1,u=Mb(null,u,O,i,x)):(u.tag=0,u=Zp(null,u,O,i,x));else{if(O!=null){if(V=O.$$typeof,V===b){u.tag=11,u=Cb(null,u,O,i,x);break e}else if(V===p){u.tag=14,u=Ab(null,u,O,i,x);break e}}throw u=T(O)||O,Error(t(306,u,""))}}return u;case 0:return Zp(i,u,u.type,u.pendingProps,x);case 1:return O=u.type,V=il(O,u.pendingProps),Mb(i,u,O,V,x);case 3:e:{if(Se(u,u.stateNode.containerInfo),i===null)throw Error(t(387));var Y=u.pendingProps;V=u.memoizedState,O=V.element,dm(i,u),ac(u,Y,null,x);var ue=u.memoizedState;if(Y=ue.cache,oa(u,Un,Y),Y!==V.cache&&um(u,[Un],x,!0),oc(),Y=ue.element,V.isDehydrated)if(V={element:Y,isDehydrated:!1,cache:ue.cache},u.updateQueue.baseState=V,u.memoizedState=V,u.flags&256){u=Pb(i,u,Y,x);break e}else if(Y!==O){O=si(Error(t(424)),u),Yu(O),u=Pb(i,u,Y,x);break e}else for($n=Oi(u.stateNode.containerInfo.firstChild),vs=u,_r=!0,Ai=null,Gi=!0,x=I0(u,null,Y,x),u.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Wu(),Y===O){u=So(i,u,x);break e}Xn(i,u,Y,x)}u=u.child}return u;case 26:return nc(i,u),i===null?(x=B1(u.type,null,u.pendingProps,null))?u.memoizedState=x:_r||(x=u.type,i=u.pendingProps,O=yh(xe.current).createElement(x),O[Qr]=u,O[$r]=i,Kn(O,x,i),Pt(O),u.stateNode=O):u.memoizedState=B1(u.type,i.memoizedProps,u.pendingProps,i.memoizedState),null;case 27:return Ne(u),i===null&&_r&&(O=u.stateNode=U1(u.type,u.pendingProps,xe.current),vs=u,Gi=!0,$n=Oi(O.firstChild)),O=u.pendingProps.children,i!==null||_r?Xn(i,u,O,x):u.child=el(u,null,O,x),nc(i,u),u.child;case 5:return i===null&&_r&&((V=O=$n)&&(O=vC(O,u.type,u.pendingProps,Gi),O!==null?(u.stateNode=O,vs=u,$n=Oi(O.firstChild),Gi=!1,V=!0):V=!1),V||Ja(u)),Ne(u),V=u.type,Y=u.pendingProps,ue=i!==null?i.memoizedProps:null,O=Y.children,Wm(V,Y)?O=null:ue!==null&&Wm(V,ue)&&(u.flags|=32),u.memoizedState!==null&&(V=Pp(i,u,DT,null,null,x),xc._currentValue=V),nc(i,u),Xn(i,u,O,x),u.child;case 6:return i===null&&_r&&((i=x=$n)&&(x=bC(x,u.pendingProps,Gi),x!==null?(u.stateNode=x,vs=u,$n=null,i=!0):i=!1),i||Ja(u)),null;case 13:return Db(i,u,x);case 4:return Se(u,u.stateNode.containerInfo),O=u.pendingProps,i===null?u.child=el(u,null,O,x):Xn(i,u,O,x),u.child;case 11:return Cb(i,u,u.type,u.pendingProps,x);case 7:return Xn(i,u,u.pendingProps,x),u.child;case 8:return Xn(i,u,u.pendingProps.children,x),u.child;case 12:return Xn(i,u,u.pendingProps.children,x),u.child;case 10:return O=u.pendingProps,oa(u,u.type,O.value),Xn(i,u,O.children,x),u.child;case 9:return V=u.type._context,O=u.pendingProps.children,al(u),V=ls(V),O=O(V),u.flags|=1,Xn(i,u,O,x),u.child;case 14:return Ab(i,u,u.type,u.pendingProps,x);case 15:return Rb(i,u,u.type,u.pendingProps,x);case 19:return Lb(i,u,x);case 22:return Ob(i,u,x);case 24:return al(u),O=ls(Un),i===null?(V=kp(),V===null&&(V=qr,Y=Op(),V.pooledCache=Y,Y.refCount++,Y!==null&&(V.pooledCacheLanes|=x),V=Y),u.memoizedState={parent:O,cache:V},cm(u),oa(u,Un,V)):(i.lanes&x&&(dm(i,u),ac(u,null,null,x),oc()),V=i.memoizedState,Y=u.memoizedState,V.parent!==O?(V={parent:O,cache:O},u.memoizedState=V,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=V),oa(u,Un,O)):(O=Y.cache,oa(u,Un,O),O!==V.cache&&um(u,[Un],x,!0))),Xn(i,u,u.pendingProps.children,x),u.child;case 29:throw u.pendingProps}throw Error(t(156,u.tag))}var am=ce(null),ol=null,jo=null;function oa(i,u,x){ve(am,u._currentValue),u._currentValue=x}function Eo(i){i._currentValue=am.current,me(am)}function lm(i,u,x){for(;i!==null;){var O=i.alternate;if((i.childLanes&u)!==u?(i.childLanes|=u,O!==null&&(O.childLanes|=u)):O!==null&&(O.childLanes&u)!==u&&(O.childLanes|=u),i===x)break;i=i.return}}function um(i,u,x,O){var V=i.child;for(V!==null&&(V.return=i);V!==null;){var Y=V.dependencies;if(Y!==null){var ue=V.child;Y=Y.firstContext;e:for(;Y!==null;){var _e=Y;Y=V;for(var ke=0;ke<u.length;ke++)if(_e.context===u[ke]){Y.lanes|=x,_e=Y.alternate,_e!==null&&(_e.lanes|=x),lm(Y.return,x,i),O||(ue=null);break e}Y=_e.next}}else if(V.tag===18){if(ue=V.return,ue===null)throw Error(t(341));ue.lanes|=x,Y=ue.alternate,Y!==null&&(Y.lanes|=x),lm(ue,x,i),ue=null}else ue=V.child;if(ue!==null)ue.return=V;else for(ue=V;ue!==null;){if(ue===i){ue=null;break}if(V=ue.sibling,V!==null){V.return=ue.return,ue=V;break}ue=ue.return}V=ue}}function sc(i,u,x,O){i=null;for(var V=u,Y=!1;V!==null;){if(!Y){if(V.flags&524288)Y=!0;else if(V.flags&262144)break}if(V.tag===10){var ue=V.alternate;if(ue===null)throw Error(t(387));if(ue=ue.memoizedProps,ue!==null){var _e=V.type;ar(V.pendingProps.value,ue.value)||(i!==null?i.push(_e):i=[_e])}}else if(V===fe.current){if(ue=V.alternate,ue===null)throw Error(t(387));ue.memoizedState.memoizedState!==V.memoizedState.memoizedState&&(i!==null?i.push(xc):i=[xc])}V=V.return}i!==null&&um(u,i,x,O),u.flags|=262144}function th(i){for(i=i.firstContext;i!==null;){if(!ar(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function al(i){ol=i,jo=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function ls(i){return Fb(ol,i)}function rh(i,u){return ol===null&&al(i),Fb(i,u)}function Fb(i,u){var x=u._currentValue;if(u={context:u,memoizedValue:x,next:null},jo===null){if(i===null)throw Error(t(308));jo=u,i.dependencies={lanes:0,firstContext:u},i.flags|=524288}else jo=jo.next=u;return x}var aa=!1;function cm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dm(i,u){i=i.updateQueue,u.updateQueue===i&&(u.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function la(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ua(i,u,x){var O=i.updateQueue;if(O===null)return null;if(O=O.shared,rn&2){var V=O.pending;return V===null?u.next=u:(u.next=V.next,V.next=u),O.pending=u,u=Nd(i),_0(i,null,x),u}return Dd(i,O,u,x),Nd(i)}function ic(i,u,x){if(u=u.updateQueue,u!==null&&(u=u.shared,(x&4194176)!==0)){var O=u.lanes;O&=i.pendingLanes,x|=O,u.lanes=x,Gr(i,x)}}function hm(i,u){var x=i.updateQueue,O=i.alternate;if(O!==null&&(O=O.updateQueue,x===O)){var V=null,Y=null;if(x=x.firstBaseUpdate,x!==null){do{var ue={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};Y===null?V=Y=ue:Y=Y.next=ue,x=x.next}while(x!==null);Y===null?V=Y=u:Y=Y.next=u}else V=Y=u;x={baseState:O.baseState,firstBaseUpdate:V,lastBaseUpdate:Y,shared:O.shared,callbacks:O.callbacks},i.updateQueue=x;return}i=x.lastBaseUpdate,i===null?x.firstBaseUpdate=u:i.next=u,x.lastBaseUpdate=u}var fm=!1;function oc(){if(fm){var i=Ql;if(i!==null)throw i}}function ac(i,u,x,O){fm=!1;var V=i.updateQueue;aa=!1;var Y=V.firstBaseUpdate,ue=V.lastBaseUpdate,_e=V.shared.pending;if(_e!==null){V.shared.pending=null;var ke=_e,ze=ke.next;ke.next=null,ue===null?Y=ze:ue.next=ze,ue=ke;var st=i.alternate;st!==null&&(st=st.updateQueue,_e=st.lastBaseUpdate,_e!==ue&&(_e===null?st.firstBaseUpdate=ze:_e.next=ze,st.lastBaseUpdate=ke))}if(Y!==null){var pt=V.baseState;ue=0,st=ze=ke=null,_e=Y;do{var Qe=_e.lane&-536870913,rt=Qe!==_e.lane;if(rt?(fr&Qe)===Qe:(O&Qe)===Qe){Qe!==0&&Qe===Kl&&(fm=!0),st!==null&&(st=st.next={lane:0,tag:_e.tag,payload:_e.payload,callback:null,next:null});e:{var Dt=i,$t=_e;Qe=u;var un=x;switch($t.tag){case 1:if(Dt=$t.payload,typeof Dt=="function"){pt=Dt.call(un,pt,Qe);break e}pt=Dt;break e;case 3:Dt.flags=Dt.flags&-65537|128;case 0:if(Dt=$t.payload,Qe=typeof Dt=="function"?Dt.call(un,pt,Qe):Dt,Qe==null)break e;pt=P({},pt,Qe);break e;case 2:aa=!0}}Qe=_e.callback,Qe!==null&&(i.flags|=64,rt&&(i.flags|=8192),rt=V.callbacks,rt===null?V.callbacks=[Qe]:rt.push(Qe))}else rt={lane:Qe,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},st===null?(ze=st=rt,ke=pt):st=st.next=rt,ue|=Qe;if(_e=_e.next,_e===null){if(_e=V.shared.pending,_e===null)break;rt=_e,_e=rt.next,rt.next=null,V.lastBaseUpdate=rt,V.shared.pending=null}}while(!0);st===null&&(ke=pt),V.baseState=ke,V.firstBaseUpdate=ze,V.lastBaseUpdate=st,Y===null&&(V.shared.lanes=0),pa|=ue,i.lanes=ue,i.memoizedState=pt}}function Vb(i,u){if(typeof i!="function")throw Error(t(191,i));i.call(u)}function Bb(i,u){var x=i.callbacks;if(x!==null)for(i.callbacks=null,i=0;i<x.length;i++)Vb(x[i],u)}function lc(i,u){try{var x=u.updateQueue,O=x!==null?x.lastEffect:null;if(O!==null){var V=O.next;x=V;do{if((x.tag&i)===i){O=void 0;var Y=x.create,ue=x.inst;O=Y(),ue.destroy=O}x=x.next}while(x!==V)}}catch(_e){Vr(u,u.return,_e)}}function ca(i,u,x){try{var O=u.updateQueue,V=O!==null?O.lastEffect:null;if(V!==null){var Y=V.next;O=Y;do{if((O.tag&i)===i){var ue=O.inst,_e=ue.destroy;if(_e!==void 0){ue.destroy=void 0,V=u;var ke=x;try{_e()}catch(ze){Vr(V,ke,ze)}}}O=O.next}while(O!==Y)}}catch(ze){Vr(u,u.return,ze)}}function Gb(i){var u=i.updateQueue;if(u!==null){var x=i.stateNode;try{Bb(u,x)}catch(O){Vr(i,i.return,O)}}}function zb(i,u,x){x.props=il(i.type,i.memoizedProps),x.state=i.memoizedState;try{x.componentWillUnmount()}catch(O){Vr(i,u,O)}}function ll(i,u){try{var x=i.ref;if(x!==null){var O=i.stateNode;switch(i.tag){case 26:case 27:case 5:var V=O;break;default:V=O}typeof x=="function"?i.refCleanup=x(V):x.current=V}}catch(Y){Vr(i,u,Y)}}function Gs(i,u){var x=i.ref,O=i.refCleanup;if(x!==null)if(typeof O=="function")try{O()}catch(V){Vr(i,u,V)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(V){Vr(i,u,V)}else x.current=null}function Hb(i){var u=i.type,x=i.memoizedProps,O=i.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":x.autoFocus&&O.focus();break e;case"img":x.src?O.src=x.src:x.srcSet&&(O.srcset=x.srcSet)}}catch(V){Vr(i,i.return,V)}}function qb(i,u,x){try{var O=i.stateNode;fC(O,i.type,x,u),O[$r]=u}catch(V){Vr(i,i.return,V)}}function Wb(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27||i.tag===4}function pm(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Wb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==27&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function mm(i,u,x){var O=i.tag;if(O===5||O===6)i=i.stateNode,u?x.nodeType===8?x.parentNode.insertBefore(i,u):x.insertBefore(i,u):(x.nodeType===8?(u=x.parentNode,u.insertBefore(i,x)):(u=x,u.appendChild(i)),x=x._reactRootContainer,x!=null||u.onclick!==null||(u.onclick=gh));else if(O!==4&&O!==27&&(i=i.child,i!==null))for(mm(i,u,x),i=i.sibling;i!==null;)mm(i,u,x),i=i.sibling}function nh(i,u,x){var O=i.tag;if(O===5||O===6)i=i.stateNode,u?x.insertBefore(i,u):x.appendChild(i);else if(O!==4&&O!==27&&(i=i.child,i!==null))for(nh(i,u,x),i=i.sibling;i!==null;)nh(i,u,x),i=i.sibling}var To=!1,an=!1,gm=!1,Yb=typeof WeakSet=="function"?WeakSet:Set,zn=null,$b=!1;function zT(i,u){if(i=i.containerInfo,Hm=Sh,i=Ar(i),kr(i)){if("selectionStart"in i)var x={start:i.selectionStart,end:i.selectionEnd};else e:{x=(x=i.ownerDocument)&&x.defaultView||window;var O=x.getSelection&&x.getSelection();if(O&&O.rangeCount!==0){x=O.anchorNode;var V=O.anchorOffset,Y=O.focusNode;O=O.focusOffset;try{x.nodeType,Y.nodeType}catch{x=null;break e}var ue=0,_e=-1,ke=-1,ze=0,st=0,pt=i,Qe=null;t:for(;;){for(var rt;pt!==x||V!==0&&pt.nodeType!==3||(_e=ue+V),pt!==Y||O!==0&&pt.nodeType!==3||(ke=ue+O),pt.nodeType===3&&(ue+=pt.nodeValue.length),(rt=pt.firstChild)!==null;)Qe=pt,pt=rt;for(;;){if(pt===i)break t;if(Qe===x&&++ze===V&&(_e=ue),Qe===Y&&++st===O&&(ke=ue),(rt=pt.nextSibling)!==null)break;pt=Qe,Qe=pt.parentNode}pt=rt}x=_e===-1||ke===-1?null:{start:_e,end:ke}}else x=null}x=x||{start:0,end:0}}else x=null;for(qm={focusedElem:i,selectionRange:x},Sh=!1,zn=u;zn!==null;)if(u=zn,i=u.child,(u.subtreeFlags&1028)!==0&&i!==null)i.return=u,zn=i;else for(;zn!==null;){switch(u=zn,Y=u.alternate,i=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if(i&1024&&Y!==null){i=void 0,x=u,V=Y.memoizedProps,Y=Y.memoizedState,O=x.stateNode;try{var Dt=il(x.type,V,x.elementType===x.type);i=O.getSnapshotBeforeUpdate(Dt,Y),O.__reactInternalSnapshotBeforeUpdate=i}catch($t){Vr(x,x.return,$t)}}break;case 3:if(i&1024){if(i=u.stateNode.containerInfo,x=i.nodeType,x===9)Xm(i);else if(x===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Xm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(i&1024)throw Error(t(163))}if(i=u.sibling,i!==null){i.return=u.return,zn=i;break}zn=u.return}return Dt=$b,$b=!1,Dt}function Xb(i,u,x){var O=x.flags;switch(x.tag){case 0:case 11:case 15:Ao(i,x),O&4&&lc(5,x);break;case 1:if(Ao(i,x),O&4)if(i=x.stateNode,u===null)try{i.componentDidMount()}catch(_e){Vr(x,x.return,_e)}else{var V=il(x.type,u.memoizedProps);u=u.memoizedState;try{i.componentDidUpdate(V,u,i.__reactInternalSnapshotBeforeUpdate)}catch(_e){Vr(x,x.return,_e)}}O&64&&Gb(x),O&512&&ll(x,x.return);break;case 3:if(Ao(i,x),O&64&&(O=x.updateQueue,O!==null)){if(i=null,x.child!==null)switch(x.child.tag){case 27:case 5:i=x.child.stateNode;break;case 1:i=x.child.stateNode}try{Bb(O,i)}catch(_e){Vr(x,x.return,_e)}}break;case 26:Ao(i,x),O&512&&ll(x,x.return);break;case 27:case 5:Ao(i,x),u===null&&O&4&&Hb(x),O&512&&ll(x,x.return);break;case 12:Ao(i,x);break;case 13:Ao(i,x),O&4&&Zb(i,x);break;case 22:if(V=x.memoizedState!==null||To,!V){u=u!==null&&u.memoizedState!==null||an;var Y=To,ue=an;To=V,(an=u)&&!ue?da(i,x,(x.subtreeFlags&8772)!==0):Ao(i,x),To=Y,an=ue}O&512&&(x.memoizedProps.mode==="manual"?ll(x,x.return):Gs(x,x.return));break;default:Ao(i,x)}}function Kb(i){var u=i.alternate;u!==null&&(i.alternate=null,Kb(u)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(u=i.stateNode,u!==null&&ot(u)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Sn=null,zs=!1;function Co(i,u,x){for(x=x.child;x!==null;)Qb(i,u,x),x=x.sibling}function Qb(i,u,x){if(ye&&typeof ye.onCommitFiberUnmount=="function")try{ye.onCommitFiberUnmount(ie,x)}catch{}switch(x.tag){case 26:an||Gs(x,u),Co(i,u,x),x.memoizedState?x.memoizedState.count--:x.stateNode&&(x=x.stateNode,x.parentNode.removeChild(x));break;case 27:an||Gs(x,u);var O=Sn,V=zs;for(Sn=x.stateNode,Co(i,u,x),x=x.stateNode,u=x.attributes;u.length;)x.removeAttributeNode(u[0]);ot(x),Sn=O,zs=V;break;case 5:an||Gs(x,u);case 6:V=Sn;var Y=zs;if(Sn=null,Co(i,u,x),Sn=V,zs=Y,Sn!==null)if(zs)try{i=Sn,O=x.stateNode,i.nodeType===8?i.parentNode.removeChild(O):i.removeChild(O)}catch(ue){Vr(x,u,ue)}else try{Sn.removeChild(x.stateNode)}catch(ue){Vr(x,u,ue)}break;case 18:Sn!==null&&(zs?(u=Sn,x=x.stateNode,u.nodeType===8?$m(u.parentNode,x):u.nodeType===1&&$m(u,x),Tc(u)):$m(Sn,x.stateNode));break;case 4:O=Sn,V=zs,Sn=x.stateNode.containerInfo,zs=!0,Co(i,u,x),Sn=O,zs=V;break;case 0:case 11:case 14:case 15:an||ca(2,x,u),an||ca(4,x,u),Co(i,u,x);break;case 1:an||(Gs(x,u),O=x.stateNode,typeof O.componentWillUnmount=="function"&&zb(x,u,O)),Co(i,u,x);break;case 21:Co(i,u,x);break;case 22:an||Gs(x,u),an=(O=an)||x.memoizedState!==null,Co(i,u,x),an=O;break;default:Co(i,u,x)}}function Zb(i,u){if(u.memoizedState===null&&(i=u.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Tc(i)}catch(x){Vr(u,u.return,x)}}function HT(i){switch(i.tag){case 13:case 19:var u=i.stateNode;return u===null&&(u=i.stateNode=new Yb),u;case 22:return i=i.stateNode,u=i._retryCache,u===null&&(u=i._retryCache=new Yb),u;default:throw Error(t(435,i.tag))}}function ym(i,u){var x=HT(i);u.forEach(function(O){var V=nC.bind(null,i,O);x.has(O)||(x.add(O),O.then(V,V))})}function li(i,u){var x=u.deletions;if(x!==null)for(var O=0;O<x.length;O++){var V=x[O],Y=i,ue=u,_e=ue;e:for(;_e!==null;){switch(_e.tag){case 27:case 5:Sn=_e.stateNode,zs=!1;break e;case 3:Sn=_e.stateNode.containerInfo,zs=!0;break e;case 4:Sn=_e.stateNode.containerInfo,zs=!0;break e}_e=_e.return}if(Sn===null)throw Error(t(160));Qb(Y,ue,V),Sn=null,zs=!1,Y=V.alternate,Y!==null&&(Y.return=null),V.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)Jb(u,i),u=u.sibling}var Ri=null;function Jb(i,u){var x=i.alternate,O=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:li(u,i),ui(i),O&4&&(ca(3,i,i.return),lc(3,i),ca(5,i,i.return));break;case 1:li(u,i),ui(i),O&512&&(an||x===null||Gs(x,x.return)),O&64&&To&&(i=i.updateQueue,i!==null&&(O=i.callbacks,O!==null&&(x=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=x===null?O:x.concat(O))));break;case 26:var V=Ri;if(li(u,i),ui(i),O&512&&(an||x===null||Gs(x,x.return)),O&4){var Y=x!==null?x.memoizedState:null;if(O=i.memoizedState,x===null)if(O===null)if(i.stateNode===null){e:{O=i.type,x=i.memoizedProps,V=V.ownerDocument||V;t:switch(O){case"title":Y=V.getElementsByTagName("title")[0],(!Y||Y[wt]||Y[Qr]||Y.namespaceURI==="http://www.w3.org/2000/svg"||Y.hasAttribute("itemprop"))&&(Y=V.createElement(O),V.head.insertBefore(Y,V.querySelector("head > title"))),Kn(Y,O,x),Y[Qr]=i,Pt(Y),O=Y;break e;case"link":var ue=H1("link","href",V).get(O+(x.href||""));if(ue){for(var _e=0;_e<ue.length;_e++)if(Y=ue[_e],Y.getAttribute("href")===(x.href==null?null:x.href)&&Y.getAttribute("rel")===(x.rel==null?null:x.rel)&&Y.getAttribute("title")===(x.title==null?null:x.title)&&Y.getAttribute("crossorigin")===(x.crossOrigin==null?null:x.crossOrigin)){ue.splice(_e,1);break t}}Y=V.createElement(O),Kn(Y,O,x),V.head.appendChild(Y);break;case"meta":if(ue=H1("meta","content",V).get(O+(x.content||""))){for(_e=0;_e<ue.length;_e++)if(Y=ue[_e],Y.getAttribute("content")===(x.content==null?null:""+x.content)&&Y.getAttribute("name")===(x.name==null?null:x.name)&&Y.getAttribute("property")===(x.property==null?null:x.property)&&Y.getAttribute("http-equiv")===(x.httpEquiv==null?null:x.httpEquiv)&&Y.getAttribute("charset")===(x.charSet==null?null:x.charSet)){ue.splice(_e,1);break t}}Y=V.createElement(O),Kn(Y,O,x),V.head.appendChild(Y);break;default:throw Error(t(468,O))}Y[Qr]=i,Pt(Y),O=Y}i.stateNode=O}else q1(V,i.type,i.stateNode);else i.stateNode=z1(V,O,i.memoizedProps);else Y!==O?(Y===null?x.stateNode!==null&&(x=x.stateNode,x.parentNode.removeChild(x)):Y.count--,O===null?q1(V,i.type,i.stateNode):z1(V,O,i.memoizedProps)):O===null&&i.stateNode!==null&&qb(i,i.memoizedProps,x.memoizedProps)}break;case 27:if(O&4&&i.alternate===null){V=i.stateNode,Y=i.memoizedProps;try{for(var ke=V.firstChild;ke;){var ze=ke.nextSibling,st=ke.nodeName;ke[wt]||st==="HEAD"||st==="BODY"||st==="SCRIPT"||st==="STYLE"||st==="LINK"&&ke.rel.toLowerCase()==="stylesheet"||V.removeChild(ke),ke=ze}for(var pt=i.type,Qe=V.attributes;Qe.length;)V.removeAttributeNode(Qe[0]);Kn(V,pt,Y),V[Qr]=i,V[$r]=Y}catch(Dt){Vr(i,i.return,Dt)}}case 5:if(li(u,i),ui(i),O&512&&(an||x===null||Gs(x,x.return)),i.flags&32){V=i.stateNode;try{en(V,"")}catch(Dt){Vr(i,i.return,Dt)}}O&4&&i.stateNode!=null&&(V=i.memoizedProps,qb(i,V,x!==null?x.memoizedProps:V)),O&1024&&(gm=!0);break;case 6:if(li(u,i),ui(i),O&4){if(i.stateNode===null)throw Error(t(162));O=i.memoizedProps,x=i.stateNode;try{x.nodeValue=O}catch(Dt){Vr(i,i.return,Dt)}}break;case 3:if(_h=null,V=Ri,Ri=vh(u.containerInfo),li(u,i),Ri=V,ui(i),O&4&&x!==null&&x.memoizedState.isDehydrated)try{Tc(u.containerInfo)}catch(Dt){Vr(i,i.return,Dt)}gm&&(gm=!1,e1(i));break;case 4:O=Ri,Ri=vh(i.stateNode.containerInfo),li(u,i),ui(i),Ri=O;break;case 12:li(u,i),ui(i);break;case 13:li(u,i),ui(i),i.child.flags&8192&&i.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(Tm=ut()),O&4&&(O=i.updateQueue,O!==null&&(i.updateQueue=null,ym(i,O)));break;case 22:if(O&512&&(an||x===null||Gs(x,x.return)),ke=i.memoizedState!==null,ze=x!==null&&x.memoizedState!==null,st=To,pt=an,To=st||ke,an=pt||ze,li(u,i),an=pt,To=st,ui(i),u=i.stateNode,u._current=i,u._visibility&=-3,u._visibility|=u._pendingVisibility&2,O&8192&&(u._visibility=ke?u._visibility&-2:u._visibility|1,ke&&(u=To||an,x===null||ze||u||tu(i)),i.memoizedProps===null||i.memoizedProps.mode!=="manual"))e:for(x=null,u=i;;){if(u.tag===5||u.tag===26||u.tag===27){if(x===null){ze=x=u;try{if(V=ze.stateNode,ke)Y=V.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none";else{ue=ze.stateNode,_e=ze.memoizedProps.style;var rt=_e!=null&&_e.hasOwnProperty("display")?_e.display:null;ue.style.display=rt==null||typeof rt=="boolean"?"":(""+rt).trim()}}catch(Dt){Vr(ze,ze.return,Dt)}}}else if(u.tag===6){if(x===null){ze=u;try{ze.stateNode.nodeValue=ke?"":ze.memoizedProps}catch(Dt){Vr(ze,ze.return,Dt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===i)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===i)break e;for(;u.sibling===null;){if(u.return===null||u.return===i)break e;x===u&&(x=null),u=u.return}x===u&&(x=null),u.sibling.return=u.return,u=u.sibling}O&4&&(O=i.updateQueue,O!==null&&(x=O.retryQueue,x!==null&&(O.retryQueue=null,ym(i,x))));break;case 19:li(u,i),ui(i),O&4&&(O=i.updateQueue,O!==null&&(i.updateQueue=null,ym(i,O)));break;case 21:break;default:li(u,i),ui(i)}}function ui(i){var u=i.flags;if(u&2){try{if(i.tag!==27){e:{for(var x=i.return;x!==null;){if(Wb(x)){var O=x;break e}x=x.return}throw Error(t(160))}switch(O.tag){case 27:var V=O.stateNode,Y=pm(i);nh(i,Y,V);break;case 5:var ue=O.stateNode;O.flags&32&&(en(ue,""),O.flags&=-33);var _e=pm(i);nh(i,_e,ue);break;case 3:case 4:var ke=O.stateNode.containerInfo,ze=pm(i);mm(i,ze,ke);break;default:throw Error(t(161))}}}catch(st){Vr(i,i.return,st)}i.flags&=-3}u&4096&&(i.flags&=-4097)}function e1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var u=i;e1(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),i=i.sibling}}function Ao(i,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)Xb(i,u.alternate,u),u=u.sibling}function tu(i){for(i=i.child;i!==null;){var u=i;switch(u.tag){case 0:case 11:case 14:case 15:ca(4,u,u.return),tu(u);break;case 1:Gs(u,u.return);var x=u.stateNode;typeof x.componentWillUnmount=="function"&&zb(u,u.return,x),tu(u);break;case 26:case 27:case 5:Gs(u,u.return),tu(u);break;case 22:Gs(u,u.return),u.memoizedState===null&&tu(u);break;default:tu(u)}i=i.sibling}}function da(i,u,x){for(x=x&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var O=u.alternate,V=i,Y=u,ue=Y.flags;switch(Y.tag){case 0:case 11:case 15:da(V,Y,x),lc(4,Y);break;case 1:if(da(V,Y,x),O=Y,V=O.stateNode,typeof V.componentDidMount=="function")try{V.componentDidMount()}catch(ze){Vr(O,O.return,ze)}if(O=Y,V=O.updateQueue,V!==null){var _e=O.stateNode;try{var ke=V.shared.hiddenCallbacks;if(ke!==null)for(V.shared.hiddenCallbacks=null,V=0;V<ke.length;V++)Vb(ke[V],_e)}catch(ze){Vr(O,O.return,ze)}}x&&ue&64&&Gb(Y),ll(Y,Y.return);break;case 26:case 27:case 5:da(V,Y,x),x&&O===null&&ue&4&&Hb(Y),ll(Y,Y.return);break;case 12:da(V,Y,x);break;case 13:da(V,Y,x),x&&ue&4&&Zb(V,Y);break;case 22:Y.memoizedState===null&&da(V,Y,x),ll(Y,Y.return);break;default:da(V,Y,x)}u=u.sibling}}function vm(i,u){var x=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(x=i.memoizedState.cachePool.pool),i=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(i=u.memoizedState.cachePool.pool),i!==x&&(i!=null&&i.refCount++,x!=null&&Zu(x))}function bm(i,u){i=null,u.alternate!==null&&(i=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==i&&(u.refCount++,i!=null&&Zu(i))}function ha(i,u,x,O){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)t1(i,u,x,O),u=u.sibling}function t1(i,u,x,O){var V=u.flags;switch(u.tag){case 0:case 11:case 15:ha(i,u,x,O),V&2048&&lc(9,u);break;case 3:ha(i,u,x,O),V&2048&&(i=null,u.alternate!==null&&(i=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==i&&(u.refCount++,i!=null&&Zu(i)));break;case 12:if(V&2048){ha(i,u,x,O),i=u.stateNode;try{var Y=u.memoizedProps,ue=Y.id,_e=Y.onPostCommit;typeof _e=="function"&&_e(ue,u.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(ke){Vr(u,u.return,ke)}}else ha(i,u,x,O);break;case 23:break;case 22:Y=u.stateNode,u.memoizedState!==null?Y._visibility&4?ha(i,u,x,O):uc(i,u):Y._visibility&4?ha(i,u,x,O):(Y._visibility|=4,ru(i,u,x,O,(u.subtreeFlags&10256)!==0)),V&2048&&vm(u.alternate,u);break;case 24:ha(i,u,x,O),V&2048&&bm(u.alternate,u);break;default:ha(i,u,x,O)}}function ru(i,u,x,O,V){for(V=V&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var Y=i,ue=u,_e=x,ke=O,ze=ue.flags;switch(ue.tag){case 0:case 11:case 15:ru(Y,ue,_e,ke,V),lc(8,ue);break;case 23:break;case 22:var st=ue.stateNode;ue.memoizedState!==null?st._visibility&4?ru(Y,ue,_e,ke,V):uc(Y,ue):(st._visibility|=4,ru(Y,ue,_e,ke,V)),V&&ze&2048&&vm(ue.alternate,ue);break;case 24:ru(Y,ue,_e,ke,V),V&&ze&2048&&bm(ue.alternate,ue);break;default:ru(Y,ue,_e,ke,V)}u=u.sibling}}function uc(i,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var x=i,O=u,V=O.flags;switch(O.tag){case 22:uc(x,O),V&2048&&vm(O.alternate,O);break;case 24:uc(x,O),V&2048&&bm(O.alternate,O);break;default:uc(x,O)}u=u.sibling}}var cc=8192;function nu(i){if(i.subtreeFlags&cc)for(i=i.child;i!==null;)r1(i),i=i.sibling}function r1(i){switch(i.tag){case 26:nu(i),i.flags&cc&&i.memoizedState!==null&&kC(Ri,i.memoizedState,i.memoizedProps);break;case 5:nu(i);break;case 3:case 4:var u=Ri;Ri=vh(i.stateNode.containerInfo),nu(i),Ri=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=cc,cc=16777216,nu(i),cc=u):nu(i));break;default:nu(i)}}function n1(i){var u=i.alternate;if(u!==null&&(i=u.child,i!==null)){u.child=null;do u=i.sibling,i.sibling=null,i=u;while(i!==null)}}function dc(i){var u=i.deletions;if(i.flags&16){if(u!==null)for(var x=0;x<u.length;x++){var O=u[x];zn=O,i1(O,i)}n1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)s1(i),i=i.sibling}function s1(i){switch(i.tag){case 0:case 11:case 15:dc(i),i.flags&2048&&ca(9,i,i.return);break;case 3:dc(i);break;case 12:dc(i);break;case 22:var u=i.stateNode;i.memoizedState!==null&&u._visibility&4&&(i.return===null||i.return.tag!==13)?(u._visibility&=-5,sh(i)):dc(i);break;default:dc(i)}}function sh(i){var u=i.deletions;if(i.flags&16){if(u!==null)for(var x=0;x<u.length;x++){var O=u[x];zn=O,i1(O,i)}n1(i)}for(i=i.child;i!==null;){switch(u=i,u.tag){case 0:case 11:case 15:ca(8,u,u.return),sh(u);break;case 22:x=u.stateNode,x._visibility&4&&(x._visibility&=-5,sh(u));break;default:sh(u)}i=i.sibling}}function i1(i,u){for(;zn!==null;){var x=zn;switch(x.tag){case 0:case 11:case 15:ca(8,x,u);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var O=x.memoizedState.cachePool.pool;O!=null&&O.refCount++}break;case 24:Zu(x.memoizedState.cache)}if(O=x.child,O!==null)O.return=x,zn=O;else e:for(x=i;zn!==null;){O=zn;var V=O.sibling,Y=O.return;if(Kb(O),O===x){zn=null;break e}if(V!==null){V.return=Y,zn=V;break e}zn=Y}}}function qT(i,u,x,O){this.tag=i,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=O,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ci(i,u,x,O){return new qT(i,u,x,O)}function _m(i){return i=i.prototype,!(!i||!i.isReactComponent)}function fa(i,u){var x=i.alternate;return x===null?(x=ci(i.tag,u,i.key,i.mode),x.elementType=i.elementType,x.type=i.type,x.stateNode=i.stateNode,x.alternate=i,i.alternate=x):(x.pendingProps=u,x.type=i.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=i.flags&31457280,x.childLanes=i.childLanes,x.lanes=i.lanes,x.child=i.child,x.memoizedProps=i.memoizedProps,x.memoizedState=i.memoizedState,x.updateQueue=i.updateQueue,u=i.dependencies,x.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},x.sibling=i.sibling,x.index=i.index,x.ref=i.ref,x.refCleanup=i.refCleanup,x}function o1(i,u){i.flags&=31457282;var x=i.alternate;return x===null?(i.childLanes=0,i.lanes=u,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=x.childLanes,i.lanes=x.lanes,i.child=x.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=x.memoizedProps,i.memoizedState=x.memoizedState,i.updateQueue=x.updateQueue,i.type=x.type,u=x.dependencies,i.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),i}function ih(i,u,x,O,V,Y){var ue=0;if(O=i,typeof i=="function")_m(i)&&(ue=1);else if(typeof i=="string")ue=OC(i,x,ge.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case a:return ul(x.children,V,Y,u);case d:ue=8,V|=24;break;case _:return i=ci(12,x,u,V|2),i.elementType=_,i.lanes=Y,i;case v:return i=ci(13,x,u,V),i.elementType=v,i.lanes=Y,i;case g:return i=ci(19,x,u,V),i.elementType=g,i.lanes=Y,i;case S:return a1(x,V,Y,u);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case w:case m:ue=10;break e;case h:ue=9;break e;case b:ue=11;break e;case p:ue=14;break e;case y:ue=16,O=null;break e}ue=29,x=Error(t(130,i===null?"null":typeof i,"")),O=null}return u=ci(ue,x,u,V),u.elementType=i,u.type=O,u.lanes=Y,u}function ul(i,u,x,O){return i=ci(7,i,O,u),i.lanes=x,i}function a1(i,u,x,O){i=ci(22,i,O,u),i.elementType=S,i.lanes=x;var V={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var Y=V._current;if(Y===null)throw Error(t(456));if(!(V._pendingVisibility&2)){var ue=ta(Y,2);ue!==null&&(V._pendingVisibility|=2,bs(ue,Y,2))}},attach:function(){var Y=V._current;if(Y===null)throw Error(t(456));if(V._pendingVisibility&2){var ue=ta(Y,2);ue!==null&&(V._pendingVisibility&=-3,bs(ue,Y,2))}}};return i.stateNode=V,i}function wm(i,u,x){return i=ci(6,i,null,u),i.lanes=x,i}function xm(i,u,x){return u=ci(4,i.children!==null?i.children:[],i.key,u),u.lanes=x,u.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},u}function Ro(i){i.flags|=4}function l1(i,u){if(u.type!=="stylesheet"||u.state.loading&4)i.flags&=-16777217;else if(i.flags|=16777216,!W1(u)){if(u=ai.current,u!==null&&((fr&4194176)===fr?zi!==null:(fr&62914560)!==fr&&!(fr&536870912)||u!==zi))throw Xu=Cp,E0;i.flags|=8192}}function oh(i,u){u!==null&&(i.flags|=4),i.flags&16384&&(u=i.tag!==22?Yr():536870912,i.lanes|=u,iu|=u)}function hc(i,u){if(!_r)switch(i.tailMode){case"hidden":u=i.tail;for(var x=null;u!==null;)u.alternate!==null&&(x=u),u=u.sibling;x===null?i.tail=null:x.sibling=null;break;case"collapsed":x=i.tail;for(var O=null;x!==null;)x.alternate!==null&&(O=x),x=x.sibling;O===null?u||i.tail===null?i.tail=null:i.tail.sibling=null:O.sibling=null}}function tn(i){var u=i.alternate!==null&&i.alternate.child===i.child,x=0,O=0;if(u)for(var V=i.child;V!==null;)x|=V.lanes|V.childLanes,O|=V.subtreeFlags&31457280,O|=V.flags&31457280,V.return=i,V=V.sibling;else for(V=i.child;V!==null;)x|=V.lanes|V.childLanes,O|=V.subtreeFlags,O|=V.flags,V.return=i,V=V.sibling;return i.subtreeFlags|=O,i.childLanes=x,u}function WT(i,u,x){var O=u.pendingProps;switch(Ep(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(u),null;case 1:return tn(u),null;case 3:return x=u.stateNode,O=null,i!==null&&(O=i.memoizedState.cache),u.memoizedState.cache!==O&&(u.flags|=2048),Eo(Un),Ce(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(i===null||i.child===null)&&(qu(u)?Ro(u):i===null||i.memoizedState.isDehydrated&&!(u.flags&256)||(u.flags|=1024,Ai!==null&&(Om(Ai),Ai=null))),tn(u),null;case 26:return x=u.memoizedState,i===null?(Ro(u),x!==null?(tn(u),l1(u,x)):(tn(u),u.flags&=-16777217)):x?x!==i.memoizedState?(Ro(u),tn(u),l1(u,x)):(tn(u),u.flags&=-16777217):(i.memoizedProps!==O&&Ro(u),tn(u),u.flags&=-16777217),null;case 27:Oe(u),x=xe.current;var V=u.type;if(i!==null&&u.stateNode!=null)i.memoizedProps!==O&&Ro(u);else{if(!O){if(u.stateNode===null)throw Error(t(166));return tn(u),null}i=ge.current,qu(u)?S0(u):(i=U1(V,O,x),u.stateNode=i,Ro(u))}return tn(u),null;case 5:if(Oe(u),x=u.type,i!==null&&u.stateNode!=null)i.memoizedProps!==O&&Ro(u);else{if(!O){if(u.stateNode===null)throw Error(t(166));return tn(u),null}if(i=ge.current,qu(u))S0(u);else{switch(V=yh(xe.current),i){case 1:i=V.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:i=V.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":i=V.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":i=V.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":i=V.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof O.is=="string"?V.createElement("select",{is:O.is}):V.createElement("select"),O.multiple?i.multiple=!0:O.size&&(i.size=O.size);break;default:i=typeof O.is=="string"?V.createElement(x,{is:O.is}):V.createElement(x)}}i[Qr]=u,i[$r]=O;e:for(V=u.child;V!==null;){if(V.tag===5||V.tag===6)i.appendChild(V.stateNode);else if(V.tag!==4&&V.tag!==27&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===u)break e;for(;V.sibling===null;){if(V.return===null||V.return===u)break e;V=V.return}V.sibling.return=V.return,V=V.sibling}u.stateNode=i;e:switch(Kn(i,x,O),x){case"button":case"input":case"select":case"textarea":i=!!O.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Ro(u)}}return tn(u),u.flags&=-16777217,null;case 6:if(i&&u.stateNode!=null)i.memoizedProps!==O&&Ro(u);else{if(typeof O!="string"&&u.stateNode===null)throw Error(t(166));if(i=xe.current,qu(u)){if(i=u.stateNode,x=u.memoizedProps,O=null,V=vs,V!==null)switch(V.tag){case 27:case 5:O=V.memoizedProps}i[Qr]=u,i=!!(i.nodeValue===x||O!==null&&O.suppressHydrationWarning===!0||k1(i.nodeValue,x)),i||Ja(u)}else i=yh(i).createTextNode(O),i[Qr]=u,u.stateNode=i}return tn(u),null;case 13:if(O=u.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(V=qu(u),O!==null&&O.dehydrated!==null){if(i===null){if(!V)throw Error(t(318));if(V=u.memoizedState,V=V!==null?V.dehydrated:null,!V)throw Error(t(317));V[Qr]=u}else Wu(),!(u.flags&128)&&(u.memoizedState=null),u.flags|=4;tn(u),V=!1}else Ai!==null&&(Om(Ai),Ai=null),V=!0;if(!V)return u.flags&256?(wo(u),u):(wo(u),null)}if(wo(u),u.flags&128)return u.lanes=x,u;if(x=O!==null,i=i!==null&&i.memoizedState!==null,x){O=u.child,V=null,O.alternate!==null&&O.alternate.memoizedState!==null&&O.alternate.memoizedState.cachePool!==null&&(V=O.alternate.memoizedState.cachePool.pool);var Y=null;O.memoizedState!==null&&O.memoizedState.cachePool!==null&&(Y=O.memoizedState.cachePool.pool),Y!==V&&(O.flags|=2048)}return x!==i&&x&&(u.child.flags|=8192),oh(u,u.updateQueue),tn(u),null;case 4:return Ce(),i===null&&Bm(u.stateNode.containerInfo),tn(u),null;case 10:return Eo(u.type),tn(u),null;case 19:if(me(Ln),V=u.memoizedState,V===null)return tn(u),null;if(O=(u.flags&128)!==0,Y=V.rendering,Y===null)if(O)hc(V,!1);else{if(ln!==0||i!==null&&i.flags&128)for(i=u.child;i!==null;){if(Y=zd(i),Y!==null){for(u.flags|=128,hc(V,!1),i=Y.updateQueue,u.updateQueue=i,oh(u,i),u.subtreeFlags=0,i=x,x=u.child;x!==null;)o1(x,i),x=x.sibling;return ve(Ln,Ln.current&1|2),u.child}i=i.sibling}V.tail!==null&&ut()>ah&&(u.flags|=128,O=!0,hc(V,!1),u.lanes=4194304)}else{if(!O)if(i=zd(Y),i!==null){if(u.flags|=128,O=!0,i=i.updateQueue,u.updateQueue=i,oh(u,i),hc(V,!0),V.tail===null&&V.tailMode==="hidden"&&!Y.alternate&&!_r)return tn(u),null}else 2*ut()-V.renderingStartTime>ah&&x!==536870912&&(u.flags|=128,O=!0,hc(V,!1),u.lanes=4194304);V.isBackwards?(Y.sibling=u.child,u.child=Y):(i=V.last,i!==null?i.sibling=Y:u.child=Y,V.last=Y)}return V.tail!==null?(u=V.tail,V.rendering=u,V.tail=u.sibling,V.renderingStartTime=ut(),u.sibling=null,i=Ln.current,ve(Ln,O?i&1|2:i&1),u):(tn(u),null);case 22:case 23:return wo(u),Rp(),O=u.memoizedState!==null,i!==null?i.memoizedState!==null!==O&&(u.flags|=8192):O&&(u.flags|=8192),O?x&536870912&&!(u.flags&128)&&(tn(u),u.subtreeFlags&6&&(u.flags|=8192)):tn(u),x=u.updateQueue,x!==null&&oh(u,x.retryQueue),x=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(x=i.memoizedState.cachePool.pool),O=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(O=u.memoizedState.cachePool.pool),O!==x&&(u.flags|=2048),i!==null&&me(tl),null;case 24:return x=null,i!==null&&(x=i.memoizedState.cache),u.memoizedState.cache!==x&&(u.flags|=2048),Eo(Un),tn(u),null;case 25:return null}throw Error(t(156,u.tag))}function YT(i,u){switch(Ep(u),u.tag){case 1:return i=u.flags,i&65536?(u.flags=i&-65537|128,u):null;case 3:return Eo(Un),Ce(),i=u.flags,i&65536&&!(i&128)?(u.flags=i&-65537|128,u):null;case 26:case 27:case 5:return Oe(u),null;case 13:if(wo(u),i=u.memoizedState,i!==null&&i.dehydrated!==null){if(u.alternate===null)throw Error(t(340));Wu()}return i=u.flags,i&65536?(u.flags=i&-65537|128,u):null;case 19:return me(Ln),null;case 4:return Ce(),null;case 10:return Eo(u.type),null;case 22:case 23:return wo(u),Rp(),i!==null&&me(tl),i=u.flags,i&65536?(u.flags=i&-65537|128,u):null;case 24:return Eo(Un),null;case 25:return null;default:return null}}function u1(i,u){switch(Ep(u),u.tag){case 3:Eo(Un),Ce();break;case 26:case 27:case 5:Oe(u);break;case 4:Ce();break;case 13:wo(u);break;case 19:me(Ln);break;case 10:Eo(u.type);break;case 22:case 23:wo(u),Rp(),i!==null&&me(tl);break;case 24:Eo(Un)}}var $T={getCacheForType:function(i){var u=ls(Un),x=u.data.get(i);return x===void 0&&(x=i(),u.data.set(i,x)),x}},XT=typeof WeakMap=="function"?WeakMap:Map,rn=0,qr=null,ir=null,fr=0,Wr=0,Hs=null,Oo=!1,su=!1,Sm=!1,Io=0,ln=0,pa=0,cl=0,jm=0,di=0,iu=0,fc=null,qi=null,Em=!1,Tm=0,ah=1/0,lh=null,ma=null,uh=!1,dl=null,pc=0,Cm=0,Am=null,mc=0,Rm=null;function qs(){if(rn&2&&fr!==0)return fr&-fr;if(R.T!==null){var i=Kl;return i!==0?i:Lm()}return mr()}function c1(){di===0&&(di=!(fr&536870912)||_r?yr():536870912);var i=ai.current;return i!==null&&(i.flags|=32),di}function bs(i,u,x){(i===qr&&Wr===2||i.cancelPendingCommit!==null)&&(ou(i,0),ko(i,fr,di,!1)),Bt(i,x),(!(rn&2)||i!==qr)&&(i===qr&&(!(rn&2)&&(cl|=x),ln===4&&ko(i,fr,di,!1)),Wi(i))}function d1(i,u,x){if(rn&6)throw Error(t(327));var O=!x&&(u&60)===0&&(u&i.expiredLanes)===0||Nt(i,u),V=O?ZT(i,u):Mm(i,u,!0),Y=O;do{if(V===0){su&&!O&&ko(i,u,0,!1);break}else if(V===6)ko(i,u,0,!Oo);else{if(x=i.current.alternate,Y&&!KT(x)){V=Mm(i,u,!1),Y=!1;continue}if(V===2){if(Y=u,i.errorRecoveryDisabledLanes&Y)var ue=0;else ue=i.pendingLanes&-536870913,ue=ue!==0?ue:ue&536870912?536870912:0;if(ue!==0){u=ue;e:{var _e=i;V=fc;var ke=_e.current.memoizedState.isDehydrated;if(ke&&(ou(_e,ue).flags|=256),ue=Mm(_e,ue,!1),ue!==2){if(Sm&&!ke){_e.errorRecoveryDisabledLanes|=Y,cl|=Y,V=4;break e}Y=qi,qi=V,Y!==null&&Om(Y)}V=ue}if(Y=!1,V!==2)continue}}if(V===1){ou(i,0),ko(i,u,0,!0);break}e:{switch(O=i,V){case 0:case 1:throw Error(t(345));case 4:if((u&4194176)===u){ko(O,u,di,!Oo);break e}break;case 2:qi=null;break;case 3:case 5:break;default:throw Error(t(329))}if(O.finishedWork=x,O.finishedLanes=u,(u&62914560)===u&&(Y=Tm+300-ut(),10<Y)){if(ko(O,u,di,!Oo),jt(O,0)!==0)break e;O.timeoutHandle=D1(h1.bind(null,O,x,qi,lh,Em,u,di,cl,iu,Oo,2,-0,0),Y);break e}h1(O,x,qi,lh,Em,u,di,cl,iu,Oo,0,-0,0)}}break}while(!0);Wi(i)}function Om(i){qi===null?qi=i:qi.push.apply(qi,i)}function h1(i,u,x,O,V,Y,ue,_e,ke,ze,st,pt,Qe){var rt=u.subtreeFlags;if((rt&8192||(rt&16785408)===16785408)&&(wc={stylesheets:null,count:0,unsuspend:IC},r1(u),u=MC(),u!==null)){i.cancelPendingCommit=u(b1.bind(null,i,x,O,V,ue,_e,ke,1,pt,Qe)),ko(i,Y,ue,!ze);return}b1(i,x,O,V,ue,_e,ke,st,pt,Qe)}function KT(i){for(var u=i;;){var x=u.tag;if((x===0||x===11||x===15)&&u.flags&16384&&(x=u.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var O=0;O<x.length;O++){var V=x[O],Y=V.getSnapshot;V=V.value;try{if(!ar(Y(),V))return!1}catch{return!1}}if(x=u.child,u.subtreeFlags&16384&&x!==null)x.return=u,u=x;else{if(u===i)break;for(;u.sibling===null;){if(u.return===null||u.return===i)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function ko(i,u,x,O){u&=~jm,u&=~cl,i.suspendedLanes|=u,i.pingedLanes&=~u,O&&(i.warmLanes|=u),O=i.expirationTimes;for(var V=u;0<V;){var Y=31-$e(V),ue=1<<Y;O[Y]=-1,V&=~ue}x!==0&&Zt(i,x,u)}function ch(){return rn&6?!0:(gc(0),!1)}function Im(){if(ir!==null){if(Wr===0)var i=ir.return;else i=ir,jo=ol=null,Lp(i),$l=null,Ku=0,i=ir;for(;i!==null;)u1(i.alternate,i),i=i.return;ir=null}}function ou(i,u){i.finishedWork=null,i.finishedLanes=0;var x=i.timeoutHandle;x!==-1&&(i.timeoutHandle=-1,mC(x)),x=i.cancelPendingCommit,x!==null&&(i.cancelPendingCommit=null,x()),Im(),qr=i,ir=x=fa(i.current,null),fr=u,Wr=0,Hs=null,Oo=!1,su=Nt(i,u),Sm=!1,iu=di=jm=cl=pa=ln=0,qi=fc=null,Em=!1,u&8&&(u|=u&32);var O=i.entangledLanes;if(O!==0)for(i=i.entanglements,O&=u;0<O;){var V=31-$e(O),Y=1<<V;u|=i[V],O&=~Y}return Io=u,Pd(),x}function f1(i,u){rr=null,R.H=Hi,u===$u?(u=A0(),Wr=3):u===E0?(u=A0(),Wr=4):Wr=u===Tb?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Hs=u,ir===null&&(ln=1,eh(i,si(u,i.current)))}function p1(){var i=R.H;return R.H=Hi,i===null?Hi:i}function m1(){var i=R.A;return R.A=$T,i}function km(){ln=4,Oo||(fr&4194176)!==fr&&ai.current!==null||(su=!0),!(pa&134217727)&&!(cl&134217727)||qr===null||ko(qr,fr,di,!1)}function Mm(i,u,x){var O=rn;rn|=2;var V=p1(),Y=m1();(qr!==i||fr!==u)&&(lh=null,ou(i,u)),u=!1;var ue=ln;e:do try{if(Wr!==0&&ir!==null){var _e=ir,ke=Hs;switch(Wr){case 8:Im(),ue=6;break e;case 3:case 2:case 6:ai.current===null&&(u=!0);var ze=Wr;if(Wr=0,Hs=null,au(i,_e,ke,ze),x&&su){ue=0;break e}break;default:ze=Wr,Wr=0,Hs=null,au(i,_e,ke,ze)}}QT(),ue=ln;break}catch(st){f1(i,st)}while(!0);return u&&i.shellSuspendCounter++,jo=ol=null,rn=O,R.H=V,R.A=Y,ir===null&&(qr=null,fr=0,Pd()),ue}function QT(){for(;ir!==null;)g1(ir)}function ZT(i,u){var x=rn;rn|=2;var O=p1(),V=m1();qr!==i||fr!==u?(lh=null,ah=ut()+500,ou(i,u)):su=Nt(i,u);e:do try{if(Wr!==0&&ir!==null){u=ir;var Y=Hs;t:switch(Wr){case 1:Wr=0,Hs=null,au(i,u,Y,1);break;case 2:if(T0(Y)){Wr=0,Hs=null,y1(u);break}u=function(){Wr===2&&qr===i&&(Wr=7),Wi(i)},Y.then(u,u);break e;case 3:Wr=7;break e;case 4:Wr=5;break e;case 7:T0(Y)?(Wr=0,Hs=null,y1(u)):(Wr=0,Hs=null,au(i,u,Y,7));break;case 5:var ue=null;switch(ir.tag){case 26:ue=ir.memoizedState;case 5:case 27:var _e=ir;if(!ue||W1(ue)){Wr=0,Hs=null;var ke=_e.sibling;if(ke!==null)ir=ke;else{var ze=_e.return;ze!==null?(ir=ze,dh(ze)):ir=null}break t}}Wr=0,Hs=null,au(i,u,Y,5);break;case 6:Wr=0,Hs=null,au(i,u,Y,6);break;case 8:Im(),ln=6;break e;default:throw Error(t(462))}}JT();break}catch(st){f1(i,st)}while(!0);return jo=ol=null,R.H=O,R.A=V,rn=x,ir!==null?0:(qr=null,fr=0,Pd(),ln)}function JT(){for(;ir!==null&&!Fe();)g1(ir)}function g1(i){var u=Ub(i.alternate,i,Io);i.memoizedProps=i.pendingProps,u===null?dh(i):ir=u}function y1(i){var u=i,x=u.alternate;switch(u.tag){case 15:case 0:u=kb(x,u,u.pendingProps,u.type,void 0,fr);break;case 11:u=kb(x,u,u.pendingProps,u.type.render,u.ref,fr);break;case 5:Lp(u);default:u1(x,u),u=ir=o1(u,Io),u=Ub(x,u,Io)}i.memoizedProps=i.pendingProps,u===null?dh(i):ir=u}function au(i,u,x,O){jo=ol=null,Lp(u),$l=null,Ku=0;var V=u.return;try{if(BT(i,V,u,x,fr)){ln=1,eh(i,si(x,i.current)),ir=null;return}}catch(Y){if(V!==null)throw ir=V,Y;ln=1,eh(i,si(x,i.current)),ir=null;return}u.flags&32768?(_r||O===1?i=!0:su||fr&536870912?i=!1:(Oo=i=!0,(O===2||O===3||O===6)&&(O=ai.current,O!==null&&O.tag===13&&(O.flags|=16384))),v1(u,i)):dh(u)}function dh(i){var u=i;do{if(u.flags&32768){v1(u,Oo);return}i=u.return;var x=WT(u.alternate,u,Io);if(x!==null){ir=x;return}if(u=u.sibling,u!==null){ir=u;return}ir=u=i}while(u!==null);ln===0&&(ln=5)}function v1(i,u){do{var x=YT(i.alternate,i);if(x!==null){x.flags&=32767,ir=x;return}if(x=i.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!u&&(i=i.sibling,i!==null)){ir=i;return}ir=i=x}while(i!==null);ln=6,ir=null}function b1(i,u,x,O,V,Y,ue,_e,ke,ze){var st=R.T,pt=z.p;try{z.p=2,R.T=null,eC(i,u,x,O,pt,V,Y,ue,_e,ke,ze)}finally{R.T=st,z.p=pt}}function eC(i,u,x,O,V,Y,ue,_e){do lu();while(dl!==null);if(rn&6)throw Error(t(327));var ke=i.finishedWork;if(O=i.finishedLanes,ke===null)return null;if(i.finishedWork=null,i.finishedLanes=0,ke===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0,i.cancelPendingCommit=null;var ze=ke.lanes|ke.childLanes;if(ze|=xp,Cr(i,O,ze,Y,ue,_e),i===qr&&(ir=qr=null,fr=0),!(ke.subtreeFlags&10256)&&!(ke.flags&10256)||uh||(uh=!0,Cm=ze,Am=x,sC(Le,function(){return lu(),null})),x=(ke.flags&15990)!==0,ke.subtreeFlags&15990||x?(x=R.T,R.T=null,Y=z.p,z.p=2,ue=rn,rn|=4,zT(i,ke),Jb(ke,i),Sr(qm,i.containerInfo),Sh=!!Hm,qm=Hm=null,i.current=ke,Xb(i,ke.alternate,ke),mt(),rn=ue,z.p=Y,R.T=x):i.current=ke,uh?(uh=!1,dl=i,pc=O):_1(i,ze),ze=i.pendingLanes,ze===0&&(ma=null),Pe(ke.stateNode),Wi(i),u!==null)for(V=i.onRecoverableError,ke=0;ke<u.length;ke++)ze=u[ke],V(ze.value,{componentStack:ze.stack});return pc&3&&lu(),ze=i.pendingLanes,O&4194218&&ze&42?i===Rm?mc++:(mc=0,Rm=i):mc=0,gc(0),null}function _1(i,u){(i.pooledCacheLanes&=u)===0&&(u=i.pooledCache,u!=null&&(i.pooledCache=null,Zu(u)))}function lu(){if(dl!==null){var i=dl,u=Cm;Cm=0;var x=Zr(pc),O=R.T,V=z.p;try{if(z.p=32>x?32:x,R.T=null,dl===null)var Y=!1;else{x=Am,Am=null;var ue=dl,_e=pc;if(dl=null,pc=0,rn&6)throw Error(t(331));var ke=rn;if(rn|=4,s1(ue.current),t1(ue,ue.current,_e,x),rn=ke,gc(0,!1),ye&&typeof ye.onPostCommitFiberRoot=="function")try{ye.onPostCommitFiberRoot(ie,ue)}catch{}Y=!0}return Y}finally{z.p=V,R.T=O,_1(i,u)}}return!1}function w1(i,u,x){u=si(x,u),u=Qp(i.stateNode,u,2),i=ua(i,u,2),i!==null&&(Bt(i,2),Wi(i))}function Vr(i,u,x){if(i.tag===3)w1(i,i,x);else for(;u!==null;){if(u.tag===3){w1(u,i,x);break}else if(u.tag===1){var O=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof O.componentDidCatch=="function"&&(ma===null||!ma.has(O))){i=si(x,i),x=jb(2),O=ua(u,x,2),O!==null&&(Eb(x,O,u,i),Bt(O,2),Wi(O));break}}u=u.return}}function Pm(i,u,x){var O=i.pingCache;if(O===null){O=i.pingCache=new XT;var V=new Set;O.set(u,V)}else V=O.get(u),V===void 0&&(V=new Set,O.set(u,V));V.has(x)||(Sm=!0,V.add(x),i=tC.bind(null,i,u,x),u.then(i,i))}function tC(i,u,x){var O=i.pingCache;O!==null&&O.delete(u),i.pingedLanes|=i.suspendedLanes&x,i.warmLanes&=~x,qr===i&&(fr&x)===x&&(ln===4||ln===3&&(fr&62914560)===fr&&300>ut()-Tm?!(rn&2)&&ou(i,0):jm|=x,iu===fr&&(iu=0)),Wi(i)}function x1(i,u){u===0&&(u=Yr()),i=ta(i,u),i!==null&&(Bt(i,u),Wi(i))}function rC(i){var u=i.memoizedState,x=0;u!==null&&(x=u.retryLane),x1(i,x)}function nC(i,u){var x=0;switch(i.tag){case 13:var O=i.stateNode,V=i.memoizedState;V!==null&&(x=V.retryLane);break;case 19:O=i.stateNode;break;case 22:O=i.stateNode._retryCache;break;default:throw Error(t(314))}O!==null&&O.delete(u),x1(i,x)}function sC(i,u){return Ue(i,u)}var hh=null,uu=null,Dm=!1,fh=!1,Nm=!1,hl=0;function Wi(i){i!==uu&&i.next===null&&(uu===null?hh=uu=i:uu=uu.next=i),fh=!0,Dm||(Dm=!0,oC(iC))}function gc(i,u){if(!Nm&&fh){Nm=!0;do for(var x=!1,O=hh;O!==null;){if(i!==0){var V=O.pendingLanes;if(V===0)var Y=0;else{var ue=O.suspendedLanes,_e=O.pingedLanes;Y=(1<<31-$e(42|i)+1)-1,Y&=V&~(ue&~_e),Y=Y&201326677?Y&201326677|1:Y?Y|2:0}Y!==0&&(x=!0,E1(O,Y))}else Y=fr,Y=jt(O,O===qr?Y:0),!(Y&3)||Nt(O,Y)||(x=!0,E1(O,Y));O=O.next}while(x);Nm=!1}}function iC(){fh=Dm=!1;var i=0;hl!==0&&(pC()&&(i=hl),hl=0);for(var u=ut(),x=null,O=hh;O!==null;){var V=O.next,Y=S1(O,u);Y===0?(O.next=null,x===null?hh=V:x.next=V,V===null&&(uu=x)):(x=O,(i!==0||Y&3)&&(fh=!0)),O=V}gc(i)}function S1(i,u){for(var x=i.suspendedLanes,O=i.pingedLanes,V=i.expirationTimes,Y=i.pendingLanes&-62914561;0<Y;){var ue=31-$e(Y),_e=1<<ue,ke=V[ue];ke===-1?(!(_e&x)||_e&O)&&(V[ue]=kt(_e,u)):ke<=u&&(i.expiredLanes|=_e),Y&=~_e}if(u=qr,x=fr,x=jt(i,i===u?x:0),O=i.callbackNode,x===0||i===u&&Wr===2||i.cancelPendingCommit!==null)return O!==null&&O!==null&&et(O),i.callbackNode=null,i.callbackPriority=0;if(!(x&3)||Nt(i,x)){if(u=x&-x,u===i.callbackPriority)return u;switch(O!==null&&et(O),Zr(x)){case 2:case 8:x=at;break;case 32:x=Le;break;case 268435456:x=Ie;break;default:x=Le}return O=j1.bind(null,i),x=Ue(x,O),i.callbackPriority=u,i.callbackNode=x,u}return O!==null&&O!==null&&et(O),i.callbackPriority=2,i.callbackNode=null,2}function j1(i,u){var x=i.callbackNode;if(lu()&&i.callbackNode!==x)return null;var O=fr;return O=jt(i,i===qr?O:0),O===0?null:(d1(i,O,u),S1(i,ut()),i.callbackNode!=null&&i.callbackNode===x?j1.bind(null,i):null)}function E1(i,u){if(lu())return null;d1(i,u,!0)}function oC(i){gC(function(){rn&6?Ue(ft,i):i()})}function Lm(){return hl===0&&(hl=yr()),hl}function T1(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Fs(""+i)}function C1(i,u){var x=u.ownerDocument.createElement("input");return x.name=u.name,x.value=u.value,i.id&&x.setAttribute("form",i.id),u.parentNode.insertBefore(x,u),i=new FormData(i),x.parentNode.removeChild(x),i}function aC(i,u,x,O,V){if(u==="submit"&&x&&x.stateNode===V){var Y=T1((V[$r]||null).action),ue=O.submitter;ue&&(u=(u=ue[$r]||null)?T1(u.formAction):ue.getAttribute("formAction"),u!==null&&(Y=u,ue=null));var _e=new co("action","action",null,O,V);i.push({event:_e,listeners:[{instance:null,listener:function(){if(O.defaultPrevented){if(hl!==0){var ke=ue?C1(V,ue):new FormData(V);Wp(x,{pending:!0,data:ke,method:V.method,action:Y},null,ke)}}else typeof Y=="function"&&(_e.preventDefault(),ke=ue?C1(V,ue):new FormData(V),Wp(x,{pending:!0,data:ke,method:V.method,action:Y},Y,ke))},currentTarget:V}]})}}for(var Um=0;Um<b0.length;Um++){var Fm=b0[Um],lC=Fm.toLowerCase(),uC=Fm[0].toUpperCase()+Fm.slice(1);Ci(lC,"on"+uC)}Ci(p0,"onAnimationEnd"),Ci(m0,"onAnimationIteration"),Ci(g0,"onAnimationStart"),Ci("dblclick","onDoubleClick"),Ci("focusin","onFocus"),Ci("focusout","onBlur"),Ci(TT,"onTransitionRun"),Ci(CT,"onTransitionStart"),Ci(AT,"onTransitionCancel"),Ci(y0,"onTransitionEnd"),sr("onMouseEnter",["mouseout","mouseover"]),sr("onMouseLeave",["mouseout","mouseover"]),sr("onPointerEnter",["pointerout","pointerover"]),sr("onPointerLeave",["pointerout","pointerover"]),gr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gr("onBeforeInput",["compositionend","keypress","textInput","paste"]),gr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yc));function A1(i,u){u=(u&4)!==0;for(var x=0;x<i.length;x++){var O=i[x],V=O.event;O=O.listeners;e:{var Y=void 0;if(u)for(var ue=O.length-1;0<=ue;ue--){var _e=O[ue],ke=_e.instance,ze=_e.currentTarget;if(_e=_e.listener,ke!==Y&&V.isPropagationStopped())break e;Y=_e,V.currentTarget=ze;try{Y(V)}catch(st){Jd(st)}V.currentTarget=null,Y=ke}else for(ue=0;ue<O.length;ue++){if(_e=O[ue],ke=_e.instance,ze=_e.currentTarget,_e=_e.listener,ke!==Y&&V.isPropagationStopped())break e;Y=_e,V.currentTarget=ze;try{Y(V)}catch(st){Jd(st)}V.currentTarget=null,Y=ke}}}}function dr(i,u){var x=u[Ls];x===void 0&&(x=u[Ls]=new Set);var O=i+"__bubble";x.has(O)||(R1(u,i,2,!1),x.add(O))}function Vm(i,u,x){var O=0;u&&(O|=4),R1(x,i,O,u)}var ph="_reactListening"+Math.random().toString(36).slice(2);function Bm(i){if(!i[ph]){i[ph]=!0,xt.forEach(function(x){x!=="selectionchange"&&(cC.has(x)||Vm(x,!1,i),Vm(x,!0,i))});var u=i.nodeType===9?i:i.ownerDocument;u===null||u[ph]||(u[ph]=!0,Vm("selectionchange",!1,u))}}function R1(i,u,x,O){switch(Z1(u)){case 2:var V=NC;break;case 8:V=LC;break;default:V=eg}x=V.bind(null,u,x,i),V=void 0,!Ts||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(V=!0),O?V!==void 0?i.addEventListener(u,x,{capture:!0,passive:V}):i.addEventListener(u,x,!0):V!==void 0?i.addEventListener(u,x,{passive:V}):i.addEventListener(u,x,!1)}function Gm(i,u,x,O,V){var Y=O;if(!(u&1)&&!(u&2)&&O!==null)e:for(;;){if(O===null)return;var ue=O.tag;if(ue===3||ue===4){var _e=O.stateNode.containerInfo;if(_e===V||_e.nodeType===8&&_e.parentNode===V)break;if(ue===4)for(ue=O.return;ue!==null;){var ke=ue.tag;if((ke===3||ke===4)&&(ke=ue.stateNode.containerInfo,ke===V||ke.nodeType===8&&ke.parentNode===V))return;ue=ue.return}for(;_e!==null;){if(ue=qt(_e),ue===null)return;if(ke=ue.tag,ke===5||ke===6||ke===26||ke===27){O=Y=ue;continue e}_e=_e.parentNode}}O=O.return}Ul(function(){var ze=Y,st=lo(x),pt=[];e:{var Qe=v0.get(i);if(Qe!==void 0){var rt=co,Dt=i;switch(i){case"keypress":if(_n(x)===0)break e;case"keydown":case"keyup":rt=yo;break;case"focusin":Dt="focus",rt=po;break;case"focusout":Dt="blur",rt=po;break;case"beforeblur":case"afterblur":rt=po;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":rt=ys;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":rt=Fl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":rt=br;break;case p0:case m0:case g0:rt=mo;break;case y0:rt=Bl;break;case"scroll":case"scrollend":rt=za;break;case"wheel":rt=Jo;break;case"copy":case"cut":case"paste":rt=go;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":rt=$a;break;case"toggle":case"beforetoggle":rt=Gl}var $t=(u&4)!==0,un=!$t&&(i==="scroll"||i==="scrollend"),Ye=$t?Qe!==null?Qe+"Capture":null:Qe;$t=[];for(var Ge=ze,Ke;Ge!==null;){var lt=Ge;if(Ke=lt.stateNode,lt=lt.tag,lt!==5&&lt!==26&&lt!==27||Ke===null||Ye===null||(lt=uo(Ge,Ye),lt!=null&&$t.push(vc(Ge,lt,Ke))),un)break;Ge=Ge.return}0<$t.length&&(Qe=new rt(Qe,Dt,null,x,st),pt.push({event:Qe,listeners:$t}))}}if(!(u&7)){e:{if(Qe=i==="mouseover"||i==="pointerover",rt=i==="mouseout"||i==="pointerout",Qe&&x!==Es&&(Dt=x.relatedTarget||x.fromElement)&&(qt(Dt)||Dt[Ss]))break e;if((rt||Qe)&&(Qe=st.window===st?st:(Qe=st.ownerDocument)?Qe.defaultView||Qe.parentWindow:window,rt?(Dt=x.relatedTarget||x.toElement,rt=ze,Dt=Dt?qt(Dt):null,Dt!==null&&(un=J(Dt),$t=Dt.tag,Dt!==un||$t!==5&&$t!==27&&$t!==6)&&(Dt=null)):(rt=null,Dt=ze),rt!==Dt)){if($t=ys,lt="onMouseLeave",Ye="onMouseEnter",Ge="mouse",(i==="pointerout"||i==="pointerover")&&($t=$a,lt="onPointerLeave",Ye="onPointerEnter",Ge="pointer"),un=rt==null?Qe:Jt(rt),Ke=Dt==null?Qe:Jt(Dt),Qe=new $t(lt,Ge+"leave",rt,x,st),Qe.target=un,Qe.relatedTarget=Ke,lt=null,qt(st)===ze&&($t=new $t(Ye,Ge+"enter",Dt,x,st),$t.target=Ke,$t.relatedTarget=un,lt=$t),un=lt,rt&&Dt)t:{for($t=rt,Ye=Dt,Ge=0,Ke=$t;Ke;Ke=cu(Ke))Ge++;for(Ke=0,lt=Ye;lt;lt=cu(lt))Ke++;for(;0<Ge-Ke;)$t=cu($t),Ge--;for(;0<Ke-Ge;)Ye=cu(Ye),Ke--;for(;Ge--;){if($t===Ye||Ye!==null&&$t===Ye.alternate)break t;$t=cu($t),Ye=cu(Ye)}$t=null}else $t=null;rt!==null&&O1(pt,Qe,rt,$t,!1),Dt!==null&&un!==null&&O1(pt,un,Dt,$t,!0)}}e:{if(Qe=ze?Jt(ze):window,rt=Qe.nodeName&&Qe.nodeName.toLowerCase(),rt==="select"||rt==="input"&&Qe.type==="file")var Rt=Re;else if(pe(Qe))if(nt)Rt=er;else{Rt=Ot;var nr=Wt}else rt=Qe.nodeName,!rt||rt.toLowerCase()!=="input"||Qe.type!=="checkbox"&&Qe.type!=="radio"?ze&&Qo(ze.elementType)&&(Rt=Re):Rt=Mt;if(Rt&&(Rt=Rt(i,ze))){Te(pt,Rt,x,st);break e}nr&&nr(i,Qe,ze),i==="focusout"&&ze&&Qe.type==="number"&&ze.memoizedProps.value!=null&&ao(Qe,"number",Qe.value)}switch(nr=ze?Jt(ze):window,i){case"focusin":(pe(nr)||nr.contentEditable==="true")&&(Rr=nr,pn=ze,jr=null);break;case"focusout":jr=pn=Rr=null;break;case"mousedown":on=!0;break;case"contextmenu":case"mouseup":case"dragend":on=!1,ea(pt,x,st);break;case"selectionchange":if(Bn)break;case"keydown":case"keyup":ea(pt,x,st)}var Ut;if(ri)e:{switch(i){case"compositionstart":var zt="onCompositionStart";break e;case"compositionend":zt="onCompositionEnd";break e;case"compositionupdate":zt="onCompositionUpdate";break e}zt=void 0}else G?I(i,x)&&(zt="onCompositionEnd"):i==="keydown"&&x.keyCode===229&&(zt="onCompositionStart");zt&&(ae&&x.locale!=="ko"&&(G||zt!=="onCompositionStart"?zt==="onCompositionEnd"&&G&&(Ut=xi()):(fn=st,Vn="value"in fn?fn.value:fn.textContent,G=!0)),nr=mh(ze,zt),0<nr.length&&(zt=new Bi(zt,i,null,x,st),pt.push({event:zt,listeners:nr}),Ut?zt.data=Ut:(Ut=L(x),Ut!==null&&(zt.data=Ut)))),(Ut=ne?X(i,x):te(i,x))&&(zt=mh(ze,"onBeforeInput"),0<zt.length&&(nr=new Bi("onBeforeInput","beforeinput",null,x,st),pt.push({event:nr,listeners:zt}),nr.data=Ut)),aC(pt,i,ze,x,st)}A1(pt,u)})}function vc(i,u,x){return{instance:i,listener:u,currentTarget:x}}function mh(i,u){for(var x=u+"Capture",O=[];i!==null;){var V=i,Y=V.stateNode;V=V.tag,V!==5&&V!==26&&V!==27||Y===null||(V=uo(i,x),V!=null&&O.unshift(vc(i,V,Y)),V=uo(i,u),V!=null&&O.push(vc(i,V,Y))),i=i.return}return O}function cu(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function O1(i,u,x,O,V){for(var Y=u._reactName,ue=[];x!==null&&x!==O;){var _e=x,ke=_e.alternate,ze=_e.stateNode;if(_e=_e.tag,ke!==null&&ke===O)break;_e!==5&&_e!==26&&_e!==27||ze===null||(ke=ze,V?(ze=uo(x,Y),ze!=null&&ue.unshift(vc(x,ze,ke))):V||(ze=uo(x,Y),ze!=null&&ue.push(vc(x,ze,ke)))),x=x.return}ue.length!==0&&i.push({event:u,listeners:ue})}var dC=/\r\n?/g,hC=/\u0000|\uFFFD/g;function I1(i){return(typeof i=="string"?i:""+i).replace(dC,`
`).replace(hC,"")}function k1(i,u){return u=I1(u),I1(i)===u}function gh(){}function Lr(i,u,x,O,V,Y){switch(x){case"children":typeof O=="string"?u==="body"||u==="textarea"&&O===""||en(i,O):(typeof O=="number"||typeof O=="bigint")&&u!=="body"&&en(i,""+O);break;case"className":vn(i,"class",O);break;case"tabIndex":vn(i,"tabindex",O);break;case"dir":case"role":case"viewBox":case"width":case"height":vn(i,x,O);break;case"style":_i(i,O,Y);break;case"data":if(u!=="object"){vn(i,"data",O);break}case"src":case"href":if(O===""&&(u!=="a"||x!=="href")){i.removeAttribute(x);break}if(O==null||typeof O=="function"||typeof O=="symbol"||typeof O=="boolean"){i.removeAttribute(x);break}O=Fs(""+O),i.setAttribute(x,O);break;case"action":case"formAction":if(typeof O=="function"){i.setAttribute(x,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Y=="function"&&(x==="formAction"?(u!=="input"&&Lr(i,u,"name",V.name,V,null),Lr(i,u,"formEncType",V.formEncType,V,null),Lr(i,u,"formMethod",V.formMethod,V,null),Lr(i,u,"formTarget",V.formTarget,V,null)):(Lr(i,u,"encType",V.encType,V,null),Lr(i,u,"method",V.method,V,null),Lr(i,u,"target",V.target,V,null)));if(O==null||typeof O=="symbol"||typeof O=="boolean"){i.removeAttribute(x);break}O=Fs(""+O),i.setAttribute(x,O);break;case"onClick":O!=null&&(i.onclick=gh);break;case"onScroll":O!=null&&dr("scroll",i);break;case"onScrollEnd":O!=null&&dr("scrollend",i);break;case"dangerouslySetInnerHTML":if(O!=null){if(typeof O!="object"||!("__html"in O))throw Error(t(61));if(x=O.__html,x!=null){if(V.children!=null)throw Error(t(60));i.innerHTML=x}}break;case"multiple":i.multiple=O&&typeof O!="function"&&typeof O!="symbol";break;case"muted":i.muted=O&&typeof O!="function"&&typeof O!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(O==null||typeof O=="function"||typeof O=="boolean"||typeof O=="symbol"){i.removeAttribute("xlink:href");break}x=Fs(""+O),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",x);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":O!=null&&typeof O!="function"&&typeof O!="symbol"?i.setAttribute(x,""+O):i.removeAttribute(x);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":O&&typeof O!="function"&&typeof O!="symbol"?i.setAttribute(x,""):i.removeAttribute(x);break;case"capture":case"download":O===!0?i.setAttribute(x,""):O!==!1&&O!=null&&typeof O!="function"&&typeof O!="symbol"?i.setAttribute(x,O):i.removeAttribute(x);break;case"cols":case"rows":case"size":case"span":O!=null&&typeof O!="function"&&typeof O!="symbol"&&!isNaN(O)&&1<=O?i.setAttribute(x,O):i.removeAttribute(x);break;case"rowSpan":case"start":O==null||typeof O=="function"||typeof O=="symbol"||isNaN(O)?i.removeAttribute(x):i.setAttribute(x,O);break;case"popover":dr("beforetoggle",i),dr("toggle",i),vi(i,"popover",O);break;case"xlinkActuate":Pn(i,"http://www.w3.org/1999/xlink","xlink:actuate",O);break;case"xlinkArcrole":Pn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",O);break;case"xlinkRole":Pn(i,"http://www.w3.org/1999/xlink","xlink:role",O);break;case"xlinkShow":Pn(i,"http://www.w3.org/1999/xlink","xlink:show",O);break;case"xlinkTitle":Pn(i,"http://www.w3.org/1999/xlink","xlink:title",O);break;case"xlinkType":Pn(i,"http://www.w3.org/1999/xlink","xlink:type",O);break;case"xmlBase":Pn(i,"http://www.w3.org/XML/1998/namespace","xml:base",O);break;case"xmlLang":Pn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",O);break;case"xmlSpace":Pn(i,"http://www.w3.org/XML/1998/namespace","xml:space",O);break;case"is":vi(i,"is",O);break;case"innerText":case"textContent":break;default:(!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(x=Hu.get(x)||x,vi(i,x,O))}}function zm(i,u,x,O,V,Y){switch(x){case"style":_i(i,O,Y);break;case"dangerouslySetInnerHTML":if(O!=null){if(typeof O!="object"||!("__html"in O))throw Error(t(61));if(x=O.__html,x!=null){if(V.children!=null)throw Error(t(60));i.innerHTML=x}}break;case"children":typeof O=="string"?en(i,O):(typeof O=="number"||typeof O=="bigint")&&en(i,""+O);break;case"onScroll":O!=null&&dr("scroll",i);break;case"onScrollEnd":O!=null&&dr("scrollend",i);break;case"onClick":O!=null&&(i.onclick=gh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pr.hasOwnProperty(x))e:{if(x[0]==="o"&&x[1]==="n"&&(V=x.endsWith("Capture"),u=x.slice(2,V?x.length-7:void 0),Y=i[$r]||null,Y=Y!=null?Y[x]:null,typeof Y=="function"&&i.removeEventListener(u,Y,V),typeof O=="function")){typeof Y!="function"&&Y!==null&&(x in i?i[x]=null:i.hasAttribute(x)&&i.removeAttribute(x)),i.addEventListener(u,O,V);break e}x in i?i[x]=O:O===!0?i.setAttribute(x,""):vi(i,x,O)}}}function Kn(i,u,x){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":dr("error",i),dr("load",i);var O=!1,V=!1,Y;for(Y in x)if(x.hasOwnProperty(Y)){var ue=x[Y];if(ue!=null)switch(Y){case"src":O=!0;break;case"srcSet":V=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(t(137,u));default:Lr(i,u,Y,ue,x,null)}}V&&Lr(i,u,"srcSet",x.srcSet,x,null),O&&Lr(i,u,"src",x.src,x,null);return;case"input":dr("invalid",i);var _e=Y=ue=V=null,ke=null,ze=null;for(O in x)if(x.hasOwnProperty(O)){var st=x[O];if(st!=null)switch(O){case"name":V=st;break;case"type":ue=st;break;case"checked":ke=st;break;case"defaultChecked":ze=st;break;case"value":Y=st;break;case"defaultValue":_e=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(t(137,u));break;default:Lr(i,u,O,st,x,null)}}bi(i,Y,_e,ke,ze,ue,V,!1),Ni(i);return;case"select":dr("invalid",i),O=ue=Y=null;for(V in x)if(x.hasOwnProperty(V)&&(_e=x[V],_e!=null))switch(V){case"value":Y=_e;break;case"defaultValue":ue=_e;break;case"multiple":O=_e;default:Lr(i,u,V,_e,x,null)}u=Y,x=ue,i.multiple=!!O,u!=null?ur(i,!!O,u,!1):x!=null&&ur(i,!!O,x,!0);return;case"textarea":dr("invalid",i),Y=V=O=null;for(ue in x)if(x.hasOwnProperty(ue)&&(_e=x[ue],_e!=null))switch(ue){case"value":O=_e;break;case"defaultValue":V=_e;break;case"children":Y=_e;break;case"dangerouslySetInnerHTML":if(_e!=null)throw Error(t(91));break;default:Lr(i,u,ue,_e,x,null)}Us(i,O,V,Y),Ni(i);return;case"option":for(ke in x)if(x.hasOwnProperty(ke)&&(O=x[ke],O!=null))switch(ke){case"selected":i.selected=O&&typeof O!="function"&&typeof O!="symbol";break;default:Lr(i,u,ke,O,x,null)}return;case"dialog":dr("cancel",i),dr("close",i);break;case"iframe":case"object":dr("load",i);break;case"video":case"audio":for(O=0;O<yc.length;O++)dr(yc[O],i);break;case"image":dr("error",i),dr("load",i);break;case"details":dr("toggle",i);break;case"embed":case"source":case"link":dr("error",i),dr("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ze in x)if(x.hasOwnProperty(ze)&&(O=x[ze],O!=null))switch(ze){case"children":case"dangerouslySetInnerHTML":throw Error(t(137,u));default:Lr(i,u,ze,O,x,null)}return;default:if(Qo(u)){for(st in x)x.hasOwnProperty(st)&&(O=x[st],O!==void 0&&zm(i,u,st,O,x,void 0));return}}for(_e in x)x.hasOwnProperty(_e)&&(O=x[_e],O!=null&&Lr(i,u,_e,O,x,null))}function fC(i,u,x,O){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var V=null,Y=null,ue=null,_e=null,ke=null,ze=null,st=null;for(rt in x){var pt=x[rt];if(x.hasOwnProperty(rt)&&pt!=null)switch(rt){case"checked":break;case"value":break;case"defaultValue":ke=pt;default:O.hasOwnProperty(rt)||Lr(i,u,rt,null,O,pt)}}for(var Qe in O){var rt=O[Qe];if(pt=x[Qe],O.hasOwnProperty(Qe)&&(rt!=null||pt!=null))switch(Qe){case"type":Y=rt;break;case"name":V=rt;break;case"checked":ze=rt;break;case"defaultChecked":st=rt;break;case"value":ue=rt;break;case"defaultValue":_e=rt;break;case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(t(137,u));break;default:rt!==pt&&Lr(i,u,Qe,rt,O,pt)}}Li(i,ue,_e,ke,ze,st,Y,V);return;case"select":rt=ue=_e=Qe=null;for(Y in x)if(ke=x[Y],x.hasOwnProperty(Y)&&ke!=null)switch(Y){case"value":break;case"multiple":rt=ke;default:O.hasOwnProperty(Y)||Lr(i,u,Y,null,O,ke)}for(V in O)if(Y=O[V],ke=x[V],O.hasOwnProperty(V)&&(Y!=null||ke!=null))switch(V){case"value":Qe=Y;break;case"defaultValue":_e=Y;break;case"multiple":ue=Y;default:Y!==ke&&Lr(i,u,V,Y,O,ke)}u=_e,x=ue,O=rt,Qe!=null?ur(i,!!x,Qe,!1):!!O!=!!x&&(u!=null?ur(i,!!x,u,!0):ur(i,!!x,x?[]:"",!1));return;case"textarea":rt=Qe=null;for(_e in x)if(V=x[_e],x.hasOwnProperty(_e)&&V!=null&&!O.hasOwnProperty(_e))switch(_e){case"value":break;case"children":break;default:Lr(i,u,_e,null,O,V)}for(ue in O)if(V=O[ue],Y=x[ue],O.hasOwnProperty(ue)&&(V!=null||Y!=null))switch(ue){case"value":Qe=V;break;case"defaultValue":rt=V;break;case"children":break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(t(91));break;default:V!==Y&&Lr(i,u,ue,V,O,Y)}Js(i,Qe,rt);return;case"option":for(var Dt in x)if(Qe=x[Dt],x.hasOwnProperty(Dt)&&Qe!=null&&!O.hasOwnProperty(Dt))switch(Dt){case"selected":i.selected=!1;break;default:Lr(i,u,Dt,null,O,Qe)}for(ke in O)if(Qe=O[ke],rt=x[ke],O.hasOwnProperty(ke)&&Qe!==rt&&(Qe!=null||rt!=null))switch(ke){case"selected":i.selected=Qe&&typeof Qe!="function"&&typeof Qe!="symbol";break;default:Lr(i,u,ke,Qe,O,rt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $t in x)Qe=x[$t],x.hasOwnProperty($t)&&Qe!=null&&!O.hasOwnProperty($t)&&Lr(i,u,$t,null,O,Qe);for(ze in O)if(Qe=O[ze],rt=x[ze],O.hasOwnProperty(ze)&&Qe!==rt&&(Qe!=null||rt!=null))switch(ze){case"children":case"dangerouslySetInnerHTML":if(Qe!=null)throw Error(t(137,u));break;default:Lr(i,u,ze,Qe,O,rt)}return;default:if(Qo(u)){for(var un in x)Qe=x[un],x.hasOwnProperty(un)&&Qe!==void 0&&!O.hasOwnProperty(un)&&zm(i,u,un,void 0,O,Qe);for(st in O)Qe=O[st],rt=x[st],!O.hasOwnProperty(st)||Qe===rt||Qe===void 0&&rt===void 0||zm(i,u,st,Qe,O,rt);return}}for(var Ye in x)Qe=x[Ye],x.hasOwnProperty(Ye)&&Qe!=null&&!O.hasOwnProperty(Ye)&&Lr(i,u,Ye,null,O,Qe);for(pt in O)Qe=O[pt],rt=x[pt],!O.hasOwnProperty(pt)||Qe===rt||Qe==null&&rt==null||Lr(i,u,pt,Qe,O,rt)}var Hm=null,qm=null;function yh(i){return i.nodeType===9?i:i.ownerDocument}function M1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function P1(i,u){if(i===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&u==="foreignObject"?0:i}function Wm(i,u){return i==="textarea"||i==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Ym=null;function pC(){var i=window.event;return i&&i.type==="popstate"?i===Ym?!1:(Ym=i,!0):(Ym=null,!1)}var D1=typeof setTimeout=="function"?setTimeout:void 0,mC=typeof clearTimeout=="function"?clearTimeout:void 0,N1=typeof Promise=="function"?Promise:void 0,gC=typeof queueMicrotask=="function"?queueMicrotask:typeof N1<"u"?function(i){return N1.resolve(null).then(i).catch(yC)}:D1;function yC(i){setTimeout(function(){throw i})}function $m(i,u){var x=u,O=0;do{var V=x.nextSibling;if(i.removeChild(x),V&&V.nodeType===8)if(x=V.data,x==="/$"){if(O===0){i.removeChild(V),Tc(u);return}O--}else x!=="$"&&x!=="$?"&&x!=="$!"||O++;x=V}while(x);Tc(u)}function Xm(i){var u=i.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var x=u;switch(u=u.nextSibling,x.nodeName){case"HTML":case"HEAD":case"BODY":Xm(x),ot(x);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(x.rel.toLowerCase()==="stylesheet")continue}i.removeChild(x)}}function vC(i,u,x,O){for(;i.nodeType===1;){var V=x;if(i.nodeName.toLowerCase()!==u.toLowerCase()){if(!O&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(O){if(!i[wt])switch(u){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(Y=i.getAttribute("rel"),Y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(Y!==V.rel||i.getAttribute("href")!==(V.href==null?null:V.href)||i.getAttribute("crossorigin")!==(V.crossOrigin==null?null:V.crossOrigin)||i.getAttribute("title")!==(V.title==null?null:V.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(Y=i.getAttribute("src"),(Y!==(V.src==null?null:V.src)||i.getAttribute("type")!==(V.type==null?null:V.type)||i.getAttribute("crossorigin")!==(V.crossOrigin==null?null:V.crossOrigin))&&Y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(u==="input"&&i.type==="hidden"){var Y=V.name==null?null:""+V.name;if(V.type==="hidden"&&i.getAttribute("name")===Y)return i}else return i;if(i=Oi(i.nextSibling),i===null)break}return null}function bC(i,u,x){if(u==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!x||(i=Oi(i.nextSibling),i===null))return null;return i}function Oi(i){for(;i!=null;i=i.nextSibling){var u=i.nodeType;if(u===1||u===3)break;if(u===8){if(u=i.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return i}function L1(i){i=i.previousSibling;for(var u=0;i;){if(i.nodeType===8){var x=i.data;if(x==="$"||x==="$!"||x==="$?"){if(u===0)return i;u--}else x==="/$"&&u++}i=i.previousSibling}return null}function U1(i,u,x){switch(u=yh(x),i){case"html":if(i=u.documentElement,!i)throw Error(t(452));return i;case"head":if(i=u.head,!i)throw Error(t(453));return i;case"body":if(i=u.body,!i)throw Error(t(454));return i;default:throw Error(t(451))}}var hi=new Map,F1=new Set;function vh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.ownerDocument}var Mo=z.d;z.d={f:_C,r:wC,D:xC,C:SC,L:jC,m:EC,X:CC,S:TC,M:AC};function _C(){var i=Mo.f(),u=ch();return i||u}function wC(i){var u=tt(i);u!==null&&u.tag===5&&u.type==="form"?hb(u):Mo.r(i)}var du=typeof document>"u"?null:document;function V1(i,u,x){var O=du;if(O&&typeof u=="string"&&u){var V=Xr(u);V='link[rel="'+i+'"][href="'+V+'"]',typeof x=="string"&&(V+='[crossorigin="'+x+'"]'),F1.has(V)||(F1.add(V),i={rel:i,crossOrigin:x,href:u},O.querySelector(V)===null&&(u=O.createElement("link"),Kn(u,"link",i),Pt(u),O.head.appendChild(u)))}}function xC(i){Mo.D(i),V1("dns-prefetch",i,null)}function SC(i,u){Mo.C(i,u),V1("preconnect",i,u)}function jC(i,u,x){Mo.L(i,u,x);var O=du;if(O&&i&&u){var V='link[rel="preload"][as="'+Xr(u)+'"]';u==="image"&&x&&x.imageSrcSet?(V+='[imagesrcset="'+Xr(x.imageSrcSet)+'"]',typeof x.imageSizes=="string"&&(V+='[imagesizes="'+Xr(x.imageSizes)+'"]')):V+='[href="'+Xr(i)+'"]';var Y=V;switch(u){case"style":Y=hu(i);break;case"script":Y=fu(i)}hi.has(Y)||(i=P({rel:"preload",href:u==="image"&&x&&x.imageSrcSet?void 0:i,as:u},x),hi.set(Y,i),O.querySelector(V)!==null||u==="style"&&O.querySelector(bc(Y))||u==="script"&&O.querySelector(_c(Y))||(u=O.createElement("link"),Kn(u,"link",i),Pt(u),O.head.appendChild(u)))}}function EC(i,u){Mo.m(i,u);var x=du;if(x&&i){var O=u&&typeof u.as=="string"?u.as:"script",V='link[rel="modulepreload"][as="'+Xr(O)+'"][href="'+Xr(i)+'"]',Y=V;switch(O){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Y=fu(i)}if(!hi.has(Y)&&(i=P({rel:"modulepreload",href:i},u),hi.set(Y,i),x.querySelector(V)===null)){switch(O){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(x.querySelector(_c(Y)))return}O=x.createElement("link"),Kn(O,"link",i),Pt(O),x.head.appendChild(O)}}}function TC(i,u,x){Mo.S(i,u,x);var O=du;if(O&&i){var V=_t(O).hoistableStyles,Y=hu(i);u=u||"default";var ue=V.get(Y);if(!ue){var _e={loading:0,preload:null};if(ue=O.querySelector(bc(Y)))_e.loading=5;else{i=P({rel:"stylesheet",href:i,"data-precedence":u},x),(x=hi.get(Y))&&Km(i,x);var ke=ue=O.createElement("link");Pt(ke),Kn(ke,"link",i),ke._p=new Promise(function(ze,st){ke.onload=ze,ke.onerror=st}),ke.addEventListener("load",function(){_e.loading|=1}),ke.addEventListener("error",function(){_e.loading|=2}),_e.loading|=4,bh(ue,u,O)}ue={type:"stylesheet",instance:ue,count:1,state:_e},V.set(Y,ue)}}}function CC(i,u){Mo.X(i,u);var x=du;if(x&&i){var O=_t(x).hoistableScripts,V=fu(i),Y=O.get(V);Y||(Y=x.querySelector(_c(V)),Y||(i=P({src:i,async:!0},u),(u=hi.get(V))&&Qm(i,u),Y=x.createElement("script"),Pt(Y),Kn(Y,"link",i),x.head.appendChild(Y)),Y={type:"script",instance:Y,count:1,state:null},O.set(V,Y))}}function AC(i,u){Mo.M(i,u);var x=du;if(x&&i){var O=_t(x).hoistableScripts,V=fu(i),Y=O.get(V);Y||(Y=x.querySelector(_c(V)),Y||(i=P({src:i,async:!0,type:"module"},u),(u=hi.get(V))&&Qm(i,u),Y=x.createElement("script"),Pt(Y),Kn(Y,"link",i),x.head.appendChild(Y)),Y={type:"script",instance:Y,count:1,state:null},O.set(V,Y))}}function B1(i,u,x,O){var V=(V=xe.current)?vh(V):null;if(!V)throw Error(t(446));switch(i){case"meta":case"title":return null;case"style":return typeof x.precedence=="string"&&typeof x.href=="string"?(u=hu(x.href),x=_t(V).hoistableStyles,O=x.get(u),O||(O={type:"style",instance:null,count:0,state:null},x.set(u,O)),O):{type:"void",instance:null,count:0,state:null};case"link":if(x.rel==="stylesheet"&&typeof x.href=="string"&&typeof x.precedence=="string"){i=hu(x.href);var Y=_t(V).hoistableStyles,ue=Y.get(i);if(ue||(V=V.ownerDocument||V,ue={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Y.set(i,ue),(Y=V.querySelector(bc(i)))&&!Y._p&&(ue.instance=Y,ue.state.loading=5),hi.has(i)||(x={rel:"preload",as:"style",href:x.href,crossOrigin:x.crossOrigin,integrity:x.integrity,media:x.media,hrefLang:x.hrefLang,referrerPolicy:x.referrerPolicy},hi.set(i,x),Y||RC(V,i,x,ue.state))),u&&O===null)throw Error(t(528,""));return ue}if(u&&O!==null)throw Error(t(529,""));return null;case"script":return u=x.async,x=x.src,typeof x=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=fu(x),x=_t(V).hoistableScripts,O=x.get(u),O||(O={type:"script",instance:null,count:0,state:null},x.set(u,O)),O):{type:"void",instance:null,count:0,state:null};default:throw Error(t(444,i))}}function hu(i){return'href="'+Xr(i)+'"'}function bc(i){return'link[rel="stylesheet"]['+i+"]"}function G1(i){return P({},i,{"data-precedence":i.precedence,precedence:null})}function RC(i,u,x,O){i.querySelector('link[rel="preload"][as="style"]['+u+"]")?O.loading=1:(u=i.createElement("link"),O.preload=u,u.addEventListener("load",function(){return O.loading|=1}),u.addEventListener("error",function(){return O.loading|=2}),Kn(u,"link",x),Pt(u),i.head.appendChild(u))}function fu(i){return'[src="'+Xr(i)+'"]'}function _c(i){return"script[async]"+i}function z1(i,u,x){if(u.count++,u.instance===null)switch(u.type){case"style":var O=i.querySelector('style[data-href~="'+Xr(x.href)+'"]');if(O)return u.instance=O,Pt(O),O;var V=P({},x,{"data-href":x.href,"data-precedence":x.precedence,href:null,precedence:null});return O=(i.ownerDocument||i).createElement("style"),Pt(O),Kn(O,"style",V),bh(O,x.precedence,i),u.instance=O;case"stylesheet":V=hu(x.href);var Y=i.querySelector(bc(V));if(Y)return u.state.loading|=4,u.instance=Y,Pt(Y),Y;O=G1(x),(V=hi.get(V))&&Km(O,V),Y=(i.ownerDocument||i).createElement("link"),Pt(Y);var ue=Y;return ue._p=new Promise(function(_e,ke){ue.onload=_e,ue.onerror=ke}),Kn(Y,"link",O),u.state.loading|=4,bh(Y,x.precedence,i),u.instance=Y;case"script":return Y=fu(x.src),(V=i.querySelector(_c(Y)))?(u.instance=V,Pt(V),V):(O=x,(V=hi.get(Y))&&(O=P({},x),Qm(O,V)),i=i.ownerDocument||i,V=i.createElement("script"),Pt(V),Kn(V,"link",O),i.head.appendChild(V),u.instance=V);case"void":return null;default:throw Error(t(443,u.type))}else u.type==="stylesheet"&&!(u.state.loading&4)&&(O=u.instance,u.state.loading|=4,bh(O,x.precedence,i));return u.instance}function bh(i,u,x){for(var O=x.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),V=O.length?O[O.length-1]:null,Y=V,ue=0;ue<O.length;ue++){var _e=O[ue];if(_e.dataset.precedence===u)Y=_e;else if(Y!==V)break}Y?Y.parentNode.insertBefore(i,Y.nextSibling):(u=x.nodeType===9?x.head:x,u.insertBefore(i,u.firstChild))}function Km(i,u){i.crossOrigin==null&&(i.crossOrigin=u.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=u.referrerPolicy),i.title==null&&(i.title=u.title)}function Qm(i,u){i.crossOrigin==null&&(i.crossOrigin=u.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=u.referrerPolicy),i.integrity==null&&(i.integrity=u.integrity)}var _h=null;function H1(i,u,x){if(_h===null){var O=new Map,V=_h=new Map;V.set(x,O)}else V=_h,O=V.get(x),O||(O=new Map,V.set(x,O));if(O.has(i))return O;for(O.set(i,null),x=x.getElementsByTagName(i),V=0;V<x.length;V++){var Y=x[V];if(!(Y[wt]||Y[Qr]||i==="link"&&Y.getAttribute("rel")==="stylesheet")&&Y.namespaceURI!=="http://www.w3.org/2000/svg"){var ue=Y.getAttribute(u)||"";ue=i+ue;var _e=O.get(ue);_e?_e.push(Y):O.set(ue,[Y])}}return O}function q1(i,u,x){i=i.ownerDocument||i,i.head.insertBefore(x,u==="title"?i.querySelector("head > title"):null)}function OC(i,u,x){if(x===1||u.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return i=u.disabled,typeof u.precedence=="string"&&i==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function W1(i){return!(i.type==="stylesheet"&&!(i.state.loading&3))}var wc=null;function IC(){}function kC(i,u,x){if(wc===null)throw Error(t(475));var O=wc;if(u.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&!(u.state.loading&4)){if(u.instance===null){var V=hu(x.href),Y=i.querySelector(bc(V));if(Y){i=Y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(O.count++,O=wh.bind(O),i.then(O,O)),u.state.loading|=4,u.instance=Y,Pt(Y);return}Y=i.ownerDocument||i,x=G1(x),(V=hi.get(V))&&Km(x,V),Y=Y.createElement("link"),Pt(Y);var ue=Y;ue._p=new Promise(function(_e,ke){ue.onload=_e,ue.onerror=ke}),Kn(Y,"link",x),u.instance=Y}O.stylesheets===null&&(O.stylesheets=new Map),O.stylesheets.set(u,i),(i=u.state.preload)&&!(u.state.loading&3)&&(O.count++,u=wh.bind(O),i.addEventListener("load",u),i.addEventListener("error",u))}}function MC(){if(wc===null)throw Error(t(475));var i=wc;return i.stylesheets&&i.count===0&&Zm(i,i.stylesheets),0<i.count?function(u){var x=setTimeout(function(){if(i.stylesheets&&Zm(i,i.stylesheets),i.unsuspend){var O=i.unsuspend;i.unsuspend=null,O()}},6e4);return i.unsuspend=u,function(){i.unsuspend=null,clearTimeout(x)}}:null}function wh(){if(this.count--,this.count===0){if(this.stylesheets)Zm(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var xh=null;function Zm(i,u){i.stylesheets=null,i.unsuspend!==null&&(i.count++,xh=new Map,u.forEach(PC,i),xh=null,wh.call(i))}function PC(i,u){if(!(u.state.loading&4)){var x=xh.get(i);if(x)var O=x.get(null);else{x=new Map,xh.set(i,x);for(var V=i.querySelectorAll("link[data-precedence],style[data-precedence]"),Y=0;Y<V.length;Y++){var ue=V[Y];(ue.nodeName==="LINK"||ue.getAttribute("media")!=="not all")&&(x.set(ue.dataset.precedence,ue),O=ue)}O&&x.set(null,O)}V=u.instance,ue=V.getAttribute("data-precedence"),Y=x.get(ue)||O,Y===O&&x.set(null,V),x.set(ue,V),this.count++,O=wh.bind(this),V.addEventListener("load",O),V.addEventListener("error",O),Y?Y.parentNode.insertBefore(V,Y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(V,i.firstChild)),u.state.loading|=4}}var xc={$$typeof:m,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function DC(i,u,x,O,V,Y,ue,_e){this.tag=1,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ur(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ur(0),this.hiddenUpdates=Ur(null),this.identifierPrefix=O,this.onUncaughtError=V,this.onCaughtError=Y,this.onRecoverableError=ue,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_e,this.incompleteTransitions=new Map}function Y1(i,u,x,O,V,Y,ue,_e,ke,ze,st,pt){return i=new DC(i,u,x,ue,_e,ke,ze,pt),u=1,Y===!0&&(u|=24),Y=ci(3,null,null,u),i.current=Y,Y.stateNode=i,u=Op(),u.refCount++,i.pooledCache=u,u.refCount++,Y.memoizedState={element:O,isDehydrated:x,cache:u},cm(Y),i}function $1(i){return i?(i=ql,i):ql}function X1(i,u,x,O,V,Y){V=$1(V),O.context===null?O.context=V:O.pendingContext=V,O=la(u),O.payload={element:x},Y=Y===void 0?null:Y,Y!==null&&(O.callback=Y),x=ua(i,O,u),x!==null&&(bs(x,i,u),ic(x,i,u))}function K1(i,u){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var x=i.retryLane;i.retryLane=x!==0&&x<u?x:u}}function Jm(i,u){K1(i,u),(i=i.alternate)&&K1(i,u)}function Q1(i){if(i.tag===13){var u=ta(i,67108864);u!==null&&bs(u,i,67108864),Jm(i,67108864)}}var Sh=!0;function NC(i,u,x,O){var V=R.T;R.T=null;var Y=z.p;try{z.p=2,eg(i,u,x,O)}finally{z.p=Y,R.T=V}}function LC(i,u,x,O){var V=R.T;R.T=null;var Y=z.p;try{z.p=8,eg(i,u,x,O)}finally{z.p=Y,R.T=V}}function eg(i,u,x,O){if(Sh){var V=tg(O);if(V===null)Gm(i,u,O,jh,x),J1(i,O);else if(FC(V,i,u,x,O))O.stopPropagation();else if(J1(i,O),u&4&&-1<UC.indexOf(i)){for(;V!==null;){var Y=tt(V);if(Y!==null)switch(Y.tag){case 3:if(Y=Y.stateNode,Y.current.memoizedState.isDehydrated){var ue=Tt(Y.pendingLanes);if(ue!==0){var _e=Y;for(_e.pendingLanes|=2,_e.entangledLanes|=2;ue;){var ke=1<<31-$e(ue);_e.entanglements[1]|=ke,ue&=~ke}Wi(Y),!(rn&6)&&(ah=ut()+500,gc(0))}}break;case 13:_e=ta(Y,2),_e!==null&&bs(_e,Y,2),ch(),Jm(Y,2)}if(Y=tg(O),Y===null&&Gm(i,u,O,jh,x),Y===V)break;V=Y}V!==null&&O.stopPropagation()}else Gm(i,u,O,null,x)}}function tg(i){return i=lo(i),rg(i)}var jh=null;function rg(i){if(jh=null,i=qt(i),i!==null){var u=J(i);if(u===null)i=null;else{var x=u.tag;if(x===13){if(i=Z(u),i!==null)return i;i=null}else if(x===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;i=null}else u!==i&&(i=null)}}return jh=i,null}function Z1(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(it()){case ft:return 2;case at:return 8;case Le:case Je:return 32;case Ie:return 268435456;default:return 32}default:return 32}}var ng=!1,ga=null,ya=null,va=null,Sc=new Map,jc=new Map,ba=[],UC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function J1(i,u){switch(i){case"focusin":case"focusout":ga=null;break;case"dragenter":case"dragleave":ya=null;break;case"mouseover":case"mouseout":va=null;break;case"pointerover":case"pointerout":Sc.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":jc.delete(u.pointerId)}}function Ec(i,u,x,O,V,Y){return i===null||i.nativeEvent!==Y?(i={blockedOn:u,domEventName:x,eventSystemFlags:O,nativeEvent:Y,targetContainers:[V]},u!==null&&(u=tt(u),u!==null&&Q1(u)),i):(i.eventSystemFlags|=O,u=i.targetContainers,V!==null&&u.indexOf(V)===-1&&u.push(V),i)}function FC(i,u,x,O,V){switch(u){case"focusin":return ga=Ec(ga,i,u,x,O,V),!0;case"dragenter":return ya=Ec(ya,i,u,x,O,V),!0;case"mouseover":return va=Ec(va,i,u,x,O,V),!0;case"pointerover":var Y=V.pointerId;return Sc.set(Y,Ec(Sc.get(Y)||null,i,u,x,O,V)),!0;case"gotpointercapture":return Y=V.pointerId,jc.set(Y,Ec(jc.get(Y)||null,i,u,x,O,V)),!0}return!1}function e_(i){var u=qt(i.target);if(u!==null){var x=J(u);if(x!==null){if(u=x.tag,u===13){if(u=Z(x),u!==null){i.blockedOn=u,zr(i.priority,function(){if(x.tag===13){var O=qs(),V=ta(x,O);V!==null&&bs(V,x,O),Jm(x,O)}});return}}else if(u===3&&x.stateNode.current.memoizedState.isDehydrated){i.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Eh(i){if(i.blockedOn!==null)return!1;for(var u=i.targetContainers;0<u.length;){var x=tg(i.nativeEvent);if(x===null){x=i.nativeEvent;var O=new x.constructor(x.type,x);Es=O,x.target.dispatchEvent(O),Es=null}else return u=tt(x),u!==null&&Q1(u),i.blockedOn=x,!1;u.shift()}return!0}function t_(i,u,x){Eh(i)&&x.delete(u)}function VC(){ng=!1,ga!==null&&Eh(ga)&&(ga=null),ya!==null&&Eh(ya)&&(ya=null),va!==null&&Eh(va)&&(va=null),Sc.forEach(t_),jc.forEach(t_)}function Th(i,u){i.blockedOn===u&&(i.blockedOn=null,ng||(ng=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,VC)))}var Ch=null;function r_(i){Ch!==i&&(Ch=i,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Ch===i&&(Ch=null);for(var u=0;u<i.length;u+=3){var x=i[u],O=i[u+1],V=i[u+2];if(typeof O!="function"){if(rg(O||x)===null)continue;break}var Y=tt(x);Y!==null&&(i.splice(u,3),u-=3,Wp(Y,{pending:!0,data:V,method:x.method,action:O},O,V))}}))}function Tc(i){function u(ke){return Th(ke,i)}ga!==null&&Th(ga,i),ya!==null&&Th(ya,i),va!==null&&Th(va,i),Sc.forEach(u),jc.forEach(u);for(var x=0;x<ba.length;x++){var O=ba[x];O.blockedOn===i&&(O.blockedOn=null)}for(;0<ba.length&&(x=ba[0],x.blockedOn===null);)e_(x),x.blockedOn===null&&ba.shift();if(x=(i.ownerDocument||i).$$reactFormReplay,x!=null)for(O=0;O<x.length;O+=3){var V=x[O],Y=x[O+1],ue=V[$r]||null;if(typeof Y=="function")ue||r_(x);else if(ue){var _e=null;if(Y&&Y.hasAttribute("formAction")){if(V=Y,ue=Y[$r]||null)_e=ue.formAction;else if(rg(V)!==null)continue}else _e=ue.action;typeof _e=="function"?x[O+1]=_e:(x.splice(O,3),O-=3),r_(x)}}}function sg(i){this._internalRoot=i}Ah.prototype.render=sg.prototype.render=function(i){var u=this._internalRoot;if(u===null)throw Error(t(409));var x=u.current,O=qs();X1(x,O,i,u,null,null)},Ah.prototype.unmount=sg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var u=i.containerInfo;i.tag===0&&lu(),X1(i.current,2,null,i,null,null),ch(),u[Ss]=null}};function Ah(i){this._internalRoot=i}Ah.prototype.unstable_scheduleHydration=function(i){if(i){var u=mr();i={blockedOn:null,target:i,priority:u};for(var x=0;x<ba.length&&u!==0&&u<ba[x].priority;x++);ba.splice(x,0,i),x===0&&e_(i)}};var n_=r.version;if(n_!=="19.0.0")throw Error(t(527,n_,"19.0.0"));z.findDOMNode=function(i){var u=i._reactInternals;if(u===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=re(u),i=i!==null?oe(i):null,i=i===null?null:i.stateNode,i};var BC={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:R,findFiberByHostInstance:qt,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rh.isDisabled&&Rh.supportsFiber)try{ie=Rh.inject(BC),ye=Rh}catch{}}return Ac.createRoot=function(i,u){if(!o(i))throw Error(t(299));var x=!1,O="",V=_b,Y=wb,ue=xb,_e=null;return u!=null&&(u.unstable_strictMode===!0&&(x=!0),u.identifierPrefix!==void 0&&(O=u.identifierPrefix),u.onUncaughtError!==void 0&&(V=u.onUncaughtError),u.onCaughtError!==void 0&&(Y=u.onCaughtError),u.onRecoverableError!==void 0&&(ue=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(_e=u.unstable_transitionCallbacks)),u=Y1(i,1,!1,null,null,x,O,V,Y,ue,_e,null),i[Ss]=u.current,Bm(i.nodeType===8?i.parentNode:i),new sg(u)},Ac.hydrateRoot=function(i,u,x){if(!o(i))throw Error(t(299));var O=!1,V="",Y=_b,ue=wb,_e=xb,ke=null,ze=null;return x!=null&&(x.unstable_strictMode===!0&&(O=!0),x.identifierPrefix!==void 0&&(V=x.identifierPrefix),x.onUncaughtError!==void 0&&(Y=x.onUncaughtError),x.onCaughtError!==void 0&&(ue=x.onCaughtError),x.onRecoverableError!==void 0&&(_e=x.onRecoverableError),x.unstable_transitionCallbacks!==void 0&&(ke=x.unstable_transitionCallbacks),x.formState!==void 0&&(ze=x.formState)),u=Y1(i,1,!0,u,x??null,O,V,Y,ue,_e,ke,ze),u.context=$1(null),x=u.current,O=qs(),V=la(O),V.callback=null,ua(x,V,O),u.current.lanes=O,Bt(u,O),Wi(u),i[Ss]=u.current,Bm(i),new Ah(u)},Ac.version="19.0.0",Ac}var f_;function JC(){if(f_)return ag.exports;f_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(r){console.error(r)}}return s(),ag.exports=ZC(),ag.exports}var eA=JC(),tA=zx();/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qc(){return Qc=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(s[t]=n[t])}return s},Qc.apply(this,arguments)}var ja;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(ja||(ja={}));const p_="popstate";function rA(s){s===void 0&&(s={});function r(t,o){let{pathname:c,search:l,hash:f}=t.location;return Yg("",{pathname:c,search:l,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(t,o){return typeof o=="string"?o:hf(o)}return sA(r,n,null,s)}function Rn(s,r){if(s===!1||s===null||typeof s>"u")throw new Error(r)}function Hx(s,r){if(!s){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function nA(){return Math.random().toString(36).substr(2,8)}function m_(s,r){return{usr:s.state,key:s.key,idx:r}}function Yg(s,r,n,t){return n===void 0&&(n=null),Qc({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof r=="string"?Du(r):r,{state:n,key:r&&r.key||t||nA()})}function hf(s){let{pathname:r="/",search:n="",hash:t=""}=s;return n&&n!=="?"&&(r+=n.charAt(0)==="?"?n:"?"+n),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Du(s){let r={};if(s){let n=s.indexOf("#");n>=0&&(r.hash=s.substr(n),s=s.substr(0,n));let t=s.indexOf("?");t>=0&&(r.search=s.substr(t),s=s.substr(0,t)),s&&(r.pathname=s)}return r}function sA(s,r,n,t){t===void 0&&(t={});let{window:o=document.defaultView,v5Compat:c=!1}=t,l=o.history,f=ja.Pop,a=null,d=_();d==null&&(d=0,l.replaceState(Qc({},l.state,{idx:d}),""));function _(){return(l.state||{idx:null}).idx}function w(){f=ja.Pop;let g=_(),p=g==null?null:g-d;d=g,a&&a({action:f,location:v.location,delta:p})}function h(g,p){f=ja.Push;let y=Yg(v.location,g,p);d=_()+1;let S=m_(y,d),j=v.createHref(y);try{l.pushState(S,"",j)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;o.location.assign(j)}c&&a&&a({action:f,location:v.location,delta:1})}function m(g,p){f=ja.Replace;let y=Yg(v.location,g,p);d=_();let S=m_(y,d),j=v.createHref(y);l.replaceState(S,"",j),c&&a&&a({action:f,location:v.location,delta:0})}function b(g){let p=o.location.origin!=="null"?o.location.origin:o.location.href,y=typeof g=="string"?g:hf(g);return y=y.replace(/ $/,"%20"),Rn(p,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,p)}let v={get action(){return f},get location(){return s(o,l)},listen(g){if(a)throw new Error("A history only accepts one active listener");return o.addEventListener(p_,w),a=g,()=>{o.removeEventListener(p_,w),a=null}},createHref(g){return r(o,g)},createURL:b,encodeLocation(g){let p=b(g);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:m,go(g){return l.go(g)}};return v}var g_;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(g_||(g_={}));function iA(s,r,n){return n===void 0&&(n="/"),oA(s,r,n,!1)}function oA(s,r,n,t){let o=typeof r=="string"?Du(r):r,c=Dy(o.pathname||"/",n);if(c==null)return null;let l=qx(s);aA(l);let f=null;for(let a=0;f==null&&a<l.length;++a){let d=vA(c);f=gA(l[a],d,t)}return f}function qx(s,r,n,t){r===void 0&&(r=[]),n===void 0&&(n=[]),t===void 0&&(t="");let o=(c,l,f)=>{let a={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:l,route:c};a.relativePath.startsWith("/")&&(Rn(a.relativePath.startsWith(t),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+t+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(t.length));let d=Ta([t,a.relativePath]),_=n.concat(a);c.children&&c.children.length>0&&(Rn(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),qx(c.children,r,_,d)),!(c.path==null&&!c.index)&&r.push({path:d,score:pA(d,c.index),routesMeta:_})};return s.forEach((c,l)=>{var f;if(c.path===""||!((f=c.path)!=null&&f.includes("?")))o(c,l);else for(let a of Wx(c.path))o(c,l,a)}),r}function Wx(s){let r=s.split("/");if(r.length===0)return[];let[n,...t]=r,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(t.length===0)return o?[c,""]:[c];let l=Wx(t.join("/")),f=[];return f.push(...l.map(a=>a===""?c:[c,a].join("/"))),o&&f.push(...l),f.map(a=>s.startsWith("/")&&a===""?"/":a)}function aA(s){s.sort((r,n)=>r.score!==n.score?n.score-r.score:mA(r.routesMeta.map(t=>t.childrenIndex),n.routesMeta.map(t=>t.childrenIndex)))}const lA=/^:[\w-]+$/,uA=3,cA=2,dA=1,hA=10,fA=-2,y_=s=>s==="*";function pA(s,r){let n=s.split("/"),t=n.length;return n.some(y_)&&(t+=fA),r&&(t+=cA),n.filter(o=>!y_(o)).reduce((o,c)=>o+(lA.test(c)?uA:c===""?dA:hA),t)}function mA(s,r){return s.length===r.length&&s.slice(0,-1).every((t,o)=>t===r[o])?s[s.length-1]-r[r.length-1]:0}function gA(s,r,n){let{routesMeta:t}=s,o={},c="/",l=[];for(let f=0;f<t.length;++f){let a=t[f],d=f===t.length-1,_=c==="/"?r:r.slice(c.length)||"/",w=v_({path:a.relativePath,caseSensitive:a.caseSensitive,end:d},_),h=a.route;if(!w&&d&&n&&!t[t.length-1].route.index&&(w=v_({path:a.relativePath,caseSensitive:a.caseSensitive,end:!1},_)),!w)return null;Object.assign(o,w.params),l.push({params:o,pathname:Ta([c,w.pathname]),pathnameBase:xA(Ta([c,w.pathnameBase])),route:h}),w.pathnameBase!=="/"&&(c=Ta([c,w.pathnameBase]))}return l}function v_(s,r){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,t]=yA(s.path,s.caseSensitive,s.end),o=r.match(n);if(!o)return null;let c=o[0],l=c.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:t.reduce((d,_,w)=>{let{paramName:h,isOptional:m}=_;if(h==="*"){let v=f[w]||"";l=c.slice(0,c.length-v.length).replace(/(.)\/+$/,"$1")}const b=f[w];return m&&!b?d[h]=void 0:d[h]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:c,pathnameBase:l,pattern:s}}function yA(s,r,n){r===void 0&&(r=!1),n===void 0&&(n=!0),Hx(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let t=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,f,a)=>(t.push({paramName:f,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(t.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,r?void 0:"i"),t]}function vA(s){try{return s.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Hx(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),s}}function Dy(s,r){if(r==="/")return s;if(!s.toLowerCase().startsWith(r.toLowerCase()))return null;let n=r.endsWith("/")?r.length-1:r.length,t=s.charAt(n);return t&&t!=="/"?null:s.slice(n)||"/"}function bA(s,r){r===void 0&&(r="/");let{pathname:n,search:t="",hash:o=""}=typeof s=="string"?Du(s):s;return{pathname:n?n.startsWith("/")?n:_A(n,r):r,search:SA(t),hash:jA(o)}}function _A(s,r){let n=r.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function dg(s,r,n,t){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(t)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function wA(s){return s.filter((r,n)=>n===0||r.route.path&&r.route.path.length>0)}function Yx(s,r){let n=wA(s);return r?n.map((t,o)=>o===n.length-1?t.pathname:t.pathnameBase):n.map(t=>t.pathnameBase)}function $x(s,r,n,t){t===void 0&&(t=!1);let o;typeof s=="string"?o=Du(s):(o=Qc({},s),Rn(!o.pathname||!o.pathname.includes("?"),dg("?","pathname","search",o)),Rn(!o.pathname||!o.pathname.includes("#"),dg("#","pathname","hash",o)),Rn(!o.search||!o.search.includes("#"),dg("#","search","hash",o)));let c=s===""||o.pathname==="",l=c?"/":o.pathname,f;if(l==null)f=n;else{let w=r.length-1;if(!t&&l.startsWith("..")){let h=l.split("/");for(;h[0]==="..";)h.shift(),w-=1;o.pathname=h.join("/")}f=w>=0?r[w]:"/"}let a=bA(o,f),d=l&&l!=="/"&&l.endsWith("/"),_=(c||l===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(d||_)&&(a.pathname+="/"),a}const Ta=s=>s.join("/").replace(/\/\/+/g,"/"),xA=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),SA=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,jA=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function EA(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const Xx=["post","put","patch","delete"];new Set(Xx);const TA=["get",...Xx];new Set(TA);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zc(){return Zc=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(s[t]=n[t])}return s},Zc.apply(this,arguments)}const Ny=be.createContext(null),CA=be.createContext(null),Rl=be.createContext(null),Gf=be.createContext(null),Ol=be.createContext({outlet:null,matches:[],isDataRoute:!1}),Kx=be.createContext(null);function AA(s,r){let{relative:n}=r===void 0?{}:r;pd()||Rn(!1);let{basename:t,navigator:o}=be.useContext(Rl),{hash:c,pathname:l,search:f}=Zx(s,{relative:n}),a=l;return t!=="/"&&(a=l==="/"?t:Ta([t,l])),o.createHref({pathname:a,search:f,hash:c})}function pd(){return be.useContext(Gf)!=null}function Pa(){return pd()||Rn(!1),be.useContext(Gf).location}function Qx(s){be.useContext(Rl).static||be.useLayoutEffect(s)}function ms(){let{isDataRoute:s}=be.useContext(Ol);return s?BA():RA()}function RA(){pd()||Rn(!1);let s=be.useContext(Ny),{basename:r,future:n,navigator:t}=be.useContext(Rl),{matches:o}=be.useContext(Ol),{pathname:c}=Pa(),l=JSON.stringify(Yx(o,n.v7_relativeSplatPath)),f=be.useRef(!1);return Qx(()=>{f.current=!0}),be.useCallback(function(d,_){if(_===void 0&&(_={}),!f.current)return;if(typeof d=="number"){t.go(d);return}let w=$x(d,JSON.parse(l),c,_.relative==="path");s==null&&r!=="/"&&(w.pathname=w.pathname==="/"?r:Ta([r,w.pathname])),(_.replace?t.replace:t.push)(w,_.state,_)},[r,t,l,c,s])}function Zx(s,r){let{relative:n}=r===void 0?{}:r,{future:t}=be.useContext(Rl),{matches:o}=be.useContext(Ol),{pathname:c}=Pa(),l=JSON.stringify(Yx(o,t.v7_relativeSplatPath));return be.useMemo(()=>$x(s,JSON.parse(l),c,n==="path"),[s,l,c,n])}function OA(s,r){return IA(s,r)}function IA(s,r,n,t){pd()||Rn(!1);let{navigator:o}=be.useContext(Rl),{matches:c}=be.useContext(Ol),l=c[c.length-1],f=l?l.params:{};l&&l.pathname;let a=l?l.pathnameBase:"/";l&&l.route;let d=Pa(),_;if(r){var w;let g=typeof r=="string"?Du(r):r;a==="/"||(w=g.pathname)!=null&&w.startsWith(a)||Rn(!1),_=g}else _=d;let h=_.pathname||"/",m=h;if(a!=="/"){let g=a.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(g.length).join("/")}let b=iA(s,{pathname:m}),v=NA(b&&b.map(g=>Object.assign({},g,{params:Object.assign({},f,g.params),pathname:Ta([a,o.encodeLocation?o.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?a:Ta([a,o.encodeLocation?o.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),c,n,t);return r&&v?be.createElement(Gf.Provider,{value:{location:Zc({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:ja.Pop}},v):v}function kA(){let s=VA(),r=EA(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return be.createElement(be.Fragment,null,be.createElement("h2",null,"Unexpected Application Error!"),be.createElement("h3",{style:{fontStyle:"italic"}},r),n?be.createElement("pre",{style:o},n):null,null)}const MA=be.createElement(kA,null);class PA extends be.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,n){return n.location!==r.location||n.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:n.error,location:n.location,revalidation:r.revalidation||n.revalidation}}componentDidCatch(r,n){console.error("React Router caught the following error during render",r,n)}render(){return this.state.error!==void 0?be.createElement(Ol.Provider,{value:this.props.routeContext},be.createElement(Kx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function DA(s){let{routeContext:r,match:n,children:t}=s,o=be.useContext(Ny);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),be.createElement(Ol.Provider,{value:r},t)}function NA(s,r,n,t){var o;if(r===void 0&&(r=[]),n===void 0&&(n=null),t===void 0&&(t=null),s==null){var c;if(!n)return null;if(n.errors)s=n.matches;else if((c=t)!=null&&c.v7_partialHydration&&r.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let l=s,f=(o=n)==null?void 0:o.errors;if(f!=null){let _=l.findIndex(w=>w.route.id&&(f==null?void 0:f[w.route.id])!==void 0);_>=0||Rn(!1),l=l.slice(0,Math.min(l.length,_+1))}let a=!1,d=-1;if(n&&t&&t.v7_partialHydration)for(let _=0;_<l.length;_++){let w=l[_];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(d=_),w.route.id){let{loaderData:h,errors:m}=n,b=w.route.loader&&h[w.route.id]===void 0&&(!m||m[w.route.id]===void 0);if(w.route.lazy||b){a=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((_,w,h)=>{let m,b=!1,v=null,g=null;n&&(m=f&&w.route.id?f[w.route.id]:void 0,v=w.route.errorElement||MA,a&&(d<0&&h===0?(b=!0,g=null):d===h&&(b=!0,g=w.route.hydrateFallbackElement||null)));let p=r.concat(l.slice(0,h+1)),y=()=>{let S;return m?S=v:b?S=g:w.route.Component?S=be.createElement(w.route.Component,null):w.route.element?S=w.route.element:S=_,be.createElement(DA,{match:w,routeContext:{outlet:_,matches:p,isDataRoute:n!=null},children:S})};return n&&(w.route.ErrorBoundary||w.route.errorElement||h===0)?be.createElement(PA,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:y(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):y()},null)}var Jx=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}(Jx||{}),ff=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(ff||{});function LA(s){let r=be.useContext(Ny);return r||Rn(!1),r}function UA(s){let r=be.useContext(CA);return r||Rn(!1),r}function FA(s){let r=be.useContext(Ol);return r||Rn(!1),r}function eS(s){let r=FA(),n=r.matches[r.matches.length-1];return n.route.id||Rn(!1),n.route.id}function VA(){var s;let r=be.useContext(Kx),n=UA(ff.UseRouteError),t=eS(ff.UseRouteError);return r!==void 0?r:(s=n.errors)==null?void 0:s[t]}function BA(){let{router:s}=LA(Jx.UseNavigateStable),r=eS(ff.UseNavigateStable),n=be.useRef(!1);return Qx(()=>{n.current=!0}),be.useCallback(function(o,c){c===void 0&&(c={}),n.current&&(typeof o=="number"?s.navigate(o):s.navigate(o,Zc({fromRouteId:r},c)))},[s,r])}const b_={};function GA(s,r){b_[r]||(b_[r]=!0,console.warn(r))}const __=(s,r,n)=>GA(s," React Router Future Flag Warning: "+r+". "+("You can use the `"+s+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function zA(s,r){s!=null&&s.v7_startTransition||__("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(s!=null&&s.v7_relativeSplatPath)&&!r&&__("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function Br(s){Rn(!1)}function HA(s){let{basename:r="/",children:n=null,location:t,navigationType:o=ja.Pop,navigator:c,static:l=!1,future:f}=s;pd()&&Rn(!1);let a=r.replace(/^\/*/,"/"),d=be.useMemo(()=>({basename:a,navigator:c,static:l,future:Zc({v7_relativeSplatPath:!1},f)}),[a,f,c,l]);typeof t=="string"&&(t=Du(t));let{pathname:_="/",search:w="",hash:h="",state:m=null,key:b="default"}=t,v=be.useMemo(()=>{let g=Dy(_,a);return g==null?null:{location:{pathname:g,search:w,hash:h,state:m,key:b},navigationType:o}},[a,_,w,h,m,b,o]);return v==null?null:be.createElement(Rl.Provider,{value:d},be.createElement(Gf.Provider,{children:n,value:v}))}function qA(s){let{children:r,location:n}=s;return OA($g(r),n)}new Promise(()=>{});function $g(s,r){r===void 0&&(r=[]);let n=[];return be.Children.forEach(s,(t,o)=>{if(!be.isValidElement(t))return;let c=[...r,o];if(t.type===be.Fragment){n.push.apply(n,$g(t.props.children,c));return}t.type!==Br&&Rn(!1),!t.props.index||!t.props.children||Rn(!1);let l={id:t.props.id||c.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:t.props.ErrorBoundary!=null||t.props.errorElement!=null,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(l.children=$g(t.props.children,c)),n.push(l)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xg(){return Xg=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(s[t]=n[t])}return s},Xg.apply(this,arguments)}function WA(s,r){if(s==null)return{};var n={},t=Object.keys(s),o,c;for(c=0;c<t.length;c++)o=t[c],!(r.indexOf(o)>=0)&&(n[o]=s[o]);return n}function YA(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function $A(s,r){return s.button===0&&(!r||r==="_self")&&!YA(s)}function Kg(s){return s===void 0&&(s=""),new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((r,n)=>{let t=s[n];return r.concat(Array.isArray(t)?t.map(o=>[n,o]):[[n,t]])},[]))}function XA(s,r){let n=Kg(s);return r&&r.forEach((t,o)=>{n.has(o)||r.getAll(o).forEach(c=>{n.append(o,c)})}),n}const KA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],QA="6";try{window.__reactRouterVersion=QA}catch{}const ZA="startTransition",w_=Wg[ZA];function JA(s){let{basename:r,children:n,future:t,window:o}=s,c=be.useRef();c.current==null&&(c.current=rA({window:o,v5Compat:!0}));let l=c.current,[f,a]=be.useState({action:l.action,location:l.location}),{v7_startTransition:d}=t||{},_=be.useCallback(w=>{d&&w_?w_(()=>a(w)):a(w)},[a,d]);return be.useLayoutEffect(()=>l.listen(_),[l,_]),be.useEffect(()=>zA(t),[t]),be.createElement(HA,{basename:r,children:n,location:f.location,navigationType:f.action,navigator:l,future:t})}const eR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gn=be.forwardRef(function(r,n){let{onClick:t,relative:o,reloadDocument:c,replace:l,state:f,target:a,to:d,preventScrollReset:_,viewTransition:w}=r,h=WA(r,KA),{basename:m}=be.useContext(Rl),b,v=!1;if(typeof d=="string"&&tR.test(d)&&(b=d,eR))try{let S=new URL(window.location.href),j=d.startsWith("//")?new URL(S.protocol+d):new URL(d),A=Dy(j.pathname,m);j.origin===S.origin&&A!=null?d=A+j.search+j.hash:v=!0}catch{}let g=AA(d,{relative:o}),p=rR(d,{replace:l,state:f,target:a,preventScrollReset:_,relative:o,viewTransition:w});function y(S){t&&t(S),S.defaultPrevented||p(S)}return be.createElement("a",Xg({},h,{href:b||g,onClick:v||c?t:y,ref:n,target:a}))});var x_;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(x_||(x_={}));var S_;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(S_||(S_={}));function rR(s,r){let{target:n,replace:t,state:o,preventScrollReset:c,relative:l,viewTransition:f}=r===void 0?{}:r,a=ms(),d=Pa(),_=Zx(s,{relative:l});return be.useCallback(w=>{if($A(w,n)){w.preventDefault();let h=t!==void 0?t:hf(d)===hf(_);a(s,{replace:h,state:o,preventScrollReset:c,relative:l,viewTransition:f})}},[d,a,_,t,o,n,s,c,l,f])}function nR(s){let r=be.useRef(Kg(s)),n=be.useRef(!1),t=Pa(),o=be.useMemo(()=>XA(t.search,n.current?null:r.current),[t.search]),c=ms(),l=be.useCallback((f,a)=>{const d=Kg(typeof f=="function"?f(o):f);n.current=!0,c("?"+d,a)},[c,o]);return[o,l]}const sR=""+new URL("signed_stablehand_logo-B-KOcpbG.png",import.meta.url).href,tS=({children:s})=>B.jsx("div",{className:"flex flex-col items-center justify-top min-h-screen p-0 bg-gray-100",children:B.jsx("div",{className:"w-full max-w-lg bg-white p-8 rounded-lg shadow-md border border-gray-300",children:s})}),In=({children:s,bgColor:r="bg-gray-100",paddingY:n="py-4",paddingX:t="px-8",marginX:o="mx-2",border:c="border border-red-700",rounded:l="rounded-lg",shadow:f="shadow-md",fullWidth:a="w-screen"})=>B.jsx("div",{className:`flex flex-col items-center justify-top min-h-screen ${a} ${r} ${n} ${t} ${o} ${l} ${f} ${c}`,style:{position:"relative",zIndex:2},children:s}),zf=({children:s})=>B.jsx("div",{className:"w-full bg-blue-100 p-8 rounded-lg shadow-md border border-blue-700",children:B.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen",children:s})}),iR=()=>{const s=ms(),[r,n]=be.useState(!1);return be.useEffect(()=>{const t=setTimeout(()=>n(!0),300);return()=>clearTimeout(t)},[]),B.jsx(In,{bgColor:"bg-gray-100",children:B.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gray-100",children:[B.jsx("div",{className:`relative mb-3 transition-opacity duration-1000 ${r?"opacity-100":"opacity-0"}`,children:B.jsx("img",{src:sR,alt:"Welcome to StableGait, a unique therapy to relieve tremor",className:"w-100 h-100 object-cover rounded-full shadow-x3"})}),B.jsxs("div",{className:"text-center mb-6",children:[B.jsx("h1",{className:"text-5xl font-bold text-gray-800 mb-2",children:"Welcome to Stablehand"}),B.jsx("p",{className:"text-red-500 text-center",children:"A Unique Virtual Tool to Stabilize Tremor"})]}),B.jsx("div",{className:"w-full p-2 bg-white rounded-lg shadow-lg max-w-md",children:B.jsxs("div",{className:"mt-8 flex space-x-4",children:[B.jsx("button",{onClick:()=>s("/login"),className:"w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg",children:"Login"}),B.jsx("button",{onClick:()=>s("/register"),className:"w-full bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg",children:"Register"})]})})]})})};var j_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=function(s){const r=[];let n=0;for(let t=0;t<s.length;t++){let o=s.charCodeAt(t);o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=o&63|128):(o&64512)===55296&&t+1<s.length&&(s.charCodeAt(t+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++t)&1023),r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=o&63|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=o&63|128)}return r},oR=function(s){const r=[];let n=0,t=0;for(;n<s.length;){const o=s[n++];if(o<128)r[t++]=String.fromCharCode(o);else if(o>191&&o<224){const c=s[n++];r[t++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=s[n++],l=s[n++],f=s[n++],a=((o&7)<<18|(c&63)<<12|(l&63)<<6|f&63)-65536;r[t++]=String.fromCharCode(55296+(a>>10)),r[t++]=String.fromCharCode(56320+(a&1023))}else{const c=s[n++],l=s[n++];r[t++]=String.fromCharCode((o&15)<<12|(c&63)<<6|l&63)}}return r.join("")},nS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,r){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=r?this.byteToCharMapWebSafe_:this.byteToCharMap_,t=[];for(let o=0;o<s.length;o+=3){const c=s[o],l=o+1<s.length,f=l?s[o+1]:0,a=o+2<s.length,d=a?s[o+2]:0,_=c>>2,w=(c&3)<<4|f>>4;let h=(f&15)<<2|d>>6,m=d&63;a||(m=64,l||(h=64)),t.push(n[_],n[w],n[h],n[m])}return t.join("")},encodeString(s,r){return this.HAS_NATIVE_SUPPORT&&!r?btoa(s):this.encodeByteArray(rS(s),r)},decodeString(s,r){return this.HAS_NATIVE_SUPPORT&&!r?atob(s):oR(this.decodeStringToByteArray(s,r))},decodeStringToByteArray(s,r){this.init_();const n=r?this.charToByteMapWebSafe_:this.charToByteMap_,t=[];for(let o=0;o<s.length;){const c=n[s.charAt(o++)],f=o<s.length?n[s.charAt(o)]:0;++o;const d=o<s.length?n[s.charAt(o)]:64;++o;const w=o<s.length?n[s.charAt(o)]:64;if(++o,c==null||f==null||d==null||w==null)throw new aR;const h=c<<2|f>>4;if(t.push(h),d!==64){const m=f<<4&240|d>>2;if(t.push(m),w!==64){const b=d<<6&192|w;t.push(b)}}}return t},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class aR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lR=function(s){const r=rS(s);return nS.encodeByteArray(r,!0)},pf=function(s){return lR(s).replace(/\./g,"")},sS=function(s){try{return nS.decodeString(s,!0)}catch(r){console.error("base64Decode failed: ",r)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=()=>uR().__FIREBASE_DEFAULTS__,dR=()=>{if(typeof process>"u"||typeof j_>"u")return;const s=j_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},hR=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const r=s&&sS(s[1]);return r&&JSON.parse(r)},Hf=()=>{try{return cR()||dR()||hR()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},iS=s=>{var r,n;return(n=(r=Hf())===null||r===void 0?void 0:r.emulatorHosts)===null||n===void 0?void 0:n[s]},oS=s=>{const r=iS(s);if(!r)return;const n=r.lastIndexOf(":");if(n<=0||n+1===r.length)throw new Error(`Invalid host ${r} with no separate hostname and port!`);const t=parseInt(r.substring(n+1),10);return r[0]==="["?[r.substring(1,n-1),t]:[r.substring(0,n),t]},aS=()=>{var s;return(s=Hf())===null||s===void 0?void 0:s.config},lS=s=>{var r;return(r=Hf())===null||r===void 0?void 0:r[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((r,n)=>{this.resolve=r,this.reject=n})}wrapCallback(r){return(n,t)=>{n?this.reject(n):this.resolve(t),typeof r=="function"&&(this.promise.catch(()=>{}),r.length===1?r(n):r(n,t))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(s,r){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},t=r||"demo-project",o=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${t}`,aud:t,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},s);return[pf(JSON.stringify(n)),pf(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ps())}function mR(){var s;const r=(s=Hf())===null||s===void 0?void 0:s.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ly(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function yR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vR(){const s=ps();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function bR(){return!mR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Uy(){try{return typeof indexedDB=="object"}catch{return!1}}function Fy(){return new Promise((s,r)=>{try{let n=!0;const t="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(t);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(t),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;r(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){r(n)}})}function cS(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R="FirebaseError";class yi extends Error{constructor(r,n,t){super(n),this.code=r,this.customData=t,this.name=_R,Object.setPrototypeOf(this,yi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Il.prototype.create)}}class Il{constructor(r,n,t){this.service=r,this.serviceName=n,this.errors=t}create(r,...n){const t=n[0]||{},o=`${this.service}/${r}`,c=this.errors[r],l=c?wR(c,t):"Error",f=`${this.serviceName}: ${l} (${o}).`;return new yi(o,f,t)}}function wR(s,r){return s.replace(xR,(n,t)=>{const o=r[t];return o!=null?String(o):`<${t}?>`})}const xR=/\{\$([^}]+)}/g;function SR(s){for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r))return!1;return!0}function Jc(s,r){if(s===r)return!0;const n=Object.keys(s),t=Object.keys(r);for(const o of n){if(!t.includes(o))return!1;const c=s[o],l=r[o];if(E_(c)&&E_(l)){if(!Jc(c,l))return!1}else if(c!==l)return!1}for(const o of t)if(!n.includes(o))return!1;return!0}function E_(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(s){const r=[];for(const[n,t]of Object.entries(s))Array.isArray(t)?t.forEach(o=>{r.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):r.push(encodeURIComponent(n)+"="+encodeURIComponent(t));return r.length?"&"+r.join("&"):""}function Nc(s){const r={};return s.replace(/^\?/,"").split("&").forEach(t=>{if(t){const[o,c]=t.split("=");r[decodeURIComponent(o)]=decodeURIComponent(c)}}),r}function Lc(s){const r=s.indexOf("?");if(!r)return"";const n=s.indexOf("#",r);return s.substring(r,n>0?n:void 0)}function jR(s,r){const n=new ER(s,r);return n.subscribe.bind(n)}class ER{constructor(r,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{r(this)}).catch(t=>{this.error(t)})}next(r){this.forEachObserver(n=>{n.next(r)})}error(r){this.forEachObserver(n=>{n.error(r)}),this.close(r)}complete(){this.forEachObserver(r=>{r.complete()}),this.close()}subscribe(r,n,t){let o;if(r===void 0&&n===void 0&&t===void 0)throw new Error("Missing Observer.");TR(r,["next","error","complete"])?o=r:o={next:r,error:n,complete:t},o.next===void 0&&(o.next=hg),o.error===void 0&&(o.error=hg),o.complete===void 0&&(o.complete=hg);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(r){this.observers===void 0||this.observers[r]===void 0||(delete this.observers[r],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(r){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,r)}sendOne(r,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[r]!==void 0)try{n(this.observers[r])}catch(t){typeof console<"u"&&console.error&&console.error(t)}})}close(r){this.finalized||(this.finalized=!0,r!==void 0&&(this.finalError=r),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TR(s,r){if(typeof s!="object"||s===null)return!1;for(const n of r)if(n in s&&typeof s[n]=="function")return!0;return!1}function hg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=1e3,AR=2,RR=4*60*60*1e3,OR=.5;function T_(s,r=CR,n=AR){const t=r*Math.pow(n,s),o=Math.round(OR*t*(Math.random()-.5)*2);return Math.min(RR,t+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(s){return s&&s._delegate?s._delegate:s}class mi{constructor(r,n,t){this.name=r,this.instanceFactory=n,this.type=t,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(r){return this.instantiationMode=r,this}setMultipleInstances(r){return this.multipleInstances=r,this}setServiceProps(r){return this.serviceProps=r,this}setInstanceCreatedCallback(r){return this.onInstanceCreated=r,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(r,n){this.name=r,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(r){const n=this.normalizeInstanceIdentifier(r);if(!this.instancesDeferred.has(n)){const t=new fR;if(this.instancesDeferred.set(n,t),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&t.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(r){var n;const t=this.normalizeInstanceIdentifier(r==null?void 0:r.identifier),o=(n=r==null?void 0:r.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(r){if(r.name!==this.name)throw Error(`Mismatching Component ${r.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=r,!!this.shouldAutoInitialize()){if(MR(r))try{this.getOrInitializeService({instanceIdentifier:fl})}catch{}for(const[n,t]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});t.resolve(c)}catch{}}}}clearInstance(r=fl){this.instancesDeferred.delete(r),this.instancesOptions.delete(r),this.instances.delete(r)}async delete(){const r=Array.from(this.instances.values());await Promise.all([...r.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...r.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(r=fl){return this.instances.has(r)}getOptions(r=fl){return this.instancesOptions.get(r)||{}}initialize(r={}){const{options:n={}}=r,t=this.normalizeInstanceIdentifier(r.instanceIdentifier);if(this.isInitialized(t))throw Error(`${this.name}(${t}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:t,options:n});for(const[c,l]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(c);t===f&&l.resolve(o)}return o}onInit(r,n){var t;const o=this.normalizeInstanceIdentifier(n),c=(t=this.onInitCallbacks.get(o))!==null&&t!==void 0?t:new Set;c.add(r),this.onInitCallbacks.set(o,c);const l=this.instances.get(o);return l&&r(l,o),()=>{c.delete(r)}}invokeOnInitCallbacks(r,n){const t=this.onInitCallbacks.get(n);if(t)for(const o of t)try{o(r,n)}catch{}}getOrInitializeService({instanceIdentifier:r,options:n={}}){let t=this.instances.get(r);if(!t&&this.component&&(t=this.component.instanceFactory(this.container,{instanceIdentifier:kR(r),options:n}),this.instances.set(r,t),this.instancesOptions.set(r,n),this.invokeOnInitCallbacks(t,r),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,r,t)}catch{}return t||null}normalizeInstanceIdentifier(r=fl){return this.component?this.component.multipleInstances?r:fl:r}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kR(s){return s===fl?void 0:s}function MR(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(r){this.name=r,this.providers=new Map}addComponent(r){const n=this.getProvider(r.name);if(n.isComponentSet())throw new Error(`Component ${r.name} has already been registered with ${this.name}`);n.setComponent(r)}addOrOverwriteComponent(r){this.getProvider(r.name).isComponentSet()&&this.providers.delete(r.name),this.addComponent(r)}getProvider(r){if(this.providers.has(r))return this.providers.get(r);const n=new IR(r,this);return this.providers.set(r,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hr;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(hr||(hr={}));const DR={debug:hr.DEBUG,verbose:hr.VERBOSE,info:hr.INFO,warn:hr.WARN,error:hr.ERROR,silent:hr.SILENT},NR=hr.INFO,LR={[hr.DEBUG]:"log",[hr.VERBOSE]:"log",[hr.INFO]:"info",[hr.WARN]:"warn",[hr.ERROR]:"error"},UR=(s,r,...n)=>{if(r<s.logLevel)return;const t=new Date().toISOString(),o=LR[r];if(o)console[o](`[${t}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${r})`)};class qf{constructor(r){this.name=r,this._logLevel=NR,this._logHandler=UR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(r){if(!(r in hr))throw new TypeError(`Invalid value "${r}" assigned to \`logLevel\``);this._logLevel=r}setLogLevel(r){this._logLevel=typeof r=="string"?DR[r]:r}get logHandler(){return this._logHandler}set logHandler(r){if(typeof r!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=r}get userLogHandler(){return this._userLogHandler}set userLogHandler(r){this._userLogHandler=r}debug(...r){this._userLogHandler&&this._userLogHandler(this,hr.DEBUG,...r),this._logHandler(this,hr.DEBUG,...r)}log(...r){this._userLogHandler&&this._userLogHandler(this,hr.VERBOSE,...r),this._logHandler(this,hr.VERBOSE,...r)}info(...r){this._userLogHandler&&this._userLogHandler(this,hr.INFO,...r),this._logHandler(this,hr.INFO,...r)}warn(...r){this._userLogHandler&&this._userLogHandler(this,hr.WARN,...r),this._logHandler(this,hr.WARN,...r)}error(...r){this._userLogHandler&&this._userLogHandler(this,hr.ERROR,...r),this._logHandler(this,hr.ERROR,...r)}}const FR=(s,r)=>r.some(n=>s instanceof n);let C_,A_;function VR(){return C_||(C_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BR(){return A_||(A_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dS=new WeakMap,Qg=new WeakMap,hS=new WeakMap,fg=new WeakMap,Vy=new WeakMap;function GR(s){const r=new Promise((n,t)=>{const o=()=>{s.removeEventListener("success",c),s.removeEventListener("error",l)},c=()=>{n(Ca(s.result)),o()},l=()=>{t(s.error),o()};s.addEventListener("success",c),s.addEventListener("error",l)});return r.then(n=>{n instanceof IDBCursor&&dS.set(n,s)}).catch(()=>{}),Vy.set(r,s),r}function zR(s){if(Qg.has(s))return;const r=new Promise((n,t)=>{const o=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",l),s.removeEventListener("abort",l)},c=()=>{n(),o()},l=()=>{t(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",c),s.addEventListener("error",l),s.addEventListener("abort",l)});Qg.set(s,r)}let Zg={get(s,r,n){if(s instanceof IDBTransaction){if(r==="done")return Qg.get(s);if(r==="objectStoreNames")return s.objectStoreNames||hS.get(s);if(r==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ca(s[r])},set(s,r,n){return s[r]=n,!0},has(s,r){return s instanceof IDBTransaction&&(r==="done"||r==="store")?!0:r in s}};function HR(s){Zg=s(Zg)}function qR(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(r,...n){const t=s.call(pg(this),r,...n);return hS.set(t,r.sort?r.sort():[r]),Ca(t)}:BR().includes(s)?function(...r){return s.apply(pg(this),r),Ca(dS.get(this))}:function(...r){return Ca(s.apply(pg(this),r))}}function WR(s){return typeof s=="function"?qR(s):(s instanceof IDBTransaction&&zR(s),FR(s,VR())?new Proxy(s,Zg):s)}function Ca(s){if(s instanceof IDBRequest)return GR(s);if(fg.has(s))return fg.get(s);const r=WR(s);return r!==s&&(fg.set(s,r),Vy.set(r,s)),r}const pg=s=>Vy.get(s);function fS(s,r,{blocked:n,upgrade:t,blocking:o,terminated:c}={}){const l=indexedDB.open(s,r),f=Ca(l);return t&&l.addEventListener("upgradeneeded",a=>{t(Ca(l.result),a.oldVersion,a.newVersion,Ca(l.transaction),a)}),n&&l.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),f.then(a=>{c&&a.addEventListener("close",()=>c()),o&&a.addEventListener("versionchange",d=>o(d.oldVersion,d.newVersion,d))}).catch(()=>{}),f}const YR=["get","getKey","getAll","getAllKeys","count"],$R=["put","add","delete","clear"],mg=new Map;function R_(s,r){if(!(s instanceof IDBDatabase&&!(r in s)&&typeof r=="string"))return;if(mg.get(r))return mg.get(r);const n=r.replace(/FromIndex$/,""),t=r!==n,o=$R.includes(n);if(!(n in(t?IDBIndex:IDBObjectStore).prototype)||!(o||YR.includes(n)))return;const c=async function(l,...f){const a=this.transaction(l,o?"readwrite":"readonly");let d=a.store;return t&&(d=d.index(f.shift())),(await Promise.all([d[n](...f),o&&a.done]))[0]};return mg.set(r,c),c}HR(s=>({...s,get:(r,n,t)=>R_(r,n)||s.get(r,n,t),has:(r,n)=>!!R_(r,n)||s.has(r,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(r){this.container=r}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(KR(n)){const t=n.getImmediate();return`${t.library}/${t.version}`}else return null}).filter(n=>n).join(" ")}}function KR(s){const r=s.getComponent();return(r==null?void 0:r.type)==="VERSION"}const Jg="@firebase/app",O_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=new qf("@firebase/app"),QR="@firebase/app-compat",ZR="@firebase/analytics-compat",JR="@firebase/analytics",eO="@firebase/app-check-compat",tO="@firebase/app-check",rO="@firebase/auth",nO="@firebase/auth-compat",sO="@firebase/database",iO="@firebase/data-connect",oO="@firebase/database-compat",aO="@firebase/functions",lO="@firebase/functions-compat",uO="@firebase/installations",cO="@firebase/installations-compat",dO="@firebase/messaging",hO="@firebase/messaging-compat",fO="@firebase/performance",pO="@firebase/performance-compat",mO="@firebase/remote-config",gO="@firebase/remote-config-compat",yO="@firebase/storage",vO="@firebase/storage-compat",bO="@firebase/firestore",_O="@firebase/vertexai-preview",wO="@firebase/firestore-compat",xO="firebase",SO="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey="[DEFAULT]",jO={[Jg]:"fire-core",[QR]:"fire-core-compat",[JR]:"fire-analytics",[ZR]:"fire-analytics-compat",[tO]:"fire-app-check",[eO]:"fire-app-check-compat",[rO]:"fire-auth",[nO]:"fire-auth-compat",[sO]:"fire-rtdb",[iO]:"fire-data-connect",[oO]:"fire-rtdb-compat",[aO]:"fire-fn",[lO]:"fire-fn-compat",[uO]:"fire-iid",[cO]:"fire-iid-compat",[dO]:"fire-fcm",[hO]:"fire-fcm-compat",[fO]:"fire-perf",[pO]:"fire-perf-compat",[mO]:"fire-rc",[gO]:"fire-rc-compat",[yO]:"fire-gcs",[vO]:"fire-gcs-compat",[bO]:"fire-fst",[wO]:"fire-fst-compat",[_O]:"fire-vertex","fire-js":"fire-js",[xO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed=new Map,EO=new Map,ty=new Map;function I_(s,r){try{s.container.addComponent(r)}catch(n){Vo.debug(`Component ${r.name} failed to register with FirebaseApp ${s.name}`,n)}}function Pi(s){const r=s.name;if(ty.has(r))return Vo.debug(`There were multiple attempts to register component ${r}.`),!1;ty.set(r,s);for(const n of ed.values())I_(n,s);for(const n of EO.values())I_(n,s);return!0}function Da(s,r){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(r)}function pi(s){return s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Aa=new Il("app","Firebase",TO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(r,n,t){this._isDeleted=!1,this._options=Object.assign({},r),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=t,this.container.addComponent(new mi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(r){this.checkDestroyed(),this._automaticDataCollectionEnabled=r}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(r){this._isDeleted=r}checkDestroyed(){if(this.isDeleted)throw Aa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=SO;function pS(s,r={}){let n=s;typeof r!="object"&&(r={name:r});const t=Object.assign({name:ey,automaticDataCollectionEnabled:!1},r),o=t.name;if(typeof o!="string"||!o)throw Aa.create("bad-app-name",{appName:String(o)});if(n||(n=aS()),!n)throw Aa.create("no-options");const c=ed.get(o);if(c){if(Jc(n,c.options)&&Jc(t,c.config))return c;throw Aa.create("duplicate-app",{appName:o})}const l=new PR(o);for(const a of ty.values())l.addComponent(a);const f=new CO(n,t,l);return ed.set(o,f),f}function md(s=ey){const r=ed.get(s);if(!r&&s===ey&&aS())return pS();if(!r)throw Aa.create("no-app",{appName:s});return r}function AO(){return Array.from(ed.values())}function Is(s,r,n){var t;let o=(t=jO[s])!==null&&t!==void 0?t:s;n&&(o+=`-${n}`);const c=o.match(/\s|\//),l=r.match(/\s|\//);if(c||l){const f=[`Unable to register library "${o}" with version "${r}":`];c&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&l&&f.push("and"),l&&f.push(`version name "${r}" contains illegal characters (whitespace or "/")`),Vo.warn(f.join(" "));return}Pi(new mi(`${o}-version`,()=>({library:o,version:r}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO="firebase-heartbeat-database",OO=1,td="firebase-heartbeat-store";let gg=null;function mS(){return gg||(gg=fS(RO,OO,{upgrade:(s,r)=>{switch(r){case 0:try{s.createObjectStore(td)}catch(n){console.warn(n)}}}}).catch(s=>{throw Aa.create("idb-open",{originalErrorMessage:s.message})})),gg}async function IO(s){try{const n=(await mS()).transaction(td),t=await n.objectStore(td).get(gS(s));return await n.done,t}catch(r){if(r instanceof yi)Vo.warn(r.message);else{const n=Aa.create("idb-get",{originalErrorMessage:r==null?void 0:r.message});Vo.warn(n.message)}}}async function k_(s,r){try{const t=(await mS()).transaction(td,"readwrite");await t.objectStore(td).put(r,gS(s)),await t.done}catch(n){if(n instanceof yi)Vo.warn(n.message);else{const t=Aa.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Vo.warn(t.message)}}}function gS(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=1024,MO=30*24*60*60*1e3;class PO{constructor(r){this.container=r,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new NO(n),this._heartbeatsCachePromise=this._storage.read().then(t=>(this._heartbeatsCache=t,t))}async triggerHeartbeat(){var r,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=M_();return((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(l=>l.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const f=new Date(l.date).valueOf();return Date.now()-f<=MO}),this._storage.overwrite(this._heartbeatsCache))}catch(t){Vo.warn(t)}}async getHeartbeatsHeader(){var r;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=M_(),{heartbeatsToSend:t,unsentEntries:o}=DO(this._heartbeatsCache.heartbeats),c=pf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Vo.warn(n),""}}}function M_(){return new Date().toISOString().substring(0,10)}function DO(s,r=kO){const n=[];let t=s.slice();for(const o of s){const c=n.find(l=>l.agent===o.agent);if(c){if(c.dates.push(o.date),P_(n)>r){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),P_(n)>r){n.pop();break}t=t.slice(1)}return{heartbeatsToSend:n,unsentEntries:t}}class NO{constructor(r){this.app=r,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Uy()?Fy().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await IO(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(r){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return k_(this.app,{lastSentHeartbeatDate:(n=r.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:r.heartbeats})}else return}async add(r){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return k_(this.app,{lastSentHeartbeatDate:(n=r.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...r.heartbeats]})}else return}}function P_(s){return pf(JSON.stringify({version:2,heartbeats:s})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(s){Pi(new mi("platform-logger",r=>new XR(r),"PRIVATE")),Pi(new mi("heartbeat",r=>new PO(r),"PRIVATE")),Is(Jg,O_,s),Is(Jg,O_,"esm2017"),Is("fire-js","")}LO("");function By(s,r){var n={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&r.indexOf(t)<0&&(n[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(s);o<t.length;o++)r.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(s,t[o])&&(n[t[o]]=s[t[o]]);return n}function yS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UO=yS,vS=new Il("auth","Firebase",yS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf=new qf("@firebase/auth");function FO(s,...r){mf.logLevel<=hr.WARN&&mf.warn(`Auth (${kl}): ${s}`,...r)}function Qh(s,...r){mf.logLevel<=hr.ERROR&&mf.error(`Auth (${kl}): ${s}`,...r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(s,...r){throw zy(s,...r)}function ks(s,...r){return zy(s,...r)}function Gy(s,r,n){const t=Object.assign(Object.assign({},UO()),{[r]:n});return new Il("auth","Firebase",t).create(r,{appName:s.name})}function Ji(s){return Gy(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function VO(s,r,n){const t=n;if(!(r instanceof t))throw t.name!==r.constructor.name&&Ds(s,"argument-error"),Gy(s,"argument-error",`Type of ${r.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function zy(s,...r){if(typeof s!="string"){const n=r[0],t=[...r.slice(1)];return t[0]&&(t[0].appName=s.name),s._errorFactory.create(n,...t)}return vS.create(s,...r)}function St(s,r,...n){if(!s)throw zy(r,...n)}function Zi(s){const r="INTERNAL ASSERTION FAILED: "+s;throw Qh(r),new Error(r)}function Bo(s,r){s||Zi(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function bS(){return D_()==="http:"||D_()==="https:"}function D_(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bS()||Ly()||"connection"in navigator)?navigator.onLine:!0}function GO(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(r,n){this.shortDelay=r,this.longDelay=n,Bo(n>r,"Short delay should be less than long delay!"),this.isMobile=pR()||yR()}get(){return BO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(s,r){Bo(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return r?`${n}${r.startsWith("/")?r.slice(1):r}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{static initialize(r,n,t){this.fetchImpl=r,n&&(this.headersImpl=n),t&&(this.responseImpl=t)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=new gd(3e4,6e4);function kn(s,r){return s.tenantId&&!r.tenantId?Object.assign(Object.assign({},r),{tenantId:s.tenantId}):r}async function Wn(s,r,n,t,o={}){return wS(s,o,async()=>{let c={},l={};t&&(r==="GET"?l=t:c={body:JSON.stringify(t)});const f=Nu(Object.assign({key:s.config.apiKey},l)).slice(1),a=await s._getAdditionalHeaders();a["Content-Type"]="application/json",s.languageCode&&(a["X-Firebase-Locale"]=s.languageCode);const d=Object.assign({method:r,headers:a},c);return gR()||(d.referrerPolicy="no-referrer"),_S.fetch()(xS(s,s.config.apiHost,n,f),d)})}async function wS(s,r,n){s._canInitEmulator=!1;const t=Object.assign(Object.assign({},zO),r);try{const o=new WO(s),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const l=await c.json();if("needConfirmation"in l)throw Uc(s,"account-exists-with-different-credential",l);if(c.ok&&!("errorMessage"in l))return l;{const f=c.ok?l.errorMessage:l.error.message,[a,d]=f.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw Uc(s,"credential-already-in-use",l);if(a==="EMAIL_EXISTS")throw Uc(s,"email-already-in-use",l);if(a==="USER_DISABLED")throw Uc(s,"user-disabled",l);const _=t[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Gy(s,_,d);Ds(s,_)}}catch(o){if(o instanceof yi)throw o;Ds(s,"network-request-failed",{message:String(o)})}}async function Na(s,r,n,t,o={}){const c=await Wn(s,r,n,t,o);return"mfaPendingCredential"in c&&Ds(s,"multi-factor-auth-required",{_serverResponse:c}),c}function xS(s,r,n,t){const o=`${r}${n}?${t}`;return s.config.emulator?Hy(s.config,o):`${s.config.apiScheme}://${o}`}function qO(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class WO{constructor(r){this.auth=r,this.timer=null,this.promise=new Promise((n,t)=>{this.timer=setTimeout(()=>t(ks(this.auth,"network-request-failed")),HO.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Uc(s,r,n){const t={appName:s.name};n.email&&(t.email=n.email),n.phoneNumber&&(t.phoneNumber=n.phoneNumber);const o=ks(s,r,t);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(s){return s!==void 0&&s.getResponse!==void 0}function L_(s){return s!==void 0&&s.enterprise!==void 0}class YO{constructor(r){if(this.siteKey="",this.recaptchaEnforcementState=[],r.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=r.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=r.recaptchaEnforcementState}getProviderEnforcementState(r){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===r)return qO(n.enforcementState);return null}isProviderEnabled(r){return this.getProviderEnforcementState(r)==="ENFORCE"||this.getProviderEnforcementState(r)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $O(s){return(await Wn(s,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function XO(s,r){return Wn(s,"GET","/v2/recaptchaConfig",kn(s,r))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KO(s,r){return Wn(s,"POST","/v1/accounts:delete",r)}async function SS(s,r){return Wn(s,"POST","/v1/accounts:lookup",r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(s){if(s)try{const r=new Date(Number(s));if(!isNaN(r.getTime()))return r.toUTCString()}catch{}}async function QO(s,r=!1){const n=Ir(s),t=await n.getIdToken(r),o=qy(t);St(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,l=c==null?void 0:c.sign_in_provider;return{claims:o,token:t,authTime:Hc(yg(o.auth_time)),issuedAtTime:Hc(yg(o.iat)),expirationTime:Hc(yg(o.exp)),signInProvider:l||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function yg(s){return Number(s)*1e3}function qy(s){const[r,n,t]=s.split(".");if(r===void 0||n===void 0||t===void 0)return Qh("JWT malformed, contained fewer than 3 sections"),null;try{const o=sS(n);return o?JSON.parse(o):(Qh("Failed to decode base64 JWT payload"),null)}catch(o){return Qh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function U_(s){const r=qy(s);return St(r,"internal-error"),St(typeof r.exp<"u","internal-error"),St(typeof r.iat<"u","internal-error"),Number(r.exp)-Number(r.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(s,r,n=!1){if(n)return r;try{return await r}catch(t){throw t instanceof yi&&ZO(t)&&s.auth.currentUser===s&&await s.auth.signOut(),t}}function ZO({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(r){this.user=r,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(r){var n;if(r){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(r=!1){if(!this.isRunning)return;const n=this.getInterval(r);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(r){(r==null?void 0:r.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(r,n){this.createdAt=r,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hc(this.lastLoginAt),this.creationTime=Hc(this.createdAt)}_copy(r){this.createdAt=r.createdAt,this.lastLoginAt=r.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gf(s){var r;const n=s.auth,t=await s.getIdToken(),o=await wl(s,SS(n,{idToken:t}));St(o==null?void 0:o.users.length,n,"internal-error");const c=o.users[0];s._notifyReloadListener(c);const l=!((r=c.providerUserInfo)===null||r===void 0)&&r.length?jS(c.providerUserInfo):[],f=eI(s.providerData,l),a=s.isAnonymous,d=!(s.email&&c.passwordHash)&&!(f!=null&&f.length),_=a?d:!1,w={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:f,metadata:new ny(c.createdAt,c.lastLoginAt),isAnonymous:_};Object.assign(s,w)}async function Wf(s){const r=Ir(s);await gf(r),await r.auth._persistUserIfCurrent(r),r.auth._notifyListenersIfCurrent(r)}function eI(s,r){return[...s.filter(t=>!r.some(o=>o.providerId===t.providerId)),...r]}function jS(s){return s.map(r=>{var{providerId:n}=r,t=By(r,["providerId"]);return{providerId:n,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tI(s,r){const n=await wS(s,{},async()=>{const t=Nu({grant_type:"refresh_token",refresh_token:r}).slice(1),{tokenApiHost:o,apiKey:c}=s.config,l=xS(s,o,"/v1/token",`key=${c}`),f=await s._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",_S.fetch()(l,{method:"POST",headers:f,body:t})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function rI(s,r){return Wn(s,"POST","/v2/accounts:revokeToken",kn(s,r))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(r){St(r.idToken,"internal-error"),St(typeof r.idToken<"u","internal-error"),St(typeof r.refreshToken<"u","internal-error");const n="expiresIn"in r&&typeof r.expiresIn<"u"?Number(r.expiresIn):U_(r.idToken);this.updateTokensAndExpiration(r.idToken,r.refreshToken,n)}updateFromIdToken(r){St(r.length!==0,"internal-error");const n=U_(r);this.updateTokensAndExpiration(r,null,n)}async getToken(r,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(St(this.refreshToken,r,"user-token-expired"),this.refreshToken?(await this.refresh(r,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(r,n){const{accessToken:t,refreshToken:o,expiresIn:c}=await tI(r,n);this.updateTokensAndExpiration(t,o,Number(c))}updateTokensAndExpiration(r,n,t){this.refreshToken=n||null,this.accessToken=r||null,this.expirationTime=Date.now()+t*1e3}static fromJSON(r,n){const{refreshToken:t,accessToken:o,expirationTime:c}=n,l=new _u;return t&&(St(typeof t=="string","internal-error",{appName:r}),l.refreshToken=t),o&&(St(typeof o=="string","internal-error",{appName:r}),l.accessToken=o),c&&(St(typeof c=="number","internal-error",{appName:r}),l.expirationTime=c),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(r){this.accessToken=r.accessToken,this.refreshToken=r.refreshToken,this.expirationTime=r.expirationTime}_clone(){return Object.assign(new _u,this.toJSON())}_performRefresh(){return Zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(s,r){St(typeof s=="string"||typeof s>"u","internal-error",{appName:r})}class Do{constructor(r){var{uid:n,auth:t,stsTokenManager:o}=r,c=By(r,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new JO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=t,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new ny(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(r){const n=await wl(this,this.stsTokenManager.getToken(this.auth,r));return St(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(r){return QO(this,r)}reload(){return Wf(this)}_assign(r){this!==r&&(St(this.uid===r.uid,this.auth,"internal-error"),this.displayName=r.displayName,this.photoURL=r.photoURL,this.email=r.email,this.emailVerified=r.emailVerified,this.phoneNumber=r.phoneNumber,this.isAnonymous=r.isAnonymous,this.tenantId=r.tenantId,this.providerData=r.providerData.map(n=>Object.assign({},n)),this.metadata._copy(r.metadata),this.stsTokenManager._assign(r.stsTokenManager))}_clone(r){const n=new Do(Object.assign(Object.assign({},this),{auth:r,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(r){St(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=r,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(r){this.reloadListener?this.reloadListener(r):this.reloadUserInfo=r}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(r,n=!1){let t=!1;r.idToken&&r.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(r),t=!0),n&&await gf(this),await this.auth._persistUserIfCurrent(this),t&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pi(this.auth.app))return Promise.reject(Ji(this.auth));const r=await this.getIdToken();return await wl(this,KO(this.auth,{idToken:r})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(r=>Object.assign({},r)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(r,n){var t,o,c,l,f,a,d,_;const w=(t=n.displayName)!==null&&t!==void 0?t:void 0,h=(o=n.email)!==null&&o!==void 0?o:void 0,m=(c=n.phoneNumber)!==null&&c!==void 0?c:void 0,b=(l=n.photoURL)!==null&&l!==void 0?l:void 0,v=(f=n.tenantId)!==null&&f!==void 0?f:void 0,g=(a=n._redirectEventId)!==null&&a!==void 0?a:void 0,p=(d=n.createdAt)!==null&&d!==void 0?d:void 0,y=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:S,emailVerified:j,isAnonymous:A,providerData:N,stsTokenManager:C}=n;St(S&&C,r,"internal-error");const T=_u.fromJSON(this.name,C);St(typeof S=="string",r,"internal-error"),wa(w,r.name),wa(h,r.name),St(typeof j=="boolean",r,"internal-error"),St(typeof A=="boolean",r,"internal-error"),wa(m,r.name),wa(b,r.name),wa(v,r.name),wa(g,r.name),wa(p,r.name),wa(y,r.name);const R=new Do({uid:S,auth:r,email:h,emailVerified:j,displayName:w,isAnonymous:A,photoURL:b,phoneNumber:m,tenantId:v,stsTokenManager:T,createdAt:p,lastLoginAt:y});return N&&Array.isArray(N)&&(R.providerData=N.map(P=>Object.assign({},P))),g&&(R._redirectEventId=g),R}static async _fromIdTokenResponse(r,n,t=!1){const o=new _u;o.updateFromServerResponse(n);const c=new Do({uid:n.localId,auth:r,stsTokenManager:o,isAnonymous:t});return await gf(c),c}static async _fromGetAccountInfoResponse(r,n,t){const o=n.users[0];St(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?jS(o.providerUserInfo):[],l=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),f=new _u;f.updateFromIdToken(t);const a=new Do({uid:o.localId,auth:r,stsTokenManager:f,isAnonymous:l}),d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new ny(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(a,d),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=new Map;function No(s){Bo(s instanceof Function,"Expected a class definition");let r=F_.get(s);return r?(Bo(r instanceof s,"Instance stored in cache mismatched with class"),r):(r=new s,F_.set(s,r),r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(r,n){this.storage[r]=n}async _get(r){const n=this.storage[r];return n===void 0?null:n}async _remove(r){delete this.storage[r]}_addListener(r,n){}_removeListener(r,n){}}ES.type="NONE";const V_=ES;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(s,r,n){return`firebase:${s}:${r}:${n}`}class wu{constructor(r,n,t){this.persistence=r,this.auth=n,this.userKey=t;const{config:o,name:c}=this.auth;this.fullUserKey=Zh(this.userKey,o.apiKey,c),this.fullPersistenceKey=Zh("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(r){return this.persistence._set(this.fullUserKey,r.toJSON())}async getCurrentUser(){const r=await this.persistence._get(this.fullUserKey);return r?Do._fromJSON(this.auth,r):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(r){if(this.persistence===r)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=r,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(r,n,t="authUser"){if(!n.length)return new wu(No(V_),r,t);const o=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let c=o[0]||No(V_);const l=Zh(t,r.config.apiKey,r.name);let f=null;for(const d of n)try{const _=await d._get(l);if(_){const w=Do._fromJSON(r,_);d!==c&&(f=w),c=d;break}}catch{}const a=o.filter(d=>d._shouldAllowMigration);return!c._shouldAllowMigration||!a.length?new wu(c,r,t):(c=a[0],f&&await c._set(l,f.toJSON()),await Promise.all(n.map(async d=>{if(d!==c)try{await d._remove(l)}catch{}})),new wu(c,r,t))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(s){const r=s.toLowerCase();if(r.includes("opera/")||r.includes("opr/")||r.includes("opios/"))return"Opera";if(RS(r))return"IEMobile";if(r.includes("msie")||r.includes("trident/"))return"IE";if(r.includes("edge/"))return"Edge";if(TS(r))return"Firefox";if(r.includes("silk/"))return"Silk";if(IS(r))return"Blackberry";if(kS(r))return"Webos";if(CS(r))return"Safari";if((r.includes("chrome/")||AS(r))&&!r.includes("edge/"))return"Chrome";if(OS(r))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,t=s.match(n);if((t==null?void 0:t.length)===2)return t[1]}return"Other"}function TS(s=ps()){return/firefox\//i.test(s)}function CS(s=ps()){const r=s.toLowerCase();return r.includes("safari/")&&!r.includes("chrome/")&&!r.includes("crios/")&&!r.includes("android")}function AS(s=ps()){return/crios\//i.test(s)}function RS(s=ps()){return/iemobile/i.test(s)}function OS(s=ps()){return/android/i.test(s)}function IS(s=ps()){return/blackberry/i.test(s)}function kS(s=ps()){return/webos/i.test(s)}function Wy(s=ps()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function nI(s=ps()){var r;return Wy(s)&&!!(!((r=window.navigator)===null||r===void 0)&&r.standalone)}function sI(){return vR()&&document.documentMode===10}function MS(s=ps()){return Wy(s)||OS(s)||kS(s)||IS(s)||/windows phone/i.test(s)||RS(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(s,r=[]){let n;switch(s){case"Browser":n=B_(ps());break;case"Worker":n=`${B_(ps())}-${s}`;break;default:n=s}const t=r.length?r.join(","):"FirebaseCore-web";return`${n}/JsCore/${kl}/${t}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(r){this.auth=r,this.queue=[]}pushCallback(r,n){const t=c=>new Promise((l,f)=>{try{const a=r(c);l(a)}catch(a){f(a)}});t.onAbort=n,this.queue.push(t);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(r){if(this.auth.currentUser===r)return;const n=[];try{for(const t of this.queue)await t(r),t.onAbort&&n.push(t.onAbort)}catch(t){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:t==null?void 0:t.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oI(s,r={}){return Wn(s,"GET","/v2/passwordPolicy",kn(s,r))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=6;class lI{constructor(r){var n,t,o,c;const l=r.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:aI,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=r.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(t=r.allowedNonAlphanumericCharacters)===null||t===void 0?void 0:t.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(c=r.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=r.schemaVersion}validatePassword(r){var n,t,o,c,l,f;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(r,a),this.validatePasswordCharacterOptions(r,a),a.isValid&&(a.isValid=(n=a.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),a.isValid&&(a.isValid=(t=a.meetsMaxPasswordLength)!==null&&t!==void 0?t:!0),a.isValid&&(a.isValid=(o=a.containsLowercaseLetter)!==null&&o!==void 0?o:!0),a.isValid&&(a.isValid=(c=a.containsUppercaseLetter)!==null&&c!==void 0?c:!0),a.isValid&&(a.isValid=(l=a.containsNumericCharacter)!==null&&l!==void 0?l:!0),a.isValid&&(a.isValid=(f=a.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),a}validatePasswordLengthOptions(r,n){const t=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;t&&(n.meetsMinPasswordLength=r.length>=t),o&&(n.meetsMaxPasswordLength=r.length<=o)}validatePasswordCharacterOptions(r,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let t;for(let o=0;o<r.length;o++)t=r.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,t>="a"&&t<="z",t>="A"&&t<="Z",t>="0"&&t<="9",this.allowedNonAlphanumericCharacters.includes(t))}updatePasswordCharacterOptionsStatuses(r,n,t,o,c){this.customStrengthOptions.containsLowercaseLetter&&(r.containsLowercaseLetter||(r.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(r.containsUppercaseLetter||(r.containsUppercaseLetter=t)),this.customStrengthOptions.containsNumericCharacter&&(r.containsNumericCharacter||(r.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(r.containsNonAlphanumericCharacter||(r.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(r,n,t,o){this.app=r,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=t,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new G_(this),this.idTokenSubscription=new G_(this),this.beforeStateQueue=new iI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=r.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(r,n){return n&&(this._popupRedirectResolver=No(n)),this._initializationPromise=this.queue(async()=>{var t,o;if(!this._deleted&&(this.persistenceManager=await wu.create(this,r),!this._deleted)){if(!((t=this._popupRedirectResolver)===null||t===void 0)&&t._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const r=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!r)){if(this.currentUser&&r&&this.currentUser.uid===r.uid){this._currentUser._assign(r),await this.currentUser.getIdToken();return}await this._updateCurrentUser(r,!0)}}async initializeCurrentUserFromIdToken(r){try{const n=await SS(this,{idToken:r}),t=await Do._fromGetAccountInfoResponse(this,n,r);await this.directlySetCurrentUser(t)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(r){var n;if(pi(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let o=t,c=!1;if(r&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,f=o==null?void 0:o._redirectEventId,a=await this.tryRedirectSignIn(r);(!l||l===f)&&(a!=null&&a.user)&&(o=a.user,c=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(o)}catch(l){o=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return St(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(r){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,r,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(r){try{await gf(r)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(r)}useDeviceLanguage(){this.languageCode=GO()}async _delete(){this._deleted=!0}async updateCurrentUser(r){if(pi(this.app))return Promise.reject(Ji(this));const n=r?Ir(r):null;return n&&St(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(r,n=!1){if(!this._deleted)return r&&St(this.tenantId===r.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(r),this.queue(async()=>{await this.directlySetCurrentUser(r),this.notifyAuthListeners()})}async signOut(){return pi(this.app)?Promise.reject(Ji(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(r){return pi(this.app)?Promise.reject(Ji(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(No(r))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(r){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(r)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const r=await oI(this),n=new lI(r);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(r){this._errorFactory=new Il("auth","Firebase",r())}onAuthStateChanged(r,n,t){return this.registerStateListener(this.authStateSubscription,r,n,t)}beforeAuthStateChanged(r,n){return this.beforeStateQueue.pushCallback(r,n)}onIdTokenChanged(r,n,t){return this.registerStateListener(this.idTokenSubscription,r,n,t)}authStateReady(){return new Promise((r,n)=>{if(this.currentUser)r();else{const t=this.onAuthStateChanged(()=>{t(),r()},n)}})}async revokeAccessToken(r){if(this.currentUser){const n=await this.currentUser.getIdToken(),t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:r,idToken:n};this.tenantId!=null&&(t.tenantId=this.tenantId),await rI(this,t)}}toJSON(){var r;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(r=this._currentUser)===null||r===void 0?void 0:r.toJSON()}}async _setRedirectUser(r,n){const t=await this.getOrInitRedirectPersistenceManager(n);return r===null?t.removeCurrentUser():t.setCurrentUser(r)}async getOrInitRedirectPersistenceManager(r){if(!this.redirectPersistenceManager){const n=r&&No(r)||this._popupRedirectResolver;St(n,this,"argument-error"),this.redirectPersistenceManager=await wu.create(this,[No(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(r){var n,t;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===r?this._currentUser:((t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId)===r?this.redirectUser:null}async _persistUserIfCurrent(r){if(r===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(r))}_notifyListenersIfCurrent(r){r===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=(n=(r=this.currentUser)===null||r===void 0?void 0:r.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(r,n,t,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let l=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(St(f,this,"internal-error"),f.then(()=>{l||c(this.currentUser)}),typeof n=="function"){const a=r.addObserver(n,t,o);return()=>{l=!0,a()}}else{const a=r.addObserver(n);return()=>{l=!0,a()}}}async directlySetCurrentUser(r){this.currentUser&&this.currentUser!==r&&this._currentUser._stopProactiveRefresh(),r&&this.isProactiveRefreshEnabled&&r._startProactiveRefresh(),this.currentUser=r,r?await this.assertedPersistence.setCurrentUser(r):await this.assertedPersistence.removeCurrentUser()}queue(r){return this.operations=this.operations.then(r,r),this.operations}get assertedPersistence(){return St(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(r){!r||this.frameworks.includes(r)||(this.frameworks.push(r),this.frameworks.sort(),this.clientVersion=PS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||r===void 0?void 0:r.getHeartbeatsHeader());t&&(n["X-Firebase-Client"]=t);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var r;const n=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||r===void 0?void 0:r.getToken());return n!=null&&n.error&&FO(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function xs(s){return Ir(s)}class G_{constructor(r){this.auth=r,this.observer=null,this.addObserver=jR(n=>this.observer=n)}get next(){return St(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cI(s){yd=s}function Yy(s){return yd.loadJS(s)}function dI(){return yd.recaptchaV2Script}function hI(){return yd.recaptchaEnterpriseScript}function fI(){return yd.gapiScript}function DS(s){return`__${s}${Math.floor(Math.random()*1e6)}`}const pI="recaptcha-enterprise",mI="NO_RECAPTCHA";class gI{constructor(r){this.type=pI,this.auth=xs(r)}async verify(r="verify",n=!1){async function t(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(l,f)=>{XO(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(a=>{if(a.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const d=new YO(a);return c.tenantId==null?c._agentRecaptchaConfig=d:c._tenantRecaptchaConfigs[c.tenantId]=d,l(d.siteKey)}}).catch(a=>{f(a)})})}function o(c,l,f){const a=window.grecaptcha;L_(a)?a.enterprise.ready(()=>{a.enterprise.execute(c,{action:r}).then(d=>{l(d)}).catch(()=>{l(mI)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((c,l)=>{t(this.auth).then(f=>{if(!n&&L_(window.grecaptcha))o(f,c,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let a=hI();a.length!==0&&(a+=f),Yy(a).then(()=>{o(f,c,l)}).catch(d=>{l(d)})}}).catch(f=>{l(f)})})}}async function z_(s,r,n,t=!1){const o=new gI(s);let c;try{c=await o.verify(n)}catch{c=await o.verify(n,!0)}const l=Object.assign({},r);return t?Object.assign(l,{captchaResp:c}):Object.assign(l,{captchaResponse:c}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function rd(s,r,n,t){var o;if(!((o=s._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await z_(s,r,n,n==="getOobCode");return t(s,c)}else return t(s,r).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await z_(s,r,n,n==="getOobCode");return t(s,l)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(s,r){const n=Da(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(Jc(c,r??{}))return o;Ds(o,"already-initialized")}return n.initialize({options:r})}function vI(s,r){const n=(r==null?void 0:r.persistence)||[],t=(Array.isArray(n)?n:[n]).map(No);r!=null&&r.errorMap&&s._updateErrorMap(r.errorMap),s._initializeWithPersistence(t,r==null?void 0:r.popupRedirectResolver)}function bI(s,r,n){const t=xs(s);St(t._canInitEmulator,t,"emulator-config-failed"),St(/^https?:\/\//.test(r),t,"invalid-emulator-scheme");const o=!1,c=NS(r),{host:l,port:f}=_I(r),a=f===null?"":`:${f}`;t.config.emulator={url:`${c}//${l}${a}/`},t.settings.appVerificationDisabledForTesting=!0,t.emulatorConfig=Object.freeze({host:l,port:f,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})}),wI()}function NS(s){const r=s.indexOf(":");return r<0?"":s.substr(0,r+1)}function _I(s){const r=NS(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(r.length));if(!n)return{host:"",port:null};const t=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(t);if(o){const c=o[1];return{host:c,port:H_(t.substr(c.length+1))}}else{const[c,l]=t.split(":");return{host:c,port:H_(l)}}}function H_(s){if(!s)return null;const r=Number(s);return isNaN(r)?null:r}function wI(){function s(){const r=document.createElement("p"),n=r.style;r.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",r.classList.add("firebase-emulator-warning"),document.body.appendChild(r)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(r,n){this.providerId=r,this.signInMethod=n}toJSON(){return Zi("not implemented")}_getIdTokenResponse(r){return Zi("not implemented")}_linkToIdToken(r,n){return Zi("not implemented")}_getReauthenticationResolver(r){return Zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xI(s,r){return Wn(s,"POST","/v1/accounts:resetPassword",kn(s,r))}async function SI(s,r){return Wn(s,"POST","/v1/accounts:signUp",r)}async function jI(s,r){return Wn(s,"POST","/v1/accounts:update",kn(s,r))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EI(s,r){return Na(s,"POST","/v1/accounts:signInWithPassword",kn(s,r))}async function $y(s,r){return Wn(s,"POST","/v1/accounts:sendOobCode",kn(s,r))}async function TI(s,r){return $y(s,r)}async function CI(s,r){return $y(s,r)}async function AI(s,r){return $y(s,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RI(s,r){return Na(s,"POST","/v1/accounts:signInWithEmailLink",kn(s,r))}async function OI(s,r){return Na(s,"POST","/v1/accounts:signInWithEmailLink",kn(s,r))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd extends Yf{constructor(r,n,t,o=null){super("password",t),this._email=r,this._password=n,this._tenantId=o}static _fromEmailAndPassword(r,n){return new nd(r,n,"password")}static _fromEmailAndCode(r,n,t=null){return new nd(r,n,"emailLink",t)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(r){const n=typeof r=="string"?JSON.parse(r):r;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(r){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rd(r,n,"signInWithPassword",EI);case"emailLink":return RI(r,{email:this._email,oobCode:this._password});default:Ds(r,"internal-error")}}async _linkToIdToken(r,n){switch(this.signInMethod){case"password":const t={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rd(r,t,"signUpPassword",SI);case"emailLink":return OI(r,{idToken:n,email:this._email,oobCode:this._password});default:Ds(r,"internal-error")}}_getReauthenticationResolver(r){return this._getIdTokenResponse(r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xu(s,r){return Na(s,"POST","/v1/accounts:signInWithIdp",kn(s,r))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II="http://localhost";class Go extends Yf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(r){const n=new Go(r.providerId,r.signInMethod);return r.idToken||r.accessToken?(r.idToken&&(n.idToken=r.idToken),r.accessToken&&(n.accessToken=r.accessToken),r.nonce&&!r.pendingToken&&(n.nonce=r.nonce),r.pendingToken&&(n.pendingToken=r.pendingToken)):r.oauthToken&&r.oauthTokenSecret?(n.accessToken=r.oauthToken,n.secret=r.oauthTokenSecret):Ds("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(r){const n=typeof r=="string"?JSON.parse(r):r,{providerId:t,signInMethod:o}=n,c=By(n,["providerId","signInMethod"]);if(!t||!o)return null;const l=new Go(t,o);return l.idToken=c.idToken||void 0,l.accessToken=c.accessToken||void 0,l.secret=c.secret,l.nonce=c.nonce,l.pendingToken=c.pendingToken||null,l}_getIdTokenResponse(r){const n=this.buildRequest();return xu(r,n)}_linkToIdToken(r,n){const t=this.buildRequest();return t.idToken=n,xu(r,t)}_getReauthenticationResolver(r){const n=this.buildRequest();return n.autoCreate=!1,xu(r,n)}buildRequest(){const r={requestUri:II,returnSecureToken:!0};if(this.pendingToken)r.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),r.postBody=Nu(n)}return r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kI(s,r){return Wn(s,"POST","/v1/accounts:sendVerificationCode",kn(s,r))}async function MI(s,r){return Na(s,"POST","/v1/accounts:signInWithPhoneNumber",kn(s,r))}async function PI(s,r){const n=await Na(s,"POST","/v1/accounts:signInWithPhoneNumber",kn(s,r));if(n.temporaryProof)throw Uc(s,"account-exists-with-different-credential",n);return n}const DI={USER_NOT_FOUND:"user-not-found"};async function NI(s,r){const n=Object.assign(Object.assign({},r),{operation:"REAUTH"});return Na(s,"POST","/v1/accounts:signInWithPhoneNumber",kn(s,n),DI)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends Yf{constructor(r){super("phone","phone"),this.params=r}static _fromVerification(r,n){return new vl({verificationId:r,verificationCode:n})}static _fromTokenResponse(r,n){return new vl({phoneNumber:r,temporaryProof:n})}_getIdTokenResponse(r){return MI(r,this._makeVerificationRequest())}_linkToIdToken(r,n){return PI(r,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(r){return NI(r,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:r,phoneNumber:n,verificationId:t,verificationCode:o}=this.params;return r&&n?{temporaryProof:r,phoneNumber:n}:{sessionInfo:t,code:o}}toJSON(){const r={providerId:this.providerId};return this.params.phoneNumber&&(r.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(r.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(r.verificationCode=this.params.verificationCode),this.params.verificationId&&(r.verificationId=this.params.verificationId),r}static fromJSON(r){typeof r=="string"&&(r=JSON.parse(r));const{verificationId:n,verificationCode:t,phoneNumber:o,temporaryProof:c}=r;return!t&&!n&&!o&&!c?null:new vl({verificationId:n,verificationCode:t,phoneNumber:o,temporaryProof:c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function UI(s){const r=Nc(Lc(s)).link,n=r?Nc(Lc(r)).deep_link_id:null,t=Nc(Lc(s)).deep_link_id;return(t?Nc(Lc(t)).link:null)||t||n||r||s}class Xy{constructor(r){var n,t,o,c,l,f;const a=Nc(Lc(r)),d=(n=a.apiKey)!==null&&n!==void 0?n:null,_=(t=a.oobCode)!==null&&t!==void 0?t:null,w=LI((o=a.mode)!==null&&o!==void 0?o:null);St(d&&_&&w,"argument-error"),this.apiKey=d,this.operation=w,this.code=_,this.continueUrl=(c=a.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(l=a.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(f=a.tenantId)!==null&&f!==void 0?f:null}static parseLink(r){const n=UI(r);try{return new Xy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(){this.providerId=Ml.PROVIDER_ID}static credential(r,n){return nd._fromEmailAndPassword(r,n)}static credentialWithLink(r,n){const t=Xy.parseLink(n);return St(t,"argument-error"),nd._fromEmailAndCode(r,t.code,t.tenantId)}}Ml.PROVIDER_ID="password";Ml.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ml.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(r){this.providerId=r,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(r){this.defaultLanguageCode=r}setCustomParameters(r){return this.customParameters=r,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu extends Ky{constructor(){super(...arguments),this.scopes=[]}addScope(r){return this.scopes.includes(r)||this.scopes.push(r),this}getScopes(){return[...this.scopes]}}class Lo extends Lu{static credentialFromJSON(r){const n=typeof r=="string"?JSON.parse(r):r;return St("providerId"in n&&"signInMethod"in n,"argument-error"),Go._fromParams(n)}credential(r){return this._credential(Object.assign(Object.assign({},r),{nonce:r.rawNonce}))}_credential(r){return St(r.idToken||r.accessToken,"argument-error"),Go._fromParams(Object.assign(Object.assign({},r),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(r){return Lo.oauthCredentialFromTaggedObject(r)}static credentialFromError(r){return Lo.oauthCredentialFromTaggedObject(r.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:r}){if(!r)return null;const{oauthIdToken:n,oauthAccessToken:t,oauthTokenSecret:o,pendingToken:c,nonce:l,providerId:f}=r;if(!t&&!o&&!n&&!c||!f)return null;try{return new Lo(f)._credential({idToken:n,accessToken:t,nonce:l,pendingToken:c})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends Lu{constructor(){super("facebook.com")}static credential(r){return Go._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.FACEBOOK_SIGN_IN_METHOD,accessToken:r})}static credentialFromResult(r){return Xi.credentialFromTaggedObject(r)}static credentialFromError(r){return Xi.credentialFromTaggedObject(r.customData||{})}static credentialFromTaggedObject({_tokenResponse:r}){if(!r||!("oauthAccessToken"in r)||!r.oauthAccessToken)return null;try{return Xi.credential(r.oauthAccessToken)}catch{return null}}}Xi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends Lu{constructor(){super("google.com"),this.addScope("profile")}static credential(r,n){return Go._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.GOOGLE_SIGN_IN_METHOD,idToken:r,accessToken:n})}static credentialFromResult(r){return Ki.credentialFromTaggedObject(r)}static credentialFromError(r){return Ki.credentialFromTaggedObject(r.customData||{})}static credentialFromTaggedObject({_tokenResponse:r}){if(!r)return null;const{oauthIdToken:n,oauthAccessToken:t}=r;if(!n&&!t)return null;try{return Ki.credential(n,t)}catch{return null}}}Ki.GOOGLE_SIGN_IN_METHOD="google.com";Ki.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends Lu{constructor(){super("github.com")}static credential(r){return Go._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.GITHUB_SIGN_IN_METHOD,accessToken:r})}static credentialFromResult(r){return Qi.credentialFromTaggedObject(r)}static credentialFromError(r){return Qi.credentialFromTaggedObject(r.customData||{})}static credentialFromTaggedObject({_tokenResponse:r}){if(!r||!("oauthAccessToken"in r)||!r.oauthAccessToken)return null;try{return Qi.credential(r.oauthAccessToken)}catch{return null}}}Qi.GITHUB_SIGN_IN_METHOD="github.com";Qi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po extends Lu{constructor(){super("twitter.com")}static credential(r,n){return Go._fromParams({providerId:Po.PROVIDER_ID,signInMethod:Po.TWITTER_SIGN_IN_METHOD,oauthToken:r,oauthTokenSecret:n})}static credentialFromResult(r){return Po.credentialFromTaggedObject(r)}static credentialFromError(r){return Po.credentialFromTaggedObject(r.customData||{})}static credentialFromTaggedObject({_tokenResponse:r}){if(!r)return null;const{oauthAccessToken:n,oauthTokenSecret:t}=r;if(!n||!t)return null;try{return Po.credential(n,t)}catch{return null}}}Po.TWITTER_SIGN_IN_METHOD="twitter.com";Po.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FI(s,r){return Na(s,"POST","/v1/accounts:signUp",kn(s,r))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(r){this.user=r.user,this.providerId=r.providerId,this._tokenResponse=r._tokenResponse,this.operationType=r.operationType}static async _fromIdTokenResponse(r,n,t,o=!1){const c=await Do._fromIdTokenResponse(r,t,o),l=q_(t);return new zo({user:c,providerId:l,_tokenResponse:t,operationType:n})}static async _forOperation(r,n,t){await r._updateTokensIfNecessary(t,!0);const o=q_(t);return new zo({user:r,providerId:o,_tokenResponse:t,operationType:n})}}function q_(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf extends yi{constructor(r,n,t,o){var c;super(n.code,n.message),this.operationType=t,this.user=o,Object.setPrototypeOf(this,yf.prototype),this.customData={appName:r.name,tenantId:(c=r.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:n.customData._serverResponse,operationType:t}}static _fromErrorAndOperation(r,n,t,o){return new yf(r,n,t,o)}}function LS(s,r,n,t){return(r==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?yf._fromErrorAndOperation(s,c,r,t):c})}async function VI(s,r,n=!1){const t=await wl(s,r._linkToIdToken(s.auth,await s.getIdToken()),n);return zo._forOperation(s,"link",t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function US(s,r,n=!1){const{auth:t}=s;if(pi(t.app))return Promise.reject(Ji(t));const o="reauthenticate";try{const c=await wl(s,LS(t,o,r,s),n);St(c.idToken,t,"internal-error");const l=qy(c.idToken);St(l,t,"internal-error");const{sub:f}=l;return St(s.uid===f,t,"user-mismatch"),zo._forOperation(s,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Ds(t,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FS(s,r,n=!1){if(pi(s.app))return Promise.reject(Ji(s));const t="signIn",o=await LS(s,t,r),c=await zo._fromIdTokenResponse(s,t,o);return n||await s._updateCurrentUser(c.user),c}async function VS(s,r){return FS(xs(s),r)}async function BI(s,r){return US(Ir(s),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(r,n){this.factorId=r,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(r,n){return"phoneInfo"in n?Qy._fromServerResponse(r,n):"totpInfo"in n?Zy._fromServerResponse(r,n):Ds(r,"internal-error")}}class Qy extends vd{constructor(r){super("phone",r),this.phoneNumber=r.phoneInfo}static _fromServerResponse(r,n){return new Qy(n)}}class Zy extends vd{constructor(r){super("totp",r)}static _fromServerResponse(r,n){return new Zy(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(s,r,n){var t;St(((t=n.url)===null||t===void 0?void 0:t.length)>0,s,"invalid-continue-uri"),St(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,s,"invalid-dynamic-link-domain"),r.continueUrl=n.url,r.dynamicLinkDomain=n.dynamicLinkDomain,r.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(St(n.iOS.bundleId.length>0,s,"missing-ios-bundle-id"),r.iOSBundleId=n.iOS.bundleId),n.android&&(St(n.android.packageName.length>0,s,"missing-android-pkg-name"),r.androidInstallApp=n.android.installApp,r.androidMinimumVersionCode=n.android.minimumVersion,r.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BS(s){const r=xs(s);r._getPasswordPolicyInternal()&&await r._updatePasswordPolicy()}async function GS(s,r,n){const t=xs(s);await rd(t,{requestType:"PASSWORD_RESET",email:r,clientType:"CLIENT_TYPE_WEB"},"getOobCode",CI)}async function zI(s,r){await jI(Ir(s),{oobCode:r})}async function HI(s,r){const n=Ir(s),t=await xI(n,{oobCode:r}),o=t.requestType;switch(St(o,n,"internal-error"),o){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":St(t.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":St(t.mfaInfo,n,"internal-error");default:St(t.email,n,"internal-error")}let c=null;return t.mfaInfo&&(c=vd._fromServerResponse(xs(n),t.mfaInfo)),{data:{email:(t.requestType==="VERIFY_AND_CHANGE_EMAIL"?t.newEmail:t.email)||null,previousEmail:(t.requestType==="VERIFY_AND_CHANGE_EMAIL"?t.email:t.newEmail)||null,multiFactorInfo:c},operation:o}}async function zS(s,r,n){if(pi(s.app))return Promise.reject(Ji(s));const t=xs(s),l=await rd(t,{returnSecureToken:!0,email:r,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FI).catch(a=>{throw a.code==="auth/password-does-not-meet-requirements"&&BS(s),a}),f=await zo._fromIdTokenResponse(t,"signIn",l);return await t._updateCurrentUser(f.user),f}function sy(s,r,n){return pi(s.app)?Promise.reject(Ji(s)):VS(Ir(s),Ml.credential(r,n)).catch(async t=>{throw t.code==="auth/password-does-not-meet-requirements"&&BS(s),t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qI(s,r,n){const t=xs(s),o={requestType:"EMAIL_SIGNIN",email:r,clientType:"CLIENT_TYPE_WEB"};function c(l,f){St(f.handleCodeInApp,t,"argument-error"),f&&GI(t,l,f)}c(o,n),await rd(t,o,"getOobCode",AI)}async function vf(s,r){const n=Ir(s),o={requestType:"VERIFY_EMAIL",idToken:await s.getIdToken()},{email:c}=await TI(n.auth,o);c!==s.email&&await s.reload()}function WI(s,r,n,t){return Ir(s).onIdTokenChanged(r,n,t)}function YI(s,r,n){return Ir(s).beforeAuthStateChanged(r,n)}function $I(s,r,n,t){return Ir(s).onAuthStateChanged(r,n,t)}function HS(s){return Ir(s).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(r,n,t){this.type=r,this.credential=n,this.user=t}static _fromIdtoken(r,n){return new pl("enroll",r,n)}static _fromMfaPendingCredential(r){return new pl("signin",r)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(r){var n,t;if(r!=null&&r.multiFactorSession){if(!((n=r.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return pl._fromMfaPendingCredential(r.multiFactorSession.pendingCredential);if(!((t=r.multiFactorSession)===null||t===void 0)&&t.idToken)return pl._fromIdtoken(r.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(r,n,t){this.session=r,this.hints=n,this.signInResolver=t}static _fromError(r,n){const t=xs(r),o=n.customData._serverResponse,c=(o.mfaInfo||[]).map(f=>vd._fromServerResponse(t,f));St(o.mfaPendingCredential,t,"internal-error");const l=pl._fromMfaPendingCredential(o.mfaPendingCredential);return new Jy(l,c,async f=>{const a=await f._process(t,l);delete o.mfaInfo,delete o.mfaPendingCredential;const d=Object.assign(Object.assign({},o),{idToken:a.idToken,refreshToken:a.refreshToken});switch(n.operationType){case"signIn":const _=await zo._fromIdTokenResponse(t,n.operationType,d);return await t._updateCurrentUser(_.user),_;case"reauthenticate":return St(n.user,t,"internal-error"),zo._forOperation(n.user,n.operationType,d);default:Ds(t,"internal-error")}})}async resolveSignIn(r){const n=r;return this.signInResolver(n)}}function W_(s,r){var n;const t=Ir(s),o=r;return St(r.customData.operationType,t,"argument-error"),St((n=o.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,t,"argument-error"),Jy._fromError(t,o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(s,r){return Wn(s,"POST","/v2/accounts/mfaEnrollment:start",kn(s,r))}function KI(s,r){return Wn(s,"POST","/v2/accounts/mfaEnrollment:finalize",kn(s,r))}function QI(s,r){return Wn(s,"POST","/v2/accounts/mfaEnrollment:withdraw",kn(s,r))}class ev{constructor(r){this.user=r,this.enrolledFactors=[],r._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(t=>vd._fromServerResponse(r.auth,t)))})}static _fromUser(r){return new ev(r)}async getSession(){return pl._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(r,n){const t=r,o=await this.getSession(),c=await wl(this.user,t._process(this.user.auth,o,n));return await this.user._updateTokensIfNecessary(c),this.user.reload()}async unenroll(r){const n=typeof r=="string"?r:r.uid,t=await this.user.getIdToken();try{const o=await wl(this.user,QI(this.user.auth,{idToken:t,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:c})=>c!==n),await this.user._updateTokensIfNecessary(o),await this.user.reload()}catch(o){throw o}}}const vg=new WeakMap;function Eu(s){const r=Ir(s);return vg.has(r)||vg.set(r,ev._fromUser(r)),vg.get(r)}const bf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(r,n){this.storageRetriever=r,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bf,"1"),this.storage.removeItem(bf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(r,n){return this.storage.setItem(r,JSON.stringify(n)),Promise.resolve()}_get(r){const n=this.storage.getItem(r);return Promise.resolve(n?JSON.parse(n):null)}_remove(r){return this.storage.removeItem(r),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=1e3,JI=10;class WS extends qS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(r,n)=>this.onStorageEvent(r,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=MS(),this._shouldAllowMigration=!0}forAllChangedKeys(r){for(const n of Object.keys(this.listeners)){const t=this.storage.getItem(n),o=this.localCache[n];t!==o&&r(n,o,t)}}onStorageEvent(r,n=!1){if(!r.key){this.forAllChangedKeys((l,f,a)=>{this.notifyListeners(l,a)});return}const t=r.key;n?this.detachListener():this.stopPolling();const o=()=>{const l=this.storage.getItem(t);!n&&this.localCache[t]===l||this.notifyListeners(t,l)},c=this.storage.getItem(t);sI()&&c!==r.newValue&&r.newValue!==r.oldValue?setTimeout(o,JI):o()}notifyListeners(r,n){this.localCache[r]=n;const t=this.listeners[r];if(t)for(const o of Array.from(t))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((r,n,t)=>{this.onStorageEvent(new StorageEvent("storage",{key:r,oldValue:n,newValue:t}),!0)})},ZI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(r,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[r]||(this.listeners[r]=new Set,this.localCache[r]=this.storage.getItem(r)),this.listeners[r].add(n)}_removeListener(r,n){this.listeners[r]&&(this.listeners[r].delete(n),this.listeners[r].size===0&&delete this.listeners[r]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(r,n){await super._set(r,n),this.localCache[r]=JSON.stringify(n)}async _get(r){const n=await super._get(r);return this.localCache[r]=JSON.stringify(n),n}async _remove(r){await super._remove(r),delete this.localCache[r]}}WS.type="LOCAL";const ek=WS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS extends qS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(r,n){}_removeListener(r,n){}}YS.type="SESSION";const $S=YS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(s){return Promise.all(s.map(async r=>{try{return{fulfilled:!0,value:await r}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(r){this.eventTarget=r,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(r){const n=this.receivers.find(o=>o.isListeningto(r));if(n)return n;const t=new $f(r);return this.receivers.push(t),t}isListeningto(r){return this.eventTarget===r}async handleEvent(r){const n=r,{eventId:t,eventType:o,data:c}=n.data,l=this.handlersMap[o];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:t,eventType:o});const f=Array.from(l).map(async d=>d(n.origin,c)),a=await tk(f);n.ports[0].postMessage({status:"done",eventId:t,eventType:o,response:a})}_subscribe(r,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[r]||(this.handlersMap[r]=new Set),this.handlersMap[r].add(n)}_unsubscribe(r,n){this.handlersMap[r]&&n&&this.handlersMap[r].delete(n),(!n||this.handlersMap[r].size===0)&&delete this.handlersMap[r],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$f.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(s="",r=10){let n="";for(let t=0;t<r;t++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(r){this.target=r,this.handlers=new Set}removeMessageHandler(r){r.messageChannel&&(r.messageChannel.port1.removeEventListener("message",r.onMessage),r.messageChannel.port1.close()),this.handlers.delete(r)}async _send(r,n,t=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,l;return new Promise((f,a)=>{const d=tv("",20);o.port1.start();const _=setTimeout(()=>{a(new Error("unsupported_event"))},t);l={messageChannel:o,onMessage(w){const h=w;if(h.data.eventId===d)switch(h.data.status){case"ack":clearTimeout(_),c=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),f(h.data.response);break;default:clearTimeout(_),clearTimeout(c),a(new Error("invalid_response"));break}}},this.handlers.add(l),o.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:r,eventId:d,data:n},[o.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return window}function nk(s){En().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(){return typeof En().WorkerGlobalScope<"u"&&typeof En().importScripts=="function"}async function sk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ik(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function ok(){return rv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="firebaseLocalStorageDb",ak=1,_f="firebaseLocalStorage",KS="fbase_key";class bd{constructor(r){this.request=r}toPromise(){return new Promise((r,n)=>{this.request.addEventListener("success",()=>{r(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Xf(s,r){return s.transaction([_f],r?"readwrite":"readonly").objectStore(_f)}function lk(){const s=indexedDB.deleteDatabase(XS);return new bd(s).toPromise()}function iy(){const s=indexedDB.open(XS,ak);return new Promise((r,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const t=s.result;try{t.createObjectStore(_f,{keyPath:KS})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const t=s.result;t.objectStoreNames.contains(_f)?r(t):(t.close(),await lk(),r(await iy()))})})}async function Y_(s,r,n){const t=Xf(s,!0).put({[KS]:r,value:n});return new bd(t).toPromise()}async function uk(s,r){const n=Xf(s,!1).get(r),t=await new bd(n).toPromise();return t===void 0?null:t.value}function $_(s,r){const n=Xf(s,!0).delete(r);return new bd(n).toPromise()}const ck=800,dk=3;class QS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await iy(),this.db)}async _withRetries(r){let n=0;for(;;)try{const t=await this._openDb();return await r(t)}catch(t){if(n++>dk)throw t;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$f._getInstance(ok()),this.receiver._subscribe("keyChanged",async(r,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(r,n)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await sk(),!this.activeServiceWorker)return;this.sender=new rk(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&!((r=t[0])===null||r===void 0)&&r.fulfilled&&!((n=t[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(r){if(!(!this.sender||!this.activeServiceWorker||ik()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:r},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const r=await iy();return await Y_(r,bf,"1"),await $_(r,bf),!0}catch{}return!1}async _withPendingWrite(r){this.pendingWrites++;try{await r()}finally{this.pendingWrites--}}async _set(r,n){return this._withPendingWrite(async()=>(await this._withRetries(t=>Y_(t,r,n)),this.localCache[r]=n,this.notifyServiceWorker(r)))}async _get(r){const n=await this._withRetries(t=>uk(t,r));return this.localCache[r]=n,n}async _remove(r){return this._withPendingWrite(async()=>(await this._withRetries(n=>$_(n,r)),delete this.localCache[r],this.notifyServiceWorker(r)))}async _poll(){const r=await this._withRetries(o=>{const c=Xf(o,!1).getAll();return new bd(c).toPromise()});if(!r)return[];if(this.pendingWrites!==0)return[];const n=[],t=new Set;if(r.length!==0)for(const{fbase_key:o,value:c}of r)t.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!t.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(r,n){this.localCache[r]=n;const t=this.listeners[r];if(t)for(const o of Array.from(t))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ck)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(r,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[r]||(this.listeners[r]=new Set,this._get(r)),this.listeners[r].add(n)}_removeListener(r,n){this.listeners[r]&&(this.listeners[r].delete(n),this.listeners[r].size===0&&delete this.listeners[r]),Object.keys(this.listeners).length===0&&this.stopPolling()}}QS.type="LOCAL";const hk=QS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(s,r){return Wn(s,"POST","/v2/accounts/mfaSignIn:start",kn(s,r))}function pk(s,r){return Wn(s,"POST","/v2/accounts/mfaSignIn:finalize",kn(s,r))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk=500,gk=6e4,Ih=1e12;class yk{constructor(r){this.auth=r,this.counter=Ih,this._widgets=new Map}render(r,n){const t=this.counter;return this._widgets.set(t,new vk(r,this.auth.name,n||{})),this.counter++,t}reset(r){var n;const t=r||Ih;(n=this._widgets.get(t))===null||n===void 0||n.delete(),this._widgets.delete(t)}getResponse(r){var n;const t=r||Ih;return((n=this._widgets.get(t))===null||n===void 0?void 0:n.getResponse())||""}async execute(r){var n;const t=r||Ih;return(n=this._widgets.get(t))===null||n===void 0||n.execute(),""}}class vk{constructor(r,n,t){this.params=t,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const o=typeof r=="string"?document.getElementById(r):r;St(o,"argument-error",{appName:n}),this.container=o,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=bk(50);const{callback:r,"expired-callback":n}=this.params;if(r)try{r(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},gk)},mk))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function bk(s){const r=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<s;t++)r.push(n.charAt(Math.floor(Math.random()*n.length)));return r.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg=DS("rcb"),_k=new gd(3e4,6e4);class wk{constructor(){var r;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((r=En().grecaptcha)===null||r===void 0)&&r.render)}load(r,n=""){return St(xk(n),r,"argument-error"),this.shouldResolveImmediately(n)&&N_(En().grecaptcha)?Promise.resolve(En().grecaptcha):new Promise((t,o)=>{const c=En().setTimeout(()=>{o(ks(r,"network-request-failed"))},_k.get());En()[bg]=()=>{En().clearTimeout(c),delete En()[bg];const f=En().grecaptcha;if(!f||!N_(f)){o(ks(r,"internal-error"));return}const a=f.render;f.render=(d,_)=>{const w=a(d,_);return this.counter++,w},this.hostLanguage=n,t(f)};const l=`${dI()}?${Nu({onload:bg,render:"explicit",hl:n})}`;Yy(l).catch(()=>{clearTimeout(c),o(ks(r,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(r){var n;return!!(!((n=En().grecaptcha)===null||n===void 0)&&n.render)&&(r===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function xk(s){return s.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(s)}class Sk{async load(r){return new yk(r)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="recaptcha",jk={theme:"light",type:"image"};class _d{constructor(r,n,t=Object.assign({},jk)){this.parameters=t,this.type=ZS,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=xs(r),this.isInvisible=this.parameters.size==="invisible",St(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const o=typeof n=="string"?document.getElementById(n):n;St(o,this.auth,"argument-error"),this.container=o,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Sk:new wk,this.validateStartingState()}async verify(){this.assertNotDestroyed();const r=await this.render(),n=this.getAssertedRecaptcha(),t=n.getResponse(r);return t||new Promise(o=>{const c=l=>{l&&(this.tokenChangeListeners.delete(c),o(l))};this.tokenChangeListeners.add(c),this.isInvisible&&n.execute(r)})}render(){try{this.assertNotDestroyed()}catch(r){return Promise.reject(r)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(r=>{throw this.renderPromise=null,r}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(r=>{this.container.removeChild(r)})}validateStartingState(){St(!this.parameters.sitekey,this.auth,"argument-error"),St(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),St(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(r){return n=>{if(this.tokenChangeListeners.forEach(t=>t(n)),typeof r=="function")r(n);else if(typeof r=="string"){const t=En()[r];typeof t=="function"&&t(n)}}}assertNotDestroyed(){St(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let r=this.container;if(!this.isInvisible){const n=document.createElement("div");r.appendChild(n),r=n}this.widgetId=this.getAssertedRecaptcha().render(r,this.parameters)}return this.widgetId}async init(){St(bS()&&!rv(),this.auth,"internal-error"),await Ek(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const r=await $O(this.auth);St(r,this.auth,"internal-error"),this.parameters.sitekey=r}getAssertedRecaptcha(){return St(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function Ek(){let s=null;return new Promise(r=>{if(document.readyState==="complete"){r();return}s=()=>r(),window.addEventListener("load",s)}).catch(r=>{throw s&&window.removeEventListener("load",s),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(r,n){this.verificationId=r,this.onConfirmation=n}confirm(r){const n=vl._fromVerification(this.verificationId,r);return this.onConfirmation(n)}}async function JS(s,r,n){if(pi(s.app))return Promise.reject(Ji(s));const t=xs(s),o=await e2(t,r,Ir(n));return new Tk(o,c=>VS(t,c))}async function e2(s,r,n){var t;const o=await n.verify();try{St(typeof o=="string",s,"argument-error"),St(n.type===ZS,s,"argument-error");let c;if(typeof r=="string"?c={phoneNumber:r}:c=r,"session"in c){const l=c.session;if("phoneNumber"in c)return St(l.type==="enroll",s,"internal-error"),(await XI(s,{idToken:l.credential,phoneEnrollmentInfo:{phoneNumber:c.phoneNumber,recaptchaToken:o}})).phoneSessionInfo.sessionInfo;{St(l.type==="signin",s,"internal-error");const f=((t=c.multiFactorHint)===null||t===void 0?void 0:t.uid)||c.multiFactorUid;return St(f,s,"missing-multi-factor-info"),(await fk(s,{mfaPendingCredential:l.credential,mfaEnrollmentId:f,phoneSignInInfo:{recaptchaToken:o}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:l}=await kI(s,{phoneNumber:c.phoneNumber,recaptchaToken:o});return l}}finally{n._reset()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(r){this.providerId=ws.PROVIDER_ID,this.auth=xs(r)}verifyPhoneNumber(r,n){return e2(this.auth,r,Ir(n))}static credential(r,n){return vl._fromVerification(r,n)}static credentialFromResult(r){const n=r;return ws.credentialFromTaggedObject(n)}static credentialFromError(r){return ws.credentialFromTaggedObject(r.customData||{})}static credentialFromTaggedObject({_tokenResponse:r}){if(!r)return null;const{phoneNumber:n,temporaryProof:t}=r;return n&&t?vl._fromTokenResponse(n,t):null}}ws.PROVIDER_ID="phone";ws.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(s,r){return r?No(r):(St(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv extends Yf{constructor(r){super("custom","custom"),this.params=r}_getIdTokenResponse(r){return xu(r,this._buildIdpRequest())}_linkToIdToken(r,n){return xu(r,this._buildIdpRequest(n))}_getReauthenticationResolver(r){return xu(r,this._buildIdpRequest())}_buildIdpRequest(r){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return r&&(n.idToken=r),n}}function Ck(s){return FS(s.auth,new nv(s),s.bypassAuthState)}function Ak(s){const{auth:r,user:n}=s;return St(n,r,"internal-error"),US(n,new nv(s),s.bypassAuthState)}async function Rk(s){const{auth:r,user:n}=s;return St(n,r,"internal-error"),VI(n,new nv(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(r,n,t,o,c=!1){this.auth=r,this.resolver=t,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(r,n)=>{this.pendingPromise={resolve:r,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(t){this.reject(t)}})}async onAuthEvent(r){const{urlResponse:n,sessionId:t,postBody:o,tenantId:c,error:l,type:f}=r;if(l){this.reject(l);return}const a={auth:this.auth,requestUri:n,sessionId:t,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(a))}catch(d){this.reject(d)}}onError(r){this.reject(r)}getIdpTask(r){switch(r){case"signInViaPopup":case"signInViaRedirect":return Ck;case"linkViaPopup":case"linkViaRedirect":return Rk;case"reauthViaPopup":case"reauthViaRedirect":return Ak;default:Ds(this.auth,"internal-error")}}resolve(r){Bo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(r),this.unregisterAndCleanUp()}reject(r){Bo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(r),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=new gd(2e3,1e4);async function wd(s,r,n){if(pi(s.app))return Promise.reject(ks(s,"operation-not-supported-in-this-environment"));const t=xs(s);VO(s,r,Ky);const o=t2(t,n);return new ml(t,"signInViaPopup",r,o).executeNotNull()}class ml extends r2{constructor(r,n,t,o,c){super(r,n,o,c),this.provider=t,this.authWindow=null,this.pollId=null,ml.currentPopupAction&&ml.currentPopupAction.cancel(),ml.currentPopupAction=this}async executeNotNull(){const r=await this.execute();return St(r,this.auth,"internal-error"),r}async onExecution(){Bo(this.filter.length===1,"Popup operations only handle one event");const r=tv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],r),this.authWindow.associatedEvent=r,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ks(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var r;return((r=this.authWindow)===null||r===void 0?void 0:r.associatedEvent)||null}cancel(){this.reject(ks(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ml.currentPopupAction=null}pollUserCancellation(){const r=()=>{var n,t;if(!((t=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||t===void 0)&&t.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ks(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(r,Ok.get())};r()}}ml.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik="pendingRedirect",Jh=new Map;class kk extends r2{constructor(r,n,t=!1){super(r,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,t),this.eventId=null}async execute(){let r=Jh.get(this.auth._key());if(!r){try{const t=await Mk(this.resolver,this.auth)?await super.execute():null;r=()=>Promise.resolve(t)}catch(n){r=()=>Promise.reject(n)}Jh.set(this.auth._key(),r)}return this.bypassAuthState||Jh.set(this.auth._key(),()=>Promise.resolve(null)),r()}async onAuthEvent(r){if(r.type==="signInViaRedirect")return super.onAuthEvent(r);if(r.type==="unknown"){this.resolve(null);return}if(r.eventId){const n=await this.auth._redirectUserForId(r.eventId);if(n)return this.user=n,super.onAuthEvent(r);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Mk(s,r){const n=Nk(r),t=Dk(s);if(!await t._isAvailable())return!1;const o=await t._get(n)==="true";return await t._remove(n),o}function Pk(s,r){Jh.set(s._key(),r)}function Dk(s){return No(s._redirectPersistence)}function Nk(s){return Zh(Ik,s.config.apiKey,s.name)}async function Lk(s,r,n=!1){if(pi(s.app))return Promise.reject(Ji(s));const t=xs(s),o=t2(t,r),l=await new kk(t,o,n).execute();return l&&!n&&(delete l.user._redirectEventId,await t._persistUserIfCurrent(l.user),await t._setRedirectUser(null,r)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk=10*60*1e3;class Fk{constructor(r){this.auth=r,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(r){this.consumers.add(r),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,r)&&(this.sendToConsumer(this.queuedRedirectEvent,r),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(r){this.consumers.delete(r)}onEvent(r){if(this.hasEventBeenHandled(r))return!1;let n=!1;return this.consumers.forEach(t=>{this.isEventForConsumer(r,t)&&(n=!0,this.sendToConsumer(r,t),this.saveEventToCache(r))}),this.hasHandledPotentialRedirect||!Vk(r)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=r,n=!0)),n}sendToConsumer(r,n){var t;if(r.error&&!n2(r)){const o=((t=r.error.code)===null||t===void 0?void 0:t.split("auth/")[1])||"internal-error";n.onError(ks(this.auth,o))}else n.onAuthEvent(r)}isEventForConsumer(r,n){const t=n.eventId===null||!!r.eventId&&r.eventId===n.eventId;return n.filter.includes(r.type)&&t}hasEventBeenHandled(r){return Date.now()-this.lastProcessedEventTime>=Uk&&this.cachedEventUids.clear(),this.cachedEventUids.has(X_(r))}saveEventToCache(r){this.cachedEventUids.add(X_(r)),this.lastProcessedEventTime=Date.now()}}function X_(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(r=>r).join("-")}function n2({type:s,error:r}){return s==="unknown"&&(r==null?void 0:r.code)==="auth/no-auth-event"}function Vk(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return n2(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bk(s,r={}){return Wn(s,"GET","/v1/projects",r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zk=/^https?/;async function Hk(s){if(s.config.emulator)return;const{authorizedDomains:r}=await Bk(s);for(const n of r)try{if(qk(n))return}catch{}Ds(s,"unauthorized-domain")}function qk(s){const r=ry(),{protocol:n,hostname:t}=new URL(r);if(s.startsWith("chrome-extension://")){const l=new URL(s);return l.hostname===""&&t===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===r.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===t}if(!zk.test(n))return!1;if(Gk.test(s))return t===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(t)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=new gd(3e4,6e4);function K_(){const s=En().___jsl;if(s!=null&&s.H){for(const r of Object.keys(s.H))if(s.H[r].r=s.H[r].r||[],s.H[r].L=s.H[r].L||[],s.H[r].r=[...s.H[r].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function Yk(s){return new Promise((r,n)=>{var t,o,c;function l(){K_(),gapi.load("gapi.iframes",{callback:()=>{r(gapi.iframes.getContext())},ontimeout:()=>{K_(),n(ks(s,"network-request-failed"))},timeout:Wk.get()})}if(!((o=(t=En().gapi)===null||t===void 0?void 0:t.iframes)===null||o===void 0)&&o.Iframe)r(gapi.iframes.getContext());else if(!((c=En().gapi)===null||c===void 0)&&c.load)l();else{const f=DS("iframefcb");return En()[f]=()=>{gapi.load?l():n(ks(s,"network-request-failed"))},Yy(`${fI()}?onload=${f}`).catch(a=>n(a))}}).catch(r=>{throw ef=null,r})}let ef=null;function $k(s){return ef=ef||Yk(s),ef}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk=new gd(5e3,15e3),Kk="__/auth/iframe",Qk="emulator/auth/iframe",Zk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Jk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eM(s){const r=s.config;St(r.authDomain,s,"auth-domain-config-required");const n=r.emulator?Hy(r,Qk):`https://${s.config.authDomain}/${Kk}`,t={apiKey:r.apiKey,appName:s.name,v:kl},o=Jk.get(s.config.apiHost);o&&(t.eid=o);const c=s._getFrameworks();return c.length&&(t.fw=c.join(",")),`${n}?${Nu(t).slice(1)}`}async function tM(s){const r=await $k(s),n=En().gapi;return St(n,s,"internal-error"),r.open({where:document.body,url:eM(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Zk,dontclear:!0},t=>new Promise(async(o,c)=>{await t.restyle({setHideOnLeave:!1});const l=ks(s,"network-request-failed"),f=En().setTimeout(()=>{c(l)},Xk.get());function a(){En().clearTimeout(f),o(t)}t.ping(a).then(a,()=>{c(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nM=500,sM=600,iM="_blank",oM="http://localhost";class Q_{constructor(r){this.window=r,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aM(s,r,n,t=nM,o=sM){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),l=Math.max((window.screen.availWidth-t)/2,0).toString();let f="";const a=Object.assign(Object.assign({},rM),{width:t.toString(),height:o.toString(),top:c,left:l}),d=ps().toLowerCase();n&&(f=AS(d)?iM:n),TS(d)&&(r=r||oM,a.scrollbars="yes");const _=Object.entries(a).reduce((h,[m,b])=>`${h}${m}=${b},`,"");if(nI(d)&&f!=="_self")return lM(r||"",f),new Q_(null);const w=window.open(r||"",f,_);St(w,s,"popup-blocked");try{w.focus()}catch{}return new Q_(w)}function lM(s,r){const n=document.createElement("a");n.href=s,n.target=r;const t=document.createEvent("MouseEvent");t.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM="__/auth/handler",cM="emulator/auth/handler",dM=encodeURIComponent("fac");async function Z_(s,r,n,t,o,c){St(s.config.authDomain,s,"auth-domain-config-required"),St(s.config.apiKey,s,"invalid-api-key");const l={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:t,v:kl,eventId:o};if(r instanceof Ky){r.setDefaultLanguage(s.languageCode),l.providerId=r.providerId||"",SR(r.getCustomParameters())||(l.customParameters=JSON.stringify(r.getCustomParameters()));for(const[_,w]of Object.entries({}))l[_]=w}if(r instanceof Lu){const _=r.getScopes().filter(w=>w!=="");_.length>0&&(l.scopes=_.join(","))}s.tenantId&&(l.tid=s.tenantId);const f=l;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const a=await s._getAppCheckToken(),d=a?`#${dM}=${encodeURIComponent(a)}`:"";return`${hM(s)}?${Nu(f).slice(1)}${d}`}function hM({config:s}){return s.emulator?Hy(s,cM):`https://${s.authDomain}/${uM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="webStorageSupport";class fM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$S,this._completeRedirectFn=Lk,this._overrideRedirectResult=Pk}async _openPopup(r,n,t,o){var c;Bo((c=this.eventManagers[r._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await Z_(r,n,t,ry(),o);return aM(r,l,tv())}async _openRedirect(r,n,t,o){await this._originValidation(r);const c=await Z_(r,n,t,ry(),o);return nk(c),new Promise(()=>{})}_initialize(r){const n=r._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Bo(c,"If manager is not set, promise should be"),c)}const t=this.initAndGetManager(r);return this.eventManagers[n]={promise:t},t.catch(()=>{delete this.eventManagers[n]}),t}async initAndGetManager(r){const n=await tM(r),t=new Fk(r);return n.register("authEvent",o=>(St(o==null?void 0:o.authEvent,r,"invalid-auth-event"),{status:t.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[r._key()]={manager:t},this.iframes[r._key()]=n,t}_isIframeWebStorageSupported(r,n){this.iframes[r._key()].send(_g,{type:_g},o=>{var c;const l=(c=o==null?void 0:o[0])===null||c===void 0?void 0:c[_g];l!==void 0&&n(!!l),Ds(r,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(r){const n=r._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Hk(r)),this.originValidationPromises[n]}get _shouldInitProactively(){return MS()||CS()||Wy()}}const pM=fM;class mM{constructor(r){this.factorId=r}_process(r,n,t){switch(n.type){case"enroll":return this._finalizeEnroll(r,n.credential,t);case"signin":return this._finalizeSignIn(r,n.credential);default:return Zi("unexpected MultiFactorSessionType")}}}class sv extends mM{constructor(r){super("phone"),this.credential=r}static _fromCredential(r){return new sv(r)}_finalizeEnroll(r,n,t){return KI(r,{idToken:n,displayName:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(r,n){return pk(r,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Kf{constructor(){}static assertion(r){return sv._fromCredential(r)}}Kf.FACTOR_ID="phone";var J_="@firebase/auth",ew="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(r){this.auth=r,this.internalListeners=new Map}getUid(){var r;return this.assertAuthConfigured(),((r=this.auth.currentUser)===null||r===void 0?void 0:r.uid)||null}async getToken(r){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(r)}:null}addAuthTokenListener(r){if(this.assertAuthConfigured(),this.internalListeners.has(r))return;const n=this.auth.onIdTokenChanged(t=>{r((t==null?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(r,n),this.updateProactiveRefresh()}removeAuthTokenListener(r){this.assertAuthConfigured();const n=this.internalListeners.get(r);n&&(this.internalListeners.delete(r),n(),this.updateProactiveRefresh())}assertAuthConfigured(){St(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vM(s){Pi(new mi("auth",(r,{options:n})=>{const t=r.getProvider("app").getImmediate(),o=r.getProvider("heartbeat"),c=r.getProvider("app-check-internal"),{apiKey:l,authDomain:f}=t.options;St(l&&!l.includes(":"),"invalid-api-key",{appName:t.name});const a={apiKey:l,authDomain:f,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PS(s)},d=new uI(t,o,c,a);return vI(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((r,n,t)=>{r.getProvider("auth-internal").initialize()})),Pi(new mi("auth-internal",r=>{const n=xs(r.getProvider("auth").getImmediate());return(t=>new gM(t))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Is(J_,ew,yM(s)),Is(J_,ew,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=5*60,_M=lS("authIdTokenMaxAge")||bM;let tw=null;const wM=s=>async r=>{const n=r&&await r.getIdTokenResult(),t=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(t&&t>_M)return;const o=n==null?void 0:n.token;tw!==o&&(tw=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function iv(s=md()){const r=Da(s,"auth");if(r.isInitialized())return r.getImmediate();const n=yI(s,{popupRedirectResolver:pM,persistence:[hk,ek,$S]}),t=lS("authTokenSyncURL");if(t&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(t,location.origin);if(location.origin===c.origin){const l=wM(c.toString());YI(n,l,()=>l(n.currentUser)),WI(n,f=>l(f))}}const o=iS("auth");return o&&bI(n,`http://${o}`),n}function xM(){var s,r;return(r=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&r!==void 0?r:document}cI({loadJS(s){return new Promise((r,n)=>{const t=document.createElement("script");t.setAttribute("src",s),t.onload=r,t.onerror=o=>{const c=ks("internal-error");c.customData=o,n(c)},t.type="text/javascript",t.charset="UTF-8",xM().appendChild(t)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vM("Browser");var SM="firebase",jM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Is(SM,jM,"app");var rw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bl,s2;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function r(C,T){function R(){}R.prototype=T.prototype,C.D=T.prototype,C.prototype=new R,C.prototype.constructor=C,C.C=function(P,k,F){for(var D=Array(arguments.length-2),q=2;q<arguments.length;q++)D[q-2]=arguments[q];return T.prototype[k].apply(P,D)}}function n(){this.blockSize=-1}function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}r(t,n),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,T,R){R||(R=0);var P=Array(16);if(typeof T=="string")for(var k=0;16>k;++k)P[k]=T.charCodeAt(R++)|T.charCodeAt(R++)<<8|T.charCodeAt(R++)<<16|T.charCodeAt(R++)<<24;else for(k=0;16>k;++k)P[k]=T[R++]|T[R++]<<8|T[R++]<<16|T[R++]<<24;T=C.g[0],R=C.g[1],k=C.g[2];var F=C.g[3],D=T+(F^R&(k^F))+P[0]+3614090360&4294967295;T=R+(D<<7&4294967295|D>>>25),D=F+(k^T&(R^k))+P[1]+3905402710&4294967295,F=T+(D<<12&4294967295|D>>>20),D=k+(R^F&(T^R))+P[2]+606105819&4294967295,k=F+(D<<17&4294967295|D>>>15),D=R+(T^k&(F^T))+P[3]+3250441966&4294967295,R=k+(D<<22&4294967295|D>>>10),D=T+(F^R&(k^F))+P[4]+4118548399&4294967295,T=R+(D<<7&4294967295|D>>>25),D=F+(k^T&(R^k))+P[5]+1200080426&4294967295,F=T+(D<<12&4294967295|D>>>20),D=k+(R^F&(T^R))+P[6]+2821735955&4294967295,k=F+(D<<17&4294967295|D>>>15),D=R+(T^k&(F^T))+P[7]+4249261313&4294967295,R=k+(D<<22&4294967295|D>>>10),D=T+(F^R&(k^F))+P[8]+1770035416&4294967295,T=R+(D<<7&4294967295|D>>>25),D=F+(k^T&(R^k))+P[9]+2336552879&4294967295,F=T+(D<<12&4294967295|D>>>20),D=k+(R^F&(T^R))+P[10]+4294925233&4294967295,k=F+(D<<17&4294967295|D>>>15),D=R+(T^k&(F^T))+P[11]+2304563134&4294967295,R=k+(D<<22&4294967295|D>>>10),D=T+(F^R&(k^F))+P[12]+1804603682&4294967295,T=R+(D<<7&4294967295|D>>>25),D=F+(k^T&(R^k))+P[13]+4254626195&4294967295,F=T+(D<<12&4294967295|D>>>20),D=k+(R^F&(T^R))+P[14]+2792965006&4294967295,k=F+(D<<17&4294967295|D>>>15),D=R+(T^k&(F^T))+P[15]+1236535329&4294967295,R=k+(D<<22&4294967295|D>>>10),D=T+(k^F&(R^k))+P[1]+4129170786&4294967295,T=R+(D<<5&4294967295|D>>>27),D=F+(R^k&(T^R))+P[6]+3225465664&4294967295,F=T+(D<<9&4294967295|D>>>23),D=k+(T^R&(F^T))+P[11]+643717713&4294967295,k=F+(D<<14&4294967295|D>>>18),D=R+(F^T&(k^F))+P[0]+3921069994&4294967295,R=k+(D<<20&4294967295|D>>>12),D=T+(k^F&(R^k))+P[5]+3593408605&4294967295,T=R+(D<<5&4294967295|D>>>27),D=F+(R^k&(T^R))+P[10]+38016083&4294967295,F=T+(D<<9&4294967295|D>>>23),D=k+(T^R&(F^T))+P[15]+3634488961&4294967295,k=F+(D<<14&4294967295|D>>>18),D=R+(F^T&(k^F))+P[4]+3889429448&4294967295,R=k+(D<<20&4294967295|D>>>12),D=T+(k^F&(R^k))+P[9]+568446438&4294967295,T=R+(D<<5&4294967295|D>>>27),D=F+(R^k&(T^R))+P[14]+3275163606&4294967295,F=T+(D<<9&4294967295|D>>>23),D=k+(T^R&(F^T))+P[3]+4107603335&4294967295,k=F+(D<<14&4294967295|D>>>18),D=R+(F^T&(k^F))+P[8]+1163531501&4294967295,R=k+(D<<20&4294967295|D>>>12),D=T+(k^F&(R^k))+P[13]+2850285829&4294967295,T=R+(D<<5&4294967295|D>>>27),D=F+(R^k&(T^R))+P[2]+4243563512&4294967295,F=T+(D<<9&4294967295|D>>>23),D=k+(T^R&(F^T))+P[7]+1735328473&4294967295,k=F+(D<<14&4294967295|D>>>18),D=R+(F^T&(k^F))+P[12]+2368359562&4294967295,R=k+(D<<20&4294967295|D>>>12),D=T+(R^k^F)+P[5]+4294588738&4294967295,T=R+(D<<4&4294967295|D>>>28),D=F+(T^R^k)+P[8]+2272392833&4294967295,F=T+(D<<11&4294967295|D>>>21),D=k+(F^T^R)+P[11]+1839030562&4294967295,k=F+(D<<16&4294967295|D>>>16),D=R+(k^F^T)+P[14]+4259657740&4294967295,R=k+(D<<23&4294967295|D>>>9),D=T+(R^k^F)+P[1]+2763975236&4294967295,T=R+(D<<4&4294967295|D>>>28),D=F+(T^R^k)+P[4]+1272893353&4294967295,F=T+(D<<11&4294967295|D>>>21),D=k+(F^T^R)+P[7]+4139469664&4294967295,k=F+(D<<16&4294967295|D>>>16),D=R+(k^F^T)+P[10]+3200236656&4294967295,R=k+(D<<23&4294967295|D>>>9),D=T+(R^k^F)+P[13]+681279174&4294967295,T=R+(D<<4&4294967295|D>>>28),D=F+(T^R^k)+P[0]+3936430074&4294967295,F=T+(D<<11&4294967295|D>>>21),D=k+(F^T^R)+P[3]+3572445317&4294967295,k=F+(D<<16&4294967295|D>>>16),D=R+(k^F^T)+P[6]+76029189&4294967295,R=k+(D<<23&4294967295|D>>>9),D=T+(R^k^F)+P[9]+3654602809&4294967295,T=R+(D<<4&4294967295|D>>>28),D=F+(T^R^k)+P[12]+3873151461&4294967295,F=T+(D<<11&4294967295|D>>>21),D=k+(F^T^R)+P[15]+530742520&4294967295,k=F+(D<<16&4294967295|D>>>16),D=R+(k^F^T)+P[2]+3299628645&4294967295,R=k+(D<<23&4294967295|D>>>9),D=T+(k^(R|~F))+P[0]+4096336452&4294967295,T=R+(D<<6&4294967295|D>>>26),D=F+(R^(T|~k))+P[7]+1126891415&4294967295,F=T+(D<<10&4294967295|D>>>22),D=k+(T^(F|~R))+P[14]+2878612391&4294967295,k=F+(D<<15&4294967295|D>>>17),D=R+(F^(k|~T))+P[5]+4237533241&4294967295,R=k+(D<<21&4294967295|D>>>11),D=T+(k^(R|~F))+P[12]+1700485571&4294967295,T=R+(D<<6&4294967295|D>>>26),D=F+(R^(T|~k))+P[3]+2399980690&4294967295,F=T+(D<<10&4294967295|D>>>22),D=k+(T^(F|~R))+P[10]+4293915773&4294967295,k=F+(D<<15&4294967295|D>>>17),D=R+(F^(k|~T))+P[1]+2240044497&4294967295,R=k+(D<<21&4294967295|D>>>11),D=T+(k^(R|~F))+P[8]+1873313359&4294967295,T=R+(D<<6&4294967295|D>>>26),D=F+(R^(T|~k))+P[15]+4264355552&4294967295,F=T+(D<<10&4294967295|D>>>22),D=k+(T^(F|~R))+P[6]+2734768916&4294967295,k=F+(D<<15&4294967295|D>>>17),D=R+(F^(k|~T))+P[13]+1309151649&4294967295,R=k+(D<<21&4294967295|D>>>11),D=T+(k^(R|~F))+P[4]+4149444226&4294967295,T=R+(D<<6&4294967295|D>>>26),D=F+(R^(T|~k))+P[11]+3174756917&4294967295,F=T+(D<<10&4294967295|D>>>22),D=k+(T^(F|~R))+P[2]+718787259&4294967295,k=F+(D<<15&4294967295|D>>>17),D=R+(F^(k|~T))+P[9]+3951481745&4294967295,C.g[0]=C.g[0]+T&4294967295,C.g[1]=C.g[1]+(k+(D<<21&4294967295|D>>>11))&4294967295,C.g[2]=C.g[2]+k&4294967295,C.g[3]=C.g[3]+F&4294967295}t.prototype.u=function(C,T){T===void 0&&(T=C.length);for(var R=T-this.blockSize,P=this.B,k=this.h,F=0;F<T;){if(k==0)for(;F<=R;)o(this,C,F),F+=this.blockSize;if(typeof C=="string"){for(;F<T;)if(P[k++]=C.charCodeAt(F++),k==this.blockSize){o(this,P),k=0;break}}else for(;F<T;)if(P[k++]=C[F++],k==this.blockSize){o(this,P),k=0;break}}this.h=k,this.o+=T},t.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var T=1;T<C.length-8;++T)C[T]=0;var R=8*this.o;for(T=C.length-8;T<C.length;++T)C[T]=R&255,R/=256;for(this.u(C),C=Array(16),T=R=0;4>T;++T)for(var P=0;32>P;P+=8)C[R++]=this.g[T]>>>P&255;return C};function c(C,T){var R=f;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=T(C)}function l(C,T){this.h=T;for(var R=[],P=!0,k=C.length-1;0<=k;k--){var F=C[k]|0;P&&F==T||(R[k]=F,P=!1)}this.g=R}var f={};function a(C){return-128<=C&&128>C?c(C,function(T){return new l([T|0],0>T?-1:0)}):new l([C|0],0>C?-1:0)}function d(C){if(isNaN(C)||!isFinite(C))return w;if(0>C)return g(d(-C));for(var T=[],R=1,P=0;C>=R;P++)T[P]=C/R|0,R*=4294967296;return new l(T,0)}function _(C,T){if(C.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C.charAt(0)=="-")return g(_(C.substring(1),T));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=d(Math.pow(T,8)),P=w,k=0;k<C.length;k+=8){var F=Math.min(8,C.length-k),D=parseInt(C.substring(k,k+F),T);8>F?(F=d(Math.pow(T,F)),P=P.j(F).add(d(D))):(P=P.j(R),P=P.add(d(D)))}return P}var w=a(0),h=a(1),m=a(16777216);s=l.prototype,s.m=function(){if(v(this))return-g(this).m();for(var C=0,T=1,R=0;R<this.g.length;R++){var P=this.i(R);C+=(0<=P?P:4294967296+P)*T,T*=4294967296}return C},s.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(b(this))return"0";if(v(this))return"-"+g(this).toString(C);for(var T=d(Math.pow(C,6)),R=this,P="";;){var k=j(R,T).g;R=p(R,k.j(T));var F=((0<R.g.length?R.g[0]:R.h)>>>0).toString(C);if(R=k,b(R))return F+P;for(;6>F.length;)F="0"+F;P=F+P}},s.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function b(C){if(C.h!=0)return!1;for(var T=0;T<C.g.length;T++)if(C.g[T]!=0)return!1;return!0}function v(C){return C.h==-1}s.l=function(C){return C=p(this,C),v(C)?-1:b(C)?0:1};function g(C){for(var T=C.g.length,R=[],P=0;P<T;P++)R[P]=~C.g[P];return new l(R,~C.h).add(h)}s.abs=function(){return v(this)?g(this):this},s.add=function(C){for(var T=Math.max(this.g.length,C.g.length),R=[],P=0,k=0;k<=T;k++){var F=P+(this.i(k)&65535)+(C.i(k)&65535),D=(F>>>16)+(this.i(k)>>>16)+(C.i(k)>>>16);P=D>>>16,F&=65535,D&=65535,R[k]=D<<16|F}return new l(R,R[R.length-1]&-2147483648?-1:0)};function p(C,T){return C.add(g(T))}s.j=function(C){if(b(this)||b(C))return w;if(v(this))return v(C)?g(this).j(g(C)):g(g(this).j(C));if(v(C))return g(this.j(g(C)));if(0>this.l(m)&&0>C.l(m))return d(this.m()*C.m());for(var T=this.g.length+C.g.length,R=[],P=0;P<2*T;P++)R[P]=0;for(P=0;P<this.g.length;P++)for(var k=0;k<C.g.length;k++){var F=this.i(P)>>>16,D=this.i(P)&65535,q=C.i(k)>>>16,H=C.i(k)&65535;R[2*P+2*k]+=D*H,y(R,2*P+2*k),R[2*P+2*k+1]+=F*H,y(R,2*P+2*k+1),R[2*P+2*k+1]+=D*q,y(R,2*P+2*k+1),R[2*P+2*k+2]+=F*q,y(R,2*P+2*k+2)}for(P=0;P<T;P++)R[P]=R[2*P+1]<<16|R[2*P];for(P=T;P<2*T;P++)R[P]=0;return new l(R,0)};function y(C,T){for(;(C[T]&65535)!=C[T];)C[T+1]+=C[T]>>>16,C[T]&=65535,T++}function S(C,T){this.g=C,this.h=T}function j(C,T){if(b(T))throw Error("division by zero");if(b(C))return new S(w,w);if(v(C))return T=j(g(C),T),new S(g(T.g),g(T.h));if(v(T))return T=j(C,g(T)),new S(g(T.g),T.h);if(30<C.g.length){if(v(C)||v(T))throw Error("slowDivide_ only works with positive integers.");for(var R=h,P=T;0>=P.l(C);)R=A(R),P=A(P);var k=N(R,1),F=N(P,1);for(P=N(P,2),R=N(R,2);!b(P);){var D=F.add(P);0>=D.l(C)&&(k=k.add(R),F=D),P=N(P,1),R=N(R,1)}return T=p(C,k.j(T)),new S(k,T)}for(k=w;0<=C.l(T);){for(R=Math.max(1,Math.floor(C.m()/T.m())),P=Math.ceil(Math.log(R)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),F=d(R),D=F.j(T);v(D)||0<D.l(C);)R-=P,F=d(R),D=F.j(T);b(F)&&(F=h),k=k.add(F),C=p(C,D)}return new S(k,C)}s.A=function(C){return j(this,C).h},s.and=function(C){for(var T=Math.max(this.g.length,C.g.length),R=[],P=0;P<T;P++)R[P]=this.i(P)&C.i(P);return new l(R,this.h&C.h)},s.or=function(C){for(var T=Math.max(this.g.length,C.g.length),R=[],P=0;P<T;P++)R[P]=this.i(P)|C.i(P);return new l(R,this.h|C.h)},s.xor=function(C){for(var T=Math.max(this.g.length,C.g.length),R=[],P=0;P<T;P++)R[P]=this.i(P)^C.i(P);return new l(R,this.h^C.h)};function A(C){for(var T=C.g.length+1,R=[],P=0;P<T;P++)R[P]=C.i(P)<<1|C.i(P-1)>>>31;return new l(R,C.h)}function N(C,T){var R=T>>5;T%=32;for(var P=C.g.length-R,k=[],F=0;F<P;F++)k[F]=0<T?C.i(F+R)>>>T|C.i(F+R+1)<<32-T:C.i(F+R);return new l(k,C.h)}t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,s2=t,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=d,l.fromString=_,bl=l}).apply(typeof rw<"u"?rw:typeof self<"u"?self:typeof window<"u"?window:{});var kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var i2,Fc,o2,tf,oy,a2,l2,u2;(function(){var s,r=typeof Object.defineProperties=="function"?Object.defineProperty:function(U,ne,ae){return U==Array.prototype||U==Object.prototype||(U[ne]=ae.value),U};function n(U){U=[typeof globalThis=="object"&&globalThis,U,typeof window=="object"&&window,typeof self=="object"&&self,typeof kh=="object"&&kh];for(var ne=0;ne<U.length;++ne){var ae=U[ne];if(ae&&ae.Math==Math)return ae}throw Error("Cannot find global object")}var t=n(this);function o(U,ne){if(ne)e:{var ae=t;U=U.split(".");for(var Ee=0;Ee<U.length-1;Ee++){var E=U[Ee];if(!(E in ae))break e;ae=ae[E]}U=U[U.length-1],Ee=ae[U],ne=ne(Ee),ne!=Ee&&ne!=null&&r(ae,U,{configurable:!0,writable:!0,value:ne})}}function c(U,ne){U instanceof String&&(U+="");var ae=0,Ee=!1,E={next:function(){if(!Ee&&ae<U.length){var I=ae++;return{value:ne(I,U[I]),done:!1}}return Ee=!0,{done:!0,value:void 0}}};return E[Symbol.iterator]=function(){return E},E}o("Array.prototype.values",function(U){return U||function(){return c(this,function(ne,ae){return ae})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},f=this||self;function a(U){var ne=typeof U;return ne=ne!="object"?ne:U?Array.isArray(U)?"array":ne:"null",ne=="array"||ne=="object"&&typeof U.length=="number"}function d(U){var ne=typeof U;return ne=="object"&&U!=null||ne=="function"}function _(U,ne,ae){return U.call.apply(U.bind,arguments)}function w(U,ne,ae){if(!U)throw Error();if(2<arguments.length){var Ee=Array.prototype.slice.call(arguments,2);return function(){var E=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(E,Ee),U.apply(ne,E)}}return function(){return U.apply(ne,arguments)}}function h(U,ne,ae){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:w,h.apply(null,arguments)}function m(U,ne){var ae=Array.prototype.slice.call(arguments,1);return function(){var Ee=ae.slice();return Ee.push.apply(Ee,arguments),U.apply(this,Ee)}}function b(U,ne){function ae(){}ae.prototype=ne.prototype,U.aa=ne.prototype,U.prototype=new ae,U.prototype.constructor=U,U.Qb=function(Ee,E,I){for(var L=Array(arguments.length-2),G=2;G<arguments.length;G++)L[G-2]=arguments[G];return ne.prototype[E].apply(Ee,L)}}function v(U){const ne=U.length;if(0<ne){const ae=Array(ne);for(let Ee=0;Ee<ne;Ee++)ae[Ee]=U[Ee];return ae}return[]}function g(U,ne){for(let ae=1;ae<arguments.length;ae++){const Ee=arguments[ae];if(a(Ee)){const E=U.length||0,I=Ee.length||0;U.length=E+I;for(let L=0;L<I;L++)U[E+L]=Ee[L]}else U.push(Ee)}}class p{constructor(ne,ae){this.i=ne,this.j=ae,this.h=0,this.g=null}get(){let ne;return 0<this.h?(this.h--,ne=this.g,this.g=ne.next,ne.next=null):ne=this.i(),ne}}function y(U){return/^[\s\xa0]*$/.test(U)}function S(){var U=f.navigator;return U&&(U=U.userAgent)?U:""}function j(U){return j[" "](U),U}j[" "]=function(){};var A=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function N(U,ne,ae){for(const Ee in U)ne.call(ae,U[Ee],Ee,U)}function C(U,ne){for(const ae in U)ne.call(void 0,U[ae],ae,U)}function T(U){const ne={};for(const ae in U)ne[ae]=U[ae];return ne}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(U,ne){let ae,Ee;for(let E=1;E<arguments.length;E++){Ee=arguments[E];for(ae in Ee)U[ae]=Ee[ae];for(let I=0;I<R.length;I++)ae=R[I],Object.prototype.hasOwnProperty.call(Ee,ae)&&(U[ae]=Ee[ae])}}function k(U){var ne=1;U=U.split(":");const ae=[];for(;0<ne&&U.length;)ae.push(U.shift()),ne--;return U.length&&ae.push(U.join(":")),ae}function F(U){f.setTimeout(()=>{throw U},0)}function D(){var U=Z;let ne=null;return U.g&&(ne=U.g,U.g=U.g.next,U.g||(U.h=null),ne.next=null),ne}class q{constructor(){this.h=this.g=null}add(ne,ae){const Ee=H.get();Ee.set(ne,ae),this.h?this.h.next=Ee:this.g=Ee,this.h=Ee}}var H=new p(()=>new W,U=>U.reset());class W{constructor(){this.next=this.g=this.h=null}set(ne,ae){this.h=ne,this.g=ae,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,J=!1,Z=new q,K=()=>{const U=f.Promise.resolve(void 0);Q=()=>{U.then(re)}};var re=()=>{for(var U;U=D();){try{U.h.call(U.g)}catch(ae){F(ae)}var ne=H;ne.j(U),100>ne.h&&(ne.h++,U.next=ne.g,ne.g=U)}J=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(U,ne){this.type=U,this.g=this.target=ne,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var z=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var U=!1,ne=Object.defineProperty({},"passive",{get:function(){U=!0}});try{const ae=()=>{};f.addEventListener("test",ae,ne),f.removeEventListener("test",ae,ne)}catch{}return U}();function $(U,ne){if(M.call(this,U?U.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,U){var ae=this.type=U.type,Ee=U.changedTouches&&U.changedTouches.length?U.changedTouches[0]:null;if(this.target=U.target||U.srcElement,this.g=ne,ne=U.relatedTarget){if(A){e:{try{j(ne.nodeName);var E=!0;break e}catch{}E=!1}E||(ne=null)}}else ae=="mouseover"?ne=U.fromElement:ae=="mouseout"&&(ne=U.toElement);this.relatedTarget=ne,Ee?(this.clientX=Ee.clientX!==void 0?Ee.clientX:Ee.pageX,this.clientY=Ee.clientY!==void 0?Ee.clientY:Ee.pageY,this.screenX=Ee.screenX||0,this.screenY=Ee.screenY||0):(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0),this.button=U.button,this.key=U.key||"",this.ctrlKey=U.ctrlKey,this.altKey=U.altKey,this.shiftKey=U.shiftKey,this.metaKey=U.metaKey,this.pointerId=U.pointerId||0,this.pointerType=typeof U.pointerType=="string"?U.pointerType:ee[U.pointerType]||"",this.state=U.state,this.i=U,U.defaultPrevented&&$.aa.h.call(this)}}b($,M);var ee={2:"touch",3:"pen",4:"mouse"};$.prototype.h=function(){$.aa.h.call(this);var U=this.i;U.preventDefault?U.preventDefault():U.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),ce=0;function me(U,ne,ae,Ee,E){this.listener=U,this.proxy=null,this.src=ne,this.type=ae,this.capture=!!Ee,this.ha=E,this.key=++ce,this.da=this.fa=!1}function ve(U){U.da=!0,U.listener=null,U.proxy=null,U.src=null,U.ha=null}function ge(U){this.src=U,this.g={},this.h=0}ge.prototype.add=function(U,ne,ae,Ee,E){var I=U.toString();U=this.g[I],U||(U=this.g[I]=[],this.h++);var L=xe(U,ne,Ee,E);return-1<L?(ne=U[L],ae||(ne.fa=!1)):(ne=new me(ne,this.src,I,!!Ee,E),ne.fa=ae,U.push(ne)),ne};function we(U,ne){var ae=ne.type;if(ae in U.g){var Ee=U.g[ae],E=Array.prototype.indexOf.call(Ee,ne,void 0),I;(I=0<=E)&&Array.prototype.splice.call(Ee,E,1),I&&(ve(ne),U.g[ae].length==0&&(delete U.g[ae],U.h--))}}function xe(U,ne,ae,Ee){for(var E=0;E<U.length;++E){var I=U[E];if(!I.da&&I.listener==ne&&I.capture==!!ae&&I.ha==Ee)return E}return-1}var fe="closure_lm_"+(1e6*Math.random()|0),Se={};function Ce(U,ne,ae,Ee,E){if(Array.isArray(ne)){for(var I=0;I<ne.length;I++)Ce(U,ne[I],ae,Ee,E);return null}return ae=it(ae),U&&U[le]?U.K(ne,ae,d(Ee)?!!Ee.capture:!!Ee,E):Ne(U,ne,ae,!1,Ee,E)}function Ne(U,ne,ae,Ee,E,I){if(!ne)throw Error("Invalid event type");var L=d(E)?!!E.capture:!!E,G=mt(U);if(G||(U[fe]=G=new ge(U)),ae=G.add(ne,ae,Ee,L,I),ae.proxy)return ae;if(Ee=Oe(),ae.proxy=Ee,Ee.src=U,Ee.listener=ae,U.addEventListener)z||(E=L),E===void 0&&(E=!1),U.addEventListener(ne.toString(),Ee,E);else if(U.attachEvent)U.attachEvent(et(ne.toString()),Ee);else if(U.addListener&&U.removeListener)U.addListener(Ee);else throw Error("addEventListener and attachEvent are unavailable.");return ae}function Oe(){function U(ae){return ne.call(U.src,U.listener,ae)}const ne=Fe;return U}function Me(U,ne,ae,Ee,E){if(Array.isArray(ne))for(var I=0;I<ne.length;I++)Me(U,ne[I],ae,Ee,E);else Ee=d(Ee)?!!Ee.capture:!!Ee,ae=it(ae),U&&U[le]?(U=U.i,ne=String(ne).toString(),ne in U.g&&(I=U.g[ne],ae=xe(I,ae,Ee,E),-1<ae&&(ve(I[ae]),Array.prototype.splice.call(I,ae,1),I.length==0&&(delete U.g[ne],U.h--)))):U&&(U=mt(U))&&(ne=U.g[ne.toString()],U=-1,ne&&(U=xe(ne,ae,Ee,E)),(ae=-1<U?ne[U]:null)&&Ue(ae))}function Ue(U){if(typeof U!="number"&&U&&!U.da){var ne=U.src;if(ne&&ne[le])we(ne.i,U);else{var ae=U.type,Ee=U.proxy;ne.removeEventListener?ne.removeEventListener(ae,Ee,U.capture):ne.detachEvent?ne.detachEvent(et(ae),Ee):ne.addListener&&ne.removeListener&&ne.removeListener(Ee),(ae=mt(ne))?(we(ae,U),ae.h==0&&(ae.src=null,ne[fe]=null)):ve(U)}}}function et(U){return U in Se?Se[U]:Se[U]="on"+U}function Fe(U,ne){if(U.da)U=!0;else{ne=new $(ne,this);var ae=U.listener,Ee=U.ha||U.src;U.fa&&Ue(U),U=ae.call(Ee,ne)}return U}function mt(U){return U=U[fe],U instanceof ge?U:null}var ut="__closure_events_fn_"+(1e9*Math.random()>>>0);function it(U){return typeof U=="function"?U:(U[ut]||(U[ut]=function(ne){return U.handleEvent(ne)}),U[ut])}function ft(){oe.call(this),this.i=new ge(this),this.M=this,this.F=null}b(ft,oe),ft.prototype[le]=!0,ft.prototype.removeEventListener=function(U,ne,ae,Ee){Me(this,U,ne,ae,Ee)};function at(U,ne){var ae,Ee=U.F;if(Ee)for(ae=[];Ee;Ee=Ee.F)ae.push(Ee);if(U=U.M,Ee=ne.type||ne,typeof ne=="string")ne=new M(ne,U);else if(ne instanceof M)ne.target=ne.target||U;else{var E=ne;ne=new M(Ee,U),P(ne,E)}if(E=!0,ae)for(var I=ae.length-1;0<=I;I--){var L=ne.g=ae[I];E=Le(L,Ee,!0,ne)&&E}if(L=ne.g=U,E=Le(L,Ee,!0,ne)&&E,E=Le(L,Ee,!1,ne)&&E,ae)for(I=0;I<ae.length;I++)L=ne.g=ae[I],E=Le(L,Ee,!1,ne)&&E}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var U=this.i,ne;for(ne in U.g){for(var ae=U.g[ne],Ee=0;Ee<ae.length;Ee++)ve(ae[Ee]);delete U.g[ne],U.h--}}this.F=null},ft.prototype.K=function(U,ne,ae,Ee){return this.i.add(String(U),ne,!1,ae,Ee)},ft.prototype.L=function(U,ne,ae,Ee){return this.i.add(String(U),ne,!0,ae,Ee)};function Le(U,ne,ae,Ee){if(ne=U.i.g[String(ne)],!ne)return!0;ne=ne.concat();for(var E=!0,I=0;I<ne.length;++I){var L=ne[I];if(L&&!L.da&&L.capture==ae){var G=L.listener,X=L.ha||L.src;L.fa&&we(U.i,L),E=G.call(X,Ee)!==!1&&E}}return E&&!Ee.defaultPrevented}function Je(U,ne,ae){if(typeof U=="function")ae&&(U=h(U,ae));else if(U&&typeof U.handleEvent=="function")U=h(U.handleEvent,U);else throw Error("Invalid listener argument");return 2147483647<Number(ne)?-1:f.setTimeout(U,ne||0)}function Ie(U){U.g=Je(()=>{U.g=null,U.i&&(U.i=!1,Ie(U))},U.l);const ne=U.h;U.h=null,U.m.apply(null,ne)}class de extends oe{constructor(ne,ae){super(),this.m=ne,this.l=ae,this.h=null,this.i=!1,this.g=null}j(ne){this.h=arguments,this.g?this.i=!0:Ie(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function he(U){oe.call(this),this.h=U,this.g={}}b(he,oe);var ie=[];function ye(U){N(U.g,function(ne,ae){this.g.hasOwnProperty(ae)&&Ue(ne)},U),U.g={}}he.prototype.N=function(){he.aa.N.call(this),ye(this)},he.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pe=f.JSON.stringify,Ve=f.JSON.parse,$e=class{stringify(U){return f.JSON.stringify(U,void 0)}parse(U){return f.JSON.parse(U,void 0)}};function ct(){}ct.prototype.h=null;function yt(U){return U.h||(U.h=U.i())}function vt(){}var bt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Lt(){M.call(this,"d")}b(Lt,M);function Tt(){M.call(this,"c")}b(Tt,M);var jt={},Nt=null;function kt(){return Nt=Nt||new ft}jt.La="serverreachability";function yr(U){M.call(this,jt.La,U)}b(yr,M);function Yr(U){const ne=kt();at(ne,new yr(ne))}jt.STAT_EVENT="statevent";function Ur(U,ne){M.call(this,jt.STAT_EVENT,U),this.stat=ne}b(Ur,M);function Bt(U){const ne=kt();at(ne,new Ur(ne,U))}jt.Ma="timingevent";function Cr(U,ne){M.call(this,jt.Ma,U),this.size=ne}b(Cr,M);function Zt(U,ne){if(typeof U!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){U()},ne)}function Gr(){this.g=!0}Gr.prototype.xa=function(){this.g=!1};function Zr(U,ne,ae,Ee,E,I){U.info(function(){if(U.g)if(I)for(var L="",G=I.split("&"),X=0;X<G.length;X++){var te=G[X].split("=");if(1<te.length){var se=te[0];te=te[1];var pe=se.split("_");L=2<=pe.length&&pe[1]=="type"?L+(se+"="+te+"&"):L+(se+"=redacted&")}}else L=null;else L=I;return"XMLHTTP REQ ("+Ee+") [attempt "+E+"]: "+ne+`
`+ae+`
`+L})}function mr(U,ne,ae,Ee,E,I,L){U.info(function(){return"XMLHTTP RESP ("+Ee+") [ attempt "+E+"]: "+ne+`
`+ae+`
`+I+" "+L})}function zr(U,ne,ae,Ee){U.info(function(){return"XMLHTTP TEXT ("+ne+"): "+Qr(U,ae)+(Ee?" "+Ee:"")})}function ss(U,ne){U.info(function(){return"TIMEOUT: "+ne})}Gr.prototype.info=function(){};function Qr(U,ne){if(!U.g)return ne;if(!ne)return null;try{var ae=JSON.parse(ne);if(ae){for(U=0;U<ae.length;U++)if(Array.isArray(ae[U])){var Ee=ae[U];if(!(2>Ee.length)){var E=Ee[1];if(Array.isArray(E)&&!(1>E.length)){var I=E[0];if(I!="noop"&&I!="stop"&&I!="close")for(var L=1;L<E.length;L++)E[L]=""}}}}return Pe(ae)}catch{return ne}}var $r={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ss={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ls;function Qs(){}b(Qs,ct),Qs.prototype.g=function(){return new XMLHttpRequest},Qs.prototype.i=function(){return{}},Ls=new Qs;function Ae(U,ne,ae,Ee){this.j=U,this.i=ne,this.l=ae,this.R=Ee||1,this.U=new he(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new dt}function dt(){this.i=null,this.g="",this.h=!1}var wt={},ot={};function qt(U,ne,ae){U.L=1,U.v=Js(Xr(ne)),U.m=ae,U.P=!0,tt(U,null)}function tt(U,ne){U.F=Date.now(),Pt(U),U.A=Xr(U.v);var ae=U.A,Ee=U.R;Array.isArray(Ee)||(Ee=[String(Ee)]),wi(ae.i,"t",Ee),U.C=0,ae=U.j.J,U.h=new dt,U.g=Bl(U.j,ae?ne:null,!U.m),0<U.O&&(U.M=new de(h(U.Y,U,U.g),U.O)),ne=U.U,ae=U.g,Ee=U.ca;var E="readystatechange";Array.isArray(E)||(E&&(ie[0]=E.toString()),E=ie);for(var I=0;I<E.length;I++){var L=Ce(ae,E[I],Ee||ne.handleEvent,!1,ne.h||ne);if(!L)break;ne.g[L.key]=L}ne=U.H?T(U.H):{},U.m?(U.u||(U.u="POST"),ne["Content-Type"]="application/x-www-form-urlencoded",U.g.ea(U.A,U.u,U.m,ne)):(U.u="GET",U.g.ea(U.A,U.u,null,ne)),Yr(),Zr(U.i,U.u,U.A,U.l,U.R,U.m)}Ae.prototype.ca=function(U){U=U.target;const ne=this.M;ne&&ys(U)==3?ne.j():this.Y(U)},Ae.prototype.Y=function(U){try{if(U==this.g)e:{const pe=ys(this.g);var ne=this.g.Ba();const Te=this.g.Z();if(!(3>pe)&&(pe!=3||this.g&&(this.h.h||this.g.oa()||Ha(this.g)))){this.J||pe!=4||ne==7||(ne==8||0>=Te?Yr(3):Yr(2)),Pr(this);var ae=this.g.Z();this.X=ae;t:if(Jt(this)){var Ee=Ha(this.g);U="";var E=Ee.length,I=ys(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){sr(this),gr(this);var L="";break t}this.h.i=new f.TextDecoder}for(ne=0;ne<E;ne++)this.h.h=!0,U+=this.h.i.decode(Ee[ne],{stream:!(I&&ne==E-1)});Ee.length=0,this.h.g+=U,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=ae==200,mr(this.i,this.u,this.A,this.l,this.R,pe,ae),this.o){if(this.T&&!this.K){t:{if(this.g){var G,X=this.g;if((G=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(G)){var te=G;break t}}te=null}if(ae=te)zr(this.i,this.l,ae,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vr(this,ae);else{this.o=!1,this.s=3,Bt(12),sr(this),gr(this);break e}}if(this.P){ae=!0;let je;for(;!this.J&&this.C<L.length;)if(je=_t(this,L),je==ot){pe==4&&(this.s=4,Bt(14),ae=!1),zr(this.i,this.l,null,"[Incomplete Response]");break}else if(je==wt){this.s=4,Bt(15),zr(this.i,this.l,L,"[Invalid Chunk]"),ae=!1;break}else zr(this.i,this.l,je,null),vr(this,je);if(Jt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pe!=4||L.length!=0||this.h.h||(this.s=1,Bt(16),ae=!1),this.o=this.o&&ae,!ae)zr(this.i,this.l,L,"[Invalid Chunked Response]"),sr(this),gr(this);else if(0<L.length&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.ba&&!se.M&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),Et(se),se.M=!0,Bt(11))}}else zr(this.i,this.l,L,null),vr(this,L);pe==4&&sr(this),this.o&&!this.J&&(pe==4?Ei(this.j,this):(this.o=!1,Pt(this)))}else Fl(this.g),ae==400&&0<L.indexOf("Unknown SID")?(this.s=3,Bt(12)):(this.s=0,Bt(13)),sr(this),gr(this)}}}catch{}finally{}};function Jt(U){return U.g?U.u=="GET"&&U.L!=2&&U.j.Ca:!1}function _t(U,ne){var ae=U.C,Ee=ne.indexOf(`
`,ae);return Ee==-1?ot:(ae=Number(ne.substring(ae,Ee)),isNaN(ae)?wt:(Ee+=1,Ee+ae>ne.length?ot:(ne=ne.slice(Ee,Ee+ae),U.C=Ee+ae,ne)))}Ae.prototype.cancel=function(){this.J=!0,sr(this)};function Pt(U){U.S=Date.now()+U.I,xt(U,U.I)}function xt(U,ne){if(U.B!=null)throw Error("WatchDog timer not null");U.B=Zt(h(U.ba,U),ne)}function Pr(U){U.B&&(f.clearTimeout(U.B),U.B=null)}Ae.prototype.ba=function(){this.B=null;const U=Date.now();0<=U-this.S?(ss(this.i,this.A),this.L!=2&&(Yr(),Bt(17)),sr(this),this.s=2,gr(this)):xt(this,this.S-U)};function gr(U){U.j.G==0||U.J||Ei(U.j,U)}function sr(U){Pr(U);var ne=U.M;ne&&typeof ne.ma=="function"&&ne.ma(),U.M=null,ye(U.U),U.g&&(ne=U.g,U.g=null,ne.abort(),ne.ma())}function vr(U,ne){try{var ae=U.j;if(ae.G!=0&&(ae.g==U||vi(ae.h,U))){if(!U.K&&vi(ae.h,U)&&ae.G==3){try{var Ee=ae.Da.g.parse(ne)}catch{Ee=null}if(Array.isArray(Ee)&&Ee.length==3){var E=Ee;if(E[0]==0){e:if(!ae.u){if(ae.g)if(ae.g.F+3e3<U.F)yo(ae),mo(ae);else break e;Cs(ae),Bt(18)}}else ae.za=E[1],0<ae.za-ae.T&&37500>E[2]&&ae.F&&ae.v==0&&!ae.C&&(ae.C=Zt(h(ae.Za,ae),6e3));if(1>=Jr(ae.h)&&ae.ca){try{ae.ca()}catch{}ae.ca=void 0}}else Ti(ae,11)}else if((U.K||ae.g==U)&&yo(ae),!y(ne))for(E=ae.Da.g.parse(ne),ne=0;ne<E.length;ne++){let te=E[ne];if(ae.T=te[0],te=te[1],ae.G==2)if(te[0]=="c"){ae.K=te[1],ae.ia=te[2];const se=te[3];se!=null&&(ae.la=se,ae.j.info("VER="+ae.la));const pe=te[4];pe!=null&&(ae.Aa=pe,ae.j.info("SVER="+ae.Aa));const Te=te[5];Te!=null&&typeof Te=="number"&&0<Te&&(Ee=1.5*Te,ae.L=Ee,ae.j.info("backChannelRequestTimeoutMs_="+Ee)),Ee=ae;const je=U.g;if(je){const De=je.g?je.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(De){var I=Ee.h;I.g||De.indexOf("spdy")==-1&&De.indexOf("quic")==-1&&De.indexOf("h2")==-1||(I.j=I.l,I.g=new Set,I.h&&(vn(I,I.h),I.h=null))}if(Ee.D){const He=je.g?je.g.getResponseHeader("X-HTTP-Session-Id"):null;He&&(Ee.ya=He,ur(Ee.I,Ee.D,He))}}ae.G=3,ae.l&&ae.l.ua(),ae.ba&&(ae.R=Date.now()-U.F,ae.j.info("Handshake RTT: "+ae.R+"ms")),Ee=ae;var L=U;if(Ee.qa=Xa(Ee,Ee.J?Ee.ia:null,Ee.W),L.K){Pn(Ee.h,L);var G=L,X=Ee.L;X&&(G.I=X),G.B&&(Pr(G),Pt(G)),Ee.g=L}else Bs(Ee);0<ae.i.length&&go(ae)}else te[0]!="stop"&&te[0]!="close"||Ti(ae,7);else ae.G==3&&(te[0]=="stop"||te[0]=="close"?te[0]=="stop"?Ti(ae,7):Zo(ae):te[0]!="noop"&&ae.l&&ae.l.ta(te),ae.v=0)}}Yr(4)}catch{}}var js=class{constructor(U,ne){this.g=U,this.map=ne}};function Mn(U){this.l=U||10,f.PerformanceNavigationTiming?(U=f.performance.getEntriesByType("navigation"),U=0<U.length&&(U[0].nextHopProtocol=="hq"||U[0].nextHopProtocol=="h2")):U=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=U?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function is(U){return U.h?!0:U.g?U.g.size>=U.j:!1}function Jr(U){return U.h?1:U.g?U.g.size:0}function vi(U,ne){return U.h?U.h==ne:U.g?U.g.has(ne):!1}function vn(U,ne){U.g?U.g.add(ne):U.h=ne}function Pn(U,ne){U.h&&U.h==ne?U.h=null:U.g&&U.g.has(ne)&&U.g.delete(ne)}Mn.prototype.cancel=function(){if(this.i=bn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const U of this.g.values())U.cancel();this.g.clear()}};function bn(U){if(U.h!=null)return U.i.concat(U.h.D);if(U.g!=null&&U.g.size!==0){let ne=U.i;for(const ae of U.g.values())ne=ne.concat(ae.D);return ne}return v(U.i)}function Fa(U){if(U.V&&typeof U.V=="function")return U.V();if(typeof Map<"u"&&U instanceof Map||typeof Set<"u"&&U instanceof Set)return Array.from(U.values());if(typeof U=="string")return U.split("");if(a(U)){for(var ne=[],ae=U.length,Ee=0;Ee<ae;Ee++)ne.push(U[Ee]);return ne}ne=[],ae=0;for(Ee in U)ne[ae++]=U[Ee];return ne}function Nl(U){if(U.na&&typeof U.na=="function")return U.na();if(!U.V||typeof U.V!="function"){if(typeof Map<"u"&&U instanceof Map)return Array.from(U.keys());if(!(typeof Set<"u"&&U instanceof Set)){if(a(U)||typeof U=="string"){var ne=[];U=U.length;for(var ae=0;ae<U;ae++)ne.push(ae);return ne}ne=[],ae=0;for(const Ee in U)ne[ae++]=Ee;return ne}}}function Ni(U,ne){if(U.forEach&&typeof U.forEach=="function")U.forEach(ne,void 0);else if(a(U)||typeof U=="string")Array.prototype.forEach.call(U,ne,void 0);else for(var ae=Nl(U),Ee=Fa(U),E=Ee.length,I=0;I<E;I++)ne.call(void 0,Ee[I],ae&&ae[I],U)}var io=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oo(U,ne){if(U){U=U.split("&");for(var ae=0;ae<U.length;ae++){var Ee=U[ae].indexOf("="),E=null;if(0<=Ee){var I=U[ae].substring(0,Ee);E=U[ae].substring(Ee+1)}else I=U[ae];ne(I,E?decodeURIComponent(E.replace(/\+/g," ")):"")}}}function Zs(U){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,U instanceof Zs){this.h=U.h,Li(this,U.j),this.o=U.o,this.g=U.g,bi(this,U.s),this.l=U.l;var ne=U.i,ae=new Fs;ae.i=ne.i,ne.g&&(ae.g=new Map(ne.g),ae.h=ne.h),ao(this,ae),this.m=U.m}else U&&(ne=String(U).match(io))?(this.h=!1,Li(this,ne[1]||"",!0),this.o=Us(ne[2]||""),this.g=Us(ne[3]||"",!0),bi(this,ne[4]),this.l=Us(ne[5]||"",!0),ao(this,ne[6]||"",!0),this.m=Us(ne[7]||"")):(this.h=!1,this.i=new Fs(null,this.h))}Zs.prototype.toString=function(){var U=[],ne=this.j;ne&&U.push(en(ne,Ko,!0),":");var ae=this.g;return(ae||ne=="file")&&(U.push("//"),(ne=this.o)&&U.push(en(ne,Ko,!0),"@"),U.push(encodeURIComponent(String(ae)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ae=this.s,ae!=null&&U.push(":",String(ae))),(ae=this.l)&&(this.g&&ae.charAt(0)!="/"&&U.push("/"),U.push(en(ae,ae.charAt(0)=="/"?Qo:_i,!0))),(ae=this.i.toString())&&U.push("?",ae),(ae=this.m)&&U.push("#",en(ae,Va)),U.join("")};function Xr(U){return new Zs(U)}function Li(U,ne,ae){U.j=ae?Us(ne,!0):ne,U.j&&(U.j=U.j.replace(/:$/,""))}function bi(U,ne){if(ne){if(ne=Number(ne),isNaN(ne)||0>ne)throw Error("Bad port number "+ne);U.s=ne}else U.s=null}function ao(U,ne,ae){ne instanceof Fs?(U.i=ne,Ba(U.i,U.h)):(ae||(ne=en(ne,Hu)),U.i=new Fs(ne,U.h))}function ur(U,ne,ae){U.i.set(ne,ae)}function Js(U){return ur(U,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),U}function Us(U,ne){return U?ne?decodeURI(U.replace(/%25/g,"%2525")):decodeURIComponent(U):""}function en(U,ne,ae){return typeof U=="string"?(U=encodeURI(U).replace(ne,Ll),ae&&(U=U.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),U):null}function Ll(U){return U=U.charCodeAt(0),"%"+(U>>4&15).toString(16)+(U&15).toString(16)}var Ko=/[#\/\?@]/g,_i=/[#\?:]/g,Qo=/[#\?]/g,Hu=/[#\?@]/g,Va=/#/g;function Fs(U,ne){this.h=this.g=null,this.i=U||null,this.j=!!ne}function Es(U){U.g||(U.g=new Map,U.h=0,U.i&&oo(U.i,function(ne,ae){U.add(decodeURIComponent(ne.replace(/\+/g," ")),ae)}))}s=Fs.prototype,s.add=function(U,ne){Es(this),this.i=null,U=ti(this,U);var ae=this.g.get(U);return ae||this.g.set(U,ae=[]),ae.push(ne),this.h+=1,this};function lo(U,ne){Es(U),ne=ti(U,ne),U.g.has(ne)&&(U.i=null,U.h-=U.g.get(ne).length,U.g.delete(ne))}function ei(U,ne){return Es(U),ne=ti(U,ne),U.g.has(ne)}s.forEach=function(U,ne){Es(this),this.g.forEach(function(ae,Ee){ae.forEach(function(E){U.call(ne,E,Ee,this)},this)},this)},s.na=function(){Es(this);const U=Array.from(this.g.values()),ne=Array.from(this.g.keys()),ae=[];for(let Ee=0;Ee<ne.length;Ee++){const E=U[Ee];for(let I=0;I<E.length;I++)ae.push(ne[Ee])}return ae},s.V=function(U){Es(this);let ne=[];if(typeof U=="string")ei(this,U)&&(ne=ne.concat(this.g.get(ti(this,U))));else{U=Array.from(this.g.values());for(let ae=0;ae<U.length;ae++)ne=ne.concat(U[ae])}return ne},s.set=function(U,ne){return Es(this),this.i=null,U=ti(this,U),ei(this,U)&&(this.h-=this.g.get(U).length),this.g.set(U,[ne]),this.h+=1,this},s.get=function(U,ne){return U?(U=this.V(U),0<U.length?String(U[0]):ne):ne};function wi(U,ne,ae){lo(U,ne),0<ae.length&&(U.i=null,U.g.set(ti(U,ne),v(ae)),U.h+=ae.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const U=[],ne=Array.from(this.g.keys());for(var ae=0;ae<ne.length;ae++){var Ee=ne[ae];const I=encodeURIComponent(String(Ee)),L=this.V(Ee);for(Ee=0;Ee<L.length;Ee++){var E=I;L[Ee]!==""&&(E+="="+encodeURIComponent(String(L[Ee]))),U.push(E)}}return this.i=U.join("&")};function ti(U,ne){return ne=String(ne),U.j&&(ne=ne.toLowerCase()),ne}function Ba(U,ne){ne&&!U.j&&(Es(U),U.i=null,U.g.forEach(function(ae,Ee){var E=Ee.toLowerCase();Ee!=E&&(lo(this,Ee),wi(this,E,ae))},U)),U.j=ne}function Ul(U,ne){const ae=new Gr;if(f.Image){const Ee=new Image;Ee.onload=m(Ts,ae,"TestLoadImage: loaded",!0,ne,Ee),Ee.onerror=m(Ts,ae,"TestLoadImage: error",!1,ne,Ee),Ee.onabort=m(Ts,ae,"TestLoadImage: abort",!1,ne,Ee),Ee.ontimeout=m(Ts,ae,"TestLoadImage: timeout",!1,ne,Ee),f.setTimeout(function(){Ee.ontimeout&&Ee.ontimeout()},1e4),Ee.src=U}else ne(!1)}function uo(U,ne){const ae=new Gr,Ee=new AbortController,E=setTimeout(()=>{Ee.abort(),Ts(ae,"TestPingServer: timeout",!1,ne)},1e4);fetch(U,{signal:Ee.signal}).then(I=>{clearTimeout(E),I.ok?Ts(ae,"TestPingServer: ok",!0,ne):Ts(ae,"TestPingServer: server error",!1,ne)}).catch(()=>{clearTimeout(E),Ts(ae,"TestPingServer: error",!1,ne)})}function Ts(U,ne,ae,Ee,E){try{E&&(E.onload=null,E.onerror=null,E.onabort=null,E.ontimeout=null),Ee(ae)}catch{}}function Ui(){this.g=new $e}function fn(U,ne,ae){const Ee=ae||"";try{Ni(U,function(E,I){let L=E;d(E)&&(L=Pe(E)),ne.push(Ee+I+"="+encodeURIComponent(L))})}catch(E){throw ne.push(Ee+"type="+encodeURIComponent("_badmap")),E}}function Vn(U){this.l=U.Ub||null,this.j=U.eb||!1}b(Vn,ct),Vn.prototype.g=function(){return new gs(this.l,this.j)},Vn.prototype.i=function(U){return function(){return U}}({});function gs(U,ne){ft.call(this),this.D=U,this.o=ne,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(gs,ft),s=gs.prototype,s.open=function(U,ne){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=U,this.A=ne,this.readyState=1,os(this)},s.send=function(U){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const ne={headers:this.u,method:this.B,credentials:this.m,cache:void 0};U&&(ne.body=U),(this.D||f).fetch(new Request(this.A,ne)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_n(this)),this.readyState=0},s.Sa=function(U){if(this.g&&(this.l=U,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=U.headers,this.readyState=2,os(this)),this.g&&(this.readyState=3,os(this),this.g)))if(this.responseType==="arraybuffer")U.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in U){if(this.j=U.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xi(this)}else U.text().then(this.Ra.bind(this),this.ga.bind(this))};function xi(U){U.j.read().then(U.Pa.bind(U)).catch(U.ga.bind(U))}s.Pa=function(U){if(this.g){if(this.o&&U.value)this.response.push(U.value);else if(!this.o){var ne=U.value?U.value:new Uint8Array(0);(ne=this.v.decode(ne,{stream:!U.done}))&&(this.response=this.responseText+=ne)}U.done?_n(this):os(this),this.readyState==3&&xi(this)}},s.Ra=function(U){this.g&&(this.response=this.responseText=U,_n(this))},s.Qa=function(U){this.g&&(this.response=U,_n(this))},s.ga=function(){this.g&&_n(this)};function _n(U){U.readyState=4,U.l=null,U.j=null,U.v=null,os(U)}s.setRequestHeader=function(U,ne){this.u.append(U,ne)},s.getResponseHeader=function(U){return this.h&&this.h.get(U.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const U=[],ne=this.h.entries();for(var ae=ne.next();!ae.done;)ae=ae.value,U.push(ae[0]+": "+ae[1]),ae=ne.next();return U.join(`\r
`)};function os(U){U.onreadystatechange&&U.onreadystatechange.call(U)}Object.defineProperty(gs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(U){this.m=U?"include":"same-origin"}});function Ga(U){let ne="";return N(U,function(ae,Ee){ne+=Ee,ne+=":",ne+=ae,ne+=`\r
`}),ne}function Fr(U,ne,ae){e:{for(Ee in ae){var Ee=!1;break e}Ee=!0}Ee||(ae=Ga(ae),typeof U=="string"?ae!=null&&encodeURIComponent(String(ae)):ur(U,ne,ae))}function cr(U){ft.call(this),this.headers=new Map,this.o=U||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(cr,ft);var co=/^https?$/i,Fi=["POST","PUT"];s=cr.prototype,s.Ha=function(U){this.J=U},s.ea=function(U,ne,ae,Ee){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+U);ne=ne?ne.toUpperCase():"GET",this.D=U,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ls.g(),this.v=this.o?yt(this.o):yt(Ls),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(ne,String(U),!0),this.B=!1}catch(I){za(this,I);return}if(U=ae||"",ae=new Map(this.headers),Ee)if(Object.getPrototypeOf(Ee)===Object.prototype)for(var E in Ee)ae.set(E,Ee[E]);else if(typeof Ee.keys=="function"&&typeof Ee.get=="function")for(const I of Ee.keys())ae.set(I,Ee.get(I));else throw Error("Unknown input type for opt_headers: "+String(Ee));Ee=Array.from(ae.keys()).find(I=>I.toLowerCase()=="content-type"),E=f.FormData&&U instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Fi,ne,void 0))||Ee||E||ae.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[I,L]of ae)this.g.setRequestHeader(I,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Si(this),this.u=!0,this.g.send(U),this.u=!1}catch(I){za(this,I)}};function za(U,ne){U.h=!1,U.g&&(U.j=!0,U.g.abort(),U.j=!1),U.l=ne,U.m=5,ho(U),Vs(U)}function ho(U){U.A||(U.A=!0,at(U,"complete"),at(U,"error"))}s.abort=function(U){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=U||7,at(this,"complete"),at(this,"abort"),Vs(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vs(this,!0)),cr.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?fo(this):this.bb())},s.bb=function(){fo(this)};function fo(U){if(U.h&&typeof l<"u"&&(!U.v[1]||ys(U)!=4||U.Z()!=2)){if(U.u&&ys(U)==4)Je(U.Ea,0,U);else if(at(U,"readystatechange"),ys(U)==4){U.h=!1;try{const L=U.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ne=!0;break e;default:ne=!1}var ae;if(!(ae=ne)){var Ee;if(Ee=L===0){var E=String(U.D).match(io)[1]||null;!E&&f.self&&f.self.location&&(E=f.self.location.protocol.slice(0,-1)),Ee=!co.test(E?E.toLowerCase():"")}ae=Ee}if(ae)at(U,"complete"),at(U,"success");else{U.m=6;try{var I=2<ys(U)?U.g.statusText:""}catch{I=""}U.l=I+" ["+U.Z()+"]",ho(U)}}finally{Vs(U)}}}}function Vs(U,ne){if(U.g){Si(U);const ae=U.g,Ee=U.v[0]?()=>{}:null;U.g=null,U.v=null,ne||at(U,"ready");try{ae.onreadystatechange=Ee}catch{}}}function Si(U){U.I&&(f.clearTimeout(U.I),U.I=null)}s.isActive=function(){return!!this.g};function ys(U){return U.g?U.g.readyState:0}s.Z=function(){try{return 2<ys(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(U){if(this.g){var ne=this.g.responseText;return U&&ne.indexOf(U)==0&&(ne=ne.substring(U.length)),Ve(ne)}};function Ha(U){try{if(!U.g)return null;if("response"in U.g)return U.g.response;switch(U.H){case"":case"text":return U.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in U.g)return U.g.mozResponseArrayBuffer}return null}catch{return null}}function Fl(U){const ne={};U=(U.g&&2<=ys(U)&&U.g.getAllResponseHeaders()||"").split(`\r
`);for(let Ee=0;Ee<U.length;Ee++){if(y(U[Ee]))continue;var ae=k(U[Ee]);const E=ae[0];if(ae=ae[1],typeof ae!="string")continue;ae=ae.trim();const I=ne[E]||[];ne[E]=I,I.push(ae)}C(ne,function(Ee){return Ee.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vi(U,ne,ae){return ae&&ae.internalChannelParams&&ae.internalChannelParams[U]||ne}function po(U){this.Aa=0,this.i=[],this.j=new Gr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vi("failFast",!1,U),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vi("baseRetryDelayMs",5e3,U),this.cb=Vi("retryDelaySeedMs",1e4,U),this.Wa=Vi("forwardChannelMaxRetries",2,U),this.wa=Vi("forwardChannelRequestTimeoutMs",2e4,U),this.pa=U&&U.xmlHttpFactory||void 0,this.Xa=U&&U.Tb||void 0,this.Ca=U&&U.useFetchStreams||!1,this.L=void 0,this.J=U&&U.supportsCrossDomainXhr||!1,this.K="",this.h=new Mn(U&&U.concurrentRequestLimit),this.Da=new Ui,this.P=U&&U.fastHandshake||!1,this.O=U&&U.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=U&&U.Rb||!1,U&&U.xa&&this.j.xa(),U&&U.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&U&&U.detectBufferingProxy||!1,this.ja=void 0,U&&U.longPollingTimeout&&0<U.longPollingTimeout&&(this.ja=U.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=po.prototype,s.la=8,s.G=1,s.connect=function(U,ne,ae,Ee){Bt(0),this.W=U,this.H=ne||{},ae&&Ee!==void 0&&(this.H.OSID=ae,this.H.OAID=Ee),this.F=this.X,this.I=Xa(this,null,this.W),go(this)};function Zo(U){if(qa(U),U.G==3){var ne=U.U++,ae=Xr(U.I);if(ur(ae,"SID",U.K),ur(ae,"RID",ne),ur(ae,"TYPE","terminate"),ji(U,ae),ne=new Ae(U,U.j,ne),ne.L=2,ne.v=Js(Xr(ae)),ae=!1,f.navigator&&f.navigator.sendBeacon)try{ae=f.navigator.sendBeacon(ne.v.toString(),"")}catch{}!ae&&f.Image&&(new Image().src=ne.v,ae=!0),ae||(ne.g=Bl(ne.j,null),ne.g.ea(ne.v)),ne.F=Date.now(),Pt(ne)}br(U)}function mo(U){U.g&&(Et(U),U.g.cancel(),U.g=null)}function qa(U){mo(U),U.u&&(f.clearTimeout(U.u),U.u=null),yo(U),U.h.cancel(),U.s&&(typeof U.s=="number"&&f.clearTimeout(U.s),U.s=null)}function go(U){if(!is(U.h)&&!U.s){U.s=!0;var ne=U.Ga;Q||K(),J||(Q(),J=!0),Z.add(ne,U),U.B=0}}function Wa(U,ne){return Jr(U.h)>=U.h.j-(U.s?1:0)?!1:U.s?(U.i=ne.D.concat(U.i),!0):U.G==1||U.G==2||U.B>=(U.Va?0:U.Wa)?!1:(U.s=Zt(h(U.Ga,U,ne),$a(U,U.B)),U.B++,!0)}s.Ga=function(U){if(this.s)if(this.s=null,this.G==1){if(!U){this.U=Math.floor(1e5*Math.random()),U=this.U++;const E=new Ae(this,this.j,U);let I=this.o;if(this.S&&(I?(I=T(I),P(I,this.S)):I=this.S),this.m!==null||this.O||(E.H=I,I=null),this.P)e:{for(var ne=0,ae=0;ae<this.i.length;ae++){t:{var Ee=this.i[ae];if("__data__"in Ee.map&&(Ee=Ee.map.__data__,typeof Ee=="string")){Ee=Ee.length;break t}Ee=void 0}if(Ee===void 0)break;if(ne+=Ee,4096<ne){ne=ae;break e}if(ne===4096||ae===this.i.length-1){ne=ae+1;break e}}ne=1e3}else ne=1e3;ne=Ya(this,E,ne),ae=Xr(this.I),ur(ae,"RID",U),ur(ae,"CVER",22),this.D&&ur(ae,"X-HTTP-Session-Id",this.D),ji(this,ae),I&&(this.O?ne="headers="+encodeURIComponent(String(Ga(I)))+"&"+ne:this.m&&Fr(ae,this.m,I)),vn(this.h,E),this.Ua&&ur(ae,"TYPE","init"),this.P?(ur(ae,"$req",ne),ur(ae,"SID","null"),E.T=!0,qt(E,ae,null)):qt(E,ae,ne),this.G=2}}else this.G==3&&(U?Bi(this,U):this.i.length==0||is(this.h)||Bi(this))};function Bi(U,ne){var ae;ne?ae=ne.l:ae=U.U++;const Ee=Xr(U.I);ur(Ee,"SID",U.K),ur(Ee,"RID",ae),ur(Ee,"AID",U.T),ji(U,Ee),U.m&&U.o&&Fr(Ee,U.m,U.o),ae=new Ae(U,U.j,ae,U.B+1),U.m===null&&(ae.H=U.o),ne&&(U.i=ne.D.concat(U.i)),ne=Ya(U,ae,1e3),ae.I=Math.round(.5*U.wa)+Math.round(.5*U.wa*Math.random()),vn(U.h,ae),qt(ae,Ee,ne)}function ji(U,ne){U.H&&N(U.H,function(ae,Ee){ur(ne,Ee,ae)}),U.l&&Ni({},function(ae,Ee){ur(ne,Ee,ae)})}function Ya(U,ne,ae){ae=Math.min(U.i.length,ae);var Ee=U.l?h(U.l.Na,U.l,U):null;e:{var E=U.i;let I=-1;for(;;){const L=["count="+ae];I==-1?0<ae?(I=E[0].g,L.push("ofs="+I)):I=0:L.push("ofs="+I);let G=!0;for(let X=0;X<ae;X++){let te=E[X].g;const se=E[X].map;if(te-=I,0>te)I=Math.max(0,E[X].g-100),G=!1;else try{fn(se,L,"req"+te+"_")}catch{Ee&&Ee(se)}}if(G){Ee=L.join("&");break e}}}return U=U.i.splice(0,ae),ne.D=U,Ee}function Bs(U){if(!U.g&&!U.u){U.Y=1;var ne=U.Fa;Q||K(),J||(Q(),J=!0),Z.add(ne,U),U.v=0}}function Cs(U){return U.g||U.u||3<=U.v?!1:(U.Y++,U.u=Zt(h(U.Fa,U),$a(U,U.v)),U.v++,!0)}s.Fa=function(){if(this.u=null,Vl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var U=2*this.R;this.j.info("BP detection timer enabled: "+U),this.A=Zt(h(this.ab,this),U)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Bt(10),mo(this),Vl(this))};function Et(U){U.A!=null&&(f.clearTimeout(U.A),U.A=null)}function Vl(U){U.g=new Ae(U,U.j,"rpc",U.Y),U.m===null&&(U.g.H=U.o),U.g.O=0;var ne=Xr(U.qa);ur(ne,"RID","rpc"),ur(ne,"SID",U.K),ur(ne,"AID",U.T),ur(ne,"CI",U.F?"0":"1"),!U.F&&U.ja&&ur(ne,"TO",U.ja),ur(ne,"TYPE","xmlhttp"),ji(U,ne),U.m&&U.o&&Fr(ne,U.m,U.o),U.L&&(U.g.I=U.L);var ae=U.g;U=U.ia,ae.L=1,ae.v=Js(Xr(ne)),ae.m=null,ae.P=!0,tt(ae,U)}s.Za=function(){this.C!=null&&(this.C=null,mo(this),Cs(this),Bt(19))};function yo(U){U.C!=null&&(f.clearTimeout(U.C),U.C=null)}function Ei(U,ne){var ae=null;if(U.g==ne){yo(U),Et(U),U.g=null;var Ee=2}else if(vi(U.h,ne))ae=ne.D,Pn(U.h,ne),Ee=1;else return;if(U.G!=0){if(ne.o)if(Ee==1){ae=ne.m?ne.m.length:0,ne=Date.now()-ne.F;var E=U.B;Ee=kt(),at(Ee,new Cr(Ee,ae)),go(U)}else Bs(U);else if(E=ne.s,E==3||E==0&&0<ne.X||!(Ee==1&&Wa(U,ne)||Ee==2&&Cs(U)))switch(ae&&0<ae.length&&(ne=U.h,ne.i=ne.i.concat(ae)),E){case 1:Ti(U,5);break;case 4:Ti(U,10);break;case 3:Ti(U,6);break;default:Ti(U,2)}}}function $a(U,ne){let ae=U.Ta+Math.floor(Math.random()*U.cb);return U.isActive()||(ae*=2),ae*ne}function Ti(U,ne){if(U.j.info("Error code "+ne),ne==2){var ae=h(U.fb,U),Ee=U.Xa;const E=!Ee;Ee=new Zs(Ee||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Li(Ee,"https"),Js(Ee),E?Ul(Ee.toString(),ae):uo(Ee.toString(),ae)}else Bt(2);U.G=0,U.l&&U.l.sa(ne),br(U),qa(U)}s.fb=function(U){U?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function br(U){if(U.G=0,U.ka=[],U.l){const ne=bn(U.h);(ne.length!=0||U.i.length!=0)&&(g(U.ka,ne),g(U.ka,U.i),U.h.i.length=0,v(U.i),U.i.length=0),U.l.ra()}}function Xa(U,ne,ae){var Ee=ae instanceof Zs?Xr(ae):new Zs(ae);if(Ee.g!="")ne&&(Ee.g=ne+"."+Ee.g),bi(Ee,Ee.s);else{var E=f.location;Ee=E.protocol,ne=ne?ne+"."+E.hostname:E.hostname,E=+E.port;var I=new Zs(null);Ee&&Li(I,Ee),ne&&(I.g=ne),E&&bi(I,E),ae&&(I.l=ae),Ee=I}return ae=U.D,ne=U.ya,ae&&ne&&ur(Ee,ae,ne),ur(Ee,"VER",U.la),ji(U,Ee),Ee}function Bl(U,ne,ae){if(ne&&!U.J)throw Error("Can't create secondary domain capable XhrIo object.");return ne=U.Ca&&!U.pa?new cr(new Vn({eb:ae})):new cr(U.pa),ne.Ha(U.J),ne}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function as(){}s=as.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Jo(){}Jo.prototype.g=function(U,ne){return new Yn(U,ne)};function Yn(U,ne){ft.call(this),this.g=new po(ne),this.l=U,this.h=ne&&ne.messageUrlParams||null,U=ne&&ne.messageHeaders||null,ne&&ne.clientProtocolHeaderRequired&&(U?U["X-Client-Protocol"]="webchannel":U={"X-Client-Protocol":"webchannel"}),this.g.o=U,U=ne&&ne.initMessageHeaders||null,ne&&ne.messageContentType&&(U?U["X-WebChannel-Content-Type"]=ne.messageContentType:U={"X-WebChannel-Content-Type":ne.messageContentType}),ne&&ne.va&&(U?U["X-WebChannel-Client-Profile"]=ne.va:U={"X-WebChannel-Client-Profile":ne.va}),this.g.S=U,(U=ne&&ne.Sb)&&!y(U)&&(this.g.m=U),this.v=ne&&ne.supportsCrossDomainXhr||!1,this.u=ne&&ne.sendRawJson||!1,(ne=ne&&ne.httpSessionIdParam)&&!y(ne)&&(this.g.D=ne,U=this.h,U!==null&&ne in U&&(U=this.h,ne in U&&delete U[ne])),this.j=new ri(this)}b(Yn,ft),Yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Yn.prototype.close=function(){Zo(this.g)},Yn.prototype.o=function(U){var ne=this.g;if(typeof U=="string"){var ae={};ae.__data__=U,U=ae}else this.u&&(ae={},ae.__data__=Pe(U),U=ae);ne.i.push(new js(ne.Ya++,U)),ne.G==3&&go(ne)},Yn.prototype.N=function(){this.g.l=null,delete this.j,Zo(this.g),delete this.g,Yn.aa.N.call(this)};function Gl(U){Lt.call(this),U.__headers__&&(this.headers=U.__headers__,this.statusCode=U.__status__,delete U.__headers__,delete U.__status__);var ne=U.__sm__;if(ne){e:{for(const ae in ne){U=ae;break e}U=void 0}(this.i=U)&&(U=this.i,ne=ne!==null&&U in ne?ne[U]:void 0),this.data=ne}else this.data=U}b(Gl,Lt);function zl(){Tt.call(this),this.status=1}b(zl,Tt);function ri(U){this.g=U}b(ri,as),ri.prototype.ua=function(){at(this.g,"a")},ri.prototype.ta=function(U){at(this.g,new Gl(U))},ri.prototype.sa=function(U){at(this.g,new zl)},ri.prototype.ra=function(){at(this.g,"b")},Jo.prototype.createWebChannel=Jo.prototype.g,Yn.prototype.send=Yn.prototype.o,Yn.prototype.open=Yn.prototype.m,Yn.prototype.close=Yn.prototype.close,u2=function(){return new Jo},l2=function(){return kt()},a2=jt,oy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$r.NO_ERROR=0,$r.TIMEOUT=8,$r.HTTP_ERROR=6,tf=$r,Ss.COMPLETE="complete",o2=Ss,vt.EventType=bt,bt.OPEN="a",bt.CLOSE="b",bt.ERROR="c",bt.MESSAGE="d",ft.prototype.listen=ft.prototype.K,Fc=vt,cr.prototype.listenOnce=cr.prototype.L,cr.prototype.getLastError=cr.prototype.Ka,cr.prototype.getLastErrorCode=cr.prototype.Ba,cr.prototype.getStatus=cr.prototype.Z,cr.prototype.getResponseJson=cr.prototype.Oa,cr.prototype.getResponseText=cr.prototype.oa,cr.prototype.send=cr.prototype.ea,cr.prototype.setWithCredentials=cr.prototype.Ha,i2=cr}).apply(typeof kh<"u"?kh:typeof self<"u"?self:typeof window<"u"?window:{});const nw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(r){this.uid=r}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(r){return r.uid===this.uid}}hs.UNAUTHENTICATED=new hs(null),hs.GOOGLE_CREDENTIALS=new hs("google-credentials-uid"),hs.FIRST_PARTY=new hs("first-party-uid"),hs.MOCK_USER=new hs("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=new qf("@firebase/firestore");function Rc(){return xl.logLevel}function It(s,...r){if(xl.logLevel<=hr.DEBUG){const n=r.map(ov);xl.debug(`Firestore (${Uu}): ${s}`,...n)}}function Ho(s,...r){if(xl.logLevel<=hr.ERROR){const n=r.map(ov);xl.error(`Firestore (${Uu}): ${s}`,...n)}}function Tu(s,...r){if(xl.logLevel<=hr.WARN){const n=r.map(ov);xl.warn(`Firestore (${Uu}): ${s}`,...n)}}function ov(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(s="Unexpected state"){const r=`FIRESTORE (${Uu}) INTERNAL ASSERTION FAILED: `+s;throw Ho(r),new Error(r)}function Mr(s,r){s||Yt()}function Kt(s,r){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ct extends yi{constructor(r,n){super(r,n),this.code=r,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(){this.promise=new Promise((r,n)=>{this.resolve=r,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(r,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${r}`)}}class EM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(r,n){r.enqueueRetryable(()=>n(hs.UNAUTHENTICATED))}shutdown(){}}class TM{constructor(r){this.token=r,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(r,n){this.changeListener=n,r.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class CM{constructor(r){this.t=r,this.currentUser=hs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(r,n){Mr(this.o===void 0);let t=this.i;const o=a=>this.i!==t?(t=this.i,n(a)):Promise.resolve();let c=new Uo;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Uo,r.enqueueRetryable(()=>o(this.currentUser))};const l=()=>{const a=c;r.enqueueRetryable(async()=>{await a.promise,await o(this.currentUser)})},f=a=>{It("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(a=>f(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?f(a):(It("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Uo)}},0),l()}getToken(){const r=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(t=>this.i!==r?(It("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Mr(typeof t.accessToken=="string"),new c2(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const r=this.auth&&this.auth.getUid();return Mr(r===null||typeof r=="string"),new hs(r)}}class AM{constructor(r,n,t){this.l=r,this.h=n,this.P=t,this.type="FirstParty",this.user=hs.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const r=this.T();return r&&this.I.set("Authorization",r),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class RM{constructor(r,n,t){this.l=r,this.h=n,this.P=t}getToken(){return Promise.resolve(new AM(this.l,this.h,this.P))}start(r,n){r.enqueueRetryable(()=>n(hs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class OM{constructor(r){this.value=r,this.type="AppCheck",this.headers=new Map,r&&r.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IM{constructor(r){this.A=r,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(r,n){Mr(this.o===void 0);const t=c=>{c.error!=null&&It("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const l=c.token!==this.R;return this.R=c.token,It("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(c.token):Promise.resolve()};this.o=c=>{r.enqueueRetryable(()=>t(c))};const o=c=>{It("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?o(c):It("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const r=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(r).then(n=>n?(Mr(typeof n.token=="string"),this.R=n.token,new OM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kM(s){const r=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(r&&typeof r.getRandomValues=="function")r.getRandomValues(n);else for(let t=0;t<s;t++)n[t]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{static newId(){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/r.length)*r.length;let t="";for(;t.length<20;){const o=kM(40);for(let c=0;c<o.length;++c)t.length<20&&o[c]<n&&(t+=r.charAt(o[c]%r.length))}return t}}function xr(s,r){return s<r?-1:s>r?1:0}function Cu(s,r,n){return s.length===r.length&&s.every((t,o)=>n(t,r[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(r,n){if(this.seconds=r,this.nanoseconds=n,n<0)throw new Ct(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ct(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(r<-62135596800)throw new Ct(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+r);if(r>=253402300800)throw new Ct(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+r)}static now(){return On.fromMillis(Date.now())}static fromDate(r){return On.fromMillis(r.getTime())}static fromMillis(r){const n=Math.floor(r/1e3),t=Math.floor(1e6*(r-1e3*n));return new On(n,t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(r){return this.seconds===r.seconds?xr(this.nanoseconds,r.nanoseconds):xr(this.seconds,r.seconds)}isEqual(r){return r.seconds===this.seconds&&r.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const r=this.seconds- -62135596800;return String(r).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(r){this.timestamp=r}static fromTimestamp(r){return new Xt(r)}static min(){return new Xt(new On(0,0))}static max(){return new Xt(new On(253402300799,999999999))}compareTo(r){return this.timestamp._compareTo(r.timestamp)}isEqual(r){return this.timestamp.isEqual(r.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(r,n,t){n===void 0?n=0:n>r.length&&Yt(),t===void 0?t=r.length-n:t>r.length-n&&Yt(),this.segments=r,this.offset=n,this.len=t}get length(){return this.len}isEqual(r){return sd.comparator(this,r)===0}child(r){const n=this.segments.slice(this.offset,this.limit());return r instanceof sd?r.forEach(t=>{n.push(t)}):n.push(r),this.construct(n)}limit(){return this.offset+this.length}popFirst(r){return r=r===void 0?1:r,this.construct(this.segments,this.offset+r,this.length-r)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(r){return this.segments[this.offset+r]}isEmpty(){return this.length===0}isPrefixOf(r){if(r.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==r.get(n))return!1;return!0}isImmediateParentOf(r){if(this.length+1!==r.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==r.get(n))return!1;return!0}forEach(r){for(let n=this.offset,t=this.limit();n<t;n++)r(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(r,n){const t=Math.min(r.length,n.length);for(let o=0;o<t;o++){const c=r.get(o),l=n.get(o);if(c<l)return-1;if(c>l)return 1}return r.length<n.length?-1:r.length>n.length?1:0}}class Kr extends sd{construct(r,n,t){return new Kr(r,n,t)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...r){const n=[];for(const t of r){if(t.indexOf("//")>=0)throw new Ct(ht.INVALID_ARGUMENT,`Invalid segment (${t}). Paths must not contain // in them.`);n.push(...t.split("/").filter(o=>o.length>0))}return new Kr(n)}static emptyPath(){return new Kr([])}}const MM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class es extends sd{construct(r,n,t){return new es(r,n,t)}static isValidIdentifier(r){return MM.test(r)}canonicalString(){return this.toArray().map(r=>(r=r.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),es.isValidIdentifier(r)||(r="`"+r+"`"),r)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new es(["__name__"])}static fromServerFormat(r){const n=[];let t="",o=0;const c=()=>{if(t.length===0)throw new Ct(ht.INVALID_ARGUMENT,`Invalid field path (${r}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(t),t=""};let l=!1;for(;o<r.length;){const f=r[o];if(f==="\\"){if(o+1===r.length)throw new Ct(ht.INVALID_ARGUMENT,"Path has trailing escape character: "+r);const a=r[o+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new Ct(ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+r);t+=a,o+=2}else f==="`"?(l=!l,o++):f!=="."||l?(t+=f,o++):(c(),o++)}if(c(),l)throw new Ct(ht.INVALID_ARGUMENT,"Unterminated ` in path: "+r);return new es(n)}static emptyPath(){return new es([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(r){this.path=r}static fromPath(r){return new Vt(Kr.fromString(r))}static fromName(r){return new Vt(Kr.fromString(r).popFirst(5))}static empty(){return new Vt(Kr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(r){return this.path.length>=2&&this.path.get(this.path.length-2)===r}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(r){return r!==null&&Kr.comparator(this.path,r.path)===0}toString(){return this.path.toString()}static comparator(r,n){return Kr.comparator(r.path,n.path)}static isDocumentKey(r){return r.length%2==0}static fromSegments(r){return new Vt(new Kr(r.slice()))}}function PM(s,r){const n=s.toTimestamp().seconds,t=s.toTimestamp().nanoseconds+1,o=Xt.fromTimestamp(t===1e9?new On(n+1,0):new On(n,t));return new Oa(o,Vt.empty(),r)}function DM(s){return new Oa(s.readTime,s.key,-1)}class Oa{constructor(r,n,t){this.readTime=r,this.documentKey=n,this.largestBatchId=t}static min(){return new Oa(Xt.min(),Vt.empty(),-1)}static max(){return new Oa(Xt.max(),Vt.empty(),-1)}}function NM(s,r){let n=s.readTime.compareTo(r.readTime);return n!==0?n:(n=Vt.comparator(s.documentKey,r.documentKey),n!==0?n:xr(s.largestBatchId,r.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(r){this.onCommittedListeners.push(r)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(r=>r())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xd(s){if(s.code!==ht.FAILED_PRECONDITION||s.message!==LM)throw s;It("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(r){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,r(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(r){return this.next(void 0,r)}next(r,n){return this.callbackAttached&&Yt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(r,this.result):new gt((t,o)=>{this.nextCallback=c=>{this.wrapSuccess(r,c).next(t,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(t,o)}})}toPromise(){return new Promise((r,n)=>{this.next(r,n)})}wrapUserFunction(r){try{const n=r();return n instanceof gt?n:gt.resolve(n)}catch(n){return gt.reject(n)}}wrapSuccess(r,n){return r?this.wrapUserFunction(()=>r(n)):gt.resolve(n)}wrapFailure(r,n){return r?this.wrapUserFunction(()=>r(n)):gt.reject(n)}static resolve(r){return new gt((n,t)=>{n(r)})}static reject(r){return new gt((n,t)=>{t(r)})}static waitFor(r){return new gt((n,t)=>{let o=0,c=0,l=!1;r.forEach(f=>{++o,f.next(()=>{++c,l&&c===o&&n()},a=>t(a))}),l=!0,c===o&&n()})}static or(r){let n=gt.resolve(!1);for(const t of r)n=n.next(o=>o?gt.resolve(o):t());return n}static forEach(r,n){const t=[];return r.forEach((o,c)=>{t.push(n.call(this,o,c))}),this.waitFor(t)}static mapArray(r,n){return new gt((t,o)=>{const c=r.length,l=new Array(c);let f=0;for(let a=0;a<c;a++){const d=a;n(r[d]).next(_=>{l[d]=_,++f,f===c&&t(l)},_=>o(_))}})}static doWhile(r,n){return new gt((t,o)=>{const c=()=>{r()===!0?n().next(()=>{c()},o):t()};c()})}}function FM(s){const r=s.match(/Android ([\d.]+)/i),n=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Sd(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(r,n){this.previousValue=r,n&&(n.sequenceNumberHandler=t=>this.ie(t),this.se=t=>n.writeSequenceNumber(t))}ie(r){return this.previousValue=Math.max(r,this.previousValue),this.previousValue}next(){const r=++this.previousValue;return this.se&&this.se(r),r}}av.oe=-1;function Qf(s){return s==null}function wf(s){return s===0&&1/s==-1/0}function VM(s){return typeof s=="number"&&Number.isInteger(s)&&!wf(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(s){let r=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&r++;return r}function Fu(s,r){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&r(n,s[n])}function h2(s){for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(r,n){this.comparator=r,this.root=n||Zn.EMPTY}insert(r,n){return new nn(this.comparator,this.root.insert(r,n,this.comparator).copy(null,null,Zn.BLACK,null,null))}remove(r){return new nn(this.comparator,this.root.remove(r,this.comparator).copy(null,null,Zn.BLACK,null,null))}get(r){let n=this.root;for(;!n.isEmpty();){const t=this.comparator(r,n.key);if(t===0)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}indexOf(r){let n=0,t=this.root;for(;!t.isEmpty();){const o=this.comparator(r,t.key);if(o===0)return n+t.left.size;o<0?t=t.left:(n+=t.left.size+1,t=t.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(r){return this.root.inorderTraversal(r)}forEach(r){this.inorderTraversal((n,t)=>(r(n,t),!1))}toString(){const r=[];return this.inorderTraversal((n,t)=>(r.push(`${n}:${t}`),!1)),`{${r.join(", ")}}`}reverseTraversal(r){return this.root.reverseTraversal(r)}getIterator(){return new Mh(this.root,null,this.comparator,!1)}getIteratorFrom(r){return new Mh(this.root,r,this.comparator,!1)}getReverseIterator(){return new Mh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(r){return new Mh(this.root,r,this.comparator,!0)}}class Mh{constructor(r,n,t,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!r.isEmpty();)if(c=n?t(r.key,n):1,n&&o&&(c*=-1),c<0)r=this.isReverse?r.left:r.right;else{if(c===0){this.nodeStack.push(r);break}this.nodeStack.push(r),r=this.isReverse?r.right:r.left}}getNext(){let r=this.nodeStack.pop();const n={key:r.key,value:r.value};if(this.isReverse)for(r=r.left;!r.isEmpty();)this.nodeStack.push(r),r=r.right;else for(r=r.right;!r.isEmpty();)this.nodeStack.push(r),r=r.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const r=this.nodeStack[this.nodeStack.length-1];return{key:r.key,value:r.value}}}class Zn{constructor(r,n,t,o,c){this.key=r,this.value=n,this.color=t??Zn.RED,this.left=o??Zn.EMPTY,this.right=c??Zn.EMPTY,this.size=this.left.size+1+this.right.size}copy(r,n,t,o,c){return new Zn(r??this.key,n??this.value,t??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(r){return this.left.inorderTraversal(r)||r(this.key,this.value)||this.right.inorderTraversal(r)}reverseTraversal(r){return this.right.reverseTraversal(r)||r(this.key,this.value)||this.left.reverseTraversal(r)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(r,n,t){let o=this;const c=t(r,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(r,n,t),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(r,n,t)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Zn.EMPTY;let r=this;return r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.removeMin(),null),r.fixUp()}remove(r,n){let t,o=this;if(n(r,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(r,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(r,o.key)===0){if(o.right.isEmpty())return Zn.EMPTY;t=o.right.min(),o=o.copy(t.key,t.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(r,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let r=this;return r.right.isRed()&&!r.left.isRed()&&(r=r.rotateLeft()),r.left.isRed()&&r.left.left.isRed()&&(r=r.rotateRight()),r.left.isRed()&&r.right.isRed()&&(r=r.colorFlip()),r}moveRedLeft(){let r=this.colorFlip();return r.right.left.isRed()&&(r=r.copy(null,null,null,null,r.right.rotateRight()),r=r.rotateLeft(),r=r.colorFlip()),r}moveRedRight(){let r=this.colorFlip();return r.left.left.isRed()&&(r=r.rotateRight(),r=r.colorFlip()),r}rotateLeft(){const r=this.copy(null,null,Zn.RED,null,this.right.left);return this.right.copy(null,null,this.color,r,null)}rotateRight(){const r=this.copy(null,null,Zn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,r)}colorFlip(){const r=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,r,n)}checkMaxDepth(){const r=this.check();return Math.pow(2,r)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Yt();const r=this.left.check();if(r!==this.right.check())throw Yt();return r+(this.isRed()?0:1)}}Zn.EMPTY=null,Zn.RED=!0,Zn.BLACK=!1;Zn.EMPTY=new class{constructor(){this.size=0}get key(){throw Yt()}get value(){throw Yt()}get color(){throw Yt()}get left(){throw Yt()}get right(){throw Yt()}copy(r,n,t,o,c){return this}insert(r,n,t){return new Zn(r,n)}remove(r,n){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(r){this.comparator=r,this.data=new nn(this.comparator)}has(r){return this.data.get(r)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(r){return this.data.indexOf(r)}forEach(r){this.data.inorderTraversal((n,t)=>(r(n),!1))}forEachInRange(r,n){const t=this.data.getIteratorFrom(r[0]);for(;t.hasNext();){const o=t.getNext();if(this.comparator(o.key,r[1])>=0)return;n(o.key)}}forEachWhile(r,n){let t;for(t=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();t.hasNext();)if(!r(t.getNext().key))return}firstAfterOrEqual(r){const n=this.data.getIteratorFrom(r);return n.hasNext()?n.getNext().key:null}getIterator(){return new iw(this.data.getIterator())}getIteratorFrom(r){return new iw(this.data.getIteratorFrom(r))}add(r){return this.copy(this.data.remove(r).insert(r,!0))}delete(r){return this.has(r)?this.copy(this.data.remove(r)):this}isEmpty(){return this.data.isEmpty()}unionWith(r){let n=this;return n.size<r.size&&(n=r,r=this),r.forEach(t=>{n=n.add(t)}),n}isEqual(r){if(!(r instanceof ts)||this.size!==r.size)return!1;const n=this.data.getIterator(),t=r.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=t.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const r=[];return this.forEach(n=>{r.push(n)}),r}toString(){const r=[];return this.forEach(n=>r.push(n)),"SortedSet("+r.toString()+")"}copy(r){const n=new ts(this.comparator);return n.data=r,n}}class iw{constructor(r){this.iter=r}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(r){this.fields=r,r.sort(es.comparator)}static empty(){return new ki([])}unionWith(r){let n=new ts(es.comparator);for(const t of this.fields)n=n.add(t);for(const t of r)n=n.add(t);return new ki(n.toArray())}covers(r){for(const n of this.fields)if(n.isPrefixOf(r))return!0;return!1}isEqual(r){return Cu(this.fields,r.fields,(n,t)=>n.isEqual(t))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(r){this.binaryString=r}static fromBase64String(r){const n=function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new f2("Invalid base64 string: "+c):c}}(r);return new ns(n)}static fromUint8Array(r){const n=function(o){let c="";for(let l=0;l<o.length;++l)c+=String.fromCharCode(o[l]);return c}(r);return new ns(n)}[Symbol.iterator](){let r=0;return{next:()=>r<this.binaryString.length?{value:this.binaryString.charCodeAt(r++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const t=new Uint8Array(n.length);for(let o=0;o<n.length;o++)t[o]=n.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(r){return xr(this.binaryString,r.binaryString)}isEqual(r){return this.binaryString===r.binaryString}}ns.EMPTY_BYTE_STRING=new ns("");const BM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ia(s){if(Mr(!!s),typeof s=="string"){let r=0;const n=BM.exec(s);if(Mr(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),r=Number(o)}const t=new Date(s);return{seconds:Math.floor(t.getTime()/1e3),nanos:r}}return{seconds:yn(s.seconds),nanos:yn(s.nanos)}}function yn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Sl(s){return typeof s=="string"?ns.fromBase64String(s):ns.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(s){var r,n;return((n=(((r=s==null?void 0:s.mapValue)===null||r===void 0?void 0:r.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function uv(s){const r=s.mapValue.fields.__previous_value__;return lv(r)?uv(r):r}function id(s){const r=Ia(s.mapValue.fields.__local_write_time__.timestampValue);return new On(r.seconds,r.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(r,n,t,o,c,l,f,a,d){this.databaseId=r,this.appId=n,this.persistenceKey=t,this.host=o,this.ssl=c,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.longPollingOptions=a,this.useFetchStreams=d}}class od{constructor(r,n){this.projectId=r,this.database=n||"(default)"}static empty(){return new od("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(r){return r instanceof od&&r.projectId===this.projectId&&r.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function jl(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?lv(s)?4:HM(s)?9007199254740991:zM(s)?10:11:Yt()}function so(s,r){if(s===r)return!0;const n=jl(s);if(n!==jl(r))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===r.booleanValue;case 4:return id(s).isEqual(id(r));case 3:return function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const l=Ia(o.timestampValue),f=Ia(c.timestampValue);return l.seconds===f.seconds&&l.nanos===f.nanos}(s,r);case 5:return s.stringValue===r.stringValue;case 6:return function(o,c){return Sl(o.bytesValue).isEqual(Sl(c.bytesValue))}(s,r);case 7:return s.referenceValue===r.referenceValue;case 8:return function(o,c){return yn(o.geoPointValue.latitude)===yn(c.geoPointValue.latitude)&&yn(o.geoPointValue.longitude)===yn(c.geoPointValue.longitude)}(s,r);case 2:return function(o,c){if("integerValue"in o&&"integerValue"in c)return yn(o.integerValue)===yn(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const l=yn(o.doubleValue),f=yn(c.doubleValue);return l===f?wf(l)===wf(f):isNaN(l)&&isNaN(f)}return!1}(s,r);case 9:return Cu(s.arrayValue.values||[],r.arrayValue.values||[],so);case 10:case 11:return function(o,c){const l=o.mapValue.fields||{},f=c.mapValue.fields||{};if(sw(l)!==sw(f))return!1;for(const a in l)if(l.hasOwnProperty(a)&&(f[a]===void 0||!so(l[a],f[a])))return!1;return!0}(s,r);default:return Yt()}}function ad(s,r){return(s.values||[]).find(n=>so(n,r))!==void 0}function Au(s,r){if(s===r)return 0;const n=jl(s),t=jl(r);if(n!==t)return xr(n,t);switch(n){case 0:case 9007199254740991:return 0;case 1:return xr(s.booleanValue,r.booleanValue);case 2:return function(c,l){const f=yn(c.integerValue||c.doubleValue),a=yn(l.integerValue||l.doubleValue);return f<a?-1:f>a?1:f===a?0:isNaN(f)?isNaN(a)?0:-1:1}(s,r);case 3:return ow(s.timestampValue,r.timestampValue);case 4:return ow(id(s),id(r));case 5:return xr(s.stringValue,r.stringValue);case 6:return function(c,l){const f=Sl(c),a=Sl(l);return f.compareTo(a)}(s.bytesValue,r.bytesValue);case 7:return function(c,l){const f=c.split("/"),a=l.split("/");for(let d=0;d<f.length&&d<a.length;d++){const _=xr(f[d],a[d]);if(_!==0)return _}return xr(f.length,a.length)}(s.referenceValue,r.referenceValue);case 8:return function(c,l){const f=xr(yn(c.latitude),yn(l.latitude));return f!==0?f:xr(yn(c.longitude),yn(l.longitude))}(s.geoPointValue,r.geoPointValue);case 9:return aw(s.arrayValue,r.arrayValue);case 10:return function(c,l){var f,a,d,_;const w=c.fields||{},h=l.fields||{},m=(f=w.value)===null||f===void 0?void 0:f.arrayValue,b=(a=h.value)===null||a===void 0?void 0:a.arrayValue,v=xr(((d=m==null?void 0:m.values)===null||d===void 0?void 0:d.length)||0,((_=b==null?void 0:b.values)===null||_===void 0?void 0:_.length)||0);return v!==0?v:aw(m,b)}(s.mapValue,r.mapValue);case 11:return function(c,l){if(c===Ph.mapValue&&l===Ph.mapValue)return 0;if(c===Ph.mapValue)return 1;if(l===Ph.mapValue)return-1;const f=c.fields||{},a=Object.keys(f),d=l.fields||{},_=Object.keys(d);a.sort(),_.sort();for(let w=0;w<a.length&&w<_.length;++w){const h=xr(a[w],_[w]);if(h!==0)return h;const m=Au(f[a[w]],d[_[w]]);if(m!==0)return m}return xr(a.length,_.length)}(s.mapValue,r.mapValue);default:throw Yt()}}function ow(s,r){if(typeof s=="string"&&typeof r=="string"&&s.length===r.length)return xr(s,r);const n=Ia(s),t=Ia(r),o=xr(n.seconds,t.seconds);return o!==0?o:xr(n.nanos,t.nanos)}function aw(s,r){const n=s.values||[],t=r.values||[];for(let o=0;o<n.length&&o<t.length;++o){const c=Au(n[o],t[o]);if(c)return c}return xr(n.length,t.length)}function Ru(s){return ay(s)}function ay(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(n){const t=Ia(n);return`time(${t.seconds},${t.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(n){return Sl(n).toBase64()}(s.bytesValue):"referenceValue"in s?function(n){return Vt.fromName(n).toString()}(s.referenceValue):"geoPointValue"in s?function(n){return`geo(${n.latitude},${n.longitude})`}(s.geoPointValue):"arrayValue"in s?function(n){let t="[",o=!0;for(const c of n.values||[])o?o=!1:t+=",",t+=ay(c);return t+"]"}(s.arrayValue):"mapValue"in s?function(n){const t=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const l of t)c?c=!1:o+=",",o+=`${l}:${ay(n.fields[l])}`;return o+"}"}(s.mapValue):Yt()}function lw(s,r){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${r.path.canonicalString()}`}}function ly(s){return!!s&&"integerValue"in s}function cv(s){return!!s&&"arrayValue"in s}function uw(s){return!!s&&"nullValue"in s}function cw(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function rf(s){return!!s&&"mapValue"in s}function zM(s){var r,n;return((n=(((r=s==null?void 0:s.mapValue)===null||r===void 0?void 0:r.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function qc(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const r={mapValue:{fields:{}}};return Fu(s.mapValue.fields,(n,t)=>r.mapValue.fields[n]=qc(t)),r}if(s.arrayValue){const r={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)r.arrayValue.values[n]=qc(s.arrayValue.values[n]);return r}return Object.assign({},s)}function HM(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(r){this.value=r}static empty(){return new fi({mapValue:{}})}field(r){if(r.isEmpty())return this.value;{let n=this.value;for(let t=0;t<r.length-1;++t)if(n=(n.mapValue.fields||{})[r.get(t)],!rf(n))return null;return n=(n.mapValue.fields||{})[r.lastSegment()],n||null}}set(r,n){this.getFieldsMap(r.popLast())[r.lastSegment()]=qc(n)}setAll(r){let n=es.emptyPath(),t={},o=[];r.forEach((l,f)=>{if(!n.isImmediateParentOf(f)){const a=this.getFieldsMap(n);this.applyChanges(a,t,o),t={},o=[],n=f.popLast()}l?t[f.lastSegment()]=qc(l):o.push(f.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,t,o)}delete(r){const n=this.field(r.popLast());rf(n)&&n.mapValue.fields&&delete n.mapValue.fields[r.lastSegment()]}isEqual(r){return so(this.value,r.value)}getFieldsMap(r){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let t=0;t<r.length;++t){let o=n.mapValue.fields[r.get(t)];rf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[r.get(t)]=o),n=o}return n.mapValue.fields}applyChanges(r,n,t){Fu(n,(o,c)=>r[o]=c);for(const o of t)delete r[o]}clone(){return new fi(qc(this.value))}}function p2(s){const r=[];return Fu(s.fields,(n,t)=>{const o=new es([n]);if(rf(t)){const c=p2(t.mapValue).fields;if(c.length===0)r.push(o);else for(const l of c)r.push(o.child(l))}else r.push(o)}),new ki(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(r,n,t,o,c,l,f){this.key=r,this.documentType=n,this.version=t,this.readTime=o,this.createTime=c,this.data=l,this.documentState=f}static newInvalidDocument(r){return new fs(r,0,Xt.min(),Xt.min(),Xt.min(),fi.empty(),0)}static newFoundDocument(r,n,t,o){return new fs(r,1,n,Xt.min(),t,o,0)}static newNoDocument(r,n){return new fs(r,2,n,Xt.min(),Xt.min(),fi.empty(),0)}static newUnknownDocument(r,n){return new fs(r,3,n,Xt.min(),Xt.min(),fi.empty(),2)}convertToFoundDocument(r,n){return!this.createTime.isEqual(Xt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=r),this.version=r,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(r){return this.version=r,this.documentType=2,this.data=fi.empty(),this.documentState=0,this}convertToUnknownDocument(r){return this.version=r,this.documentType=3,this.data=fi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xt.min(),this}setReadTime(r){return this.readTime=r,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(r){return r instanceof fs&&this.key.isEqual(r.key)&&this.version.isEqual(r.version)&&this.documentType===r.documentType&&this.documentState===r.documentState&&this.data.isEqual(r.data)}mutableCopy(){return new fs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(r,n){this.position=r,this.inclusive=n}}function dw(s,r,n){let t=0;for(let o=0;o<s.position.length;o++){const c=r[o],l=s.position[o];if(c.field.isKeyField()?t=Vt.comparator(Vt.fromName(l.referenceValue),n.key):t=Au(l,n.data.field(c.field)),c.dir==="desc"&&(t*=-1),t!==0)break}return t}function hw(s,r){if(s===null)return r===null;if(r===null||s.inclusive!==r.inclusive||s.position.length!==r.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!so(s.position[n],r.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(r,n="asc"){this.field=r,this.dir=n}}function qM(s,r){return s.dir===r.dir&&s.field.isEqual(r.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{}class Cn extends m2{constructor(r,n,t){super(),this.field=r,this.op=n,this.value=t}static create(r,n,t){return r.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(r,n,t):new YM(r,n,t):n==="array-contains"?new KM(r,t):n==="in"?new QM(r,t):n==="not-in"?new ZM(r,t):n==="array-contains-any"?new JM(r,t):new Cn(r,n,t)}static createKeyFieldInFilter(r,n,t){return n==="in"?new $M(r,t):new XM(r,t)}matches(r){const n=r.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Au(n,this.value)):n!==null&&jl(this.value)===jl(n)&&this.matchesComparison(Au(n,this.value))}matchesComparison(r){switch(this.op){case"<":return r<0;case"<=":return r<=0;case"==":return r===0;case"!=":return r!==0;case">":return r>0;case">=":return r>=0;default:return Yt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Di extends m2{constructor(r,n){super(),this.filters=r,this.op=n,this.ae=null}static create(r,n){return new Di(r,n)}matches(r){return g2(this)?this.filters.find(n=>!n.matches(r))===void 0:this.filters.find(n=>n.matches(r))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((r,n)=>r.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function g2(s){return s.op==="and"}function y2(s){return WM(s)&&g2(s)}function WM(s){for(const r of s.filters)if(r instanceof Di)return!1;return!0}function uy(s){if(s instanceof Cn)return s.field.canonicalString()+s.op.toString()+Ru(s.value);if(y2(s))return s.filters.map(r=>uy(r)).join(",");{const r=s.filters.map(n=>uy(n)).join(",");return`${s.op}(${r})`}}function v2(s,r){return s instanceof Cn?function(t,o){return o instanceof Cn&&t.op===o.op&&t.field.isEqual(o.field)&&so(t.value,o.value)}(s,r):s instanceof Di?function(t,o){return o instanceof Di&&t.op===o.op&&t.filters.length===o.filters.length?t.filters.reduce((c,l,f)=>c&&v2(l,o.filters[f]),!0):!1}(s,r):void Yt()}function b2(s){return s instanceof Cn?function(n){return`${n.field.canonicalString()} ${n.op} ${Ru(n.value)}`}(s):s instanceof Di?function(n){return n.op.toString()+" {"+n.getFilters().map(b2).join(" ,")+"}"}(s):"Filter"}class YM extends Cn{constructor(r,n,t){super(r,n,t),this.key=Vt.fromName(t.referenceValue)}matches(r){const n=Vt.comparator(r.key,this.key);return this.matchesComparison(n)}}class $M extends Cn{constructor(r,n){super(r,"in",n),this.keys=_2("in",n)}matches(r){return this.keys.some(n=>n.isEqual(r.key))}}class XM extends Cn{constructor(r,n){super(r,"not-in",n),this.keys=_2("not-in",n)}matches(r){return!this.keys.some(n=>n.isEqual(r.key))}}function _2(s,r){var n;return(((n=r.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(t=>Vt.fromName(t.referenceValue))}class KM extends Cn{constructor(r,n){super(r,"array-contains",n)}matches(r){const n=r.data.field(this.field);return cv(n)&&ad(n.arrayValue,this.value)}}class QM extends Cn{constructor(r,n){super(r,"in",n)}matches(r){const n=r.data.field(this.field);return n!==null&&ad(this.value.arrayValue,n)}}class ZM extends Cn{constructor(r,n){super(r,"not-in",n)}matches(r){if(ad(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=r.data.field(this.field);return n!==null&&!ad(this.value.arrayValue,n)}}class JM extends Cn{constructor(r,n){super(r,"array-contains-any",n)}matches(r){const n=r.data.field(this.field);return!(!cv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(t=>ad(this.value.arrayValue,t))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(r,n=null,t=[],o=[],c=null,l=null,f=null){this.path=r,this.collectionGroup=n,this.orderBy=t,this.filters=o,this.limit=c,this.startAt=l,this.endAt=f,this.ue=null}}function fw(s,r=null,n=[],t=[],o=null,c=null,l=null){return new eP(s,r,n,t,o,c,l)}function dv(s){const r=Kt(s);if(r.ue===null){let n=r.path.canonicalString();r.collectionGroup!==null&&(n+="|cg:"+r.collectionGroup),n+="|f:",n+=r.filters.map(t=>uy(t)).join(","),n+="|ob:",n+=r.orderBy.map(t=>function(c){return c.field.canonicalString()+c.dir}(t)).join(","),Qf(r.limit)||(n+="|l:",n+=r.limit),r.startAt&&(n+="|lb:",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(t=>Ru(t)).join(",")),r.endAt&&(n+="|ub:",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(t=>Ru(t)).join(",")),r.ue=n}return r.ue}function hv(s,r){if(s.limit!==r.limit||s.orderBy.length!==r.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!qM(s.orderBy[n],r.orderBy[n]))return!1;if(s.filters.length!==r.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!v2(s.filters[n],r.filters[n]))return!1;return s.collectionGroup===r.collectionGroup&&!!s.path.isEqual(r.path)&&!!hw(s.startAt,r.startAt)&&hw(s.endAt,r.endAt)}function cy(s){return Vt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(r,n=null,t=[],o=[],c=null,l="F",f=null,a=null){this.path=r,this.collectionGroup=n,this.explicitOrderBy=t,this.filters=o,this.limit=c,this.limitType=l,this.startAt=f,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function tP(s,r,n,t,o,c,l,f){return new jd(s,r,n,t,o,c,l,f)}function fv(s){return new jd(s)}function pw(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function w2(s){return s.collectionGroup!==null}function Wc(s){const r=Kt(s);if(r.ce===null){r.ce=[];const n=new Set;for(const c of r.explicitOrderBy)r.ce.push(c),n.add(c.field.canonicalString());const t=r.explicitOrderBy.length>0?r.explicitOrderBy[r.explicitOrderBy.length-1].dir:"asc";(function(l){let f=new ts(es.comparator);return l.filters.forEach(a=>{a.getFlattenedFilters().forEach(d=>{d.isInequality()&&(f=f.add(d.field))})}),f})(r).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||r.ce.push(new Sf(c,t))}),n.has(es.keyField().canonicalString())||r.ce.push(new Sf(es.keyField(),t))}return r.ce}function eo(s){const r=Kt(s);return r.le||(r.le=rP(r,Wc(s))),r.le}function rP(s,r){if(s.limitType==="F")return fw(s.path,s.collectionGroup,r,s.filters,s.limit,s.startAt,s.endAt);{r=r.map(o=>{const c=o.dir==="desc"?"asc":"desc";return new Sf(o.field,c)});const n=s.endAt?new xf(s.endAt.position,s.endAt.inclusive):null,t=s.startAt?new xf(s.startAt.position,s.startAt.inclusive):null;return fw(s.path,s.collectionGroup,r,s.filters,s.limit,n,t)}}function dy(s,r){const n=s.filters.concat([r]);return new jd(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function hy(s,r,n){return new jd(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),r,n,s.startAt,s.endAt)}function Zf(s,r){return hv(eo(s),eo(r))&&s.limitType===r.limitType}function x2(s){return`${dv(eo(s))}|lt:${s.limitType}`}function yu(s){return`Query(target=${function(n){let t=n.path.canonicalString();return n.collectionGroup!==null&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(o=>b2(o)).join(", ")}]`),Qf(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(o=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(o)).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(o=>Ru(o)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(o=>Ru(o)).join(",")),`Target(${t})`}(eo(s))}; limitType=${s.limitType})`}function Jf(s,r){return r.isFoundDocument()&&function(t,o){const c=o.key.path;return t.collectionGroup!==null?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(c):Vt.isDocumentKey(t.path)?t.path.isEqual(c):t.path.isImmediateParentOf(c)}(s,r)&&function(t,o){for(const c of Wc(t))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0}(s,r)&&function(t,o){for(const c of t.filters)if(!c.matches(o))return!1;return!0}(s,r)&&function(t,o){return!(t.startAt&&!function(l,f,a){const d=dw(l,f,a);return l.inclusive?d<=0:d<0}(t.startAt,Wc(t),o)||t.endAt&&!function(l,f,a){const d=dw(l,f,a);return l.inclusive?d>=0:d>0}(t.endAt,Wc(t),o))}(s,r)}function nP(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function S2(s){return(r,n)=>{let t=!1;for(const o of Wc(s)){const c=sP(o,r,n);if(c!==0)return c;t=t||o.field.isKeyField()}return 0}}function sP(s,r,n){const t=s.field.isKeyField()?Vt.comparator(r.key,n.key):function(c,l,f){const a=l.data.field(c),d=f.data.field(c);return a!==null&&d!==null?Au(a,d):Yt()}(s.field,r,n);switch(s.dir){case"asc":return t;case"desc":return-1*t;default:return Yt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(r,n){this.mapKeyFn=r,this.equalsFn=n,this.inner={},this.innerSize=0}get(r){const n=this.mapKeyFn(r),t=this.inner[n];if(t!==void 0){for(const[o,c]of t)if(this.equalsFn(o,r))return c}}has(r){return this.get(r)!==void 0}set(r,n){const t=this.mapKeyFn(r),o=this.inner[t];if(o===void 0)return this.inner[t]=[[r,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],r))return void(o[c]=[r,n]);o.push([r,n]),this.innerSize++}delete(r){const n=this.mapKeyFn(r),t=this.inner[n];if(t===void 0)return!1;for(let o=0;o<t.length;o++)if(this.equalsFn(t[o][0],r))return t.length===1?delete this.inner[n]:t.splice(o,1),this.innerSize--,!0;return!1}forEach(r){Fu(this.inner,(n,t)=>{for(const[o,c]of t)r(o,c)})}isEmpty(){return h2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=new nn(Vt.comparator);function qo(){return iP}const j2=new nn(Vt.comparator);function Vc(...s){let r=j2;for(const n of s)r=r.insert(n.key,n);return r}function E2(s){let r=j2;return s.forEach((n,t)=>r=r.insert(n,t.overlayedDocument)),r}function gl(){return Yc()}function T2(){return Yc()}function Yc(){return new Vu(s=>s.toString(),(s,r)=>s.isEqual(r))}const oP=new nn(Vt.comparator),aP=new ts(Vt.comparator);function lr(...s){let r=aP;for(const n of s)r=r.add(n);return r}const lP=new ts(xr);function uP(){return lP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(s,r){if(s.useProto3Json){if(isNaN(r))return{doubleValue:"NaN"};if(r===1/0)return{doubleValue:"Infinity"};if(r===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wf(r)?"-0":r}}function C2(s){return{integerValue:""+s}}function cP(s,r){return VM(r)?C2(r):pv(s,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(){this._=void 0}}function dP(s,r,n){return s instanceof jf?function(o,c){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&lv(c)&&(c=uv(c)),c&&(l.fields.__previous_value__=c),{mapValue:l}}(n,r):s instanceof ld?R2(s,r):s instanceof ud?O2(s,r):function(o,c){const l=A2(o,c),f=mw(l)+mw(o.Pe);return ly(l)&&ly(o.Pe)?C2(f):pv(o.serializer,f)}(s,r)}function hP(s,r,n){return s instanceof ld?R2(s,r):s instanceof ud?O2(s,r):n}function A2(s,r){return s instanceof Ef?function(t){return ly(t)||function(c){return!!c&&"doubleValue"in c}(t)}(r)?r:{integerValue:0}:null}class jf extends ep{}class ld extends ep{constructor(r){super(),this.elements=r}}function R2(s,r){const n=I2(r);for(const t of s.elements)n.some(o=>so(o,t))||n.push(t);return{arrayValue:{values:n}}}class ud extends ep{constructor(r){super(),this.elements=r}}function O2(s,r){let n=I2(r);for(const t of s.elements)n=n.filter(o=>!so(o,t));return{arrayValue:{values:n}}}class Ef extends ep{constructor(r,n){super(),this.serializer=r,this.Pe=n}}function mw(s){return yn(s.integerValue||s.doubleValue)}function I2(s){return cv(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function fP(s,r){return s.field.isEqual(r.field)&&function(t,o){return t instanceof ld&&o instanceof ld||t instanceof ud&&o instanceof ud?Cu(t.elements,o.elements,so):t instanceof Ef&&o instanceof Ef?so(t.Pe,o.Pe):t instanceof jf&&o instanceof jf}(s.transform,r.transform)}class pP{constructor(r,n){this.version=r,this.transformResults=n}}class to{constructor(r,n){this.updateTime=r,this.exists=n}static none(){return new to}static exists(r){return new to(void 0,r)}static updateTime(r){return new to(r)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(r){return this.exists===r.exists&&(this.updateTime?!!r.updateTime&&this.updateTime.isEqual(r.updateTime):!r.updateTime)}}function nf(s,r){return s.updateTime!==void 0?r.isFoundDocument()&&r.version.isEqual(s.updateTime):s.exists===void 0||s.exists===r.isFoundDocument()}class tp{}function k2(s,r){if(!s.hasLocalMutations||r&&r.fields.length===0)return null;if(r===null)return s.isNoDocument()?new P2(s.key,to.none()):new Ed(s.key,s.data,to.none());{const n=s.data,t=fi.empty();let o=new ts(es.comparator);for(let c of r.fields)if(!o.has(c)){let l=n.field(c);l===null&&c.length>1&&(c=c.popLast(),l=n.field(c)),l===null?t.delete(c):t.set(c,l),o=o.add(c)}return new Pl(s.key,t,new ki(o.toArray()),to.none())}}function mP(s,r,n){s instanceof Ed?function(o,c,l){const f=o.value.clone(),a=yw(o.fieldTransforms,c,l.transformResults);f.setAll(a),c.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(s,r,n):s instanceof Pl?function(o,c,l){if(!nf(o.precondition,c))return void c.convertToUnknownDocument(l.version);const f=yw(o.fieldTransforms,c,l.transformResults),a=c.data;a.setAll(M2(o)),a.setAll(f),c.convertToFoundDocument(l.version,a).setHasCommittedMutations()}(s,r,n):function(o,c,l){c.convertToNoDocument(l.version).setHasCommittedMutations()}(0,r,n)}function $c(s,r,n,t){return s instanceof Ed?function(c,l,f,a){if(!nf(c.precondition,l))return f;const d=c.value.clone(),_=vw(c.fieldTransforms,a,l);return d.setAll(_),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null}(s,r,n,t):s instanceof Pl?function(c,l,f,a){if(!nf(c.precondition,l))return f;const d=vw(c.fieldTransforms,a,l),_=l.data;return _.setAll(M2(c)),_.setAll(d),l.convertToFoundDocument(l.version,_).setHasLocalMutations(),f===null?null:f.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(w=>w.field))}(s,r,n,t):function(c,l,f){return nf(c.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):f}(s,r,n)}function gP(s,r){let n=null;for(const t of s.fieldTransforms){const o=r.data.field(t.field),c=A2(t.transform,o||null);c!=null&&(n===null&&(n=fi.empty()),n.set(t.field,c))}return n||null}function gw(s,r){return s.type===r.type&&!!s.key.isEqual(r.key)&&!!s.precondition.isEqual(r.precondition)&&!!function(t,o){return t===void 0&&o===void 0||!(!t||!o)&&Cu(t,o,(c,l)=>fP(c,l))}(s.fieldTransforms,r.fieldTransforms)&&(s.type===0?s.value.isEqual(r.value):s.type!==1||s.data.isEqual(r.data)&&s.fieldMask.isEqual(r.fieldMask))}class Ed extends tp{constructor(r,n,t,o=[]){super(),this.key=r,this.value=n,this.precondition=t,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Pl extends tp{constructor(r,n,t,o,c=[]){super(),this.key=r,this.data=n,this.fieldMask=t,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function M2(s){const r=new Map;return s.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const t=s.data.field(n);r.set(n,t)}}),r}function yw(s,r,n){const t=new Map;Mr(s.length===n.length);for(let o=0;o<n.length;o++){const c=s[o],l=c.transform,f=r.data.field(c.field);t.set(c.field,hP(l,f,n[o]))}return t}function vw(s,r,n){const t=new Map;for(const o of s){const c=o.transform,l=n.data.field(o.field);t.set(o.field,dP(c,l,r))}return t}class P2 extends tp{constructor(r,n){super(),this.key=r,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yP extends tp{constructor(r,n){super(),this.key=r,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(r,n,t,o){this.batchId=r,this.localWriteTime=n,this.baseMutations=t,this.mutations=o}applyToRemoteDocument(r,n){const t=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(r.key)&&mP(c,r,t[o])}}applyToLocalView(r,n){for(const t of this.baseMutations)t.key.isEqual(r.key)&&(n=$c(t,r,n,this.localWriteTime));for(const t of this.mutations)t.key.isEqual(r.key)&&(n=$c(t,r,n,this.localWriteTime));return n}applyToLocalDocumentSet(r,n){const t=T2();return this.mutations.forEach(o=>{const c=r.get(o.key),l=c.overlayedDocument;let f=this.applyToLocalView(l,c.mutatedFields);f=n.has(o.key)?null:f;const a=k2(l,f);a!==null&&t.set(o.key,a),l.isValidDocument()||l.convertToNoDocument(Xt.min())}),t}keys(){return this.mutations.reduce((r,n)=>r.add(n.key),lr())}isEqual(r){return this.batchId===r.batchId&&Cu(this.mutations,r.mutations,(n,t)=>gw(n,t))&&Cu(this.baseMutations,r.baseMutations,(n,t)=>gw(n,t))}}class mv{constructor(r,n,t,o){this.batch=r,this.commitVersion=n,this.mutationResults=t,this.docVersions=o}static from(r,n,t){Mr(r.mutations.length===t.length);let o=function(){return oP}();const c=r.mutations;for(let l=0;l<c.length;l++)o=o.insert(c[l].key,t[l].version);return new mv(r,n,t,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(r,n){this.largestBatchId=r,this.mutation=n}getKey(){return this.mutation.key}isEqual(r){return r!==null&&this.mutation===r.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(r,n){this.count=r,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jn,pr;function wP(s){switch(s){default:return Yt();case ht.CANCELLED:case ht.UNKNOWN:case ht.DEADLINE_EXCEEDED:case ht.RESOURCE_EXHAUSTED:case ht.INTERNAL:case ht.UNAVAILABLE:case ht.UNAUTHENTICATED:return!1;case ht.INVALID_ARGUMENT:case ht.NOT_FOUND:case ht.ALREADY_EXISTS:case ht.PERMISSION_DENIED:case ht.FAILED_PRECONDITION:case ht.ABORTED:case ht.OUT_OF_RANGE:case ht.UNIMPLEMENTED:case ht.DATA_LOSS:return!0}}function D2(s){if(s===void 0)return Ho("GRPC error has no .code"),ht.UNKNOWN;switch(s){case jn.OK:return ht.OK;case jn.CANCELLED:return ht.CANCELLED;case jn.UNKNOWN:return ht.UNKNOWN;case jn.DEADLINE_EXCEEDED:return ht.DEADLINE_EXCEEDED;case jn.RESOURCE_EXHAUSTED:return ht.RESOURCE_EXHAUSTED;case jn.INTERNAL:return ht.INTERNAL;case jn.UNAVAILABLE:return ht.UNAVAILABLE;case jn.UNAUTHENTICATED:return ht.UNAUTHENTICATED;case jn.INVALID_ARGUMENT:return ht.INVALID_ARGUMENT;case jn.NOT_FOUND:return ht.NOT_FOUND;case jn.ALREADY_EXISTS:return ht.ALREADY_EXISTS;case jn.PERMISSION_DENIED:return ht.PERMISSION_DENIED;case jn.FAILED_PRECONDITION:return ht.FAILED_PRECONDITION;case jn.ABORTED:return ht.ABORTED;case jn.OUT_OF_RANGE:return ht.OUT_OF_RANGE;case jn.UNIMPLEMENTED:return ht.UNIMPLEMENTED;case jn.DATA_LOSS:return ht.DATA_LOSS;default:return Yt()}}(pr=jn||(jn={}))[pr.OK=0]="OK",pr[pr.CANCELLED=1]="CANCELLED",pr[pr.UNKNOWN=2]="UNKNOWN",pr[pr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pr[pr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pr[pr.NOT_FOUND=5]="NOT_FOUND",pr[pr.ALREADY_EXISTS=6]="ALREADY_EXISTS",pr[pr.PERMISSION_DENIED=7]="PERMISSION_DENIED",pr[pr.UNAUTHENTICATED=16]="UNAUTHENTICATED",pr[pr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pr[pr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pr[pr.ABORTED=10]="ABORTED",pr[pr.OUT_OF_RANGE=11]="OUT_OF_RANGE",pr[pr.UNIMPLEMENTED=12]="UNIMPLEMENTED",pr[pr.INTERNAL=13]="INTERNAL",pr[pr.UNAVAILABLE=14]="UNAVAILABLE",pr[pr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP=new bl([4294967295,4294967295],0);function bw(s){const r=xP().encode(s),n=new s2;return n.update(r),new Uint8Array(n.digest())}function _w(s){const r=new DataView(s.buffer),n=r.getUint32(0,!0),t=r.getUint32(4,!0),o=r.getUint32(8,!0),c=r.getUint32(12,!0);return[new bl([n,t],0),new bl([o,c],0)]}class gv{constructor(r,n,t){if(this.bitmap=r,this.padding=n,this.hashCount=t,n<0||n>=8)throw new Bc(`Invalid padding: ${n}`);if(t<0)throw new Bc(`Invalid hash count: ${t}`);if(r.length>0&&this.hashCount===0)throw new Bc(`Invalid hash count: ${t}`);if(r.length===0&&n!==0)throw new Bc(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*r.length-n,this.Te=bl.fromNumber(this.Ie)}Ee(r,n,t){let o=r.add(n.multiply(bl.fromNumber(t)));return o.compare(SP)===1&&(o=new bl([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(r){return(this.bitmap[Math.floor(r/8)]&1<<r%8)!=0}mightContain(r){if(this.Ie===0)return!1;const n=bw(r),[t,o]=_w(n);for(let c=0;c<this.hashCount;c++){const l=this.Ee(t,o,c);if(!this.de(l))return!1}return!0}static create(r,n,t){const o=r%8==0?0:8-r%8,c=new Uint8Array(Math.ceil(r/8)),l=new gv(c,o,n);return t.forEach(f=>l.insert(f)),l}insert(r){if(this.Ie===0)return;const n=bw(r),[t,o]=_w(n);for(let c=0;c<this.hashCount;c++){const l=this.Ee(t,o,c);this.Ae(l)}}Ae(r){const n=Math.floor(r/8),t=r%8;this.bitmap[n]|=1<<t}}class Bc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(r,n,t,o,c){this.snapshotVersion=r,this.targetChanges=n,this.targetMismatches=t,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(r,n,t){const o=new Map;return o.set(r,Td.createSynthesizedTargetChangeForCurrentChange(r,n,t)),new rp(Xt.min(),o,new nn(xr),qo(),lr())}}class Td{constructor(r,n,t,o,c){this.resumeToken=r,this.current=n,this.addedDocuments=t,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(r,n,t){return new Td(t,n,lr(),lr(),lr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(r,n,t,o){this.Re=r,this.removedTargetIds=n,this.key=t,this.Ve=o}}class N2{constructor(r,n){this.targetId=r,this.me=n}}class L2{constructor(r,n,t=ns.EMPTY_BYTE_STRING,o=null){this.state=r,this.targetIds=n,this.resumeToken=t,this.cause=o}}class ww{constructor(){this.fe=0,this.ge=Sw(),this.pe=ns.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(r){r.approximateByteSize()>0&&(this.we=!0,this.pe=r)}ve(){let r=lr(),n=lr(),t=lr();return this.ge.forEach((o,c)=>{switch(c){case 0:r=r.add(o);break;case 2:n=n.add(o);break;case 1:t=t.add(o);break;default:Yt()}}),new Td(this.pe,this.ye,r,n,t)}Ce(){this.we=!1,this.ge=Sw()}Fe(r,n){this.we=!0,this.ge=this.ge.insert(r,n)}Me(r){this.we=!0,this.ge=this.ge.remove(r)}xe(){this.fe+=1}Oe(){this.fe-=1,Mr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class jP{constructor(r){this.Le=r,this.Be=new Map,this.ke=qo(),this.qe=xw(),this.Qe=new nn(xr)}Ke(r){for(const n of r.Re)r.Ve&&r.Ve.isFoundDocument()?this.$e(n,r.Ve):this.Ue(n,r.key,r.Ve);for(const n of r.removedTargetIds)this.Ue(n,r.key,r.Ve)}We(r){this.forEachTarget(r,n=>{const t=this.Ge(n);switch(r.state){case 0:this.ze(n)&&t.De(r.resumeToken);break;case 1:t.Oe(),t.Se||t.Ce(),t.De(r.resumeToken);break;case 2:t.Oe(),t.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(t.Ne(),t.De(r.resumeToken));break;case 4:this.ze(n)&&(this.je(n),t.De(r.resumeToken));break;default:Yt()}})}forEachTarget(r,n){r.targetIds.length>0?r.targetIds.forEach(n):this.Be.forEach((t,o)=>{this.ze(o)&&n(o)})}He(r){const n=r.targetId,t=r.me.count,o=this.Je(n);if(o){const c=o.target;if(cy(c))if(t===0){const l=new Vt(c.path);this.Ue(n,l,fs.newNoDocument(l,Xt.min()))}else Mr(t===1);else{const l=this.Ye(n);if(l!==t){const f=this.Ze(r),a=f?this.Xe(f,r,l):1;if(a!==0){this.je(n);const d=a===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(r){const n=r.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:t="",padding:o=0},hashCount:c=0}=n;let l,f;try{l=Sl(t).toUint8Array()}catch(a){if(a instanceof f2)return Tu("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{f=new gv(l,o,c)}catch(a){return Tu(a instanceof Bc?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return f.Ie===0?null:f}Xe(r,n,t){return n.me.count===t-this.nt(r,n.targetId)?0:2}nt(r,n){const t=this.Le.getRemoteKeysForTarget(n);let o=0;return t.forEach(c=>{const l=this.Le.tt(),f=`projects/${l.projectId}/databases/${l.database}/documents/${c.path.canonicalString()}`;r.mightContain(f)||(this.Ue(n,c,null),o++)}),o}rt(r){const n=new Map;this.Be.forEach((c,l)=>{const f=this.Je(l);if(f){if(c.current&&cy(f.target)){const a=new Vt(f.target.path);this.ke.get(a)!==null||this.it(l,a)||this.Ue(l,a,fs.newNoDocument(a,r))}c.be&&(n.set(l,c.ve()),c.Ce())}});let t=lr();this.qe.forEach((c,l)=>{let f=!0;l.forEachWhile(a=>{const d=this.Je(a);return!d||d.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(t=t.add(c))}),this.ke.forEach((c,l)=>l.setReadTime(r));const o=new rp(r,n,this.Qe,this.ke,t);return this.ke=qo(),this.qe=xw(),this.Qe=new nn(xr),o}$e(r,n){if(!this.ze(r))return;const t=this.it(r,n.key)?2:0;this.Ge(r).Fe(n.key,t),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(r))}Ue(r,n,t){if(!this.ze(r))return;const o=this.Ge(r);this.it(r,n)?o.Fe(n,1):o.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(r)),t&&(this.ke=this.ke.insert(n,t))}removeTarget(r){this.Be.delete(r)}Ye(r){const n=this.Ge(r).ve();return this.Le.getRemoteKeysForTarget(r).size+n.addedDocuments.size-n.removedDocuments.size}xe(r){this.Ge(r).xe()}Ge(r){let n=this.Be.get(r);return n||(n=new ww,this.Be.set(r,n)),n}st(r){let n=this.qe.get(r);return n||(n=new ts(xr),this.qe=this.qe.insert(r,n)),n}ze(r){const n=this.Je(r)!==null;return n||It("WatchChangeAggregator","Detected inactive target",r),n}Je(r){const n=this.Be.get(r);return n&&n.Se?null:this.Le.ot(r)}je(r){this.Be.set(r,new ww),this.Le.getRemoteKeysForTarget(r).forEach(n=>{this.Ue(r,n,null)})}it(r,n){return this.Le.getRemoteKeysForTarget(r).has(n)}}function xw(){return new nn(Vt.comparator)}function Sw(){return new nn(Vt.comparator)}const EP={asc:"ASCENDING",desc:"DESCENDING"},TP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CP={and:"AND",or:"OR"};class AP{constructor(r,n){this.databaseId=r,this.useProto3Json=n}}function fy(s,r){return s.useProto3Json||Qf(r)?r:{value:r}}function Tf(s,r){return s.useProto3Json?`${new Date(1e3*r.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+r.nanoseconds).slice(-9)}Z`:{seconds:""+r.seconds,nanos:r.nanoseconds}}function U2(s,r){return s.useProto3Json?r.toBase64():r.toUint8Array()}function RP(s,r){return Tf(s,r.toTimestamp())}function ro(s){return Mr(!!s),Xt.fromTimestamp(function(n){const t=Ia(n);return new On(t.seconds,t.nanos)}(s))}function yv(s,r){return py(s,r).canonicalString()}function py(s,r){const n=function(o){return new Kr(["projects",o.projectId,"databases",o.database])}(s).child("documents");return r===void 0?n:n.child(r)}function F2(s){const r=Kr.fromString(s);return Mr(H2(r)),r}function my(s,r){return yv(s.databaseId,r.path)}function wg(s,r){const n=F2(r);if(n.get(1)!==s.databaseId.projectId)throw new Ct(ht.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new Ct(ht.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Vt(B2(n))}function V2(s,r){return yv(s.databaseId,r)}function OP(s){const r=F2(s);return r.length===4?Kr.emptyPath():B2(r)}function gy(s){return new Kr(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function B2(s){return Mr(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function jw(s,r,n){return{name:my(s,r),fields:n.value.mapValue.fields}}function IP(s,r){let n;if("targetChange"in r){r.targetChange;const t=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Yt()}(r.targetChange.targetChangeType||"NO_CHANGE"),o=r.targetChange.targetIds||[],c=function(d,_){return d.useProto3Json?(Mr(_===void 0||typeof _=="string"),ns.fromBase64String(_||"")):(Mr(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),ns.fromUint8Array(_||new Uint8Array))}(s,r.targetChange.resumeToken),l=r.targetChange.cause,f=l&&function(d){const _=d.code===void 0?ht.UNKNOWN:D2(d.code);return new Ct(_,d.message||"")}(l);n=new L2(t,o,c,f||null)}else if("documentChange"in r){r.documentChange;const t=r.documentChange;t.document,t.document.name,t.document.updateTime;const o=wg(s,t.document.name),c=ro(t.document.updateTime),l=t.document.createTime?ro(t.document.createTime):Xt.min(),f=new fi({mapValue:{fields:t.document.fields}}),a=fs.newFoundDocument(o,c,l,f),d=t.targetIds||[],_=t.removedTargetIds||[];n=new sf(d,_,a.key,a)}else if("documentDelete"in r){r.documentDelete;const t=r.documentDelete;t.document;const o=wg(s,t.document),c=t.readTime?ro(t.readTime):Xt.min(),l=fs.newNoDocument(o,c),f=t.removedTargetIds||[];n=new sf([],f,l.key,l)}else if("documentRemove"in r){r.documentRemove;const t=r.documentRemove;t.document;const o=wg(s,t.document),c=t.removedTargetIds||[];n=new sf([],c,o,null)}else{if(!("filter"in r))return Yt();{r.filter;const t=r.filter;t.targetId;const{count:o=0,unchangedNames:c}=t,l=new _P(o,c),f=t.targetId;n=new N2(f,l)}}return n}function kP(s,r){let n;if(r instanceof Ed)n={update:jw(s,r.key,r.value)};else if(r instanceof P2)n={delete:my(s,r.key)};else if(r instanceof Pl)n={update:jw(s,r.key,r.data),updateMask:BP(r.fieldMask)};else{if(!(r instanceof yP))return Yt();n={verify:my(s,r.key)}}return r.fieldTransforms.length>0&&(n.updateTransforms=r.fieldTransforms.map(t=>function(c,l){const f=l.transform;if(f instanceof jf)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof ld)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof ud)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Ef)return{fieldPath:l.field.canonicalString(),increment:f.Pe};throw Yt()}(0,t))),r.precondition.isNone||(n.currentDocument=function(o,c){return c.updateTime!==void 0?{updateTime:RP(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Yt()}(s,r.precondition)),n}function MP(s,r){return s&&s.length>0?(Mr(r!==void 0),s.map(n=>function(o,c){let l=o.updateTime?ro(o.updateTime):ro(c);return l.isEqual(Xt.min())&&(l=ro(c)),new pP(l,o.transformResults||[])}(n,r))):[]}function PP(s,r){return{documents:[V2(s,r.path)]}}function DP(s,r){const n={structuredQuery:{}},t=r.path;let o;r.collectionGroup!==null?(o=t,n.structuredQuery.from=[{collectionId:r.collectionGroup,allDescendants:!0}]):(o=t.popLast(),n.structuredQuery.from=[{collectionId:t.lastSegment()}]),n.parent=V2(s,o);const c=function(d){if(d.length!==0)return z2(Di.create(d,"and"))}(r.filters);c&&(n.structuredQuery.where=c);const l=function(d){if(d.length!==0)return d.map(_=>function(h){return{field:vu(h.field),direction:UP(h.dir)}}(_))}(r.orderBy);l&&(n.structuredQuery.orderBy=l);const f=fy(s,r.limit);return f!==null&&(n.structuredQuery.limit=f),r.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(r.startAt)),r.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(r.endAt)),{_t:n,parent:o}}function NP(s){let r=OP(s.parent);const n=s.structuredQuery,t=n.from?n.from.length:0;let o=null;if(t>0){Mr(t===1);const _=n.from[0];_.allDescendants?o=_.collectionId:r=r.child(_.collectionId)}let c=[];n.where&&(c=function(w){const h=G2(w);return h instanceof Di&&y2(h)?h.getFilters():[h]}(n.where));let l=[];n.orderBy&&(l=function(w){return w.map(h=>function(b){return new Sf(bu(b.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(h))}(n.orderBy));let f=null;n.limit&&(f=function(w){let h;return h=typeof w=="object"?w.value:w,Qf(h)?null:h}(n.limit));let a=null;n.startAt&&(a=function(w){const h=!!w.before,m=w.values||[];return new xf(m,h)}(n.startAt));let d=null;return n.endAt&&(d=function(w){const h=!w.before,m=w.values||[];return new xf(m,h)}(n.endAt)),tP(r,o,l,c,f,"F",a,d)}function LP(s,r){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Yt()}}(r.purpose);return n==null?null:{"goog-listen-tags":n}}function G2(s){return s.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const t=bu(n.unaryFilter.field);return Cn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const o=bu(n.unaryFilter.field);return Cn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=bu(n.unaryFilter.field);return Cn.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=bu(n.unaryFilter.field);return Cn.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Yt()}}(s):s.fieldFilter!==void 0?function(n){return Cn.create(bu(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Yt()}}(n.fieldFilter.op),n.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(n){return Di.create(n.compositeFilter.filters.map(t=>G2(t)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Yt()}}(n.compositeFilter.op))}(s):Yt()}function UP(s){return EP[s]}function FP(s){return TP[s]}function VP(s){return CP[s]}function vu(s){return{fieldPath:s.canonicalString()}}function bu(s){return es.fromServerFormat(s.fieldPath)}function z2(s){return s instanceof Cn?function(n){if(n.op==="=="){if(cw(n.value))return{unaryFilter:{field:vu(n.field),op:"IS_NAN"}};if(uw(n.value))return{unaryFilter:{field:vu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(cw(n.value))return{unaryFilter:{field:vu(n.field),op:"IS_NOT_NAN"}};if(uw(n.value))return{unaryFilter:{field:vu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vu(n.field),op:FP(n.op),value:n.value}}}(s):s instanceof Di?function(n){const t=n.getFilters().map(o=>z2(o));return t.length===1?t[0]:{compositeFilter:{op:VP(n.op),filters:t}}}(s):Yt()}function BP(s){const r=[];return s.fields.forEach(n=>r.push(n.canonicalString())),{fieldPaths:r}}function H2(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(r,n,t,o,c=Xt.min(),l=Xt.min(),f=ns.EMPTY_BYTE_STRING,a=null){this.target=r,this.targetId=n,this.purpose=t,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f,this.expectedCount=a}withSequenceNumber(r){return new Ea(this.target,this.targetId,this.purpose,r,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(r,n){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,r,null)}withExpectedCount(r){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,r)}withLastLimboFreeSnapshotVersion(r){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,r,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(r){this.ct=r}}function zP(s){const r=NP({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?hy(r,r.limit,"L"):r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(){this.un=new qP}addToCollectionParentIndex(r,n){return this.un.add(n),gt.resolve()}getCollectionParents(r,n){return gt.resolve(this.un.getEntries(n))}addFieldIndex(r,n){return gt.resolve()}deleteFieldIndex(r,n){return gt.resolve()}deleteAllFieldIndexes(r){return gt.resolve()}createTargetIndexes(r,n){return gt.resolve()}getDocumentsMatchingTarget(r,n){return gt.resolve(null)}getIndexType(r,n){return gt.resolve(0)}getFieldIndexes(r,n){return gt.resolve([])}getNextCollectionGroupToUpdate(r){return gt.resolve(null)}getMinOffset(r,n){return gt.resolve(Oa.min())}getMinOffsetFromCollectionGroup(r,n){return gt.resolve(Oa.min())}updateCollectionGroup(r,n,t){return gt.resolve()}updateIndexEntries(r,n){return gt.resolve()}}class qP{constructor(){this.index={}}add(r){const n=r.lastSegment(),t=r.popLast(),o=this.index[n]||new ts(Kr.comparator),c=!o.has(t);return this.index[n]=o.add(t),c}has(r){const n=r.lastSegment(),t=r.popLast(),o=this.index[n];return o&&o.has(t)}getEntries(r){return(this.index[r]||new ts(Kr.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(r){this.Ln=r}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ou(0)}static kn(){return new Ou(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(){this.changes=new Vu(r=>r.toString(),(r,n)=>r.isEqual(n)),this.changesApplied=!1}addEntry(r){this.assertNotApplied(),this.changes.set(r.key,r)}removeEntry(r,n){this.assertNotApplied(),this.changes.set(r,fs.newInvalidDocument(r).setReadTime(n))}getEntry(r,n){this.assertNotApplied();const t=this.changes.get(n);return t!==void 0?gt.resolve(t):this.getFromCache(r,n)}getEntries(r,n){return this.getAllFromCache(r,n)}apply(r){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(r)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(r,n){this.overlayedDocument=r,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(r,n,t,o){this.remoteDocumentCache=r,this.mutationQueue=n,this.documentOverlayCache=t,this.indexManager=o}getDocument(r,n){let t=null;return this.documentOverlayCache.getOverlay(r,n).next(o=>(t=o,this.remoteDocumentCache.getEntry(r,n))).next(o=>(t!==null&&$c(t.mutation,o,ki.empty(),On.now()),o))}getDocuments(r,n){return this.remoteDocumentCache.getEntries(r,n).next(t=>this.getLocalViewOfDocuments(r,t,lr()).next(()=>t))}getLocalViewOfDocuments(r,n,t=lr()){const o=gl();return this.populateOverlays(r,o,n).next(()=>this.computeViews(r,n,o,t).next(c=>{let l=Vc();return c.forEach((f,a)=>{l=l.insert(f,a.overlayedDocument)}),l}))}getOverlayedDocuments(r,n){const t=gl();return this.populateOverlays(r,t,n).next(()=>this.computeViews(r,n,t,lr()))}populateOverlays(r,n,t){const o=[];return t.forEach(c=>{n.has(c)||o.push(c)}),this.documentOverlayCache.getOverlays(r,o).next(c=>{c.forEach((l,f)=>{n.set(l,f)})})}computeViews(r,n,t,o){let c=qo();const l=Yc(),f=function(){return Yc()}();return n.forEach((a,d)=>{const _=t.get(d.key);o.has(d.key)&&(_===void 0||_.mutation instanceof Pl)?c=c.insert(d.key,d):_!==void 0?(l.set(d.key,_.mutation.getFieldMask()),$c(_.mutation,d,_.mutation.getFieldMask(),On.now())):l.set(d.key,ki.empty())}),this.recalculateAndSaveOverlays(r,c).next(a=>(a.forEach((d,_)=>l.set(d,_)),n.forEach((d,_)=>{var w;return f.set(d,new YP(_,(w=l.get(d))!==null&&w!==void 0?w:null))}),f))}recalculateAndSaveOverlays(r,n){const t=Yc();let o=new nn((l,f)=>l-f),c=lr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(r,n).next(l=>{for(const f of l)f.keys().forEach(a=>{const d=n.get(a);if(d===null)return;let _=t.get(a)||ki.empty();_=f.applyToLocalView(d,_),t.set(a,_);const w=(o.get(f.batchId)||lr()).add(a);o=o.insert(f.batchId,w)})}).next(()=>{const l=[],f=o.getReverseIterator();for(;f.hasNext();){const a=f.getNext(),d=a.key,_=a.value,w=T2();_.forEach(h=>{if(!c.has(h)){const m=k2(n.get(h),t.get(h));m!==null&&w.set(h,m),c=c.add(h)}}),l.push(this.documentOverlayCache.saveOverlays(r,d,w))}return gt.waitFor(l)}).next(()=>t)}recalculateAndSaveOverlaysForDocumentKeys(r,n){return this.remoteDocumentCache.getEntries(r,n).next(t=>this.recalculateAndSaveOverlays(r,t))}getDocumentsMatchingQuery(r,n,t,o){return function(l){return Vt.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(r,n.path):w2(n)?this.getDocumentsMatchingCollectionGroupQuery(r,n,t,o):this.getDocumentsMatchingCollectionQuery(r,n,t,o)}getNextDocuments(r,n,t,o){return this.remoteDocumentCache.getAllFromCollectionGroup(r,n,t,o).next(c=>{const l=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(r,n,t.largestBatchId,o-c.size):gt.resolve(gl());let f=-1,a=c;return l.next(d=>gt.forEach(d,(_,w)=>(f<w.largestBatchId&&(f=w.largestBatchId),c.get(_)?gt.resolve():this.remoteDocumentCache.getEntry(r,_).next(h=>{a=a.insert(_,h)}))).next(()=>this.populateOverlays(r,d,c)).next(()=>this.computeViews(r,a,d,lr())).next(_=>({batchId:f,changes:E2(_)})))})}getDocumentsMatchingDocumentQuery(r,n){return this.getDocument(r,new Vt(n)).next(t=>{let o=Vc();return t.isFoundDocument()&&(o=o.insert(t.key,t)),o})}getDocumentsMatchingCollectionGroupQuery(r,n,t,o){const c=n.collectionGroup;let l=Vc();return this.indexManager.getCollectionParents(r,c).next(f=>gt.forEach(f,a=>{const d=function(w,h){return new jd(h,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,a.child(c));return this.getDocumentsMatchingCollectionQuery(r,d,t,o).next(_=>{_.forEach((w,h)=>{l=l.insert(w,h)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(r,n,t,o){let c;return this.documentOverlayCache.getOverlaysForCollection(r,n.path,t.largestBatchId).next(l=>(c=l,this.remoteDocumentCache.getDocumentsMatchingQuery(r,n,t,c,o))).next(l=>{c.forEach((a,d)=>{const _=d.getKey();l.get(_)===null&&(l=l.insert(_,fs.newInvalidDocument(_)))});let f=Vc();return l.forEach((a,d)=>{const _=c.get(a);_!==void 0&&$c(_.mutation,d,ki.empty(),On.now()),Jf(n,d)&&(f=f.insert(a,d))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(r){this.serializer=r,this.hr=new Map,this.Pr=new Map}getBundleMetadata(r,n){return gt.resolve(this.hr.get(n))}saveBundleMetadata(r,n){return this.hr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:ro(o.createTime)}}(n)),gt.resolve()}getNamedQuery(r,n){return gt.resolve(this.Pr.get(n))}saveNamedQuery(r,n){return this.Pr.set(n.name,function(o){return{name:o.name,query:zP(o.bundledQuery),readTime:ro(o.readTime)}}(n)),gt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(){this.overlays=new nn(Vt.comparator),this.Ir=new Map}getOverlay(r,n){return gt.resolve(this.overlays.get(n))}getOverlays(r,n){const t=gl();return gt.forEach(n,o=>this.getOverlay(r,o).next(c=>{c!==null&&t.set(o,c)})).next(()=>t)}saveOverlays(r,n,t){return t.forEach((o,c)=>{this.ht(r,n,c)}),gt.resolve()}removeOverlaysForBatchId(r,n,t){const o=this.Ir.get(t);return o!==void 0&&(o.forEach(c=>this.overlays=this.overlays.remove(c)),this.Ir.delete(t)),gt.resolve()}getOverlaysForCollection(r,n,t){const o=gl(),c=n.length+1,l=new Vt(n.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const a=f.getNext().value,d=a.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===c&&a.largestBatchId>t&&o.set(a.getKey(),a)}return gt.resolve(o)}getOverlaysForCollectionGroup(r,n,t,o){let c=new nn((d,_)=>d-_);const l=this.overlays.getIterator();for(;l.hasNext();){const d=l.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>t){let _=c.get(d.largestBatchId);_===null&&(_=gl(),c=c.insert(d.largestBatchId,_)),_.set(d.getKey(),d)}}const f=gl(),a=c.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((d,_)=>f.set(d,_)),!(f.size()>=o)););return gt.resolve(f)}ht(r,n,t){const o=this.overlays.get(t.key);if(o!==null){const l=this.Ir.get(o.largestBatchId).delete(t.key);this.Ir.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(t.key,new bP(n,t));let c=this.Ir.get(n);c===void 0&&(c=lr(),this.Ir.set(n,c)),this.Ir.set(n,c.add(t.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(){this.sessionToken=ns.EMPTY_BYTE_STRING}getSessionToken(r){return gt.resolve(this.sessionToken)}setSessionToken(r,n){return this.sessionToken=n,gt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(){this.Tr=new ts(qn.Er),this.dr=new ts(qn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(r,n){const t=new qn(r,n);this.Tr=this.Tr.add(t),this.dr=this.dr.add(t)}Rr(r,n){r.forEach(t=>this.addReference(t,n))}removeReference(r,n){this.Vr(new qn(r,n))}mr(r,n){r.forEach(t=>this.removeReference(t,n))}gr(r){const n=new Vt(new Kr([])),t=new qn(n,r),o=new qn(n,r+1),c=[];return this.dr.forEachInRange([t,o],l=>{this.Vr(l),c.push(l.key)}),c}pr(){this.Tr.forEach(r=>this.Vr(r))}Vr(r){this.Tr=this.Tr.delete(r),this.dr=this.dr.delete(r)}yr(r){const n=new Vt(new Kr([])),t=new qn(n,r),o=new qn(n,r+1);let c=lr();return this.dr.forEachInRange([t,o],l=>{c=c.add(l.key)}),c}containsKey(r){const n=new qn(r,0),t=this.Tr.firstAfterOrEqual(n);return t!==null&&r.isEqual(t.key)}}class qn{constructor(r,n){this.key=r,this.wr=n}static Er(r,n){return Vt.comparator(r.key,n.key)||xr(r.wr,n.wr)}static Ar(r,n){return xr(r.wr,n.wr)||Vt.comparator(r.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(r,n){this.indexManager=r,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ts(qn.Er)}checkEmpty(r){return gt.resolve(this.mutationQueue.length===0)}addMutationBatch(r,n,t,o){const c=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new vP(c,n,t,o);this.mutationQueue.push(l);for(const f of o)this.br=this.br.add(new qn(f.key,c)),this.indexManager.addToCollectionParentIndex(r,f.key.path.popLast());return gt.resolve(l)}lookupMutationBatch(r,n){return gt.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(r,n){const t=n+1,o=this.vr(t),c=o<0?0:o;return gt.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return gt.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(r){return gt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(r,n){const t=new qn(n,0),o=new qn(n,Number.POSITIVE_INFINITY),c=[];return this.br.forEachInRange([t,o],l=>{const f=this.Dr(l.wr);c.push(f)}),gt.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(r,n){let t=new ts(xr);return n.forEach(o=>{const c=new qn(o,0),l=new qn(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([c,l],f=>{t=t.add(f.wr)})}),gt.resolve(this.Cr(t))}getAllMutationBatchesAffectingQuery(r,n){const t=n.path,o=t.length+1;let c=t;Vt.isDocumentKey(c)||(c=c.child(""));const l=new qn(new Vt(c),0);let f=new ts(xr);return this.br.forEachWhile(a=>{const d=a.key.path;return!!t.isPrefixOf(d)&&(d.length===o&&(f=f.add(a.wr)),!0)},l),gt.resolve(this.Cr(f))}Cr(r){const n=[];return r.forEach(t=>{const o=this.Dr(t);o!==null&&n.push(o)}),n}removeMutationBatch(r,n){Mr(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let t=this.br;return gt.forEach(n.mutations,o=>{const c=new qn(o.key,n.batchId);return t=t.delete(c),this.referenceDelegate.markPotentiallyOrphaned(r,o.key)}).next(()=>{this.br=t})}On(r){}containsKey(r,n){const t=new qn(n,0),o=this.br.firstAfterOrEqual(t);return gt.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(r){return this.mutationQueue.length,gt.resolve()}Fr(r,n){return this.vr(r)}vr(r){return this.mutationQueue.length===0?0:r-this.mutationQueue[0].batchId}Dr(r){const n=this.vr(r);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(r){this.Mr=r,this.docs=function(){return new nn(Vt.comparator)}(),this.size=0}setIndexManager(r){this.indexManager=r}addEntry(r,n){const t=n.key,o=this.docs.get(t),c=o?o.size:0,l=this.Mr(n);return this.docs=this.docs.insert(t,{document:n.mutableCopy(),size:l}),this.size+=l-c,this.indexManager.addToCollectionParentIndex(r,t.path.popLast())}removeEntry(r){const n=this.docs.get(r);n&&(this.docs=this.docs.remove(r),this.size-=n.size)}getEntry(r,n){const t=this.docs.get(n);return gt.resolve(t?t.document.mutableCopy():fs.newInvalidDocument(n))}getEntries(r,n){let t=qo();return n.forEach(o=>{const c=this.docs.get(o);t=t.insert(o,c?c.document.mutableCopy():fs.newInvalidDocument(o))}),gt.resolve(t)}getDocumentsMatchingQuery(r,n,t,o){let c=qo();const l=n.path,f=new Vt(l.child("")),a=this.docs.getIteratorFrom(f);for(;a.hasNext();){const{key:d,value:{document:_}}=a.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||NM(DM(_),t)<=0||(o.has(_.key)||Jf(n,_))&&(c=c.insert(_.key,_.mutableCopy()))}return gt.resolve(c)}getAllFromCollectionGroup(r,n,t,o){Yt()}Or(r,n){return gt.forEach(this.docs,t=>n(t))}newChangeBuffer(r){return new eD(this)}getSize(r){return gt.resolve(this.size)}}class eD extends WP{constructor(r){super(),this.cr=r}applyChanges(r){const n=[];return this.changes.forEach((t,o)=>{o.isValidDocument()?n.push(this.cr.addEntry(r,o)):this.cr.removeEntry(t)}),gt.waitFor(n)}getFromCache(r,n){return this.cr.getEntry(r,n)}getAllFromCache(r,n){return this.cr.getEntries(r,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(r){this.persistence=r,this.Nr=new Vu(n=>dv(n),hv),this.lastRemoteSnapshotVersion=Xt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new vv,this.targetCount=0,this.kr=Ou.Bn()}forEachTarget(r,n){return this.Nr.forEach((t,o)=>n(o)),gt.resolve()}getLastRemoteSnapshotVersion(r){return gt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(r){return gt.resolve(this.Lr)}allocateTargetId(r){return this.highestTargetId=this.kr.next(),gt.resolve(this.highestTargetId)}setTargetsMetadata(r,n,t){return t&&(this.lastRemoteSnapshotVersion=t),n>this.Lr&&(this.Lr=n),gt.resolve()}Kn(r){this.Nr.set(r.target,r);const n=r.targetId;n>this.highestTargetId&&(this.kr=new Ou(n),this.highestTargetId=n),r.sequenceNumber>this.Lr&&(this.Lr=r.sequenceNumber)}addTargetData(r,n){return this.Kn(n),this.targetCount+=1,gt.resolve()}updateTargetData(r,n){return this.Kn(n),gt.resolve()}removeTargetData(r,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,gt.resolve()}removeTargets(r,n,t){let o=0;const c=[];return this.Nr.forEach((l,f)=>{f.sequenceNumber<=n&&t.get(f.targetId)===null&&(this.Nr.delete(l),c.push(this.removeMatchingKeysForTargetId(r,f.targetId)),o++)}),gt.waitFor(c).next(()=>o)}getTargetCount(r){return gt.resolve(this.targetCount)}getTargetData(r,n){const t=this.Nr.get(n)||null;return gt.resolve(t)}addMatchingKeys(r,n,t){return this.Br.Rr(n,t),gt.resolve()}removeMatchingKeys(r,n,t){this.Br.mr(n,t);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach(l=>{c.push(o.markPotentiallyOrphaned(r,l))}),gt.waitFor(c)}removeMatchingKeysForTargetId(r,n){return this.Br.gr(n),gt.resolve()}getMatchingKeysForTargetId(r,n){const t=this.Br.yr(n);return gt.resolve(t)}containsKey(r,n){return gt.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(r,n){this.qr={},this.overlays={},this.Qr=new av(0),this.Kr=!1,this.Kr=!0,this.$r=new QP,this.referenceDelegate=r(this),this.Ur=new tD(this),this.indexManager=new HP,this.remoteDocumentCache=function(o){return new JP(o)}(t=>this.referenceDelegate.Wr(t)),this.serializer=new GP(n),this.Gr=new XP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(r){return this.indexManager}getDocumentOverlayCache(r){let n=this.overlays[r.toKey()];return n||(n=new KP,this.overlays[r.toKey()]=n),n}getMutationQueue(r,n){let t=this.qr[r.toKey()];return t||(t=new ZP(n,this.referenceDelegate),this.qr[r.toKey()]=t),t}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(r,n,t){It("MemoryPersistence","Starting transaction:",r);const o=new nD(this.Qr.next());return this.referenceDelegate.zr(),t(o).next(c=>this.referenceDelegate.jr(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Hr(r,n){return gt.or(Object.values(this.qr).map(t=>()=>t.containsKey(r,n)))}}class nD extends UM{constructor(r){super(),this.currentSequenceNumber=r}}class bv{constructor(r){this.persistence=r,this.Jr=new vv,this.Yr=null}static Zr(r){return new bv(r)}get Xr(){if(this.Yr)return this.Yr;throw Yt()}addReference(r,n,t){return this.Jr.addReference(t,n),this.Xr.delete(t.toString()),gt.resolve()}removeReference(r,n,t){return this.Jr.removeReference(t,n),this.Xr.add(t.toString()),gt.resolve()}markPotentiallyOrphaned(r,n){return this.Xr.add(n.toString()),gt.resolve()}removeTarget(r,n){this.Jr.gr(n.targetId).forEach(o=>this.Xr.add(o.toString()));const t=this.persistence.getTargetCache();return t.getMatchingKeysForTargetId(r,n.targetId).next(o=>{o.forEach(c=>this.Xr.add(c.toString()))}).next(()=>t.removeTargetData(r,n))}zr(){this.Yr=new Set}jr(r){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gt.forEach(this.Xr,t=>{const o=Vt.fromPath(t);return this.ei(r,o).next(c=>{c||n.removeEntry(o,Xt.min())})}).next(()=>(this.Yr=null,n.apply(r)))}updateLimboDocument(r,n){return this.ei(r,n).next(t=>{t?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(r){return 0}ei(r,n){return gt.or([()=>gt.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(r,n),()=>this.persistence.Hr(r,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(r,n,t,o){this.targetId=r,this.fromCache=n,this.$i=t,this.Ui=o}static Wi(r,n){let t=lr(),o=lr();for(const c of n.docChanges)switch(c.type){case 0:t=t.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new _v(r,n.fromCache,t,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(r){this._documentReadCount+=r}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return bR()?8:FM(ps())>0?6:4}()}initialize(r,n){this.Ji=r,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(r,n,t,o){const c={result:null};return this.Yi(r,n).next(l=>{c.result=l}).next(()=>{if(!c.result)return this.Zi(r,n,o,t).next(l=>{c.result=l})}).next(()=>{if(c.result)return;const l=new sD;return this.Xi(r,n,l).next(f=>{if(c.result=f,this.zi)return this.es(r,n,l,f.size)})}).next(()=>c.result)}es(r,n,t,o){return t.documentReadCount<this.ji?(Rc()<=hr.DEBUG&&It("QueryEngine","SDK will not create cache indexes for query:",yu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),gt.resolve()):(Rc()<=hr.DEBUG&&It("QueryEngine","Query:",yu(n),"scans",t.documentReadCount,"local documents and returns",o,"documents as results."),t.documentReadCount>this.Hi*o?(Rc()<=hr.DEBUG&&It("QueryEngine","The SDK decides to create cache indexes for query:",yu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(r,eo(n))):gt.resolve())}Yi(r,n){if(pw(n))return gt.resolve(null);let t=eo(n);return this.indexManager.getIndexType(r,t).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=hy(n,null,"F"),t=eo(n)),this.indexManager.getDocumentsMatchingTarget(r,t).next(c=>{const l=lr(...c);return this.Ji.getDocuments(r,l).next(f=>this.indexManager.getMinOffset(r,t).next(a=>{const d=this.ts(n,f);return this.ns(n,d,l,a.readTime)?this.Yi(r,hy(n,null,"F")):this.rs(r,d,n,a)}))})))}Zi(r,n,t,o){return pw(n)||o.isEqual(Xt.min())?gt.resolve(null):this.Ji.getDocuments(r,t).next(c=>{const l=this.ts(n,c);return this.ns(n,l,t,o)?gt.resolve(null):(Rc()<=hr.DEBUG&&It("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),yu(n)),this.rs(r,l,n,PM(o,-1)).next(f=>f))})}ts(r,n){let t=new ts(S2(r));return n.forEach((o,c)=>{Jf(r,c)&&(t=t.add(c))}),t}ns(r,n,t,o){if(r.limit===null)return!1;if(t.size!==n.size)return!0;const c=r.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Xi(r,n,t){return Rc()<=hr.DEBUG&&It("QueryEngine","Using full collection scan to execute query:",yu(n)),this.Ji.getDocumentsMatchingQuery(r,n,Oa.min(),t)}rs(r,n,t,o){return this.Ji.getDocumentsMatchingQuery(r,t,o).next(c=>(n.forEach(l=>{c=c.insert(l.key,l)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(r,n,t,o){this.persistence=r,this.ss=n,this.serializer=o,this.os=new nn(xr),this._s=new Vu(c=>dv(c),hv),this.us=new Map,this.cs=r.getRemoteDocumentCache(),this.Ur=r.getTargetCache(),this.Gr=r.getBundleCache(),this.ls(t)}ls(r){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(r),this.indexManager=this.persistence.getIndexManager(r),this.mutationQueue=this.persistence.getMutationQueue(r,this.indexManager),this.localDocuments=new $P(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(r){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>r.collect(n,this.os))}}function aD(s,r,n,t){return new oD(s,r,n,t)}async function q2(s,r){const n=Kt(s);return await n.persistence.runTransaction("Handle user change","readonly",t=>{let o;return n.mutationQueue.getAllMutationBatches(t).next(c=>(o=c,n.ls(r),n.mutationQueue.getAllMutationBatches(t))).next(c=>{const l=[],f=[];let a=lr();for(const d of o){l.push(d.batchId);for(const _ of d.mutations)a=a.add(_.key)}for(const d of c){f.push(d.batchId);for(const _ of d.mutations)a=a.add(_.key)}return n.localDocuments.getDocuments(t,a).next(d=>({hs:d,removedBatchIds:l,addedBatchIds:f}))})})}function lD(s,r){const n=Kt(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",t=>{const o=r.batch.keys(),c=n.cs.newChangeBuffer({trackRemovals:!0});return function(f,a,d,_){const w=d.batch,h=w.keys();let m=gt.resolve();return h.forEach(b=>{m=m.next(()=>_.getEntry(a,b)).next(v=>{const g=d.docVersions.get(b);Mr(g!==null),v.version.compareTo(g)<0&&(w.applyToRemoteDocument(v,d),v.isValidDocument()&&(v.setReadTime(d.commitVersion),_.addEntry(v)))})}),m.next(()=>f.mutationQueue.removeMutationBatch(a,w))}(n,t,r,c).next(()=>c.apply(t)).next(()=>n.mutationQueue.performConsistencyCheck(t)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(t,o,r.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(f){let a=lr();for(let d=0;d<f.mutationResults.length;++d)f.mutationResults[d].transformResults.length>0&&(a=a.add(f.batch.mutations[d].key));return a}(r))).next(()=>n.localDocuments.getDocuments(t,o))})}function W2(s){const r=Kt(s);return r.persistence.runTransaction("Get last remote snapshot version","readonly",n=>r.Ur.getLastRemoteSnapshotVersion(n))}function uD(s,r){const n=Kt(s),t=r.snapshotVersion;let o=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const l=n.cs.newChangeBuffer({trackRemovals:!0});o=n.os;const f=[];r.targetChanges.forEach((_,w)=>{const h=o.get(w);if(!h)return;f.push(n.Ur.removeMatchingKeys(c,_.removedDocuments,w).next(()=>n.Ur.addMatchingKeys(c,_.addedDocuments,w)));let m=h.withSequenceNumber(c.currentSequenceNumber);r.targetMismatches.get(w)!==null?m=m.withResumeToken(ns.EMPTY_BYTE_STRING,Xt.min()).withLastLimboFreeSnapshotVersion(Xt.min()):_.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(_.resumeToken,t)),o=o.insert(w,m),function(v,g,p){return v.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:p.addedDocuments.size+p.modifiedDocuments.size+p.removedDocuments.size>0}(h,m,_)&&f.push(n.Ur.updateTargetData(c,m))});let a=qo(),d=lr();if(r.documentUpdates.forEach(_=>{r.resolvedLimboDocuments.has(_)&&f.push(n.persistence.referenceDelegate.updateLimboDocument(c,_))}),f.push(cD(c,l,r.documentUpdates).next(_=>{a=_.Ps,d=_.Is})),!t.isEqual(Xt.min())){const _=n.Ur.getLastRemoteSnapshotVersion(c).next(w=>n.Ur.setTargetsMetadata(c,c.currentSequenceNumber,t));f.push(_)}return gt.waitFor(f).next(()=>l.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,a,d)).next(()=>a)}).then(c=>(n.os=o,c))}function cD(s,r,n){let t=lr(),o=lr();return n.forEach(c=>t=t.add(c)),r.getEntries(s,t).next(c=>{let l=qo();return n.forEach((f,a)=>{const d=c.get(f);a.isFoundDocument()!==d.isFoundDocument()&&(o=o.add(f)),a.isNoDocument()&&a.version.isEqual(Xt.min())?(r.removeEntry(f,a.readTime),l=l.insert(f,a)):!d.isValidDocument()||a.version.compareTo(d.version)>0||a.version.compareTo(d.version)===0&&d.hasPendingWrites?(r.addEntry(a),l=l.insert(f,a)):It("LocalStore","Ignoring outdated watch update for ",f,". Current version:",d.version," Watch version:",a.version)}),{Ps:l,Is:o}})}function dD(s,r){const n=Kt(s);return n.persistence.runTransaction("Get next mutation batch","readonly",t=>(r===void 0&&(r=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,r)))}function hD(s,r){const n=Kt(s);return n.persistence.runTransaction("Allocate target","readwrite",t=>{let o;return n.Ur.getTargetData(t,r).next(c=>c?(o=c,gt.resolve(o)):n.Ur.allocateTargetId(t).next(l=>(o=new Ea(r,l,"TargetPurposeListen",t.currentSequenceNumber),n.Ur.addTargetData(t,o).next(()=>o))))}).then(t=>{const o=n.os.get(t.targetId);return(o===null||t.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.os=n.os.insert(t.targetId,t),n._s.set(r,t.targetId)),t})}async function yy(s,r,n){const t=Kt(s),o=t.os.get(r),c=n?"readwrite":"readwrite-primary";try{n||await t.persistence.runTransaction("Release target",c,l=>t.persistence.referenceDelegate.removeTarget(l,o))}catch(l){if(!Sd(l))throw l;It("LocalStore",`Failed to update sequence numbers for target ${r}: ${l}`)}t.os=t.os.remove(r),t._s.delete(o.target)}function Ew(s,r,n){const t=Kt(s);let o=Xt.min(),c=lr();return t.persistence.runTransaction("Execute query","readwrite",l=>function(a,d,_){const w=Kt(a),h=w._s.get(_);return h!==void 0?gt.resolve(w.os.get(h)):w.Ur.getTargetData(d,_)}(t,l,eo(r)).next(f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,t.Ur.getMatchingKeysForTargetId(l,f.targetId).next(a=>{c=a})}).next(()=>t.ss.getDocumentsMatchingQuery(l,r,n?o:Xt.min(),n?c:lr())).next(f=>(fD(t,nP(r),f),{documents:f,Ts:c})))}function fD(s,r,n){let t=s.us.get(r)||Xt.min();n.forEach((o,c)=>{c.readTime.compareTo(t)>0&&(t=c.readTime)}),s.us.set(r,t)}class Tw{constructor(){this.activeTargetIds=uP()}fs(r){this.activeTargetIds=this.activeTargetIds.add(r)}gs(r){this.activeTargetIds=this.activeTargetIds.delete(r)}Vs(){const r={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(r)}}class pD{constructor(){this.so=new Tw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(r){}updateMutationState(r,n,t){}addLocalQueryTarget(r,n=!0){return n&&this.so.fs(r),this.oo[r]||"not-current"}updateQueryState(r,n,t){this.oo[r]=n}removeLocalQueryTarget(r){this.so.gs(r)}isLocalQueryTarget(r){return this.so.activeTargetIds.has(r)}clearQueryState(r){delete this.oo[r]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(r){return this.so.activeTargetIds.has(r)}start(){return this.so=new Tw,Promise.resolve()}handleUserChange(r,n,t){}setOnlineState(r){}shutdown(){}writeSequenceNumber(r){}notifyBundleLoaded(r){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{_o(r){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(r){this.ho.push(r)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){It("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const r of this.ho)r(0)}lo(){It("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const r of this.ho)r(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dh=null;function xg(){return Dh===null?Dh=function(){return 268435456+Math.round(2147483648*Math.random())}():Dh++,"0x"+Dh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(r){this.Io=r.Io,this.To=r.To}Eo(r){this.Ao=r}Ro(r){this.Vo=r}mo(r){this.fo=r}onMessage(r){this.po=r}close(){this.To()}send(r){this.Io(r)}yo(){this.Ao()}wo(){this.Vo()}So(r){this.fo(r)}bo(r){this.po(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="WebChannelConnection";class vD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const t=n.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+n.host,this.vo=`projects/${o}/databases/${c}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${c}`}get Fo(){return!1}Mo(n,t,o,c,l){const f=xg(),a=this.xo(n,t.toUriEncodedString());It("RestConnection",`Sending RPC '${n}' ${f}:`,a,o);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,c,l),this.No(n,a,d,o).then(_=>(It("RestConnection",`Received RPC '${n}' ${f}: `,_),_),_=>{throw Tu("RestConnection",`RPC '${n}' ${f} failed with error: `,_,"url: ",a,"request:",o),_})}Lo(n,t,o,c,l,f){return this.Mo(n,t,o,c,l)}Oo(n,t,o){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Uu}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((c,l)=>n[l]=c),o&&o.headers.forEach((c,l)=>n[l]=c)}xo(n,t){const o=gD[n];return`${this.Do}/v1/${t}:${o}`}terminate(){}}{constructor(r){super(r),this.forceLongPolling=r.forceLongPolling,this.autoDetectLongPolling=r.autoDetectLongPolling,this.useFetchStreams=r.useFetchStreams,this.longPollingOptions=r.longPollingOptions}No(r,n,t,o){const c=xg();return new Promise((l,f)=>{const a=new i2;a.setWithCredentials(!0),a.listenOnce(o2.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case tf.NO_ERROR:const _=a.getResponseJson();It(cs,`XHR for RPC '${r}' ${c} received:`,JSON.stringify(_)),l(_);break;case tf.TIMEOUT:It(cs,`RPC '${r}' ${c} timed out`),f(new Ct(ht.DEADLINE_EXCEEDED,"Request time out"));break;case tf.HTTP_ERROR:const w=a.getStatus();if(It(cs,`RPC '${r}' ${c} failed with status:`,w,"response text:",a.getResponseText()),w>0){let h=a.getResponseJson();Array.isArray(h)&&(h=h[0]);const m=h==null?void 0:h.error;if(m&&m.status&&m.message){const b=function(g){const p=g.toLowerCase().replace(/_/g,"-");return Object.values(ht).indexOf(p)>=0?p:ht.UNKNOWN}(m.status);f(new Ct(b,m.message))}else f(new Ct(ht.UNKNOWN,"Server responded with status "+a.getStatus()))}else f(new Ct(ht.UNAVAILABLE,"Connection failed."));break;default:Yt()}}finally{It(cs,`RPC '${r}' ${c} completed.`)}});const d=JSON.stringify(o);It(cs,`RPC '${r}' ${c} sending request:`,o),a.send(n,"POST",d,t,15)})}Bo(r,n,t){const o=xg(),c=[this.Do,"/","google.firestore.v1.Firestore","/",r,"/channel"],l=u2(),f=l2(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(a.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,n,t),a.encodeInitMessageHeaders=!0;const _=c.join("");It(cs,`Creating RPC '${r}' stream ${o}: ${_}`,a);const w=l.createWebChannel(_,a);let h=!1,m=!1;const b=new yD({Io:g=>{m?It(cs,`Not sending because RPC '${r}' stream ${o} is closed:`,g):(h||(It(cs,`Opening RPC '${r}' stream ${o} transport.`),w.open(),h=!0),It(cs,`RPC '${r}' stream ${o} sending:`,g),w.send(g))},To:()=>w.close()}),v=(g,p,y)=>{g.listen(p,S=>{try{y(S)}catch(j){setTimeout(()=>{throw j},0)}})};return v(w,Fc.EventType.OPEN,()=>{m||(It(cs,`RPC '${r}' stream ${o} transport opened.`),b.yo())}),v(w,Fc.EventType.CLOSE,()=>{m||(m=!0,It(cs,`RPC '${r}' stream ${o} transport closed`),b.So())}),v(w,Fc.EventType.ERROR,g=>{m||(m=!0,Tu(cs,`RPC '${r}' stream ${o} transport errored:`,g),b.So(new Ct(ht.UNAVAILABLE,"The operation could not be completed")))}),v(w,Fc.EventType.MESSAGE,g=>{var p;if(!m){const y=g.data[0];Mr(!!y);const S=y,j=S.error||((p=S[0])===null||p===void 0?void 0:p.error);if(j){It(cs,`RPC '${r}' stream ${o} received error:`,j);const A=j.status;let N=function(R){const P=jn[R];if(P!==void 0)return D2(P)}(A),C=j.message;N===void 0&&(N=ht.INTERNAL,C="Unknown error status: "+A+" with message "+j.message),m=!0,b.So(new Ct(N,C)),w.close()}else It(cs,`RPC '${r}' stream ${o} received:`,y),b.bo(y)}}),v(f,a2.STAT_EVENT,g=>{g.stat===oy.PROXY?It(cs,`RPC '${r}' stream ${o} detected buffering proxy`):g.stat===oy.NOPROXY&&It(cs,`RPC '${r}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function Sg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(s){return new AP(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(r,n,t=1e3,o=1.5,c=6e4){this.ui=r,this.timerId=n,this.ko=t,this.qo=o,this.Qo=c,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(r){this.cancel();const n=Math.floor(this.Ko+this.zo()),t=Math.max(0,Date.now()-this.Uo),o=Math.max(0,n-t);o>0&&It("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${t} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,()=>(this.Uo=Date.now(),r())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(r,n,t,o,c,l,f,a){this.ui=r,this.Ho=t,this.Jo=o,this.connection=c,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Y2(r,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(r){this.u_(),this.stream.send(r)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(r,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,r!==4?this.t_.reset():n&&n.code===ht.RESOURCE_EXHAUSTED?(Ho(n.toString()),Ho("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ht.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=r,await this.listener.mo(n)}l_(){}auth(){this.state=1;const r=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([t,o])=>{this.Yo===n&&this.P_(t,o)},t=>{r(()=>{const o=new Ct(ht.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(o)})})}P_(r,n){const t=this.h_(this.Yo);this.stream=this.T_(r,n),this.stream.Eo(()=>{t(()=>this.listener.Eo())}),this.stream.Ro(()=>{t(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(o=>{t(()=>this.I_(o))}),this.stream.onMessage(o=>{t(()=>++this.e_==1?this.E_(o):this.onNext(o))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(r){return It("PersistentStream",`close with error: ${r}`),this.stream=null,this.close(4,r)}h_(r){return n=>{this.ui.enqueueAndForget(()=>this.Yo===r?n():(It("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bD extends $2{constructor(r,n,t,o,c,l){super(r,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,t,o,l),this.serializer=c}T_(r,n){return this.connection.Bo("Listen",r,n)}E_(r){return this.onNext(r)}onNext(r){this.t_.reset();const n=IP(this.serializer,r),t=function(c){if(!("targetChange"in c))return Xt.min();const l=c.targetChange;return l.targetIds&&l.targetIds.length?Xt.min():l.readTime?ro(l.readTime):Xt.min()}(r);return this.listener.d_(n,t)}A_(r){const n={};n.database=gy(this.serializer),n.addTarget=function(c,l){let f;const a=l.target;if(f=cy(a)?{documents:PP(c,a)}:{query:DP(c,a)._t},f.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){f.resumeToken=U2(c,l.resumeToken);const d=fy(c,l.expectedCount);d!==null&&(f.expectedCount=d)}else if(l.snapshotVersion.compareTo(Xt.min())>0){f.readTime=Tf(c,l.snapshotVersion.toTimestamp());const d=fy(c,l.expectedCount);d!==null&&(f.expectedCount=d)}return f}(this.serializer,r);const t=LP(this.serializer,r);t&&(n.labels=t),this.a_(n)}R_(r){const n={};n.database=gy(this.serializer),n.removeTarget=r,this.a_(n)}}class _D extends $2{constructor(r,n,t,o,c,l){super(r,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,t,o,l),this.serializer=c}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(r,n){return this.connection.Bo("Write",r,n)}E_(r){return Mr(!!r.streamToken),this.lastStreamToken=r.streamToken,Mr(!r.writeResults||r.writeResults.length===0),this.listener.f_()}onNext(r){Mr(!!r.streamToken),this.lastStreamToken=r.streamToken,this.t_.reset();const n=MP(r.writeResults,r.commitTime),t=ro(r.commitTime);return this.listener.g_(t,n)}p_(){const r={};r.database=gy(this.serializer),this.a_(r)}m_(r){const n={streamToken:this.lastStreamToken,writes:r.map(t=>kP(this.serializer,t))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD extends class{}{constructor(r,n,t,o){super(),this.authCredentials=r,this.appCheckCredentials=n,this.connection=t,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new Ct(ht.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(r,n,t,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,l])=>this.connection.Mo(r,py(n,t),o,c,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ct(ht.UNKNOWN,c.toString())})}Lo(r,n,t,o,c){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,f])=>this.connection.Lo(r,py(n,t),o,l,f,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ct(ht.UNKNOWN,l.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class xD{constructor(r,n){this.asyncQueue=r,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(r){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${r.toString()}`),this.C_("Offline")))}set(r){this.x_(),this.S_=0,r==="Online"&&(this.D_=!1),this.C_(r)}C_(r){r!==this.state&&(this.state=r,this.onlineStateHandler(r))}F_(r){const n=`Could not reach Cloud Firestore backend. ${r}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ho(n),this.D_=!1):It("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(r,n,t,o,c){this.localStore=r,this.datastore=n,this.asyncQueue=t,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=c,this.k_._o(l=>{t.enqueueAndForget(async()=>{Dl(this)&&(It("RemoteStore","Restarting streams for network reachability change."),await async function(a){const d=Kt(a);d.L_.add(4),await Cd(d),d.q_.set("Unknown"),d.L_.delete(4),await sp(d)}(this))})}),this.q_=new xD(t,o)}}async function sp(s){if(Dl(s))for(const r of s.B_)await r(!0)}async function Cd(s){for(const r of s.B_)await r(!1)}function X2(s,r){const n=Kt(s);n.N_.has(r.targetId)||(n.N_.set(r.targetId,r),jv(n)?Sv(n):Bu(n).r_()&&xv(n,r))}function wv(s,r){const n=Kt(s),t=Bu(n);n.N_.delete(r),t.r_()&&K2(n,r),n.N_.size===0&&(t.r_()?t.o_():Dl(n)&&n.q_.set("Unknown"))}function xv(s,r){if(s.Q_.xe(r.targetId),r.resumeToken.approximateByteSize()>0||r.snapshotVersion.compareTo(Xt.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(r.targetId).size;r=r.withExpectedCount(n)}Bu(s).A_(r)}function K2(s,r){s.Q_.xe(r),Bu(s).R_(r)}function Sv(s){s.Q_=new jP({getRemoteKeysForTarget:r=>s.remoteSyncer.getRemoteKeysForTarget(r),ot:r=>s.N_.get(r)||null,tt:()=>s.datastore.serializer.databaseId}),Bu(s).start(),s.q_.v_()}function jv(s){return Dl(s)&&!Bu(s).n_()&&s.N_.size>0}function Dl(s){return Kt(s).L_.size===0}function Q2(s){s.Q_=void 0}async function jD(s){s.q_.set("Online")}async function ED(s){s.N_.forEach((r,n)=>{xv(s,r)})}async function TD(s,r){Q2(s),jv(s)?(s.q_.M_(r),Sv(s)):s.q_.set("Unknown")}async function CD(s,r,n){if(s.q_.set("Online"),r instanceof L2&&r.state===2&&r.cause)try{await async function(o,c){const l=c.cause;for(const f of c.targetIds)o.N_.has(f)&&(await o.remoteSyncer.rejectListen(f,l),o.N_.delete(f),o.Q_.removeTarget(f))}(s,r)}catch(t){It("RemoteStore","Failed to remove targets %s: %s ",r.targetIds.join(","),t),await Cf(s,t)}else if(r instanceof sf?s.Q_.Ke(r):r instanceof N2?s.Q_.He(r):s.Q_.We(r),!n.isEqual(Xt.min()))try{const t=await W2(s.localStore);n.compareTo(t)>=0&&await function(c,l){const f=c.Q_.rt(l);return f.targetChanges.forEach((a,d)=>{if(a.resumeToken.approximateByteSize()>0){const _=c.N_.get(d);_&&c.N_.set(d,_.withResumeToken(a.resumeToken,l))}}),f.targetMismatches.forEach((a,d)=>{const _=c.N_.get(a);if(!_)return;c.N_.set(a,_.withResumeToken(ns.EMPTY_BYTE_STRING,_.snapshotVersion)),K2(c,a);const w=new Ea(_.target,a,d,_.sequenceNumber);xv(c,w)}),c.remoteSyncer.applyRemoteEvent(f)}(s,n)}catch(t){It("RemoteStore","Failed to raise snapshot:",t),await Cf(s,t)}}async function Cf(s,r,n){if(!Sd(r))throw r;s.L_.add(1),await Cd(s),s.q_.set("Offline"),n||(n=()=>W2(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{It("RemoteStore","Retrying IndexedDB access"),await n(),s.L_.delete(1),await sp(s)})}function Z2(s,r){return r().catch(n=>Cf(s,n,r))}async function ip(s){const r=Kt(s),n=ka(r);let t=r.O_.length>0?r.O_[r.O_.length-1].batchId:-1;for(;AD(r);)try{const o=await dD(r.localStore,t);if(o===null){r.O_.length===0&&n.o_();break}t=o.batchId,RD(r,o)}catch(o){await Cf(r,o)}J2(r)&&ej(r)}function AD(s){return Dl(s)&&s.O_.length<10}function RD(s,r){s.O_.push(r);const n=ka(s);n.r_()&&n.V_&&n.m_(r.mutations)}function J2(s){return Dl(s)&&!ka(s).n_()&&s.O_.length>0}function ej(s){ka(s).start()}async function OD(s){ka(s).p_()}async function ID(s){const r=ka(s);for(const n of s.O_)r.m_(n.mutations)}async function kD(s,r,n){const t=s.O_.shift(),o=mv.from(t,r,n);await Z2(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await ip(s)}async function MD(s,r){r&&ka(s).V_&&await async function(t,o){if(function(l){return wP(l)&&l!==ht.ABORTED}(o.code)){const c=t.O_.shift();ka(t).s_(),await Z2(t,()=>t.remoteSyncer.rejectFailedWrite(c.batchId,o)),await ip(t)}}(s,r),J2(s)&&ej(s)}async function Aw(s,r){const n=Kt(s);n.asyncQueue.verifyOperationInProgress(),It("RemoteStore","RemoteStore received new credentials");const t=Dl(n);n.L_.add(3),await Cd(n),t&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(r),n.L_.delete(3),await sp(n)}async function PD(s,r){const n=Kt(s);r?(n.L_.delete(2),await sp(n)):r||(n.L_.add(2),await Cd(n),n.q_.set("Unknown"))}function Bu(s){return s.K_||(s.K_=function(n,t,o){const c=Kt(n);return c.w_(),new bD(t,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(s.datastore,s.asyncQueue,{Eo:jD.bind(null,s),Ro:ED.bind(null,s),mo:TD.bind(null,s),d_:CD.bind(null,s)}),s.B_.push(async r=>{r?(s.K_.s_(),jv(s)?Sv(s):s.q_.set("Unknown")):(await s.K_.stop(),Q2(s))})),s.K_}function ka(s){return s.U_||(s.U_=function(n,t,o){const c=Kt(n);return c.w_(),new _D(t,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(s.datastore,s.asyncQueue,{Eo:()=>Promise.resolve(),Ro:OD.bind(null,s),mo:MD.bind(null,s),f_:ID.bind(null,s),g_:kD.bind(null,s)}),s.B_.push(async r=>{r?(s.U_.s_(),await ip(s)):(await s.U_.stop(),s.O_.length>0&&(It("RemoteStore",`Stopping write stream with ${s.O_.length} pending writes`),s.O_=[]))})),s.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(r,n,t,o,c){this.asyncQueue=r,this.timerId=n,this.targetTimeMs=t,this.op=o,this.removalCallback=c,this.deferred=new Uo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(r,n,t,o,c){const l=Date.now()+t,f=new Ev(r,n,l,o,c);return f.start(t),f}start(r){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),r)}skipDelay(){return this.handleDelayElapsed()}cancel(r){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ct(ht.CANCELLED,"Operation cancelled"+(r?": "+r:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(r=>this.deferred.resolve(r))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tv(s,r){if(Ho("AsyncQueue",`${r}: ${s}`),Sd(s))return new Ct(ht.UNAVAILABLE,`${r}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(r){this.comparator=r?(n,t)=>r(n,t)||Vt.comparator(n.key,t.key):(n,t)=>Vt.comparator(n.key,t.key),this.keyedMap=Vc(),this.sortedSet=new nn(this.comparator)}static emptySet(r){return new Su(r.comparator)}has(r){return this.keyedMap.get(r)!=null}get(r){return this.keyedMap.get(r)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(r){const n=this.keyedMap.get(r);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(r){this.sortedSet.inorderTraversal((n,t)=>(r(n),!1))}add(r){const n=this.delete(r.key);return n.copy(n.keyedMap.insert(r.key,r),n.sortedSet.insert(r,null))}delete(r){const n=this.get(r);return n?this.copy(this.keyedMap.remove(r),this.sortedSet.remove(n)):this}isEqual(r){if(!(r instanceof Su)||this.size!==r.size)return!1;const n=this.sortedSet.getIterator(),t=r.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=t.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const r=[];return this.forEach(n=>{r.push(n.toString())}),r.length===0?"DocumentSet ()":`DocumentSet (
  `+r.join(`  
`)+`
)`}copy(r,n){const t=new Su;return t.comparator=this.comparator,t.keyedMap=r,t.sortedSet=n,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(){this.W_=new nn(Vt.comparator)}track(r){const n=r.doc.key,t=this.W_.get(n);t?r.type!==0&&t.type===3?this.W_=this.W_.insert(n,r):r.type===3&&t.type!==1?this.W_=this.W_.insert(n,{type:t.type,doc:r.doc}):r.type===2&&t.type===2?this.W_=this.W_.insert(n,{type:2,doc:r.doc}):r.type===2&&t.type===0?this.W_=this.W_.insert(n,{type:0,doc:r.doc}):r.type===1&&t.type===0?this.W_=this.W_.remove(n):r.type===1&&t.type===2?this.W_=this.W_.insert(n,{type:1,doc:t.doc}):r.type===0&&t.type===1?this.W_=this.W_.insert(n,{type:2,doc:r.doc}):Yt():this.W_=this.W_.insert(n,r)}G_(){const r=[];return this.W_.inorderTraversal((n,t)=>{r.push(t)}),r}}class Iu{constructor(r,n,t,o,c,l,f,a,d){this.query=r,this.docs=n,this.oldDocs=t,this.docChanges=o,this.mutatedKeys=c,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=a,this.hasCachedResults=d}static fromInitialDocuments(r,n,t,o,c){const l=[];return n.forEach(f=>{l.push({type:0,doc:f})}),new Iu(r,n,Su.emptySet(n),l,t,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(r){if(!(this.fromCache===r.fromCache&&this.hasCachedResults===r.hasCachedResults&&this.syncStateChanged===r.syncStateChanged&&this.mutatedKeys.isEqual(r.mutatedKeys)&&Zf(this.query,r.query)&&this.docs.isEqual(r.docs)&&this.oldDocs.isEqual(r.oldDocs)))return!1;const n=this.docChanges,t=r.docChanges;if(n.length!==t.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==t[o].type||!n[o].doc.isEqual(t[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(r=>r.J_())}}class ND{constructor(){this.queries=Ow(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,t){const o=Kt(n),c=o.queries;o.queries=Ow(),c.forEach((l,f)=>{for(const a of f.j_)a.onError(t)})})(this,new Ct(ht.ABORTED,"Firestore shutting down"))}}function Ow(){return new Vu(s=>x2(s),Zf)}async function tj(s,r){const n=Kt(s);let t=3;const o=r.query;let c=n.queries.get(o);c?!c.H_()&&r.J_()&&(t=2):(c=new DD,t=r.J_()?0:1);try{switch(t){case 0:c.z_=await n.onListen(o,!0);break;case 1:c.z_=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(l){const f=Tv(l,`Initialization of query '${yu(r.query)}' failed`);return void r.onError(f)}n.queries.set(o,c),c.j_.push(r),r.Z_(n.onlineState),c.z_&&r.X_(c.z_)&&Cv(n)}async function rj(s,r){const n=Kt(s),t=r.query;let o=3;const c=n.queries.get(t);if(c){const l=c.j_.indexOf(r);l>=0&&(c.j_.splice(l,1),c.j_.length===0?o=r.J_()?0:1:!c.H_()&&r.J_()&&(o=2))}switch(o){case 0:return n.queries.delete(t),n.onUnlisten(t,!0);case 1:return n.queries.delete(t),n.onUnlisten(t,!1);case 2:return n.onLastRemoteStoreUnlisten(t);default:return}}function LD(s,r){const n=Kt(s);let t=!1;for(const o of r){const c=o.query,l=n.queries.get(c);if(l){for(const f of l.j_)f.X_(o)&&(t=!0);l.z_=o}}t&&Cv(n)}function UD(s,r,n){const t=Kt(s),o=t.queries.get(r);if(o)for(const c of o.j_)c.onError(n);t.queries.delete(r)}function Cv(s){s.Y_.forEach(r=>{r.next()})}var vy,Iw;(Iw=vy||(vy={})).ea="default",Iw.Cache="cache";class nj{constructor(r,n,t){this.query=r,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=t||{}}X_(r){if(!this.options.includeMetadataChanges){const t=[];for(const o of r.docChanges)o.type!==3&&t.push(o);r=new Iu(r.query,r.docs,r.oldDocs,t,r.mutatedKeys,r.fromCache,r.syncStateChanged,!0,r.hasCachedResults)}let n=!1;return this.na?this.ia(r)&&(this.ta.next(r),n=!0):this.sa(r,this.onlineState)&&(this.oa(r),n=!0),this.ra=r,n}onError(r){this.ta.error(r)}Z_(r){this.onlineState=r;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,r)&&(this.oa(this.ra),n=!0),n}sa(r,n){if(!r.fromCache||!this.J_())return!0;const t=n!=="Offline";return(!this.options._a||!t)&&(!r.docs.isEmpty()||r.hasCachedResults||n==="Offline")}ia(r){if(r.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==r.hasPendingWrites;return!(!r.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(r){r=Iu.fromInitialDocuments(r.query,r.docs,r.mutatedKeys,r.fromCache,r.hasCachedResults),this.na=!0,this.ta.next(r)}J_(){return this.options.source!==vy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(r){this.key=r}}class ij{constructor(r){this.key=r}}class FD{constructor(r,n){this.query=r,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=lr(),this.mutatedKeys=lr(),this.Aa=S2(r),this.Ra=new Su(this.Aa)}get Va(){return this.Ta}ma(r,n){const t=n?n.fa:new Rw,o=n?n.Ra:this.Ra;let c=n?n.mutatedKeys:this.mutatedKeys,l=o,f=!1;const a=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,d=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(r.inorderTraversal((_,w)=>{const h=o.get(_),m=Jf(this.query,w)?w:null,b=!!h&&this.mutatedKeys.has(h.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let g=!1;h&&m?h.data.isEqual(m.data)?b!==v&&(t.track({type:3,doc:m}),g=!0):this.ga(h,m)||(t.track({type:2,doc:m}),g=!0,(a&&this.Aa(m,a)>0||d&&this.Aa(m,d)<0)&&(f=!0)):!h&&m?(t.track({type:0,doc:m}),g=!0):h&&!m&&(t.track({type:1,doc:h}),g=!0,(a||d)&&(f=!0)),g&&(m?(l=l.add(m),c=v?c.add(_):c.delete(_)):(l=l.delete(_),c=c.delete(_)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const _=this.query.limitType==="F"?l.last():l.first();l=l.delete(_.key),c=c.delete(_.key),t.track({type:1,doc:_})}return{Ra:l,fa:t,ns:f,mutatedKeys:c}}ga(r,n){return r.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(r,n,t,o){const c=this.Ra;this.Ra=r.Ra,this.mutatedKeys=r.mutatedKeys;const l=r.fa.G_();l.sort((_,w)=>function(m,b){const v=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Yt()}};return v(m)-v(b)}(_.type,w.type)||this.Aa(_.doc,w.doc)),this.pa(t),o=o!=null&&o;const f=n&&!o?this.ya():[],a=this.da.size===0&&this.current&&!o?1:0,d=a!==this.Ea;return this.Ea=a,l.length!==0||d?{snapshot:new Iu(this.query,r.Ra,c,l,r.mutatedKeys,a===0,d,!1,!!t&&t.resumeToken.approximateByteSize()>0),wa:f}:{wa:f}}Z_(r){return this.current&&r==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Rw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(r){return!this.Ta.has(r)&&!!this.Ra.has(r)&&!this.Ra.get(r).hasLocalMutations}pa(r){r&&(r.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),r.modifiedDocuments.forEach(n=>{}),r.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=r.current)}ya(){if(!this.current)return[];const r=this.da;this.da=lr(),this.Ra.forEach(t=>{this.Sa(t.key)&&(this.da=this.da.add(t.key))});const n=[];return r.forEach(t=>{this.da.has(t)||n.push(new ij(t))}),this.da.forEach(t=>{r.has(t)||n.push(new sj(t))}),n}ba(r){this.Ta=r.Ts,this.da=lr();const n=this.ma(r.documents);return this.applyChanges(n,!0)}Da(){return Iu.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class VD{constructor(r,n,t){this.query=r,this.targetId=n,this.view=t}}class BD{constructor(r){this.key=r,this.va=!1}}class GD{constructor(r,n,t,o,c,l){this.localStore=r,this.remoteStore=n,this.eventManager=t,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new Vu(f=>x2(f),Zf),this.Ma=new Map,this.xa=new Set,this.Oa=new nn(Vt.comparator),this.Na=new Map,this.La=new vv,this.Ba={},this.ka=new Map,this.qa=Ou.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function zD(s,r,n=!0){const t=dj(s);let o;const c=t.Fa.get(r);return c?(t.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.Da()):o=await oj(t,r,n,!0),o}async function HD(s,r){const n=dj(s);await oj(n,r,!0,!1)}async function oj(s,r,n,t){const o=await hD(s.localStore,eo(r)),c=o.targetId,l=s.sharedClientState.addLocalQueryTarget(c,n);let f;return t&&(f=await qD(s,r,c,l==="current",o.resumeToken)),s.isPrimaryClient&&n&&X2(s.remoteStore,o),f}async function qD(s,r,n,t,o){s.Ka=(w,h,m)=>async function(v,g,p,y){let S=g.view.ma(p);S.ns&&(S=await Ew(v.localStore,g.query,!1).then(({documents:C})=>g.view.ma(C,S)));const j=y&&y.targetChanges.get(g.targetId),A=y&&y.targetMismatches.get(g.targetId)!=null,N=g.view.applyChanges(S,v.isPrimaryClient,j,A);return Mw(v,g.targetId,N.wa),N.snapshot}(s,w,h,m);const c=await Ew(s.localStore,r,!0),l=new FD(r,c.Ts),f=l.ma(c.documents),a=Td.createSynthesizedTargetChangeForCurrentChange(n,t&&s.onlineState!=="Offline",o),d=l.applyChanges(f,s.isPrimaryClient,a);Mw(s,n,d.wa);const _=new VD(r,n,l);return s.Fa.set(r,_),s.Ma.has(n)?s.Ma.get(n).push(r):s.Ma.set(n,[r]),d.snapshot}async function WD(s,r,n){const t=Kt(s),o=t.Fa.get(r),c=t.Ma.get(o.targetId);if(c.length>1)return t.Ma.set(o.targetId,c.filter(l=>!Zf(l,r))),void t.Fa.delete(r);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||await yy(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),n&&wv(t.remoteStore,o.targetId),by(t,o.targetId)}).catch(xd)):(by(t,o.targetId),await yy(t.localStore,o.targetId,!0))}async function YD(s,r){const n=Kt(s),t=n.Fa.get(r),o=n.Ma.get(t.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(t.targetId),wv(n.remoteStore,t.targetId))}async function $D(s,r,n){const t=t3(s);try{const o=await function(l,f){const a=Kt(l),d=On.now(),_=f.reduce((m,b)=>m.add(b.key),lr());let w,h;return a.persistence.runTransaction("Locally write mutations","readwrite",m=>{let b=qo(),v=lr();return a.cs.getEntries(m,_).next(g=>{b=g,b.forEach((p,y)=>{y.isValidDocument()||(v=v.add(p))})}).next(()=>a.localDocuments.getOverlayedDocuments(m,b)).next(g=>{w=g;const p=[];for(const y of f){const S=gP(y,w.get(y.key).overlayedDocument);S!=null&&p.push(new Pl(y.key,S,p2(S.value.mapValue),to.exists(!0)))}return a.mutationQueue.addMutationBatch(m,d,p,f)}).next(g=>{h=g;const p=g.applyToLocalDocumentSet(w,v);return a.documentOverlayCache.saveOverlays(m,g.batchId,p)})}).then(()=>({batchId:h.batchId,changes:E2(w)}))}(t.localStore,r);t.sharedClientState.addPendingMutation(o.batchId),function(l,f,a){let d=l.Ba[l.currentUser.toKey()];d||(d=new nn(xr)),d=d.insert(f,a),l.Ba[l.currentUser.toKey()]=d}(t,o.batchId,n),await Ad(t,o.changes),await ip(t.remoteStore)}catch(o){const c=Tv(o,"Failed to persist write");n.reject(c)}}async function aj(s,r){const n=Kt(s);try{const t=await uD(n.localStore,r);r.targetChanges.forEach((o,c)=>{const l=n.Na.get(c);l&&(Mr(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?l.va=!0:o.modifiedDocuments.size>0?Mr(l.va):o.removedDocuments.size>0&&(Mr(l.va),l.va=!1))}),await Ad(n,t,r)}catch(t){await xd(t)}}function kw(s,r,n){const t=Kt(s);if(t.isPrimaryClient&&n===0||!t.isPrimaryClient&&n===1){const o=[];t.Fa.forEach((c,l)=>{const f=l.view.Z_(r);f.snapshot&&o.push(f.snapshot)}),function(l,f){const a=Kt(l);a.onlineState=f;let d=!1;a.queries.forEach((_,w)=>{for(const h of w.j_)h.Z_(f)&&(d=!0)}),d&&Cv(a)}(t.eventManager,r),o.length&&t.Ca.d_(o),t.onlineState=r,t.isPrimaryClient&&t.sharedClientState.setOnlineState(r)}}async function XD(s,r,n){const t=Kt(s);t.sharedClientState.updateQueryState(r,"rejected",n);const o=t.Na.get(r),c=o&&o.key;if(c){let l=new nn(Vt.comparator);l=l.insert(c,fs.newNoDocument(c,Xt.min()));const f=lr().add(c),a=new rp(Xt.min(),new Map,new nn(xr),l,f);await aj(t,a),t.Oa=t.Oa.remove(c),t.Na.delete(r),Av(t)}else await yy(t.localStore,r,!1).then(()=>by(t,r,n)).catch(xd)}async function KD(s,r){const n=Kt(s),t=r.batch.batchId;try{const o=await lD(n.localStore,r);uj(n,t,null),lj(n,t),n.sharedClientState.updateMutationState(t,"acknowledged"),await Ad(n,o)}catch(o){await xd(o)}}async function QD(s,r,n){const t=Kt(s);try{const o=await function(l,f){const a=Kt(l);return a.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let _;return a.mutationQueue.lookupMutationBatch(d,f).next(w=>(Mr(w!==null),_=w.keys(),a.mutationQueue.removeMutationBatch(d,w))).next(()=>a.mutationQueue.performConsistencyCheck(d)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(d,_,f)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,_)).next(()=>a.localDocuments.getDocuments(d,_))})}(t.localStore,r);uj(t,r,n),lj(t,r),t.sharedClientState.updateMutationState(r,"rejected",n),await Ad(t,o)}catch(o){await xd(o)}}function lj(s,r){(s.ka.get(r)||[]).forEach(n=>{n.resolve()}),s.ka.delete(r)}function uj(s,r,n){const t=Kt(s);let o=t.Ba[t.currentUser.toKey()];if(o){const c=o.get(r);c&&(n?c.reject(n):c.resolve(),o=o.remove(r)),t.Ba[t.currentUser.toKey()]=o}}function by(s,r,n=null){s.sharedClientState.removeLocalQueryTarget(r);for(const t of s.Ma.get(r))s.Fa.delete(t),n&&s.Ca.$a(t,n);s.Ma.delete(r),s.isPrimaryClient&&s.La.gr(r).forEach(t=>{s.La.containsKey(t)||cj(s,t)})}function cj(s,r){s.xa.delete(r.path.canonicalString());const n=s.Oa.get(r);n!==null&&(wv(s.remoteStore,n),s.Oa=s.Oa.remove(r),s.Na.delete(n),Av(s))}function Mw(s,r,n){for(const t of n)t instanceof sj?(s.La.addReference(t.key,r),ZD(s,t)):t instanceof ij?(It("SyncEngine","Document no longer in limbo: "+t.key),s.La.removeReference(t.key,r),s.La.containsKey(t.key)||cj(s,t.key)):Yt()}function ZD(s,r){const n=r.key,t=n.path.canonicalString();s.Oa.get(n)||s.xa.has(t)||(It("SyncEngine","New document in limbo: "+n),s.xa.add(t),Av(s))}function Av(s){for(;s.xa.size>0&&s.Oa.size<s.maxConcurrentLimboResolutions;){const r=s.xa.values().next().value;s.xa.delete(r);const n=new Vt(Kr.fromString(r)),t=s.qa.next();s.Na.set(t,new BD(n)),s.Oa=s.Oa.insert(n,t),X2(s.remoteStore,new Ea(eo(fv(n.path)),t,"TargetPurposeLimboResolution",av.oe))}}async function Ad(s,r,n){const t=Kt(s),o=[],c=[],l=[];t.Fa.isEmpty()||(t.Fa.forEach((f,a)=>{l.push(t.Ka(a,r,n).then(d=>{var _;if((d||n)&&t.isPrimaryClient){const w=d?!d.fromCache:(_=n==null?void 0:n.targetChanges.get(a.targetId))===null||_===void 0?void 0:_.current;t.sharedClientState.updateQueryState(a.targetId,w?"current":"not-current")}if(d){o.push(d);const w=_v.Wi(a.targetId,d);c.push(w)}}))}),await Promise.all(l),t.Ca.d_(o),await async function(a,d){const _=Kt(a);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>gt.forEach(d,h=>gt.forEach(h.$i,m=>_.persistence.referenceDelegate.addReference(w,h.targetId,m)).next(()=>gt.forEach(h.Ui,m=>_.persistence.referenceDelegate.removeReference(w,h.targetId,m)))))}catch(w){if(!Sd(w))throw w;It("LocalStore","Failed to update sequence numbers: "+w)}for(const w of d){const h=w.targetId;if(!w.fromCache){const m=_.os.get(h),b=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(b);_.os=_.os.insert(h,v)}}}(t.localStore,c))}async function JD(s,r){const n=Kt(s);if(!n.currentUser.isEqual(r)){It("SyncEngine","User change. New user:",r.toKey());const t=await q2(n.localStore,r);n.currentUser=r,function(c,l){c.ka.forEach(f=>{f.forEach(a=>{a.reject(new Ct(ht.CANCELLED,l))})}),c.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(r,t.removedBatchIds,t.addedBatchIds),await Ad(n,t.hs)}}function e3(s,r){const n=Kt(s),t=n.Na.get(r);if(t&&t.va)return lr().add(t.key);{let o=lr();const c=n.Ma.get(r);if(!c)return o;for(const l of c){const f=n.Fa.get(l);o=o.unionWith(f.view.Va)}return o}}function dj(s){const r=Kt(s);return r.remoteStore.remoteSyncer.applyRemoteEvent=aj.bind(null,r),r.remoteStore.remoteSyncer.getRemoteKeysForTarget=e3.bind(null,r),r.remoteStore.remoteSyncer.rejectListen=XD.bind(null,r),r.Ca.d_=LD.bind(null,r.eventManager),r.Ca.$a=UD.bind(null,r.eventManager),r}function t3(s){const r=Kt(s);return r.remoteStore.remoteSyncer.applySuccessfulWrite=KD.bind(null,r),r.remoteStore.remoteSyncer.rejectFailedWrite=QD.bind(null,r),r}class Af{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(r){this.serializer=np(r.databaseInfo.databaseId),this.sharedClientState=this.Wa(r),this.persistence=this.Ga(r),await this.persistence.start(),this.localStore=this.za(r),this.gcScheduler=this.ja(r,this.localStore),this.indexBackfillerScheduler=this.Ha(r,this.localStore)}ja(r,n){return null}Ha(r,n){return null}za(r){return aD(this.persistence,new iD,r.initialUser,this.serializer)}Ga(r){return new rD(bv.Zr,this.serializer)}Wa(r){return new pD}async terminate(){var r,n;(r=this.gcScheduler)===null||r===void 0||r.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Af.provider={build:()=>new Af};class _y{async initialize(r,n){this.localStore||(this.localStore=r.localStore,this.sharedClientState=r.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!r.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>kw(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=JD.bind(null,this.syncEngine),await PD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(r){return function(){return new ND}()}createDatastore(r){const n=np(r.databaseInfo.databaseId),t=function(c){return new vD(c)}(r.databaseInfo);return function(c,l,f,a){return new wD(c,l,f,a)}(r.authCredentials,r.appCheckCredentials,t,n)}createRemoteStore(r){return function(t,o,c,l,f){return new SD(t,o,c,l,f)}(this.localStore,this.datastore,r.asyncQueue,n=>kw(this.syncEngine,n,0),function(){return Cw.D()?new Cw:new mD}())}createSyncEngine(r,n){return function(o,c,l,f,a,d,_){const w=new GD(o,c,l,f,a,d);return _&&(w.Qa=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,r.initialUser,r.maxConcurrentLimboResolutions,n)}async terminate(){var r,n;await async function(o){const c=Kt(o);It("RemoteStore","RemoteStore shutting down."),c.L_.add(5),await Cd(c),c.k_.shutdown(),c.q_.set("Unknown")}(this.remoteStore),(r=this.datastore)===null||r===void 0||r.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}_y.provider={build:()=>new _y};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(r){this.observer=r,this.muted=!1}next(r){this.muted||this.observer.next&&this.Ya(this.observer.next,r)}error(r){this.muted||(this.observer.error?this.Ya(this.observer.error,r):Ho("Uncaught Error in snapshot listener:",r.toString()))}Za(){this.muted=!0}Ya(r,n){setTimeout(()=>{this.muted||r(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(r,n,t,o,c){this.authCredentials=r,this.appCheckCredentials=n,this.asyncQueue=t,this.databaseInfo=o,this.user=hs.UNAUTHENTICATED,this.clientId=d2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(t,async l=>{It("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(t,l=>(It("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(r){this.authCredentialListener=r}setAppCheckTokenChangeListener(r){this.appCheckCredentialListener=r}terminate(){this.asyncQueue.enterRestrictedMode();const r=new Uo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),r.resolve()}catch(n){const t=Tv(n,"Failed to shutdown persistence");r.reject(t)}}),r.promise}}async function jg(s,r){s.asyncQueue.verifyOperationInProgress(),It("FirestoreClient","Initializing OfflineComponentProvider");const n=s.configuration;await r.initialize(n);let t=n.initialUser;s.setCredentialChangeListener(async o=>{t.isEqual(o)||(await q2(r.localStore,o),t=o)}),r.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=r}async function Pw(s,r){s.asyncQueue.verifyOperationInProgress();const n=await n3(s);It("FirestoreClient","Initializing OnlineComponentProvider"),await r.initialize(n,s.configuration),s.setCredentialChangeListener(t=>Aw(r.remoteStore,t)),s.setAppCheckTokenChangeListener((t,o)=>Aw(r.remoteStore,o)),s._onlineComponents=r}async function n3(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){It("FirestoreClient","Using user provided OfflineComponentProvider");try{await jg(s,s._uninitializedComponentsProvider._offline)}catch(r){const n=r;if(!function(o){return o.name==="FirebaseError"?o.code===ht.FAILED_PRECONDITION||o.code===ht.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;Tu("Error using user provided cache. Falling back to memory cache: "+n),await jg(s,new Af)}}else It("FirestoreClient","Using default OfflineComponentProvider"),await jg(s,new Af);return s._offlineComponents}async function fj(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(It("FirestoreClient","Using user provided OnlineComponentProvider"),await Pw(s,s._uninitializedComponentsProvider._online)):(It("FirestoreClient","Using default OnlineComponentProvider"),await Pw(s,new _y))),s._onlineComponents}function s3(s){return fj(s).then(r=>r.syncEngine)}async function pj(s){const r=await fj(s),n=r.eventManager;return n.onListen=zD.bind(null,r.syncEngine),n.onUnlisten=WD.bind(null,r.syncEngine),n.onFirstRemoteStoreListen=HD.bind(null,r.syncEngine),n.onLastRemoteStoreUnlisten=YD.bind(null,r.syncEngine),n}function i3(s,r,n={}){const t=new Uo;return s.asyncQueue.enqueueAndForget(async()=>function(c,l,f,a,d){const _=new hj({next:h=>{_.Za(),l.enqueueAndForget(()=>rj(c,w));const m=h.docs.has(f);!m&&h.fromCache?d.reject(new Ct(ht.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&h.fromCache&&a&&a.source==="server"?d.reject(new Ct(ht.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(h)},error:h=>d.reject(h)}),w=new nj(fv(f.path),_,{includeMetadataChanges:!0,_a:!0});return tj(c,w)}(await pj(s),s.asyncQueue,r,n,t)),t.promise}function o3(s,r,n={}){const t=new Uo;return s.asyncQueue.enqueueAndForget(async()=>function(c,l,f,a,d){const _=new hj({next:h=>{_.Za(),l.enqueueAndForget(()=>rj(c,w)),h.fromCache&&a.source==="server"?d.reject(new Ct(ht.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(h)},error:h=>d.reject(h)}),w=new nj(f,_,{includeMetadataChanges:!0,_a:!0});return tj(c,w)}(await pj(s),s.asyncQueue,r,n,t)),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(s){const r={};return s.timeoutSeconds!==void 0&&(r.timeoutSeconds=s.timeoutSeconds),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gj(s,r,n){if(!n)throw new Ct(ht.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${r}.`)}function a3(s,r,n,t){if(r===!0&&t===!0)throw new Ct(ht.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function Nw(s){if(!Vt.isDocumentKey(s))throw new Ct(ht.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Lw(s){if(Vt.isDocumentKey(s))throw new Ct(ht.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function op(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const r=function(t){return t.constructor?t.constructor.name:null}(s);return r?`a custom ${r} object`:"an object"}}return typeof s=="function"?"a function":Yt()}function Ma(s,r){if("_delegate"in s&&(s=s._delegate),!(s instanceof r)){if(r.name===s.constructor.name)throw new Ct(ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=op(s);throw new Ct(ht.INVALID_ARGUMENT,`Expected type '${r.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(r){var n,t;if(r.host===void 0){if(r.ssl!==void 0)throw new Ct(ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=r.host,this.ssl=(n=r.ssl)===null||n===void 0||n;if(this.credentials=r.credentials,this.ignoreUndefinedProperties=!!r.ignoreUndefinedProperties,this.localCache=r.localCache,r.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(r.cacheSizeBytes!==-1&&r.cacheSizeBytes<1048576)throw new Ct(ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=r.cacheSizeBytes}a3("experimentalForceLongPolling",r.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",r.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!r.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:r.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!r.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mj((t=r.experimentalLongPollingOptions)!==null&&t!==void 0?t:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new Ct(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new Ct(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new Ct(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!r.useFetchStreams}isEqual(r){return this.host===r.host&&this.ssl===r.ssl&&this.credentials===r.credentials&&this.cacheSizeBytes===r.cacheSizeBytes&&this.experimentalForceLongPolling===r.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===r.experimentalAutoDetectLongPolling&&function(t,o){return t.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,r.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===r.ignoreUndefinedProperties&&this.useFetchStreams===r.useFetchStreams}}class ap{constructor(r,n,t,o){this._authCredentials=r,this._appCheckCredentials=n,this._databaseId=t,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ct(ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(r){if(this._settingsFrozen)throw new Ct(ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uw(r),r.credentials!==void 0&&(this._authCredentials=function(t){if(!t)return new EM;switch(t.type){case"firstParty":return new RM(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ct(ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(r.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const t=Dw.get(n);t&&(It("ComponentProvider","Removing Datastore"),Dw.delete(n),t.terminate())}(this),Promise.resolve()}}function l3(s,r,n,t={}){var o;const c=(s=Ma(s,ap))._getSettings(),l=`${r}:${n}`;if(c.host!=="firestore.googleapis.com"&&c.host!==l&&Tu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),s._setSettings(Object.assign(Object.assign({},c),{host:l,ssl:!1})),t.mockUserToken){let f,a;if(typeof t.mockUserToken=="string")f=t.mockUserToken,a=hs.MOCK_USER;else{f=uS(t.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const d=t.mockUserToken.sub||t.mockUserToken.user_id;if(!d)throw new Ct(ht.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new hs(d)}s._authCredentials=new TM(new c2(f,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(r,n,t){this.converter=n,this._query=t,this.type="query",this.firestore=r}withConverter(r){return new Gu(this.firestore,r,this._query)}}class Ms{constructor(r,n,t){this.converter=n,this._key=t,this.type="document",this.firestore=r}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ra(this.firestore,this.converter,this._key.path.popLast())}withConverter(r){return new Ms(this.firestore,r,this._key)}}class Ra extends Gu{constructor(r,n,t){super(r,n,fv(t)),this._path=t,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const r=this._path.popLast();return r.isEmpty()?null:new Ms(this.firestore,null,new Vt(r))}withConverter(r){return new Ra(this.firestore,r,this._path)}}function Ks(s,r,...n){if(s=Ir(s),gj("collection","path",r),s instanceof ap){const t=Kr.fromString(r,...n);return Lw(t),new Ra(s,null,t)}{if(!(s instanceof Ms||s instanceof Ra))throw new Ct(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const t=s._path.child(Kr.fromString(r,...n));return Lw(t),new Ra(s.firestore,null,t)}}function gi(s,r,...n){if(s=Ir(s),arguments.length===1&&(r=d2.newId()),gj("doc","path",r),s instanceof ap){const t=Kr.fromString(r,...n);return Nw(t),new Ms(s,null,new Vt(t))}{if(!(s instanceof Ms||s instanceof Ra))throw new Ct(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const t=s._path.child(Kr.fromString(r,...n));return Nw(t),new Ms(s.firestore,s instanceof Ra?s.converter:null,new Vt(t))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(r=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Y2(this,"async_queue_retry"),this.Vu=()=>{const t=Sg();t&&It("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()},this.mu=r;const n=Sg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(r){this.enqueue(r)}enqueueAndForgetEvenWhileRestricted(r){this.fu(),this.gu(r)}enterRestrictedMode(r){if(!this.Iu){this.Iu=!0,this.Au=r||!1;const n=Sg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(r){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Uo;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(r().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(r){this.enqueueAndForget(()=>(this.Pu.push(r),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(r){if(!Sd(r))throw r;It("AsyncQueue","Operation failed with retryable error: "+r)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(r){const n=this.mu.then(()=>(this.du=!0,r().catch(t=>{this.Eu=t,this.du=!1;const o=function(l){let f=l.message||"";return l.stack&&(f=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),f}(t);throw Ho("INTERNAL UNHANDLED ERROR: ",o),t}).then(t=>(this.du=!1,t))));return this.mu=n,n}enqueueAfterDelay(r,n,t){this.fu(),this.Ru.indexOf(r)>-1&&(n=0);const o=Ev.createAndSchedule(this,r,n,t,c=>this.yu(c));return this.Tu.push(o),o}fu(){this.Eu&&Yt()}verifyOperationInProgress(){}async wu(){let r;do r=this.mu,await r;while(r!==this.mu)}Su(r){for(const n of this.Tu)if(n.timerId===r)return!0;return!1}bu(r){return this.wu().then(()=>{this.Tu.sort((n,t)=>n.targetTimeMs-t.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),r!=="all"&&n.timerId===r)break;return this.wu()})}Du(r){this.Ru.push(r)}yu(r){const n=this.Tu.indexOf(r);this.Tu.splice(n,1)}}class Rd extends ap{constructor(r,n,t,o){super(r,n,t,o),this.type="firestore",this._queue=new Fw,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const r=this._firestoreClient.terminate();this._queue=new Fw(r),this._firestoreClient=void 0,await r}}}function u3(s,r){const n=typeof s=="object"?s:md(),t=typeof s=="string"?s:"(default)",o=Da(n,"firestore").getImmediate({identifier:t});if(!o._initialized){const c=oS("firestore");c&&l3(o,...c)}return o}function Rv(s){if(s._terminated)throw new Ct(ht.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||c3(s),s._firestoreClient}function c3(s){var r,n,t;const o=s._freezeSettings(),c=function(f,a,d,_){return new GM(f,a,d,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,mj(_.experimentalLongPollingOptions),_.useFetchStreams)}(s._databaseId,((r=s._app)===null||r===void 0?void 0:r.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((t=o.localCache)===null||t===void 0)&&t._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new r3(s._authCredentials,s._appCheckCredentials,s._queue,c,s._componentsProvider&&function(f){const a=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(a),_online:a}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(r){this._byteString=r}static fromBase64String(r){try{return new ku(ns.fromBase64String(r))}catch(n){throw new Ct(ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(r){return new ku(ns.fromUint8Array(r))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(r){return this._byteString.isEqual(r._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(...r){for(let n=0;n<r.length;++n)if(r[n].length===0)throw new Ct(ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new es(r)}isEqual(r){return this._internalPath.isEqual(r._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(r){this._methodName=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(r,n){if(!isFinite(r)||r<-90||r>90)throw new Ct(ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+r);if(!isFinite(n)||n<-180||n>180)throw new Ct(ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=r,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(r){return this._lat===r._lat&&this._long===r._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(r){return xr(this._lat,r._lat)||xr(this._long,r._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(r){this._values=(r||[]).map(n=>n)}toArray(){return this._values.map(r=>r)}isEqual(r){return function(t,o){if(t.length!==o.length)return!1;for(let c=0;c<t.length;++c)if(t[c]!==o[c])return!1;return!0}(this._values,r._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3=/^__.*__$/;class h3{constructor(r,n,t){this.data=r,this.fieldMask=n,this.fieldTransforms=t}toMutation(r,n){return this.fieldMask!==null?new Pl(r,this.data,this.fieldMask,n,this.fieldTransforms):new Ed(r,this.data,n,this.fieldTransforms)}}function vj(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Yt()}}class Mv{constructor(r,n,t,o,c,l){this.settings=r,this.databaseId=n,this.serializer=t,this.ignoreUndefinedProperties=o,c===void 0&&this.vu(),this.fieldTransforms=c||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(r){return new Mv(Object.assign(Object.assign({},this.settings),r),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(r){var n;const t=(n=this.path)===null||n===void 0?void 0:n.child(r),o=this.Fu({path:t,xu:!1});return o.Ou(r),o}Nu(r){var n;const t=(n=this.path)===null||n===void 0?void 0:n.child(r),o=this.Fu({path:t,xu:!1});return o.vu(),o}Lu(r){return this.Fu({path:void 0,xu:!0})}Bu(r){return Rf(r,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(r){return this.fieldMask.find(n=>r.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>r.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let r=0;r<this.path.length;r++)this.Ou(this.path.get(r))}Ou(r){if(r.length===0)throw this.Bu("Document fields must not be empty");if(vj(this.Cu)&&d3.test(r))throw this.Bu('Document fields cannot begin and end with "__"')}}class f3{constructor(r,n,t){this.databaseId=r,this.ignoreUndefinedProperties=n,this.serializer=t||np(r)}Qu(r,n,t,o=!1){return new Mv({Cu:r,methodName:n,qu:t,path:es.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pv(s){const r=s._freezeSettings(),n=np(s._databaseId);return new f3(s._databaseId,!!r.ignoreUndefinedProperties,n)}function bj(s,r,n,t,o,c={}){const l=s.Qu(c.merge||c.mergeFields?2:0,r,n,o);xj("Data must be an object, but it was:",l,t);const f=_j(t,l);let a,d;if(c.merge)a=new ki(l.fieldMask),d=l.fieldTransforms;else if(c.mergeFields){const _=[];for(const w of c.mergeFields){const h=m3(r,w,n);if(!l.contains(h))throw new Ct(ht.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);y3(_,h)||_.push(h)}a=new ki(_),d=l.fieldTransforms.filter(w=>a.covers(w.field))}else a=null,d=l.fieldTransforms;return new h3(new fi(f),a,d)}function p3(s,r,n,t=!1){return Dv(n,s.Qu(t?4:3,r))}function Dv(s,r){if(wj(s=Ir(s)))return xj("Unsupported field value:",r,s),_j(s,r);if(s instanceof yj)return function(t,o){if(!vj(o.Cu))throw o.Bu(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${t._methodName}() is not currently supported inside arrays`);const c=t._toFieldTransform(o);c&&o.fieldTransforms.push(c)}(s,r),null;if(s===void 0&&r.ignoreUndefinedProperties)return null;if(r.path&&r.fieldMask.push(r.path),s instanceof Array){if(r.settings.xu&&r.Cu!==4)throw r.Bu("Nested arrays are not supported");return function(t,o){const c=[];let l=0;for(const f of t){let a=Dv(f,o.Lu(l));a==null&&(a={nullValue:"NULL_VALUE"}),c.push(a),l++}return{arrayValue:{values:c}}}(s,r)}return function(t,o){if((t=Ir(t))===null)return{nullValue:"NULL_VALUE"};if(typeof t=="number")return cP(o.serializer,t);if(typeof t=="boolean")return{booleanValue:t};if(typeof t=="string")return{stringValue:t};if(t instanceof Date){const c=On.fromDate(t);return{timestampValue:Tf(o.serializer,c)}}if(t instanceof On){const c=new On(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Tf(o.serializer,c)}}if(t instanceof Iv)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ku)return{bytesValue:U2(o.serializer,t._byteString)};if(t instanceof Ms){const c=o.databaseId,l=t.firestore._databaseId;if(!l.isEqual(c))throw o.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:yv(t.firestore._databaseId||o.databaseId,t._key.path)}}if(t instanceof kv)return function(l,f){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(a=>{if(typeof a!="number")throw f.Bu("VectorValues must only contain numeric values.");return pv(f.serializer,a)})}}}}}}(t,o);throw o.Bu(`Unsupported field value: ${op(t)}`)}(s,r)}function _j(s,r){const n={};return h2(s)?r.path&&r.path.length>0&&r.fieldMask.push(r.path):Fu(s,(t,o)=>{const c=Dv(o,r.Mu(t));c!=null&&(n[t]=c)}),{mapValue:{fields:n}}}function wj(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof On||s instanceof Iv||s instanceof ku||s instanceof Ms||s instanceof yj||s instanceof kv)}function xj(s,r,n){if(!wj(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const t=op(n);throw t==="an object"?r.Bu(s+" a custom object"):r.Bu(s+" "+t)}}function m3(s,r,n){if((r=Ir(r))instanceof Ov)return r._internalPath;if(typeof r=="string")return Sj(s,r);throw Rf("Field path arguments must be of type string or ",s,!1,void 0,n)}const g3=new RegExp("[~\\*/\\[\\]]");function Sj(s,r,n){if(r.search(g3)>=0)throw Rf(`Invalid field path (${r}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Ov(...r.split("."))._internalPath}catch{throw Rf(`Invalid field path (${r}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Rf(s,r,n,t,o){const c=t&&!t.isEmpty(),l=o!==void 0;let f=`Function ${r}() called with invalid data`;n&&(f+=" (via `toFirestore()`)"),f+=". ";let a="";return(c||l)&&(a+=" (found",c&&(a+=` in field ${t}`),l&&(a+=` in document ${o}`),a+=")"),new Ct(ht.INVALID_ARGUMENT,f+s+a)}function y3(s,r){return s.some(n=>n.isEqual(r))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(r,n,t,o,c){this._firestore=r,this._userDataWriter=n,this._key=t,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ms(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const r=new v3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(r)}return this._userDataWriter.convertValue(this._document.data.value)}}get(r){if(this._document){const n=this._document.data.field(Nv("DocumentSnapshot.get",r));if(n!==null)return this._userDataWriter.convertValue(n)}}}class v3 extends jj{data(){return super.data()}}function Nv(s,r){return typeof r=="string"?Sj(s,r):r instanceof Ov?r._internalPath:r._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ct(ht.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lv{}class _3 extends Lv{}function w3(s,r,...n){let t=[];r instanceof Lv&&t.push(r),t=t.concat(n),function(c){const l=c.filter(a=>a instanceof Uv).length,f=c.filter(a=>a instanceof lp).length;if(l>1||l>0&&f>0)throw new Ct(ht.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(t);for(const o of t)s=o._apply(s);return s}class lp extends _3{constructor(r,n,t){super(),this._field=r,this._op=n,this._value=t,this.type="where"}static _create(r,n,t){return new lp(r,n,t)}_apply(r){const n=this._parse(r);return Ej(r._query,n),new Gu(r.firestore,r.converter,dy(r._query,n))}_parse(r){const n=Pv(r.firestore);return function(c,l,f,a,d,_,w){let h;if(d.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new Ct(ht.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Bw(w,_);const m=[];for(const b of w)m.push(Vw(a,c,b));h={arrayValue:{values:m}}}else h=Vw(a,c,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Bw(w,_),h=p3(f,l,w,_==="in"||_==="not-in");return Cn.create(d,_,h)}(r._query,"where",n,r.firestore._databaseId,this._field,this._op,this._value)}}function x3(s,r,n){const t=r,o=Nv("where",s);return lp._create(o,t,n)}class Uv extends Lv{constructor(r,n){super(),this.type=r,this._queryConstraints=n}static _create(r,n){return new Uv(r,n)}_parse(r){const n=this._queryConstraints.map(t=>t._parse(r)).filter(t=>t.getFilters().length>0);return n.length===1?n[0]:Di.create(n,this._getOperator())}_apply(r){const n=this._parse(r);return n.getFilters().length===0?r:(function(o,c){let l=o;const f=c.getFlattenedFilters();for(const a of f)Ej(l,a),l=dy(l,a)}(r._query,n),new Gu(r.firestore,r.converter,dy(r._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Vw(s,r,n){if(typeof(n=Ir(n))=="string"){if(n==="")throw new Ct(ht.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!w2(r)&&n.indexOf("/")!==-1)throw new Ct(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const t=r.path.child(Kr.fromString(n));if(!Vt.isDocumentKey(t))throw new Ct(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${t}' is not because it has an odd number of segments (${t.length}).`);return lw(s,new Vt(t))}if(n instanceof Ms)return lw(s,n._key);throw new Ct(ht.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${op(n)}.`)}function Bw(s,r){if(!Array.isArray(s)||s.length===0)throw new Ct(ht.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${r.toString()}' filters.`)}function Ej(s,r){const n=function(o,c){for(const l of o)for(const f of l.getFlattenedFilters())if(c.indexOf(f.op)>=0)return f.op;return null}(s.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(r.op));if(n!==null)throw n===r.op?new Ct(ht.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${r.op.toString()}' filter.`):new Ct(ht.INVALID_ARGUMENT,`Invalid query. You cannot use '${r.op.toString()}' filters with '${n.toString()}' filters.`)}class S3{convertValue(r,n="none"){switch(jl(r)){case 0:return null;case 1:return r.booleanValue;case 2:return yn(r.integerValue||r.doubleValue);case 3:return this.convertTimestamp(r.timestampValue);case 4:return this.convertServerTimestamp(r,n);case 5:return r.stringValue;case 6:return this.convertBytes(Sl(r.bytesValue));case 7:return this.convertReference(r.referenceValue);case 8:return this.convertGeoPoint(r.geoPointValue);case 9:return this.convertArray(r.arrayValue,n);case 11:return this.convertObject(r.mapValue,n);case 10:return this.convertVectorValue(r.mapValue);default:throw Yt()}}convertObject(r,n){return this.convertObjectMap(r.fields,n)}convertObjectMap(r,n="none"){const t={};return Fu(r,(o,c)=>{t[o]=this.convertValue(c,n)}),t}convertVectorValue(r){var n,t,o;const c=(o=(t=(n=r.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||t===void 0?void 0:t.values)===null||o===void 0?void 0:o.map(l=>yn(l.doubleValue));return new kv(c)}convertGeoPoint(r){return new Iv(yn(r.latitude),yn(r.longitude))}convertArray(r,n){return(r.values||[]).map(t=>this.convertValue(t,n))}convertServerTimestamp(r,n){switch(n){case"previous":const t=uv(r);return t==null?null:this.convertValue(t,n);case"estimate":return this.convertTimestamp(id(r));default:return null}}convertTimestamp(r){const n=Ia(r);return new On(n.seconds,n.nanos)}convertDocumentKey(r,n){const t=Kr.fromString(r);Mr(H2(t));const o=new od(t.get(1),t.get(3)),c=new Vt(t.popFirst(5));return o.isEqual(n)||Ho(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tj(s,r,n){let t;return t=s?s.toFirestore(r):r,t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(r,n){this.hasPendingWrites=r,this.fromCache=n}isEqual(r){return this.hasPendingWrites===r.hasPendingWrites&&this.fromCache===r.fromCache}}class Cj extends jj{constructor(r,n,t,o,c,l){super(r,n,t,o,l),this._firestore=r,this._firestoreImpl=r,this.metadata=c}exists(){return super.exists()}data(r={}){if(this._document){if(this._converter){const n=new of(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,r)}return this._userDataWriter.convertValue(this._document.data.value,r.serverTimestamps)}}get(r,n={}){if(this._document){const t=this._document.data.field(Nv("DocumentSnapshot.get",r));if(t!==null)return this._userDataWriter.convertValue(t,n.serverTimestamps)}}}class of extends Cj{data(r={}){return super.data(r)}}class j3{constructor(r,n,t,o){this._firestore=r,this._userDataWriter=n,this._snapshot=o,this.metadata=new Gc(o.hasPendingWrites,o.fromCache),this.query=t}get docs(){const r=[];return this.forEach(n=>r.push(n)),r}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(r,n){this._snapshot.docs.forEach(t=>{r.call(n,new of(this._firestore,this._userDataWriter,t.key,t,new Gc(this._snapshot.mutatedKeys.has(t.key),this._snapshot.fromCache),this.query.converter))})}docChanges(r={}){const n=!!r.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ct(ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,c){if(o._snapshot.oldDocs.isEmpty()){let l=0;return o._snapshot.docChanges.map(f=>{const a=new of(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Gc(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:a,oldIndex:-1,newIndex:l++}})}{let l=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(f=>c||f.type!==3).map(f=>{const a=new of(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Gc(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let d=-1,_=-1;return f.type!==0&&(d=l.indexOf(f.doc.key),l=l.delete(f.doc.key)),f.type!==1&&(l=l.add(f.doc),_=l.indexOf(f.doc.key)),{type:E3(f.type),doc:a,oldIndex:d,newIndex:_}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function E3(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Yt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aj(s){s=Ma(s,Ms);const r=Ma(s.firestore,Rd);return i3(Rv(r),s._key).then(n=>T3(r,s,n))}class Rj extends S3{constructor(r){super(),this.firestore=r}convertBytes(r){return new ku(r)}convertReference(r){const n=this.convertDocumentKey(r,this.firestore._databaseId);return new Ms(this.firestore,null,n)}}function Fv(s){s=Ma(s,Gu);const r=Ma(s.firestore,Rd),n=Rv(r),t=new Rj(r);return b3(s._query),o3(n,s._query).then(o=>new j3(r,t,s,o))}function Yo(s,r,n){s=Ma(s,Ms);const t=Ma(s.firestore,Rd),o=Tj(s.converter,r);return Oj(t,[bj(Pv(t),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,to.none())])}function wy(s,r){const n=Ma(s.firestore,Rd),t=gi(s),o=Tj(s.converter,r);return Oj(n,[bj(Pv(s.firestore),"addDoc",t._key,o,s.converter!==null,{}).toMutation(t._key,to.exists(!1))]).then(()=>t)}function Oj(s,r){return function(t,o){const c=new Uo;return t.asyncQueue.enqueueAndForget(async()=>$D(await s3(t),o,c)),c.promise}(Rv(s),r)}function T3(s,r,n){const t=n.docs.get(r._key),o=new Rj(s);return new Cj(s,o,r._key,t,new Gc(n.hasPendingWrites,n.fromCache),r.converter)}(function(r,n=!0){(function(o){Uu=o})(kl),Pi(new mi("firestore",(t,{instanceIdentifier:o,options:c})=>{const l=t.getProvider("app").getImmediate(),f=new Rd(new CM(t.getProvider("auth-internal")),new IM(t.getProvider("app-check-internal")),function(d,_){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ct(ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new od(d.options.projectId,_)}(l,o),l);return c=Object.assign({useFetchStreams:n},c),f._setSettings(c),f},"PUBLIC").setMultipleInstances(!0)),Is(nw,"4.7.3",r),Is(nw,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij="firebasestorage.googleapis.com",kj="storageBucket",C3=2*60*1e3,A3=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn extends yi{constructor(r,n,t=0){super(Eg(r),`Firebase Storage: ${n} (${Eg(r)})`),this.status_=t,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,hn.prototype)}get status(){return this.status_}set status(r){this.status_=r}_codeEquals(r){return Eg(r)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(r){this.customData.serverResponse=r,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var dn;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(dn||(dn={}));function Eg(s){return"storage/"+s}function Vv(){const s="An unknown error occurred, please check the error payload for server response.";return new hn(dn.UNKNOWN,s)}function R3(s){return new hn(dn.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function O3(s){return new hn(dn.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function I3(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new hn(dn.UNAUTHENTICATED,s)}function k3(){return new hn(dn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function M3(s){return new hn(dn.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function P3(){return new hn(dn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function D3(){return new hn(dn.CANCELED,"User canceled the upload/download.")}function N3(s){return new hn(dn.INVALID_URL,"Invalid URL '"+s+"'.")}function L3(s){return new hn(dn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function U3(){return new hn(dn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+kj+"' property when initializing the app?")}function F3(){return new hn(dn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function V3(){return new hn(dn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function B3(s){return new hn(dn.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function xy(s){return new hn(dn.INVALID_ARGUMENT,s)}function Mj(){return new hn(dn.APP_DELETED,"The Firebase app was deleted.")}function G3(s){return new hn(dn.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Xc(s,r){return new hn(dn.INVALID_FORMAT,"String does not match format '"+s+"': "+r)}function Oc(s){throw new hn(dn.INTERNAL_ERROR,"Internal error: "+s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(r,n){this.bucket=r,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const r=encodeURIComponent;return"/b/"+r(this.bucket)+"/o/"+r(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(r,n){let t;try{t=Ys.makeFromUrl(r,n)}catch{return new Ys(r,"")}if(t.path==="")return t;throw L3(r)}static makeFromUrl(r,n){let t=null;const o="([A-Za-z0-9.\\-_]+)";function c(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const l="(/(.*))?$",f=new RegExp("^gs://"+o+l,"i"),a={bucket:1,path:3};function d(j){j.path_=decodeURIComponent(j.path)}const _="v[A-Za-z0-9_]+",w=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",m=new RegExp(`^https?://${w}/${_}/b/${o}/o${h}`,"i"),b={bucket:1,path:3},v=n===Ij?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",p=new RegExp(`^https?://${v}/${o}/${g}`,"i"),S=[{regex:f,indices:a,postModify:c},{regex:m,indices:b,postModify:d},{regex:p,indices:{bucket:1,path:2},postModify:d}];for(let j=0;j<S.length;j++){const A=S[j],N=A.regex.exec(r);if(N){const C=N[A.indices.bucket];let T=N[A.indices.path];T||(T=""),t=new Ys(C,T),A.postModify(t);break}}if(t==null)throw N3(r);return t}}class z3{constructor(r){this.promise_=Promise.reject(r)}getPromise(){return this.promise_}cancel(r=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3(s,r,n){let t=1,o=null,c=null,l=!1,f=0;function a(){return f===2}let d=!1;function _(...g){d||(d=!0,r.apply(null,g))}function w(g){o=setTimeout(()=>{o=null,s(m,a())},g)}function h(){c&&clearTimeout(c)}function m(g,...p){if(d){h();return}if(g){h(),_.call(null,g,...p);return}if(a()||l){h(),_.call(null,g,...p);return}t<64&&(t*=2);let S;f===1?(f=2,S=0):S=(t+Math.random())*1e3,w(S)}let b=!1;function v(g){b||(b=!0,h(),!d&&(o!==null?(g||(f=2),clearTimeout(o),w(0)):g||(f=1)))}return w(0),c=setTimeout(()=>{l=!0,v(!0)},n),v}function q3(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W3(s){return s!==void 0}function Y3(s){return typeof s=="object"&&!Array.isArray(s)}function Bv(s){return typeof s=="string"||s instanceof String}function Gw(s){return Gv()&&s instanceof Blob}function Gv(){return typeof Blob<"u"}function zw(s,r,n,t){if(t<r)throw xy(`Invalid value for '${s}'. Expected ${r} or greater.`);if(t>n)throw xy(`Invalid value for '${s}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(s,r,n){let t=r;return n==null&&(t=`https://${r}`),`${n}://${t}/v0${s}`}function Pj(s){const r=encodeURIComponent;let n="?";for(const t in s)if(s.hasOwnProperty(t)){const o=r(t)+"="+r(s[t]);n=n+o+"&"}return n=n.slice(0,-1),n}var _l;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(_l||(_l={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3(s,r){const n=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,c=r.indexOf(s)!==-1;return n||o||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(r,n,t,o,c,l,f,a,d,_,w,h=!0){this.url_=r,this.method_=n,this.headers_=t,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=l,this.callback_=f,this.errorCallback_=a,this.timeout_=d,this.progressCallback_=_,this.connectionFactory_=w,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,b)=>{this.resolve_=m,this.reject_=b,this.start_()})}start_(){const r=(t,o)=>{if(o){t(!1,new Nh(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const l=f=>{const a=f.loaded,d=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(a,d)};this.progressCallback_!==null&&c.addUploadProgressListener(l),c.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(l),this.pendingConnection_=null;const f=c.getErrorCode()===_l.NO_ERROR,a=c.getStatus();if(!f||$3(a,this.additionalRetryCodes_)&&this.retry){const _=c.getErrorCode()===_l.ABORT;t(!1,new Nh(!1,null,_));return}const d=this.successCodes_.indexOf(a)!==-1;t(!0,new Nh(d,c))})},n=(t,o)=>{const c=this.resolve_,l=this.reject_,f=o.connection;if(o.wasSuccessCode)try{const a=this.callback_(f,f.getResponse());W3(a)?c(a):c()}catch(a){l(a)}else if(f!==null){const a=Vv();a.serverResponse=f.getErrorText(),this.errorCallback_?l(this.errorCallback_(f,a)):l(a)}else if(o.canceled){const a=this.appDelete_?Mj():D3();l(a)}else{const a=P3();l(a)}};this.canceled_?n(!1,new Nh(!1,null,!0)):this.backoffId_=H3(r,n,this.timeout_)}getPromise(){return this.promise_}cancel(r){this.canceled_=!0,this.appDelete_=r||!1,this.backoffId_!==null&&q3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Nh{constructor(r,n,t){this.wasSuccessCode=r,this.connection=n,this.canceled=!!t}}function K3(s,r){r!==null&&r.length>0&&(s.Authorization="Firebase "+r)}function Q3(s,r){s["X-Firebase-Storage-Version"]="webjs/"+(r??"AppManager")}function Z3(s,r){r&&(s["X-Firebase-GMPID"]=r)}function J3(s,r){r!==null&&(s["X-Firebase-AppCheck"]=r)}function eN(s,r,n,t,o,c,l=!0){const f=Pj(s.urlParams),a=s.url+f,d=Object.assign({},s.headers);return Z3(d,r),K3(d,n),Q3(d,c),J3(d,t),new X3(a,s.method,d,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function rN(...s){const r=tN();if(r!==void 0){const n=new r;for(let t=0;t<s.length;t++)n.append(s[t]);return n.getBlob()}else{if(Gv())return new Blob(s);throw new hn(dn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function nN(s,r,n){return s.webkitSlice?s.webkitSlice(r,n):s.mozSlice?s.mozSlice(r,n):s.slice?s.slice(r,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(s){if(typeof atob>"u")throw B3("base-64");return atob(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Tg{constructor(r,n){this.data=r,this.contentType=n||null}}function Dj(s,r){switch(s){case Mi.RAW:return new Tg(Nj(r));case Mi.BASE64:case Mi.BASE64URL:return new Tg(Lj(s,r));case Mi.DATA_URL:return new Tg(oN(r),aN(r))}throw Vv()}function Nj(s){const r=[];for(let n=0;n<s.length;n++){let t=s.charCodeAt(n);if(t<=127)r.push(t);else if(t<=2047)r.push(192|t>>6,128|t&63);else if((t&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))r.push(239,191,189);else{const c=t,l=s.charCodeAt(++n);t=65536|(c&1023)<<10|l&1023,r.push(240|t>>18,128|t>>12&63,128|t>>6&63,128|t&63)}else(t&64512)===56320?r.push(239,191,189):r.push(224|t>>12,128|t>>6&63,128|t&63)}return new Uint8Array(r)}function iN(s){let r;try{r=decodeURIComponent(s)}catch{throw Xc(Mi.DATA_URL,"Malformed data URL.")}return Nj(r)}function Lj(s,r){switch(s){case Mi.BASE64:{const o=r.indexOf("-")!==-1,c=r.indexOf("_")!==-1;if(o||c)throw Xc(s,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Mi.BASE64URL:{const o=r.indexOf("+")!==-1,c=r.indexOf("/")!==-1;if(o||c)throw Xc(s,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");r=r.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=sN(r)}catch(o){throw o.message.includes("polyfill")?o:Xc(s,"Invalid character found")}const t=new Uint8Array(n.length);for(let o=0;o<n.length;o++)t[o]=n.charCodeAt(o);return t}class Uj{constructor(r){this.base64=!1,this.contentType=null;const n=r.match(/^data:([^,]+)?,/);if(n===null)throw Xc(Mi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const t=n[1]||null;t!=null&&(this.base64=lN(t,";base64"),this.contentType=this.base64?t.substring(0,t.length-7):t),this.rest=r.substring(r.indexOf(",")+1)}}function oN(s){const r=new Uj(s);return r.base64?Lj(Mi.BASE64,r.rest):iN(r.rest)}function aN(s){return new Uj(s).contentType}function lN(s,r){return s.length>=r.length?s.substring(s.length-r.length)===r:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(r,n){let t=0,o="";Gw(r)?(this.data_=r,t=r.size,o=r.type):r instanceof ArrayBuffer?(n?this.data_=new Uint8Array(r):(this.data_=new Uint8Array(r.byteLength),this.data_.set(new Uint8Array(r))),t=this.data_.length):r instanceof Uint8Array&&(n?this.data_=r:(this.data_=new Uint8Array(r.length),this.data_.set(r)),t=r.length),this.size_=t,this.type_=o}size(){return this.size_}type(){return this.type_}slice(r,n){if(Gw(this.data_)){const t=this.data_,o=nN(t,r,n);return o===null?null:new xa(o)}else{const t=new Uint8Array(this.data_.buffer,r,n-r);return new xa(t,!0)}}static getBlob(...r){if(Gv()){const n=r.map(t=>t instanceof xa?t.data_:t);return new xa(rN.apply(null,n))}else{const n=r.map(l=>Bv(l)?Dj(Mi.RAW,l).data:l.data_);let t=0;n.forEach(l=>{t+=l.byteLength});const o=new Uint8Array(t);let c=0;return n.forEach(l=>{for(let f=0;f<l.length;f++)o[c++]=l[f]}),new xa(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(s){let r;try{r=JSON.parse(s)}catch{return null}return Y3(r)?r:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(s){if(s.length===0)return null;const r=s.lastIndexOf("/");return r===-1?"":s.slice(0,r)}function cN(s,r){const n=r.split("/").filter(t=>t.length>0).join("/");return s.length===0?n:s+"/"+n}function Vj(s){const r=s.lastIndexOf("/",s.length-2);return r===-1?s:s.slice(r+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(s,r){return r}class _s{constructor(r,n,t,o){this.server=r,this.local=n||r,this.writable=!!t,this.xform=o||dN}}let Lh=null;function hN(s){return!Bv(s)||s.length<2?s:Vj(s)}function Bj(){if(Lh)return Lh;const s=[];s.push(new _s("bucket")),s.push(new _s("generation")),s.push(new _s("metageneration")),s.push(new _s("name","fullPath",!0));function r(c,l){return hN(l)}const n=new _s("name");n.xform=r,s.push(n);function t(c,l){return l!==void 0?Number(l):l}const o=new _s("size");return o.xform=t,s.push(o),s.push(new _s("timeCreated")),s.push(new _s("updated")),s.push(new _s("md5Hash",null,!0)),s.push(new _s("cacheControl",null,!0)),s.push(new _s("contentDisposition",null,!0)),s.push(new _s("contentEncoding",null,!0)),s.push(new _s("contentLanguage",null,!0)),s.push(new _s("contentType",null,!0)),s.push(new _s("metadata","customMetadata",!0)),Lh=s,Lh}function fN(s,r){function n(){const t=s.bucket,o=s.fullPath,c=new Ys(t,o);return r._makeStorageReference(c)}Object.defineProperty(s,"ref",{get:n})}function pN(s,r,n){const t={};t.type="file";const o=n.length;for(let c=0;c<o;c++){const l=n[c];t[l.local]=l.xform(t,r[l.server])}return fN(t,s),t}function Gj(s,r,n){const t=Fj(r);return t===null?null:pN(s,t,n)}function mN(s,r,n,t){const o=Fj(r);if(o===null||!Bv(o.downloadTokens))return null;const c=o.downloadTokens;if(c.length===0)return null;const l=encodeURIComponent;return c.split(",").map(d=>{const _=s.bucket,w=s.fullPath,h="/b/"+l(_)+"/o/"+l(w),m=zv(h,n,t),b=Pj({alt:"media",token:d});return m+b})[0]}function gN(s,r){const n={},t=r.length;for(let o=0;o<t;o++){const c=r[o];c.writable&&(n[c.server]=s[c.local])}return JSON.stringify(n)}class zj{constructor(r,n,t,o){this.url=r,this.method=n,this.handler=t,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hj(s){if(!s)throw Vv()}function yN(s,r){function n(t,o){const c=Gj(s,o,r);return Hj(c!==null),c}return n}function vN(s,r){function n(t,o){const c=Gj(s,o,r);return Hj(c!==null),mN(c,o,s.host,s._protocol)}return n}function qj(s){function r(n,t){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=k3():o=I3():n.getStatus()===402?o=O3(s.bucket):n.getStatus()===403?o=M3(s.path):o=t,o.status=n.getStatus(),o.serverResponse=t.serverResponse,o}return r}function bN(s){const r=qj(s);function n(t,o){let c=r(t,o);return t.getStatus()===404&&(c=R3(s.path)),c.serverResponse=o.serverResponse,c}return n}function _N(s,r,n){const t=r.fullServerUrl(),o=zv(t,s.host,s._protocol),c="GET",l=s.maxOperationRetryTime,f=new zj(o,c,vN(s,n),l);return f.errorHandler=bN(r),f}function wN(s,r){return s&&s.contentType||r&&r.type()||"application/octet-stream"}function xN(s,r,n){const t=Object.assign({},n);return t.fullPath=s.path,t.size=r.size(),t.contentType||(t.contentType=wN(null,r)),t}function SN(s,r,n,t,o){const c=r.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function f(){let S="";for(let j=0;j<2;j++)S=S+Math.random().toString().slice(2);return S}const a=f();l["Content-Type"]="multipart/related; boundary="+a;const d=xN(r,t,o),_=gN(d,n),w="--"+a+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+a+`\r
Content-Type: `+d.contentType+`\r
\r
`,h=`\r
--`+a+"--",m=xa.getBlob(w,t,h);if(m===null)throw F3();const b={name:d.fullPath},v=zv(c,s.host,s._protocol),g="POST",p=s.maxUploadRetryTime,y=new zj(v,g,yN(s,n),p);return y.urlParams=b,y.headers=l,y.body=m.uploadData(),y.errorHandler=qj(r),y}class jN{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_l.NO_ERROR,this.sendPromise_=new Promise(r=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_l.ABORT,r()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_l.NETWORK_ERROR,r()}),this.xhr_.addEventListener("load",()=>{r()})})}send(r,n,t,o){if(this.sent_)throw Oc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,r,!0),o!==void 0)for(const c in o)o.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,o[c].toString());return t!==void 0?this.xhr_.send(t):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Oc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Oc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Oc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Oc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(r){return this.xhr_.getResponseHeader(r)}addUploadProgressListener(r){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",r)}removeUploadProgressListener(r){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",r)}}class EN extends jN{initXhr(){this.xhr_.responseType="text"}}function Wj(){return new EN}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(r,n){this._service=r,n instanceof Ys?this._location=n:this._location=Ys.makeFromUrl(n,r.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(r,n){return new El(r,n)}get root(){const r=new Ys(this._location.bucket,"");return this._newRef(this._service,r)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Vj(this._location.path)}get storage(){return this._service}get parent(){const r=uN(this._location.path);if(r===null)return null;const n=new Ys(this._location.bucket,r);return new El(this._service,n)}_throwIfRoot(r){if(this._location.path==="")throw G3(r)}}function Yj(s,r,n){s._throwIfRoot("uploadBytes");const t=SN(s.storage,s._location,Bj(),new xa(r,!0),n);return s.storage.makeRequestWithTokens(t,Wj).then(o=>({metadata:o,ref:s}))}function TN(s,r,n=Mi.RAW,t){s._throwIfRoot("uploadString");const o=Dj(n,r),c=Object.assign({},t);return c.contentType==null&&o.contentType!=null&&(c.contentType=o.contentType),Yj(s,o.data,c)}function CN(s){s._throwIfRoot("getDownloadURL");const r=_N(s.storage,s._location,Bj());return s.storage.makeRequestWithTokens(r,Wj).then(n=>{if(n===null)throw V3();return n})}function AN(s,r){const n=cN(s._location.path,r),t=new Ys(s._location.bucket,n);return new El(s.storage,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(s){return/^[A-Za-z]+:\/\//.test(s)}function ON(s,r){return new El(s,r)}function $j(s,r){if(s instanceof Hv){const n=s;if(n._bucket==null)throw U3();const t=new El(n,n._bucket);return r!=null?$j(t,r):t}else return r!==void 0?AN(s,r):s}function IN(s,r){if(r&&RN(r)){if(s instanceof Hv)return ON(s,r);throw xy("To use ref(service, url), the first argument must be a Storage instance.")}else return $j(s,r)}function Hw(s,r){const n=r==null?void 0:r[kj];return n==null?null:Ys.makeFromBucketSpec(n,s)}function kN(s,r,n,t={}){s.host=`${r}:${n}`,s._protocol="http";const{mockUserToken:o}=t;o&&(s._overrideAuthToken=typeof o=="string"?o:uS(o,s.app.options.projectId))}class Hv{constructor(r,n,t,o,c){this.app=r,this._authProvider=n,this._appCheckProvider=t,this._url=o,this._firebaseVersion=c,this._bucket=null,this._host=Ij,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=C3,this._maxUploadRetryTime=A3,this._requests=new Set,o!=null?this._bucket=Ys.makeFromBucketSpec(o,this._host):this._bucket=Hw(this._host,this.app.options)}get host(){return this._host}set host(r){this._host=r,this._url!=null?this._bucket=Ys.makeFromBucketSpec(this._url,r):this._bucket=Hw(r,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(r){zw("time",0,Number.POSITIVE_INFINITY,r),this._maxUploadRetryTime=r}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(r){zw("time",0,Number.POSITIVE_INFINITY,r),this._maxOperationRetryTime=r}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const r=this._authProvider.getImmediate({optional:!0});if(r){const n=await r.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const r=this._appCheckProvider.getImmediate({optional:!0});return r?(await r.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(r=>r.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(r){return new El(this,r)}_makeRequest(r,n,t,o,c=!0){if(this._deleted)return new z3(Mj());{const l=eN(r,this._appId,t,o,n,this._firebaseVersion,c);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(r,n){const[t,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(r,n,t,o).getPromise()}}const qw="@firebase/storage",Ww="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj="storage";function Od(s,r,n){return s=Ir(s),Yj(s,r,n)}function qv(s,r,n,t){return s=Ir(s),TN(s,r,n,t)}function MN(s){return s=Ir(s),CN(s)}function La(s,r){return s=Ir(s),IN(s,r)}function PN(s=md(),r){s=Ir(s);const t=Da(s,Xj).getImmediate({identifier:r}),o=oS("storage");return o&&DN(t,...o),t}function DN(s,r,n,t={}){kN(s,r,n,t)}function NN(s,{instanceIdentifier:r}){const n=s.getProvider("app").getImmediate(),t=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new Hv(n,t,o,r,kl)}function LN(){Pi(new mi(Xj,NN,"PUBLIC").setMultipleInstances(!0)),Is(qw,Ww,""),Is(qw,Ww,"esm2017")}LN();const Kj="@firebase/installations",Wv="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj=1e4,Zj=`w:${Wv}`,Jj="FIS_v2",UN="https://firebaseinstallations.googleapis.com/v1",FN=60*60*1e3,VN="installations",BN="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Tl=new Il(VN,BN,GN);function eE(s){return s instanceof yi&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE({projectId:s}){return`${UN}/projects/${s}/installations`}function rE(s){return{token:s.token,requestStatus:2,expiresIn:HN(s.expiresIn),creationTime:Date.now()}}async function nE(s,r){const t=(await r.json()).error;return Tl.create("request-failed",{requestName:s,serverCode:t.code,serverMessage:t.message,serverStatus:t.status})}function sE({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function zN(s,{refreshToken:r}){const n=sE(s);return n.append("Authorization",qN(r)),n}async function iE(s){const r=await s();return r.status>=500&&r.status<600?s():r}function HN(s){return Number(s.replace("s","000"))}function qN(s){return`${Jj} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WN({appConfig:s,heartbeatServiceProvider:r},{fid:n}){const t=tE(s),o=sE(s),c=r.getImmediate({optional:!0});if(c){const d=await c.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}const l={fid:n,authVersion:Jj,appId:s.appId,sdkVersion:Zj},f={method:"POST",headers:o,body:JSON.stringify(l)},a=await iE(()=>fetch(t,f));if(a.ok){const d=await a.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:rE(d.authToken)}}else throw await nE("Create Installation",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(s){return new Promise(r=>{setTimeout(r,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N=/^[cdef][\w-]{21}$/,Sy="";function XN(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const n=KN(s);return $N.test(n)?n:Sy}catch{return Sy}}function KN(s){return YN(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=new Map;function lE(s,r){const n=up(s);uE(n,r),QN(n,r)}function uE(s,r){const n=aE.get(s);if(n)for(const t of n)t(r)}function QN(s,r){const n=ZN();n&&n.postMessage({key:s,fid:r}),JN()}let yl=null;function ZN(){return!yl&&"BroadcastChannel"in self&&(yl=new BroadcastChannel("[Firebase] FID Change"),yl.onmessage=s=>{uE(s.data.key,s.data.fid)}),yl}function JN(){aE.size===0&&yl&&(yl.close(),yl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL="firebase-installations-database",tL=1,Cl="firebase-installations-store";let Cg=null;function Yv(){return Cg||(Cg=fS(eL,tL,{upgrade:(s,r)=>{switch(r){case 0:s.createObjectStore(Cl)}}})),Cg}async function Of(s,r){const n=up(s),o=(await Yv()).transaction(Cl,"readwrite"),c=o.objectStore(Cl),l=await c.get(n);return await c.put(r,n),await o.done,(!l||l.fid!==r.fid)&&lE(s,r.fid),r}async function cE(s){const r=up(s),t=(await Yv()).transaction(Cl,"readwrite");await t.objectStore(Cl).delete(r),await t.done}async function cp(s,r){const n=up(s),o=(await Yv()).transaction(Cl,"readwrite"),c=o.objectStore(Cl),l=await c.get(n),f=r(l);return f===void 0?await c.delete(n):await c.put(f,n),await o.done,f&&(!l||l.fid!==f.fid)&&lE(s,f.fid),f}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $v(s){let r;const n=await cp(s.appConfig,t=>{const o=rL(t),c=nL(s,o);return r=c.registrationPromise,c.installationEntry});return n.fid===Sy?{installationEntry:await r}:{installationEntry:n,registrationPromise:r}}function rL(s){const r=s||{fid:XN(),registrationStatus:0};return dE(r)}function nL(s,r){if(r.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(Tl.create("app-offline"));return{installationEntry:r,registrationPromise:o}}const n={fid:r.fid,registrationStatus:1,registrationTime:Date.now()},t=sL(s,n);return{installationEntry:n,registrationPromise:t}}else return r.registrationStatus===1?{installationEntry:r,registrationPromise:iL(s)}:{installationEntry:r}}async function sL(s,r){try{const n=await WN(s,r);return Of(s.appConfig,n)}catch(n){throw eE(n)&&n.customData.serverCode===409?await cE(s.appConfig):await Of(s.appConfig,{fid:r.fid,registrationStatus:0}),n}}async function iL(s){let r=await Yw(s.appConfig);for(;r.registrationStatus===1;)await oE(100),r=await Yw(s.appConfig);if(r.registrationStatus===0){const{installationEntry:n,registrationPromise:t}=await $v(s);return t||n}return r}function Yw(s){return cp(s,r=>{if(!r)throw Tl.create("installation-not-found");return dE(r)})}function dE(s){return oL(s)?{fid:s.fid,registrationStatus:0}:s}function oL(s){return s.registrationStatus===1&&s.registrationTime+Qj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aL({appConfig:s,heartbeatServiceProvider:r},n){const t=lL(s,n),o=zN(s,n),c=r.getImmediate({optional:!0});if(c){const d=await c.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}const l={installation:{sdkVersion:Zj,appId:s.appId}},f={method:"POST",headers:o,body:JSON.stringify(l)},a=await iE(()=>fetch(t,f));if(a.ok){const d=await a.json();return rE(d)}else throw await nE("Generate Auth Token",a)}function lL(s,{fid:r}){return`${tE(s)}/${r}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xv(s,r=!1){let n;const t=await cp(s.appConfig,c=>{if(!hE(c))throw Tl.create("not-registered");const l=c.authToken;if(!r&&dL(l))return c;if(l.requestStatus===1)return n=uL(s,r),c;{if(!navigator.onLine)throw Tl.create("app-offline");const f=fL(c);return n=cL(s,f),f}});return n?await n:t.authToken}async function uL(s,r){let n=await $w(s.appConfig);for(;n.authToken.requestStatus===1;)await oE(100),n=await $w(s.appConfig);const t=n.authToken;return t.requestStatus===0?Xv(s,r):t}function $w(s){return cp(s,r=>{if(!hE(r))throw Tl.create("not-registered");const n=r.authToken;return pL(n)?Object.assign(Object.assign({},r),{authToken:{requestStatus:0}}):r})}async function cL(s,r){try{const n=await aL(s,r),t=Object.assign(Object.assign({},r),{authToken:n});return await Of(s.appConfig,t),n}catch(n){if(eE(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await cE(s.appConfig);else{const t=Object.assign(Object.assign({},r),{authToken:{requestStatus:0}});await Of(s.appConfig,t)}throw n}}function hE(s){return s!==void 0&&s.registrationStatus===2}function dL(s){return s.requestStatus===2&&!hL(s)}function hL(s){const r=Date.now();return r<s.creationTime||s.creationTime+s.expiresIn<r+FN}function fL(s){const r={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},s),{authToken:r})}function pL(s){return s.requestStatus===1&&s.requestTime+Qj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mL(s){const r=s,{installationEntry:n,registrationPromise:t}=await $v(r);return t?t.catch(console.error):Xv(r).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gL(s,r=!1){const n=s;return await yL(n),(await Xv(n,r)).token}async function yL(s){const{registrationPromise:r}=await $v(s);r&&await r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(s){if(!s||!s.options)throw Ag("App Configuration");if(!s.name)throw Ag("App Name");const r=["projectId","apiKey","appId"];for(const n of r)if(!s.options[n])throw Ag(n);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function Ag(s){return Tl.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="installations",bL="installations-internal",_L=s=>{const r=s.getProvider("app").getImmediate(),n=vL(r),t=Da(r,"heartbeat");return{app:r,appConfig:n,heartbeatServiceProvider:t,_delete:()=>Promise.resolve()}},wL=s=>{const r=s.getProvider("app").getImmediate(),n=Da(r,fE).getImmediate();return{getId:()=>mL(n),getToken:o=>gL(n,o)}};function xL(){Pi(new mi(fE,_L,"PUBLIC")),Pi(new mi(bL,wL,"PRIVATE"))}xL();Is(Kj,Wv);Is(Kj,Wv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If="analytics",SL="firebase_id",jL="origin",EL=60*1e3,TL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Kv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=new qf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},$s=new Il("analytics","Analytics",CL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AL(s){if(!s.startsWith(Kv)){const r=$s.create("invalid-gtag-resource",{gtagURL:s});return Ps.warn(r.message),""}return s}function pE(s){return Promise.all(s.map(r=>r.catch(n=>n)))}function RL(s,r){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(s,r)),n}function OL(s,r){const n=RL("firebase-js-sdk-policy",{createScriptURL:AL}),t=document.createElement("script"),o=`${Kv}?l=${s}&id=${r}`;t.src=n?n==null?void 0:n.createScriptURL(o):o,t.async=!0,document.head.appendChild(t)}function IL(s){let r=[];return Array.isArray(window[s])?r=window[s]:window[s]=r,r}async function kL(s,r,n,t,o,c){const l=t[o];try{if(l)await r[l];else{const a=(await pE(n)).find(d=>d.measurementId===o);a&&await r[a.appId]}}catch(f){Ps.error(f)}s("config",o,c)}async function ML(s,r,n,t,o){try{let c=[];if(o&&o.send_to){let l=o.send_to;Array.isArray(l)||(l=[l]);const f=await pE(n);for(const a of l){const d=f.find(w=>w.measurementId===a),_=d&&r[d.appId];if(_)c.push(_);else{c=[];break}}}c.length===0&&(c=Object.values(r)),await Promise.all(c),s("event",t,o||{})}catch(c){Ps.error(c)}}function PL(s,r,n,t){async function o(c,...l){try{if(c==="event"){const[f,a]=l;await ML(s,r,n,f,a)}else if(c==="config"){const[f,a]=l;await kL(s,r,n,t,f,a)}else if(c==="consent"){const[f,a]=l;s("consent",f,a)}else if(c==="get"){const[f,a,d]=l;s("get",f,a,d)}else if(c==="set"){const[f]=l;s("set",f)}else s(c,...l)}catch(f){Ps.error(f)}}return o}function DL(s,r,n,t,o){let c=function(...l){window[t].push(arguments)};return window[o]&&typeof window[o]=="function"&&(c=window[o]),window[o]=PL(c,s,r,n),{gtagCore:c,wrappedGtag:window[o]}}function NL(s){const r=window.document.getElementsByTagName("script");for(const n of Object.values(r))if(n.src&&n.src.includes(Kv)&&n.src.includes(s))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL=30,UL=1e3;class FL{constructor(r={},n=UL){this.throttleMetadata=r,this.intervalMillis=n}getThrottleMetadata(r){return this.throttleMetadata[r]}setThrottleMetadata(r,n){this.throttleMetadata[r]=n}deleteThrottleMetadata(r){delete this.throttleMetadata[r]}}const mE=new FL;function VL(s){return new Headers({Accept:"application/json","x-goog-api-key":s})}async function BL(s){var r;const{appId:n,apiKey:t}=s,o={method:"GET",headers:VL(t)},c=TL.replace("{app-id}",n),l=await fetch(c,o);if(l.status!==200&&l.status!==304){let f="";try{const a=await l.json();!((r=a.error)===null||r===void 0)&&r.message&&(f=a.error.message)}catch{}throw $s.create("config-fetch-failed",{httpStatus:l.status,responseMessage:f})}return l.json()}async function GL(s,r=mE,n){const{appId:t,apiKey:o,measurementId:c}=s.options;if(!t)throw $s.create("no-app-id");if(!o){if(c)return{measurementId:c,appId:t};throw $s.create("no-api-key")}const l=r.getThrottleMetadata(t)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new qL;return setTimeout(async()=>{f.abort()},EL),gE({appId:t,apiKey:o,measurementId:c},l,f,r)}async function gE(s,{throttleEndTimeMillis:r,backoffCount:n},t,o=mE){var c;const{appId:l,measurementId:f}=s;try{await zL(t,r)}catch(a){if(f)return Ps.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${a==null?void 0:a.message}]`),{appId:l,measurementId:f};throw a}try{const a=await BL(s);return o.deleteThrottleMetadata(l),a}catch(a){const d=a;if(!HL(d)){if(o.deleteThrottleMetadata(l),f)return Ps.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:l,measurementId:f};throw a}const _=Number((c=d==null?void 0:d.customData)===null||c===void 0?void 0:c.httpStatus)===503?T_(n,o.intervalMillis,LL):T_(n,o.intervalMillis),w={throttleEndTimeMillis:Date.now()+_,backoffCount:n+1};return o.setThrottleMetadata(l,w),Ps.debug(`Calling attemptFetch again in ${_} millis`),gE(s,w,t,o)}}function zL(s,r){return new Promise((n,t)=>{const o=Math.max(r-Date.now(),0),c=setTimeout(n,o);s.addEventListener(()=>{clearTimeout(c),t($s.create("fetch-throttle",{throttleEndTimeMillis:r}))})})}function HL(s){if(!(s instanceof yi)||!s.customData)return!1;const r=Number(s.customData.httpStatus);return r===429||r===500||r===503||r===504}class qL{constructor(){this.listeners=[]}addEventListener(r){this.listeners.push(r)}abort(){this.listeners.forEach(r=>r())}}async function WL(s,r,n,t,o){if(o&&o.global){s("event",n,t);return}else{const c=await r,l=Object.assign(Object.assign({},t),{send_to:c});s("event",n,l)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YL(){if(Uy())try{await Fy()}catch(s){return Ps.warn($s.create("indexeddb-unavailable",{errorInfo:s==null?void 0:s.toString()}).message),!1}else return Ps.warn($s.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function $L(s,r,n,t,o,c,l){var f;const a=GL(s);a.then(m=>{n[m.measurementId]=m.appId,s.options.measurementId&&m.measurementId!==s.options.measurementId&&Ps.warn(`The measurement ID in the local Firebase config (${s.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Ps.error(m)),r.push(a);const d=YL().then(m=>{if(m)return t.getId()}),[_,w]=await Promise.all([a,d]);NL(c)||OL(c,_.measurementId),o("js",new Date);const h=(f=l==null?void 0:l.config)!==null&&f!==void 0?f:{};return h[jL]="firebase",h.update=!0,w!=null&&(h[SL]=w),o("config",_.measurementId,h),_.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(r){this.app=r}_delete(){return delete Kc[this.app.options.appId],Promise.resolve()}}let Kc={},Xw=[];const Kw={};let Rg="dataLayer",KL="gtag",Qw,yE,Zw=!1;function QL(){const s=[];if(Ly()&&s.push("This is a browser extension environment."),cS()||s.push("Cookies are not available."),s.length>0){const r=s.map((t,o)=>`(${o+1}) ${t}`).join(" "),n=$s.create("invalid-analytics-context",{errorInfo:r});Ps.warn(n.message)}}function ZL(s,r,n){QL();const t=s.options.appId;if(!t)throw $s.create("no-app-id");if(!s.options.apiKey)if(s.options.measurementId)Ps.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${s.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw $s.create("no-api-key");if(Kc[t]!=null)throw $s.create("already-exists",{id:t});if(!Zw){IL(Rg);const{wrappedGtag:c,gtagCore:l}=DL(Kc,Xw,Kw,Rg,KL);yE=c,Qw=l,Zw=!0}return Kc[t]=$L(s,Xw,Kw,r,Qw,Rg,n),new XL(s)}function JL(s=md()){s=Ir(s);const r=Da(s,If);return r.isInitialized()?r.getImmediate():e4(s)}function e4(s,r={}){const n=Da(s,If);if(n.isInitialized()){const o=n.getImmediate();if(Jc(r,n.getOptions()))return o;throw $s.create("already-initialized")}return n.initialize({options:r})}async function t4(){if(Ly()||!cS()||!Uy())return!1;try{return await Fy()}catch{return!1}}function r4(s,r,n,t){s=Ir(s),WL(yE,Kc[s.app.options.appId],r,n,t).catch(o=>Ps.error(o))}const Jw="@firebase/analytics",ex="0.10.8";function n4(){Pi(new mi(If,(r,{options:n})=>{const t=r.getProvider("app").getImmediate(),o=r.getProvider("installations-internal").getImmediate();return ZL(t,o,n)},"PUBLIC")),Pi(new mi("analytics-internal",s,"PRIVATE")),Is(Jw,ex),Is(Jw,ex,"esm2017");function s(r){try{const n=r.getProvider(If).getImmediate();return{logEvent:(t,o,c)=>r4(n,t,o,c)}}catch(n){throw $s.create("interop-component-reg-failed",{reason:n})}}}n4();const s4={apiKey:"AIzaSyAnrwZY_0SAM3mYI13X3RkNuIWkJw3TnSU",authDomain:"stablehand-typing.firebaseapp.com",databaseURL:"https://stablehand-typing-default-rtdb.firebaseio.com",projectId:"stablehand-typing",storageBucket:"stablehand-typing.firebasestorage.app",messagingSenderId:"139216749479",appId:"1:139216749479:web:bceb35407bcfc06296ac82",measurementId:"G-27D34Q1X51"},dp=AO().length?md():pS(s4),or=iv(dp),rs=u3(dp),Ua=PN(dp);t4().then(s=>{s&&JL(dp)});new Ki;new Qi;new Xi;new Lo("yahoo.com");new Lo("microsoft.com");new Lo("apple.com");new Lo("twitter.com");new ws(or);const Qv=s=>{const r=[],n=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return!s||s.trim()===""?r.push("Email is required."):(s.includes("@")||r.push("Email must contain @"),s.includes(".")||r.push('Email must contain a domain, e.g., ".com"'),n.test(s)||r.push("Invalid email format.")),r},Zv=s=>{const r=[],n=/^\+?[1-9]\d{1,14}$/;return!s||s.trim()===""?r.push("Phone number is required."):n.test(s)||r.push("Invalid phone number format. Please enter a valid phone number."),r},i4=s=>{const r=[],n=/^\d{5}(-\d{4})?$/;return!s||s.trim()===""?r.push("This field is required."):n.test(s)||r.push("Invalid ZIP code format."),r},Qt=s=>{if(Array.isArray(s)){if(s.length===0)return["This field is required."]}else if(!s||s.trim()==="")return["This field is required."];return[]},vE=s=>!s||s.trim()===""?["This field is required, default NA"]:[],pu=s=>{const r=[];return!s||s.trim()===""?r.push("This field is required."):/^[a-zA-Z\s]+$/.test(s)||r.push("Only alphabetic characters and spaces are allowed."),r},tx=s=>{const r=[];return!Array.isArray(s)||s.length===0?r.push("This field is required."):s.length===1&&(s[0]===""||s[0].trim()==="")&&r.push("Please specify a value."),r},bE=s=>{const r=[];return s?(s.length<8&&r.push("Password must be at least 8 characters long."),/[A-Z]/.test(s)||r.push("Password must contain at least one uppercase letter."),/[a-z]/.test(s)||r.push("Password must contain at least one lowercase letter."),/[0-9]/.test(s)||r.push("Password must contain at least one digit."),/[!@#$%^&*(),.?":{}|<>]/.test(s)||r.push("Password must contain at least one special character.")):r.push("Password is required."),r},hp=s=>s.getModifierState&&s.getModifierState("CapsLock"),Uh=s=>{const r=[];if(s==null||s==="")return["This field is required."];const n=Number(s);return isNaN(n)?r.push("Must be a valid number."):n<0&&r.push("Cannot be negative."),r},_E=s=>{const r=[],n=new Date(s);if(isNaN(n.getTime()))return r.push("Invalid Date of Birth."),r;const t=new Date;let o=t.getFullYear()-n.getFullYear();const c=t.getMonth()-n.getMonth();return(c<0||c===0&&t.getDate()<n.getDate())&&o--,(o<8||o>120)&&r.push("Date of Birth must result in an age between 8 and 120 years."),r},wE=s=>{const r=[];if(!s||s.trim()==="")r.push("This field is required.");else{const n=parseInt(s,10);(isNaN(n)||n<8||n>120)&&r.push("Age must be between 8 and 120 years.")}return r},xE=(s,r)=>{const n=[];if(s&&r!==void 0&&r!==null){const t=new Date(s),o=new Date;let c=o.getFullYear()-t.getFullYear();const l=o.getMonth()-t.getMonth();(l<0||l===0&&o.getDate()<t.getDate())&&c--,Math.floor(r)!==c&&n.push("Age must match Date of Birth.")}return n},o4={success:"bg-green-100 border-green-400 text-green-700",error:"bg-red-100 border-red-400 text-red-700",warning:"bg-yellow-100 border-yellow-400 text-yellow-700",info:"bg-blue-100 text-blue-700"},a4=s=>["success","error","warning","info"].includes(s),l4=({message:s,type:r="info"})=>{const n=a4(r)?r:"info",t=n==="error"?"alert":"status";return B.jsx("div",{className:`border-l-4 p-2 mb-2 text-xs ${o4[n]}`,role:t,"aria-live":"polite",children:s})},sn=be.memo(l4),Fn=({label:s,name:r,type:n,value:t,onChange:o,onKeyDown:c,placeholder:l="",errors:f=[]})=>B.jsxs("div",{className:"mb-4",children:[B.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700",children:s}),B.jsx("input",{id:r,name:r,type:n,value:t,onChange:o,onKeyDown:c,placeholder:l,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"}),f.length>0&&B.jsx("div",{className:"mt-2",children:f.map((a,d)=>B.jsx(sn,{message:a,type:"error"},d))})]}),SE=be.forwardRef(({email:s,setEmail:r,setEmailErrors:n},t)=>{const[o,c]=be.useState([]),[l,f]=be.useState(!1),a=_=>{const{value:w}=_.target;r(w);const h=Qv(w);n(h),c(h)},d=_=>{f(hp(_))};return be.useImperativeHandle(t,()=>({clearLocalErrors:()=>c([])})),B.jsxs("div",{children:[B.jsx(Fn,{name:"Email",label:"Email",type:"email",value:s,onChange:a,onKeyDown:d,errors:o,placeholder:"Enter your email"}),l&&B.jsx(sn,{message:"Caps Lock is on",type:"warning"})]})}),jE=be.forwardRef(({password:s,setPassword:r,setPasswordErrors:n},t)=>{const[o,c]=be.useState([]),[l,f]=be.useState(!1),a=_=>{const{value:w}=_.target;r(w);const h=bE(w);n(h),c(h)},d=_=>{f(hp(_))};return be.useImperativeHandle(t,()=>({clearLocalErrors:()=>c([])})),B.jsxs("div",{children:[B.jsx(Fn,{name:"Password",label:"Password",type:"password",value:s,onChange:a,onKeyDown:d,errors:o,placeholder:"Enter your password"}),l&&B.jsx(sn,{message:"Caps Lock is on",type:"warning"})]})}),An=({onClick:s,children:r,className:n="",...t})=>B.jsx("button",{onClick:s,className:`px-4 py-2 text-white bg-blue-500 hover:bg-blue-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-400 ${n}`,...t,children:r});function Al(s){"@babel/helpers - typeof";return Al=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Al(s)}function u4(s,r){if(Al(s)!="object"||!s)return s;var n=s[Symbol.toPrimitive];if(n!==void 0){var t=n.call(s,r||"default");if(Al(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(s)}function EE(s){var r=u4(s,"string");return Al(r)=="symbol"?r:r+""}function zc(s,r,n){return(r=EE(r))in s?Object.defineProperty(s,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[r]=n,s}function rx(s,r){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(s);r&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(s,o).enumerable})),n.push.apply(n,t)}return n}function Gt(s){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?rx(Object(n),!0).forEach(function(t){zc(s,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):rx(Object(n)).forEach(function(t){Object.defineProperty(s,t,Object.getOwnPropertyDescriptor(n,t))})}return s}function c4(s){if(Array.isArray(s))return s}function d4(s,r){var n=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(n!=null){var t,o,c,l,f=[],a=!0,d=!1;try{if(c=(n=n.call(s)).next,r===0){if(Object(n)!==n)return;a=!1}else for(;!(a=(t=c.call(n)).done)&&(f.push(t.value),f.length!==r);a=!0);}catch(_){d=!0,o=_}finally{try{if(!a&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw o}}return f}}function jy(s,r){(r==null||r>s.length)&&(r=s.length);for(var n=0,t=Array(r);n<r;n++)t[n]=s[n];return t}function TE(s,r){if(s){if(typeof s=="string")return jy(s,r);var n={}.toString.call(s).slice(8,-1);return n==="Object"&&s.constructor&&(n=s.constructor.name),n==="Map"||n==="Set"?Array.from(s):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jy(s,r):void 0}}function h4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fo(s,r){return c4(s)||d4(s,r)||TE(s,r)||h4()}function f4(s,r){if(s==null)return{};var n={};for(var t in s)if({}.hasOwnProperty.call(s,t)){if(r.includes(t))continue;n[t]=s[t]}return n}function $o(s,r){if(s==null)return{};var n,t,o=f4(s,r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(s);for(t=0;t<c.length;t++)n=c[t],r.includes(n)||{}.propertyIsEnumerable.call(s,n)&&(o[n]=s[n])}return o}var p4=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function m4(s){var r=s.defaultInputValue,n=r===void 0?"":r,t=s.defaultMenuIsOpen,o=t===void 0?!1:t,c=s.defaultValue,l=c===void 0?null:c,f=s.inputValue,a=s.menuIsOpen,d=s.onChange,_=s.onInputChange,w=s.onMenuClose,h=s.onMenuOpen,m=s.value,b=$o(s,p4),v=be.useState(f!==void 0?f:n),g=Fo(v,2),p=g[0],y=g[1],S=be.useState(a!==void 0?a:o),j=Fo(S,2),A=j[0],N=j[1],C=be.useState(m!==void 0?m:l),T=Fo(C,2),R=T[0],P=T[1],k=be.useCallback(function(J,Z){typeof d=="function"&&d(J,Z),P(J)},[d]),F=be.useCallback(function(J,Z){var K;typeof _=="function"&&(K=_(J,Z)),y(K!==void 0?K:J)},[_]),D=be.useCallback(function(){typeof h=="function"&&h(),N(!0)},[h]),q=be.useCallback(function(){typeof w=="function"&&w(),N(!1)},[w]),H=f!==void 0?f:p,W=a!==void 0?a:A,Q=m!==void 0?m:R;return Gt(Gt({},b),{},{inputValue:H,menuIsOpen:W,onChange:k,onInputChange:F,onMenuClose:q,onMenuOpen:D,value:Q})}function Ht(){return Ht=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)({}).hasOwnProperty.call(n,t)&&(s[t]=n[t])}return s},Ht.apply(null,arguments)}function g4(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function nx(s,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,EE(t.key),t)}}function y4(s,r,n){return r&&nx(s.prototype,r),n&&nx(s,n),Object.defineProperty(s,"prototype",{writable:!1}),s}function Ey(s,r){return Ey=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Ey(s,r)}function v4(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),r&&Ey(s,r)}function kf(s){return kf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kf(s)}function CE(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CE=function(){return!!s})()}function b4(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _4(s,r){if(r&&(Al(r)=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b4(s)}function w4(s){var r=CE();return function(){var n,t=kf(s);if(r){var o=kf(this).constructor;n=Reflect.construct(t,arguments,o)}else n=t.apply(this,arguments);return _4(this,n)}}function x4(s){if(Array.isArray(s))return jy(s)}function S4(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function j4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jv(s){return x4(s)||S4(s)||TE(s)||j4()}var E4=!1;function T4(s){if(s.sheet)return s.sheet;for(var r=0;r<document.styleSheets.length;r++)if(document.styleSheets[r].ownerNode===s)return document.styleSheets[r]}function C4(s){var r=document.createElement("style");return r.setAttribute("data-emotion",s.key),s.nonce!==void 0&&r.setAttribute("nonce",s.nonce),r.appendChild(document.createTextNode("")),r.setAttribute("data-s",""),r}var A4=function(){function s(n){var t=this;this._insertTag=function(o){var c;t.tags.length===0?t.insertionPoint?c=t.insertionPoint.nextSibling:t.prepend?c=t.container.firstChild:c=t.before:c=t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(o,c),t.tags.push(o)},this.isSpeedy=n.speedy===void 0?!E4:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var r=s.prototype;return r.hydrate=function(t){t.forEach(this._insertTag)},r.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(C4(this));var o=this.tags[this.tags.length-1];if(this.isSpeedy){var c=T4(o);try{c.insertRule(t,c.cssRules.length)}catch{}}else o.appendChild(document.createTextNode(t));this.ctr++},r.flush=function(){this.tags.forEach(function(t){var o;return(o=t.parentNode)==null?void 0:o.removeChild(t)}),this.tags=[],this.ctr=0},s}(),ds="-ms-",Mf="-moz-",Er="-webkit-",AE="comm",e0="rule",t0="decl",R4="@import",RE="@keyframes",O4="@layer",I4=Math.abs,fp=String.fromCharCode,k4=Object.assign;function M4(s,r){return Jn(s,0)^45?(((r<<2^Jn(s,0))<<2^Jn(s,1))<<2^Jn(s,2))<<2^Jn(s,3):0}function OE(s){return s.trim()}function P4(s,r){return(s=r.exec(s))?s[0]:s}function Tr(s,r,n){return s.replace(r,n)}function Ty(s,r){return s.indexOf(r)}function Jn(s,r){return s.charCodeAt(r)|0}function cd(s,r,n){return s.slice(r,n)}function Yi(s){return s.length}function r0(s){return s.length}function Fh(s,r){return r.push(s),s}function D4(s,r){return s.map(r).join("")}var pp=1,Mu=1,IE=0,Ns=0,Tn=0,zu="";function mp(s,r,n,t,o,c,l){return{value:s,root:r,parent:n,type:t,props:o,children:c,line:pp,column:Mu,length:l,return:""}}function Ic(s,r){return k4(mp("",null,null,"",null,null,0),s,{length:-s.length},r)}function N4(){return Tn}function L4(){return Tn=Ns>0?Jn(zu,--Ns):0,Mu--,Tn===10&&(Mu=1,pp--),Tn}function Xs(){return Tn=Ns<IE?Jn(zu,Ns++):0,Mu++,Tn===10&&(Mu=1,pp++),Tn}function no(){return Jn(zu,Ns)}function af(){return Ns}function Id(s,r){return cd(zu,s,r)}function dd(s){switch(s){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function kE(s){return pp=Mu=1,IE=Yi(zu=s),Ns=0,[]}function ME(s){return zu="",s}function lf(s){return OE(Id(Ns-1,Cy(s===91?s+2:s===40?s+1:s)))}function U4(s){for(;(Tn=no())&&Tn<33;)Xs();return dd(s)>2||dd(Tn)>3?"":" "}function F4(s,r){for(;--r&&Xs()&&!(Tn<48||Tn>102||Tn>57&&Tn<65||Tn>70&&Tn<97););return Id(s,af()+(r<6&&no()==32&&Xs()==32))}function Cy(s){for(;Xs();)switch(Tn){case s:return Ns;case 34:case 39:s!==34&&s!==39&&Cy(Tn);break;case 40:s===41&&Cy(s);break;case 92:Xs();break}return Ns}function V4(s,r){for(;Xs()&&s+Tn!==57;)if(s+Tn===84&&no()===47)break;return"/*"+Id(r,Ns-1)+"*"+fp(s===47?s:Xs())}function B4(s){for(;!dd(no());)Xs();return Id(s,Ns)}function G4(s){return ME(uf("",null,null,null,[""],s=kE(s),0,[0],s))}function uf(s,r,n,t,o,c,l,f,a){for(var d=0,_=0,w=l,h=0,m=0,b=0,v=1,g=1,p=1,y=0,S="",j=o,A=c,N=t,C=S;g;)switch(b=y,y=Xs()){case 40:if(b!=108&&Jn(C,w-1)==58){Ty(C+=Tr(lf(y),"&","&\f"),"&\f")!=-1&&(p=-1);break}case 34:case 39:case 91:C+=lf(y);break;case 9:case 10:case 13:case 32:C+=U4(b);break;case 92:C+=F4(af()-1,7);continue;case 47:switch(no()){case 42:case 47:Fh(z4(V4(Xs(),af()),r,n),a);break;default:C+="/"}break;case 123*v:f[d++]=Yi(C)*p;case 125*v:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+_:p==-1&&(C=Tr(C,/\f/g,"")),m>0&&Yi(C)-w&&Fh(m>32?ix(C+";",t,n,w-1):ix(Tr(C," ","")+";",t,n,w-2),a);break;case 59:C+=";";default:if(Fh(N=sx(C,r,n,d,_,o,f,S,j=[],A=[],w),c),y===123)if(_===0)uf(C,r,N,N,j,c,w,f,A);else switch(h===99&&Jn(C,3)===110?100:h){case 100:case 108:case 109:case 115:uf(s,N,N,t&&Fh(sx(s,N,N,0,0,o,f,S,o,j=[],w),A),o,A,w,f,t?j:A);break;default:uf(C,N,N,N,[""],A,0,f,A)}}d=_=m=0,v=p=1,S=C="",w=l;break;case 58:w=1+Yi(C),m=b;default:if(v<1){if(y==123)--v;else if(y==125&&v++==0&&L4()==125)continue}switch(C+=fp(y),y*v){case 38:p=_>0?1:(C+="\f",-1);break;case 44:f[d++]=(Yi(C)-1)*p,p=1;break;case 64:no()===45&&(C+=lf(Xs())),h=no(),_=w=Yi(S=C+=B4(af())),y++;break;case 45:b===45&&Yi(C)==2&&(v=0)}}return c}function sx(s,r,n,t,o,c,l,f,a,d,_){for(var w=o-1,h=o===0?c:[""],m=r0(h),b=0,v=0,g=0;b<t;++b)for(var p=0,y=cd(s,w+1,w=I4(v=l[b])),S=s;p<m;++p)(S=OE(v>0?h[p]+" "+y:Tr(y,/&\f/g,h[p])))&&(a[g++]=S);return mp(s,r,n,o===0?e0:f,a,d,_)}function z4(s,r,n){return mp(s,r,n,AE,fp(N4()),cd(s,2,-2),0)}function ix(s,r,n,t){return mp(s,r,n,t0,cd(s,0,t),cd(s,t+1,-1),t)}function ju(s,r){for(var n="",t=r0(s),o=0;o<t;o++)n+=r(s[o],o,s,r)||"";return n}function H4(s,r,n,t){switch(s.type){case O4:if(s.children.length)break;case R4:case t0:return s.return=s.return||s.value;case AE:return"";case RE:return s.return=s.value+"{"+ju(s.children,t)+"}";case e0:s.value=s.props.join(",")}return Yi(n=ju(s.children,t))?s.return=s.value+"{"+n+"}":""}function q4(s){var r=r0(s);return function(n,t,o,c){for(var l="",f=0;f<r;f++)l+=s[f](n,t,o,c)||"";return l}}function W4(s){return function(r){r.root||(r=r.return)&&s(r)}}function Y4(s){var r=Object.create(null);return function(n){return r[n]===void 0&&(r[n]=s(n)),r[n]}}var $4=function(r,n,t){for(var o=0,c=0;o=c,c=no(),o===38&&c===12&&(n[t]=1),!dd(c);)Xs();return Id(r,Ns)},X4=function(r,n){var t=-1,o=44;do switch(dd(o)){case 0:o===38&&no()===12&&(n[t]=1),r[t]+=$4(Ns-1,n,t);break;case 2:r[t]+=lf(o);break;case 4:if(o===44){r[++t]=no()===58?"&\f":"",n[t]=r[t].length;break}default:r[t]+=fp(o)}while(o=Xs());return r},K4=function(r,n){return ME(X4(kE(r),n))},ox=new WeakMap,Q4=function(r){if(!(r.type!=="rule"||!r.parent||r.length<1)){for(var n=r.value,t=r.parent,o=r.column===t.column&&r.line===t.line;t.type!=="rule";)if(t=t.parent,!t)return;if(!(r.props.length===1&&n.charCodeAt(0)!==58&&!ox.get(t))&&!o){ox.set(r,!0);for(var c=[],l=K4(n,c),f=t.props,a=0,d=0;a<l.length;a++)for(var _=0;_<f.length;_++,d++)r.props[d]=c[a]?l[a].replace(/&\f/g,f[_]):f[_]+" "+l[a]}}},Z4=function(r){if(r.type==="decl"){var n=r.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(r.return="",r.value="")}};function PE(s,r){switch(M4(s,r)){case 5103:return Er+"print-"+s+s;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Er+s+s;case 5349:case 4246:case 4810:case 6968:case 2756:return Er+s+Mf+s+ds+s+s;case 6828:case 4268:return Er+s+ds+s+s;case 6165:return Er+s+ds+"flex-"+s+s;case 5187:return Er+s+Tr(s,/(\w+).+(:[^]+)/,Er+"box-$1$2"+ds+"flex-$1$2")+s;case 5443:return Er+s+ds+"flex-item-"+Tr(s,/flex-|-self/,"")+s;case 4675:return Er+s+ds+"flex-line-pack"+Tr(s,/align-content|flex-|-self/,"")+s;case 5548:return Er+s+ds+Tr(s,"shrink","negative")+s;case 5292:return Er+s+ds+Tr(s,"basis","preferred-size")+s;case 6060:return Er+"box-"+Tr(s,"-grow","")+Er+s+ds+Tr(s,"grow","positive")+s;case 4554:return Er+Tr(s,/([^-])(transform)/g,"$1"+Er+"$2")+s;case 6187:return Tr(Tr(Tr(s,/(zoom-|grab)/,Er+"$1"),/(image-set)/,Er+"$1"),s,"")+s;case 5495:case 3959:return Tr(s,/(image-set\([^]*)/,Er+"$1$`$1");case 4968:return Tr(Tr(s,/(.+:)(flex-)?(.*)/,Er+"box-pack:$3"+ds+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Er+s+s;case 4095:case 3583:case 4068:case 2532:return Tr(s,/(.+)-inline(.+)/,Er+"$1$2")+s;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Yi(s)-1-r>6)switch(Jn(s,r+1)){case 109:if(Jn(s,r+4)!==45)break;case 102:return Tr(s,/(.+:)(.+)-([^]+)/,"$1"+Er+"$2-$3$1"+Mf+(Jn(s,r+3)==108?"$3":"$2-$3"))+s;case 115:return~Ty(s,"stretch")?PE(Tr(s,"stretch","fill-available"),r)+s:s}break;case 4949:if(Jn(s,r+1)!==115)break;case 6444:switch(Jn(s,Yi(s)-3-(~Ty(s,"!important")&&10))){case 107:return Tr(s,":",":"+Er)+s;case 101:return Tr(s,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Er+(Jn(s,14)===45?"inline-":"")+"box$3$1"+Er+"$2$3$1"+ds+"$2box$3")+s}break;case 5936:switch(Jn(s,r+11)){case 114:return Er+s+ds+Tr(s,/[svh]\w+-[tblr]{2}/,"tb")+s;case 108:return Er+s+ds+Tr(s,/[svh]\w+-[tblr]{2}/,"tb-rl")+s;case 45:return Er+s+ds+Tr(s,/[svh]\w+-[tblr]{2}/,"lr")+s}return Er+s+ds+s+s}return s}var J4=function(r,n,t,o){if(r.length>-1&&!r.return)switch(r.type){case t0:r.return=PE(r.value,r.length);break;case RE:return ju([Ic(r,{value:Tr(r.value,"@","@"+Er)})],o);case e0:if(r.length)return D4(r.props,function(c){switch(P4(c,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ju([Ic(r,{props:[Tr(c,/:(read-\w+)/,":"+Mf+"$1")]})],o);case"::placeholder":return ju([Ic(r,{props:[Tr(c,/:(plac\w+)/,":"+Er+"input-$1")]}),Ic(r,{props:[Tr(c,/:(plac\w+)/,":"+Mf+"$1")]}),Ic(r,{props:[Tr(c,/:(plac\w+)/,ds+"input-$1")]})],o)}return""})}},e5=[J4],t5=function(r){var n=r.key;if(n==="css"){var t=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(t,function(v){var g=v.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var o=r.stylisPlugins||e5,c={},l,f=[];l=r.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(v){for(var g=v.getAttribute("data-emotion").split(" "),p=1;p<g.length;p++)c[g[p]]=!0;f.push(v)});var a,d=[Q4,Z4];{var _,w=[H4,W4(function(v){_.insert(v)})],h=q4(d.concat(o,w)),m=function(g){return ju(G4(g),h)};a=function(g,p,y,S){_=y,m(g?g+"{"+p.styles+"}":p.styles),S&&(b.inserted[p.name]=!0)}}var b={key:n,sheet:new A4({key:n,container:l,nonce:r.nonce,speedy:r.speedy,prepend:r.prepend,insertionPoint:r.insertionPoint}),nonce:r.nonce,inserted:c,registered:{},insert:a};return b.sheet.hydrate(f),b},Og={exports:{}},Or={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ax;function r5(){if(ax)return Or;ax=1;var s=typeof Symbol=="function"&&Symbol.for,r=s?Symbol.for("react.element"):60103,n=s?Symbol.for("react.portal"):60106,t=s?Symbol.for("react.fragment"):60107,o=s?Symbol.for("react.strict_mode"):60108,c=s?Symbol.for("react.profiler"):60114,l=s?Symbol.for("react.provider"):60109,f=s?Symbol.for("react.context"):60110,a=s?Symbol.for("react.async_mode"):60111,d=s?Symbol.for("react.concurrent_mode"):60111,_=s?Symbol.for("react.forward_ref"):60112,w=s?Symbol.for("react.suspense"):60113,h=s?Symbol.for("react.suspense_list"):60120,m=s?Symbol.for("react.memo"):60115,b=s?Symbol.for("react.lazy"):60116,v=s?Symbol.for("react.block"):60121,g=s?Symbol.for("react.fundamental"):60117,p=s?Symbol.for("react.responder"):60118,y=s?Symbol.for("react.scope"):60119;function S(A){if(typeof A=="object"&&A!==null){var N=A.$$typeof;switch(N){case r:switch(A=A.type,A){case a:case d:case t:case c:case o:case w:return A;default:switch(A=A&&A.$$typeof,A){case f:case _:case b:case m:case l:return A;default:return N}}case n:return N}}}function j(A){return S(A)===d}return Or.AsyncMode=a,Or.ConcurrentMode=d,Or.ContextConsumer=f,Or.ContextProvider=l,Or.Element=r,Or.ForwardRef=_,Or.Fragment=t,Or.Lazy=b,Or.Memo=m,Or.Portal=n,Or.Profiler=c,Or.StrictMode=o,Or.Suspense=w,Or.isAsyncMode=function(A){return j(A)||S(A)===a},Or.isConcurrentMode=j,Or.isContextConsumer=function(A){return S(A)===f},Or.isContextProvider=function(A){return S(A)===l},Or.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===r},Or.isForwardRef=function(A){return S(A)===_},Or.isFragment=function(A){return S(A)===t},Or.isLazy=function(A){return S(A)===b},Or.isMemo=function(A){return S(A)===m},Or.isPortal=function(A){return S(A)===n},Or.isProfiler=function(A){return S(A)===c},Or.isStrictMode=function(A){return S(A)===o},Or.isSuspense=function(A){return S(A)===w},Or.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===t||A===d||A===c||A===o||A===w||A===h||typeof A=="object"&&A!==null&&(A.$$typeof===b||A.$$typeof===m||A.$$typeof===l||A.$$typeof===f||A.$$typeof===_||A.$$typeof===g||A.$$typeof===p||A.$$typeof===y||A.$$typeof===v)},Or.typeOf=S,Or}var lx;function n5(){return lx||(lx=1,Og.exports=r5()),Og.exports}var Ig,ux;function s5(){if(ux)return Ig;ux=1;var s=n5(),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},t={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},c={};c[s.ForwardRef]=t,c[s.Memo]=o;function l(b){return s.isMemo(b)?o:c[b.$$typeof]||r}var f=Object.defineProperty,a=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,_=Object.getOwnPropertyDescriptor,w=Object.getPrototypeOf,h=Object.prototype;function m(b,v,g){if(typeof v!="string"){if(h){var p=w(v);p&&p!==h&&m(b,p,g)}var y=a(v);d&&(y=y.concat(d(v)));for(var S=l(b),j=l(v),A=0;A<y.length;++A){var N=y[A];if(!n[N]&&!(g&&g[N])&&!(j&&j[N])&&!(S&&S[N])){var C=_(v,N);try{f(b,N,C)}catch{}}}}return b}return Ig=m,Ig}s5();var i5=!0;function o5(s,r,n){var t="";return n.split(" ").forEach(function(o){s[o]!==void 0?r.push(s[o]+";"):o&&(t+=o+" ")}),t}var DE=function(r,n,t){var o=r.key+"-"+n.name;(t===!1||i5===!1)&&r.registered[o]===void 0&&(r.registered[o]=n.styles)},a5=function(r,n,t){DE(r,n,t);var o=r.key+"-"+n.name;if(r.inserted[n.name]===void 0){var c=n;do r.insert(n===c?"."+o:"",c,r.sheet,!0),c=c.next;while(c!==void 0)}};function l5(s){for(var r=0,n,t=0,o=s.length;o>=4;++t,o-=4)n=s.charCodeAt(t)&255|(s.charCodeAt(++t)&255)<<8|(s.charCodeAt(++t)&255)<<16|(s.charCodeAt(++t)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,r=(n&65535)*1540483477+((n>>>16)*59797<<16)^(r&65535)*1540483477+((r>>>16)*59797<<16);switch(o){case 3:r^=(s.charCodeAt(t+2)&255)<<16;case 2:r^=(s.charCodeAt(t+1)&255)<<8;case 1:r^=s.charCodeAt(t)&255,r=(r&65535)*1540483477+((r>>>16)*59797<<16)}return r^=r>>>13,r=(r&65535)*1540483477+((r>>>16)*59797<<16),((r^r>>>15)>>>0).toString(36)}var u5={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},c5=!1,d5=/[A-Z]|^ms/g,h5=/_EMO_([^_]+?)_([^]*?)_EMO_/g,NE=function(r){return r.charCodeAt(1)===45},cx=function(r){return r!=null&&typeof r!="boolean"},kg=Y4(function(s){return NE(s)?s:s.replace(d5,"-$&").toLowerCase()}),dx=function(r,n){switch(r){case"animation":case"animationName":if(typeof n=="string")return n.replace(h5,function(t,o,c){return $i={name:o,styles:c,next:$i},o})}return u5[r]!==1&&!NE(r)&&typeof n=="number"&&n!==0?n+"px":n},f5="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function hd(s,r,n){if(n==null)return"";var t=n;if(t.__emotion_styles!==void 0)return t;switch(typeof n){case"boolean":return"";case"object":{var o=n;if(o.anim===1)return $i={name:o.name,styles:o.styles,next:$i},o.name;var c=n;if(c.styles!==void 0){var l=c.next;if(l!==void 0)for(;l!==void 0;)$i={name:l.name,styles:l.styles,next:$i},l=l.next;var f=c.styles+";";return f}return p5(s,r,n)}case"function":{if(s!==void 0){var a=$i,d=n(s);return $i=a,hd(s,r,d)}break}}var _=n;return _}function p5(s,r,n){var t="";if(Array.isArray(n))for(var o=0;o<n.length;o++)t+=hd(s,r,n[o])+";";else for(var c in n){var l=n[c];if(typeof l!="object"){var f=l;cx(f)&&(t+=kg(c)+":"+dx(c,f)+";")}else{if(c==="NO_COMPONENT_SELECTOR"&&c5)throw new Error(f5);if(Array.isArray(l)&&typeof l[0]=="string"&&r==null)for(var a=0;a<l.length;a++)cx(l[a])&&(t+=kg(c)+":"+dx(c,l[a])+";");else{var d=hd(s,r,l);switch(c){case"animation":case"animationName":{t+=kg(c)+":"+d+";";break}default:t+=c+"{"+d+"}"}}}}return t}var hx=/label:\s*([^\s;{]+)\s*(;|$)/g,$i;function LE(s,r,n){if(s.length===1&&typeof s[0]=="object"&&s[0]!==null&&s[0].styles!==void 0)return s[0];var t=!0,o="";$i=void 0;var c=s[0];if(c==null||c.raw===void 0)t=!1,o+=hd(n,r,c);else{var l=c;o+=l[0]}for(var f=1;f<s.length;f++)if(o+=hd(n,r,s[f]),t){var a=c;o+=a[f]}hx.lastIndex=0;for(var d="",_;(_=hx.exec(o))!==null;)d+="-"+_[1];var w=l5(o)+d;return{name:w,styles:o,next:$i}}var m5=function(r){return r()},g5=Wg.useInsertionEffect?Wg.useInsertionEffect:!1,y5=g5||m5,v5=!1,UE=be.createContext(typeof HTMLElement<"u"?t5({key:"css"}):null);UE.Provider;var b5=function(r){return be.forwardRef(function(n,t){var o=be.useContext(UE);return r(n,o,t)})},_5=be.createContext({}),n0={}.hasOwnProperty,Ay="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",w5=function(r,n){var t={};for(var o in n)n0.call(n,o)&&(t[o]=n[o]);return t[Ay]=r,t},x5=function(r){var n=r.cache,t=r.serialized,o=r.isStringTag;return DE(n,t,o),y5(function(){return a5(n,t,o)}),null},S5=b5(function(s,r,n){var t=s.css;typeof t=="string"&&r.registered[t]!==void 0&&(t=r.registered[t]);var o=s[Ay],c=[t],l="";typeof s.className=="string"?l=o5(r.registered,c,s.className):s.className!=null&&(l=s.className+" ");var f=LE(c,void 0,be.useContext(_5));l+=r.key+"-"+f.name;var a={};for(var d in s)n0.call(s,d)&&d!=="css"&&d!==Ay&&!v5&&(a[d]=s[d]);return a.className=l,n&&(a.ref=n),be.createElement(be.Fragment,null,be.createElement(x5,{cache:r,serialized:f,isStringTag:typeof o=="string"}),be.createElement(o,a))}),j5=S5,Ft=function(r,n){var t=arguments;if(n==null||!n0.call(n,"css"))return be.createElement.apply(void 0,t);var o=t.length,c=new Array(o);c[0]=j5,c[1]=w5(r,n);for(var l=2;l<o;l++)c[l]=t[l];return be.createElement.apply(null,c)};(function(s){var r;r||(r=s.JSX||(s.JSX={}))})(Ft||(Ft={}));function s0(){for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return LE(r)}function E5(){var s=s0.apply(void 0,arguments),r="animation-"+s.name;return{name:r,styles:"@keyframes "+r+"{"+s.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function T5(s,r){return r||(r=s.slice(0)),Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(r)}}))}const C5=Math.min,A5=Math.max,Pf=Math.round,Vh=Math.floor,Df=s=>({x:s,y:s});function R5(s){const{x:r,y:n,width:t,height:o}=s;return{width:t,height:o,top:n,left:r,right:r+t,bottom:n+o,x:r,y:n}}function gp(){return typeof window<"u"}function FE(s){return BE(s)?(s.nodeName||"").toLowerCase():"#document"}function Wo(s){var r;return(s==null||(r=s.ownerDocument)==null?void 0:r.defaultView)||window}function VE(s){var r;return(r=(BE(s)?s.ownerDocument:s.document)||window.document)==null?void 0:r.documentElement}function BE(s){return gp()?s instanceof Node||s instanceof Wo(s).Node:!1}function O5(s){return gp()?s instanceof Element||s instanceof Wo(s).Element:!1}function i0(s){return gp()?s instanceof HTMLElement||s instanceof Wo(s).HTMLElement:!1}function fx(s){return!gp()||typeof ShadowRoot>"u"?!1:s instanceof ShadowRoot||s instanceof Wo(s).ShadowRoot}function GE(s){const{overflow:r,overflowX:n,overflowY:t,display:o}=o0(s);return/auto|scroll|overlay|hidden|clip/.test(r+t+n)&&!["inline","contents"].includes(o)}function I5(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function k5(s){return["html","body","#document"].includes(FE(s))}function o0(s){return Wo(s).getComputedStyle(s)}function M5(s){if(FE(s)==="html")return s;const r=s.assignedSlot||s.parentNode||fx(s)&&s.host||VE(s);return fx(r)?r.host:r}function zE(s){const r=M5(s);return k5(r)?s.ownerDocument?s.ownerDocument.body:s.body:i0(r)&&GE(r)?r:zE(r)}function Nf(s,r,n){var t;r===void 0&&(r=[]),n===void 0&&(n=!0);const o=zE(s),c=o===((t=s.ownerDocument)==null?void 0:t.body),l=Wo(o);if(c){const f=Ry(l);return r.concat(l,l.visualViewport||[],GE(o)?o:[],f&&n?Nf(f):[])}return r.concat(o,Nf(o,[],n))}function Ry(s){return s.parent&&Object.getPrototypeOf(s.parent)?s.frameElement:null}function P5(s){const r=o0(s);let n=parseFloat(r.width)||0,t=parseFloat(r.height)||0;const o=i0(s),c=o?s.offsetWidth:n,l=o?s.offsetHeight:t,f=Pf(n)!==c||Pf(t)!==l;return f&&(n=c,t=l),{width:n,height:t,$:f}}function a0(s){return O5(s)?s:s.contextElement}function px(s){const r=a0(s);if(!i0(r))return Df(1);const n=r.getBoundingClientRect(),{width:t,height:o,$:c}=P5(r);let l=(c?Pf(n.width):n.width)/t,f=(c?Pf(n.height):n.height)/o;return(!l||!Number.isFinite(l))&&(l=1),(!f||!Number.isFinite(f))&&(f=1),{x:l,y:f}}const D5=Df(0);function N5(s){const r=Wo(s);return!I5()||!r.visualViewport?D5:{x:r.visualViewport.offsetLeft,y:r.visualViewport.offsetTop}}function L5(s,r,n){return!1}function mx(s,r,n,t){r===void 0&&(r=!1);const o=s.getBoundingClientRect(),c=a0(s);let l=Df(1);r&&(l=px(s));const f=L5()?N5(c):Df(0);let a=(o.left+f.x)/l.x,d=(o.top+f.y)/l.y,_=o.width/l.x,w=o.height/l.y;if(c){const h=Wo(c),m=t;let b=h,v=Ry(b);for(;v&&t&&m!==b;){const g=px(v),p=v.getBoundingClientRect(),y=o0(v),S=p.left+(v.clientLeft+parseFloat(y.paddingLeft))*g.x,j=p.top+(v.clientTop+parseFloat(y.paddingTop))*g.y;a*=g.x,d*=g.y,_*=g.x,w*=g.y,a+=S,d+=j,b=Wo(v),v=Ry(b)}}return R5({width:_,height:w,x:a,y:d})}function U5(s,r){let n=null,t;const o=VE(s);function c(){var f;clearTimeout(t),(f=n)==null||f.disconnect(),n=null}function l(f,a){f===void 0&&(f=!1),a===void 0&&(a=1),c();const{left:d,top:_,width:w,height:h}=s.getBoundingClientRect();if(f||r(),!w||!h)return;const m=Vh(_),b=Vh(o.clientWidth-(d+w)),v=Vh(o.clientHeight-(_+h)),g=Vh(d),y={rootMargin:-m+"px "+-b+"px "+-v+"px "+-g+"px",threshold:A5(0,C5(1,a))||1};let S=!0;function j(A){const N=A[0].intersectionRatio;if(N!==a){if(!S)return l();N?l(!1,N):t=setTimeout(()=>{l(!1,1e-7)},1e3)}S=!1}try{n=new IntersectionObserver(j,{...y,root:o.ownerDocument})}catch{n=new IntersectionObserver(j,y)}n.observe(s)}return l(!0),c}function F5(s,r,n,t){t===void 0&&(t={});const{ancestorScroll:o=!0,ancestorResize:c=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:a=!1}=t,d=a0(s),_=o||c?[...d?Nf(d):[],...Nf(r)]:[];_.forEach(p=>{o&&p.addEventListener("scroll",n,{passive:!0}),c&&p.addEventListener("resize",n)});const w=d&&f?U5(d,n):null;let h=-1,m=null;l&&(m=new ResizeObserver(p=>{let[y]=p;y&&y.target===d&&m&&(m.unobserve(r),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var S;(S=m)==null||S.observe(r)})),n()}),d&&!a&&m.observe(d),m.observe(r));let b,v=a?mx(s):null;a&&g();function g(){const p=mx(s);v&&(p.x!==v.x||p.y!==v.y||p.width!==v.width||p.height!==v.height)&&n(),v=p,b=requestAnimationFrame(g)}return n(),()=>{var p;_.forEach(y=>{o&&y.removeEventListener("scroll",n),c&&y.removeEventListener("resize",n)}),w==null||w(),(p=m)==null||p.disconnect(),m=null,a&&cancelAnimationFrame(b)}}var Oy=be.useLayoutEffect,V5=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Lf=function(){};function B5(s,r){return r?r[0]==="-"?s+r:s+"__"+r:s}function G5(s,r){for(var n=arguments.length,t=new Array(n>2?n-2:0),o=2;o<n;o++)t[o-2]=arguments[o];var c=[].concat(t);if(r&&s)for(var l in r)r.hasOwnProperty(l)&&r[l]&&c.push("".concat(B5(s,l)));return c.filter(function(f){return f}).map(function(f){return String(f).trim()}).join(" ")}var gx=function(r){return Q5(r)?r.filter(Boolean):Al(r)==="object"&&r!==null?[r]:[]},HE=function(r){r.className,r.clearValue,r.cx,r.getStyles,r.getClassNames,r.getValue,r.hasValue,r.isMulti,r.isRtl,r.options,r.selectOption,r.selectProps,r.setValue,r.theme;var n=$o(r,V5);return Gt({},n)},cn=function(r,n,t){var o=r.cx,c=r.getStyles,l=r.getClassNames,f=r.className;return{css:c(n,r),className:o(t??{},l(n,r),f)}};function yp(s){return[document.documentElement,document.body,window].indexOf(s)>-1}function z5(s){return yp(s)?window.innerHeight:s.clientHeight}function qE(s){return yp(s)?window.pageYOffset:s.scrollTop}function Uf(s,r){if(yp(s)){window.scrollTo(0,r);return}s.scrollTop=r}function H5(s){var r=getComputedStyle(s),n=r.position==="absolute",t=/(auto|scroll)/;if(r.position==="fixed")return document.documentElement;for(var o=s;o=o.parentElement;)if(r=getComputedStyle(o),!(n&&r.position==="static")&&t.test(r.overflow+r.overflowY+r.overflowX))return o;return document.documentElement}function q5(s,r,n,t){return n*((s=s/t-1)*s*s+1)+r}function Bh(s,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Lf,o=qE(s),c=r-o,l=10,f=0;function a(){f+=l;var d=q5(f,o,c,n);Uf(s,d),f<n?window.requestAnimationFrame(a):t(s)}a()}function yx(s,r){var n=s.getBoundingClientRect(),t=r.getBoundingClientRect(),o=r.offsetHeight/3;t.bottom+o>n.bottom?Uf(s,Math.min(r.offsetTop+r.clientHeight-s.offsetHeight+o,s.scrollHeight)):t.top-o<n.top&&Uf(s,Math.max(r.offsetTop-o,0))}function W5(s){var r=s.getBoundingClientRect();return{bottom:r.bottom,height:r.height,left:r.left,right:r.right,top:r.top,width:r.width}}function vx(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function Y5(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var WE=!1,$5={get passive(){return WE=!0}},Gh=typeof window<"u"?window:{};Gh.addEventListener&&Gh.removeEventListener&&(Gh.addEventListener("p",Lf,$5),Gh.removeEventListener("p",Lf,!1));var X5=WE;function K5(s){return s!=null}function Q5(s){return Array.isArray(s)}function zh(s,r,n){return s?r:n}var Z5=function(r){for(var n=arguments.length,t=new Array(n>1?n-1:0),o=1;o<n;o++)t[o-1]=arguments[o];var c=Object.entries(r).filter(function(l){var f=Fo(l,1),a=f[0];return!t.includes(a)});return c.reduce(function(l,f){var a=Fo(f,2),d=a[0],_=a[1];return l[d]=_,l},{})},J5=["children","innerProps"],e6=["children","innerProps"];function t6(s){var r=s.maxHeight,n=s.menuEl,t=s.minHeight,o=s.placement,c=s.shouldScroll,l=s.isFixedPosition,f=s.controlHeight,a=H5(n),d={placement:"bottom",maxHeight:r};if(!n||!n.offsetParent)return d;var _=a.getBoundingClientRect(),w=_.height,h=n.getBoundingClientRect(),m=h.bottom,b=h.height,v=h.top,g=n.offsetParent.getBoundingClientRect(),p=g.top,y=l?window.innerHeight:z5(a),S=qE(a),j=parseInt(getComputedStyle(n).marginBottom,10),A=parseInt(getComputedStyle(n).marginTop,10),N=p-A,C=y-v,T=N+S,R=w-S-v,P=m-y+S+j,k=S+v-A,F=160;switch(o){case"auto":case"bottom":if(C>=b)return{placement:"bottom",maxHeight:r};if(R>=b&&!l)return c&&Bh(a,P,F),{placement:"bottom",maxHeight:r};if(!l&&R>=t||l&&C>=t){c&&Bh(a,P,F);var D=l?C-j:R-j;return{placement:"bottom",maxHeight:D}}if(o==="auto"||l){var q=r,H=l?N:T;return H>=t&&(q=Math.min(H-j-f,r)),{placement:"top",maxHeight:q}}if(o==="bottom")return c&&Uf(a,P),{placement:"bottom",maxHeight:r};break;case"top":if(N>=b)return{placement:"top",maxHeight:r};if(T>=b&&!l)return c&&Bh(a,k,F),{placement:"top",maxHeight:r};if(!l&&T>=t||l&&N>=t){var W=r;return(!l&&T>=t||l&&N>=t)&&(W=l?N-A:T-A),c&&Bh(a,k,F),{placement:"top",maxHeight:W}}return{placement:"bottom",maxHeight:r};default:throw new Error('Invalid placement provided "'.concat(o,'".'))}return d}function r6(s){var r={bottom:"top",top:"bottom"};return s?r[s]:"bottom"}var YE=function(r){return r==="auto"?"bottom":r},n6=function(r,n){var t,o=r.placement,c=r.theme,l=c.borderRadius,f=c.spacing,a=c.colors;return Gt((t={label:"menu"},zc(t,r6(o),"100%"),zc(t,"position","absolute"),zc(t,"width","100%"),zc(t,"zIndex",1),t),n?{}:{backgroundColor:a.neutral0,borderRadius:l,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:f.menuGutter,marginTop:f.menuGutter})},$E=be.createContext(null),s6=function(r){var n=r.children,t=r.minMenuHeight,o=r.maxMenuHeight,c=r.menuPlacement,l=r.menuPosition,f=r.menuShouldScrollIntoView,a=r.theme,d=be.useContext($E)||{},_=d.setPortalPlacement,w=be.useRef(null),h=be.useState(o),m=Fo(h,2),b=m[0],v=m[1],g=be.useState(null),p=Fo(g,2),y=p[0],S=p[1],j=a.spacing.controlHeight;return Oy(function(){var A=w.current;if(A){var N=l==="fixed",C=f&&!N,T=t6({maxHeight:o,menuEl:A,minHeight:t,placement:c,shouldScroll:C,isFixedPosition:N,controlHeight:j});v(T.maxHeight),S(T.placement),_==null||_(T.placement)}},[o,c,l,f,t,_,j]),n({ref:w,placerProps:Gt(Gt({},r),{},{placement:y||YE(c),maxHeight:b})})},i6=function(r){var n=r.children,t=r.innerRef,o=r.innerProps;return Ft("div",Ht({},cn(r,"menu",{menu:!0}),{ref:t},o),n)},o6=i6,a6=function(r,n){var t=r.maxHeight,o=r.theme.spacing.baseUnit;return Gt({maxHeight:t,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:o,paddingTop:o})},l6=function(r){var n=r.children,t=r.innerProps,o=r.innerRef,c=r.isMulti;return Ft("div",Ht({},cn(r,"menuList",{"menu-list":!0,"menu-list--is-multi":c}),{ref:o},t),n)},XE=function(r,n){var t=r.theme,o=t.spacing.baseUnit,c=t.colors;return Gt({textAlign:"center"},n?{}:{color:c.neutral40,padding:"".concat(o*2,"px ").concat(o*3,"px")})},u6=XE,c6=XE,d6=function(r){var n=r.children,t=n===void 0?"No options":n,o=r.innerProps,c=$o(r,J5);return Ft("div",Ht({},cn(Gt(Gt({},c),{},{children:t,innerProps:o}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),o),t)},h6=function(r){var n=r.children,t=n===void 0?"Loading...":n,o=r.innerProps,c=$o(r,e6);return Ft("div",Ht({},cn(Gt(Gt({},c),{},{children:t,innerProps:o}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),o),t)},f6=function(r){var n=r.rect,t=r.offset,o=r.position;return{left:n.left,position:o,top:t,width:n.width,zIndex:1}},p6=function(r){var n=r.appendTo,t=r.children,o=r.controlElement,c=r.innerProps,l=r.menuPlacement,f=r.menuPosition,a=be.useRef(null),d=be.useRef(null),_=be.useState(YE(l)),w=Fo(_,2),h=w[0],m=w[1],b=be.useMemo(function(){return{setPortalPlacement:m}},[]),v=be.useState(null),g=Fo(v,2),p=g[0],y=g[1],S=be.useCallback(function(){if(o){var C=W5(o),T=f==="fixed"?0:window.pageYOffset,R=C[h]+T;(R!==(p==null?void 0:p.offset)||C.left!==(p==null?void 0:p.rect.left)||C.width!==(p==null?void 0:p.rect.width))&&y({offset:R,rect:C})}},[o,f,h,p==null?void 0:p.offset,p==null?void 0:p.rect.left,p==null?void 0:p.rect.width]);Oy(function(){S()},[S]);var j=be.useCallback(function(){typeof d.current=="function"&&(d.current(),d.current=null),o&&a.current&&(d.current=F5(o,a.current,S,{elementResize:"ResizeObserver"in window}))},[o,S]);Oy(function(){j()},[j]);var A=be.useCallback(function(C){a.current=C,j()},[j]);if(!n&&f!=="fixed"||!p)return null;var N=Ft("div",Ht({ref:A},cn(Gt(Gt({},r),{},{offset:p.offset,position:f,rect:p.rect}),"menuPortal",{"menu-portal":!0}),c),t);return Ft($E.Provider,{value:b},n?tA.createPortal(N,n):N)},m6=function(r){var n=r.isDisabled,t=r.isRtl;return{label:"container",direction:t?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},g6=function(r){var n=r.children,t=r.innerProps,o=r.isDisabled,c=r.isRtl;return Ft("div",Ht({},cn(r,"container",{"--is-disabled":o,"--is-rtl":c}),t),n)},y6=function(r,n){var t=r.theme.spacing,o=r.isMulti,c=r.hasValue,l=r.selectProps.controlShouldRenderValue;return Gt({alignItems:"center",display:o&&c&&l?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(t.baseUnit/2,"px ").concat(t.baseUnit*2,"px")})},v6=function(r){var n=r.children,t=r.innerProps,o=r.isMulti,c=r.hasValue;return Ft("div",Ht({},cn(r,"valueContainer",{"value-container":!0,"value-container--is-multi":o,"value-container--has-value":c}),t),n)},b6=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},_6=function(r){var n=r.children,t=r.innerProps;return Ft("div",Ht({},cn(r,"indicatorsContainer",{indicators:!0}),t),n)},bx,w6=["size"],x6=["innerProps","isRtl","size"],S6={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},KE=function(r){var n=r.size,t=$o(r,w6);return Ft("svg",Ht({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:S6},t))},l0=function(r){return Ft(KE,Ht({size:20},r),Ft("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},QE=function(r){return Ft(KE,Ht({size:20},r),Ft("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},ZE=function(r,n){var t=r.isFocused,o=r.theme,c=o.spacing.baseUnit,l=o.colors;return Gt({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:t?l.neutral60:l.neutral20,padding:c*2,":hover":{color:t?l.neutral80:l.neutral40}})},j6=ZE,E6=function(r){var n=r.children,t=r.innerProps;return Ft("div",Ht({},cn(r,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),t),n||Ft(QE,null))},T6=ZE,C6=function(r){var n=r.children,t=r.innerProps;return Ft("div",Ht({},cn(r,"clearIndicator",{indicator:!0,"clear-indicator":!0}),t),n||Ft(l0,null))},A6=function(r,n){var t=r.isDisabled,o=r.theme,c=o.spacing.baseUnit,l=o.colors;return Gt({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:t?l.neutral10:l.neutral20,marginBottom:c*2,marginTop:c*2})},R6=function(r){var n=r.innerProps;return Ft("span",Ht({},n,cn(r,"indicatorSeparator",{"indicator-separator":!0})))},O6=E5(bx||(bx=T5([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),I6=function(r,n){var t=r.isFocused,o=r.size,c=r.theme,l=c.colors,f=c.spacing.baseUnit;return Gt({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:o,lineHeight:1,marginRight:o,textAlign:"center",verticalAlign:"middle"},n?{}:{color:t?l.neutral60:l.neutral20,padding:f*2})},Mg=function(r){var n=r.delay,t=r.offset;return Ft("span",{css:s0({animation:"".concat(O6," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:t?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},k6=function(r){var n=r.innerProps,t=r.isRtl,o=r.size,c=o===void 0?4:o,l=$o(r,x6);return Ft("div",Ht({},cn(Gt(Gt({},l),{},{innerProps:n,isRtl:t,size:c}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),Ft(Mg,{delay:0,offset:t}),Ft(Mg,{delay:160,offset:!0}),Ft(Mg,{delay:320,offset:!t}))},M6=function(r,n){var t=r.isDisabled,o=r.isFocused,c=r.theme,l=c.colors,f=c.borderRadius,a=c.spacing;return Gt({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:t?l.neutral5:l.neutral0,borderColor:t?l.neutral10:o?l.primary:l.neutral20,borderRadius:f,borderStyle:"solid",borderWidth:1,boxShadow:o?"0 0 0 1px ".concat(l.primary):void 0,"&:hover":{borderColor:o?l.primary:l.neutral30}})},P6=function(r){var n=r.children,t=r.isDisabled,o=r.isFocused,c=r.innerRef,l=r.innerProps,f=r.menuIsOpen;return Ft("div",Ht({ref:c},cn(r,"control",{control:!0,"control--is-disabled":t,"control--is-focused":o,"control--menu-is-open":f}),l,{"aria-disabled":t||void 0}),n)},D6=P6,N6=["data"],L6=function(r,n){var t=r.theme.spacing;return n?{}:{paddingBottom:t.baseUnit*2,paddingTop:t.baseUnit*2}},U6=function(r){var n=r.children,t=r.cx,o=r.getStyles,c=r.getClassNames,l=r.Heading,f=r.headingProps,a=r.innerProps,d=r.label,_=r.theme,w=r.selectProps;return Ft("div",Ht({},cn(r,"group",{group:!0}),a),Ft(l,Ht({},f,{selectProps:w,theme:_,getStyles:o,getClassNames:c,cx:t}),d),Ft("div",null,n))},F6=function(r,n){var t=r.theme,o=t.colors,c=t.spacing;return Gt({label:"group",cursor:"default",display:"block"},n?{}:{color:o.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:c.baseUnit*3,paddingRight:c.baseUnit*3,textTransform:"uppercase"})},V6=function(r){var n=HE(r);n.data;var t=$o(n,N6);return Ft("div",Ht({},cn(r,"groupHeading",{"group-heading":!0}),t))},B6=U6,G6=["innerRef","isDisabled","isHidden","inputClassName"],z6=function(r,n){var t=r.isDisabled,o=r.value,c=r.theme,l=c.spacing,f=c.colors;return Gt(Gt({visibility:t?"hidden":"visible",transform:o?"translateZ(0)":""},H6),n?{}:{margin:l.baseUnit/2,paddingBottom:l.baseUnit/2,paddingTop:l.baseUnit/2,color:f.neutral80})},JE={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},H6={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Gt({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},JE)},q6=function(r){return Gt({label:"input",color:"inherit",background:0,opacity:r?0:1,width:"100%"},JE)},W6=function(r){var n=r.cx,t=r.value,o=HE(r),c=o.innerRef,l=o.isDisabled,f=o.isHidden,a=o.inputClassName,d=$o(o,G6);return Ft("div",Ht({},cn(r,"input",{"input-container":!0}),{"data-value":t||""}),Ft("input",Ht({className:n({input:!0},a),ref:c,style:q6(f),disabled:l},d)))},Y6=W6,$6=function(r,n){var t=r.theme,o=t.spacing,c=t.borderRadius,l=t.colors;return Gt({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:l.neutral10,borderRadius:c/2,margin:o.baseUnit/2})},X6=function(r,n){var t=r.theme,o=t.borderRadius,c=t.colors,l=r.cropWithEllipsis;return Gt({overflow:"hidden",textOverflow:l||l===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:o/2,color:c.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},K6=function(r,n){var t=r.theme,o=t.spacing,c=t.borderRadius,l=t.colors,f=r.isFocused;return Gt({alignItems:"center",display:"flex"},n?{}:{borderRadius:c/2,backgroundColor:f?l.dangerLight:void 0,paddingLeft:o.baseUnit,paddingRight:o.baseUnit,":hover":{backgroundColor:l.dangerLight,color:l.danger}})},eT=function(r){var n=r.children,t=r.innerProps;return Ft("div",t,n)},Q6=eT,Z6=eT;function J6(s){var r=s.children,n=s.innerProps;return Ft("div",Ht({role:"button"},n),r||Ft(l0,{size:14}))}var eU=function(r){var n=r.children,t=r.components,o=r.data,c=r.innerProps,l=r.isDisabled,f=r.removeProps,a=r.selectProps,d=t.Container,_=t.Label,w=t.Remove;return Ft(d,{data:o,innerProps:Gt(Gt({},cn(r,"multiValue",{"multi-value":!0,"multi-value--is-disabled":l})),c),selectProps:a},Ft(_,{data:o,innerProps:Gt({},cn(r,"multiValueLabel",{"multi-value__label":!0})),selectProps:a},n),Ft(w,{data:o,innerProps:Gt(Gt({},cn(r,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},f),selectProps:a}))},tU=eU,rU=function(r,n){var t=r.isDisabled,o=r.isFocused,c=r.isSelected,l=r.theme,f=l.spacing,a=l.colors;return Gt({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:c?a.primary:o?a.primary25:"transparent",color:t?a.neutral20:c?a.neutral0:"inherit",padding:"".concat(f.baseUnit*2,"px ").concat(f.baseUnit*3,"px"),":active":{backgroundColor:t?void 0:c?a.primary:a.primary50}})},nU=function(r){var n=r.children,t=r.isDisabled,o=r.isFocused,c=r.isSelected,l=r.innerRef,f=r.innerProps;return Ft("div",Ht({},cn(r,"option",{option:!0,"option--is-disabled":t,"option--is-focused":o,"option--is-selected":c}),{ref:l,"aria-disabled":t},f),n)},sU=nU,iU=function(r,n){var t=r.theme,o=t.spacing,c=t.colors;return Gt({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:c.neutral50,marginLeft:o.baseUnit/2,marginRight:o.baseUnit/2})},oU=function(r){var n=r.children,t=r.innerProps;return Ft("div",Ht({},cn(r,"placeholder",{placeholder:!0}),t),n)},aU=oU,lU=function(r,n){var t=r.isDisabled,o=r.theme,c=o.spacing,l=o.colors;return Gt({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:t?l.neutral40:l.neutral80,marginLeft:c.baseUnit/2,marginRight:c.baseUnit/2})},uU=function(r){var n=r.children,t=r.isDisabled,o=r.innerProps;return Ft("div",Ht({},cn(r,"singleValue",{"single-value":!0,"single-value--is-disabled":t}),o),n)},cU=uU,dU={ClearIndicator:C6,Control:D6,DropdownIndicator:E6,DownChevron:QE,CrossIcon:l0,Group:B6,GroupHeading:V6,IndicatorsContainer:_6,IndicatorSeparator:R6,Input:Y6,LoadingIndicator:k6,Menu:o6,MenuList:l6,MenuPortal:p6,LoadingMessage:h6,NoOptionsMessage:d6,MultiValue:tU,MultiValueContainer:Q6,MultiValueLabel:Z6,MultiValueRemove:J6,Option:sU,Placeholder:aU,SelectContainer:g6,SingleValue:cU,ValueContainer:v6},hU=function(r){return Gt(Gt({},dU),r.components)},_x=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function fU(s,r){return!!(s===r||_x(s)&&_x(r))}function pU(s,r){if(s.length!==r.length)return!1;for(var n=0;n<s.length;n++)if(!fU(s[n],r[n]))return!1;return!0}function mU(s,r){r===void 0&&(r=pU);var n=null;function t(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];if(n&&n.lastThis===this&&r(o,n.lastArgs))return n.lastResult;var l=s.apply(this,o);return n={lastResult:l,lastArgs:o,lastThis:this},l}return t.clear=function(){n=null},t}var gU={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},yU=function(r){return Ft("span",Ht({css:gU},r))},wx=yU,vU={guidance:function(r){var n=r.isSearchable,t=r.isMulti,o=r.tabSelectsValue,c=r.context,l=r.isInitialFocus;switch(c){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(o?", press Tab to select the option and exit the menu":"",".");case"input":return l?"".concat(r["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(t?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(r){var n=r.action,t=r.label,o=t===void 0?"":t,c=r.labels,l=r.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(o,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(c.length>1?"s":""," ").concat(c.join(","),", selected.");case"select-option":return l?"option ".concat(o," is disabled. Select another option."):"option ".concat(o,", selected.");default:return""}},onFocus:function(r){var n=r.context,t=r.focused,o=r.options,c=r.label,l=c===void 0?"":c,f=r.selectValue,a=r.isDisabled,d=r.isSelected,_=r.isAppleDevice,w=function(v,g){return v&&v.length?"".concat(v.indexOf(g)+1," of ").concat(v.length):""};if(n==="value"&&f)return"value ".concat(l," focused, ").concat(w(f,t),".");if(n==="menu"&&_){var h=a?" disabled":"",m="".concat(d?" selected":"").concat(h);return"".concat(l).concat(m,", ").concat(w(o,t),".")}return""},onFilter:function(r){var n=r.inputValue,t=r.resultsMessage;return"".concat(t).concat(n?" for search term "+n:"",".")}},bU=function(r){var n=r.ariaSelection,t=r.focusedOption,o=r.focusedValue,c=r.focusableOptions,l=r.isFocused,f=r.selectValue,a=r.selectProps,d=r.id,_=r.isAppleDevice,w=a.ariaLiveMessages,h=a.getOptionLabel,m=a.inputValue,b=a.isMulti,v=a.isOptionDisabled,g=a.isSearchable,p=a.menuIsOpen,y=a.options,S=a.screenReaderStatus,j=a.tabSelectsValue,A=a.isLoading,N=a["aria-label"],C=a["aria-live"],T=be.useMemo(function(){return Gt(Gt({},vU),w||{})},[w]),R=be.useMemo(function(){var H="";if(n&&T.onChange){var W=n.option,Q=n.options,J=n.removedValue,Z=n.removedValues,K=n.value,re=function(ce){return Array.isArray(ce)?null:ce},oe=J||W||re(K),M=oe?h(oe):"",z=Q||Z||void 0,$=z?z.map(h):[],ee=Gt({isDisabled:oe&&v(oe,f),label:M,labels:$},n);H=T.onChange(ee)}return H},[n,T,v,f,h]),P=be.useMemo(function(){var H="",W=t||o,Q=!!(t&&f&&f.includes(t));if(W&&T.onFocus){var J={focused:W,label:h(W),isDisabled:v(W,f),isSelected:Q,options:c,context:W===t?"menu":"value",selectValue:f,isAppleDevice:_};H=T.onFocus(J)}return H},[t,o,h,v,T,c,f,_]),k=be.useMemo(function(){var H="";if(p&&y.length&&!A&&T.onFilter){var W=S({count:c.length});H=T.onFilter({inputValue:m,resultsMessage:W})}return H},[c,m,p,T,y,S,A]),F=(n==null?void 0:n.action)==="initial-input-focus",D=be.useMemo(function(){var H="";if(T.guidance){var W=o?"value":p?"menu":"input";H=T.guidance({"aria-label":N,context:W,isDisabled:t&&v(t,f),isMulti:b,isSearchable:g,tabSelectsValue:j,isInitialFocus:F})}return H},[N,t,o,b,v,g,p,T,f,j,F]),q=Ft(be.Fragment,null,Ft("span",{id:"aria-selection"},R),Ft("span",{id:"aria-focused"},P),Ft("span",{id:"aria-results"},k),Ft("span",{id:"aria-guidance"},D));return Ft(be.Fragment,null,Ft(wx,{id:d},F&&q),Ft(wx,{"aria-live":C,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},l&&!F&&q))},_U=bU,Iy=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],wU=new RegExp("["+Iy.map(function(s){return s.letters}).join("")+"]","g"),tT={};for(var Pg=0;Pg<Iy.length;Pg++)for(var Dg=Iy[Pg],Ng=0;Ng<Dg.letters.length;Ng++)tT[Dg.letters[Ng]]=Dg.base;var rT=function(r){return r.replace(wU,function(n){return tT[n]})},xU=mU(rT),xx=function(r){return r.replace(/^\s+|\s+$/g,"")},SU=function(r){return"".concat(r.label," ").concat(r.value)},jU=function(r){return function(n,t){if(n.data.__isNew__)return!0;var o=Gt({ignoreCase:!0,ignoreAccents:!0,stringify:SU,trim:!0,matchFrom:"any"},r),c=o.ignoreCase,l=o.ignoreAccents,f=o.stringify,a=o.trim,d=o.matchFrom,_=a?xx(t):t,w=a?xx(f(n)):f(n);return c&&(_=_.toLowerCase(),w=w.toLowerCase()),l&&(_=xU(_),w=rT(w)),d==="start"?w.substr(0,_.length)===_:w.indexOf(_)>-1}},EU=["innerRef"];function TU(s){var r=s.innerRef,n=$o(s,EU),t=Z5(n,"onExited","in","enter","exit","appear");return Ft("input",Ht({ref:r},t,{css:s0({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var CU=function(r){r.cancelable&&r.preventDefault(),r.stopPropagation()};function AU(s){var r=s.isEnabled,n=s.onBottomArrive,t=s.onBottomLeave,o=s.onTopArrive,c=s.onTopLeave,l=be.useRef(!1),f=be.useRef(!1),a=be.useRef(0),d=be.useRef(null),_=be.useCallback(function(g,p){if(d.current!==null){var y=d.current,S=y.scrollTop,j=y.scrollHeight,A=y.clientHeight,N=d.current,C=p>0,T=j-A-S,R=!1;T>p&&l.current&&(t&&t(g),l.current=!1),C&&f.current&&(c&&c(g),f.current=!1),C&&p>T?(n&&!l.current&&n(g),N.scrollTop=j,R=!0,l.current=!0):!C&&-p>S&&(o&&!f.current&&o(g),N.scrollTop=0,R=!0,f.current=!0),R&&CU(g)}},[n,t,o,c]),w=be.useCallback(function(g){_(g,g.deltaY)},[_]),h=be.useCallback(function(g){a.current=g.changedTouches[0].clientY},[]),m=be.useCallback(function(g){var p=a.current-g.changedTouches[0].clientY;_(g,p)},[_]),b=be.useCallback(function(g){if(g){var p=X5?{passive:!1}:!1;g.addEventListener("wheel",w,p),g.addEventListener("touchstart",h,p),g.addEventListener("touchmove",m,p)}},[m,h,w]),v=be.useCallback(function(g){g&&(g.removeEventListener("wheel",w,!1),g.removeEventListener("touchstart",h,!1),g.removeEventListener("touchmove",m,!1))},[m,h,w]);return be.useEffect(function(){if(r){var g=d.current;return b(g),function(){v(g)}}},[r,b,v]),function(g){d.current=g}}var Sx=["boxSizing","height","overflow","paddingRight","position"],jx={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Ex(s){s.cancelable&&s.preventDefault()}function Tx(s){s.stopPropagation()}function Cx(){var s=this.scrollTop,r=this.scrollHeight,n=s+this.offsetHeight;s===0?this.scrollTop=1:n===r&&(this.scrollTop=s-1)}function Ax(){return"ontouchstart"in window||navigator.maxTouchPoints}var Rx=!!(typeof window<"u"&&window.document&&window.document.createElement),kc=0,mu={capture:!1,passive:!1};function RU(s){var r=s.isEnabled,n=s.accountForScrollbars,t=n===void 0?!0:n,o=be.useRef({}),c=be.useRef(null),l=be.useCallback(function(a){if(Rx){var d=document.body,_=d&&d.style;if(t&&Sx.forEach(function(b){var v=_&&_[b];o.current[b]=v}),t&&kc<1){var w=parseInt(o.current.paddingRight,10)||0,h=document.body?document.body.clientWidth:0,m=window.innerWidth-h+w||0;Object.keys(jx).forEach(function(b){var v=jx[b];_&&(_[b]=v)}),_&&(_.paddingRight="".concat(m,"px"))}d&&Ax()&&(d.addEventListener("touchmove",Ex,mu),a&&(a.addEventListener("touchstart",Cx,mu),a.addEventListener("touchmove",Tx,mu))),kc+=1}},[t]),f=be.useCallback(function(a){if(Rx){var d=document.body,_=d&&d.style;kc=Math.max(kc-1,0),t&&kc<1&&Sx.forEach(function(w){var h=o.current[w];_&&(_[w]=h)}),d&&Ax()&&(d.removeEventListener("touchmove",Ex,mu),a&&(a.removeEventListener("touchstart",Cx,mu),a.removeEventListener("touchmove",Tx,mu)))}},[t]);return be.useEffect(function(){if(r){var a=c.current;return l(a),function(){f(a)}}},[r,l,f]),function(a){c.current=a}}var OU=function(r){var n=r.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},IU={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function kU(s){var r=s.children,n=s.lockEnabled,t=s.captureEnabled,o=t===void 0?!0:t,c=s.onBottomArrive,l=s.onBottomLeave,f=s.onTopArrive,a=s.onTopLeave,d=AU({isEnabled:o,onBottomArrive:c,onBottomLeave:l,onTopArrive:f,onTopLeave:a}),_=RU({isEnabled:n}),w=function(m){d(m),_(m)};return Ft(be.Fragment,null,n&&Ft("div",{onClick:OU,css:IU}),r(w))}var MU={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},PU=function(r){var n=r.name,t=r.onFocus;return Ft("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:t,css:MU,value:"",onChange:function(){}})},DU=PU;function u0(s){var r;return typeof window<"u"&&window.navigator!=null?s.test(((r=window.navigator.userAgentData)===null||r===void 0?void 0:r.platform)||window.navigator.platform):!1}function NU(){return u0(/^iPhone/i)}function nT(){return u0(/^Mac/i)}function LU(){return u0(/^iPad/i)||nT()&&navigator.maxTouchPoints>1}function UU(){return NU()||LU()}function FU(){return nT()||UU()}var VU=function(r){return r.label},BU=function(r){return r.label},GU=function(r){return r.value},zU=function(r){return!!r.isDisabled},HU={clearIndicator:T6,container:m6,control:M6,dropdownIndicator:j6,group:L6,groupHeading:F6,indicatorsContainer:b6,indicatorSeparator:A6,input:z6,loadingIndicator:I6,loadingMessage:c6,menu:n6,menuList:a6,menuPortal:f6,multiValue:$6,multiValueLabel:X6,multiValueRemove:K6,noOptionsMessage:u6,option:rU,placeholder:iU,singleValue:lU,valueContainer:y6},qU={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},WU=4,sT=4,YU=38,$U=sT*2,XU={baseUnit:sT,controlHeight:YU,menuGutter:$U},Lg={borderRadius:WU,colors:qU,spacing:XU},KU={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:vx(),captureMenuScroll:!vx(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:jU(),formatGroupLabel:VU,getOptionLabel:BU,getOptionValue:GU,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:zU,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!Y5(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(r){var n=r.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function Ox(s,r,n,t){var o=aT(s,r,n),c=lT(s,r,n),l=oT(s,r),f=Ff(s,r);return{type:"option",data:r,isDisabled:o,isSelected:c,label:l,value:f,index:t}}function cf(s,r){return s.options.map(function(n,t){if("options"in n){var o=n.options.map(function(l,f){return Ox(s,l,r,f)}).filter(function(l){return kx(s,l)});return o.length>0?{type:"group",data:n,options:o,index:t}:void 0}var c=Ox(s,n,r,t);return kx(s,c)?c:void 0}).filter(K5)}function iT(s){return s.reduce(function(r,n){return n.type==="group"?r.push.apply(r,Jv(n.options.map(function(t){return t.data}))):r.push(n.data),r},[])}function Ix(s,r){return s.reduce(function(n,t){return t.type==="group"?n.push.apply(n,Jv(t.options.map(function(o){return{data:o.data,id:"".concat(r,"-").concat(t.index,"-").concat(o.index)}}))):n.push({data:t.data,id:"".concat(r,"-").concat(t.index)}),n},[])}function QU(s,r){return iT(cf(s,r))}function kx(s,r){var n=s.inputValue,t=n===void 0?"":n,o=r.data,c=r.isSelected,l=r.label,f=r.value;return(!cT(s)||!c)&&uT(s,{label:l,value:f,data:o},t)}function ZU(s,r){var n=s.focusedValue,t=s.selectValue,o=t.indexOf(n);if(o>-1){var c=r.indexOf(n);if(c>-1)return n;if(o<r.length)return r[o]}return null}function JU(s,r){var n=s.focusedOption;return n&&r.indexOf(n)>-1?n:r[0]}var Ug=function(r,n){var t,o=(t=r.find(function(c){return c.data===n}))===null||t===void 0?void 0:t.id;return o||null},oT=function(r,n){return r.getOptionLabel(n)},Ff=function(r,n){return r.getOptionValue(n)};function aT(s,r,n){return typeof s.isOptionDisabled=="function"?s.isOptionDisabled(r,n):!1}function lT(s,r,n){if(n.indexOf(r)>-1)return!0;if(typeof s.isOptionSelected=="function")return s.isOptionSelected(r,n);var t=Ff(s,r);return n.some(function(o){return Ff(s,o)===t})}function uT(s,r,n){return s.filterOption?s.filterOption(r,n):!0}var cT=function(r){var n=r.hideSelectedOptions,t=r.isMulti;return n===void 0?t:n},eF=1,dT=function(s){v4(n,s);var r=w4(n);function n(t){var o;if(g4(this,n),o=r.call(this,t),o.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},o.blockOptionHover=!1,o.isComposing=!1,o.commonProps=void 0,o.initialTouchX=0,o.initialTouchY=0,o.openAfterFocus=!1,o.scrollToFocusedOptionOnUpdate=!1,o.userIsDragging=void 0,o.isAppleDevice=FU(),o.controlRef=null,o.getControlRef=function(a){o.controlRef=a},o.focusedOptionRef=null,o.getFocusedOptionRef=function(a){o.focusedOptionRef=a},o.menuListRef=null,o.getMenuListRef=function(a){o.menuListRef=a},o.inputRef=null,o.getInputRef=function(a){o.inputRef=a},o.focus=o.focusInput,o.blur=o.blurInput,o.onChange=function(a,d){var _=o.props,w=_.onChange,h=_.name;d.name=h,o.ariaOnChange(a,d),w(a,d)},o.setValue=function(a,d,_){var w=o.props,h=w.closeMenuOnSelect,m=w.isMulti,b=w.inputValue;o.onInputChange("",{action:"set-value",prevInputValue:b}),h&&(o.setState({inputIsHiddenAfterUpdate:!m}),o.onMenuClose()),o.setState({clearFocusValueOnUpdate:!0}),o.onChange(a,{action:d,option:_})},o.selectOption=function(a){var d=o.props,_=d.blurInputOnSelect,w=d.isMulti,h=d.name,m=o.state.selectValue,b=w&&o.isOptionSelected(a,m),v=o.isOptionDisabled(a,m);if(b){var g=o.getOptionValue(a);o.setValue(m.filter(function(p){return o.getOptionValue(p)!==g}),"deselect-option",a)}else if(!v)w?o.setValue([].concat(Jv(m),[a]),"select-option",a):o.setValue(a,"select-option");else{o.ariaOnChange(a,{action:"select-option",option:a,name:h});return}_&&o.blurInput()},o.removeValue=function(a){var d=o.props.isMulti,_=o.state.selectValue,w=o.getOptionValue(a),h=_.filter(function(b){return o.getOptionValue(b)!==w}),m=zh(d,h,h[0]||null);o.onChange(m,{action:"remove-value",removedValue:a}),o.focusInput()},o.clearValue=function(){var a=o.state.selectValue;o.onChange(zh(o.props.isMulti,[],null),{action:"clear",removedValues:a})},o.popValue=function(){var a=o.props.isMulti,d=o.state.selectValue,_=d[d.length-1],w=d.slice(0,d.length-1),h=zh(a,w,w[0]||null);_&&o.onChange(h,{action:"pop-value",removedValue:_})},o.getFocusedOptionId=function(a){return Ug(o.state.focusableOptionsWithIds,a)},o.getFocusableOptionsWithIds=function(){return Ix(cf(o.props,o.state.selectValue),o.getElementId("option"))},o.getValue=function(){return o.state.selectValue},o.cx=function(){for(var a=arguments.length,d=new Array(a),_=0;_<a;_++)d[_]=arguments[_];return G5.apply(void 0,[o.props.classNamePrefix].concat(d))},o.getOptionLabel=function(a){return oT(o.props,a)},o.getOptionValue=function(a){return Ff(o.props,a)},o.getStyles=function(a,d){var _=o.props.unstyled,w=HU[a](d,_);w.boxSizing="border-box";var h=o.props.styles[a];return h?h(w,d):w},o.getClassNames=function(a,d){var _,w;return(_=(w=o.props.classNames)[a])===null||_===void 0?void 0:_.call(w,d)},o.getElementId=function(a){return"".concat(o.state.instancePrefix,"-").concat(a)},o.getComponents=function(){return hU(o.props)},o.buildCategorizedOptions=function(){return cf(o.props,o.state.selectValue)},o.getCategorizedOptions=function(){return o.props.menuIsOpen?o.buildCategorizedOptions():[]},o.buildFocusableOptions=function(){return iT(o.buildCategorizedOptions())},o.getFocusableOptions=function(){return o.props.menuIsOpen?o.buildFocusableOptions():[]},o.ariaOnChange=function(a,d){o.setState({ariaSelection:Gt({value:a},d)})},o.onMenuMouseDown=function(a){a.button===0&&(a.stopPropagation(),a.preventDefault(),o.focusInput())},o.onMenuMouseMove=function(a){o.blockOptionHover=!1},o.onControlMouseDown=function(a){if(!a.defaultPrevented){var d=o.props.openMenuOnClick;o.state.isFocused?o.props.menuIsOpen?a.target.tagName!=="INPUT"&&a.target.tagName!=="TEXTAREA"&&o.onMenuClose():d&&o.openMenu("first"):(d&&(o.openAfterFocus=!0),o.focusInput()),a.target.tagName!=="INPUT"&&a.target.tagName!=="TEXTAREA"&&a.preventDefault()}},o.onDropdownIndicatorMouseDown=function(a){if(!(a&&a.type==="mousedown"&&a.button!==0)&&!o.props.isDisabled){var d=o.props,_=d.isMulti,w=d.menuIsOpen;o.focusInput(),w?(o.setState({inputIsHiddenAfterUpdate:!_}),o.onMenuClose()):o.openMenu("first"),a.preventDefault()}},o.onClearIndicatorMouseDown=function(a){a&&a.type==="mousedown"&&a.button!==0||(o.clearValue(),a.preventDefault(),o.openAfterFocus=!1,a.type==="touchend"?o.focusInput():setTimeout(function(){return o.focusInput()}))},o.onScroll=function(a){typeof o.props.closeMenuOnScroll=="boolean"?a.target instanceof HTMLElement&&yp(a.target)&&o.props.onMenuClose():typeof o.props.closeMenuOnScroll=="function"&&o.props.closeMenuOnScroll(a)&&o.props.onMenuClose()},o.onCompositionStart=function(){o.isComposing=!0},o.onCompositionEnd=function(){o.isComposing=!1},o.onTouchStart=function(a){var d=a.touches,_=d&&d.item(0);_&&(o.initialTouchX=_.clientX,o.initialTouchY=_.clientY,o.userIsDragging=!1)},o.onTouchMove=function(a){var d=a.touches,_=d&&d.item(0);if(_){var w=Math.abs(_.clientX-o.initialTouchX),h=Math.abs(_.clientY-o.initialTouchY),m=5;o.userIsDragging=w>m||h>m}},o.onTouchEnd=function(a){o.userIsDragging||(o.controlRef&&!o.controlRef.contains(a.target)&&o.menuListRef&&!o.menuListRef.contains(a.target)&&o.blurInput(),o.initialTouchX=0,o.initialTouchY=0)},o.onControlTouchEnd=function(a){o.userIsDragging||o.onControlMouseDown(a)},o.onClearIndicatorTouchEnd=function(a){o.userIsDragging||o.onClearIndicatorMouseDown(a)},o.onDropdownIndicatorTouchEnd=function(a){o.userIsDragging||o.onDropdownIndicatorMouseDown(a)},o.handleInputChange=function(a){var d=o.props.inputValue,_=a.currentTarget.value;o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange(_,{action:"input-change",prevInputValue:d}),o.props.menuIsOpen||o.onMenuOpen()},o.onInputFocus=function(a){o.props.onFocus&&o.props.onFocus(a),o.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(o.openAfterFocus||o.props.openMenuOnFocus)&&o.openMenu("first"),o.openAfterFocus=!1},o.onInputBlur=function(a){var d=o.props.inputValue;if(o.menuListRef&&o.menuListRef.contains(document.activeElement)){o.inputRef.focus();return}o.props.onBlur&&o.props.onBlur(a),o.onInputChange("",{action:"input-blur",prevInputValue:d}),o.onMenuClose(),o.setState({focusedValue:null,isFocused:!1})},o.onOptionHover=function(a){if(!(o.blockOptionHover||o.state.focusedOption===a)){var d=o.getFocusableOptions(),_=d.indexOf(a);o.setState({focusedOption:a,focusedOptionId:_>-1?o.getFocusedOptionId(a):null})}},o.shouldHideSelectedOptions=function(){return cT(o.props)},o.onValueInputFocus=function(a){a.preventDefault(),a.stopPropagation(),o.focus()},o.onKeyDown=function(a){var d=o.props,_=d.isMulti,w=d.backspaceRemovesValue,h=d.escapeClearsValue,m=d.inputValue,b=d.isClearable,v=d.isDisabled,g=d.menuIsOpen,p=d.onKeyDown,y=d.tabSelectsValue,S=d.openMenuOnFocus,j=o.state,A=j.focusedOption,N=j.focusedValue,C=j.selectValue;if(!v&&!(typeof p=="function"&&(p(a),a.defaultPrevented))){switch(o.blockOptionHover=!0,a.key){case"ArrowLeft":if(!_||m)return;o.focusValue("previous");break;case"ArrowRight":if(!_||m)return;o.focusValue("next");break;case"Delete":case"Backspace":if(m)return;if(N)o.removeValue(N);else{if(!w)return;_?o.popValue():b&&o.clearValue()}break;case"Tab":if(o.isComposing||a.shiftKey||!g||!y||!A||S&&o.isOptionSelected(A,C))return;o.selectOption(A);break;case"Enter":if(a.keyCode===229)break;if(g){if(!A||o.isComposing)return;o.selectOption(A);break}return;case"Escape":g?(o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange("",{action:"menu-close",prevInputValue:m}),o.onMenuClose()):b&&h&&o.clearValue();break;case" ":if(m)return;if(!g){o.openMenu("first");break}if(!A)return;o.selectOption(A);break;case"ArrowUp":g?o.focusOption("up"):o.openMenu("last");break;case"ArrowDown":g?o.focusOption("down"):o.openMenu("first");break;case"PageUp":if(!g)return;o.focusOption("pageup");break;case"PageDown":if(!g)return;o.focusOption("pagedown");break;case"Home":if(!g)return;o.focusOption("first");break;case"End":if(!g)return;o.focusOption("last");break;default:return}a.preventDefault()}},o.state.instancePrefix="react-select-"+(o.props.instanceId||++eF),o.state.selectValue=gx(t.value),t.menuIsOpen&&o.state.selectValue.length){var c=o.getFocusableOptionsWithIds(),l=o.buildFocusableOptions(),f=l.indexOf(o.state.selectValue[0]);o.state.focusableOptionsWithIds=c,o.state.focusedOption=l[f],o.state.focusedOptionId=Ug(c,l[f])}return o}return y4(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&yx(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(o){var c=this.props,l=c.isDisabled,f=c.menuIsOpen,a=this.state.isFocused;(a&&!l&&o.isDisabled||a&&f&&!o.menuIsOpen)&&this.focusInput(),a&&l&&!o.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!a&&!l&&o.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(yx(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(o,c){this.props.onInputChange(o,c)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(o){var c=this,l=this.state,f=l.selectValue,a=l.isFocused,d=this.buildFocusableOptions(),_=o==="first"?0:d.length-1;if(!this.props.isMulti){var w=d.indexOf(f[0]);w>-1&&(_=w)}this.scrollToFocusedOptionOnUpdate=!(a&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:d[_],focusedOptionId:this.getFocusedOptionId(d[_])},function(){return c.onMenuOpen()})}},{key:"focusValue",value:function(o){var c=this.state,l=c.selectValue,f=c.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var a=l.indexOf(f);f||(a=-1);var d=l.length-1,_=-1;if(l.length){switch(o){case"previous":a===0?_=0:a===-1?_=d:_=a-1;break;case"next":a>-1&&a<d&&(_=a+1);break}this.setState({inputIsHidden:_!==-1,focusedValue:l[_]})}}}},{key:"focusOption",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",c=this.props.pageSize,l=this.state.focusedOption,f=this.getFocusableOptions();if(f.length){var a=0,d=f.indexOf(l);l||(d=-1),o==="up"?a=d>0?d-1:f.length-1:o==="down"?a=(d+1)%f.length:o==="pageup"?(a=d-c,a<0&&(a=0)):o==="pagedown"?(a=d+c,a>f.length-1&&(a=f.length-1)):o==="last"&&(a=f.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:f[a],focusedValue:null,focusedOptionId:this.getFocusedOptionId(f[a])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Lg):Gt(Gt({},Lg),this.props.theme):Lg}},{key:"getCommonProps",value:function(){var o=this.clearValue,c=this.cx,l=this.getStyles,f=this.getClassNames,a=this.getValue,d=this.selectOption,_=this.setValue,w=this.props,h=w.isMulti,m=w.isRtl,b=w.options,v=this.hasValue();return{clearValue:o,cx:c,getStyles:l,getClassNames:f,getValue:a,hasValue:v,isMulti:h,isRtl:m,options:b,selectOption:d,selectProps:w,setValue:_,theme:this.getTheme()}}},{key:"hasValue",value:function(){var o=this.state.selectValue;return o.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var o=this.props,c=o.isClearable,l=o.isMulti;return c===void 0?l:c}},{key:"isOptionDisabled",value:function(o,c){return aT(this.props,o,c)}},{key:"isOptionSelected",value:function(o,c){return lT(this.props,o,c)}},{key:"filterOption",value:function(o,c){return uT(this.props,o,c)}},{key:"formatOptionLabel",value:function(o,c){if(typeof this.props.formatOptionLabel=="function"){var l=this.props.inputValue,f=this.state.selectValue;return this.props.formatOptionLabel(o,{context:c,inputValue:l,selectValue:f})}else return this.getOptionLabel(o)}},{key:"formatGroupLabel",value:function(o){return this.props.formatGroupLabel(o)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var o=this.props,c=o.isDisabled,l=o.isSearchable,f=o.inputId,a=o.inputValue,d=o.tabIndex,_=o.form,w=o.menuIsOpen,h=o.required,m=this.getComponents(),b=m.Input,v=this.state,g=v.inputIsHidden,p=v.ariaSelection,y=this.commonProps,S=f||this.getElementId("input"),j=Gt(Gt(Gt({"aria-autocomplete":"list","aria-expanded":w,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":h,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},w&&{"aria-controls":this.getElementId("listbox")}),!l&&{"aria-readonly":!0}),this.hasValue()?(p==null?void 0:p.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return l?be.createElement(b,Ht({},y,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:S,innerRef:this.getInputRef,isDisabled:c,isHidden:g,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:d,form:_,type:"text",value:a},j)):be.createElement(TU,Ht({id:S,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Lf,onFocus:this.onInputFocus,disabled:c,tabIndex:d,inputMode:"none",form:_,value:""},j))}},{key:"renderPlaceholderOrValue",value:function(){var o=this,c=this.getComponents(),l=c.MultiValue,f=c.MultiValueContainer,a=c.MultiValueLabel,d=c.MultiValueRemove,_=c.SingleValue,w=c.Placeholder,h=this.commonProps,m=this.props,b=m.controlShouldRenderValue,v=m.isDisabled,g=m.isMulti,p=m.inputValue,y=m.placeholder,S=this.state,j=S.selectValue,A=S.focusedValue,N=S.isFocused;if(!this.hasValue()||!b)return p?null:be.createElement(w,Ht({},h,{key:"placeholder",isDisabled:v,isFocused:N,innerProps:{id:this.getElementId("placeholder")}}),y);if(g)return j.map(function(T,R){var P=T===A,k="".concat(o.getOptionLabel(T),"-").concat(o.getOptionValue(T));return be.createElement(l,Ht({},h,{components:{Container:f,Label:a,Remove:d},isFocused:P,isDisabled:v,key:k,index:R,removeProps:{onClick:function(){return o.removeValue(T)},onTouchEnd:function(){return o.removeValue(T)},onMouseDown:function(D){D.preventDefault()}},data:T}),o.formatOptionLabel(T,"value"))});if(p)return null;var C=j[0];return be.createElement(_,Ht({},h,{data:C,isDisabled:v}),this.formatOptionLabel(C,"value"))}},{key:"renderClearIndicator",value:function(){var o=this.getComponents(),c=o.ClearIndicator,l=this.commonProps,f=this.props,a=f.isDisabled,d=f.isLoading,_=this.state.isFocused;if(!this.isClearable()||!c||a||!this.hasValue()||d)return null;var w={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return be.createElement(c,Ht({},l,{innerProps:w,isFocused:_}))}},{key:"renderLoadingIndicator",value:function(){var o=this.getComponents(),c=o.LoadingIndicator,l=this.commonProps,f=this.props,a=f.isDisabled,d=f.isLoading,_=this.state.isFocused;if(!c||!d)return null;var w={"aria-hidden":"true"};return be.createElement(c,Ht({},l,{innerProps:w,isDisabled:a,isFocused:_}))}},{key:"renderIndicatorSeparator",value:function(){var o=this.getComponents(),c=o.DropdownIndicator,l=o.IndicatorSeparator;if(!c||!l)return null;var f=this.commonProps,a=this.props.isDisabled,d=this.state.isFocused;return be.createElement(l,Ht({},f,{isDisabled:a,isFocused:d}))}},{key:"renderDropdownIndicator",value:function(){var o=this.getComponents(),c=o.DropdownIndicator;if(!c)return null;var l=this.commonProps,f=this.props.isDisabled,a=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return be.createElement(c,Ht({},l,{innerProps:d,isDisabled:f,isFocused:a}))}},{key:"renderMenu",value:function(){var o=this,c=this.getComponents(),l=c.Group,f=c.GroupHeading,a=c.Menu,d=c.MenuList,_=c.MenuPortal,w=c.LoadingMessage,h=c.NoOptionsMessage,m=c.Option,b=this.commonProps,v=this.state.focusedOption,g=this.props,p=g.captureMenuScroll,y=g.inputValue,S=g.isLoading,j=g.loadingMessage,A=g.minMenuHeight,N=g.maxMenuHeight,C=g.menuIsOpen,T=g.menuPlacement,R=g.menuPosition,P=g.menuPortalTarget,k=g.menuShouldBlockScroll,F=g.menuShouldScrollIntoView,D=g.noOptionsMessage,q=g.onMenuScrollToTop,H=g.onMenuScrollToBottom;if(!C)return null;var W=function(M,z){var $=M.type,ee=M.data,le=M.isDisabled,ce=M.isSelected,me=M.label,ve=M.value,ge=v===ee,we=le?void 0:function(){return o.onOptionHover(ee)},xe=le?void 0:function(){return o.selectOption(ee)},fe="".concat(o.getElementId("option"),"-").concat(z),Se={id:fe,onClick:xe,onMouseMove:we,onMouseOver:we,tabIndex:-1,role:"option","aria-selected":o.isAppleDevice?void 0:ce};return be.createElement(m,Ht({},b,{innerProps:Se,data:ee,isDisabled:le,isSelected:ce,key:fe,label:me,type:$,value:ve,isFocused:ge,innerRef:ge?o.getFocusedOptionRef:void 0}),o.formatOptionLabel(M.data,"menu"))},Q;if(this.hasOptions())Q=this.getCategorizedOptions().map(function(oe){if(oe.type==="group"){var M=oe.data,z=oe.options,$=oe.index,ee="".concat(o.getElementId("group"),"-").concat($),le="".concat(ee,"-heading");return be.createElement(l,Ht({},b,{key:ee,data:M,options:z,Heading:f,headingProps:{id:le,data:oe.data},label:o.formatGroupLabel(oe.data)}),oe.options.map(function(ce){return W(ce,"".concat($,"-").concat(ce.index))}))}else if(oe.type==="option")return W(oe,"".concat(oe.index))});else if(S){var J=j({inputValue:y});if(J===null)return null;Q=be.createElement(w,b,J)}else{var Z=D({inputValue:y});if(Z===null)return null;Q=be.createElement(h,b,Z)}var K={minMenuHeight:A,maxMenuHeight:N,menuPlacement:T,menuPosition:R,menuShouldScrollIntoView:F},re=be.createElement(s6,Ht({},b,K),function(oe){var M=oe.ref,z=oe.placerProps,$=z.placement,ee=z.maxHeight;return be.createElement(a,Ht({},b,K,{innerRef:M,innerProps:{onMouseDown:o.onMenuMouseDown,onMouseMove:o.onMenuMouseMove},isLoading:S,placement:$}),be.createElement(kU,{captureEnabled:p,onTopArrive:q,onBottomArrive:H,lockEnabled:k},function(le){return be.createElement(d,Ht({},b,{innerRef:function(me){o.getMenuListRef(me),le(me)},innerProps:{role:"listbox","aria-multiselectable":b.isMulti,id:o.getElementId("listbox")},isLoading:S,maxHeight:ee,focusedOption:v}),Q)}))});return P||R==="fixed"?be.createElement(_,Ht({},b,{appendTo:P,controlElement:this.controlRef,menuPlacement:T,menuPosition:R}),re):re}},{key:"renderFormField",value:function(){var o=this,c=this.props,l=c.delimiter,f=c.isDisabled,a=c.isMulti,d=c.name,_=c.required,w=this.state.selectValue;if(_&&!this.hasValue()&&!f)return be.createElement(DU,{name:d,onFocus:this.onValueInputFocus});if(!(!d||f))if(a)if(l){var h=w.map(function(v){return o.getOptionValue(v)}).join(l);return be.createElement("input",{name:d,type:"hidden",value:h})}else{var m=w.length>0?w.map(function(v,g){return be.createElement("input",{key:"i-".concat(g),name:d,type:"hidden",value:o.getOptionValue(v)})}):be.createElement("input",{name:d,type:"hidden",value:""});return be.createElement("div",null,m)}else{var b=w[0]?this.getOptionValue(w[0]):"";return be.createElement("input",{name:d,type:"hidden",value:b})}}},{key:"renderLiveRegion",value:function(){var o=this.commonProps,c=this.state,l=c.ariaSelection,f=c.focusedOption,a=c.focusedValue,d=c.isFocused,_=c.selectValue,w=this.getFocusableOptions();return be.createElement(_U,Ht({},o,{id:this.getElementId("live-region"),ariaSelection:l,focusedOption:f,focusedValue:a,isFocused:d,selectValue:_,focusableOptions:w,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var o=this.getComponents(),c=o.Control,l=o.IndicatorsContainer,f=o.SelectContainer,a=o.ValueContainer,d=this.props,_=d.className,w=d.id,h=d.isDisabled,m=d.menuIsOpen,b=this.state.isFocused,v=this.commonProps=this.getCommonProps();return be.createElement(f,Ht({},v,{className:_,innerProps:{id:w,onKeyDown:this.onKeyDown},isDisabled:h,isFocused:b}),this.renderLiveRegion(),be.createElement(c,Ht({},v,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:h,isFocused:b,menuIsOpen:m}),be.createElement(a,Ht({},v,{isDisabled:h}),this.renderPlaceholderOrValue(),this.renderInput()),be.createElement(l,Ht({},v,{isDisabled:h}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(o,c){var l=c.prevProps,f=c.clearFocusValueOnUpdate,a=c.inputIsHiddenAfterUpdate,d=c.ariaSelection,_=c.isFocused,w=c.prevWasFocused,h=c.instancePrefix,m=o.options,b=o.value,v=o.menuIsOpen,g=o.inputValue,p=o.isMulti,y=gx(b),S={};if(l&&(b!==l.value||m!==l.options||v!==l.menuIsOpen||g!==l.inputValue)){var j=v?QU(o,y):[],A=v?Ix(cf(o,y),"".concat(h,"-option")):[],N=f?ZU(c,y):null,C=JU(c,j),T=Ug(A,C);S={selectValue:y,focusedOption:C,focusedOptionId:T,focusableOptionsWithIds:A,focusedValue:N,clearFocusValueOnUpdate:!1}}var R=a!=null&&o!==l?{inputIsHidden:a,inputIsHiddenAfterUpdate:void 0}:{},P=d,k=_&&w;return _&&!k&&(P={value:zh(p,y,y[0]||null),options:y,action:"initial-input-focus"},k=!w),(d==null?void 0:d.action)==="initial-input-focus"&&(P=null),Gt(Gt(Gt({},S),R),{},{prevProps:o,ariaSelection:P,prevWasFocused:k})}}]),n}(be.Component);dT.defaultProps=KU;var tF=be.forwardRef(function(s,r){var n=m4(s);return be.createElement(dT,Ht({ref:r},n))}),c0=tF;function Vf(){return Vf=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(s[t]=n[t])}return s},Vf.apply(this,arguments)}function rF(s,r){if(s==null)return{};var n={},t=Object.keys(s),o,c;for(c=0;c<t.length;c++)o=t[c],!(r.indexOf(o)>=0)&&(n[o]=s[o]);return n}var nF=["cdnSuffix","cdnUrl","countryCode","style","svg"],sF="https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/",iF="svg",oF=127397,Mx=function(r){var n=r.cdnSuffix,t=n===void 0?iF:n,o=r.cdnUrl,c=o===void 0?sF:o,l=r.countryCode,f=r.style,a=r.svg,d=a===void 0?!1:a,_=rF(r,nF);if(typeof l!="string")return null;if(d){var w=""+c+l.toLowerCase()+"."+t;return be.createElement("img",Object.assign({},_,{src:w,style:Vf({display:"inline-block",width:"1em",height:"1em",verticalAlign:"middle"},f)}))}var h=l.toUpperCase().replace(/./g,function(m){return String.fromCodePoint(m.charCodeAt(0)+oF)});return be.createElement("span",Object.assign({role:"img"},_,{style:Vf({display:"inline-block",fontSize:"1em",lineHeight:"1em",verticalAlign:"middle"},f)}),h)};const Fg={AF:{name:"Afghanistan",dial_code:"+93",code:"AF",flag:""},AL:{name:"Albania",dial_code:"+355",code:"AL",flag:""},DZ:{name:"Algeria",dial_code:"+213",code:"DZ",flag:""},AS:{name:"American Samoa",dial_code:"+1684",code:"AS",flag:""},AD:{name:"Andorra",dial_code:"+376",code:"AD",flag:""},AO:{name:"Angola",dial_code:"+244",code:"AO",flag:""},AI:{name:"Anguilla",dial_code:"+1264",code:"AI",flag:""},AG:{name:"Antigua and Barbuda",dial_code:"+1268",code:"AG",flag:""},AR:{name:"Argentina",dial_code:"+54",code:"AR",flag:""},AM:{name:"Armenia",dial_code:"+374",code:"AM",flag:""},AW:{name:"Aruba",dial_code:"+297",code:"AW",flag:""},AU:{name:"Australia",dial_code:"+61",code:"AU",flag:""},AT:{name:"Austria",dial_code:"+43",code:"AT",flag:""},AZ:{name:"Azerbaijan",dial_code:"+994",code:"AZ",flag:""},BS:{name:"Bahamas",dial_code:"+1242",code:"BS",flag:""},BH:{name:"Bahrain",dial_code:"+973",code:"BH",flag:""},BD:{name:"Bangladesh",dial_code:"+880",code:"BD",flag:""},BB:{name:"Barbados",dial_code:"+1246",code:"BB",flag:""},BY:{name:"Belarus",dial_code:"+375",code:"BY",flag:""},BE:{name:"Belgium",dial_code:"+32",code:"BE",flag:""},BZ:{name:"Belize",dial_code:"+501",code:"BZ",flag:""},BJ:{name:"Benin",dial_code:"+229",code:"BJ",flag:""},BM:{name:"Bermuda",dial_code:"+1441",code:"BM",flag:""},BT:{name:"Bhutan",dial_code:"+975",code:"BT",flag:""},BO:{name:"Bolivia",dial_code:"+591",code:"BO",flag:""},BA:{name:"Bosnia and Herzegovina",dial_code:"+387",code:"BA",flag:""},BW:{name:"Botswana",dial_code:"+267",code:"BW",flag:""},BR:{name:"Brazil",dial_code:"+55",code:"BR",flag:""},IO:{name:"British Indian Ocean Territory",dial_code:"+246",code:"IO",flag:""},BN:{name:"Brunei Darussalam",dial_code:"+673",code:"BN",flag:""},BG:{name:"Bulgaria",dial_code:"+359",code:"BG",flag:""},BF:{name:"Burkina Faso",dial_code:"+226",code:"BF",flag:""},BI:{name:"Burundi",dial_code:"+257",code:"BI",flag:""},KH:{name:"Cambodia",dial_code:"+855",code:"KH",flag:""},CM:{name:"Cameroon",dial_code:"+237",code:"CM",flag:""},CA:{name:"Canada",dial_code:"+1",code:"CA",flag:""},CV:{name:"Cape Verde",dial_code:"+238",code:"CV",flag:""},KY:{name:"Cayman Islands",dial_code:"+1345",code:"KY",flag:""},CF:{name:"Central African Republic",dial_code:"+236",code:"CF",flag:""},TD:{name:"Chad",dial_code:"+235",code:"TD",flag:""},CL:{name:"Chile",dial_code:"+56",code:"CL",flag:""},CN:{name:"China",dial_code:"+86",code:"CN",flag:""},CX:{name:"Christmas Island",dial_code:"+61",code:"CX",flag:""},CC:{name:"Cocos (Keeling) Islands",dial_code:"+61",code:"CC",flag:""},CO:{name:"Colombia",dial_code:"+57",code:"CO",flag:""},KM:{name:"Comoros",dial_code:"+269",code:"KM",flag:""},CG:{name:"Congo",dial_code:"+242",code:"CG",flag:""},CD:{name:"Congo, The Democratic Republic of the",dial_code:"+243",code:"CD",flag:""},CK:{name:"Cook Islands",dial_code:"+682",code:"CK",flag:""},CR:{name:"Costa Rica",dial_code:"+506",code:"CR",flag:""},CI:{name:"Cote d'Ivoire",dial_code:"+225",code:"CI",flag:""},HR:{name:"Croatia",dial_code:"+385",code:"HR",flag:""},CU:{name:"Cuba",dial_code:"+53",code:"CU",flag:""},CY:{name:"Cyprus",dial_code:"+357",code:"CY",flag:""},CZ:{name:"Czech Republic",dial_code:"+420",code:"CZ",flag:""},DK:{name:"Denmark",dial_code:"+45",code:"DK",flag:""},DJ:{name:"Djibouti",dial_code:"+253",code:"DJ",flag:""},DM:{name:"Dominica",dial_code:"+1767",code:"DM",flag:""},DO:{name:"Dominican Republic",dial_code:"+1849",code:"DO",flag:""},EC:{name:"Ecuador",dial_code:"+593",code:"EC",flag:""},EG:{name:"Egypt",dial_code:"+20",code:"EG",flag:""},SV:{name:"El Salvador",dial_code:"+503",code:"SV",flag:""},GQ:{name:"Equatorial Guinea",dial_code:"+240",code:"GQ",flag:""},ER:{name:"Eritrea",dial_code:"+291",code:"ER",flag:""},EE:{name:"Estonia",dial_code:"+372",code:"EE",flag:""},ET:{name:"Ethiopia",dial_code:"+251",code:"ET",flag:""},FK:{name:"Falkland Islands (Malvinas)",dial_code:"+500",code:"FK",flag:""},FO:{name:"Faroe Islands",dial_code:"+298",code:"FO",flag:""},FJ:{name:"Fiji",dial_code:"+679",code:"FJ",flag:""},FI:{name:"Finland",dial_code:"+358",code:"FI",flag:""},FR:{name:"France",dial_code:"+33",code:"FR",flag:""},GF:{name:"French Guiana",dial_code:"+594",code:"GF",flag:""},PF:{name:"French Polynesia",dial_code:"+689",code:"PF",flag:""},GA:{name:"Gabon",dial_code:"+241",code:"GA",flag:""},GM:{name:"Gambia",dial_code:"+220",code:"GM",flag:""},GE:{name:"Georgia",dial_code:"+995",code:"GE",flag:""},DE:{name:"Germany",dial_code:"+49",code:"DE",flag:""},GH:{name:"Ghana",dial_code:"+233",code:"GH",flag:""},GI:{name:"Gibraltar",dial_code:"+350",code:"GI",flag:""},GR:{name:"Greece",dial_code:"+30",code:"GR",flag:""},GL:{name:"Greenland",dial_code:"+299",code:"GL",flag:""},GD:{name:"Grenada",dial_code:"+1473",code:"GD",flag:""},GP:{name:"Guadeloupe",dial_code:"+590",code:"GP",flag:""},GU:{name:"Guam",dial_code:"+1671",code:"GU",flag:""},GT:{name:"Guatemala",dial_code:"+502",code:"GT",flag:""},GG:{name:"Guernsey",dial_code:"+44",code:"GG",flag:""},GN:{name:"Guinea",dial_code:"+224",code:"GN",flag:""},GW:{name:"Guinea-Bissau",dial_code:"+245",code:"GW",flag:""},GY:{name:"Guyana",dial_code:"+592",code:"GY",flag:""},HT:{name:"Haiti",dial_code:"+509",code:"HT",flag:""},HN:{name:"Honduras",dial_code:"+504",code:"HN",flag:""},HK:{name:"Hong Kong",dial_code:"+852",code:"HK",flag:""},HU:{name:"Hungary",dial_code:"+36",code:"HU",flag:""},IS:{name:"Iceland",dial_code:"+354",code:"IS",flag:""},IN:{name:"India",dial_code:"+91",code:"IN",flag:""},ID:{name:"Indonesia",dial_code:"+62",code:"ID",flag:""},IR:{name:"Iran, Islamic Republic of",dial_code:"+98",code:"IR",flag:""},IQ:{name:"Iraq",dial_code:"+964",code:"IQ",flag:""},IE:{name:"Ireland",dial_code:"+353",code:"IE",flag:""},IM:{name:"Isle of Man",dial_code:"+44",code:"IM",flag:""},IL:{name:"Israel",dial_code:"+972",code:"IL",flag:""},IT:{name:"Italy",dial_code:"+39",code:"IT",flag:""},JM:{name:"Jamaica",dial_code:"+1876",code:"JM",flag:""},JP:{name:"Japan",dial_code:"+81",code:"JP",flag:""},JE:{name:"Jersey",dial_code:"+44",code:"JE",flag:""},JO:{name:"Jordan",dial_code:"+962",code:"JO",flag:""},KZ:{name:"Kazakhstan",dial_code:"+7",code:"KZ",flag:""},KE:{name:"Kenya",dial_code:"+254",code:"KE",flag:""},KI:{name:"Kiribati",dial_code:"+686",code:"KI",flag:""},KP:{name:"Korea, Democratic People's Republic of",dial_code:"+850",code:"KP",flag:""},KR:{name:"Korea, Republic of",dial_code:"+82",code:"KR",flag:""},KW:{name:"Kuwait",dial_code:"+965",code:"KW",flag:""},KG:{name:"Kyrgyzstan",dial_code:"+996",code:"KG",flag:""},LA:{name:"Lao People's Democratic Republic",dial_code:"+856",code:"LA",flag:""},LV:{name:"Latvia",dial_code:"+371",code:"LV",flag:""},LB:{name:"Lebanon",dial_code:"+961",code:"LB",flag:""},LS:{name:"Lesotho",dial_code:"+266",code:"LS",flag:""},LR:{name:"Liberia",dial_code:"+231",code:"LR",flag:""},LY:{name:"Libyan Arab Jamahiriya",dial_code:"+218",code:"LY",flag:""},LI:{name:"Liechtenstein",dial_code:"+423",code:"LI",flag:""},LT:{name:"Lithuania",dial_code:"+370",code:"LT",flag:""},LU:{name:"Luxembourg",dial_code:"+352",code:"LU",flag:""},MO:{name:"Macao",dial_code:"+853",code:"MO",flag:""},MK:{name:"Macedonia, The Former Yugoslav Republic of",dial_code:"+389",code:"MK",flag:""},MG:{name:"Madagascar",dial_code:"+261",code:"MG",flag:""},MW:{name:"Malawi",dial_code:"+265",code:"MW",flag:""},MY:{name:"Malaysia",dial_code:"+60",code:"MY",flag:""},MV:{name:"Maldives",dial_code:"+960",code:"MV",flag:""},ML:{name:"Mali",dial_code:"+223",code:"ML",flag:""},MT:{name:"Malta",dial_code:"+356",code:"MT",flag:""},MH:{name:"Marshall Islands",dial_code:"+692",code:"MH",flag:""},MQ:{name:"Martinique",dial_code:"+596",code:"MQ",flag:""},MR:{name:"Mauritania",dial_code:"+222",code:"MR",flag:""},MU:{name:"Mauritius",dial_code:"+230",code:"MU",flag:""},YT:{name:"Mayotte",dial_code:"+262",code:"YT",flag:""},MX:{name:"Mexico",dial_code:"+52",code:"MX",flag:""},FM:{name:"Micronesia, Federated States of",dial_code:"+691",code:"FM",flag:""},MD:{name:"Moldova, Republic of",dial_code:"+373",code:"MD",flag:""},MC:{name:"Monaco",dial_code:"+377",code:"MC",flag:""},MN:{name:"Mongolia",dial_code:"+976",code:"MN",flag:""},ME:{name:"Montenegro",dial_code:"+382",code:"ME",flag:""},MS:{name:"Montserrat",dial_code:"+1664",code:"MS",flag:""},MA:{name:"Morocco",dial_code:"+212",code:"MA",flag:""},MZ:{name:"Mozambique",dial_code:"+258",code:"MZ",flag:""},MM:{name:"Myanmar",dial_code:"+95",code:"MM",flag:""},NA:{name:"Namibia",dial_code:"+264",code:"NA",flag:""},NR:{name:"Nauru",dial_code:"+674",code:"NR",flag:""},NP:{name:"Nepal",dial_code:"+977",code:"NP",flag:""},NL:{name:"Netherlands",dial_code:"+31",code:"NL",flag:""},NC:{name:"New Caledonia",dial_code:"+687",code:"NC",flag:""},NZ:{name:"New Zealand",dial_code:"+64",code:"NZ",flag:""},NI:{name:"Nicaragua",dial_code:"+505",code:"NI",flag:""},NE:{name:"Niger",dial_code:"+227",code:"NE",flag:""},NG:{name:"Nigeria",dial_code:"+234",code:"NG",flag:""},NU:{name:"Niue",dial_code:"+683",code:"NU",flag:""},NF:{name:"Norfolk Island",dial_code:"+672",code:"NF",flag:""},MP:{name:"Northern Mariana Islands",dial_code:"+1670",code:"MP",flag:""},NO:{name:"Norway",dial_code:"+47",code:"NO",flag:""},OM:{name:"Oman",dial_code:"+968",code:"OM",flag:""},PK:{name:"Pakistan",dial_code:"+92",code:"PK",flag:""},PW:{name:"Palau",dial_code:"+680",code:"PW",flag:""},PS:{name:"Palestinian Territory, Occupied",dial_code:"+970",code:"PS",flag:""},PA:{name:"Panama",dial_code:"+507",code:"PA",flag:""},PG:{name:"Papua New Guinea",dial_code:"+675",code:"PG",flag:""},PY:{name:"Paraguay",dial_code:"+595",code:"PY",flag:""},PE:{name:"Peru",dial_code:"+51",code:"PE",flag:""},PH:{name:"Philippines",dial_code:"+63",code:"PH",flag:""},PN:{name:"Pitcairn",dial_code:"+64",code:"PN",flag:""},PL:{name:"Poland",dial_code:"+48",code:"PL",flag:""},PT:{name:"Portugal",dial_code:"+351",code:"PT",flag:""},PR:{name:"Puerto Rico",dial_code:"+1939",code:"PR",flag:""},QA:{name:"Qatar",dial_code:"+974",code:"QA",flag:""},RE:{name:"Reunion",dial_code:"+262",code:"RE",flag:""},RO:{name:"Romania",dial_code:"+40",code:"RO",flag:""},RU:{name:"Russian Federation",dial_code:"+7",code:"RU",flag:""},RW:{name:"Rwanda",dial_code:"+250",code:"RW",flag:""},BL:{name:"Saint Barthelemy",dial_code:"+590",code:"BL",flag:""},SH:{name:"Saint Helena",dial_code:"+290",code:"SH",flag:""},KN:{name:"Saint Kitts and Nevis",dial_code:"+1869",code:"KN",flag:""},LC:{name:"Saint Lucia",dial_code:"+1758",code:"LC",flag:""},MF:{name:"Saint Martin",dial_code:"+590",code:"MF",flag:""},PM:{name:"Saint Pierre and Miquelon",dial_code:"+508",code:"PM",flag:""},VC:{name:"Saint Vincent and the Grenadines",dial_code:"+1784",code:"VC",flag:""},WS:{name:"Samoa",dial_code:"+685",code:"WS",flag:""},SM:{name:"San Marino",dial_code:"+378",code:"SM",flag:""},ST:{name:"Sao Tome and Principe",dial_code:"+239",code:"ST",flag:""},SA:{name:"Saudi Arabia",dial_code:"+966",code:"SA",flag:""},SN:{name:"Senegal",dial_code:"+221",code:"SN",flag:""},RS:{name:"Serbia",dial_code:"+381",code:"RS",flag:""},SC:{name:"Seychelles",dial_code:"+248",code:"SC",flag:""},SL:{name:"Sierra Leone",dial_code:"+232",code:"SL",flag:""},SG:{name:"Singapore",dial_code:"+65",code:"SG",flag:""},SK:{name:"Slovakia",dial_code:"+421",code:"SK",flag:""},SI:{name:"Slovenia",dial_code:"+386",code:"SI",flag:""},SB:{name:"Solomon Islands",dial_code:"+677",code:"SB",flag:""},SO:{name:"Somalia",dial_code:"+252",code:"SO",flag:""},ZA:{name:"South Africa",dial_code:"+27",code:"ZA",flag:""},ES:{name:"Spain",dial_code:"+34",code:"ES",flag:""},LK:{name:"Sri Lanka",dial_code:"+94",code:"LK",flag:""},SD:{name:"Sudan",dial_code:"+249",code:"SD",flag:""},SR:{name:"Suriname",dial_code:"+597",code:"SR",flag:""},SZ:{name:"Swaziland",dial_code:"+268",code:"SZ",flag:""},SE:{name:"Sweden",dial_code:"+46",code:"SE",flag:""},CH:{name:"Switzerland",dial_code:"+41",code:"CH",flag:""},SY:{name:"Syrian Arab Republic",dial_code:"+963",code:"SY",flag:""},TW:{name:"Taiwan, Province of China",dial_code:"+886",code:"TW",flag:""},TJ:{name:"Tajikistan",dial_code:"+992",code:"TJ",flag:""},TZ:{name:"Tanzania, United Republic of",dial_code:"+255",code:"TZ",flag:""},TH:{name:"Thailand",dial_code:"+66",code:"TH",flag:""},TL:{name:"Timor-Leste",dial_code:"+670",code:"TL",flag:""},TG:{name:"Togo",dial_code:"+228",code:"TG",flag:""},TK:{name:"Tokelau",dial_code:"+690",code:"TK",flag:""},TO:{name:"Tonga",dial_code:"+676",code:"TO",flag:""},TT:{name:"Trinidad and Tobago",dial_code:"+1868",code:"TT",flag:""},TN:{name:"Tunisia",dial_code:"+216",code:"TN",flag:""},TR:{name:"Turkey",dial_code:"+90",code:"TR",flag:""},TM:{name:"Turkmenistan",dial_code:"+993",code:"TM",flag:""},TC:{name:"Turks and Caicos Islands",dial_code:"+1649",code:"TC",flag:""},TV:{name:"Tuvalu",dial_code:"+688",code:"TV",flag:""},UG:{name:"Uganda",dial_code:"+256",code:"UG",flag:""},UA:{name:"Ukraine",dial_code:"+380",code:"UA",flag:""},AE:{name:"United Arab Emirates",dial_code:"+971",code:"AE",flag:""},GB:{name:"United Kingdom",dial_code:"+44",code:"GB",flag:""},US:{name:"United States",dial_code:"+1",code:"US",flag:""},UY:{name:"Uruguay",dial_code:"+598",code:"UY",flag:""},UZ:{name:"Uzbekistan",dial_code:"+998",code:"UZ",flag:""},VU:{name:"Vanuatu",dial_code:"+678",code:"VU",flag:""},VE:{name:"Venezuela, Bolivarian Republic of",dial_code:"+58",code:"VE",flag:""},VN:{name:"Vietnam",dial_code:"+84",code:"VN",flag:""},VG:{name:"Virgin Islands, British",dial_code:"+1284",code:"VG",flag:""},VI:{name:"Virgin Islands, U.S.",dial_code:"+1340",code:"VI",flag:""},WF:{name:"Wallis and Futuna",dial_code:"+681",code:"WF",flag:""},YE:{name:"Yemen",dial_code:"+967",code:"YE",flag:""},ZM:{name:"Zambia",dial_code:"+260",code:"ZM",flag:""},ZW:{name:"Zimbabwe",dial_code:"+263",code:"ZW",flag:""}},vp=({phoneNumber:s,setPhoneNumber:r,setPhoneErrors:n,errors:t})=>{const[o,c]=be.useState({value:"US",label:Fg.US.name,dial_code:Fg.US.dial_code,code:"US"}),[l,f]=be.useState(""),a=Object.entries(Fg).map(([b,v])=>({value:b,label:v.name,dial_code:v.dial_code,code:v.code})),d=({data:b,innerRef:v,innerProps:g})=>B.jsxs("div",{ref:v,...g,className:"flex items-center px-2 py-1",children:[B.jsx(Mx,{countryCode:b.code,svg:!0,style:{width:"1.5em",height:"1.5em",marginRight:"0.5em"}}),B.jsxs("span",{children:[b.label," (",b.dial_code,")"]})]}),_=({data:b})=>B.jsxs("div",{className:"flex items-center",children:[B.jsx(Mx,{countryCode:b.code,svg:!0,style:{width:"1.5em",height:"1.5em",marginRight:"0.5em"}}),B.jsx("span",{children:b.dial_code})]}),w=b=>{b&&(c(b),m(b.dial_code,l))},h=b=>{const v=b.target.value.replace(/\D/g,"");f(v),m(o.dial_code,v)},m=(b,v)=>{const g=`${b}${v}`;r(g);const p=Zv(g);n(p)};return B.jsxs("div",{className:"mb-4",children:[B.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),B.jsxs("div",{className:"flex",children:[B.jsx("div",{className:"w-40",children:B.jsx(c0,{value:o,onChange:w,options:a,className:"react-select-container",classNamePrefix:"react-select",placeholder:"Select Country",isSearchable:!0,components:{Option:d,SingleValue:_}})}),B.jsx("div",{className:"flex-grow ml-2",children:B.jsx(Fn,{label:"",name:"phoneNumber",type:"tel",value:l,onChange:h,errors:t,placeholder:"Enter your phone number"})})]}),t.length>0&&t.map((b,v)=>B.jsx(sn,{message:b,type:"error"},v))]})},Hh=3,Px=30;function aF({user:s,initialPhoneE164:r="",onDone:n,onSkip:t}){const[o,c]=be.useState(r||""),[l,f]=be.useState([]),[a,d]=be.useState(null),[_,w]=be.useState(""),[h,m]=be.useState(!1),[b,v]=be.useState(null),[g,p]=be.useState(!1),[y,S]=be.useState(""),[j,A]=be.useState(0),[N,C]=be.useState(0),T=be.useRef(null),R=be.useRef(null),P=be.useRef(null);function k(){var re,oe;try{(oe=(re=P.current)==null?void 0:re.clear)==null||oe.call(re)}catch{}if(R.current){const M=document.getElementById(R.current);M!=null&&M.parentNode&&M.parentNode.removeChild(M),R.current=null}P.current=null}be.useEffect(()=>()=>{k(),T.current&&(window.clearInterval(T.current),T.current=null)},[]);async function F(){k();const re=`recaptcha-${Date.now()}-${Math.random().toString(36).slice(2)}`,oe=document.createElement("div");oe.id=re,oe.style.display="none",document.body.appendChild(oe),R.current=re;const M=new _d(or,re,{size:"invisible"});await M.render(),P.current=M}function D(){T.current&&(window.clearInterval(T.current),T.current=null),C(Px),v({text:`Too many attempts. Auto-resending in ${Px}s`,type:"error"}),T.current=window.setInterval(async()=>{C(re=>{const oe=re-1;return oe<=0?(T.current&&(window.clearInterval(T.current),T.current=null),W(!0),0):oe})},1e3)}function q(){T.current&&(window.clearInterval(T.current),T.current=null),C(0)}function H(re){return/^\+[1-9]\d{6,14}$/.test(re.trim())}async function W(re=!1){if(h||N>0&&!re)return;if(l.length){v({text:"Please fix the phone number.",type:"error"});return}const oe=o.trim();if(!H(oe)){v({text:"Enter a valid phone (E.164), e.g. +15551234567.",type:"error"});return}m(!0),v(re?{text:"Sending a new code",type:"info"}:null);try{await F();const z=await Eu(s).getSession(),ee=await new ws(or).verifyPhoneNumber({phoneNumber:oe,session:z},P.current);d(ee),w(""),A(0),q(),v({text:re?"A new code was sent automatically.":`Code sent to ${oe.slice(-4)}.`,type:"success"})}catch(M){(M==null?void 0:M.code)==="auth/requires-recent-login"?(p(!0),v({text:"Please confirm your password to continue.",type:"info"})):(M==null?void 0:M.code)==="auth/too-many-requests"?v({text:"Too many requests. Please wait a bit and try again.",type:"error"}):(M==null?void 0:M.code)==="auth/invalid-phone-number"?v({text:"That phone number is not valid.",type:"error"}):v({text:(M==null?void 0:M.message)||"Could not send code.",type:"error"})}finally{m(!1)}}async function Q(){if(!y.trim()){v({text:"Enter your password to continue.",type:"error"});return}m(!0),v(null);try{const re=Ml.credential(s.email||"",y);await BI(s,re),p(!1),S(""),await W()}catch(re){v({text:`Re-auth failed: ${(re==null?void 0:re.code)||""} ${(re==null?void 0:re.message)||""}`,type:"error"})}finally{m(!1)}}async function J(){if(!a){v({text:"Please send a code first.",type:"error"});return}if(_.trim()){m(!0),v(null);try{const re=ws.credential(a,_.trim()),oe=Kf.assertion(re);await Eu(s).enroll(oe,"Phone"),await Wf(s),localStorage.getItem("pending_phone_e164")===o&&localStorage.removeItem("pending_phone_e164"),v({text:"Phone linked. MFA enabled.",type:"success"}),k(),n()}catch(re){if((re==null?void 0:re.code)==="auth/invalid-verification-code"||(re==null?void 0:re.code)==="auth/code-expired"||(re==null?void 0:re.code)==="auth/argument-error"){const oe=j+1;A(oe),w(""),oe>=Hh?D():v({text:`The code is incorrect or expired. (${oe}/${Hh})`,type:"error"})}else(re==null?void 0:re.code)==="auth/too-many-requests"?v({text:"Too many attempts. Please wait a bit and try again.",type:"error"}):v({text:(re==null?void 0:re.message)||"Could not enroll phone.",type:"error"})}finally{m(!1)}}}function Z(){k(),t()}const K=h||N>0;return B.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:B.jsxs("div",{className:"w-full max-w-md rounded bg-white p-4 shadow-lg space-y-3",children:[B.jsx("h2",{className:"text-lg font-semibold",children:"Add your phone for 2-step verification"}),B.jsx("p",{className:"text-sm text-gray-600",children:"Youll get a one-time code by SMS when you sign in."}),b&&B.jsx("div",{className:`rounded border px-3 py-2 text-sm ${b.type==="success"?"bg-green-50 text-green-700 border-green-300":b.type==="error"?"bg-red-50 text-red-700 border-red-300":"bg-blue-50 text-blue-700 border-blue-300"}`,children:b.text}),B.jsx(vp,{phoneNumber:o,setPhoneNumber:c,setPhoneErrors:f,errors:l,disabled:K||!!a}),a?B.jsxs(B.Fragment,{children:[B.jsx("input",{className:"w-full rounded border px-3 py-2",placeholder:"123456",value:_,onChange:re=>w(re.target.value),disabled:K}),B.jsxs("div",{className:"flex gap-2",children:[B.jsx("button",{onClick:J,disabled:K||!_.trim(),className:"rounded bg-green-600 px-3 py-2 text-white disabled:bg-gray-400",children:"Verify & Enroll"}),B.jsx("button",{onClick:()=>W(!1),disabled:K,className:"rounded border px-3 py-2",children:"Resend code"}),B.jsx("button",{onClick:Z,disabled:h,className:"rounded border px-3 py-2",children:"Cancel"})]}),N>0&&B.jsxs("div",{className:"text-sm text-amber-600",children:["Too many attempts. Auto-resending in ",N,"s"]}),B.jsxs("div",{className:"text-xs text-gray-500",children:["Attempts: ",Math.min(j,Hh),"/",Hh]})]}):B.jsxs("div",{className:"flex gap-2",children:[B.jsx("button",{onClick:()=>W(!1),disabled:K,className:"rounded bg-blue-600 px-3 py-2 text-white disabled:bg-gray-400",children:"Send code"}),B.jsx("button",{onClick:Z,disabled:h,className:"rounded border px-3 py-2",children:"Skip for now"})]}),g&&B.jsxs("div",{className:"rounded border p-3 bg-amber-50 space-y-2",children:[B.jsx("div",{className:"text-sm",children:"For security, confirm your password to continue."}),B.jsx("input",{type:"password",className:"w-full rounded border px-3 py-2",placeholder:"",value:y,onChange:re=>S(re.target.value)}),B.jsxs("div",{className:"flex gap-2",children:[B.jsx("button",{onClick:Q,disabled:h,className:"rounded bg-amber-600 px-3 py-2 text-white disabled:bg-gray-400",children:"Confirm"}),B.jsx("button",{onClick:()=>p(!1),disabled:h,className:"rounded border px-3 py-2",children:"Cancel"})]})]})]})})}const Mc=3,Vg=30,Bg=2*60*1e3,lF="/finish-email-signin",uF=60,cF=15*60,dF=new Set(["auth/multi-factor-session-expired","auth/invalid-app-credential","auth/missing-app-credential","auth/captcha-check-failed","auth/expired-action-code"]);function hF(){const s=ms(),[r,n]=be.useState(""),[t,o]=be.useState([]),[c,l]=be.useState(""),[f,a]=be.useState([]),[d,_]=be.useState(null),[w,h]=be.useState(""),[m,b]=be.useState(""),[v,g]=be.useState(!1),[p,y]=be.useState(0),[S,j]=be.useState(0),A=be.useRef(null),[N,C]=be.useState(null),[T,R]=be.useState(!1),P=be.useRef(null),k=be.useRef(null),[F,D]=be.useState(Math.floor(Bg/1e3)),[q,H]=be.useState(0),[W,Q]=be.useState(0),[J,Z]=be.useState(0),K=be.useRef(null),re=be.useMemo(()=>!!(d||w),[d,w]),oe=be.useRef(re);be.useEffect(()=>{oe.current=re},[re]);const[M,z]=be.useState({text:"",type:"info"}),[$,ee]=be.useState(!1),le=()=>Date.now(),ce=()=>W>le();function me(){var Ie,de,he;try{(de=(Ie=window.recaptchaVerifier)==null?void 0:Ie.clear)==null||de.call(Ie)}catch{}try{(he=window.recaptchaContainerEl)!=null&&he.parentNode&&window.recaptchaContainerEl.parentNode.removeChild(window.recaptchaContainerEl)}catch{}window.recaptchaVerifier=void 0,window.recaptchaContainerEl=null}async function ve(){me();const Ie=document.createElement("div");Ie.style.display="none",Ie.id=`recaptcha-${Date.now()}-${Math.random().toString(36).slice(2)}`,document.body.appendChild(Ie),window.recaptchaContainerEl=Ie,window.recaptchaVerifier=new _d(or,Ie,{size:"invisible"}),await window.recaptchaVerifier.render()}function ge(){P.current&&(window.clearTimeout(P.current),P.current=null),k.current&&(window.clearInterval(k.current),k.current=null)}function we(){ge(),D(Math.floor(Bg/1e3)),P.current=window.setTimeout(()=>{Ue("Session timed out. Please log in again.")},Bg),k.current=window.setInterval(()=>{D(Ie=>Ie>0?Ie-1:0)},1e3)}function xe(){K.current&&(window.clearInterval(K.current),K.current=null)}function fe(Ie){const de=le()+Ie*1e3;Q(de),Z(Ie),xe(),K.current=window.setInterval(()=>{const he=Math.max(0,Math.ceil((de-le())/1e3));Z(he),he<=0&&Ce()},1e3)}function Se(){const Ie=Math.min(uF*Math.pow(2,q),cF);H(de=>Math.min(de+1,30)),fe(Ie),oe.current&&z({text:`Too many attempts. Please wait ${Ie}s before trying again.`,type:"error"})}function Ce(){H(0),Q(0),Z(0),xe()}function Ne(){A.current&&(window.clearInterval(A.current),A.current=null),j(0)}function Oe(){Ne(),j(Vg),z({text:`Too many attempts. Auto-resending in ${Vg}s`,type:"error"}),A.current=window.setInterval(()=>{j(Ie=>{const de=Ie-1;return de<=0?(window.clearInterval(A.current),A.current=null,oe.current&&d&&mt(!0),0):de})},1e3)}be.useEffect(()=>{re&&p>=Mc&&S===0&&Oe()},[p,re]);function Me(){_(null),h(""),b(""),g(!1),y(0),ge(),me(),Ne()}function Ue(Ie){Me(),Ce(),l(""),z({text:Ie??"Returning to login",type:"info"})}be.useEffect(()=>(re?we():ge(),()=>ge()),[re]),be.useEffect(()=>{re&&we()},[m,v]),be.useEffect(()=>()=>{me(),xe(),Ne()},[]);async function et(Ie){if(ce()){oe.current&&z({text:`Please wait ${J}s before requesting a new code.`,type:"error"});return}const de=W_(or,Ie);_(de);try{await ve();const he=de.hints[0],ye=await new ws(or).verifyPhoneNumber({multiFactorHint:he,session:de.session},window.recaptchaVerifier);h(ye),g(!0);const Pe=he!=null&&he.phoneNumber?`${he.phoneNumber.slice(-4)}`:"your phone";z({text:`We sent a code to ${Pe}.`,type:"info"}),we(),Ce()}catch(he){throw(he==null?void 0:he.code)==="auth/too-many-requests"?Se():z({text:(he==null?void 0:he.message)||"Could not send the verification code.",type:"error"}),he}}async function Fe(Ie){if(Ie.preventDefault(),!$&&!(t.length||f.length)){ee(!0),z({text:"",type:"info"}),Me();try{const he=(await sy(or,r.trim(),c)).user;if((Eu(he).enrolledFactors||[]).length===0){C(he),R(!0),z({text:"Please add your phone for 2-step verification.",type:"info"});return}z({text:"Login successful! Redirecting",type:"success"}),setTimeout(()=>s("/stablehand-welcome"),800)}catch(de){if((de==null?void 0:de.code)==="auth/multi-factor-auth-required")try{await et(de)}catch{}else(de==null?void 0:de.code)==="auth/too-many-requests"?Se():z({text:"Login failed. Check your email and password.",type:"error"})}finally{ee(!1)}}}async function mt(Ie){if(S>0&&!Ie)return;if(ce()){oe.current&&z({text:`Please wait ${J}s before requesting a new code.`,type:"error"});return}try{await ve();const he=d==null?void 0:d.hints[0],ye=await new ws(or).verifyPhoneNumber({multiFactorHint:he,session:d.session},window.recaptchaVerifier);h(ye),g(!0),b(""),y(0),z({text:Ie?"A new code was sent automatically.":"A new code was sent.",type:"success"}),we(),Ce(),Ne();return}catch(he){if((he==null?void 0:he.code)==="auth/too-many-requests"){Se();return}if(!dF.has(he==null?void 0:he.code))throw he}const de=await ut();if(!ce())try{await ve();const he=de.hints[0],ye=await new ws(or).verifyPhoneNumber({multiFactorHint:he,session:de.session},window.recaptchaVerifier);_(de),h(ye),g(!0),b(""),y(0),z({text:Ie?"A new code was sent automatically.":"A new code was sent.",type:"success"}),we(),Ce(),Ne()}catch(he){(he==null?void 0:he.code)==="auth/too-many-requests"?Se():z({text:(he==null?void 0:he.message)||"Failed to resend code.",type:"error"})}}async function ut(){try{throw await sy(or,r.trim(),c),z({text:"Login successful! Redirecting",type:"success"}),setTimeout(()=>s("/stablehand-welcome"),800),new Error("Unexpected success: MFA not required.")}catch(Ie){if((Ie==null?void 0:Ie.code)==="auth/multi-factor-auth-required")return W_(or,Ie);throw Ue("We need you to log in again."),Ie}}async function it(){if(!(!d||!w)&&!$){if(ce()){oe.current&&z({text:`Please wait ${J}s before trying again.`,type:"error"});return}if(!(S>0)){ee(!0),z({text:"",type:"info"});try{const Ie=ws.credential(w,m.trim()),de=Kf.assertion(Ie);await d.resolveSignIn(de),z({text:"MFA successful! Redirecting",type:"success"}),ge(),Ne(),setTimeout(()=>s("/stablehand-welcome"),800)}catch(Ie){if((Ie==null?void 0:Ie.code)==="auth/too-many-requests"){Se();return}const de=p+1;y(de),b(""),de>=Mc?z({text:`Too many attempts. Auto-resending in ${Vg}s`,type:"error"}):(z({text:`The code is incorrect or expired. (${de}/${Mc})`,type:"error"}),we())}finally{ee(!1)}}}}async function ft(){d&&($||S>0||await mt(!1))}async function at(){if(!$){if(!r){z({text:"Enter your email above first, then tap Send to Email.",type:"error"});return}ee(!0);try{Me();const Ie={url:`${window.location.origin}${lF}`,handleCodeInApp:!0};await qI(or,r.trim(),Ie),window.localStorage.setItem("emailForSignIn",r.trim()),z({text:`We sent a secure sign-in link to ${r}. Open it on this device to finish.`,type:"success"}),Ce()}catch(Ie){(Ie==null?void 0:Ie.code)==="auth/too-many-requests"?Se():z({text:(Ie==null?void 0:Ie.message)||"Failed to send email link.",type:"error"})}finally{ee(!1)}}}function Le(){Ue("Cancelled. You can try logging in again.")}const Je=$||re&&ce()||S>0;return B.jsxs("div",{className:"space-y-4",children:[!re&&!T&&B.jsxs("form",{onSubmit:Fe,className:"space-y-4",children:[B.jsx(SE,{email:r,setEmail:n,setEmailErrors:o,errors:t}),B.jsx(jE,{password:c,setPassword:l,setPasswordErrors:a,errors:f}),M.text&&B.jsx(sn,{message:M.text,type:M.type}),B.jsx(An,{type:"submit",disabled:$,className:"w-full bg-blue-600 text-white",children:"Log In"})]}),re&&!T&&B.jsxs("div",{className:"space-y-4",children:[B.jsx(Fn,{name:"smsCode",label:"SMS Code",type:"text",value:m,onChange:Ie=>b(Ie.target.value),placeholder:"123456"}),M.text&&B.jsx(sn,{message:M.text,type:M.type}),ce()&&B.jsxs("div",{className:"text-sm text-amber-600",children:["Too many attempts. Please wait ",J,"s before trying again."]}),S>0&&B.jsxs("div",{className:"text-sm text-amber-600",children:["Too many attempts. Auto-resending in ",S,"s"]}),B.jsxs("div",{className:"flex flex-wrap text-xs gap-2",children:[B.jsx(An,{onClick:it,disabled:Je||!m.trim(),className:"flex-1 bg-green-600 text-white",children:"Verify"}),B.jsx(An,{type:"button",onClick:ft,disabled:Je,className:"flex-1",children:v?"Resend code (SMS)":"Send code (SMS)"}),B.jsx(An,{type:"button",onClick:at,disabled:Je||!r,className:"flex-1",children:"Send to Email"}),B.jsx(An,{type:"button",onClick:Le,className:"flex-1",children:"Back to login"})]}),B.jsxs("div",{className:"text-xs text-gray-500",children:["Attempts: ",Math.min(p,Mc),"/",Mc,"  Idle timeout: ",Math.max(0,F),"s"]})]}),T&&N&&B.jsx(aF,{user:N,initialPhoneE164:localStorage.getItem("pending_phone_e164")||"",onDone:()=>{localStorage.removeItem("pending_phone_e164"),R(!1),z({text:"Phone linked. MFA enabled. Redirecting",type:"success"}),setTimeout(()=>s("/stablehand-welcome"),700)},onSkip:()=>{R(!1),z({text:"You can add MFA later in settings.",type:"info"}),setTimeout(()=>s("/stablehand-welcome"),500)}})]})}const fF=({clearEmailAndPasswordErrors:s,isRegister:r=!1})=>{const[n,t]=be.useState(""),[o,c]=be.useState([]),[l,f]=be.useState(""),[a,d]=be.useState(!1),[_,w]=be.useState({message:"",type:"success"}),h=ms(),m=async()=>{if(s==null||s(),w({message:"",type:"success"}),window.recaptchaVerifier)try{window.recaptchaVerifier.clear()}catch{}window.recaptchaVerifier=new _d(or,"recaptcha-container",{size:"invisible"}),await window.recaptchaVerifier.render();try{const v=await JS(or,n,window.recaptchaVerifier);window.confirmationResult=v,d(!0),w({message:"Verification code sent via SMS.",type:"success"})}catch(v){console.error("Error sending SMS:",v),w({message:v.message||"Failed to send code.",type:"error"})}},b=async()=>{if(w({message:"",type:"success"}),!l){w({message:"Please enter the verification code.",type:"error"});return}try{const v=await window.confirmationResult.confirm(l);w({message:"Phone login successful! Redirecting...",type:"success"}),setTimeout(()=>h("/stablehand-welcome"),2e3)}catch(v){console.error("Verification failed:",v),w({message:"Invalid verification code.",type:"error"})}};return B.jsxs("div",{className:"space-y-4",children:[B.jsx(vp,{phoneNumber:n,setPhoneNumber:t,setPhoneErrors:c,errors:o}),a&&B.jsx(Fn,{label:"Verification Code",type:"text",value:l,onChange:v=>f(v.target.value),placeholder:"Enter the code",errors:[]}),_.message&&B.jsx(sn,{message:_.message,type:_.type}),B.jsx("div",{className:"flex justify-between space-x-2",children:a?B.jsx(An,{type:"button",className:"w-full bg-green-500 hover:bg-green-700 text-white font-bold",onClick:b,children:"Verify Code"}):B.jsx(An,{type:"button",className:"w-full bg-yellow-500 hover:bg-yellow-700 text-black font-bold",onClick:m,children:r?"Register with Phone":"Login with Phone"})}),B.jsx("div",{id:"recaptcha-container",className:"mt-2"})]})},pF=()=>{const[s,r]=be.useState("email");ms();const n=()=>{r("phone")};return B.jsx(In,{children:B.jsxs("div",{className:"w-full max-w-md mx-auto",children:[B.jsxs("div",{className:"flex mb-6",children:[B.jsx("button",{type:"button",className:`flex-1 py-2 ${s==="email"?"bg-blue-600 text-white":"bg-gray-200"}`,onClick:()=>r("email"),children:"Email"}),B.jsx("button",{type:"button",className:`flex-1 py-2 ${s==="phone"?"bg-blue-600 text-white":"bg-gray-200"}`,onClick:()=>r("phone"),children:"Phone"})]}),s==="email"?B.jsx(hF,{onPhoneEnrollRequested:n}):B.jsx(fF,{clearEmailAndPasswordErrors:()=>{}})]})})},mF=({confirmPassword:s,setConfirmPassword:r,password:n,setConfirmPasswordErrors:t})=>{const[o,c]=be.useState([]),[l,f]=be.useState(!1),a=_=>{const{value:w}=_.target;r(w);const h=bE(w).concat(w!==n?["Passwords do not match"]:[]);t(h),c(h)},d=_=>{f(hp(_))};return B.jsxs("div",{children:[B.jsx(Fn,{label:"Confirm Password",type:"password",value:s,onChange:a,onKeyDown:d,errors:o,placeholder:"Confirm your password"}),l&&B.jsx(sn,{message:"Caps Lock is on",type:"warning"})]})},gF=60,Dx=3;function yF({onRegister:s}){const r=ms(),[n,t]=be.useState(""),[o,c]=be.useState(""),[l,f]=be.useState(""),[a,d]=be.useState(!1),[_,w]=be.useState(""),[h,m]=be.useState([]),[b,v]=be.useState([]),[g,p]=be.useState([]),[y,S]=be.useState([]),[j,A]=be.useState("form"),[N,C]=be.useState(null),[T,R]=be.useState(!1),[P,k]=be.useState(0),[F,D]=be.useState(0),q=be.useRef(null),[H,W]=be.useState(null);be.useEffect(()=>(P>0&&(q.current&&window.clearInterval(q.current),q.current=window.setInterval(()=>{k(K=>K<=1?(q.current&&(window.clearInterval(q.current),q.current=null),0):K-1)},1e3)),()=>{q.current&&(window.clearInterval(q.current),q.current=null)}),[P]);async function Q(K){if(K.preventDefault(),!T){if(o!==l){C({text:"Passwords do not match.",type:"error"});return}if(h.length||b.length||g.length||y.length){C({text:"Please fix the errors in the form.",type:"error"});return}R(!0),C(null);try{const re=await zS(or,n.trim(),o);W(re.user),await vf(re.user),a&&!y.length&&_?localStorage.setItem("pending_phone_e164",_):localStorage.removeItem("pending_phone_e164"),s==null||s(n,o,a?_:void 0),A("email-sent"),C({text:`We sent a verification email to ${n}. Open it, click the link, then come back and press Ive verified  check again.`,type:"success"})}catch(re){C({text:(re==null?void 0:re.message)||"Registration failed.",type:"error"})}finally{R(!1)}}}async function J(K=!1){if(!T){if(!or.currentUser&&!H){C({text:"Not signed in. Please register again.",type:"error"});return}R(!0);try{const re=or.currentUser||H;await vf(re),C({text:K?"Sent another verification email automatically.":"Verification email sent again.",type:"success"}),D(0),k(gF)}catch(re){C({text:(re==null?void 0:re.message)||"Could not resend right now. Please wait a bit.",type:"error"})}finally{R(!1)}}}async function Z(){if(!T){R(!0);try{const K=or.currentUser||H;if(!K){C({text:"Not signed in. Please register again.",type:"error"});return}if(await Wf(K),K.emailVerified){C({text:"Email verified! You can now log in.",type:"success"}),setTimeout(()=>r("/login"),700);return}const re=F+1;D(re),re>=Dx&&P===0?(C({text:"Still not verified. Sending you another verification email",type:"info"}),await J(!0)):C({text:"Not verified yet. Please click the link in your email, then press Check again.",type:"info"})}catch(K){C({text:(K==null?void 0:K.message)||"Could not check verification status right now.",type:"error"})}finally{R(!1)}}}return B.jsxs("div",{className:"max-w-md mx-auto mt-10 p-6 bg-white rounded shadow space-y-4",children:[N&&B.jsx(sn,{message:N.text,type:N.type}),j==="form"&&B.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[B.jsx(SE,{email:n,setEmail:t,setEmailErrors:m,errors:h}),B.jsx(jE,{password:o,setPassword:c,setPasswordErrors:v,errors:b}),B.jsx(mF,{confirmPassword:l,setConfirmPassword:f,password:o,setConfirmPasswordErrors:p}),B.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[B.jsx("input",{type:"checkbox",checked:a,onChange:K=>d(K.target.checked)}),B.jsx("span",{children:"Save phone for MFA on first login"})]}),a&&B.jsx(vp,{phoneNumber:_,setPhoneNumber:w,setPhoneErrors:S,errors:y}),B.jsx(An,{type:"submit",className:"w-full py-2 bg-blue-600 text-white rounded",disabled:T,children:"Create account & send verification email"})]}),j==="email-sent"&&B.jsxs("div",{className:"space-y-3",children:[B.jsxs("div",{className:"flex gap-2",children:[B.jsx(An,{onClick:Z,disabled:T,className:"flex-1 bg-green-600 text-white",children:"Ive verified  check again"}),B.jsx(An,{onClick:()=>r("/login"),className:"flex-1",children:"Go to login"})]}),B.jsxs("div",{className:"flex items-center gap-2",children:[B.jsx(An,{onClick:()=>J(!1),disabled:T||P>0,className:"bg-indigo-600 text-white",children:P>0?`Resend in ${P}s`:"Resend verification email"}),B.jsx("span",{className:"text-sm text-gray-600",children:F>0&&`Checks failed: ${F}/${Dx}`})]}),B.jsx("p",{className:"text-xs text-gray-500",children:"Tip: keep this page open after clicking the link, then press Check again."})]})]})}const vF=()=>{ms();const s=async(r,n,t)=>{console.log("Registering user with:",{email:r,password:n,phoneNumber:t})};return B.jsx(In,{bgColor:"bg-gray-100",children:B.jsxs("div",{className:"w-full max-w-lg bg-white p-8 rounded-lg shadow-md border border-gray-300",children:[B.jsx("h1",{className:"text-4xl font-bold mb-4 text-center",children:"Register"}),B.jsx(yF,{onRegister:s})]})})},bF=()=>{const[s,r]=be.useState(""),[n,t]=be.useState([]),[o,c]=be.useState({message:"",type:""}),[l,f]=be.useState(!1),a=w=>{const{value:h}=w.target;r(h),t(Qv(h)),c({message:"",type:""})},d=w=>{f(hp(w))},_=async w=>{if(w.preventDefault(),c({message:"",type:""}),n.length===0)try{await GS(or,s),c({message:"Password reset email sent. Please check your inbox and spam box.",type:"success"})}catch(h){c({message:`Error: ${h.message}`,type:"error"})}else c({message:"Please fix the errors in the form.",type:"error"})};return B.jsx(In,{bgColor:"bg-gray-100",children:B.jsx("div",{className:"flex flex-col items-center justify-top",children:B.jsxs("div",{className:"w-full max-w-lg bg-white p-8 rounded-lg shadow-md border border-gray-300",children:[B.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Reset Password"}),B.jsxs("form",{className:"space-y-4",onSubmit:_,children:[B.jsx(Fn,{label:"Email",type:"email",value:s,onChange:a,onKeyDown:d,errors:n,placeholder:"Enter your email"}),l&&B.jsx("p",{className:"text-yellow-500 text-sm mt-1",children:"Caps Lock is on"}),o.message&&B.jsx(sn,{message:o.message,type:o.type}),B.jsx(An,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 border border-blue-700",children:"Reset Password"})]})]})})})},kd=async s=>{if(s.emailVerified)return s;throw await vf(s),await HS(or),new Error("Please verify your email address. A verification email has been sent.")},_F=async()=>{try{const s=new Ki,r=await wd(or,s);await kd(r.user)}catch(s){throw console.error("Error during Google sign-in:",s),s}},wF=async()=>{try{const s=new Qi,r=await wd(or,s);await kd(r.user)}catch(s){throw console.error("Error during GitHub sign-in:",s),s}},xF=async()=>{try{const s=new Xi,r=await wd(or,s);await kd(r.user)}catch(s){throw console.error("Error during Facebook sign-in:",s),s}},SF=async()=>{try{const s=new Po,r=await wd(or,s);await kd(r.user)}catch(s){throw console.error("Error during Twitter sign-in:",s),s}},jF=async()=>{try{const s=new Lo("microsoft.com"),r=await wd(or,s);return await kd(r.user)}catch(s){throw console.error("Error during Microsoft sign-in:",s),s}},EF=async(s,r)=>{const n=await zS(or,s,r);return await vf(n.user),n},TF=(s,r)=>sy(or,s,r),hT=()=>HS(or),CF=s=>GS(or,s),AF=(s,r)=>JS(or,s,r),RF=()=>{window.recaptchaVerifier||(window.recaptchaVerifier=new _d("recaptcha-container",{size:"invisible",callback:s=>{}},or))},OF=s=>$I(or,s),IF=()=>{const s=ms();return be.useEffect(()=>{(async()=>{try{await hT(),setTimeout(()=>{s("/thank-you",{state:{type:"logout"}})},3e3)}catch(n){console.error("Error logging out:",n)}})()},[s]),B.jsx(In,{bgcolor:"mango-100",children:B.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100",children:B.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Logging out..."})})})},fT=""+new URL("parkinson-tremors-DhOlUiKQ.gif",import.meta.url).href,kF=""+new URL("stock-vector-8OxW1AOO.jpg",import.meta.url).href,MF=({toggleSidebar:s})=>B.jsxs("header",{className:"w-screen bg-gray-500 p-2 px-6 shadow-md flex items-center justify-between relative z-10",children:[B.jsx("button",{onClick:s,className:"text-gray-200 hover:text-gray-400 focus:outline-none",children:B.jsx("img",{src:fT,alt:"Caltech Logo",className:"w-22 h-8 ml-4"})}),B.jsxs("div",{className:"flex-1 flex justify-center items-center space-x-2 relative",children:[B.jsx("span",{className:"text-5xl font-bold text-white",children:"Stable"}),B.jsx("div",{className:"relative flex justify-center items-center",children:B.jsx("div",{className:"logo-wrapper",children:B.jsx("img",{src:kF,alt:"StableHand Logo",className:"logo"})})}),B.jsx("span",{className:"text-5xl font-bold text-white",children:"Hand"})]}),B.jsx("div",{className:"w-6"})]}),pT=""+new URL("caltech_logo-DHlqFY5q.png",import.meta.url).href,PF=""+new URL("caltechlogo2-BTyxa97Z.png",import.meta.url).href,DF=({isVisible:s,toggleSidebar:r})=>{const n=Pa(),t=JSON.parse(localStorage.getItem("visitedPages")||"[]"),o=[{id:1,path:"/",label:"Welcome",submenu:[{id:2,path:"/login",label:"Login"},{id:3,path:"/register",label:"Register"},{id:4,path:"/reset-password",label:"Reset Password"},{id:5,path:"/logout",label:"Logout"}]},{id:6,path:"/stablehand-welcome",label:"Welcome to Stablehand",submenu:[{id:7,path:"/disclaimer",label:"Disclaimer"},{id:8,path:"/background",label:"Background"},{id:23,path:"/enduserguide",label:"EndUser Guide"},{id:9,path:"/demographics",label:"Demographics"},{id:10,path:"/medical-interview",label:"Medical Interview"},{id:11,path:"/parkinson-interview",label:"Parkinson Interview"},{id:12,path:"/therapy",label:"Therapy"},{id:13,path:"/feedbackandprogress-notes",label:"FeedBack & Progress Notes"}]},{id:14,submenu:[{id:15,path:"/privacy-policy",label:"Privacy Policy"},{id:16,path:"/data-deletion-instructions",label:"Data Deletion"},{id:17,path:"/terms-of-service",label:"Terms Of Service"}]},{id:18,submenu:[{id:19,path:"/setting",label:"Setting"},{id:20,path:"/account",label:"Account"},{id:21,path:"/contact",label:"Contact Us"},{id:22,path:"/logout",label:"Logout"}]}],c=()=>r(!0),l=()=>r(!1);return B.jsxs(B.Fragment,{children:[B.jsx("div",{className:"fixed top-0 left-0 h-full bg-transparent w-2 z-50",onMouseEnter:c}),B.jsx("div",{className:`fixed top-0 left-0 h-full bg-gray-500 shadow-lg transition-transform transform ${s?"translate-x-0":"-translate-x-full"} w-52 pt-16 z-50 rounded-lg`,onMouseLeave:l,children:B.jsxs("div",{className:"p-4 flex flex-col justify-between h-full overflow-y-auto bg-gray-500 shadow-lg rounded-md border border-gray-300",children:[B.jsx("div",{children:B.jsx("ul",{className:"space-y-2",children:o.map(f=>B.jsx("li",{className:`mb-2 ${t.includes(f.path||"")||n.pathname===f.path?"text-white":"text-gray-400"}`,children:f.submenu?B.jsxs("div",{className:"p-2 rounded hover:bg-gray-200",children:[f.path&&B.jsx(gn,{to:f.path,className:"block p-2 rounded hover:bg-gray-200",children:f.label}),B.jsx("ul",{className:"ml-2 mt-2 bg-gray-500 rounded-lg border border-gray-300",children:f.submenu.map(a=>B.jsx("li",{className:"mb-2",children:B.jsx(gn,{to:a.path,className:`block p-2 rounded hover:bg-red-200 ${n.pathname===a.path?"text-black-500":"text-gray-400"}`,children:a.label})},a.id))})]}):f.path&&B.jsx(gn,{to:f.path,className:`block p-2 rounded hover:bg-red-200 ${n.pathname===f.path?"text-black-500":"text-gray-400"}`,children:f.label})},f.id))})}),B.jsxs("div",{className:"p-4 bg-gray-500 shadow-lg rounded-md border border-gray-300",children:[B.jsx("img",{src:PF,alt:"Caltech Logo 2",className:"w-18 h-18 mb-2"}),B.jsx("img",{src:pT,alt:"Caltech Logo",className:"w-18 h-18 mb-2"})]})]})})]})},NF=""+new URL("flameLogo-DAQQ0Vhe.png",import.meta.url).href,LF=()=>B.jsxs("footer",{className:"w-screen bg-gray-500 p-4 rounded-sm shadow-md flex justify-between items-end relative",children:[B.jsx("div",{className:"footer-wedge relative flex items-end h-full",children:B.jsx("div",{className:"flame-logo mb-1 z-12",children:B.jsx("img",{src:NF,alt:"Flame Logo",className:"w-12 h-auto"})})}),B.jsxs("div",{className:"flex flex-col items-end text-right ml-auto mr-4",children:[B.jsx("img",{src:pT,alt:"Caltech Logo",className:"w-18 h-8 mb-2"}),B.jsx("p",{className:"text-xs text-white",children:" 2024 StableHand, StableGait, StableGrip All Rights Reserved"})]})]}),UF=()=>{const r=Pa().state||{type:"default",score:null,percentagescore:null},n=()=>{switch(r.type){case"logout":return B.jsxs(B.Fragment,{children:[B.jsx("p",{children:"Thank you for visiting. We hope you have enjoyed your session. See you soon!"}),B.jsx(gn,{to:"/login",className:"text-blue-500 hover:text-blue-700",children:"Go to Login"})]});case"registration":return B.jsxs(B.Fragment,{children:[B.jsx("p",{children:"Thank you for registering! Please check your email for verification."}),B.jsx(gn,{to:"/login",className:"text-blue-500 hover:text-blue-700",children:"Go to Login"})]});case"demographics":return B.jsxs(B.Fragment,{children:[B.jsx("p",{children:"Thank you for submitting your demographics information."}),B.jsx(gn,{to:"/medical-interview",className:"text-blue-500 hover:text-blue-700",children:"Please proceed to the Medical Interview section"})]});case"medical":return B.jsxs(B.Fragment,{children:[B.jsx("p",{children:"Thank you for completing the Medical Interview."}),B.jsx(gn,{to:"/parkinson-interview",className:"text-blue-500 hover:text-blue-700",children:"Please proceed to the Parkinson Interview section"})]});case"parkinsons":return B.jsxs(B.Fragment,{children:[B.jsx("p",{children:"Thank you for completing the Parkinson's survey."}),B.jsxs("p",{children:["Your score is ",r.score,", (",r.percentagescore,"%)."]}),B.jsx(gn,{to:"/therapy",className:"text-blue-500 hover:text-blue-700",children:"Proceed to Therapy Session"})]});case"disclaimer":return B.jsxs(B.Fragment,{children:[B.jsx("p",{children:"Thank you for acknowledging the disclaimer."}),B.jsx(gn,{to:"/demographics",className:"text-blue-500 hover:text-blue-700",children:"Proceed to Demographics"})]});case"therapysession":return B.jsxs(B.Fragment,{children:[B.jsx("p",{children:"Thank you for completing the therapy session."}),B.jsx(gn,{to:"/progress",className:"text-blue-500 hover:text-blue-700",children:"Proceed to Progress Notes"}),B.jsx(gn,{to:"/logout",className:"text-blue-500 hover:text-blue-700",children:"or logout"})]});default:return B.jsx("p",{children:"Thank you for your submission!"})}};return B.jsx(In,{children:B.jsxs(tS,{children:[B.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Thank You!"}),B.jsx("div",{className:"text-lg",children:n()})]})})},FF=({onEnrollmentComplete:s})=>{const[r,n]=be.useState(""),[t,o]=be.useState([]),[c,l]=be.useState(""),[f,a]=be.useState(!1),[d,_]=be.useState({message:"",type:""}),w=be.useRef(null),h=iv(),m=h.currentUser;be.useEffect(()=>{w.current||(w.current=new _d("recaptcha-container",{size:"invisible",callback:()=>console.log("reCAPTCHA solved."),"expired-callback":()=>{var g;console.log("reCAPTCHA expired. Resetting..."),(g=w.current)==null||g.reset()}},h))},[h]);const b=async g=>{g.preventDefault();const p=Zv(r);if(o(p),p.length>0){_({message:"Please fix phone number errors.",type:"error"});return}try{if(!w.current){_({message:"reCAPTCHA not initialized.",type:"error"});return}const y=await Eu(m).getSession(),S={phoneNumber:r,session:y},A=await new ws(h).verifyPhoneNumber(S,w.current);window.verificationId=A,a(!0),_({message:"Verification code sent to your phone.",type:"success"})}catch(y){console.error("Error sending SMS:",y),_({message:`Error: ${y.message}`,type:"error"})}},v=async g=>{g.preventDefault();try{const p=window.verificationId,y=ws.credential(p,c),S=Kf.assertion(y);await Eu(m).enroll(S,"Phone Number"),_({message:"Phone number successfully linked to your account.",type:"success"}),s&&s()}catch(p){console.error("Error verifying code:",p),_({message:`Error verifying code: ${p.message}`,type:"error"})}};return B.jsx("div",{children:f?B.jsxs("form",{onSubmit:v,children:[B.jsx(Fn,{label:"Verification Code",name:"verificationCode",type:"text",value:c,onChange:g=>l(g.target.value),placeholder:"Enter the code sent to your phone",errors:[]}),d.message&&B.jsx(sn,{message:d.message,type:d.type}),B.jsx(An,{type:"submit",className:"w-full bg-green-500 hover:bg-green-700",children:"Verify Code and Link Phone"})]}):B.jsxs("form",{onSubmit:b,children:[B.jsx(vp,{phoneNumber:r,setPhoneNumber:n,setPhoneErrors:o,errors:t}),d.message&&B.jsx(sn,{message:d.message,type:d.type}),B.jsx(An,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700",children:"Send Verification Code"}),B.jsx("div",{id:"recaptcha-container"})]})})},VF=()=>{const[s,r]=be.useState(!1);return be.useEffect(()=>{const t=iv().currentUser;if(!t)return;const o=t.providerData.map(f=>f.providerId),c=o.includes("password");o.includes("phone");const l=Eu(t).enrolledFactors.length>0;c&&!l&&r(!0)},[]),B.jsx(In,{children:B.jsxs(tS,{children:[B.jsx("h1",{className:"text-4xl font-bold mb-6",children:"Welcome to StableHand Clinical Trial Dashboard"}),s?B.jsx(FF,{onEnrollmentComplete:()=>r(!1)}):B.jsxs("div",{className:"flex flex-col space-y-4",children:[B.jsx(gn,{to:"/disclaimer",className:"w-full bg-blue-500 hover:bg-blue-700 text-white p-2 rounded",children:"Disclaimer"}),B.jsx(gn,{to:"/background",className:"w-full bg-teal-500 hover:bg-green-700 text-white p-2 rounded",children:"Background"}),B.jsx(gn,{to:"/enduserguide",className:"w-full bg-green-500 hover:bg-green-700 text-white p-2 rounded",children:"End User Guide"}),B.jsx(gn,{to:"/demographics",className:"w-full bg-yellow-500 hover:bg-yellow-700 text-white p-2 rounded",children:"Demographics"}),B.jsx(gn,{to:"/medical-interview",className:"w-full bg-orange-500 hover:bg-orange-700 text-white p-2 rounded",children:"Medical Interview"}),B.jsx(gn,{to:"/parkinson-interview",className:"w-full bg-red-500 hover:bg-red-700 text-white p-2 rounded",children:"Parkinson Interview (PDQ-39)"}),B.jsx(gn,{to:"/therapy",className:"w-full bg-purple-500 hover:bg-purple-700 text-white p-2 rounded",children:"Therapy"}),B.jsx(gn,{to:"/feedbackandprogress-notes",className:"w-full bg-gray-500 hover:bg-gray-700 text-white p-2 rounded",children:"FeedBack & Progress Notess"})]})]})})},BF=()=>{const[s,r]=be.useState({name:"",email:"",message:""}),[n,t]=be.useState(""),o=l=>{const{name:f,value:a}=l.target;r({...s,[f]:a})},c=async l=>{l.preventDefault(),t("Sending...");try{const f=or.currentUser;if(await wy(Ks(rs,"messages"),{...s,userId:f?f.uid:"anonymous",timestamp:new Date}),f){const a=Ks(rs,`users/${f.uid}/messages`);await wy(a,{...s,timestamp:new Date})}t("Message sent! We will get back to you shortly."),r({name:"",email:"",message:""})}catch(f){console.error("Error sending message:",f),t("Error sending message. Please try again later.")}};return B.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:B.jsxs("div",{className:"w-full max-w-lg p-8 bg-white shadow-md rounded-lg",children:[B.jsx("h2",{className:"text-2xl font-semibold text-center mb-6",children:"Contact Us"}),B.jsxs("form",{onSubmit:c,className:"space-y-4",children:[B.jsxs("div",{children:[B.jsx("label",{className:"block mb-1 font-medium",htmlFor:"name",children:"Name"}),B.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:o,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block mb-1 font-medium",htmlFor:"email",children:"Email"}),B.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:o,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block mb-1 font-medium",htmlFor:"message",children:"Message"}),B.jsx("textarea",{id:"message",name:"message",value:s.message,onChange:o,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",rows:4,required:!0})]}),B.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors",children:"Send Message"})]}),n&&B.jsx("p",{className:"mt-4 text-center",children:n})]})})},GF=()=>B.jsx(In,{bgColor:"bg-green-500",children:B.jsxs("div",{className:"max-w-3xl mx-auto bg-green-100 p-6 rounded-lg shadow-md border border-gray-300",children:[B.jsx("h1",{className:"text-4xl font-bold text-center mb-6",children:"Study Background"}),B.jsx("p",{children:"Parkinsons disease is a progressive nervous system disorder that affects movement, muscle control, and balance. Early detection and continuous monitoring of motor symptoms are critical for personalized treatment planning."}),B.jsx("p",{children:"StableHand Typing uses a series of controlled typing exercises to capture subtle changes in fine motor control. By analyzing keystroke dynamicstiming, speed, and accuracywe can track symptom progression over time."}),B.jsx("p",{children:"In this study, participants will complete typing tasks under various backgrounds and conditions. Your performance data helps researchers develop digital biomarkers for Parkinsons and similar motor disorders."}),B.jsxs("div",{children:[B.jsx("h2",{className:"text-2xl font-semibold",children:"Watch a Quick Overview"}),B.jsxs("video",{controls:!0,className:"w-full rounded-lg shadow-md",children:[B.jsx("source",{src:"/videos/study-overview.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})]}),B.jsxs("div",{children:[B.jsx("h2",{className:"text-2xl font-semibold",children:"What to Expect"}),B.jsx("div",{className:"aspect-video",children:B.jsx("iframe",{className:"w-full h-full rounded-lg shadow-md",src:"https://www.youtube.com/embed/VIDEO_ID",title:"StableHand Typing Overview",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]}),B.jsx("p",{children:"If you have any questions about the study protocol, data privacy, or technical requirements, please consult the FAQ or contact the study coordinator via the Help link below."})]})}),mT=be.createContext(void 0),Xo=()=>{const s=be.useContext(mT);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},gT=({children:s})=>{const[r,n]=be.useState(null),[t,o]=be.useState(!0);be.useEffect(()=>OF(f=>{n(f?{...f}:null),o(!1)}),[]);const c={currentUser:r,loading:t,registerWithEmail:EF,loginWithEmail:TF,logout:hT,resetPassword:CF,signInWithGoogle:_F,signInWithGitHub:wF,signInWithFacebook:xF,signInWithTwitter:SF,signInWithMicrosoft:jF,signInWithPhone:AF,initializeRecaptcha:RF};return B.jsx(mT.Provider,{value:c,children:!t&&s})},Ii=({label:s,name:r,value:n,onChange:t,options:o=[],errors:c=[],onKeyDown:l})=>B.jsxs("div",{className:"mb-4",children:[B.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700",children:s}),B.jsxs("select",{id:r,name:r,value:n,onChange:t,onKeyDown:l,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[B.jsxs("option",{value:"",children:["Select ",s]}),o.map(f=>B.jsx("option",{value:f,children:f},f))]}),c.length>0&&B.jsx("div",{className:"mt-2",children:c.map((f,a)=>B.jsx(sn,{message:f,type:"error"},a))})]}),yT=({label:s,name:r,value:n,options:t,onChange:o,errors:c=[]})=>{const[l,f]=be.useState(n==="Other"),[a,d]=be.useState(l?n:""),_=h=>{const m=h.target.value;m==="Other"?(f(!0),o({target:{name:r,value:a}})):(f(!1),o({target:{name:r,value:m}}))},w=h=>{const m=h.target.value;d(m),o({target:{name:r,value:m}})};return B.jsxs("div",{className:"mb-4",children:[B.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700 mb-2",children:s}),B.jsxs("select",{id:r,name:r,value:l?"Other":n,onChange:_,className:`w-full px-3 py-2 border rounded ${c.length>0?"border-red-500":"border-gray-300"}`,children:[B.jsxs("option",{value:"",disabled:!0,children:["Select ",s.toLowerCase()]}),t.map(h=>B.jsx("option",{value:h,children:h},h)),B.jsx("option",{value:"Other",children:"Other"})]}),l&&B.jsx("input",{id:`${r}_other`,type:"text",name:`${r}_other`,value:a,onChange:w,placeholder:"Please specify",className:`mt-2 block w-full p-2 border ${c.length>0?"border-red-500":"border-gray-300"} rounded-md`}),c.length>0&&B.jsx(sn,{message:c.join(", "),type:"error"})]})},d0=({label:s,name:r,value:n,onChange:t,options:o,errors:c=[]})=>{const l=o.map(d=>({label:d,value:d})),f=l.filter(d=>n.includes(d.value)),a=d=>{let _=d?d.map(w=>w.value):[];_.includes("Prefer not to say")?_=["Prefer not to say"]:_=_.filter(w=>w!=="Prefer not to say"),t(_,r)};return B.jsxs("div",{className:"mb-4",children:[B.jsx("label",{className:"block text-sm font-medium text-gray-700",children:s}),B.jsx(c0,{isMulti:!0,options:l,value:f,onChange:a,className:"mt-1 text-sm",classNamePrefix:"react-select"}),c.length>0&&B.jsx("div",{className:"mt-1",children:c.map((d,_)=>B.jsx(sn,{message:d,type:"error"},_))})]})},Sa=({label:s,name:r,value:n,onChange:t,errors:o=[]})=>B.jsxs("div",{className:"mb-4",children:[B.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700",children:s}),B.jsx("textarea",{id:r,name:r,value:n,onChange:t,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm h-32 resize-y overflow-auto"}),o.length>0&&B.jsx("div",{className:"mt-2",children:o.map((c,l)=>B.jsx(sn,{message:c,type:"error"},l))})]}),vT=({label:s,name:r,values:n,onChange:t,options:o,errors:c=[]})=>{const[l,f]=be.useState(""),[a,d]=be.useState(!1),w=[...o.map(g=>({label:g,value:g})),{label:"Other",value:"Other"}];be.useEffect(()=>{const g=n.find(p=>!o.includes(p)&&p!=="Other"&&p!=="None"&&p!=="Prefer not to say");g&&f(g)},[n]);const h=g=>{let p=g?g.map(S=>S.value):[];if(p.includes("None"))return f(""),d(!1),t(["None"],r);if(p.includes("Prefer not to say"))return f(""),d(!1),t(["Prefer not to say"],r);p.includes("Other")?d(!0):(d(!1),f(""));const y=p.filter(S=>o.includes(S)||S==="Other");t(y,r)},m=g=>{const p=g.target.value;f(p);const y=n.filter(j=>o.includes(j)&&j!=="Other"),S=p.trim()?[...y,p.trim()]:y;t(S,r)},b=g=>{g.key==="Enter"&&(g.preventDefault(),d(!1))},v=n.map(g=>w.find(p=>p.value===g)||{label:g,value:g});return B.jsxs("div",{className:"mb-4",children:[B.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700",children:s}),B.jsx(c0,{id:r,isMulti:!0,name:r,value:v,onChange:h,options:w,className:"mt-1 text-sm",classNamePrefix:"react-select"}),a&&B.jsx("input",{type:"text",value:l,onChange:m,onKeyDown:b,placeholder:"Please specify",className:`mt-2 block w-full p-2 border ${c.length?"border-red-500":"border-gray-300"} rounded-md`}),c.length>0&&B.jsx("div",{className:"mt-2",children:c.map((g,p)=>B.jsx(sn,{message:g,type:"error"},p))})]})},bT=({logText:s,logFileName:r})=>{const n=be.useRef(null);return be.useEffect(()=>{const t=n.current;t&&(t.scrollTop=t.scrollHeight)},[s]),B.jsx("div",{children:B.jsxs(Container,{fluid:!0,children:[B.jsx(Row,{children:""}),B.jsx(Row,{children:""}),B.jsxs(Row,{children:[B.jsx(Col,{}),B.jsx(Col,{children:B.jsxs("h6",{children:["Current Log: ",r]})}),B.jsx(Col,{})]}),B.jsx(Row,{children:B.jsx(Col,{children:B.jsx("textarea",{value:s,readOnly:!0,ref:n,className:"w-100"})})})]})})},Md=()=>{const[s,r]=be.useState("");return be.useEffect(()=>{const n=()=>{r(new Date().toLocaleString())};n();const t=setInterval(n,6e4);return()=>clearInterval(t)},[]),B.jsxs("div",{className:"text-sm text-gray-600",children:[B.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Current Date and Time"}),B.jsx("input",{type:"text",value:s,readOnly:!0,className:"w-auto px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-gray-200"})]})},zF=["Male","Female","HomoSexual","BiSexual","TransSexual","Prefer not to say"],HF=["White","Caucasian","African-American","Black","Native Hawaiian or Pacific Islander","Asian","Hispanic","Prefer not to say"],qF=["<20,000","20,000-50,000","50,000-100,000","100,000+","Prefer not to say"],WF=["Employed","Unemployed","Retired","Self-Employed","Seeking opportunities","Prefer not to say"],YF=["None","High School","Associate Degree","Bachelor's Degree","Master's Degree","Doctorate","Prefer not to say"],$F=["Single","Married","Divorced","Widowed","Prefer not to say"],Nx=["English","Spanish","Portuguese","French","Mandarin","Chinese","Hindi","Arabic","Prefer not to say"],XF=["NA","Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],Gg=["United States","Canada","Mexico","United Kingdom","Germany","France","India","China","Japan"],KF=["North America","Europe","Africa","South America","Asia","Australia","Caribbean Islands","Pacific Islands","Prefer not to say"],QF=["None","Dog","Cat","Fish","Bird","Rabit","Reptile","Prefer not to say"],ZF=["None","Biking","Fashion","Design","Crafts","Traveling","Camping","Gourmet food","Physical fitness","Music","Sewing","Art","Antiques","Reading","Prefer not to answer"],JF=["None","Agriculture","Utilities","Finance","Entertainment","Education","Health care","Information services","Data processing","Food services","Hotel services","Legal services","Publishing","Military","Prefer not to say"],qh=[{label:"First Name",name:"firstName",type:"input",inputType:"text",placeholder:"Enter first name",validate:[Qt]},{label:"Middle Name",name:"middleName",type:"input",inputType:"text",placeholder:"Enter middle name",validate:[vE]},{label:"Last Name",name:"lastName",type:"input",inputType:"text",placeholder:"Enter last name",validate:[Qt]},{label:"Date of Birth",name:"dob",type:"input",inputType:"date",placeholder:"Enter date of birth",validate:[_E]},{label:"Age",name:"age",type:"input",inputType:"number",placeholder:"Enter your age",validate:[wE]},{label:"Gender",name:"gender",type:"select",options:zF,validate:[Qt]},{label:"Ethnicity",name:"ethnicity",type:"selectWithOther",options:HF,validate:[Qt]},{label:"Income",name:"income",type:"select",options:qF,validate:[Qt]},{label:"Employment Status",name:"employmentStatus",type:"selectWithOther",options:WF,validate:[Qt]},{label:"Education Level",name:"educationLevel",type:"selectWithOther",options:YF,validate:[Qt]},{label:"Address",name:"address",type:"input",inputType:"text",placeholder:"Enter address",validate:[Qt]},{label:"City",name:"city",type:"input",inputType:"text",placeholder:"Enter city",validate:[pu]},{label:"State",name:"state",type:"select",options:XF,validate:[Qt]},{label:"ZIP Code",name:"zip",type:"input",inputType:"text",placeholder:"Enter ZIP code",validate:[i4]},{label:"Country",name:"country",type:"selectWithOther",options:Gg,validate:[pu]},{label:"Where Do You Reside",name:"residency",type:"selectWithOther",options:KF,validate:[pu]},{label:"Phone Number",name:"phoneNumber",type:"input",inputType:"text",placeholder:"Enter phone number",validate:[Zv]},{label:"Email",name:"email",type:"input",inputType:"email",placeholder:"Enter email",validate:[Qv]},{label:"Country of Birth",name:"countryOfBirth",type:"selectWithOther",options:Gg,validate:[pu]},{label:"Citizenship",name:"citizenship",type:"selectWithOther",options:Gg,validate:[pu]},{label:"1st Languages",name:"1stlanguages",type:"selectWithOther",options:Nx,validate:[Qt]},{label:"2nd Languages",name:"2languages2",type:"multiSelect",options:Nx,validate:[Qt]},{label:"Profession",name:"profession",type:"selectWithOther",options:JF,validate:[pu]},{label:"Marital Status",name:"maritalStatus",type:"select",options:$F,validate:[Qt]},{label:"Number of Dependents",name:"dependents",type:"input",inputType:"number",placeholder:"Enter number of natural kids",validate:[Uh]},{label:"Natural Kids",name:"naturalKids",type:"input",inputType:"number",placeholder:"Enter number of natural kids",validate:[Uh]},{label:"Adopted Kids",name:"adoptedKids",type:"input",inputType:"number",placeholder:"Enter number of adopted kids",validate:[Uh]},{label:"What type of Pets Do You Have",name:"petsTypes",type:"multiSelectWithOther",options:QF,validate:[tx]},{label:"Pets",name:"pets",type:"input",inputType:"number",placeholder:"Enter number of pets",validate:[Uh]},{label:"Hobbies",name:"hobbies",type:"multiSelectWithOther",options:ZF,validate:[tx]}],eV=()=>{const s=ms(),{currentUser:r}=Xo(),[n,t]=be.useState({}),[o,c]=be.useState({}),[l,f]=be.useState(null),a=h=>{const{name:m,value:b}=h.target;t(g=>({...g,[m]:b}));const v=qh.find(g=>g.name===m);if(v&&v.validate){const g=v.validate.map(p=>p(b,n)).flat();c(p=>({...p,[m]:g}))}else c(g=>({...g,[m]:[]}));f(null)},d=(h,m)=>{t(v=>({...v,[m]:h}));const b=qh.find(v=>v.name===m);if(b&&b.validate){const v=b.validate.map(g=>g(h,n)).flat();c(g=>({...g,[m]:v}))}else c(v=>({...v,[m]:[]}));f(null)},_=()=>{const h={};let m=!1;if(qh.forEach(b=>{const v=n[b.name];if(b.validate){const g=b.validate.map(p=>p(v,n)).flat();g.length>0&&(h[b.name]=g,m=!0)}}),n.dob&&n.age){const b=xE(n.dob,n.age);b.length>0&&(h.age=b,m=!0)}return c(h),!m},w=async h=>{if(h.preventDefault(),!_()){f({message:"Please fill all missing fields.",type:"error"});return}try{const m=new Date,b=m.toLocaleString(),v={...n,userId:r==null?void 0:r.uid,timestamp:m.toISOString(),localDateTime:b},g=gi(Ks(rs,`users/${r==null?void 0:r.uid}/demographics`));await Yo(g,v);const p=Object.entries(v).map(([S,j])=>Array.isArray(j)?`${S},"${j.join(";")}"`:`${S},${j}`).join(`
`),y=La(Ua,`users/${r==null?void 0:r.uid}/demographics/${m.toISOString()}.csv`);await qv(y,p),f({message:"Data submitted successfully.",type:"success"}),setTimeout(()=>s("/thank-you",{state:{type:"demographics"}}),2e3)}catch(m){console.error("Error submitting demographics:",m),f({message:"Error submitting data. Please try again.",type:"error"})}};return B.jsxs(In,{bgColor:"bg-yellow-100",paddingX:"px-4",marginX:"mx-2",children:[B.jsx("h2",{className:"text-3xl font-bold mb-4 text-center",children:"Demographics Information"}),B.jsx(Md,{}),B.jsxs("form",{onSubmit:w,children:[B.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:qh.map(h=>h.type==="input"?B.jsx(Fn,{label:h.label,name:h.name,type:h.inputType,value:n[h.name]||"",onChange:a,placeholder:h.placeholder,errors:o[h.name]},h.name):h.type==="textareascroll"?B.jsx(Sa,{label:h.label,name:h.name,value:n[h.name]||"",onChange:a,errors:o[h.name]},h.name):h.type==="autosizeinput"?B.jsx(bT,{label:h.label,name:h.name,value:n[h.name]||"",onChange:a,placeholder:h.placeholder,errors:o[h.name]},h.name):h.type==="select"?B.jsx(Ii,{label:h.label,name:h.name,value:n[h.name]||"",onChange:a,options:h.options,errors:o[h.name]},h.name):h.type==="selectWithOther"?B.jsx(yT,{label:h.label,name:h.name,value:n[h.name]||"",onChange:a,options:h.options,errors:o[h.name]},h.name):h.type==="multiSelect"?B.jsx(d0,{label:h.label,name:h.name,value:n[h.name]||[],onChange:m=>d(m,h.name),options:h.options,errors:o[h.name]},h.name):h.type==="multiSelectWithOther"?B.jsx(vT,{label:h.label,name:h.name,values:n[h.name]||[],onChange:m=>d(m,h.name),options:h.options,errors:o[h.name]},h.name):null)}),l&&B.jsx(sn,{message:l.message,type:l.type}),B.jsx("div",{className:"flex justify-between items-center mt-6",children:B.jsx(An,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 border border-blue-700",children:"Submit"})})]})]})},tV=["Male","Female","Other","Prefer not to say"],rV=["Yes","No"],nV=["Never","Rarely","Occasionally","Frequently","Always"],sV=["Mother","Father","Sibling","Grandparent","Uncle/Aunt"],iV=["Essential Tremor","Parkinsonian Tremor","Dystonic Tremor","Cerebellar Tremor","Orthostatic Tremor","Other"],oV=["Right Hand","Left Hand","Head","Voice","Legs"],aV=["Mild","Moderate","Severe"],lV=["Propranolol","Primidone","Levodopa","Carbidopa","Topiramate","Gabapentin"],Wh=[{label:"First Name",name:"firstName",type:"input",inputType:"text",placeholder:"Enter first name",validate:[Qt]},{label:"Middle Name",name:"middleName",type:"input",inputType:"text",placeholder:"Enter middle name",validate:[vE]},{label:"Last Name",name:"lastName",type:"input",inputType:"text",placeholder:"Enter last name",validate:[Qt]},{label:"Date of Birth",name:"dob",type:"input",inputType:"date",placeholder:"Enter date of birth",validate:[_E]},{label:"Age",name:"age",type:"input",inputType:"number",placeholder:"Enter your age",validate:[wE]},{label:"Gender",name:"gender",type:"select",options:tV,validate:[Qt]},{label:"Chief Complaint",name:"chiefComplaint",type:"input",inputType:"textareascroll",placeholder:"Enter chief complaint",validate:[Qt]},{label:"History of Present Illness",name:"historyPresentIllness",type:"textareascroll",inputType:"textarea",placeholder:"Enter history of present illness",validate:[Qt]},{label:"Onset of Tremor",name:"onsetTremor",type:"input",inputType:"date",placeholder:"Enter onset date of tremor",validate:[Qt]},{label:"Frequency of Tremor",name:"frequencyTremor",type:"select",options:nV,validate:[Qt]},{label:"Medications",name:"medications",type:"input",inputType:"textareascroll",placeholder:"Enter current medications",validate:[Qt]},{label:"Allergies",name:"allergies",type:"input",inputType:"textareascroll",placeholder:"Enter allergies",validate:[Qt]},{label:"Family History of Tremor",name:"familyHistoryTremor",type:"multiSelectWithOther",options:sV,validate:[Qt]},{label:"Past Medical History",name:"pastMedicalHistory",type:"input",inputType:"textareascroll",placeholder:"Enter past medical history",validate:[Qt]},{label:"Neurological Examination Findings",name:"neurologicalExaminationFindings",type:"textareascroll",inputType:"textareascroll",placeholder:"Enter neurological examination findings",validate:[Qt]},{label:"Type of Tremor",name:"tremorType",type:"selectWithOther",options:iV,validate:[Qt]},{label:"Head Trauma History",name:"headTrauma",type:"selectWithOther",options:rV,validate:[Qt]},{label:"Affected Body Parts",name:"affectedBodyParts",type:"multiSelect",options:oV,validate:[Qt]},{label:"Onset of Tremor",name:"tremorOnset",type:"input",inputType:"date",placeholder:"Enter onset age or year",validate:[Qt]},{label:"Tremor Severity",name:"tremorSeverity",type:"select",options:aV,validate:[Qt]},{label:"Neurological Medications",name:"neurologicalMedications",type:"multiSelect",options:lV,validate:[]},{label:"Doses of Medications",name:"medicationDoses",type:"textareascroll",placeholder:"Enter medication and doses",validate:[Qt]},{label:"Current Symptoms",name:"currentSymptoms",type:"textareascroll",placeholder:"Describe current symptoms",validate:[Qt]},{label:"Additional Notes",name:"additionalNotes",type:"textareascroll",placeholder:"Any additional notes",validate:[]}],uV=()=>{const s=ms(),{currentUser:r}=Xo(),[n,t]=be.useState({}),[o,c]=be.useState({}),[l,f]=be.useState(null),a=h=>{const{name:m,value:b}=h.target;t(g=>({...g,[m]:b}));const v=Wh.find(g=>g.name===m);if(v&&v.validate){const g=v.validate.map(p=>p(b,n)).flat();g.length===0?c(p=>({...p,[m]:[]})):c(p=>({...p,[m]:g}))}else c(g=>({...g,[m]:[]}));f(null)},d=(h,m)=>{t(v=>({...v,[m]:h}));const b=demographicFields.find(v=>v.name===m);if(b&&b.validate){const v=b.validate.map(g=>g(h,n)).flat();c(g=>({...g,[m]:v}))}else c(v=>({...v,[m]:[]}));f(null)},_=()=>{const h={};let m=!1;if(Wh.forEach(b=>{const v=n[b.name];if(b.validate){const g=b.validate.map(p=>p(v,n)).flat();g.length>0&&(h[b.name]=g,m=!0)}}),n.dob&&n.age){const b=xE(n.dob,n.age);b.length>0&&(h.age=b,m=!0)}return c(h),!m},w=async h=>{if(h.preventDefault(),!_()){f({message:"Please fill all missing fields.",type:"error"});return}try{const m=new Date,b=m.toLocaleString(),v={...n,userId:(r==null?void 0:r.uid)||"anonymous",timestamp:m.toISOString(),localDateTime:b},g=gi(Ks(rs,`users/${r==null?void 0:r.uid}/medical-interviews`));await Yo(g,v);const p=Object.keys(v).map(S=>{const j=Array.isArray(v[S])?v[S].join(";"):v[S];return`${S},${j}`}).join(`
`),y=La(Ua,`users/${r==null?void 0:r.uid}/medical-interviews/${m.toISOString()}.csv`);await qv(y,p),f({message:"Data submitted successfully.",type:"success"}),setTimeout(()=>{s("/thank-you",{state:{type:"medical"}})},2e3)}catch(m){console.error("Error submitting medical interviews:",m),f({message:"Error submitting data. Please try again.",type:"error"})}};return B.jsxs(In,{bgColor:"bg-orange-100",children:[B.jsx("h2",{className:"text-3xl font-bold mb-4 text-center",children:"Medical Interview"}),B.jsx(Md,{}),B.jsxs("form",{onSubmit:w,children:[B.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-24",children:Wh.filter(h=>h.type!=="textareascroll").map(h=>h.type==="input"?B.jsx(Fn,{label:h.label,name:h.name,type:h.inputType,value:n[h.name]||"",onChange:a,placeholder:h.placeholder,errors:o[h.name]},h.name):h.type==="autosizeinput"?B.jsx(bT,{label:h.label,name:h.name,value:n[h.name]||"",onChange:a,placeholder:h.placeholder,errors:o[h.name]},h.name):h.type==="select"?B.jsx(Ii,{label:h.label,name:h.name,value:n[h.name]||"",onChange:a,options:h.options,errors:o[h.name]},h.name):h.type==="selectWithOther"?B.jsx(yT,{label:h.label,name:h.name,value:n[h.name]||"",onChange:a,options:h.options,errors:o[h.name]},h.name):h.type==="multiSelect"?B.jsx(d0,{label:h.label,name:h.name,value:n[h.name]||[],onChange:m=>d(m,h.name),options:h.options,errors:o[h.name]},h.name):h.type==="multiSelectWithOther"?B.jsx(vT,{label:h.label,name:h.name,values:n[h.name]||[],onChange:d,options:h.options,errors:o[h.name]},h.name):null)}),B.jsxs("div",{className:"mt-4",children:[B.jsx("h3",{className:"text-xl font-bold mb-4",children:"Additional Information"}),Wh.filter(h=>h.type==="textareascroll").map(h=>B.jsx(Sa,{label:h.label,name:h.name,value:n[h.name]||"",onChange:a,errors:o[h.name]},h.name))]}),l&&B.jsx(sn,{message:l.message,type:l.type}),B.jsx("div",{className:"flex justify-between items-center mt-4",children:B.jsx(An,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 border border-blue-700",children:"Submit"})})]})]})};var df={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/var cV=df.exports,Lx;function dV(){return Lx||(Lx=1,function(s,r){(function(n,t){s.exports=t()})(cV,function n(){var t=typeof self<"u"?self:typeof window<"u"?window:t!==void 0?t:{},o=!t.document&&!!t.postMessage,c=t.IS_PAPA_WORKER||!1,l={},f=0,a={parse:function(T,R){var P=(R=R||{}).dynamicTyping||!1;if(C(P)&&(R.dynamicTypingFunction=P,P={}),R.dynamicTyping=P,R.transform=!!C(R.transform)&&R.transform,R.worker&&a.WORKERS_SUPPORTED){var k=function(){if(!a.WORKERS_SUPPORTED)return!1;var D=(H=t.URL||t.webkitURL||null,W=n.toString(),a.BLOB_URL||(a.BLOB_URL=H.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",W,")();"],{type:"text/javascript"})))),q=new t.Worker(D),H,W;return q.onmessage=y,q.id=f++,l[q.id]=q}();return k.userStep=R.step,k.userChunk=R.chunk,k.userComplete=R.complete,k.userError=R.error,R.step=C(R.step),R.chunk=C(R.chunk),R.complete=C(R.complete),R.error=C(R.error),delete R.worker,void k.postMessage({input:T,config:R,workerId:k.id})}var F=null;return a.NODE_STREAM_INPUT,typeof T=="string"?(T=function(D){return D.charCodeAt(0)===65279?D.slice(1):D}(T),F=R.download?new w(R):new m(R)):T.readable===!0&&C(T.read)&&C(T.on)?F=new b(R):(t.File&&T instanceof File||T instanceof Object)&&(F=new h(R)),F.stream(T)},unparse:function(T,R){var P=!1,k=!0,F=",",D=`\r
`,q='"',H=q+q,W=!1,Q=null,J=!1;(function(){if(typeof R=="object"){if(typeof R.delimiter!="string"||a.BAD_DELIMITERS.filter(function(oe){return R.delimiter.indexOf(oe)!==-1}).length||(F=R.delimiter),(typeof R.quotes=="boolean"||typeof R.quotes=="function"||Array.isArray(R.quotes))&&(P=R.quotes),typeof R.skipEmptyLines!="boolean"&&typeof R.skipEmptyLines!="string"||(W=R.skipEmptyLines),typeof R.newline=="string"&&(D=R.newline),typeof R.quoteChar=="string"&&(q=R.quoteChar),typeof R.header=="boolean"&&(k=R.header),Array.isArray(R.columns)){if(R.columns.length===0)throw new Error("Option columns is empty");Q=R.columns}R.escapeChar!==void 0&&(H=R.escapeChar+q),(typeof R.escapeFormulae=="boolean"||R.escapeFormulae instanceof RegExp)&&(J=R.escapeFormulae instanceof RegExp?R.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var Z=new RegExp(g(q),"g");if(typeof T=="string"&&(T=JSON.parse(T)),Array.isArray(T)){if(!T.length||Array.isArray(T[0]))return K(null,T,W);if(typeof T[0]=="object")return K(Q||Object.keys(T[0]),T,W)}else if(typeof T=="object")return typeof T.data=="string"&&(T.data=JSON.parse(T.data)),Array.isArray(T.data)&&(T.fields||(T.fields=T.meta&&T.meta.fields||Q),T.fields||(T.fields=Array.isArray(T.data[0])?T.fields:typeof T.data[0]=="object"?Object.keys(T.data[0]):[]),Array.isArray(T.data[0])||typeof T.data[0]=="object"||(T.data=[T.data])),K(T.fields||[],T.data||[],W);throw new Error("Unable to serialize unrecognized input");function K(oe,M,z){var $="";typeof oe=="string"&&(oe=JSON.parse(oe)),typeof M=="string"&&(M=JSON.parse(M));var ee=Array.isArray(oe)&&0<oe.length,le=!Array.isArray(M[0]);if(ee&&k){for(var ce=0;ce<oe.length;ce++)0<ce&&($+=F),$+=re(oe[ce],ce);0<M.length&&($+=D)}for(var me=0;me<M.length;me++){var ve=ee?oe.length:M[me].length,ge=!1,we=ee?Object.keys(M[me]).length===0:M[me].length===0;if(z&&!ee&&(ge=z==="greedy"?M[me].join("").trim()==="":M[me].length===1&&M[me][0].length===0),z==="greedy"&&ee){for(var xe=[],fe=0;fe<ve;fe++){var Se=le?oe[fe]:fe;xe.push(M[me][Se])}ge=xe.join("").trim()===""}if(!ge){for(var Ce=0;Ce<ve;Ce++){0<Ce&&!we&&($+=F);var Ne=ee&&le?oe[Ce]:Ce;$+=re(M[me][Ne],Ce)}me<M.length-1&&(!z||0<ve&&!we)&&($+=D)}}return $}function re(oe,M){if(oe==null)return"";if(oe.constructor===Date)return JSON.stringify(oe).slice(1,25);var z=!1;J&&typeof oe=="string"&&J.test(oe)&&(oe="'"+oe,z=!0);var $=oe.toString().replace(Z,H);return(z=z||P===!0||typeof P=="function"&&P(oe,M)||Array.isArray(P)&&P[M]||function(ee,le){for(var ce=0;ce<le.length;ce++)if(-1<ee.indexOf(le[ce]))return!0;return!1}($,a.BAD_DELIMITERS)||-1<$.indexOf(F)||$.charAt(0)===" "||$.charAt($.length-1)===" ")?q+$+q:$}}};if(a.RECORD_SEP="",a.UNIT_SEP="",a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!o&&!!t.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=p,a.ParserHandle=v,a.NetworkStreamer=w,a.FileStreamer=h,a.StringStreamer=m,a.ReadableStreamStreamer=b,t.jQuery){var d=t.jQuery;d.fn.parse=function(T){var R=T.config||{},P=[];return this.each(function(D){if(!(d(this).prop("tagName").toUpperCase()==="INPUT"&&d(this).attr("type").toLowerCase()==="file"&&t.FileReader)||!this.files||this.files.length===0)return!0;for(var q=0;q<this.files.length;q++)P.push({file:this.files[q],inputElem:this,instanceConfig:d.extend({},R)})}),k(),this;function k(){if(P.length!==0){var D,q,H,W,Q=P[0];if(C(T.before)){var J=T.before(Q.file,Q.inputElem);if(typeof J=="object"){if(J.action==="abort")return D="AbortError",q=Q.file,H=Q.inputElem,W=J.reason,void(C(T.error)&&T.error({name:D},q,H,W));if(J.action==="skip")return void F();typeof J.config=="object"&&(Q.instanceConfig=d.extend(Q.instanceConfig,J.config))}else if(J==="skip")return void F()}var Z=Q.instanceConfig.complete;Q.instanceConfig.complete=function(K){C(Z)&&Z(K,Q.file,Q.inputElem),F()},a.parse(Q.file,Q.instanceConfig)}else C(T.complete)&&T.complete()}function F(){P.splice(0,1),k()}}}function _(T){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(R){var P=A(R);P.chunkSize=parseInt(P.chunkSize),R.step||R.chunk||(P.chunkSize=null),this._handle=new v(P),(this._handle.streamer=this)._config=P}).call(this,T),this.parseChunk=function(R,P){if(this.isFirstChunk&&C(this._config.beforeFirstChunk)){var k=this._config.beforeFirstChunk(R);k!==void 0&&(R=k)}this.isFirstChunk=!1,this._halted=!1;var F=this._partialLine+R;this._partialLine="";var D=this._handle.parse(F,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var q=D.meta.cursor;this._finished||(this._partialLine=F.substring(q-this._baseIndex),this._baseIndex=q),D&&D.data&&(this._rowCount+=D.data.length);var H=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(c)t.postMessage({results:D,workerId:a.WORKER_ID,finished:H});else if(C(this._config.chunk)&&!P){if(this._config.chunk(D,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);D=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(D.data),this._completeResults.errors=this._completeResults.errors.concat(D.errors),this._completeResults.meta=D.meta),this._completed||!H||!C(this._config.complete)||D&&D.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),H||D&&D.meta.paused||this._nextChunk(),D}this._halted=!0},this._sendError=function(R){C(this._config.error)?this._config.error(R):c&&this._config.error&&t.postMessage({workerId:a.WORKER_ID,error:R,finished:!1})}}function w(T){var R;(T=T||{}).chunkSize||(T.chunkSize=a.RemoteChunkSize),_.call(this,T),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(P){this._input=P,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(R=new XMLHttpRequest,this._config.withCredentials&&(R.withCredentials=this._config.withCredentials),o||(R.onload=N(this._chunkLoaded,this),R.onerror=N(this._chunkError,this)),R.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var P=this._config.downloadRequestHeaders;for(var k in P)R.setRequestHeader(k,P[k])}if(this._config.chunkSize){var F=this._start+this._config.chunkSize-1;R.setRequestHeader("Range","bytes="+this._start+"-"+F)}try{R.send(this._config.downloadRequestBody)}catch(D){this._chunkError(D.message)}o&&R.status===0&&this._chunkError()}},this._chunkLoaded=function(){R.readyState===4&&(R.status<200||400<=R.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:R.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(P){var k=P.getResponseHeader("Content-Range");return k===null?-1:parseInt(k.substring(k.lastIndexOf("/")+1))}(R),this.parseChunk(R.responseText)))},this._chunkError=function(P){var k=R.statusText||P;this._sendError(new Error(k))}}function h(T){var R,P;(T=T||{}).chunkSize||(T.chunkSize=a.LocalChunkSize),_.call(this,T);var k=typeof FileReader<"u";this.stream=function(F){this._input=F,P=F.slice||F.webkitSlice||F.mozSlice,k?((R=new FileReader).onload=N(this._chunkLoaded,this),R.onerror=N(this._chunkError,this)):R=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var F=this._input;if(this._config.chunkSize){var D=Math.min(this._start+this._config.chunkSize,this._input.size);F=P.call(F,this._start,D)}var q=R.readAsText(F,this._config.encoding);k||this._chunkLoaded({target:{result:q}})},this._chunkLoaded=function(F){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(F.target.result)},this._chunkError=function(){this._sendError(R.error)}}function m(T){var R;_.call(this,T=T||{}),this.stream=function(P){return R=P,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var P,k=this._config.chunkSize;return k?(P=R.substring(0,k),R=R.substring(k)):(P=R,R=""),this._finished=!R,this.parseChunk(P)}}}function b(T){_.call(this,T=T||{});var R=[],P=!0,k=!1;this.pause=function(){_.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){_.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(F){this._input=F,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){k&&R.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),R.length?this.parseChunk(R.shift()):P=!0},this._streamData=N(function(F){try{R.push(typeof F=="string"?F:F.toString(this._config.encoding)),P&&(P=!1,this._checkIsFinished(),this.parseChunk(R.shift()))}catch(D){this._streamError(D)}},this),this._streamError=N(function(F){this._streamCleanUp(),this._sendError(F)},this),this._streamEnd=N(function(){this._streamCleanUp(),k=!0,this._streamData("")},this),this._streamCleanUp=N(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function v(T){var R,P,k,F=Math.pow(2,53),D=-F,q=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,H=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,W=this,Q=0,J=0,Z=!1,K=!1,re=[],oe={data:[],errors:[],meta:{}};if(C(T.step)){var M=T.step;T.step=function(me){if(oe=me,ee())$();else{if($(),oe.data.length===0)return;Q+=me.data.length,T.preview&&Q>T.preview?P.abort():(oe.data=oe.data[0],M(oe,W))}}}function z(me){return T.skipEmptyLines==="greedy"?me.join("").trim()==="":me.length===1&&me[0].length===0}function $(){return oe&&k&&(ce("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),k=!1),T.skipEmptyLines&&(oe.data=oe.data.filter(function(me){return!z(me)})),ee()&&function(){if(!oe)return;function me(ge,we){C(T.transformHeader)&&(ge=T.transformHeader(ge,we)),re.push(ge)}if(Array.isArray(oe.data[0])){for(var ve=0;ee()&&ve<oe.data.length;ve++)oe.data[ve].forEach(me);oe.data.splice(0,1)}else oe.data.forEach(me)}(),function(){if(!oe||!T.header&&!T.dynamicTyping&&!T.transform)return oe;function me(ge,we){var xe,fe=T.header?{}:[];for(xe=0;xe<ge.length;xe++){var Se=xe,Ce=ge[xe];T.header&&(Se=xe>=re.length?"__parsed_extra":re[xe]),T.transform&&(Ce=T.transform(Ce,Se)),Ce=le(Se,Ce),Se==="__parsed_extra"?(fe[Se]=fe[Se]||[],fe[Se].push(Ce)):fe[Se]=Ce}return T.header&&(xe>re.length?ce("FieldMismatch","TooManyFields","Too many fields: expected "+re.length+" fields but parsed "+xe,J+we):xe<re.length&&ce("FieldMismatch","TooFewFields","Too few fields: expected "+re.length+" fields but parsed "+xe,J+we)),fe}var ve=1;return!oe.data.length||Array.isArray(oe.data[0])?(oe.data=oe.data.map(me),ve=oe.data.length):oe.data=me(oe.data,0),T.header&&oe.meta&&(oe.meta.fields=re),J+=ve,oe}()}function ee(){return T.header&&re.length===0}function le(me,ve){return ge=me,T.dynamicTypingFunction&&T.dynamicTyping[ge]===void 0&&(T.dynamicTyping[ge]=T.dynamicTypingFunction(ge)),(T.dynamicTyping[ge]||T.dynamicTyping)===!0?ve==="true"||ve==="TRUE"||ve!=="false"&&ve!=="FALSE"&&(function(we){if(q.test(we)){var xe=parseFloat(we);if(D<xe&&xe<F)return!0}return!1}(ve)?parseFloat(ve):H.test(ve)?new Date(ve):ve===""?null:ve):ve;var ge}function ce(me,ve,ge,we){var xe={type:me,code:ve,message:ge};we!==void 0&&(xe.row=we),oe.errors.push(xe)}this.parse=function(me,ve,ge){var we=T.quoteChar||'"';if(T.newline||(T.newline=function(Se,Ce){Se=Se.substring(0,1048576);var Ne=new RegExp(g(Ce)+"([^]*?)"+g(Ce),"gm"),Oe=(Se=Se.replace(Ne,"")).split("\r"),Me=Se.split(`
`),Ue=1<Me.length&&Me[0].length<Oe[0].length;if(Oe.length===1||Ue)return`
`;for(var et=0,Fe=0;Fe<Oe.length;Fe++)Oe[Fe][0]===`
`&&et++;return et>=Oe.length/2?`\r
`:"\r"}(me,we)),k=!1,T.delimiter)C(T.delimiter)&&(T.delimiter=T.delimiter(me),oe.meta.delimiter=T.delimiter);else{var xe=function(Se,Ce,Ne,Oe,Me){var Ue,et,Fe,mt;Me=Me||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var ut=0;ut<Me.length;ut++){var it=Me[ut],ft=0,at=0,Le=0;Fe=void 0;for(var Je=new p({comments:Oe,delimiter:it,newline:Ce,preview:10}).parse(Se),Ie=0;Ie<Je.data.length;Ie++)if(Ne&&z(Je.data[Ie]))Le++;else{var de=Je.data[Ie].length;at+=de,Fe!==void 0?0<de&&(ft+=Math.abs(de-Fe),Fe=de):Fe=de}0<Je.data.length&&(at/=Je.data.length-Le),(et===void 0||ft<=et)&&(mt===void 0||mt<at)&&1.99<at&&(et=ft,Ue=it,mt=at)}return{successful:!!(T.delimiter=Ue),bestDelimiter:Ue}}(me,T.newline,T.skipEmptyLines,T.comments,T.delimitersToGuess);xe.successful?T.delimiter=xe.bestDelimiter:(k=!0,T.delimiter=a.DefaultDelimiter),oe.meta.delimiter=T.delimiter}var fe=A(T);return T.preview&&T.header&&fe.preview++,R=me,P=new p(fe),oe=P.parse(R,ve,ge),$(),Z?{meta:{paused:!0}}:oe||{meta:{paused:!1}}},this.paused=function(){return Z},this.pause=function(){Z=!0,P.abort(),R=C(T.chunk)?"":R.substring(P.getCharIndex())},this.resume=function(){W.streamer._halted?(Z=!1,W.streamer.parseChunk(R,!0)):setTimeout(W.resume,3)},this.aborted=function(){return K},this.abort=function(){K=!0,P.abort(),oe.meta.aborted=!0,C(T.complete)&&T.complete(oe),R=""}}function g(T){return T.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function p(T){var R,P=(T=T||{}).delimiter,k=T.newline,F=T.comments,D=T.step,q=T.preview,H=T.fastMode,W=R=T.quoteChar===void 0||T.quoteChar===null?'"':T.quoteChar;if(T.escapeChar!==void 0&&(W=T.escapeChar),(typeof P!="string"||-1<a.BAD_DELIMITERS.indexOf(P))&&(P=","),F===P)throw new Error("Comment character same as delimiter");F===!0?F="#":(typeof F!="string"||-1<a.BAD_DELIMITERS.indexOf(F))&&(F=!1),k!==`
`&&k!=="\r"&&k!==`\r
`&&(k=`
`);var Q=0,J=!1;this.parse=function(Z,K,re){if(typeof Z!="string")throw new Error("Input must be a string");var oe=Z.length,M=P.length,z=k.length,$=F.length,ee=C(D),le=[],ce=[],me=[],ve=Q=0;if(!Z)return he();if(T.header&&!K){var ge=Z.split(k)[0].split(P),we=[],xe={},fe=!1;for(var Se in ge){var Ce=ge[Se];C(T.transformHeader)&&(Ce=T.transformHeader(Ce,Se));var Ne=Ce,Oe=xe[Ce]||0;for(0<Oe&&(fe=!0,Ne=Ce+"_"+Oe),xe[Ce]=Oe+1;we.includes(Ne);)Ne=Ne+"_"+Oe;we.push(Ne)}if(fe){var Me=Z.split(k);Me[0]=we.join(P),Z=Me.join(k)}}if(H||H!==!1&&Z.indexOf(R)===-1){for(var Ue=Z.split(k),et=0;et<Ue.length;et++){if(me=Ue[et],Q+=me.length,et!==Ue.length-1)Q+=k.length;else if(re)return he();if(!F||me.substring(0,$)!==F){if(ee){if(le=[],Le(me.split(P)),ie(),J)return he()}else Le(me.split(P));if(q&&q<=et)return le=le.slice(0,q),he(!0)}}return he()}for(var Fe=Z.indexOf(P,Q),mt=Z.indexOf(k,Q),ut=new RegExp(g(W)+g(R),"g"),it=Z.indexOf(R,Q);;)if(Z[Q]!==R)if(F&&me.length===0&&Z.substring(Q,Q+$)===F){if(mt===-1)return he();Q=mt+z,mt=Z.indexOf(k,Q),Fe=Z.indexOf(P,Q)}else if(Fe!==-1&&(Fe<mt||mt===-1))me.push(Z.substring(Q,Fe)),Q=Fe+M,Fe=Z.indexOf(P,Q);else{if(mt===-1)break;if(me.push(Z.substring(Q,mt)),de(mt+z),ee&&(ie(),J))return he();if(q&&le.length>=q)return he(!0)}else for(it=Q,Q++;;){if((it=Z.indexOf(R,it+1))===-1)return re||ce.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:le.length,index:Q}),Ie();if(it===oe-1)return Ie(Z.substring(Q,it).replace(ut,R));if(R!==W||Z[it+1]!==W){if(R===W||it===0||Z[it-1]!==W){Fe!==-1&&Fe<it+1&&(Fe=Z.indexOf(P,it+1)),mt!==-1&&mt<it+1&&(mt=Z.indexOf(k,it+1));var ft=Je(mt===-1?Fe:Math.min(Fe,mt));if(Z.substr(it+1+ft,M)===P){me.push(Z.substring(Q,it).replace(ut,R)),Z[Q=it+1+ft+M]!==R&&(it=Z.indexOf(R,Q)),Fe=Z.indexOf(P,Q),mt=Z.indexOf(k,Q);break}var at=Je(mt);if(Z.substring(it+1+at,it+1+at+z)===k){if(me.push(Z.substring(Q,it).replace(ut,R)),de(it+1+at+z),Fe=Z.indexOf(P,Q),it=Z.indexOf(R,Q),ee&&(ie(),J))return he();if(q&&le.length>=q)return he(!0);break}ce.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:le.length,index:Q}),it++}}else it++}return Ie();function Le(ye){le.push(ye),ve=Q}function Je(ye){var Pe=0;if(ye!==-1){var Ve=Z.substring(it+1,ye);Ve&&Ve.trim()===""&&(Pe=Ve.length)}return Pe}function Ie(ye){return re||(ye===void 0&&(ye=Z.substring(Q)),me.push(ye),Q=oe,Le(me),ee&&ie()),he()}function de(ye){Q=ye,Le(me),me=[],mt=Z.indexOf(k,Q)}function he(ye){return{data:le,errors:ce,meta:{delimiter:P,linebreak:k,aborted:J,truncated:!!ye,cursor:ve+(K||0)}}}function ie(){D(he()),le=[],ce=[]}},this.abort=function(){J=!0},this.getCharIndex=function(){return Q}}function y(T){var R=T.data,P=l[R.workerId],k=!1;if(R.error)P.userError(R.error,R.file);else if(R.results&&R.results.data){var F={abort:function(){k=!0,S(R.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:j,resume:j};if(C(P.userStep)){for(var D=0;D<R.results.data.length&&(P.userStep({data:R.results.data[D],errors:R.results.errors,meta:R.results.meta},F),!k);D++);delete R.results}else C(P.userChunk)&&(P.userChunk(R.results,F,R.file),delete R.results)}R.finished&&!k&&S(R.workerId,R.results)}function S(T,R){var P=l[T];C(P.userComplete)&&P.userComplete(R),P.terminate(),delete l[T]}function j(){throw new Error("Not implemented.")}function A(T){if(typeof T!="object"||T===null)return T;var R=Array.isArray(T)?[]:{};for(var P in T)R[P]=A(T[P]);return R}function N(T,R){return function(){T.apply(R,arguments)}}function C(T){return typeof T=="function"}return c&&(t.onmessage=function(T){var R=T.data;if(a.WORKER_ID===void 0&&R&&(a.WORKER_ID=R.workerId),typeof R.input=="string")t.postMessage({workerId:a.WORKER_ID,results:a.parse(R.input,R.config),finished:!0});else if(t.File&&R.input instanceof File||R.input instanceof Object){var P=a.parse(R.input,R.config);P&&t.postMessage({workerId:a.WORKER_ID,results:P,finished:!0})}}),(w.prototype=Object.create(_.prototype)).constructor=w,(h.prototype=Object.create(_.prototype)).constructor=h,(m.prototype=Object.create(m.prototype)).constructor=m,(b.prototype=Object.create(_.prototype)).constructor=b,a})}(df)),df.exports}var hV=dV();const bp=Py(hV),Yh=["Had difficulty doing the leisure activities which you would like to do?","Had difficulty looking after your home, e.g. DIY, housework, cooking?","Had difficulty carrying bags of shopping?","Had problems walking half a mile?","Had problems walking 100 yards?","Had problems getting around the house as easily as you would like?","Had difficulty getting around in public?","Needed someone else to accompany you when you went out?","Felt frightened or worried about falling over in public?","Been confined to the house more than you would like?","Had difficulty washing yourself?","Had difficulty dressing yourself?","Had problems doing your shoe laces?","Had problems writing clearly?","Had difficulty cutting up your food?","Had difficulty holding a drink without spilling it?","Felt depressed?","Felt isolated and lonely?","Felt weepy or tearful?","Felt angry or bitter?","Felt anxious?","Felt worried about your future?","Felt you had to conceal your Parkinson's from people?","Avoided situations which involve eating or drinking in public?","Felt embarrassed in public due to having Parkinson's disease?","Felt worried by other people's reaction to you?","Had problems with your close personal relationships?","Lacked support in the ways you need from your spouse or partner?","Lacked support in the ways you need from your family or close friends?","Unexpectedly fallen asleep during the day?","Had problems with your concentration, e.g. when reading or watching TV?","Felt your memory was bad?","Had distressing dreams or hallucinations?","Had difficulty with your speech?","Felt unable to communicate with people properly?","Felt ignored by people?","Had painful muscle cramps or spasms?","Had aches and pains in your joints or body?","Felt unpleasantly hot or cold?"],gu=10,fV=()=>{const s=ms(),{currentUser:r}=Xo(),[n,t]=be.useState(Array(Yh.length).fill(null)),[o,c]=be.useState({}),[l,f]=be.useState(null),[a,d]=be.useState(0),_=Math.ceil(Yh.length/gu),w=(v,g)=>{const p=[...n];p[v]=g,t(p);const y={...o};g!==null&&delete y[v],c(y),Object.keys(y).length===0&&f(null)},h=async v=>{v.preventDefault();const g={};let p=!1;if(n.forEach((y,S)=>{y===null&&(g[S]="This field is required",p=!0)}),c(g),p){f({message:"Please fill all fields.",type:"error"});return}try{const y=n.reduce((D,q)=>D+(q??0),0),S=(y/n.length).toFixed(2),j=(y/(n.length*4)*100).toFixed(2),A=new Date,N=A.toLocaleString(),C={responses:n,averageScore:S,normalizedScore:j,userId:(r==null?void 0:r.uid)||"anonymous",timestamp:A.toISOString(),localDateTime:N},T=gi(Ks(rs,`users/${r==null?void 0:r.uid}/parkinsons-surveys`));await Yo(T,C);const R=n.map((D,q)=>({question:q+1,response:D})),P=bp.unparse(R),k=new Blob([P],{type:"text/csv;charset=utf-8;"}),F=La(Ua,`users/${r==null?void 0:r.uid}/parkinsons-surveys/${A.toISOString()}.csv`);await Od(F,k),f({message:`Submission successful! Your score is ${S} (${j}%)`,type:"success"}),setTimeout(()=>{s("/thank-you",{state:{type:"parkinsons",score:S,percentageScore:j}})},3e3)}catch(y){console.error("Error submitting survey:",y),f({message:"Error submitting survey. Please try again.",type:"error"})}},m=()=>{const v={};let g=!1;const p=a*gu,y=p+gu;Yh.slice(p,y).forEach((S,j)=>{const A=p+j;n[A]===null&&(v[A]="This field is required",g=!0)}),g?(c(S=>({...S,...v})),f({message:"Please fill all the fields on this page.",type:"error"})):(d(S=>S+1),f(null))},b=()=>{d(v=>v-1),f(null)};return B.jsx(In,{children:B.jsxs("div",{className:"w-full max-w-3xl p-8 bg-red-100 rounded-lg shadow-md border border-red-500 mx-auto",children:[B.jsx("h1",{className:"text-3xl font-bold mb-4 text-center",children:"Parkinson's Disease Questionnaire (PDQ-39)"}),B.jsx(Md,{}),B.jsx("form",{onSubmit:h,children:B.jsxs("div",{className:"grid grid-cols-1 justify-center",children:[Yh.slice(a*gu,(a+1)*gu).map((v,g)=>{const p=a*gu+g;return B.jsxs("div",{className:"mb-8",children:[B.jsx("label",{className:"block text-xl font-bold text-center text-gray-900 mb-4",children:`${p+1}. ${v}`}),B.jsx("div",{className:"flex justify-center space-x-8",children:[{label:"Never",color:"bg-blue-500"},{label:"Rarely",color:"bg-green-500"},{label:"Occasionally",color:"bg-yellow-500"},{label:"Often",color:"bg-orange-500"},{label:"Always",color:"bg-red-500"}].map((y,S)=>B.jsx("button",{type:"button",className:`text-sm px-4 py-2 border rounded ${n[p]===S?y.color+" text-white":"bg-gray-200"} ${o[p]?"border-red-500":"border-gray-300"}`,onClick:()=>w(p,S),children:y.label},S))}),o[p]&&B.jsx("p",{className:"text-red-500 text-sm mt-1",children:o[p]})]},p)}),l&&B.jsx(sn,{message:l.message,type:l.type}),B.jsxs("div",{className:"flex justify-between mt-4",children:[a>0&&B.jsx("button",{type:"button",className:"bg-gray-500 rounded-md hover:bg-gray-700 border border-gray-700 px-4 py-2",onClick:b,children:"Previous"}),a<_-1&&B.jsx("button",{type:"button",className:"bg-blue-500 rounded-md hover:bg-blue-700 border border-blue-700 px-4 py-2",onClick:m,children:"Next"}),a===_-1&&B.jsx("button",{type:"submit",className:"bg-green-500 rounded-md hover:bg-green-700 border border-green-700 px-4 py-2",children:"Submit"})]})]})})]})})},pV=()=>B.jsx(In,{children:B.jsx("div",{className:"flex flex-col items-center justify-top min-h-screen p-4 bg-gray-100",children:B.jsxs("div",{className:"w-full max-w-lg bg-gray-200 p-8 rounded-lg shadow-md border border-gray-300",children:[B.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Setting Page"}),B.jsx("p",{className:"text-lg mb-6",children:"Coming Soon"}),B.jsx(gn,{to:"/login",className:"text-blue-500 hover:text-blue-700",children:"Go to Login"})]})})}),mV=()=>B.jsx(In,{bgColor:"bg-gray-100",children:B.jsxs("div",{className:"w-full max-w-lg bg-gray-200 p-8 rounded-lg shadow-md border border-gray-300",children:[B.jsx("h1",{className:"text-4xl font-bold mb-4",children:"AccountPage"}),B.jsx("p",{className:"text-lg mb-6",children:"Coming Soon"}),B.jsx(gn,{to:"/login",className:"text-blue-500 hover:text-blue-700",children:"Go to Login"})]})}),zg={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},$h=[1,2,3,4,5].map(String),gV=["Laptop","Desktop","Tablet","Phone"],yV=["On","Off"],vV=["Stabilization","Baseline","N/A"],bV=["Blocker","Major","Minor","Nitpick"];function _V(){return Math.random().toString(36).slice(2)+Date.now().toString(36)}function wV(){var d,_,w,h;const s=window.navigator,r=s.userAgent||"",n=s.vendor||"",t=(((d=s.userAgentData)==null?void 0:d.platform)||s.platform||"").toString(),o=(((_=s.userAgentData)==null?void 0:_.brands)||[]).map(m=>`${m.brand} ${m.version}`).join(", "),c=t||(((w=/(Windows|Mac|Linux|Android|iOS)/i.exec(r))==null?void 0:w[1])??"Unknown"),l=o||(((h=/Chrome|Edg|Firefox|Safari/i.exec(r))==null?void 0:h[0])??"Unknown"),f=Math.round(window.devicePixelRatio*10)/10,a=`${window.screen.width}x${window.screen.height} @ ${f}x`;return{osGuess:c,browserGuess:l,screenStr:a,ua:r,vendor:n}}const xV=()=>{const{currentUser:s}=Xo();ms();const[r,n]=be.useState(!1),[t,o]=be.useState(null),[c,l]=be.useState(null),f=be.useMemo(()=>wV(),[]),[a,d]=be.useState(()=>({testerId:"",email:"",sessionLabel:"",uiClarity:"",performanceSmoothness:"",difficultyCalibration:"",overall:"",topPainPoints:"",suggestions:"",deviceType:"",os:f.osGuess,browser:f.browserGuess,screen:f.screenStr,connection:"",typingTestVariant:"",movingBackground:"",tremorMode:"",bugs:[]})),_=be.useMemo(()=>!!a.testerId&&!!a.deviceType&&!!a.os&&!!a.browser&&!!a.screen&&!!a.movingBackground&&!!a.tremorMode&&a.overall!=="",[a]);function w(p,y){d(S=>({...S,[p]:y})),o(null),l(null)}const h=()=>{d(p=>({...p,bugs:[...p.bugs,{id:_V(),pageOrFeature:"",severity:"Minor",stepsToReproduce:"",expected:"",actual:"",attachments:[]}]}))},m=p=>{d(y=>({...y,bugs:y.bugs.filter(S=>S.id!==p)}))},b=(p,y,S)=>{d(j=>({...j,bugs:j.bugs.map(A=>A.id===p?{...A,[y]:S}:A)}))},v=async(p,y)=>{if(!y||y.length===0)return;const S=[];try{for(let j=0;j<y.length;j++){const A=y[j],N=`debug-feedback/${(s==null?void 0:s.uid)??"anon"}/${Date.now()}_${A.name}`,C=La(Ua,N);await Od(C,A);const T=await MN(C);S.push(T)}d(j=>({...j,bugs:j.bugs.map(A=>A.id===p?{...A,attachments:[...A.attachments,...S]}:A)}))}catch(j){o((j==null?void 0:j.message)||"Upload failed.")}},g=async p=>{if(p.preventDefault(),o(null),l(null),!_){o("Please complete all required fields (marked with *).");return}try{n(!0);const y=On.now(),S={...a,uiClarity:a.uiClarity===""?null:Number(a.uiClarity),performanceSmoothness:a.performanceSmoothness===""?null:Number(a.performanceSmoothness),difficultyCalibration:a.difficultyCalibration===""?null:Number(a.difficultyCalibration),overall:a.overall===""?null:Number(a.overall),_createdAt:y,_ua:f.ua,_vendor:f.vendor,_tzOffsetMin:new Date().getTimezoneOffset(),_appVersion:(zg==null?void 0:zg.VITE_APP_VERSION)??null},j=(s==null?void 0:s.uid)||"anonymous",A=Ks(rs,`users/${j}/debug-feedback`),N=gi(A);await Yo(N,S),l("Thanks! Your feedback was saved."),d(C=>({...C,testerId:"",email:"",sessionLabel:"",uiClarity:"",performanceSmoothness:"",difficultyCalibration:"",overall:"",topPainPoints:"",suggestions:"",deviceType:"",movingBackground:"",tremorMode:"",typingTestVariant:"",bugs:[]}))}catch(y){console.error(y),o((y==null?void 0:y.message)||"Something went wrong while saving.")}finally{n(!1)}};return B.jsx(In,{children:B.jsx("div",{className:"min-h-screen w-full flex justify-center bg-gray-50 py-8 px-4",children:B.jsxs("form",{onSubmit:g,className:"w-full max-w-4xl bg-white border border-gray-200 rounded-2xl shadow p-6 md:p-10 space-y-8",children:[B.jsxs("header",{className:"space-y-1",children:[B.jsx("h1",{className:"text-2xl md:text-3xl font-semibold tracking-tight",children:"Debug Feedback & Progress"}),B.jsx("p",{className:"text-sm text-gray-600",children:"For the typing-on-moving-background experiment. Provide environment details, rate your experience, and add any bugs/suggestions."})]}),t&&B.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-red-800 text-sm",children:t}),c&&B.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 px-4 py-3 text-green-800 text-sm",children:c}),B.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[B.jsx(Fn,{label:"Tester ID *",name:"testerId",value:a.testerId,placeholder:"e.g., caltech-alias or initials",onChange:p=>w("testerId",p.target.value)}),B.jsx(Fn,{label:"Email (optional)",name:"email",type:"email",value:a.email||"",placeholder:"Optional contact",onChange:p=>w("email",p.target.value)}),B.jsx(Fn,{label:"Session Label",name:"sessionLabel",value:a.sessionLabel||"",placeholder:"e.g., debug run #1",onChange:p=>w("sessionLabel",p.target.value)})]}),B.jsxs("section",{children:[B.jsx("h2",{className:"text-lg font-medium mb-3",children:"Quick Ratings"}),B.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[B.jsx(Ii,{label:"UI clarity *",name:"uiClarity",value:a.uiClarity===""?"":String(a.uiClarity),options:[{label:"Select",value:""},...$h.map(p=>({label:p,value:p}))],onChange:p=>w("uiClarity",p===""?"":Number(p))}),B.jsx(Ii,{label:"Performance smoothness *",name:"performanceSmoothness",value:a.performanceSmoothness===""?"":String(a.performanceSmoothness),options:[{label:"Select",value:""},...$h.map(p=>({label:p,value:p}))],onChange:p=>w("performanceSmoothness",p===""?"":Number(p))}),B.jsx(Ii,{label:"Difficulty calibration *",name:"difficultyCalibration",value:a.difficultyCalibration===""?"":String(a.difficultyCalibration),options:[{label:"Select",value:""},...$h.map(p=>({label:p,value:p}))],onChange:p=>w("difficultyCalibration",p===""?"":Number(p))}),B.jsx(Ii,{label:"Overall *",name:"overall",value:a.overall===""?"":String(a.overall),options:[{label:"Select",value:""},...$h.map(p=>({label:p,value:p}))],onChange:p=>w("overall",p===""?"":Number(p))})]})]}),B.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[B.jsx(Sa,{label:"Top pain points",name:"topPainPoints",value:a.topPainPoints,placeholder:"What slowed you down most?",onChange:p=>w("topPainPoints",p.target.value)}),B.jsx(Sa,{label:"Suggestions",name:"suggestions",value:a.suggestions,placeholder:"Improvements, features, copy, metrics, etc.",onChange:p=>w("suggestions",p.target.value)})]}),B.jsxs("section",{children:[B.jsx("h2",{className:"text-lg font-medium mb-3",children:"Environment *"}),B.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[B.jsx(d0,{label:"Device type *",name:"deviceType",values:a.deviceType?[a.deviceType]:[],options:gV,onChange:p=>w("deviceType",p[0]??"")}),B.jsx(Fn,{label:"OS *",name:"os",value:a.os,onChange:p=>w("os",p.target.value)}),B.jsx(Fn,{label:"Browser *",name:"browser",value:a.browser,onChange:p=>w("browser",p.target.value)}),B.jsx(Fn,{label:"Screen *",name:"screen",value:a.screen,onChange:p=>w("screen",p.target.value)}),B.jsx(Ii,{label:"Connection",name:"connection",value:a.connection||"",options:[{label:"Select",value:""},{label:"WiFi",value:"WiFi"},{label:"Ethernet",value:"Ethernet"},{label:"Cellular",value:"Cellular"}],onChange:p=>w("connection",p)})]})]}),B.jsxs("section",{children:[B.jsx("h2",{className:"text-lg font-medium mb-3",children:"Experiment Context *"}),B.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[B.jsx(Fn,{label:"Typing test variant",name:"typingTestVariant",value:a.typingTestVariant||"",placeholder:"e.g., A / B / hash",onChange:p=>w("typingTestVariant",p.target.value)}),B.jsx(Ii,{label:"Moving background *",name:"movingBackground",value:a.movingBackground,options:[{label:"Select",value:""},...yV.map(p=>({label:p,value:p}))],onChange:p=>w("movingBackground",p)}),B.jsx(Ii,{label:"Tremor mode *",name:"tremorMode",value:a.tremorMode,options:[{label:"Select",value:""},...vV.map(p=>({label:p,value:p}))],onChange:p=>w("tremorMode",p)})]})]}),B.jsxs("section",{children:[B.jsxs("div",{className:"flex items-center justify-between mb-3",children:[B.jsx("h2",{className:"text-lg font-medium",children:"Bugs & Issues"}),B.jsx(An,{type:"button",onClick:h,children:"Add bug"})]}),a.bugs.length===0&&B.jsx("p",{className:"text-sm text-gray-500",children:"No bugs added yet."}),B.jsx("div",{className:"space-y-6",children:a.bugs.map((p,y)=>B.jsxs("div",{className:"rounded-xl border border-gray-200 bg-gray-50 p-4 space-y-3",children:[B.jsxs("div",{className:"flex items-center justify-between",children:[B.jsxs("h3",{className:"font-medium",children:["Issue #",y+1]}),B.jsx("button",{type:"button",className:"text-sm text-red-600 hover:underline",onClick:()=>m(p.id),children:"Remove"})]}),B.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[B.jsx(Fn,{label:"Page / Feature",name:`pageOrFeature_${p.id}`,value:p.pageOrFeature,placeholder:"e.g., Typing Test",onChange:S=>b(p.id,"pageOrFeature",S.target.value)}),B.jsx(Ii,{label:"Severity",name:`severity_${p.id}`,value:p.severity,options:bV.map(S=>({label:S,value:S})),onChange:S=>b(p.id,"severity",S)}),B.jsxs("div",{className:"flex flex-col gap-1",children:[B.jsx("label",{className:"text-sm font-medium",children:"Attachments"}),B.jsx("input",{type:"file",multiple:!0,accept:"image/*,video/*",onChange:S=>v(p.id,S.target.files),className:"block w-full text-sm"}),p.attachments.length>0&&B.jsx("ul",{className:"list-disc ml-4 text-xs text-gray-600",children:p.attachments.map(S=>B.jsx("li",{className:"truncate",children:B.jsx("a",{href:S,target:"_blank",className:"underline",children:S})},S))})]})]}),B.jsx(Sa,{label:"Steps to reproduce",name:`steps_${p.id}`,value:p.stepsToReproduce,placeholder:"Click X, then Y",onChange:S=>b(p.id,"stepsToReproduce",S.target.value)}),B.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[B.jsx(Sa,{label:"Expected",name:`expected_${p.id}`,value:p.expected,onChange:S=>b(p.id,"expected",S.target.value)}),B.jsx(Sa,{label:"Actual",name:`actual_${p.id}`,value:p.actual,onChange:S=>b(p.id,"actual",S.target.value)})]})]},p.id))})]}),B.jsxs("footer",{className:"flex flex-col sm:flex-row items-center gap-3 sm:gap-4",children:[B.jsx(An,{type:"submit",disabled:r||!_,children:r?"Saving":"Submit feedback"}),!_&&B.jsx("span",{className:"text-sm text-gray-500",children:"Fill all * required fields to enable submit."})]})]})})})};var Pc={},Ux;function _T(){if(Ux)return Pc;Ux=1;function s(v){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s=function(p){return typeof p}:s=function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},s(v)}Object.defineProperty(Pc,"__esModule",{value:!0}),Pc.Collapse=void 0;var r=n(fd());function n(v){return v&&v.__esModule?v:{default:v}}function t(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function o(v,g){for(var p=0;p<g.length;p++){var y=g[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,y.key,y)}}function c(v,g,p){return g&&o(v.prototype,g),v}function l(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),g&&f(v,g)}function f(v,g){return f=Object.setPrototypeOf||function(y,S){return y.__proto__=S,y},f(v,g)}function a(v){var g=w();return function(){var y=h(v),S;if(g){var j=h(this).constructor;S=Reflect.construct(y,arguments,j)}else S=y.apply(this,arguments);return d(this,S)}}function d(v,g){if(g&&(s(g)==="object"||typeof g=="function"))return g;if(g!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _(v)}function _(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function w(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function h(v){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(p){return p.__proto__||Object.getPrototypeOf(p)},h(v)}function m(v,g,p){return g in v?Object.defineProperty(v,g,{value:p,enumerable:!0,configurable:!0,writable:!0}):v[g]=p,v}var b=function(v){l(p,v);var g=a(p);function p(y){var S;return t(this,p),S=g.call(this,y),m(_(S),"timeout",void 0),m(_(S),"container",void 0),m(_(S),"content",void 0),m(_(S),"onResize",function(){if(clearTimeout(S.timeout),!(!S.container||!S.content)){var j=S.props,A=j.isOpened,N=j.checkTimeout,C=Math.floor(S.container.clientHeight),T=Math.floor(S.content.clientHeight),R=A&&Math.abs(T-C)<=1,P=!A&&Math.abs(C)<=1;R||P?S.onRest({isFullyOpened:R,isFullyClosed:P,isOpened:A,containerHeight:C,contentHeight:T}):(S.onWork({isFullyOpened:R,isFullyClosed:P,isOpened:A,containerHeight:C,contentHeight:T}),S.timeout=setTimeout(function(){return S.onResize()},N))}}),m(_(S),"onRest",function(j){var A=j.isFullyOpened,N=j.isFullyClosed,C=j.isOpened,T=j.containerHeight,R=j.contentHeight;if(!(!S.container||!S.content)){var P=C&&S.container.style.height==="".concat(R,"px"),k=!C&&S.container.style.height==="0px";if(P||k){S.container.style.overflow=C?"initial":"hidden",S.container.style.height=C?"auto":"0px";var F=S.props.onRest;F&&F({isFullyOpened:A,isFullyClosed:N,isOpened:C,containerHeight:T,contentHeight:R})}}}),m(_(S),"onWork",function(j){var A=j.isFullyOpened,N=j.isFullyClosed,C=j.isOpened,T=j.containerHeight,R=j.contentHeight;if(!(!S.container||!S.content)){var P=C&&S.container.style.height==="".concat(R,"px"),k=!C&&S.container.style.height==="0px";if(!(P||k)){S.container.style.overflow="hidden",S.container.style.height=C?"".concat(R,"px"):"0px";var F=S.props.onWork;F&&F({isFullyOpened:A,isFullyClosed:N,isOpened:C,containerHeight:T,contentHeight:R})}}}),m(_(S),"onRefContainer",function(j){S.container=j}),m(_(S),"onRefContent",function(j){S.content=j}),y.initialStyle?S.initialStyle=y.initialStyle:S.initialStyle=y.isOpened?{height:"auto",overflow:"initial"}:{height:"0px",overflow:"hidden"},S}return c(p,[{key:"componentDidMount",value:function(){this.onResize()}},{key:"shouldComponentUpdate",value:function(S){var j=this.props,A=j.theme,N=j.isOpened,C=j.children;return C!==S.children||N!==S.isOpened||Object.keys(A).some(function(T){return A[T]!==S.theme[T]})}},{key:"getSnapshotBeforeUpdate",value:function(){if(!this.container||!this.content)return null;if(this.container.style.height==="auto"){var S=this.content.clientHeight;this.container.style.height="".concat(S,"px")}return null}},{key:"componentDidUpdate",value:function(){this.onResize()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var S=this.props,j=S.theme,A=S.children,N=S.isOpened;return r.default.createElement("div",{ref:this.onRefContainer,className:j.collapse,style:this.initialStyle,"aria-hidden":!N},r.default.createElement("div",{ref:this.onRefContent,className:j.content},A))}}]),p}(r.default.Component);return Pc.Collapse=b,m(b,"defaultProps",{theme:{collapse:"ReactCollapse--collapse",content:"ReactCollapse--content"},initialStyle:void 0,onRest:void 0,onWork:void 0,checkTimeout:50}),Pc}var Dc={},Fx;function SV(){if(Fx)return Dc;Fx=1;function s(C){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s=function(R){return typeof R}:s=function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},s(C)}Object.defineProperty(Dc,"__esModule",{value:!0}),Dc.UnmountClosed=void 0;var r=c(fd()),n=_T(),t=["isOpened"],o=["isOpened"];function c(C){return C&&C.__esModule?C:{default:C}}function l(){return l=Object.assign||function(C){for(var T=1;T<arguments.length;T++){var R=arguments[T];for(var P in R)Object.prototype.hasOwnProperty.call(R,P)&&(C[P]=R[P])}return C},l.apply(this,arguments)}function f(C,T){var R=Object.keys(C);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(C);T&&(P=P.filter(function(k){return Object.getOwnPropertyDescriptor(C,k).enumerable})),R.push.apply(R,P)}return R}function a(C){for(var T=1;T<arguments.length;T++){var R=arguments[T]!=null?arguments[T]:{};T%2?f(Object(R),!0).forEach(function(P){A(C,P,R[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(R)):f(Object(R)).forEach(function(P){Object.defineProperty(C,P,Object.getOwnPropertyDescriptor(R,P))})}return C}function d(C,T){if(C==null)return{};var R=_(C,T),P,k;if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(C);for(k=0;k<F.length;k++)P=F[k],!(T.indexOf(P)>=0)&&Object.prototype.propertyIsEnumerable.call(C,P)&&(R[P]=C[P])}return R}function _(C,T){if(C==null)return{};var R={},P=Object.keys(C),k,F;for(F=0;F<P.length;F++)k=P[F],!(T.indexOf(k)>=0)&&(R[k]=C[k]);return R}function w(C,T){if(!(C instanceof T))throw new TypeError("Cannot call a class as a function")}function h(C,T){for(var R=0;R<T.length;R++){var P=T[R];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(C,P.key,P)}}function m(C,T,R){return T&&h(C.prototype,T),C}function b(C,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(T&&T.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),T&&v(C,T)}function v(C,T){return v=Object.setPrototypeOf||function(P,k){return P.__proto__=k,P},v(C,T)}function g(C){var T=S();return function(){var P=j(C),k;if(T){var F=j(this).constructor;k=Reflect.construct(P,arguments,F)}else k=P.apply(this,arguments);return p(this,k)}}function p(C,T){if(T&&(s(T)==="object"||typeof T=="function"))return T;if(T!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y(C)}function y(C){if(C===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C}function S(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function j(C){return j=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)},j(C)}function A(C,T,R){return T in C?Object.defineProperty(C,T,{value:R,enumerable:!0,configurable:!0,writable:!0}):C[T]=R,C}var N=function(C){b(R,C);var T=g(R);function R(P){var k;return w(this,R),k=T.call(this,P),A(y(k),"onWork",function(F){var D=F.isOpened,q=d(F,t);k.setState({isResting:!1,isOpened:D});var H=k.props.onWork;H&&H(a({isOpened:D},q))}),A(y(k),"onRest",function(F){var D=F.isOpened,q=d(F,o);k.setState({isResting:!0,isOpened:D,isInitialRender:!1});var H=k.props.onRest;H&&H(a({isOpened:D},q))}),A(y(k),"getInitialStyle",function(){var F=k.state,D=F.isOpened,q=F.isInitialRender;return q?D?{height:"auto",overflow:"initial"}:{height:"0px",overflow:"hidden"}:{height:"0px",overflow:"hidden"}}),k.state={isResting:!0,isOpened:P.isOpened,isInitialRender:!0},k}return m(R,[{key:"componentDidUpdate",value:function(k){var F=this.props.isOpened;k.isOpened!==F&&this.setState({isResting:!1,isOpened:F,isInitialRender:!1})}},{key:"render",value:function(){var k=this.state,F=k.isResting,D=k.isOpened;return F&&!D?null:r.default.createElement(n.Collapse,l({},this.props,{initialStyle:this.getInitialStyle(),onWork:this.onWork,onRest:this.onRest}))}}]),R}(r.default.PureComponent);return Dc.UnmountClosed=N,A(N,"defaultProps",{onWork:void 0,onRest:void 0}),Dc}var Hg,Vx;function jV(){if(Vx)return Hg;Vx=1;var s=_T(),r=s.Collapse,n=SV(),t=n.UnmountClosed;return Hg=t,t.Collapse=r,t.UnmountClosed=t,Hg}var _p=jV();const Ws=({label:s,min:r,max:n,step:t,value:o,onChange:c})=>{const l=be.useMemo(()=>(o-r)/(n-r)*100,[o,r,n]),f=be.useMemo(()=>[0,25,50,75,100],[]);return B.jsxs("div",{className:"control-group text-xs",children:[B.jsx("label",{className:"block mb-1 font-medium",children:s}),B.jsxs("div",{className:"relative w-full h-6",children:[B.jsx("div",{className:"absolute inset-0 pointer-events-none",children:f.map(a=>{const d=a%50===0;return B.jsx("div",{className:"absolute bg-gray-600",style:{left:`${a}%`,width:d?"2px":"1px",height:d?"6px":"4px",top:"50%",transform:"translate(-50%, -50%)"}},a)})}),B.jsx("input",{type:"range",min:r,max:n,step:t,value:o,onChange:a=>c(parseFloat(a.currentTarget.value)),className:"w-full h-2 rounded-lg appearance-none focus:outline-none",style:{background:`linear-gradient(
              to right,
              #3b82f6 0%,
              #3b82f6 ${l}%,
              #d1d5db ${l}%,
              #d1d5db 100%
            )`}})]}),B.jsxs("div",{className:"flex justify-between mt-1 text-gray-600",children:[B.jsx("span",{children:r}),B.jsx("span",{children:n})]})]})},EV=({settings:s,setSettings:r,startAnimation:n,stopAnimation:t,resetAnimation:o})=>{const[c,l]=be.useState(!0),{currentUser:f}=Xo(),[a,d]=be.useState(""),[_,w]=be.useState([]),[h,m]=be.useState({message:"",type:"success"});be.useEffect(()=>{(async()=>{try{const p=Ks(rs,`users/${f.uid}/animation-settings`),S=(await Fv(p)).docs.map(j=>j.id);w(S)}catch(p){console.error("Error fetching preset names:",p)}})()},[f]);const b=async()=>{if(!a){m({message:"Please provide a name for the preset.",type:"error"});return}const g=new Date,p=g.toLocaleString(),y={...s,presetName:a,userId:f.uid,timestamp:g.toISOString(),localDateTime:p};try{const S=gi(rs,`users/${f.uid}/animation-settings/${a}`);await Yo(S,y);const j=Object.keys(y).map(T=>({setting:T,value:y[T]})),A=bp.unparse(j),N=new Blob([A],{type:"text/csv;charset=utf-8;"}),C=La(Ua,`users/${f.uid}/animation-settings/${a}.csv`);await Od(C,N),m({message:"Preset settings saved successfully!",type:"success"}),_.includes(a)||w([..._,a])}catch(S){console.error("Error saving preset settings:",S),m({message:"Error saving preset settings. Please try again.",type:"error"})}},v=async()=>{if(!a){m({message:"Please provide the name of the preset to load.",type:"error"});return}try{const g=gi(rs,`users/${f.uid}/animation-settings/${a}`),p=await Aj(g);if(p.exists()){const y=p.data();r(y),m({message:"Preset settings loaded successfully!",type:"success"})}else m({message:"No settings found with that preset name.",type:"error"})}catch(g){console.error("Error loading preset settings:",g),m({message:"Error loading preset settings. Please try again.",type:"error"})}};return B.jsxs("div",{className:`fixed right-4 top-2 p-4 rounded ${c?"shadow-lg bg-transparent":""} w-60 z-50 h-full overflow-y-auto`,children:[B.jsx("button",{onClick:()=>l(!c),className:"mb-2 bg-gray-200 text-xs p-2 border p-2 rounded w-full ",children:c?"Collapse Controls":"Expand Controls"}),B.jsx(_p.Collapse,{isOpened:c,children:B.jsxs("div",{className:"space-y-2",children:[B.jsxs("div",{className:"text-xs flex space-x-2",children:[B.jsx("button",{onClick:n,className:"bg-green-500 text-xs text-white p-2 rounded w-1/3",children:"Start"}),B.jsx("button",{onClick:t,className:"bg-red-500 text-xs text-white p-2 rounded w-1/3",children:"Stop"}),B.jsx("button",{onClick:o,className:"bg-gray-500 text-xs text-white p-2 rounded w-1/3",children:"Reset"})]}),B.jsx("div",{className:"text-xs flex space-x-2",children:B.jsx("input",{type:"text",placeholder:"Preset Name",value:a,onChange:g=>d(g.target.value),className:"border p-2 rounded w-full"})}),B.jsxs("div",{className:"text-xs flex space-x-2",children:[B.jsx("button",{onClick:b,className:"bg-blue-500  text-xs text-white p-2 rounded w-1/2",children:"Save Preset"}),B.jsx("button",{onClick:v,className:"bg-yellow-500 text-xs text-white p-2 rounded w-1/2",children:"Load Preset"})]}),B.jsx("div",{className:" text-xs flex space-x-2",children:B.jsxs("select",{onChange:g=>d(g.target.value),value:a,className:"border p-2 rounded w-full text-xs",children:[B.jsx("option",{value:"",children:"Select Preset"}),_.map((g,p)=>B.jsx("option",{value:g,children:g},p))]})}),h.message&&B.jsx("div",{className:`alert ${h.type==="error"?"bg-red-500":"bg-green-500"} text-xs text-white p-2 rounded`,children:h.message}),B.jsxs("div",{className:"control-group text-xs",children:[B.jsx("label",{className:"block mb-2 text-xs",children:"Wave Type:"}),B.jsxs("select",{value:s.waveType,onChange:g=>r({...s,waveType:g.target.value}),className:"border p-2 rounded w-full",children:[B.jsx("option",{value:"sine",children:"Sine"}),B.jsx("option",{value:"tan",children:"Tan"}),B.jsx("option",{value:"cotan",children:"Cotan"}),B.jsx("option",{value:"sawtooth",children:"Sawtooth"}),B.jsx("option",{value:"square",children:"Square"}),B.jsx("option",{value:"triangle",children:"Triangle"})]})]}),B.jsxs("div",{className:"control-group text-xs",children:[B.jsx("label",{className:"block mb-2 text-xs",children:"Direction:"}),B.jsxs("select",{value:s.direction,onChange:g=>r({...s,direction:g.target.value}),className:"border p-2 rounded w-full",children:[B.jsx("option",{value:"static",children:"Static"}),B.jsx("option",{value:"up",children:"Up"}),B.jsx("option",{value:"down",children:"Down"}),B.jsx("option",{value:"left",children:"Left"}),B.jsx("option",{value:"right",children:"Right"}),B.jsx("option",{value:"oscillateUpDown",children:"Oscillate Up and Down"}),B.jsx("option",{value:"oscillateRightLeft",children:"Oscillate Right and Left"}),B.jsx("option",{value:"circular",children:"Circular"})]})]}),s.direction==="circular"&&B.jsxs(B.Fragment,{children:[B.jsxs("div",{className:"control-group text-xs",children:[B.jsx("label",{className:"block mb-2 text-xs",children:"Rotation Speed:"}),B.jsx("input",{type:"range",min:"0.0",max:"2",step:"0.1",value:s.rotationSpeed,onChange:g=>r({...s,rotationSpeed:parseFloat(g.target.value)}),className:"w-full",list:"rotationSpeedSteps"}),B.jsx("datalist",{id:"rotationSpeedSteps",children:[...Array(100)].map((g,p)=>B.jsx("option",{value:p/100},p))})]}),B.jsxs("div",{className:"control-group text-xs ",children:[B.jsx("label",{className:"block mb-2 text-xs",children:"Rotation Radius:"}),B.jsx("input",{type:"range",min:"10",max:"500",value:s.rotationRadius,onChange:g=>r({...s,rotationRadius:parseFloat(g.target.value)}),className:"w-full",list:"rotationRadiusSteps"}),B.jsx("datalist",{id:"rotationRadiusSteps",children:[...Array(50)].map((g,p)=>B.jsx("option",{value:p*10},p))})]})]}),["oscillateUpDown","oscillateRightLeft"].includes(s.direction)&&B.jsxs("div",{className:"control-group",children:[B.jsx("label",{className:"block mb-2 text-xs",children:"Oscillation Range:"}),B.jsx("input",{type:"range",min:"10",max:Math.min(window.innerWidth,window.innerHeight),value:s.oscillationRange,onChange:g=>r({...s,oscillationRange:parseFloat(g.target.value)}),className:"w-full",list:"oscillationRangeSteps"}),B.jsx("datalist",{id:"oscillationRangeSteps",children:[...Array(10)].map((g,p)=>B.jsx("option",{value:p*10},p))})]}),B.jsxs("div",{className:"control-group text-xs",children:[B.jsx("label",{className:"block mb-2 text-xs",children:"Angle:"}),B.jsx("input",{type:"range",min:"0",max:"360",value:s.angle*(180/Math.PI),step:"1",onChange:g=>r({...s,angle:parseFloat(g.target.value)*(Math.PI/180)}),className:"w-full",list:"angleSteps"}),B.jsx("datalist",{id:"angleSteps",children:[...Array(36)].map((g,p)=>B.jsx("option",{value:p*10},p))})]}),B.jsx("div",{className:"control-group text-xs",children:B.jsx(Ws,{label:"Amplitude",min:0,max:360,step:1,value:s.amplitude,onChange:g=>r(p=>({...p,amplitude:g}))})}),B.jsxs("div",{className:"control-group text-xs",children:[B.jsx("label",{className:"block mb-2 text-xs",children:"Frequency:"}),B.jsx("input",{type:"range",min:"1",max:"300",value:s.frequency,step:"1",onChange:g=>r({...s,frequency:parseFloat(g.target.value)}),className:"w-full",list:"frequencySteps"}),B.jsx("datalist",{id:"frequencySteps",children:[...Array(30)].map((g,p)=>B.jsx("option",{value:p*10},p))})]}),B.jsx("div",{className:"control-group text-xs",children:B.jsx(Ws,{label:"Speed",min:1,max:10,step:1,value:s.speed,onChange:g=>r(p=>({...p,speed:g}))})}),B.jsxs("div",{className:"control-group text-xs",children:[B.jsx("label",{className:"block mb-2 text-xs",children:"Line Thickness:"}),B.jsx("input",{type:"range",min:"1",max:"10",value:s.thickness,step:"1",onChange:g=>r({...s,thickness:parseFloat(g.target.value)}),className:"w-full",list:"thicknessSteps"}),B.jsx("datalist",{id:"thicknessSteps",children:[...Array(10)].map((g,p)=>B.jsx("option",{value:p+1},p))})]}),B.jsxs("div",{className:"control-group text-xs",children:[B.jsx("label",{className:"block mb-2 text-xs",children:"Phase Offset:"}),B.jsx("input",{type:"range",min:"0",max:"360",value:s.phaseOffset*(180/Math.PI),step:"1",onChange:g=>r({...s,phaseOffset:parseFloat(g.target.value)/360*(2*Math.PI)}),className:"w-full",list:"phaseOffsetSteps"}),B.jsx("datalist",{id:"phaseOffsetSteps",children:[...Array(36)].map((g,p)=>B.jsx("option",{value:p*10},p))})]}),B.jsxs("div",{className:"control-group text-xs",children:[B.jsx("label",{className:"block mb-2 text-xs",children:"Number of Lines:"}),B.jsx("input",{type:"range",min:"1",max:"100",value:s.numLines,step:"1",onChange:g=>r({...s,numLines:parseInt(g.target.value,10)}),className:"w-full",list:"numLinesSteps"}),B.jsx("datalist",{id:"numLinesSteps",children:[...Array(10)].map((g,p)=>B.jsx("option",{value:p*10},p))})]}),B.jsxs("div",{className:"control-group text-xs",children:[B.jsx("label",{className:"block mb-2 text-xs",children:"Distance Between Lines:"}),B.jsx("input",{type:"range",min:"1",max:"200",value:s.distance,step:"1",onChange:g=>r({...s,distance:parseFloat(g.target.value)}),className:"w-full",list:"distanceSteps"}),B.jsx("datalist",{id:"distanceSteps",children:[...Array(20)].map((g,p)=>B.jsx("option",{value:p*10},p))})]}),B.jsxs("div",{className:"control-group text-xs",children:[B.jsx("label",{className:"block mb-2 text-xs",children:"Number of Groups:"}),B.jsx("input",{type:"range",min:"1",max:"10",value:s.groups,step:"1",onChange:g=>r({...s,groups:parseInt(g.target.value,10)}),className:"w-full",list:"groupsSteps"}),B.jsx("datalist",{id:"groupsSteps",children:[...Array(10)].map((g,p)=>B.jsx("option",{value:p+1},p))})]}),B.jsxs("div",{className:"control-group text-xs",children:[B.jsx("label",{className:"block mb-2 text-xs",children:"Distance between Groups:"}),B.jsx("input",{type:"range",min:"0",max:"1000",value:s.groupDistance,step:"1",onChange:g=>r({...s,groupDistance:parseFloat(g.target.value)}),className:"w-full",list:"groupDistanceSteps"}),B.jsx("datalist",{id:"groupDistanceSteps",children:[...Array(100)].map((g,p)=>B.jsx("option",{value:p*10},p))})]}),B.jsxs("div",{className:"control-group text-xs",children:[B.jsx("label",{className:"block mb-2 text-xs",children:"Background Color:"}),B.jsx("input",{type:"color",value:s.bgColor,onChange:g=>r({...s,bgColor:g.target.value}),className:"w-full"})]}),B.jsxs("div",{className:"control-group text-xs",children:[B.jsx("label",{className:"block mb-2 text-xs",children:"Line Color:"}),B.jsx("input",{type:"color",value:s.lineColor,onChange:g=>r({...s,lineColor:g.target.value}),className:"w-full"})]}),B.jsxs("div",{className:"control-group text-xs",children:[B.jsx("label",{className:"block mb-2 text-xs",children:"Use Palette:"}),B.jsxs("select",{value:s.selectedPalette,onChange:g=>r({...s,selectedPalette:g.target.value}),className:"border p-2 rounded w-full",children:[B.jsx("option",{value:"none",children:"None"}),B.jsx("option",{value:"rainbow",children:"Rainbow"}),B.jsx("option",{value:"pastel",children:"Pastel"})]})]})]})})]})},TV={Date:!0,RegExp:!0,String:!0,Number:!0};function wT(s,r,n={cyclesFix:!0},t=[]){var f,a;let o=[];const c=Array.isArray(s);for(const d in s){const _=s[d],w=c?+d:d;if(!(d in r)){o.push({type:"REMOVE",path:[w],oldValue:s[d]});continue}const h=r[d],m=typeof _=="object"&&typeof h=="object"&&Array.isArray(_)===Array.isArray(h);if(_&&h&&m&&!TV[(a=(f=Object.getPrototypeOf(_))==null?void 0:f.constructor)==null?void 0:a.name]&&(!n.cyclesFix||!t.includes(_))){const b=wT(_,h,n,n.cyclesFix?t.concat([_]):[]);o.push.apply(o,b.map(v=>(v.path.unshift(w),v)))}else _!==h&&!(Number.isNaN(_)&&Number.isNaN(h))&&!(m&&(isNaN(_)?_+""==h+"":+_==+h))&&o.push({path:[w],type:"CHANGE",value:h,oldValue:_})}const l=Array.isArray(r);for(const d in r)d in s||o.push({type:"CREATE",path:[l?+d:d],value:r[d]});return o}function Xh(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var qg={exports:{}};/*! p5.js v1.11.2 November 28, 2024 */var Bx;function CV(){return Bx||(Bx=1,function(s,r){(function(n){s.exports=n()})(function(){var n;return function t(o,c,l){function f(_,w){if(!c[_]){if(!o[_]){var h=typeof Xh=="function"&&Xh;if(!w&&h)return h(_,!0);if(a)return a(_,!0);throw(w=new Error("Cannot find module '"+_+"'")).code="MODULE_NOT_FOUND",w}h=c[_]={exports:{}},o[_][0].call(h.exports,function(m){return f(o[_][1][m]||m)},h,h.exports,t,o,c,l)}return c[_].exports}for(var a=typeof Xh=="function"&&Xh,d=0;d<l.length;d++)f(l[d]);return f}({1:[function(t,o,c){c.byteLength=function(v){var v=h(v),b=v[0],v=v[1];return 3*(b+v)/4-v},c.toByteArray=function(m){var b,v,p=h(m),g=p[0],p=p[1],y=new a(function(A,N){return 3*(A+N)/4-N}(g,p)),S=0,j=0<p?g-4:g;for(v=0;v<j;v+=4)b=f[m.charCodeAt(v)]<<18|f[m.charCodeAt(v+1)]<<12|f[m.charCodeAt(v+2)]<<6|f[m.charCodeAt(v+3)],y[S++]=b>>16&255,y[S++]=b>>8&255,y[S++]=255&b;return p===2&&(b=f[m.charCodeAt(v)]<<2|f[m.charCodeAt(v+1)]>>4,y[S++]=255&b),p===1&&(b=f[m.charCodeAt(v)]<<10|f[m.charCodeAt(v+1)]<<4|f[m.charCodeAt(v+2)]>>2,y[S++]=b>>8&255,y[S++]=255&b),y},c.fromByteArray=function(m){for(var b,v=m.length,g=v%3,p=[],y=0,S=v-g;y<S;y+=16383)p.push(function(j,A,N){for(var C,T=[],R=A;R<N;R+=3)C=(j[R]<<16&16711680)+(j[R+1]<<8&65280)+(255&j[R+2]),T.push(function(P){return l[P>>18&63]+l[P>>12&63]+l[P>>6&63]+l[63&P]}(C));return T.join("")}(m,y,S<y+16383?S:y+16383));return g==1?(b=m[v-1],p.push(l[b>>2]+l[b<<4&63]+"==")):g==2&&(b=(m[v-2]<<8)+m[v-1],p.push(l[b>>10]+l[b>>4&63]+l[b<<2&63]+"=")),p.join("")};for(var l=[],f=[],a=typeof Uint8Array<"u"?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_=0,w=d.length;_<w;++_)l[_]=d[_],f[d.charCodeAt(_)]=_;function h(m){var b=m.length;if(0<b%4)throw new Error("Invalid string. Length must be a multiple of 4");return m=m.indexOf("="),b=(m=m===-1?b:m)===b?0:4-m%4,[m,b]}f[45]=62,f[95]=63},{}],2:[function(t,o,c){},{}],3:[function(t,o,c){},{}],4:[function(t,o,c){(function(h){var f=t("base64-js"),a=t("ieee754"),d=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,_=(c.Buffer=h,c.SlowBuffer=function(M){return+M!=M&&(M=0),h.alloc(+M)},c.INSPECT_MAX_BYTES=50,2147483647);function w(M){if(_<M)throw new RangeError('The value "'+M+'" is invalid for option "size"');return M=new Uint8Array(M),Object.setPrototypeOf(M,h.prototype),M}function h(M,z,$){if(typeof M!="number")return m(M,z,$);if(typeof z=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(M)}function m(M,z,$){if(typeof M=="string"){var ee=M,le=z;if(h.isEncoding(le=typeof le=="string"&&le!==""?le:"utf8"))return ce=0|y(ee,le),me=w(ce),me=(ee=me.write(ee,le))!==ce?me.slice(0,ee):me;throw new TypeError("Unknown encoding: "+le)}if(ArrayBuffer.isView(M))return g(M);if(M!=null){if(K(M,ArrayBuffer)||M&&K(M.buffer,ArrayBuffer)){var ce=M,ee=z,me=$;if(ee<0||ce.byteLength<ee)throw new RangeError('"offset" is outside of buffer bounds');if(ce.byteLength<ee+(me||0))throw new RangeError('"length" is outside of buffer bounds');return ce=ee===void 0&&me===void 0?new Uint8Array(ce):me===void 0?new Uint8Array(ce,ee):new Uint8Array(ce,ee,me),Object.setPrototypeOf(ce,h.prototype),ce}if(typeof M=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if(le=M.valueOf&&M.valueOf(),le!=null&&le!==M)return h.from(le,z,$);var ve=function(ge){{var we,xe;if(h.isBuffer(ge))return we=0|p(ge.length),(xe=w(we)).length!==0&&ge.copy(xe,0,0,we),xe}if(ge.length!==void 0)return typeof ge.length!="number"||re(ge.length)?w(0):g(ge);if(ge.type==="Buffer"&&Array.isArray(ge.data))return g(ge.data)}(M);if(ve)return ve;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof M[Symbol.toPrimitive]=="function")return h.from(M[Symbol.toPrimitive]("string"),z,$)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M)}function b(M){if(typeof M!="number")throw new TypeError('"size" argument must be of type number');if(M<0)throw new RangeError('The value "'+M+'" is invalid for option "size"')}function v(M){return b(M),w(M<0?0:0|p(M))}function g(M){for(var z=M.length<0?0:0|p(M.length),$=w(z),ee=0;ee<z;ee+=1)$[ee]=255&M[ee];return $}function p(M){if(_<=M)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+_.toString(16)+" bytes");return 0|M}function y(M,z){if(h.isBuffer(M))return M.length;if(ArrayBuffer.isView(M)||K(M,ArrayBuffer))return M.byteLength;if(typeof M!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof M);var $=M.length,ee=2<arguments.length&&arguments[2]===!0;if(!ee&&$===0)return 0;for(var le=!1;;)switch(z){case"ascii":case"latin1":case"binary":return $;case"utf8":case"utf-8":return Q(M).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*$;case"hex":return $>>>1;case"base64":return J(M).length;default:if(le)return ee?-1:Q(M).length;z=(""+z).toLowerCase(),le=!0}}function S(M,z,$){var ee,le=!1;if((z=z===void 0||z<0?0:z)>this.length||($=$===void 0||$>this.length?this.length:$)<=0||($>>>=0)<=(z>>>=0))return"";for(M=M||"utf8";;)switch(M){case"hex":var ce=this,Oe=z,me=$,xe=ce.length;(!me||me<0||xe<me)&&(me=xe);for(var ve="",ge=Oe=!Oe||Oe<0?0:Oe;ge<me;++ge)ve+=oe[ce[ge]];return ve;case"utf8":case"utf-8":return R(this,z,$);case"ascii":var we=this,xe=z,fe=$,Se="";fe=Math.min(we.length,fe);for(var Ce=xe;Ce<fe;++Ce)Se+=String.fromCharCode(127&we[Ce]);return Se;case"latin1":case"binary":var Ne=this,Oe=z,Me=$,Ue="";Me=Math.min(Ne.length,Me);for(var et=Oe;et<Me;++et)Ue+=String.fromCharCode(Ne[et]);return Ue;case"base64":return Fe=this,ee=$,(mt=z)===0&&ee===Fe.length?f.fromByteArray(Fe):f.fromByteArray(Fe.slice(mt,ee));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var Fe=z,mt=$,ut=this.slice(Fe,mt),it="",ft=0;ft<ut.length;ft+=2)it+=String.fromCharCode(ut[ft]+256*ut[ft+1]);return it;default:if(le)throw new TypeError("Unknown encoding: "+M);M=(M+"").toLowerCase(),le=!0}}function j(M,z,$){var ee=M[z];M[z]=M[$],M[$]=ee}function A(M,z,$,ee,le){if(M.length===0)return-1;if(typeof $=="string"?(ee=$,$=0):2147483647<$?$=2147483647:$<-2147483648&&($=-2147483648),($=($=re($=+$)?le?0:M.length-1:$)<0?M.length+$:$)>=M.length){if(le)return-1;$=M.length-1}else if($<0){if(!le)return-1;$=0}if(typeof z=="string"&&(z=h.from(z,ee)),h.isBuffer(z))return z.length===0?-1:N(M,z,$,ee,le);if(typeof z=="number")return z&=255,typeof Uint8Array.prototype.indexOf=="function"?(le?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(M,z,$):N(M,[z],$,ee,le);throw new TypeError("val must be string, number or Buffer")}function N(M,z,$,ee,le){var ce=1,me=M.length,ve=z.length;if(ee!==void 0&&((ee=String(ee).toLowerCase())==="ucs2"||ee==="ucs-2"||ee==="utf16le"||ee==="utf-16le")){if(M.length<2||z.length<2)return-1;me/=ce=2,ve/=2,$/=2}function ge(Ce,Ne){return ce===1?Ce[Ne]:Ce.readUInt16BE(Ne*ce)}if(le)for(var we=-1,xe=$;xe<me;xe++)if(ge(M,xe)===ge(z,we===-1?0:xe-we)){if(xe-(we=we===-1?xe:we)+1===ve)return we*ce}else we!==-1&&(xe-=xe-we),we=-1;else for(xe=$=me<$+ve?me-ve:$;0<=xe;xe--){for(var fe=!0,Se=0;Se<ve;Se++)if(ge(M,xe+Se)!==ge(z,Se)){fe=!1;break}if(fe)return xe}return-1}function C(M,z,$,ee){return Z(function(le){for(var ce=[],me=0;me<le.length;++me)ce.push(255&le.charCodeAt(me));return ce}(z),M,$,ee)}function T(M,z,$,ee){return Z(function(le,ce){for(var me,ve,ge=[],we=0;we<le.length&&!((ce-=2)<0);++we)ve=le.charCodeAt(we),me=ve>>8,ve=ve%256,ge.push(ve),ge.push(me);return ge}(z,M.length-$),M,$,ee)}function R(M,z,$){$=Math.min(M.length,$);for(var ee=[],le=z;le<$;){var ce,me,ve,ge,we=M[le],xe=null,fe=239<we?4:223<we?3:191<we?2:1;if(le+fe<=$)switch(fe){case 1:we<128&&(xe=we);break;case 2:(192&(ce=M[le+1]))==128&&127<(ge=(31&we)<<6|63&ce)&&(xe=ge);break;case 3:ce=M[le+1],me=M[le+2],(192&ce)==128&&(192&me)==128&&2047<(ge=(15&we)<<12|(63&ce)<<6|63&me)&&(ge<55296||57343<ge)&&(xe=ge);break;case 4:ce=M[le+1],me=M[le+2],ve=M[le+3],(192&ce)==128&&(192&me)==128&&(192&ve)==128&&65535<(ge=(15&we)<<18|(63&ce)<<12|(63&me)<<6|63&ve)&&ge<1114112&&(xe=ge)}xe===null?(xe=65533,fe=1):65535<xe&&(xe-=65536,ee.push(xe>>>10&1023|55296),xe=56320|1023&xe),ee.push(xe),le+=fe}var Se=ee,Ce=Se.length;if(Ce<=P)return String.fromCharCode.apply(String,Se);for(var Ne="",Oe=0;Oe<Ce;)Ne+=String.fromCharCode.apply(String,Se.slice(Oe,Oe+=P));return Ne}c.kMaxLength=_,(h.TYPED_ARRAY_SUPPORT=function(){try{var M=new Uint8Array(1),z={foo:function(){return 42}};return Object.setPrototypeOf(z,Uint8Array.prototype),Object.setPrototypeOf(M,z),M.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=m,Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(M,z,$){return z=z,$=$,b(M=M),!(M<=0)&&z!==void 0?typeof $=="string"?w(M).fill(z,$):w(M).fill(z):w(M)},h.allocUnsafe=v,h.allocUnsafeSlow=v,h.isBuffer=function(M){return M!=null&&M._isBuffer===!0&&M!==h.prototype},h.compare=function(M,z){if(K(M,Uint8Array)&&(M=h.from(M,M.offset,M.byteLength)),K(z,Uint8Array)&&(z=h.from(z,z.offset,z.byteLength)),!h.isBuffer(M)||!h.isBuffer(z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(M===z)return 0;for(var $=M.length,ee=z.length,le=0,ce=Math.min($,ee);le<ce;++le)if(M[le]!==z[le]){$=M[le],ee=z[le];break}return $<ee?-1:ee<$?1:0},h.isEncoding=function(M){switch(String(M).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(M,z){if(!Array.isArray(M))throw new TypeError('"list" argument must be an Array of Buffers');if(M.length===0)return h.alloc(0);if(z===void 0)for(le=z=0;le<M.length;++le)z+=M[le].length;for(var $=h.allocUnsafe(z),ee=0,le=0;le<M.length;++le){var ce=M[le];if(K(ce,Uint8Array)&&(ce=h.from(ce)),!h.isBuffer(ce))throw new TypeError('"list" argument must be an Array of Buffers');ce.copy($,ee),ee+=ce.length}return $},h.byteLength=y,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var M=this.length;if(M%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var z=0;z<M;z+=2)j(this,z,z+1);return this},h.prototype.swap32=function(){var M=this.length;if(M%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var z=0;z<M;z+=4)j(this,z,z+3),j(this,z+1,z+2);return this},h.prototype.swap64=function(){var M=this.length;if(M%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var z=0;z<M;z+=8)j(this,z,z+7),j(this,z+1,z+6),j(this,z+2,z+5),j(this,z+3,z+4);return this},h.prototype.toLocaleString=h.prototype.toString=function(){var M=this.length;return M===0?"":arguments.length===0?R(this,0,M):S.apply(this,arguments)},h.prototype.equals=function(M){if(h.isBuffer(M))return this===M||h.compare(this,M)===0;throw new TypeError("Argument must be a Buffer")},h.prototype.inspect=function(){var z="",M=c.INSPECT_MAX_BYTES,z=this.toString("hex",0,M).replace(/(.{2})/g,"$1 ").trim();return this.length>M&&(z+=" ... "),"<Buffer "+z+">"},d&&(h.prototype[d]=h.prototype.inspect),h.prototype.compare=function(M,z,$,ee,le){if(K(M,Uint8Array)&&(M=h.from(M,M.offset,M.byteLength)),!h.isBuffer(M))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof M);if($===void 0&&($=M?M.length:0),ee===void 0&&(ee=0),le===void 0&&(le=this.length),(z=z===void 0?0:z)<0||$>M.length||ee<0||le>this.length)throw new RangeError("out of range index");if(le<=ee&&$<=z)return 0;if(le<=ee)return-1;if($<=z)return 1;if(this===M)return 0;for(var ce=(le>>>=0)-(ee>>>=0),me=($>>>=0)-(z>>>=0),ve=Math.min(ce,me),ge=this.slice(ee,le),we=M.slice(z,$),xe=0;xe<ve;++xe)if(ge[xe]!==we[xe]){ce=ge[xe],me=we[xe];break}return ce<me?-1:me<ce?1:0},h.prototype.includes=function(M,z,$){return this.indexOf(M,z,$)!==-1},h.prototype.indexOf=function(M,z,$){return A(this,M,z,$,!0)},h.prototype.lastIndexOf=function(M,z,$){return A(this,M,z,$,!1)},h.prototype.write=function(M,z,$,ee){if(z===void 0)ee="utf8",$=this.length,z=0;else if($===void 0&&typeof z=="string")ee=z,$=this.length,z=0;else{if(!isFinite(z))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");z>>>=0,isFinite($)?($>>>=0,ee===void 0&&(ee="utf8")):(ee=$,$=void 0)}var le=this.length-z;if(($===void 0||le<$)&&($=le),0<M.length&&($<0||z<0)||z>this.length)throw new RangeError("Attempt to write outside buffer bounds");ee=ee||"utf8";for(var ce,me,ve,ge=!1;;)switch(ee){case"hex":var we=this,xe=M,fe=z,Se=$,Ce=(fe=Number(fe)||0,we.length-fe);(!Se||Ce<(Se=Number(Se)))&&(Se=Ce),(Ce=xe.length)/2<Se&&(Se=Ce/2);for(var Ne=0;Ne<Se;++Ne){var Oe=parseInt(xe.substr(2*Ne,2),16);if(re(Oe))return Ne;we[fe+Ne]=Oe}return Ne;case"utf8":case"utf-8":return Ce=z,ve=$,Z(Q(M,(me=this).length-Ce),me,Ce,ve);case"ascii":return C(this,M,z,$);case"latin1":case"binary":return C(this,M,z,$);case"base64":return me=this,ve=z,ce=$,Z(J(M),me,ve,ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,M,z,$);default:if(ge)throw new TypeError("Unknown encoding: "+ee);ee=(""+ee).toLowerCase(),ge=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function k(M,z,$){if(M%1!=0||M<0)throw new RangeError("offset is not uint");if($<M+z)throw new RangeError("Trying to access beyond buffer length")}function F(M,z,$,ee,le,ce){if(!h.isBuffer(M))throw new TypeError('"buffer" argument must be a Buffer instance');if(le<z||z<ce)throw new RangeError('"value" argument is out of bounds');if($+ee>M.length)throw new RangeError("Index out of range")}function D(M,z,$,ee){if($+ee>M.length)throw new RangeError("Index out of range");if($<0)throw new RangeError("Index out of range")}function q(M,z,$,ee,le){return z=+z,$>>>=0,le||D(M,0,$,4),a.write(M,z,$,ee,23,4),$+4}function H(M,z,$,ee,le){return z=+z,$>>>=0,le||D(M,0,$,8),a.write(M,z,$,ee,52,8),$+8}h.prototype.slice=function(M,z){var $=this.length,$=((M=~~M)<0?(M+=$)<0&&(M=0):$<M&&(M=$),(z=z===void 0?$:~~z)<0?(z+=$)<0&&(z=0):$<z&&(z=$),z<M&&(z=M),this.subarray(M,z));return Object.setPrototypeOf($,h.prototype),$},h.prototype.readUIntLE=function(M,z,$){M>>>=0,z>>>=0,$||k(M,z,this.length);for(var ee=this[M],le=1,ce=0;++ce<z&&(le*=256);)ee+=this[M+ce]*le;return ee},h.prototype.readUIntBE=function(M,z,$){M>>>=0,z>>>=0,$||k(M,z,this.length);for(var ee=this[M+--z],le=1;0<z&&(le*=256);)ee+=this[M+--z]*le;return ee},h.prototype.readUInt8=function(M,z){return M>>>=0,z||k(M,1,this.length),this[M]},h.prototype.readUInt16LE=function(M,z){return M>>>=0,z||k(M,2,this.length),this[M]|this[M+1]<<8},h.prototype.readUInt16BE=function(M,z){return M>>>=0,z||k(M,2,this.length),this[M]<<8|this[M+1]},h.prototype.readUInt32LE=function(M,z){return M>>>=0,z||k(M,4,this.length),(this[M]|this[M+1]<<8|this[M+2]<<16)+16777216*this[M+3]},h.prototype.readUInt32BE=function(M,z){return M>>>=0,z||k(M,4,this.length),16777216*this[M]+(this[M+1]<<16|this[M+2]<<8|this[M+3])},h.prototype.readIntLE=function(M,z,$){M>>>=0,z>>>=0,$||k(M,z,this.length);for(var ee=this[M],le=1,ce=0;++ce<z&&(le*=256);)ee+=this[M+ce]*le;return(le*=128)<=ee&&(ee-=Math.pow(2,8*z)),ee},h.prototype.readIntBE=function(M,z,$){M>>>=0,z>>>=0,$||k(M,z,this.length);for(var ee=z,le=1,ce=this[M+--ee];0<ee&&(le*=256);)ce+=this[M+--ee]*le;return(le*=128)<=ce&&(ce-=Math.pow(2,8*z)),ce},h.prototype.readInt8=function(M,z){return M>>>=0,z||k(M,1,this.length),128&this[M]?-1*(255-this[M]+1):this[M]},h.prototype.readInt16LE=function(M,z){return M>>>=0,z||k(M,2,this.length),z=this[M]|this[M+1]<<8,32768&z?4294901760|z:z},h.prototype.readInt16BE=function(M,z){return M>>>=0,z||k(M,2,this.length),z=this[M+1]|this[M]<<8,32768&z?4294901760|z:z},h.prototype.readInt32LE=function(M,z){return M>>>=0,z||k(M,4,this.length),this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24},h.prototype.readInt32BE=function(M,z){return M>>>=0,z||k(M,4,this.length),this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]},h.prototype.readFloatLE=function(M,z){return M>>>=0,z||k(M,4,this.length),a.read(this,M,!0,23,4)},h.prototype.readFloatBE=function(M,z){return M>>>=0,z||k(M,4,this.length),a.read(this,M,!1,23,4)},h.prototype.readDoubleLE=function(M,z){return M>>>=0,z||k(M,8,this.length),a.read(this,M,!0,52,8)},h.prototype.readDoubleBE=function(M,z){return M>>>=0,z||k(M,8,this.length),a.read(this,M,!1,52,8)},h.prototype.writeUIntLE=function(M,z,$,ee){M=+M,z>>>=0,$>>>=0,ee||F(this,M,z,$,Math.pow(2,8*$)-1,0);var le=1,ce=0;for(this[z]=255&M;++ce<$&&(le*=256);)this[z+ce]=M/le&255;return z+$},h.prototype.writeUIntBE=function(M,z,$,ee){M=+M,z>>>=0,$>>>=0,ee||F(this,M,z,$,Math.pow(2,8*$)-1,0);var le=$-1,ce=1;for(this[z+le]=255&M;0<=--le&&(ce*=256);)this[z+le]=M/ce&255;return z+$},h.prototype.writeUInt8=function(M,z,$){return M=+M,z>>>=0,$||F(this,M,z,1,255,0),this[z]=255&M,z+1},h.prototype.writeUInt16LE=function(M,z,$){return M=+M,z>>>=0,$||F(this,M,z,2,65535,0),this[z]=255&M,this[z+1]=M>>>8,z+2},h.prototype.writeUInt16BE=function(M,z,$){return M=+M,z>>>=0,$||F(this,M,z,2,65535,0),this[z]=M>>>8,this[z+1]=255&M,z+2},h.prototype.writeUInt32LE=function(M,z,$){return M=+M,z>>>=0,$||F(this,M,z,4,4294967295,0),this[z+3]=M>>>24,this[z+2]=M>>>16,this[z+1]=M>>>8,this[z]=255&M,z+4},h.prototype.writeUInt32BE=function(M,z,$){return M=+M,z>>>=0,$||F(this,M,z,4,4294967295,0),this[z]=M>>>24,this[z+1]=M>>>16,this[z+2]=M>>>8,this[z+3]=255&M,z+4},h.prototype.writeIntLE=function(M,z,$,ee){M=+M,z>>>=0,ee||F(this,M,z,$,(ee=Math.pow(2,8*$-1))-1,-ee);var le=0,ce=1,me=0;for(this[z]=255&M;++le<$&&(ce*=256);)M<0&&me===0&&this[z+le-1]!==0&&(me=1),this[z+le]=(M/ce>>0)-me&255;return z+$},h.prototype.writeIntBE=function(M,z,$,ee){M=+M,z>>>=0,ee||F(this,M,z,$,(ee=Math.pow(2,8*$-1))-1,-ee);var le=$-1,ce=1,me=0;for(this[z+le]=255&M;0<=--le&&(ce*=256);)M<0&&me===0&&this[z+le+1]!==0&&(me=1),this[z+le]=(M/ce>>0)-me&255;return z+$},h.prototype.writeInt8=function(M,z,$){return M=+M,z>>>=0,$||F(this,M,z,1,127,-128),this[z]=255&(M=M<0?255+M+1:M),z+1},h.prototype.writeInt16LE=function(M,z,$){return M=+M,z>>>=0,$||F(this,M,z,2,32767,-32768),this[z]=255&M,this[z+1]=M>>>8,z+2},h.prototype.writeInt16BE=function(M,z,$){return M=+M,z>>>=0,$||F(this,M,z,2,32767,-32768),this[z]=M>>>8,this[z+1]=255&M,z+2},h.prototype.writeInt32LE=function(M,z,$){return M=+M,z>>>=0,$||F(this,M,z,4,2147483647,-2147483648),this[z]=255&M,this[z+1]=M>>>8,this[z+2]=M>>>16,this[z+3]=M>>>24,z+4},h.prototype.writeInt32BE=function(M,z,$){return M=+M,z>>>=0,$||F(this,M,z,4,2147483647,-2147483648),this[z]=(M=M<0?4294967295+M+1:M)>>>24,this[z+1]=M>>>16,this[z+2]=M>>>8,this[z+3]=255&M,z+4},h.prototype.writeFloatLE=function(M,z,$){return q(this,M,z,!0,$)},h.prototype.writeFloatBE=function(M,z,$){return q(this,M,z,!1,$)},h.prototype.writeDoubleLE=function(M,z,$){return H(this,M,z,!0,$)},h.prototype.writeDoubleBE=function(M,z,$){return H(this,M,z,!1,$)},h.prototype.copy=function(M,z,$,ee){if(!h.isBuffer(M))throw new TypeError("argument should be a Buffer");if($=$||0,ee||ee===0||(ee=this.length),z>=M.length&&(z=M.length),(ee=0<ee&&ee<$?$:ee)===$||M.length===0||this.length===0)return 0;if((z=z||0)<0)throw new RangeError("targetStart out of bounds");if($<0||$>=this.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("sourceEnd out of bounds");ee>this.length&&(ee=this.length);var le=(ee=M.length-z<ee-$?M.length-z+$:ee)-$;if(this===M&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(z,$,ee);else if(this===M&&$<z&&z<ee)for(var ce=le-1;0<=ce;--ce)M[ce+z]=this[ce+$];else Uint8Array.prototype.set.call(M,this.subarray($,ee),z);return le},h.prototype.fill=function(M,z,$,ee){if(typeof M=="string"){if(typeof z=="string"?(ee=z,z=0,$=this.length):typeof $=="string"&&(ee=$,$=this.length),ee!==void 0&&typeof ee!="string")throw new TypeError("encoding must be a string");if(typeof ee=="string"&&!h.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);var le;M.length===1&&(le=M.charCodeAt(0),(ee==="utf8"&&le<128||ee==="latin1")&&(M=le))}else typeof M=="number"?M&=255:typeof M=="boolean"&&(M=Number(M));if(z<0||this.length<z||this.length<$)throw new RangeError("Out of range index");var ce;if(!($<=z))if(z>>>=0,$=$===void 0?this.length:$>>>0,typeof(M=M||0)=="number")for(ce=z;ce<$;++ce)this[ce]=M;else{var me=h.isBuffer(M)?M:h.from(M,ee),ve=me.length;if(ve===0)throw new TypeError('The value "'+M+'" is invalid for argument "value"');for(ce=0;ce<$-z;++ce)this[ce+z]=me[ce%ve]}return this};var W=/[^+/0-9A-Za-z-_]/g;function Q(M,z){z=z||1/0;for(var $,ee=M.length,le=null,ce=[],me=0;me<ee;++me){if(55295<($=M.charCodeAt(me))&&$<57344){if(!le){if(56319<$){-1<(z-=3)&&ce.push(239,191,189);continue}if(me+1===ee){-1<(z-=3)&&ce.push(239,191,189);continue}le=$;continue}if($<56320){-1<(z-=3)&&ce.push(239,191,189),le=$;continue}$=65536+(le-55296<<10|$-56320)}else le&&-1<(z-=3)&&ce.push(239,191,189);if(le=null,$<128){if(--z<0)break;ce.push($)}else if($<2048){if((z-=2)<0)break;ce.push($>>6|192,63&$|128)}else if($<65536){if((z-=3)<0)break;ce.push($>>12|224,$>>6&63|128,63&$|128)}else{if(!($<1114112))throw new Error("Invalid code point");if((z-=4)<0)break;ce.push($>>18|240,$>>12&63|128,$>>6&63|128,63&$|128)}}return ce}function J(M){return f.toByteArray(function(z){if((z=(z=z.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;z.length%4!=0;)z+="=";return z}(M))}function Z(M,z,$,ee){for(var le=0;le<ee&&!(le+$>=z.length||le>=M.length);++le)z[le+$]=M[le];return le}function K(M,z){return M instanceof z||M!=null&&M.constructor!=null&&M.constructor.name!=null&&M.constructor.name===z.name}function re(M){return M!=M}var oe=function(){for(var M="0123456789abcdef",z=new Array(256),$=0;$<16;++$)for(var ee=16*$,le=0;le<16;++le)z[ee+le]=M[$]+M[le];return z}()}).call(this,t("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:254}],5:[function(t,o,c){o.exports=function(l){if(typeof l!="function")throw TypeError(String(l)+" is not a function");return l}},{}],6:[function(t,o,c){var l=t("../internals/is-object");o.exports=function(f){if(l(f)||f===null)return f;throw TypeError("Can't set "+String(f)+" as a prototype")}},{"../internals/is-object":75}],7:[function(a,o,c){var l=a("../internals/well-known-symbol"),f=a("../internals/object-create"),a=a("../internals/object-define-property"),d=l("unscopables"),_=Array.prototype;_[d]==null&&a.f(_,d,{configurable:!0,value:f(null)}),o.exports=function(w){_[d][w]=!0}},{"../internals/object-create":91,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],8:[function(t,o,c){var l=t("../internals/string-multibyte").charAt;o.exports=function(f,a,d){return a+(d?l(f,a).length:1)}},{"../internals/string-multibyte":125}],9:[function(t,o,c){o.exports=function(l,f,a){if(l instanceof f)return l;throw TypeError("Incorrect "+(a?a+" ":"")+"invocation")}},{}],10:[function(t,o,c){var l=t("../internals/is-object");o.exports=function(f){if(l(f))return f;throw TypeError(String(f)+" is not an object")}},{"../internals/is-object":75}],11:[function(t,o,c){o.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(D,o,c){function l(H){return w(H)&&h(q,m(H))}var f,a=D("../internals/array-buffer-native"),d=D("../internals/descriptors"),_=D("../internals/global"),w=D("../internals/is-object"),h=D("../internals/has"),m=D("../internals/classof"),b=D("../internals/create-non-enumerable-property"),v=D("../internals/redefine"),g=D("../internals/object-define-property").f,p=D("../internals/object-get-prototype-of"),y=D("../internals/object-set-prototype-of"),P=D("../internals/well-known-symbol"),D=D("../internals/uid"),S=_.Int8Array,j=S&&S.prototype,A=_.Uint8ClampedArray,A=A&&A.prototype,N=S&&p(S),C=j&&p(j),T=Object.prototype,R=T.isPrototypeOf,P=P("toStringTag"),k=D("TYPED_ARRAY_TAG"),F=a&&!!y&&m(_.opera)!=="Opera",D=!1,q={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(f in q)_[f]||(F=!1);if((!F||typeof N!="function"||N===Function.prototype)&&(N=function(){throw TypeError("Incorrect invocation")},F))for(f in q)_[f]&&y(_[f],N);if((!F||!C||C===T)&&(C=N.prototype,F))for(f in q)_[f]&&y(_[f].prototype,C);if(F&&p(A)!==C&&y(A,C),d&&!h(C,P))for(f in D=!0,g(C,P,{get:function(){return w(this)?this[k]:void 0}}),q)_[f]&&b(_[f],k,f);o.exports={NATIVE_ARRAY_BUFFER_VIEWS:F,TYPED_ARRAY_TAG:D&&k,aTypedArray:function(H){if(l(H))return H;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(H){if(y){if(R.call(N,H))return H}else for(var W in q)if(h(q,f)&&(W=_[W],W&&(H===W||R.call(W,H))))return H;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(H,W,Q){if(d){if(Q)for(var J in q)J=_[J],J&&h(J.prototype,H)&&delete J.prototype[H];C[H]&&!Q||v(C,H,!Q&&F&&j[H]||W)}},exportTypedArrayStaticMethod:function(H,W,Q){var J,Z;if(d){if(y){if(Q)for(J in q)(Z=_[J])&&h(Z,H)&&delete Z[H];if(N[H]&&!Q)return;try{return v(N,H,!Q&&F&&S[H]||W)}catch{}}for(J in q)!(Z=_[J])||Z[H]&&!Q||v(Z,H,W)}},isView:function(H){return H=m(H),H==="DataView"||h(q,H)},isTypedArray:l,TypedArray:N,TypedArrayPrototype:C}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/uid":147,"../internals/well-known-symbol":150}],13:[function($,o,c){function l(fe){return[255&fe]}function f(fe){return[255&fe,fe>>8&255]}function a(fe){return[255&fe,fe>>8&255,fe>>16&255,fe>>24&255]}function d(fe){return fe[3]<<24|fe[2]<<16|fe[1]<<8|fe[0]}function _(fe){return ce(fe,23,4)}function w(fe){return ce(fe,52,8)}function h(fe,Se){D(fe[K],Se,{get:function(){return W(this)[Se]}})}function m(Ue,Se,Me,Ne){if(Me=T(Me),Ue=W(Ue),Me+Se>Ue.byteLength)throw le(re);var Oe=W(Ue.buffer).bytes,Me=Me+Ue.byteOffset,Ue=Oe.slice(Me,Me+Se);return Ne?Ue:Ue.reverse()}function b(fe,Se,Ce,Ne,Oe,Me){if(Ce=T(Ce),fe=W(fe),Ce+Se>fe.byteLength)throw le(re);for(var Ue=W(fe.buffer).bytes,et=Ce+fe.byteOffset,Fe=Ne(+Oe),mt=0;mt<Se;mt++)Ue[et+mt]=Fe[Me?mt:Se-mt-1]}var v=$("../internals/global"),g=$("../internals/descriptors"),p=$("../internals/array-buffer-native"),y=$("../internals/create-non-enumerable-property"),S=$("../internals/redefine-all"),j=$("../internals/fails"),A=$("../internals/an-instance"),N=$("../internals/to-integer"),C=$("../internals/to-length"),T=$("../internals/to-index"),R=$("../internals/ieee754"),P=$("../internals/object-get-prototype-of"),k=$("../internals/object-set-prototype-of"),F=$("../internals/object-get-own-property-names").f,D=$("../internals/object-define-property").f,q=$("../internals/array-fill"),H=$("../internals/set-to-string-tag"),$=$("../internals/internal-state"),W=$.get,Q=$.set,J="ArrayBuffer",Z="DataView",K="prototype",re="Wrong index",oe=v[J],M=oe,z=v[Z],$=z&&z[K],ee=Object.prototype,le=v.RangeError,ce=R.pack,me=R.unpack;if(p){if(!j(function(){oe(1)})||!j(function(){new oe(-1)})||j(function(){return new oe,new oe(1.5),new oe(NaN),oe.name!=J})){for(var ve,v=(M=function(Ce){return A(this,M),new oe(T(Ce))})[K]=oe[K],ge=F(oe),we=0;ge.length>we;)(ve=ge[we++])in M||y(M,ve,oe[ve]);v.constructor=M}k&&P($)!==ee&&k($,ee);var R=new z(new M(2)),xe=$.setInt8;R.setInt8(0,2147483648),R.setInt8(1,2147483649),!R.getInt8(0)&&R.getInt8(1)||S($,{setInt8:function(Se,Ce){xe.call(this,Se,Ce<<24>>24)},setUint8:function(Se,Ce){xe.call(this,Se,Ce<<24>>24)}},{unsafe:!0})}else M=function(fe){A(this,M,J),fe=T(fe),Q(this,{bytes:q.call(new Array(fe),0),byteLength:fe}),g||(this.byteLength=fe)},z=function(fe,Oe,Ce){A(this,z,Z),A(fe,M,Z);var Ne=W(fe).byteLength,Oe=N(Oe);if(Oe<0||Ne<Oe)throw le("Wrong offset");if(Ne<Oe+(Ce=Ce===void 0?Ne-Oe:C(Ce)))throw le("Wrong length");Q(this,{buffer:fe,byteLength:Ce,byteOffset:Oe}),g||(this.buffer=fe,this.byteLength=Ce,this.byteOffset=Oe)},g&&(h(M,"byteLength"),h(z,"buffer"),h(z,"byteLength"),h(z,"byteOffset")),S(z[K],{getInt8:function(fe){return m(this,1,fe)[0]<<24>>24},getUint8:function(fe){return m(this,1,fe)[0]},getInt16:function(fe){return fe=m(this,2,fe,1<arguments.length?arguments[1]:void 0),(fe[1]<<8|fe[0])<<16>>16},getUint16:function(fe){return fe=m(this,2,fe,1<arguments.length?arguments[1]:void 0),fe[1]<<8|fe[0]},getInt32:function(fe){return d(m(this,4,fe,1<arguments.length?arguments[1]:void 0))},getUint32:function(fe){return d(m(this,4,fe,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(fe){return me(m(this,4,fe,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(fe){return me(m(this,8,fe,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(fe,Se){b(this,1,fe,l,Se)},setUint8:function(fe,Se){b(this,1,fe,l,Se)},setInt16:function(fe,Se){b(this,2,fe,f,Se,2<arguments.length?arguments[2]:void 0)},setUint16:function(fe,Se){b(this,2,fe,f,Se,2<arguments.length?arguments[2]:void 0)},setInt32:function(fe,Se){b(this,4,fe,a,Se,2<arguments.length?arguments[2]:void 0)},setUint32:function(fe,Se){b(this,4,fe,a,Se,2<arguments.length?arguments[2]:void 0)},setFloat32:function(fe,Se){b(this,4,fe,_,Se,2<arguments.length?arguments[2]:void 0)},setFloat64:function(fe,Se){b(this,8,fe,w,Se,2<arguments.length?arguments[2]:void 0)}});H(M,J),H(z,Z),o.exports={ArrayBuffer:M,DataView:z}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/ieee754":66,"../internals/internal-state":71,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/to-index":135,"../internals/to-integer":137,"../internals/to-length":138}],14:[function(t,o,c){var l=t("../internals/to-object"),f=t("../internals/to-absolute-index"),a=t("../internals/to-length"),d=Math.min;o.exports=[].copyWithin||function(g,w){var h=l(this),m=a(h.length),b=f(g,m),v=f(w,m),g=2<arguments.length?arguments[2]:void 0,p=d((g===void 0?m:f(g,m))-v,m-b),y=1;for(v<b&&b<v+p&&(y=-1,v+=p-1,b+=p-1);0<p--;)v in h?h[b]=h[v]:delete h[b],b+=y,v+=y;return h}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],15:[function(t,o,c){var l=t("../internals/to-object"),f=t("../internals/to-absolute-index"),a=t("../internals/to-length");o.exports=function(d){for(var _=l(this),w=a(_.length),m=arguments.length,h=f(1<m?arguments[1]:void 0,w),m=2<m?arguments[2]:void 0,b=m===void 0?w:f(m,w);h<b;)_[h++]=d;return _}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],16:[function(a,o,c){var l=a("../internals/array-iteration").forEach,f=a("../internals/array-method-is-strict"),a=a("../internals/array-method-uses-to-length"),f=f("forEach"),a=a("forEach");o.exports=f&&a?[].forEach:function(d){return l(this,d,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(t,o,c){var l=t("../internals/function-bind-context"),f=t("../internals/to-object"),a=t("../internals/call-with-safe-iteration-closing"),d=t("../internals/is-array-iterator-method"),_=t("../internals/to-length"),w=t("../internals/create-property"),h=t("../internals/get-iterator-method");o.exports=function(A){var b,v,g,p,y,S,j=f(A),A=typeof this=="function"?this:Array,N=arguments.length,C=1<N?arguments[1]:void 0,T=C!==void 0,R=h(j),P=0;if(T&&(C=l(C,2<N?arguments[2]:void 0,2)),R==null||A==Array&&d(R))for(v=new A(b=_(j.length));P<b;P++)S=T?C(j[P],P):j[P],w(v,P,S);else for(y=(p=R.call(j)).next,v=new A;!(g=y.call(p)).done;P++)S=T?a(p,C,[g.value,P],!0):g.value,w(v,P,S);return v.length=P,v}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],18:[function(t,o,c){function l(_){return function(w,h,m){var b,v=f(w),g=a(v.length),p=d(m,g);if(_&&h!=h){for(;p<g;)if((b=v[p++])!=b)return!0}else for(;p<g;p++)if((_||p in v)&&v[p]===h)return _||p||0;return!_&&-1}}var f=t("../internals/to-indexed-object"),a=t("../internals/to-length"),d=t("../internals/to-absolute-index");o.exports={includes:l(!0),indexOf:l(!1)}},{"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138}],19:[function(t,o,c){function l(m){var b=m==1,v=m==2,g=m==3,p=m==4,y=m==6,S=m==5||y;return function(j,A,N,C){for(var T,R,P=d(j),k=a(P),F=f(A,N,3),D=_(k.length),q=0,A=C||w,H=b?A(j,D):v?A(j,0):void 0;q<D;q++)if((S||q in k)&&(R=F(T=k[q],q,P),m)){if(b)H[q]=R;else if(R)switch(m){case 3:return!0;case 5:return T;case 6:return q;case 2:h.call(H,T)}else if(p)return!1}return y?-1:g||p?p:H}}var f=t("../internals/function-bind-context"),a=t("../internals/indexed-object"),d=t("../internals/to-object"),_=t("../internals/to-length"),w=t("../internals/array-species-create"),h=[].push;o.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":55,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],20:[function(m,o,c){var l=m("../internals/to-indexed-object"),f=m("../internals/to-integer"),a=m("../internals/to-length"),h=m("../internals/array-method-is-strict"),m=m("../internals/array-method-uses-to-length"),d=Math.min,_=[].lastIndexOf,w=!!_&&1/[1].lastIndexOf(1,-0)<0,h=h("lastIndexOf"),m=m("indexOf",{ACCESSORS:!0,1:0});o.exports=w||!h||!m?function(b){if(w)return _.apply(this,arguments)||0;var v=l(this),g=a(v.length),p=g-1;for((p=1<arguments.length?d(p,f(arguments[1])):p)<0&&(p=g+p);0<=p;p--)if(p in v&&v[p]===b)return p||0;return-1}:_},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":136,"../internals/to-integer":137,"../internals/to-length":138}],21:[function(t,o,c){var l=t("../internals/fails"),f=t("../internals/well-known-symbol"),a=t("../internals/engine-v8-version"),d=f("species");o.exports=function(_){return 51<=a||!l(function(){var w=[];return(w.constructor={})[d]=function(){return{foo:1}},w[_](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":150}],22:[function(t,o,c){var l=t("../internals/fails");o.exports=function(f,a){var d=[][f];return!!d&&l(function(){d.call(null,a||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(t,o,c){function l(h){throw h}var f=t("../internals/descriptors"),a=t("../internals/fails"),d=t("../internals/has"),_=Object.defineProperty,w={};o.exports=function(h,m){var b,v,g,p;return d(w,h)?w[h]:(b=[][h],v=!!d(m=m||{},"ACCESSORS")&&m.ACCESSORS,g=d(m,0)?m[0]:l,p=d(m,1)?m[1]:void 0,w[h]=!!b&&!a(function(){if(v&&!f)return!0;var y={length:-1};v?_(y,1,{enumerable:!0,get:l}):y[1]=1,b.call(y,g,p)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":61}],24:[function(t,o,c){function l(w){return function(h,m,b,v){f(m);var g=a(h),p=d(g),y=_(g.length),S=w?y-1:0,j=w?-1:1;if(b<2)for(;;){if(S in p){v=p[S],S+=j;break}if(S+=j,w?S<0:y<=S)throw TypeError("Reduce of empty array with no initial value")}for(;w?0<=S:S<y;S+=j)S in p&&(v=m(v,p[S],S,g));return v}}var f=t("../internals/a-function"),a=t("../internals/to-object"),d=t("../internals/indexed-object"),_=t("../internals/to-length");o.exports={left:l(!1),right:l(!0)}},{"../internals/a-function":5,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],25:[function(t,o,c){var l=t("../internals/is-object"),f=t("../internals/is-array"),a=t("../internals/well-known-symbol")("species");o.exports=function(d,_){var w;return new((w=f(d)&&(typeof(w=d.constructor)=="function"&&(w===Array||f(w.prototype))||l(w)&&(w=w[a])===null)?void 0:w)===void 0?Array:w)(_===0?0:_)}},{"../internals/is-array":73,"../internals/is-object":75,"../internals/well-known-symbol":150}],26:[function(t,o,c){var l=t("../internals/an-object");o.exports=function(f,a,d,_){try{return _?a(l(d)[0],d[1]):a(d)}catch(w){throw _=f.return,_!==void 0&&l(_.call(f)),w}}},{"../internals/an-object":10}],27:[function(t,o,c){var l=t("../internals/well-known-symbol")("iterator"),f=!1;try{var a=0,d={next:function(){return{done:!!a++}},return:function(){f=!0}};d[l]=function(){return this},Array.from(d,function(){throw 2})}catch{}o.exports=function(_,w){if(!w&&!f)return!1;var h=!1;try{var m={};m[l]=function(){return{next:function(){return{done:h=!0}}}},_(m)}catch{}return h}},{"../internals/well-known-symbol":150}],28:[function(t,o,c){var l={}.toString;o.exports=function(f){return l.call(f).slice(8,-1)}},{}],29:[function(t,o,c){var l=t("../internals/to-string-tag-support"),f=t("../internals/classof-raw"),a=t("../internals/well-known-symbol")("toStringTag"),d=f(function(){return arguments}())=="Arguments";o.exports=l?f:function(_){var w;return _===void 0?"Undefined":_===null?"Null":typeof(w=function(h,m){try{return h[m]}catch{}}(_=Object(_),a))=="string"?w:d?f(_):(w=f(_))=="Object"&&typeof _.callee=="function"?"Arguments":w}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":143,"../internals/well-known-symbol":150}],30:[function(g,o,c){var l=g("../internals/object-define-property").f,f=g("../internals/object-create"),a=g("../internals/redefine-all"),d=g("../internals/function-bind-context"),_=g("../internals/an-instance"),w=g("../internals/iterate"),h=g("../internals/define-iterator"),m=g("../internals/set-species"),b=g("../internals/descriptors"),v=g("../internals/internal-metadata").fastKey,g=g("../internals/internal-state"),p=g.set,y=g.getterFor;o.exports={getConstructor:function(S,j,A,N){function C(k,F,D){var q,H=P(k),W=T(k,F);return W?W.value=D:(H.last=W={index:q=v(F,!0),key:F,value:D,previous:F=H.last,next:void 0,removed:!1},H.first||(H.first=W),F&&(F.next=W),b?H.size++:k.size++,q!=="F"&&(H.index[q]=W)),k}function T(q,F){var D,q=P(q),H=v(F);if(H!=="F")return q.index[H];for(D=q.first;D;D=D.next)if(D.key==F)return D}var R=S(function(k,F){_(k,R,j),p(k,{type:j,index:f(null),first:void 0,last:void 0,size:0}),b||(k.size=0),F!=null&&w(F,k[N],k,A)}),P=y(j);return a(R.prototype,{clear:function(){for(var k=P(this),F=k.index,D=k.first;D;)D.removed=!0,D.previous&&(D.previous=D.previous.next=void 0),delete F[D.index],D=D.next;k.first=k.last=void 0,b?k.size=0:this.size=0},delete:function(H){var F,D,q=P(this),H=T(this,H);return H&&(F=H.next,D=H.previous,delete q.index[H.index],H.removed=!0,D&&(D.next=F),F&&(F.previous=D),q.first==H&&(q.first=F),q.last==H&&(q.last=D),b?q.size--:this.size--),!!H},forEach:function(k){for(var F,D=P(this),q=d(k,1<arguments.length?arguments[1]:void 0,3);F=F?F.next:D.first;)for(q(F.value,F.key,this);F&&F.removed;)F=F.previous},has:function(k){return!!T(this,k)}}),a(R.prototype,A?{get:function(k){return k=T(this,k),k&&k.value},set:function(k,F){return C(this,k===0?0:k,F)}}:{add:function(k){return C(this,k=k===0?0:k,k)}}),b&&l(R.prototype,"size",{get:function(){return P(this).size}}),R},setStrong:function(S,j,A){var N=j+" Iterator",C=y(j),T=y(N);h(S,j,function(R,P){p(this,{type:N,target:R,state:C(R),kind:P,last:void 0})},function(){for(var R=T(this),P=R.kind,k=R.last;k&&k.removed;)k=k.previous;return R.target&&(R.last=k=k?k.next:R.state.first)?P=="keys"?{value:k.key,done:!1}:P=="values"?{value:k.value,done:!1}:{value:[k.key,k.value],done:!1}:{value:R.target=void 0,done:!0}},A?"entries":"values",!A,!0),m(j)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":55,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/iterate":78,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/redefine-all":109,"../internals/set-species":118}],31:[function(p,o,c){function l(C){return C.frozen||(C.frozen=new f)}function f(){this.entries=[]}function a(C,T){return j(C.entries,function(R){return R[0]===T})}var d=p("../internals/redefine-all"),_=p("../internals/internal-metadata").getWeakData,w=p("../internals/an-object"),h=p("../internals/is-object"),m=p("../internals/an-instance"),b=p("../internals/iterate"),v=p("../internals/array-iteration"),g=p("../internals/has"),p=p("../internals/internal-state"),y=p.set,S=p.getterFor,j=v.find,A=v.findIndex,N=0;f.prototype={get:function(C){if(C=a(this,C),C)return C[1]},has:function(C){return!!a(this,C)},set:function(C,T){var R=a(this,C);R?R[1]=T:this.entries.push([C,T])},delete:function(C){var T=A(this.entries,function(R){return R[0]===C});return~T&&this.entries.splice(T,1),!!~T}},o.exports={getConstructor:function(C,T,R,P){function k(q,H,W){var Q=D(q),J=_(w(H),!0);return J===!0?l(Q).set(H,W):J[Q.id]=W,q}var F=C(function(q,H){m(q,F,T),y(q,{type:T,id:N++,frozen:void 0}),H!=null&&b(H,q[P],q,R)}),D=S(T);return d(F.prototype,{delete:function(q){var H,W=D(this);return!!h(q)&&((H=_(q))===!0?l(W).delete(q):H&&g(H,W.id)&&delete H[W.id])},has:function(q){var H,W=D(this);return!!h(q)&&((H=_(q))===!0?l(W).has(q):H&&g(H,W.id))}}),d(F.prototype,R?{get:function(q){var H,W=D(this);if(h(q))return(H=_(q))===!0?l(W).get(q):H?H[W.id]:void 0},set:function(q,H){return k(this,q,H)}}:{add:function(q){return k(this,q,!0)}}),F}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":61,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine-all":109}],32:[function(t,o,c){var l=t("../internals/export"),f=t("../internals/global"),a=t("../internals/is-forced"),d=t("../internals/redefine"),_=t("../internals/internal-metadata"),w=t("../internals/iterate"),h=t("../internals/an-instance"),m=t("../internals/is-object"),b=t("../internals/fails"),v=t("../internals/check-correctness-of-iteration"),g=t("../internals/set-to-string-tag"),p=t("../internals/inherit-if-required");o.exports=function(y,S,j){function A(J){var Z=H[J];d(H,J,J=="add"?function(K){return Z.call(this,K===0?0:K),this}:J=="delete"?function(K){return!(F&&!m(K))&&Z.call(this,K===0?0:K)}:J=="get"?function(K){return F&&!m(K)?void 0:Z.call(this,K===0?0:K)}:J=="has"?function(K){return!(F&&!m(K))&&Z.call(this,K===0?0:K)}:function(K,re){return Z.call(this,K===0?0:K,re),this})}var N,C,T,R,P,k=y.indexOf("Map")!==-1,F=y.indexOf("Weak")!==-1,D=k?"set":"add",q=f[y],H=q&&q.prototype,W=q,Q={};return a(y,typeof q!="function"||!(F||H.forEach&&!b(function(){new q().entries().next()})))?(W=j.getConstructor(S,y,k,D),_.REQUIRED=!0):a(y,!0)&&(C=(N=new W)[D](F?{}:-0,1)!=N,T=b(function(){N.has(1)}),R=v(function(J){new q(J)}),P=!F&&b(function(){for(var J=new q,Z=5;Z--;)J[D](Z,Z);return!J.has(-0)}),R||(((W=S(function(J,Z){return h(J,W,y),J=p(new q,J,W),Z!=null&&w(Z,J[D],J,k),J})).prototype=H).constructor=W),(T||P)&&(A("delete"),A("has"),k&&A("get")),(P||C)&&A(D),F&&H.clear&&delete H.clear),Q[y]=W,l({global:!0,forced:W!=q},Q),g(W,y),F||j.setStrong(W,y,k),W}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-metadata":70,"../internals/is-forced":74,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine":110,"../internals/set-to-string-tag":119}],33:[function(t,o,c){var l=t("../internals/has"),f=t("../internals/own-keys"),a=t("../internals/object-get-own-property-descriptor"),d=t("../internals/object-define-property");o.exports=function(_,w){for(var h=f(w),m=d.f,b=a.f,v=0;v<h.length;v++){var g=h[v];l(_,g)||m(_,g,b(w,g))}}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/own-keys":105}],34:[function(t,o,c){var l=t("../internals/well-known-symbol")("match");o.exports=function(f){var a=/./;try{"/./"[f](a)}catch{try{return a[l]=!1,"/./"[f](a)}catch{}}return!1}},{"../internals/well-known-symbol":150}],35:[function(t,o,c){t=t("../internals/fails"),o.exports=!t(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},{"../internals/fails":51}],36:[function(t,o,c){var l=t("../internals/require-object-coercible"),f=/"/g;o.exports=function(h,d,_,w){var h=String(l(h)),m="<"+d;return _!==""&&(m+=" "+_+'="'+String(w).replace(f,"&quot;")+'"'),m+">"+h+"</"+d+">"}},{"../internals/require-object-coercible":115}],37:[function(t,o,c){function l(){return this}var f=t("../internals/iterators-core").IteratorPrototype,a=t("../internals/object-create"),d=t("../internals/create-property-descriptor"),_=t("../internals/set-to-string-tag"),w=t("../internals/iterators");o.exports=function(h,m,b){return m+=" Iterator",h.prototype=a(f,{next:d(1,b)}),_(h,m,!1,!0),w[m]=l,h}},{"../internals/create-property-descriptor":39,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-create":91,"../internals/set-to-string-tag":119}],38:[function(t,o,c){var l=t("../internals/descriptors"),f=t("../internals/object-define-property"),a=t("../internals/create-property-descriptor");o.exports=l?function(d,_,w){return f.f(d,_,a(1,w))}:function(d,_,w){return d[_]=w,d}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":93}],39:[function(t,o,c){o.exports=function(l,f){return{enumerable:!(1&l),configurable:!(2&l),writable:!(4&l),value:f}}},{}],40:[function(t,o,c){var l=t("../internals/to-primitive"),f=t("../internals/object-define-property"),a=t("../internals/create-property-descriptor");o.exports=function(d,_,w){_=l(_),_ in d?f.f(d,_,a(0,w)):d[_]=w}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":93,"../internals/to-primitive":142}],41:[function(p,o,c){function l(){return this}var f=p("../internals/export"),a=p("../internals/create-iterator-constructor"),d=p("../internals/object-get-prototype-of"),_=p("../internals/object-set-prototype-of"),w=p("../internals/set-to-string-tag"),h=p("../internals/create-non-enumerable-property"),m=p("../internals/redefine"),b=p("../internals/well-known-symbol"),v=p("../internals/is-pure"),g=p("../internals/iterators"),p=p("../internals/iterators-core"),y=p.IteratorPrototype,S=p.BUGGY_SAFARI_ITERATORS,j=b("iterator"),A="values",N="entries";o.exports=function(C,T,R,Q,k,F,D){a(R,T,Q);function q(M){if(M===k&&re)return re;if(!S&&M in Z)return Z[M];switch(M){case"keys":case A:case N:return function(){return new R(this,M)}}return function(){return new R(this)}}var H,W,Q=T+" Iterator",J=!1,Z=C.prototype,K=Z[j]||Z["@@iterator"]||k&&Z[k],re=!S&&K||q(k),oe=T=="Array"&&Z.entries||K;if(oe&&(oe=d(oe.call(new C)),y!==Object.prototype&&oe.next&&(v||d(oe)===y||(_?_(oe,y):typeof oe[j]!="function"&&h(oe,j,l)),w(oe,Q,!0,!0),v&&(g[Q]=l))),k==A&&K&&K.name!==A&&(J=!0,re=function(){return K.call(this)}),v&&!D||Z[j]===re||h(Z,j,re),g[T]=re,k)if(H={values:q(A),keys:F?re:q("keys"),entries:q(N)},D)for(W in H)!S&&!J&&W in Z||m(Z,W,H[W]);else f({target:T,proto:!0,forced:S||J},H);return H}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":76,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150}],42:[function(t,o,c){var l=t("../internals/path"),f=t("../internals/has"),a=t("../internals/well-known-symbol-wrapped"),d=t("../internals/object-define-property").f;o.exports=function(_){var w=l.Symbol||(l.Symbol={});f(w,_)||d(w,_,{value:a.f(_)})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/path":106,"../internals/well-known-symbol-wrapped":149}],43:[function(t,o,c){t=t("../internals/fails"),o.exports=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(f,o,c){var l=f("../internals/global"),f=f("../internals/is-object"),a=l.document,d=f(a)&&f(a.createElement);o.exports=function(_){return d?a.createElement(_):{}}},{"../internals/global":60,"../internals/is-object":75}],45:[function(t,o,c){o.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(t,o,c){t=t("../internals/engine-user-agent"),o.exports=/(iphone|ipod|ipad).*applewebkit/i.test(t)},{"../internals/engine-user-agent":47}],47:[function(t,o,c){t=t("../internals/get-built-in"),o.exports=t("navigator","userAgent")||""},{"../internals/get-built-in":57}],48:[function(a,o,c){var l,f,d=a("../internals/global"),a=a("../internals/engine-user-agent"),d=d.process,d=d&&d.versions,d=d&&d.v8;d?f=(l=d.split("."))[0]+l[1]:a&&(!(l=a.match(/Edge\/(\d+)/))||74<=l[1])&&(l=a.match(/Chrome\/(\d+)/))&&(f=l[1]),o.exports=f&&+f},{"../internals/engine-user-agent":47,"../internals/global":60}],49:[function(t,o,c){o.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(t,o,c){var l=t("../internals/global"),f=t("../internals/object-get-own-property-descriptor").f,a=t("../internals/create-non-enumerable-property"),d=t("../internals/redefine"),_=t("../internals/set-global"),w=t("../internals/copy-constructor-properties"),h=t("../internals/is-forced");o.exports=function(m,b){var v,g,p,y=m.target,S=m.global,j=m.stat,A=S?l:j?l[y]||_(y,{}):(l[y]||{}).prototype;if(A)for(v in b){if(g=b[v],p=m.noTargetGet?(p=f(A,v))&&p.value:A[v],!h(S?v:y+(j?".":"#")+v,m.forced)&&p!==void 0){if(typeof g==typeof p)continue;w(g,p)}(m.sham||p&&p.sham)&&a(g,"sham",!0),d(A,v,g,m)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/is-forced":74,"../internals/object-get-own-property-descriptor":94,"../internals/redefine":110,"../internals/set-global":117}],51:[function(t,o,c){o.exports=function(l){try{return!!l()}catch{return!0}}},{}],52:[function(b,o,c){b("../modules/es.regexp.exec");var l=b("../internals/redefine"),f=b("../internals/fails"),a=b("../internals/well-known-symbol"),d=b("../internals/regexp-exec"),_=b("../internals/create-non-enumerable-property"),w=a("species"),h=!f(function(){var p=/./;return p.exec=function(){var y=[];return y.groups={a:"7"},y},"".replace(p,"$<a>")!=="7"}),m="a".replace(/./,"$0")==="$0",b=a("replace"),v=!!/./[b]&&/./[b]("a","$0")==="",g=!f(function(){var y=/(?:)/,p=y.exec,y=(y.exec=function(){return p.apply(this,arguments)},"ab".split(y));return y.length!==2||y[0]!=="a"||y[1]!=="b"});o.exports=function(p,y,S,j){var A,N,C=a(p),T=!f(function(){var P={};return P[C]=function(){return 7},""[p](P)!=7}),R=T&&!f(function(){var P=!1,k=/a/;return p==="split"&&((k={constructor:{}}).constructor[w]=function(){return k},k.flags="",k[C]=/./[C]),k.exec=function(){return P=!0,null},k[C](""),!P});T&&R&&(p!=="replace"||h&&m&&!v)&&(p!=="split"||g)||(A=/./[C],S=(R=S(C,""[p],function(P,k,F,D,q){return k.exec===d?T&&!q?{done:!0,value:A.call(k,F,D)}:{done:!0,value:P.call(F,k,D)}:{done:!1}},{REPLACE_KEEPS_$0:m,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:v}))[0],N=R[1],l(String.prototype,p,S),l(RegExp.prototype,C,y==2?function(P,k){return N.call(P,this,k)}:function(P){return N.call(P,this)})),j&&_(RegExp.prototype[C],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-exec":112,"../internals/well-known-symbol":150,"../modules/es.regexp.exec":195}],53:[function(t,o,c){function l(_,w,h,m,b,v,g,p){for(var y,S=b,j=0,A=!!g&&d(g,p,3);j<m;){if(j in h){if(y=A?A(h[j],j,w):h[j],0<v&&f(y))S=l(_,w,y,a(y.length),S,v-1)-1;else{if(9007199254740991<=S)throw TypeError("Exceed the acceptable array length");_[S]=y}S++}j++}return S}var f=t("../internals/is-array"),a=t("../internals/to-length"),d=t("../internals/function-bind-context");o.exports=l},{"../internals/function-bind-context":55,"../internals/is-array":73,"../internals/to-length":138}],54:[function(t,o,c){t=t("../internals/fails"),o.exports=!t(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],55:[function(t,o,c){var l=t("../internals/a-function");o.exports=function(f,a,d){if(l(f),a===void 0)return f;switch(d){case 0:return function(){return f.call(a)};case 1:return function(_){return f.call(a,_)};case 2:return function(_,w){return f.call(a,_,w)};case 3:return function(_,w,h){return f.call(a,_,w,h)}}return function(){return f.apply(a,arguments)}}},{"../internals/a-function":5}],56:[function(t,o,c){var l=t("../internals/a-function"),f=t("../internals/is-object"),a=[].slice,d={};o.exports=Function.bind||function(_){var w=l(this),h=a.call(arguments,1),m=function(){var b=h.concat(a.call(arguments));if(this instanceof m){var v=w,g=b.length,p=b;if(!(g in d)){for(var y=[],S=0;S<g;S++)y[S]="a["+S+"]";d[g]=Function("C,a","return new C("+y.join(",")+")")}return d[g](v,p)}return w.apply(_,b)};return f(w.prototype)&&(m.prototype=w.prototype),m}},{"../internals/a-function":5,"../internals/is-object":75}],57:[function(t,o,c){function l(d){return typeof d=="function"?d:void 0}var f=t("../internals/path"),a=t("../internals/global");o.exports=function(d,_){return arguments.length<2?l(f[d])||l(a[d]):f[d]&&f[d][_]||a[d]&&a[d][_]}},{"../internals/global":60,"../internals/path":106}],58:[function(t,o,c){var l=t("../internals/classof"),f=t("../internals/iterators"),a=t("../internals/well-known-symbol")("iterator");o.exports=function(d){if(d!=null)return d[a]||d["@@iterator"]||f[l(d)]}},{"../internals/classof":29,"../internals/iterators":80,"../internals/well-known-symbol":150}],59:[function(t,o,c){var l=t("../internals/an-object"),f=t("../internals/get-iterator-method");o.exports=function(a){var d=f(a);if(typeof d!="function")throw TypeError(String(a)+" is not iterable");return l(d.call(a))}},{"../internals/an-object":10,"../internals/get-iterator-method":58}],60:[function(t,o,c){(function(l){function f(a){return a&&a.Math==Math&&a}o.exports=f(typeof globalThis=="object"&&globalThis)||f(typeof window=="object"&&window)||f(typeof self=="object"&&self)||f(typeof l=="object"&&l)||Function("return this")()}).call(this,typeof Oh<"u"?Oh:typeof self<"u"?self:typeof window<"u"?window:{})},{}],61:[function(t,o,c){var l={}.hasOwnProperty;o.exports=function(f,a){return l.call(f,a)}},{}],62:[function(t,o,c){o.exports={}},{}],63:[function(t,o,c){var l=t("../internals/global");o.exports=function(f,a){var d=l.console;d&&d.error&&(arguments.length===1?d.error(f):d.error(f,a))}},{"../internals/global":60}],64:[function(t,o,c){t=t("../internals/get-built-in"),o.exports=t("document","documentElement")},{"../internals/get-built-in":57}],65:[function(t,o,c){var l=t("../internals/descriptors"),f=t("../internals/fails"),a=t("../internals/document-create-element");o.exports=!l&&!f(function(){return Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],66:[function(t,o,c){var l=Math.abs,f=Math.pow,a=Math.floor,d=Math.log,_=Math.LN2;o.exports={pack:function(w,h,S){var b,v,g,p=new Array(S),y=8*S-h-1,S=(1<<y)-1,j=S>>1,A=h===23?f(2,-24)-f(2,-77):0,N=w<0||w===0&&1/w<0?1:0,C=0;for((w=l(w))!=w||w===1/0?(v=w!=w?1:0,b=S):(b=a(d(w)/_),w*(g=f(2,-b))<1&&(b--,g*=2),2<=(w+=1<=b+j?A/g:A*f(2,1-j))*g&&(b++,g/=2),S<=b+j?(v=0,b=S):1<=b+j?(v=(w*g-1)*f(2,h),b+=j):(v=w*f(2,j-1)*f(2,h),b=0));8<=h;p[C++]=255&v,v/=256,h-=8);for(b=b<<h|v,y+=h;0<y;p[C++]=255&b,b/=256,y-=8);return p[--C]|=128*N,p},unpack:function(w,h){var m,b=w.length,S=8*b-h-1,v=(1<<S)-1,g=v>>1,p=S-7,y=b-1,S=w[y--],j=127&S;for(S>>=7;0<p;j=256*j+w[y],y--,p-=8);for(m=j&(1<<-p)-1,j>>=-p,p+=h;0<p;m=256*m+w[y],y--,p-=8);if(j===0)j=1-g;else{if(j===v)return m?NaN:S?-1/0:1/0;m+=f(2,h),j-=g}return(S?-1:1)*m*f(2,j-h)}}},{}],67:[function(t,o,c){var l=t("../internals/fails"),f=t("../internals/classof-raw"),a="".split;o.exports=l(function(){return!Object("z").propertyIsEnumerable(0)})?function(d){return f(d)=="String"?a.call(d,""):Object(d)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],68:[function(t,o,c){var l=t("../internals/is-object"),f=t("../internals/object-set-prototype-of");o.exports=function(a,d,_){return f&&typeof(d=d.constructor)=="function"&&d!==_&&l(d=d.prototype)&&d!==_.prototype&&f(a,d),a}},{"../internals/is-object":75,"../internals/object-set-prototype-of":102}],69:[function(l,o,c){var l=l("../internals/shared-store"),f=Function.toString;typeof l.inspectSource!="function"&&(l.inspectSource=function(a){return f.call(a)}),o.exports=l.inspectSource},{"../internals/shared-store":121}],70:[function(t,o,c){function l(p){_(p,m,{value:{objectID:"O"+ ++b,weakData:{}}})}var f=t("../internals/hidden-keys"),a=t("../internals/is-object"),d=t("../internals/has"),_=t("../internals/object-define-property").f,w=t("../internals/uid"),h=t("../internals/freezing"),m=w("meta"),b=0,v=Object.isExtensible||function(){return!0},g=o.exports={REQUIRED:!1,fastKey:function(p,y){if(!a(p))return typeof p=="symbol"?p:(typeof p=="string"?"S":"P")+p;if(!d(p,m)){if(!v(p))return"F";if(!y)return"E";l(p)}return p[m].objectID},getWeakData:function(p,y){if(!d(p,m)){if(!v(p))return!0;if(!y)return!1;l(p)}return p[m].weakData},onFreeze:function(p){return h&&g.REQUIRED&&v(p)&&!d(p,m)&&l(p),p}};f[m]=!0},{"../internals/freezing":54,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/uid":147}],71:[function(S,o,c){var l,f,a,d,_,w,h,m,b=S("../internals/native-weak-map"),j=S("../internals/global"),v=S("../internals/is-object"),g=S("../internals/create-non-enumerable-property"),p=S("../internals/has"),y=S("../internals/shared-key"),S=S("../internals/hidden-keys"),j=j.WeakMap;h=b?(l=new j,f=l.get,a=l.has,d=l.set,_=function(A,N){return d.call(l,A,N),N},w=function(A){return f.call(l,A)||{}},function(A){return a.call(l,A)}):(S[m=y("state")]=!0,_=function(A,N){return g(A,m,N),N},w=function(A){return p(A,m)?A[m]:{}},function(A){return p(A,m)}),o.exports={set:_,get:w,has:h,enforce:function(A){return h(A)?w(A):_(A,{})},getterFor:function(A){return function(N){if(v(N)&&(N=w(N)).type===A)return N;throw TypeError("Incompatible receiver, "+A+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/shared-key":120}],72:[function(t,o,c){var l=t("../internals/well-known-symbol"),f=t("../internals/iterators"),a=l("iterator"),d=Array.prototype;o.exports=function(_){return _!==void 0&&(f.Array===_||d[a]===_)}},{"../internals/iterators":80,"../internals/well-known-symbol":150}],73:[function(t,o,c){var l=t("../internals/classof-raw");o.exports=Array.isArray||function(f){return l(f)=="Array"}},{"../internals/classof-raw":28}],74:[function(t,o,c){function l(m,b){return(m=_[d(m)])==h||m!=w&&(typeof b=="function"?f(b):!!b)}var f=t("../internals/fails"),a=/#|\.prototype\./,d=l.normalize=function(m){return String(m).replace(a,".").toLowerCase()},_=l.data={},w=l.NATIVE="N",h=l.POLYFILL="P";o.exports=l},{"../internals/fails":51}],75:[function(t,o,c){o.exports=function(l){return typeof l=="object"?l!==null:typeof l=="function"}},{}],76:[function(t,o,c){o.exports=!1},{}],77:[function(t,o,c){var l=t("../internals/is-object"),f=t("../internals/classof-raw"),a=t("../internals/well-known-symbol")("match");o.exports=function(d){var _;return l(d)&&((_=d[a])!==void 0?!!_:f(d)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":75,"../internals/well-known-symbol":150}],78:[function(t,o,c){function l(m,b){this.stopped=m,this.result=b}var f=t("../internals/an-object"),a=t("../internals/is-array-iterator-method"),d=t("../internals/to-length"),_=t("../internals/function-bind-context"),w=t("../internals/get-iterator-method"),h=t("../internals/call-with-safe-iteration-closing");(o.exports=function(m,b,v,g,p){var y,S,j,A,N,C,T=_(b,v,g?2:1);if(p)y=m;else{if(typeof(b=w(m))!="function")throw TypeError("Target is not iterable");if(a(b)){for(S=0,j=d(m.length);S<j;S++)if((A=g?T(f(C=m[S])[0],C[1]):T(m[S]))&&A instanceof l)return A;return new l(!1)}y=b.call(m)}for(N=y.next;!(C=N.call(y)).done;)if(typeof(A=h(y,T,C.value,g))=="object"&&A&&A instanceof l)return A;return new l(!1)}).stop=function(m){return new l(!0,m)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138}],79:[function(w,o,c){var l,f,a=w("../internals/object-get-prototype-of"),d=w("../internals/create-non-enumerable-property"),_=w("../internals/has"),h=w("../internals/well-known-symbol"),w=w("../internals/is-pure"),h=h("iterator"),m=!1;[].keys&&("next"in(f=[].keys())?(a=a(a(f)))!==Object.prototype&&(l=a):m=!0),l==null&&(l={}),w||_(l,h)||d(l,h,function(){return this}),o.exports={IteratorPrototype:l,BUGGY_SAFARI_ITERATORS:m}},{"../internals/create-non-enumerable-property":38,"../internals/has":61,"../internals/is-pure":76,"../internals/object-get-prototype-of":98,"../internals/well-known-symbol":150}],80:[function(t,o,c){o.exports={}},{}],81:[function(t,o,c){o.exports=Math.sign||function(l){return(l=+l)==0||l!=l?l:l<0?-1:1}},{}],82:[function(g,o,c){var l,f,a,d,_,w,h,m,b=g("../internals/global"),N=g("../internals/object-get-own-property-descriptor").f,A=g("../internals/classof-raw"),v=g("../internals/task").set,g=g("../internals/engine-is-ios"),p=b.MutationObserver||b.WebKitMutationObserver,y=b.process,S=b.Promise,j=A(y)=="process",A=N(b,"queueMicrotask"),N=A&&A.value;N||(l=function(){var C,T;for(j&&(C=y.domain)&&C.exit();f;){T=f.fn,f=f.next;try{T()}catch(R){throw f?d():a=void 0,R}}a=void 0,C&&C.enter()},d=j?function(){y.nextTick(l)}:p&&!g?(_=!0,w=document.createTextNode(""),new p(l).observe(w,{characterData:!0}),function(){w.data=_=!_}):S&&S.resolve?(h=S.resolve(void 0),m=h.then,function(){m.call(h,l)}):function(){v.call(b,l)}),o.exports=N||function(C){C={fn:C,next:void 0},a&&(a.next=C),f||(f=C,d()),a=C}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":60,"../internals/object-get-own-property-descriptor":94,"../internals/task":132}],83:[function(t,o,c){t=t("../internals/global"),o.exports=t.Promise},{"../internals/global":60}],84:[function(t,o,c){t=t("../internals/fails"),o.exports=!!Object.getOwnPropertySymbols&&!t(function(){return!String(Symbol())})},{"../internals/fails":51}],85:[function(t,o,c){var l=t("../internals/fails"),f=t("../internals/well-known-symbol"),a=t("../internals/is-pure"),d=f("iterator");o.exports=!l(function(){var _=new URL("b?a=1&b=2&c=3","http://a"),w=_.searchParams,h="";return _.pathname="c%20d",w.forEach(function(m,b){w.delete("b"),h+=b+m}),a&&!_.toJSON||!w.sort||_.href!=="http://a/c%20d?a=1&c=3"||w.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!w[d]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://").host!=="xn--e1aybc"||new URL("http://a#").hash!=="#%D0%B1"||h!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":76,"../internals/well-known-symbol":150}],86:[function(l,o,c){var f=l("../internals/global"),l=l("../internals/inspect-source"),f=f.WeakMap;o.exports=typeof f=="function"&&/native code/.test(l(f))},{"../internals/global":60,"../internals/inspect-source":69}],87:[function(t,o,c){function l(a){var d,_;this.promise=new a(function(w,h){if(d!==void 0||_!==void 0)throw TypeError("Bad Promise constructor");d=w,_=h}),this.resolve=f(d),this.reject=f(_)}var f=t("../internals/a-function");o.exports.f=function(a){return new l(a)}},{"../internals/a-function":5}],88:[function(t,o,c){var l=t("../internals/is-regexp");o.exports=function(f){if(l(f))throw TypeError("The method doesn't accept regular expressions");return f}},{"../internals/is-regexp":77}],89:[function(t,o,c){var l=t("../internals/global").isFinite;o.exports=Number.isFinite||function(f){return typeof f=="number"&&l(f)}},{"../internals/global":60}],90:[function(t,o,c){var l=t("../internals/descriptors"),f=t("../internals/fails"),a=t("../internals/object-keys"),d=t("../internals/object-get-own-property-symbols"),_=t("../internals/object-property-is-enumerable"),w=t("../internals/to-object"),h=t("../internals/indexed-object"),m=Object.assign,b=Object.defineProperty;o.exports=!m||f(function(){var v,g,p,y;return!(!l||m({b:1},m(b({},"a",{enumerable:!0,get:function(){b(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(g={},y="abcdefghijklmnopqrst",(v={})[p=Symbol()]=7,y.split("").forEach(function(S){g[S]=S}),m({},v)[p]!=7||a(m({},g)).join("")!=y)})?function(v,g){for(var p=w(v),y=arguments.length,S=1,j=d.f,A=_.f;S<y;)for(var N,C=h(arguments[S++]),T=j?a(C).concat(j(C)):a(C),R=T.length,P=0;P<R;)N=T[P++],l&&!A.call(C,N)||(p[N]=C[N]);return p}:m},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":67,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-object":139}],91:[function(b,o,c){function l(){}var f,a=b("../internals/an-object"),d=b("../internals/object-define-properties"),_=b("../internals/enum-bug-keys"),w=b("../internals/hidden-keys"),h=b("../internals/html"),m=b("../internals/document-create-element"),b=b("../internals/shared-key"),v="prototype",g="script",p=b("IE_PROTO"),y=function(j){return"<"+g+">"+j+"</"+g+">"},S=function(){try{f=document.domain&&new ActiveXObject("htmlfile")}catch{}S=f?((j=f).write(y("")),j.close(),A=j.parentWindow.Object,j=null,A):(j=m("iframe"),A="java"+g+":",j.style.display="none",h.appendChild(j),j.src=String(A),(A=j.contentWindow.document).open(),A.write(y("document.F=Object")),A.close(),A.F);for(var j,A,N=_.length;N--;)delete S[v][_[N]];return S()};w[p]=!0,o.exports=Object.create||function(j,A){var N;return j!==null?(l[v]=a(j),N=new l,l[v]=null,N[p]=j):N=S(),A===void 0?N:d(N,A)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":62,"../internals/html":64,"../internals/object-define-properties":92,"../internals/shared-key":120}],92:[function(t,o,c){var l=t("../internals/descriptors"),f=t("../internals/object-define-property"),a=t("../internals/an-object"),d=t("../internals/object-keys");o.exports=l?Object.defineProperties:function(_,w){a(_);for(var h,m=d(w),b=m.length,v=0;v<b;)f.f(_,h=m[v++],w[h]);return _}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":93,"../internals/object-keys":100}],93:[function(t,o,c){var l=t("../internals/descriptors"),f=t("../internals/ie8-dom-define"),a=t("../internals/an-object"),d=t("../internals/to-primitive"),_=Object.defineProperty;c.f=l?_:function(w,h,m){if(a(w),h=d(h,!0),a(m),f)try{return _(w,h,m)}catch{}if("get"in m||"set"in m)throw TypeError("Accessors not supported");return"value"in m&&(w[h]=m.value),w}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":65,"../internals/to-primitive":142}],94:[function(t,o,c){var l=t("../internals/descriptors"),f=t("../internals/object-property-is-enumerable"),a=t("../internals/create-property-descriptor"),d=t("../internals/to-indexed-object"),_=t("../internals/to-primitive"),w=t("../internals/has"),h=t("../internals/ie8-dom-define"),m=Object.getOwnPropertyDescriptor;c.f=l?m:function(b,v){if(b=d(b),v=_(v,!0),h)try{return m(b,v)}catch{}if(w(b,v))return a(!f.f.call(b,v),b[v])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":61,"../internals/ie8-dom-define":65,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136,"../internals/to-primitive":142}],95:[function(t,o,c){var l=t("../internals/to-indexed-object"),f=t("../internals/object-get-own-property-names").f,a={}.toString,d=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];o.exports.f=function(_){if(!d||a.call(_)!="[object Window]")return f(l(_));try{return f(_)}catch{return d.slice()}}},{"../internals/object-get-own-property-names":96,"../internals/to-indexed-object":136}],96:[function(t,o,c){var l=t("../internals/object-keys-internal"),f=t("../internals/enum-bug-keys").concat("length","prototype");c.f=Object.getOwnPropertyNames||function(a){return l(a,f)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],97:[function(t,o,c){c.f=Object.getOwnPropertySymbols},{}],98:[function(d,o,c){var l=d("../internals/has"),f=d("../internals/to-object"),a=d("../internals/shared-key"),d=d("../internals/correct-prototype-getter"),_=a("IE_PROTO"),w=Object.prototype;o.exports=d?Object.getPrototypeOf:function(h){return h=f(h),l(h,_)?h[_]:typeof h.constructor=="function"&&h instanceof h.constructor?h.constructor.prototype:h instanceof Object?w:null}},{"../internals/correct-prototype-getter":35,"../internals/has":61,"../internals/shared-key":120,"../internals/to-object":139}],99:[function(t,o,c){var l=t("../internals/has"),f=t("../internals/to-indexed-object"),a=t("../internals/array-includes").indexOf,d=t("../internals/hidden-keys");o.exports=function(_,w){var h,m=f(_),b=0,v=[];for(h in m)!l(d,h)&&l(m,h)&&v.push(h);for(;w.length>b;)!l(m,h=w[b++])||~a(v,h)||v.push(h);return v}},{"../internals/array-includes":18,"../internals/has":61,"../internals/hidden-keys":62,"../internals/to-indexed-object":136}],100:[function(t,o,c){var l=t("../internals/object-keys-internal"),f=t("../internals/enum-bug-keys");o.exports=Object.keys||function(a){return l(a,f)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],101:[function(t,o,c){var l={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,a=f&&!l.call({1:2},1);c.f=a?function(d){return d=f(this,d),!!d&&d.enumerable}:l},{}],102:[function(t,o,c){var l=t("../internals/an-object"),f=t("../internals/a-possible-prototype");o.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var a,d=!1,_={};try{(a=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(_,[]),d=_ instanceof Array}catch{}return function(w,h){return l(w),f(h),d?a.call(w,h):w.__proto__=h,w}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],103:[function(t,o,c){function l(w){return function(h){for(var m,b=d(h),v=a(b),g=v.length,p=0,y=[];p<g;)m=v[p++],f&&!_.call(b,m)||y.push(w?[m,b[m]]:b[m]);return y}}var f=t("../internals/descriptors"),a=t("../internals/object-keys"),d=t("../internals/to-indexed-object"),_=t("../internals/object-property-is-enumerable").f;o.exports={entries:l(!0),values:l(!1)}},{"../internals/descriptors":43,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136}],104:[function(t,o,c){var l=t("../internals/to-string-tag-support"),f=t("../internals/classof");o.exports=l?{}.toString:function(){return"[object "+f(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":143}],105:[function(t,o,c){var l=t("../internals/get-built-in"),f=t("../internals/object-get-own-property-names"),a=t("../internals/object-get-own-property-symbols"),d=t("../internals/an-object");o.exports=l("Reflect","ownKeys")||function(_){var w=f.f(d(_)),h=a.f;return h?w.concat(h(_)):w}},{"../internals/an-object":10,"../internals/get-built-in":57,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-symbols":97}],106:[function(t,o,c){t=t("../internals/global"),o.exports=t},{"../internals/global":60}],107:[function(t,o,c){o.exports=function(l){try{return{error:!1,value:l()}}catch(f){return{error:!0,value:f}}}},{}],108:[function(t,o,c){var l=t("../internals/an-object"),f=t("../internals/is-object"),a=t("../internals/new-promise-capability");o.exports=function(d,_){return l(d),f(_)&&_.constructor===d?_:((0,(d=a.f(d)).resolve)(_),d.promise)}},{"../internals/an-object":10,"../internals/is-object":75,"../internals/new-promise-capability":87}],109:[function(t,o,c){var l=t("../internals/redefine");o.exports=function(f,a,d){for(var _ in a)l(f,_,a[_],d);return f}},{"../internals/redefine":110}],110:[function(w,o,c){var l=w("../internals/global"),f=w("../internals/create-non-enumerable-property"),a=w("../internals/has"),d=w("../internals/set-global"),_=w("../internals/inspect-source"),w=w("../internals/internal-state"),h=w.get,m=w.enforce,b=String(String).split("String");(o.exports=function(v,g,p,A){var S=!!A&&!!A.unsafe,j=!!A&&!!A.enumerable,A=!!A&&!!A.noTargetGet;typeof p=="function"&&(typeof g!="string"||a(p,"name")||f(p,"name",g),m(p).source=b.join(typeof g=="string"?g:"")),v===l?j?v[g]=p:d(g,p):(S?!A&&v[g]&&(j=!0):delete v[g],j?v[g]=p:f(v,g,p))})(Function.prototype,"toString",function(){return typeof this=="function"&&h(this).source||_(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/set-global":117}],111:[function(t,o,c){var l=t("./classof-raw"),f=t("./regexp-exec");o.exports=function(a,d){var _=a.exec;if(typeof _=="function"){if(_=_.call(a,d),typeof _!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return _}if(l(a)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return f.call(a,d)}},{"./classof-raw":28,"./regexp-exec":112}],112:[function(d,o,c){var l,f,a=d("./regexp-flags"),d=d("./regexp-sticky-helpers"),_=RegExp.prototype.exec,w=String.prototype.replace,h=_,m=(l=/a/,f=/b*/g,_.call(l,"a"),_.call(f,"a"),l.lastIndex!==0||f.lastIndex!==0),b=d.UNSUPPORTED_Y||d.BROKEN_CARET,v=/()??/.exec("")[1]!==void 0;o.exports=h=m||v||b?function(g){var p,y,S,j,A=this,N=b&&A.sticky,C=a.call(A),T=A.source,R=0,P=g;return N&&((C=C.replace("y","")).indexOf("g")===-1&&(C+="g"),P=String(g).slice(A.lastIndex),0<A.lastIndex&&(!A.multiline||A.multiline&&g[A.lastIndex-1]!==`
`)&&(T="(?: "+T+")",P=" "+P,R++),y=new RegExp("^(?:"+T+")",C)),v&&(y=new RegExp("^"+T+"$(?!\\s)",C)),m&&(p=A.lastIndex),S=_.call(N?y:A,P),N?S?(S.input=S.input.slice(R),S[0]=S[0].slice(R),S.index=A.lastIndex,A.lastIndex+=S[0].length):A.lastIndex=0:m&&S&&(A.lastIndex=A.global?S.index+S[0].length:p),v&&S&&1<S.length&&w.call(S[0],y,function(){for(j=1;j<arguments.length-2;j++)arguments[j]===void 0&&(S[j]=void 0)}),S}:h},{"./regexp-flags":113,"./regexp-sticky-helpers":114}],113:[function(t,o,c){var l=t("../internals/an-object");o.exports=function(){var f=l(this),a="";return f.global&&(a+="g"),f.ignoreCase&&(a+="i"),f.multiline&&(a+="m"),f.dotAll&&(a+="s"),f.unicode&&(a+="u"),f.sticky&&(a+="y"),a}},{"../internals/an-object":10}],114:[function(t,o,c){t=t("./fails");function l(f,a){return RegExp(f,a)}c.UNSUPPORTED_Y=t(function(){var f=l("a","y");return f.lastIndex=2,f.exec("abcd")!=null}),c.BROKEN_CARET=t(function(){var f=l("^r","gy");return f.lastIndex=2,f.exec("str")!=null})},{"./fails":51}],115:[function(t,o,c){o.exports=function(l){if(l==null)throw TypeError("Can't call method on "+l);return l}},{}],116:[function(t,o,c){o.exports=Object.is||function(l,f){return l===f?l!==0||1/l==1/f:l!=l&&f!=f}},{}],117:[function(t,o,c){var l=t("../internals/global"),f=t("../internals/create-non-enumerable-property");o.exports=function(a,d){try{f(l,a,d)}catch{l[a]=d}return d}},{"../internals/create-non-enumerable-property":38,"../internals/global":60}],118:[function(t,o,c){var l=t("../internals/get-built-in"),f=t("../internals/object-define-property"),a=t("../internals/well-known-symbol"),d=t("../internals/descriptors"),_=a("species");o.exports=function(h){var h=l(h),m=f.f;d&&h&&!h[_]&&m(h,_,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":57,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],119:[function(t,o,c){var l=t("../internals/object-define-property").f,f=t("../internals/has"),a=t("../internals/well-known-symbol")("toStringTag");o.exports=function(d,_,w){d&&!f(d=w?d:d.prototype,a)&&l(d,a,{configurable:!0,value:_})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],120:[function(t,o,c){var l=t("../internals/shared"),f=t("../internals/uid"),a=l("keys");o.exports=function(d){return a[d]||(a[d]=f(d))}},{"../internals/shared":122,"../internals/uid":147}],121:[function(l,o,c){var a=l("../internals/global"),l=l("../internals/set-global"),f="__core-js_shared__",a=a[f]||l(f,{});o.exports=a},{"../internals/global":60,"../internals/set-global":117}],122:[function(t,o,c){var l=t("../internals/is-pure"),f=t("../internals/shared-store");(o.exports=function(a,d){return f[a]||(f[a]=d!==void 0?d:{})})("versions",[]).push({version:"3.6.5",mode:l?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":76,"../internals/shared-store":121}],123:[function(t,o,c){var l=t("../internals/an-object"),f=t("../internals/a-function"),a=t("../internals/well-known-symbol")("species");o.exports=function(w,_){var w=l(w).constructor;return w===void 0||(w=l(w)[a])==null?_:f(w)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":150}],124:[function(t,o,c){var l=t("../internals/fails");o.exports=function(f){return l(function(){var a=""[f]('"');return a!==a.toLowerCase()||3<a.split('"').length})}},{"../internals/fails":51}],125:[function(t,o,c){function l(d){return function(m,b){var h,m=String(a(m)),b=f(b),v=m.length;return b<0||v<=b?d?"":void 0:(h=m.charCodeAt(b))<55296||56319<h||b+1===v||(v=m.charCodeAt(b+1))<56320||57343<v?d?m.charAt(b):h:d?m.slice(b,b+2):v-56320+(h-55296<<10)+65536}}var f=t("../internals/to-integer"),a=t("../internals/require-object-coercible");o.exports={codeAt:l(!1),charAt:l(!0)}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],126:[function(t,o,c){t=t("../internals/engine-user-agent"),o.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(t)},{"../internals/engine-user-agent":47}],127:[function(t,o,c){function l(w){return function(v,y,p){var v=String(d(v)),g=v.length,p=p===void 0?" ":String(p),y=f(y);return y<=g||p==""?v:((g=a.call(p,_((y=y-g)/p.length))).length>y&&(g=g.slice(0,y)),w?v+g:g+v)}}var f=t("../internals/to-length"),a=t("../internals/string-repeat"),d=t("../internals/require-object-coercible"),_=Math.ceil;o.exports={start:l(!1),end:l(!0)}},{"../internals/require-object-coercible":115,"../internals/string-repeat":129,"../internals/to-length":138}],128:[function(t,o,c){function l(S){return S+22+75*(S<26)}function f(S){var j,A=[],N=(S=function(K){for(var re=[],oe=0,M=K.length;oe<M;){var z,$=K.charCodeAt(oe++);55296<=$&&$<=56319&&oe<M?(64512&(z=K.charCodeAt(oe++)))==56320?re.push(((1023&$)<<10)+(1023&z)+65536):(re.push($),oe--):re.push($)}return re}(S)).length,C=128,T=0,R=72;for(D=0;D<S.length;D++)(j=S[D])<128&&A.push(y(j));var P=A.length,k=P;for(P&&A.push("-");k<N;){for(var F=a,D=0;D<S.length;D++)C<=(j=S[D])&&j<F&&(F=j);var q=k+1;if(F-C>p((a-T)/q))throw RangeError(v);for(T+=(F-C)*q,C=F,D=0;D<S.length;D++){if((j=S[D])<C&&++T>a)throw RangeError(v);if(j==C){for(var H=T,W=d;;W+=d){var Q=W<=R?1:R+_<=W?_:W-R;if(H<Q)break;var J=H-Q,Z=d-Q;A.push(y(l(Q+J%Z))),H=p(J/Z)}A.push(y(l(H))),R=function(K,re,oe){var M=0;for(K=oe?p(K/h):K>>1,K+=p(K/re);g*_>>1<K;M+=d)K=p(K/g);return p(M+(g+1)*K/(K+w))}(T,q,k==P),T=0,++k}}++T,++C}return A.join("")}var a=2147483647,d=36,_=26,w=38,h=700,m=/[^\0-\u007E]/,b=/[.\u3002\uFF0E\uFF61]/g,v="Overflow: input needs wider integers to process",g=d-1,p=Math.floor,y=String.fromCharCode;o.exports=function(S){for(var j,A=[],N=S.toLowerCase().replace(b,".").split("."),C=0;C<N.length;C++)j=N[C],A.push(m.test(j)?"xn--"+f(j):j);return A.join(".")}},{}],129:[function(t,o,c){var l=t("../internals/to-integer"),f=t("../internals/require-object-coercible");o.exports="".repeat||function(a){var d=String(f(this)),_="",w=l(a);if(w<0||w==1/0)throw RangeError("Wrong number of repetitions");for(;0<w;(w>>>=1)&&(d+=d))1&w&&(_+=d);return _}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],130:[function(t,o,c){var l=t("../internals/fails"),f=t("../internals/whitespaces");o.exports=function(a){return l(function(){return!!f[a]()||""[a]()!=""||f[a].name!==a})}},{"../internals/fails":51,"../internals/whitespaces":151}],131:[function(a,o,c){function l(w){return function(h){return h=String(f(h)),1&w&&(h=h.replace(d,"")),h=2&w?h.replace(_,""):h}}var f=a("../internals/require-object-coercible"),a="["+a("../internals/whitespaces")+"]",d=RegExp("^"+a+a+"*"),_=RegExp(a+a+"*$");o.exports={start:l(1),end:l(2),trim:l(3)}},{"../internals/require-object-coercible":115,"../internals/whitespaces":151}],132:[function(g,o,c){function l(k){return function(){P(k)}}function f(k){P(k.data)}function a(k){_.postMessage(k+"",p.protocol+"//"+p.host)}var d,_=g("../internals/global"),w=g("../internals/fails"),h=g("../internals/classof-raw"),m=g("../internals/function-bind-context"),b=g("../internals/html"),v=g("../internals/document-create-element"),g=g("../internals/engine-is-ios"),p=_.location,y=_.setImmediate,S=_.clearImmediate,j=_.process,A=_.MessageChannel,N=_.Dispatch,C=0,T={},R="onreadystatechange",P=function(k){var F;T.hasOwnProperty(k)&&(F=T[k],delete T[k],F())};y&&S||(y=function(k){for(var F=[],D=1;D<arguments.length;)F.push(arguments[D++]);return T[++C]=function(){(typeof k=="function"?k:Function(k)).apply(void 0,F)},d(C),C},S=function(k){delete T[k]},h(j)=="process"?d=function(k){j.nextTick(l(k))}:N&&N.now?d=function(k){N.now(l(k))}:A&&!g?(g=(h=new A).port2,h.port1.onmessage=f,d=m(g.postMessage,g,1)):!_.addEventListener||typeof postMessage!="function"||_.importScripts||w(a)||p.protocol==="file:"?d=R in v("script")?function(k){b.appendChild(v("script"))[R]=function(){b.removeChild(this),P(k)}}:function(k){setTimeout(l(k),0)}:(d=a,_.addEventListener("message",f,!1))),o.exports={set:y,clear:S}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":55,"../internals/global":60,"../internals/html":64}],133:[function(t,o,c){var l=t("../internals/classof-raw");o.exports=function(f){if(typeof f!="number"&&l(f)!="Number")throw TypeError("Incorrect invocation");return+f}},{"../internals/classof-raw":28}],134:[function(t,o,c){var l=t("../internals/to-integer"),f=Math.max,a=Math.min;o.exports=function(d,_){return d=l(d),d<0?f(d+_,0):a(d,_)}},{"../internals/to-integer":137}],135:[function(t,o,c){var l=t("../internals/to-integer"),f=t("../internals/to-length");o.exports=function(d){if(d===void 0)return 0;var d=l(d),_=f(d);if(d!==_)throw RangeError("Wrong length or index");return _}},{"../internals/to-integer":137,"../internals/to-length":138}],136:[function(t,o,c){var l=t("../internals/indexed-object"),f=t("../internals/require-object-coercible");o.exports=function(a){return l(f(a))}},{"../internals/indexed-object":67,"../internals/require-object-coercible":115}],137:[function(t,o,c){var l=Math.ceil,f=Math.floor;o.exports=function(a){return isNaN(a=+a)?0:(0<a?f:l)(a)}},{}],138:[function(t,o,c){var l=t("../internals/to-integer"),f=Math.min;o.exports=function(a){return 0<a?f(l(a),9007199254740991):0}},{"../internals/to-integer":137}],139:[function(t,o,c){var l=t("../internals/require-object-coercible");o.exports=function(f){return Object(l(f))}},{"../internals/require-object-coercible":115}],140:[function(t,o,c){var l=t("../internals/to-positive-integer");o.exports=function(f,a){if(f=l(f),f%a)throw RangeError("Wrong offset");return f}},{"../internals/to-positive-integer":141}],141:[function(t,o,c){var l=t("../internals/to-integer");o.exports=function(f){if(f=l(f),f<0)throw RangeError("The argument can't be less than 0");return f}},{"../internals/to-integer":137}],142:[function(t,o,c){var l=t("../internals/is-object");o.exports=function(f,a){if(!l(f))return f;var d,_;if(a&&typeof(d=f.toString)=="function"&&!l(_=d.call(f))||typeof(d=f.valueOf)=="function"&&!l(_=d.call(f))||!a&&typeof(d=f.toString)=="function"&&!l(_=d.call(f)))return _;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":75}],143:[function(t,o,c){var l={};l[t("../internals/well-known-symbol")("toStringTag")]="z",o.exports=String(l)==="[object z]"},{"../internals/well-known-symbol":150}],144:[function(t,o,c){function l(Oe,Me){for(var Ue=0,et=Me.length,Fe=new(fe(Oe))(et);Ue<et;)Fe[Ue]=Me[Ue++];return Fe}function f(Oe,Me){z(Oe,Me,{get:function(){return oe(this)[Me]}})}function a(Oe){return Oe instanceof ce||(Oe=P(Oe))=="ArrayBuffer"||Oe=="SharedArrayBuffer"}function d(Oe,Me){return Se(Oe)&&typeof Me!="symbol"&&Me in Oe&&String(+Me)==String(Me)}function _(Oe,Me){return d(Oe,Me=T(Me,!0))?S(2,Oe[Me]):$(Oe,Me)}function w(Oe,Me,Ue){return!(d(Oe,Me=T(Me,!0))&&k(Ue)&&R(Ue,"value"))||R(Ue,"get")||R(Ue,"set")||Ue.configurable||R(Ue,"writable")&&!Ue.writable||R(Ue,"enumerable")&&!Ue.enumerable?z(Oe,Me,Ue):(Oe[Me]=Ue.value,Oe)}var h=t("../internals/export"),m=t("../internals/global"),b=t("../internals/descriptors"),v=t("../internals/typed-array-constructors-require-wrappers"),g=t("../internals/array-buffer-view-core"),p=t("../internals/array-buffer"),y=t("../internals/an-instance"),S=t("../internals/create-property-descriptor"),j=t("../internals/create-non-enumerable-property"),A=t("../internals/to-length"),N=t("../internals/to-index"),C=t("../internals/to-offset"),T=t("../internals/to-primitive"),R=t("../internals/has"),P=t("../internals/classof"),k=t("../internals/is-object"),F=t("../internals/object-create"),D=t("../internals/object-set-prototype-of"),q=t("../internals/object-get-own-property-names").f,H=t("../internals/typed-array-from"),W=t("../internals/array-iteration").forEach,Q=t("../internals/set-species"),J=t("../internals/object-define-property"),Z=t("../internals/object-get-own-property-descriptor"),K=t("../internals/internal-state"),re=t("../internals/inherit-if-required"),oe=K.get,M=K.set,z=J.f,$=Z.f,ee=Math.round,le=m.RangeError,ce=p.ArrayBuffer,me=p.DataView,ve=g.NATIVE_ARRAY_BUFFER_VIEWS,ge=g.TYPED_ARRAY_TAG,we=g.TypedArray,xe=g.TypedArrayPrototype,fe=g.aTypedArrayConstructor,Se=g.isTypedArray,Ce="BYTES_PER_ELEMENT",Ne="Wrong length";b?(ve||(Z.f=_,J.f=w,f(xe,"buffer"),f(xe,"byteOffset"),f(xe,"byteLength"),f(xe,"length")),h({target:"Object",stat:!0,forced:!ve},{getOwnPropertyDescriptor:_,defineProperty:w}),o.exports=function(Le,Me,Ue){function et(Ie,de){z(Ie,de,{get:function(){var he=this,ie=de;return(he=oe(he)).view[ut](ie*Fe+he.byteOffset,!0)},set:function(he){var ie=this,ye=de;ie=oe(ie),Ue&&(he=(he=ee(he))<0?0:255<he?255:255&he),ie.view[it](ye*Fe+ie.byteOffset,he,!0)},enumerable:!0})}var Fe=Le.match(/\d+$/)[0]/8,mt=Le+(Ue?"Clamped":"")+"Array",ut="get"+Le,it="set"+Le,ft=m[mt],at=ft,Le=at&&at.prototype,Je={};ve?v&&(at=Me(function(Ie,de,he,ie){return y(Ie,at,mt),re(k(de)?a(de)?ie!==void 0?new ft(de,C(he,Fe),ie):he!==void 0?new ft(de,C(he,Fe)):new ft(de):Se(de)?l(at,de):H.call(at,de):new ft(N(de)),Ie,at)}),D&&D(at,we),W(q(ft),function(Ie){Ie in at||j(at,Ie,ft[Ie])}),at.prototype=Le):(at=Me(function(Ie,de,he,ie){y(Ie,at,mt);var ye,Pe,Ve=0,$e=0;if(k(de)){if(!a(de))return Se(de)?l(at,de):H.call(at,de);var ct=de,$e=C(he,Fe),he=de.byteLength;if(ie===void 0){if(he%Fe||(ye=he-$e)<0)throw le(Ne)}else if(he<(ye=A(ie)*Fe)+$e)throw le(Ne);Pe=ye/Fe}else Pe=N(de),ct=new ce(ye=Pe*Fe);for(M(Ie,{buffer:ct,byteOffset:$e,byteLength:ye,length:Pe,view:new me(ct)});Ve<Pe;)et(Ie,Ve++)}),D&&D(at,we),Le=at.prototype=F(xe)),Le.constructor!==at&&j(Le,"constructor",at),ge&&j(Le,ge,mt),Je[mt]=at,h({global:!0,forced:at!=ft,sham:!ve},Je),Ce in at||j(at,Ce,Fe),Ce in Le||j(Le,Ce,Fe),Q(mt)}):o.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-object":75,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-set-prototype-of":102,"../internals/set-species":118,"../internals/to-index":135,"../internals/to-length":138,"../internals/to-offset":140,"../internals/to-primitive":142,"../internals/typed-array-constructors-require-wrappers":145,"../internals/typed-array-from":146}],145:[function(d,o,c){var l=d("../internals/global"),f=d("../internals/fails"),a=d("../internals/check-correctness-of-iteration"),d=d("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,_=l.ArrayBuffer,w=l.Int8Array;o.exports=!d||!f(function(){w(1)})||!f(function(){new w(-1)})||!a(function(h){new w,new w(null),new w(1.5),new w(h)},!0)||f(function(){return new w(new _(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":60}],146:[function(t,o,c){var l=t("../internals/to-object"),f=t("../internals/to-length"),a=t("../internals/get-iterator-method"),d=t("../internals/is-array-iterator-method"),_=t("../internals/function-bind-context"),w=t("../internals/array-buffer-view-core").aTypedArrayConstructor;o.exports=function(h){var m,b,v,g,p,y,S=l(h),j=arguments.length,A=1<j?arguments[1]:void 0,N=A!==void 0,C=a(S);if(C!=null&&!d(C))for(y=(p=C.call(S)).next,S=[];!(g=y.call(p)).done;)S.push(g.value);for(N&&2<j&&(A=_(A,arguments[2],2)),b=f(S.length),v=new(w(this))(b),m=0;m<b;m++)v[m]=N?A(S[m],m):S[m];return v}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],147:[function(t,o,c){var l=0,f=Math.random();o.exports=function(a){return"Symbol("+String(a===void 0?"":a)+")_"+(++l+f).toString(36)}},{}],148:[function(t,o,c){t=t("../internals/native-symbol"),o.exports=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":84}],149:[function(t,o,c){t=t("../internals/well-known-symbol"),c.f=t},{"../internals/well-known-symbol":150}],150:[function(w,o,c){var l=w("../internals/global"),f=w("../internals/shared"),a=w("../internals/has"),d=w("../internals/uid"),_=w("../internals/native-symbol"),w=w("../internals/use-symbol-as-uid"),h=f("wks"),m=l.Symbol,b=w?m:m&&m.withoutSetter||d;o.exports=function(v){return a(h,v)||(_&&a(m,v)?h[v]=m[v]:h[v]=b("Symbol."+v)),h[v]}},{"../internals/global":60,"../internals/has":61,"../internals/native-symbol":84,"../internals/shared":122,"../internals/uid":147,"../internals/use-symbol-as-uid":148}],151:[function(t,o,c){o.exports=`	
\v\f\r \u2028\u2029\uFEFF`},{}],152:[function(a,o,c){var l=a("../internals/export"),f=a("../internals/global"),_=a("../internals/array-buffer"),a=a("../internals/set-species"),d="ArrayBuffer",_=_[d];l({global:!0,forced:f[d]!==_},{ArrayBuffer:_}),a(d)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":60,"../internals/set-species":118}],153:[function(S,o,c){var l=S("../internals/export"),f=S("../internals/fails"),a=S("../internals/is-array"),d=S("../internals/is-object"),_=S("../internals/to-object"),w=S("../internals/to-length"),h=S("../internals/create-property"),m=S("../internals/array-species-create"),b=S("../internals/array-method-has-species-support"),y=S("../internals/well-known-symbol"),S=S("../internals/engine-v8-version"),v=y("isConcatSpreadable"),g=9007199254740991,p="Maximum allowed index exceeded",y=51<=S||!f(function(){var j=[];return j[v]=!1,j.concat()[0]!==j}),S=b("concat");l({target:"Array",proto:!0,forced:!y||!S},{concat:function(j){for(var A,N,C,T,R,P=_(this),k=m(P,0),F=0,D=-1,q=arguments.length;D<q;D++)if(R=void 0,!d(T=C=D===-1?P:arguments[D])||((R=T[v])!==void 0?!R:!a(T))){if(g<=F)throw TypeError(p);h(k,F++,C)}else{if(N=w(C.length),g<F+N)throw TypeError(p);for(A=0;A<N;A++,F++)A in C&&h(k,F,C[A])}return k.length=F,k}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-length":138,"../internals/to-object":139,"../internals/well-known-symbol":150}],154:[function(a,o,c){var l=a("../internals/export"),f=a("../internals/array-copy-within"),a=a("../internals/add-to-unscopables");l({target:"Array",proto:!0},{copyWithin:f}),a("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],155:[function(d,o,c){var l=d("../internals/export"),f=d("../internals/array-iteration").every,a=d("../internals/array-method-is-strict"),d=d("../internals/array-method-uses-to-length"),a=a("every"),d=d("every");l({target:"Array",proto:!0,forced:!a||!d},{every:function(_){return f(this,_,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],156:[function(a,o,c){var l=a("../internals/export"),f=a("../internals/array-fill"),a=a("../internals/add-to-unscopables");l({target:"Array",proto:!0},{fill:f}),a("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],157:[function(d,o,c){var l=d("../internals/export"),f=d("../internals/array-iteration").filter,a=d("../internals/array-method-has-species-support"),d=d("../internals/array-method-uses-to-length"),a=a("filter"),d=d("filter");l({target:"Array",proto:!0,forced:!a||!d},{filter:function(_){return f(this,_,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(w,o,c){var l=w("../internals/export"),f=w("../internals/array-iteration").findIndex,a=w("../internals/add-to-unscopables"),w=w("../internals/array-method-uses-to-length"),d="findIndex",_=!0,w=w(d);d in[]&&Array(1)[d](function(){_=!1}),l({target:"Array",proto:!0,forced:_||!w},{findIndex:function(h){return f(this,h,1<arguments.length?arguments[1]:void 0)}}),a(d)},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],159:[function(t,o,c){var l=t("../internals/export"),f=t("../internals/flatten-into-array"),a=t("../internals/to-object"),d=t("../internals/to-length"),_=t("../internals/a-function"),w=t("../internals/array-species-create");l({target:"Array",proto:!0},{flatMap:function(h){var m,b=a(this),v=d(b.length);return _(h),(m=w(b,0)).length=f(m,b,b,v,0,1,h,1<arguments.length?arguments[1]:void 0),m}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-length":138,"../internals/to-object":139}],160:[function(t,o,c){var l=t("../internals/export"),f=t("../internals/flatten-into-array"),a=t("../internals/to-object"),d=t("../internals/to-length"),_=t("../internals/to-integer"),w=t("../internals/array-species-create");l({target:"Array",proto:!0},{flat:function(){var h=arguments.length?arguments[0]:void 0,m=a(this),b=d(m.length),v=w(m,0);return v.length=f(v,m,m,b,0,h===void 0?1:_(h)),v}})},{"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],161:[function(f,o,c){var l=f("../internals/export"),f=f("../internals/array-for-each");l({target:"Array",proto:!0,forced:[].forEach!=f},{forEach:f})},{"../internals/array-for-each":16,"../internals/export":50}],162:[function(t,o,c){var l=t("../internals/export"),f=t("../internals/array-from");l({target:"Array",stat:!0,forced:!t("../internals/check-correctness-of-iteration")(function(a){Array.from(a)})},{from:f})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],163:[function(t,o,c){var l=t("../internals/export"),f=t("../internals/array-includes").includes,a=t("../internals/add-to-unscopables");l({target:"Array",proto:!0,forced:!t("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(d){return f(this,d,1<arguments.length?arguments[1]:void 0)}}),a("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(w,o,c){var l=w("../internals/export"),f=w("../internals/array-includes").indexOf,_=w("../internals/array-method-is-strict"),w=w("../internals/array-method-uses-to-length"),a=[].indexOf,d=!!a&&1/[1].indexOf(1,-0)<0,_=_("indexOf"),w=w("indexOf",{ACCESSORS:!0,1:0});l({target:"Array",proto:!0,forced:d||!_||!w},{indexOf:function(h){return d?a.apply(this,arguments)||0:f(this,h,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],165:[function(_,o,c){var l=_("../internals/to-indexed-object"),f=_("../internals/add-to-unscopables"),a=_("../internals/iterators"),d=_("../internals/internal-state"),_=_("../internals/define-iterator"),w="Array Iterator",h=d.set,m=d.getterFor(w);o.exports=_(Array,"Array",function(b,v){h(this,{type:w,target:l(b),index:0,kind:v})},function(){var b=m(this),v=b.target,g=b.kind,p=b.index++;return!v||p>=v.length?{value:b.target=void 0,done:!0}:g=="keys"?{value:p,done:!1}:g=="values"?{value:v[p],done:!1}:{value:[p,v[p]],done:!1}},"values"),a.Arguments=a.Array,f("keys"),f("values"),f("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/iterators":80,"../internals/to-indexed-object":136}],166:[function(_,o,c){var l=_("../internals/export"),d=_("../internals/indexed-object"),f=_("../internals/to-indexed-object"),_=_("../internals/array-method-is-strict"),a=[].join,d=d!=Object,_=_("join",",");l({target:"Array",proto:!0,forced:d||!_},{join:function(w){return a.call(f(this),w===void 0?",":w)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":67,"../internals/to-indexed-object":136}],167:[function(f,o,c){var l=f("../internals/export"),f=f("../internals/array-last-index-of");l({target:"Array",proto:!0,forced:f!==[].lastIndexOf},{lastIndexOf:f})},{"../internals/array-last-index-of":20,"../internals/export":50}],168:[function(d,o,c){var l=d("../internals/export"),f=d("../internals/array-iteration").map,a=d("../internals/array-method-has-species-support"),d=d("../internals/array-method-uses-to-length"),a=a("map"),d=d("map");l({target:"Array",proto:!0,forced:!a||!d},{map:function(_){return f(this,_,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],169:[function(v,o,c){var l=v("../internals/export"),f=v("../internals/is-object"),a=v("../internals/is-array"),d=v("../internals/to-absolute-index"),_=v("../internals/to-length"),w=v("../internals/to-indexed-object"),h=v("../internals/create-property"),m=v("../internals/well-known-symbol"),b=v("../internals/array-method-has-species-support"),v=v("../internals/array-method-uses-to-length"),b=b("slice"),v=v("slice",{ACCESSORS:!0,0:0,1:2}),g=m("species"),p=[].slice,y=Math.max;l({target:"Array",proto:!0,forced:!b||!v},{slice:function(S,j){var A,N,C,T=w(this),R=_(T.length),P=d(S,R),k=d(j===void 0?R:j,R);if(a(T)&&((A=typeof(A=T.constructor)=="function"&&(A===Array||a(A.prototype))||f(A)&&(A=A[g])===null?void 0:A)===Array||A===void 0))return p.call(T,P,k);for(N=new(A===void 0?Array:A)(y(k-P,0)),C=0;P<k;P++,C++)P in T&&h(N,C,T[P]);return N.length=C,N}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138,"../internals/well-known-symbol":150}],170:[function(d,o,c){var l=d("../internals/export"),f=d("../internals/array-iteration").some,a=d("../internals/array-method-is-strict"),d=d("../internals/array-method-uses-to-length"),a=a("some"),d=d("some");l({target:"Array",proto:!0,forced:!a||!d},{some:function(_){return f(this,_,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],171:[function(b,o,c){var l=b("../internals/export"),f=b("../internals/to-absolute-index"),a=b("../internals/to-integer"),d=b("../internals/to-length"),_=b("../internals/to-object"),w=b("../internals/array-species-create"),h=b("../internals/create-property"),m=b("../internals/array-method-has-species-support"),b=b("../internals/array-method-uses-to-length"),m=m("splice"),b=b("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,g=Math.min;l({target:"Array",proto:!0,forced:!m||!b},{splice:function(F,y){var S,j,A,N,C,T,R=_(this),P=d(R.length),k=f(F,P),F=arguments.length;if(F===0?S=j=0:j=F===1?(S=0,P-k):(S=F-2,g(v(a(y),0),P-k)),9007199254740991<P+S-j)throw TypeError("Maximum allowed length exceeded");for(A=w(R,j),N=0;N<j;N++)(C=k+N)in R&&h(A,N,R[C]);if(S<(A.length=j)){for(N=k;N<P-j;N++)T=N+S,(C=N+j)in R?R[T]=R[C]:delete R[T];for(N=P;P-j+S<N;N--)delete R[N-1]}else if(j<S)for(N=P-j;k<N;N--)T=N+S-1,(C=N+j-1)in R?R[T]=R[C]:delete R[T];for(N=0;N<S;N++)R[N+k]=arguments[N+2];return R.length=P-j+S,A}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":134,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],172:[function(t,o,c){t("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],173:[function(t,o,c){t("../internals/add-to-unscopables")("flat")},{"../internals/add-to-unscopables":7}],174:[function(f,o,c){var l=f("../internals/descriptors"),f=f("../internals/object-define-property").f,a=Function.prototype,d=a.toString,_=/^\s*function ([^ (]*)/;!l||"name"in a||f(a,"name",{configurable:!0,get:function(){try{return d.call(this).match(_)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":93}],175:[function(f,o,c){var l=f("../internals/collection"),f=f("../internals/collection-strong");o.exports=l("Map",function(a){return function(){return a(this,arguments.length?arguments[0]:void 0)}},f)},{"../internals/collection":32,"../internals/collection-strong":30}],176:[function(l,o,c){var l=l("../internals/export"),f=Math.hypot,a=Math.abs,d=Math.sqrt;l({target:"Math",stat:!0,forced:!!f&&f(1/0,NaN)!==1/0},{hypot:function(_,w){for(var h,m,b=0,v=0,g=arguments.length,p=0;v<g;)p<(h=a(arguments[v++]))?(b=b*(m=p/h)*m+1,p=h):b+=0<h?(m=h/p)*m:h;return p===1/0?1/0:p*d(b)}})},{"../internals/export":50}],177:[function(l,o,c){var l=l("../internals/export"),f=Math.log,a=Math.LN2;l({target:"Math",stat:!0},{log2:function(d){return f(d)/a}})},{"../internals/export":50}],178:[function(t,o,c){t("../internals/export")({target:"Math",stat:!0},{sign:t("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":81}],179:[function(t,o,c){function l(D){var q,H,W,Q,J,Z,K,re=b(D,!1);if(typeof re=="string"&&2<re.length){if((D=(re=j(re)).charCodeAt(0))===43||D===45){if((q=re.charCodeAt(2))===88||q===120)return NaN}else if(D===48){switch(re.charCodeAt(1)){case 66:case 98:H=2,W=49;break;case 79:case 111:H=8,W=55;break;default:return+re}for(J=(Q=re.slice(2)).length,Z=0;Z<J;Z++)if((K=Q.charCodeAt(Z))<48||W<K)return NaN;return parseInt(Q,H)}}return+re}var f=t("../internals/descriptors"),a=t("../internals/global"),d=t("../internals/is-forced"),_=t("../internals/redefine"),w=t("../internals/has"),h=t("../internals/classof-raw"),m=t("../internals/inherit-if-required"),b=t("../internals/to-primitive"),v=t("../internals/fails"),g=t("../internals/object-create"),p=t("../internals/object-get-own-property-names").f,y=t("../internals/object-get-own-property-descriptor").f,S=t("../internals/object-define-property").f,j=t("../internals/string-trim").trim,A="Number",N=a[A],C=N.prototype,T=h(g(C))==A;if(d(A,!N(" 0o1")||!N("0b1")||N("+0x1"))){for(var R,P=function(q){var q=arguments.length<1?0:q,H=this;return H instanceof P&&(T?v(function(){C.valueOf.call(H)}):h(H)!=A)?m(new N(l(q)),H,P):l(q)},k=f?p(N):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),F=0;k.length>F;F++)w(N,R=k[F])&&!w(P,R)&&S(P,R,y(N,R));(P.prototype=C).constructor=P,_(a,A,P)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/is-forced":74,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/string-trim":131,"../internals/to-primitive":142}],180:[function(t,o,c){t("../internals/export")({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},{"../internals/export":50}],181:[function(t,o,c){t("../internals/export")({target:"Number",stat:!0},{isFinite:t("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":89}],182:[function(w,o,c){function l(b,v,g){return v===0?g:v%2==1?l(b,v-1,g*b):l(b*b,v/2,g)}var f=w("../internals/export"),a=w("../internals/to-integer"),d=w("../internals/this-number-value"),_=w("../internals/string-repeat"),w=w("../internals/fails"),h=1 .toFixed,m=Math.floor;f({target:"Number",proto:!0,forced:h&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!w(function(){h.call({})})},{toFixed:function(A){function v(R,P){for(var k=-1,F=P;++k<6;)F+=R*N[k],N[k]=F%1e7,F=m(F/1e7)}function g(R){for(var P=6,k=0;0<=--P;)k+=N[P],N[P]=m(k/R),k=k%R*1e7}function p(){for(var R,P=6,k="";0<=--P;)k===""&&P!==0&&N[P]===0||(R=String(N[P]),k=k===""?R:k+_.call("0",7-R.length)+R);return k}var y,S,j=d(this),A=a(A),N=[0,0,0,0,0,0],C="",T="0";if(A<0||20<A)throw RangeError("Incorrect fraction digits");if(j!=j)return"NaN";if(j<=-1e21||1e21<=j)return String(j);if(j<0&&(C="-",j=-j),1e-21<j)if(j=(y=function(R){for(var P=0,k=R;4096<=k;)P+=12,k/=4096;for(;2<=k;)P+=1,k/=2;return P}(j*l(2,69,1))-69)<0?j*l(2,-y,1):j/l(2,y,1),j*=4503599627370496,0<(y=52-y)){for(v(0,j),S=A;7<=S;)v(1e7,0),S-=7;for(v(l(10,S,1),0),S=y-1;23<=S;)g(1<<23),S-=23;g(1<<S),v(1,1),g(2),T=p()}else v(0,j),v(1<<-y,0),T=p()+_.call("0",A);return T=0<A?C+((j=T.length)<=A?"0."+_.call("0",A-j)+T:T.slice(0,j-A)+"."+T.slice(j-A)):C+T}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":129,"../internals/this-number-value":133,"../internals/to-integer":137}],183:[function(f,o,c){var l=f("../internals/export"),f=f("../internals/object-assign");l({target:"Object",stat:!0,forced:Object.assign!==f},{assign:f})},{"../internals/export":50,"../internals/object-assign":90}],184:[function(t,o,c){var l=t("../internals/export"),f=t("../internals/object-to-array").entries;l({target:"Object",stat:!0},{entries:function(a){return f(a)}})},{"../internals/export":50,"../internals/object-to-array":103}],185:[function(t,o,c){var l=t("../internals/export"),f=t("../internals/iterate"),a=t("../internals/create-property");l({target:"Object",stat:!0},{fromEntries:function(d){var _={};return f(d,function(w,h){a(_,w,h)},void 0,!0),_}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":78}],186:[function(d,o,c){var l=d("../internals/export"),_=d("../internals/fails"),f=d("../internals/to-indexed-object"),a=d("../internals/object-get-own-property-descriptor").f,d=d("../internals/descriptors"),_=_(function(){a(1)});l({target:"Object",stat:!0,forced:!d||_,sham:!d},{getOwnPropertyDescriptor:function(w,h){return a(f(w),h)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":94,"../internals/to-indexed-object":136}],187:[function(a,o,c){var l=a("../internals/export"),f=a("../internals/fails"),a=a("../internals/object-get-own-property-names-external").f;l({target:"Object",stat:!0,forced:f(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:a})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":95}],188:[function(_,o,c){var l=_("../internals/export"),f=_("../internals/fails"),a=_("../internals/to-object"),d=_("../internals/object-get-prototype-of"),_=_("../internals/correct-prototype-getter");l({target:"Object",stat:!0,forced:f(function(){d(1)}),sham:!_},{getPrototypeOf:function(w){return d(a(w))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":98,"../internals/to-object":139}],189:[function(t,o,c){var l=t("../internals/export"),f=t("../internals/to-object"),a=t("../internals/object-keys");l({target:"Object",stat:!0,forced:t("../internals/fails")(function(){a(1)})},{keys:function(d){return a(f(d))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":100,"../internals/to-object":139}],190:[function(a,o,c){var l=a("../internals/to-string-tag-support"),f=a("../internals/redefine"),a=a("../internals/object-to-string");l||f(Object.prototype,"toString",a,{unsafe:!0})},{"../internals/object-to-string":104,"../internals/redefine":110,"../internals/to-string-tag-support":143}],191:[function(Ue,o,c){var l,f,a,d,_=Ue("../internals/export"),w=Ue("../internals/is-pure"),h=Ue("../internals/global"),m=Ue("../internals/get-built-in"),b=Ue("../internals/native-promise-constructor"),v=Ue("../internals/redefine"),g=Ue("../internals/redefine-all"),p=Ue("../internals/set-to-string-tag"),y=Ue("../internals/set-species"),S=Ue("../internals/is-object"),j=Ue("../internals/a-function"),A=Ue("../internals/an-instance"),N=Ue("../internals/classof-raw"),C=Ue("../internals/inspect-source"),T=Ue("../internals/iterate"),R=Ue("../internals/check-correctness-of-iteration"),P=Ue("../internals/species-constructor"),k=Ue("../internals/task").set,F=Ue("../internals/microtask"),D=Ue("../internals/promise-resolve"),q=Ue("../internals/host-report-errors"),H=Ue("../internals/new-promise-capability"),W=Ue("../internals/perform"),Q=Ue("../internals/internal-state"),J=Ue("../internals/is-forced"),et=Ue("../internals/well-known-symbol"),Z=Ue("../internals/engine-v8-version"),K=et("species"),re="Promise",oe=Q.get,M=Q.set,z=Q.getterFor(re),$=b,ee=h.TypeError,le=h.document,ce=h.process,me=m("fetch"),ve=H.f,ge=ve,we=N(ce)=="process",xe=!!(le&&le.createEvent&&h.dispatchEvent),fe="unhandledrejection",Se="rejectionhandled",Ce=1,Ne=2,Oe=1,Me=2,Ue=J(re,function(){var Je,Ie;return C($)===String($)&&(Z===66||!we&&typeof PromiseRejectionEvent!="function")?!0:!(!w||$.prototype.finally)||!(51<=Z&&/native code/.test($))&&(Ie=function(de){de(function(){},function(){})},((Je=$.resolve(1)).constructor={})[K]=Ie,!(Je.then(function(){})instanceof Ie))}),et=Ue||!R(function(Je){$.all(Je).catch(function(){})}),Fe=function(Je){var Ie;return!(!S(Je)||typeof(Ie=Je.then)!="function")&&Ie},mt=function(Je,Ie,de){var he;Ie.notified||(Ie.notified=!0,he=Ie.reactions,F(function(){for(var ie,ye,Pe=Ie.value,Ve=Ie.state==Ce,$e=0;he.length>$e;){var ct,yt,vt,bt=he[$e++],Lt=Ve?bt.ok:bt.fail,Tt=bt.resolve,jt=bt.reject,Nt=bt.domain;try{Lt?(Ve||(Ie.rejection===Me&&function(kt,yr){k.call(h,function(){we?ce.emit("rejectionHandled",kt):ut(Se,kt,yr.value)})}(Je,Ie),Ie.rejection=Oe),Lt===!0?ct=Pe:(Nt&&Nt.enter(),ct=Lt(Pe),Nt&&(Nt.exit(),vt=!0)),ct===bt.promise?jt(ee("Promise-chain cycle")):(yt=Fe(ct))?yt.call(ct,Tt,jt):Tt(ct)):jt(Pe)}catch(kt){Nt&&!vt&&Nt.exit(),jt(kt)}}Ie.reactions=[],Ie.notified=!1,de&&!Ie.rejection&&(ie=Je,ye=Ie,k.call(h,function(){var kt=ye.value,yr=it(ye);if(yr&&(yr=W(function(){we?ce.emit("unhandledRejection",kt,ie):ut(fe,ie,kt)}),ye.rejection=we||it(ye)?Me:Oe,yr.error))throw yr.value}))}))},ut=function(Je,Ie,de){var he;xe?((he=le.createEvent("Event")).promise=Ie,he.reason=de,he.initEvent(Je,!1,!0),h.dispatchEvent(he)):he={promise:Ie,reason:de},(Ie=h["on"+Je])?Ie(he):Je===fe&&q("Unhandled promise rejection",de)},it=function(Je){return Je.rejection!==Oe&&!Je.parent},ft=function(Je,Ie,de,he){return function(ie){Je(Ie,de,ie,he)}},at=function(Je,Ie,de,he){Ie.done||(Ie.done=!0,(Ie=he||Ie).value=de,Ie.state=Ne,mt(Je,Ie,!0))},Le=function(Je,Ie,de,he){if(!Ie.done){Ie.done=!0,he&&(Ie=he);try{if(Je===de)throw ee("Promise can't be resolved itself");var ie=Fe(de);ie?F(function(){var ye={done:!1};try{ie.call(de,ft(Le,Je,ye,Ie),ft(at,Je,ye,Ie))}catch(Pe){at(Je,ye,Pe,Ie)}}):(Ie.value=de,Ie.state=Ce,mt(Je,Ie,!1))}catch(ye){at(Je,{done:!1},ye,Ie)}}};Ue&&($=function(Je){A(this,$,re),j(Je),l.call(this);var Ie=oe(this);try{Je(ft(Le,this,Ie),ft(at,this,Ie))}catch(de){at(this,Ie,de)}},(l=function(Je){M(this,{type:re,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=g($.prototype,{then:function(Je,Ie){var de=z(this),he=ve(P(this,$));return he.ok=typeof Je!="function"||Je,he.fail=typeof Ie=="function"&&Ie,he.domain=we?ce.domain:void 0,de.parent=!0,de.reactions.push(he),de.state!=0&&mt(this,de,!1),he.promise},catch:function(Je){return this.then(void 0,Je)}}),f=function(){var Je=new l,Ie=oe(Je);this.promise=Je,this.resolve=ft(Le,Je,Ie),this.reject=ft(at,Je,Ie)},H.f=ve=function(Je){return Je===$||Je===a?new f:ge(Je)},w||typeof b!="function"||(d=b.prototype.then,v(b.prototype,"then",function(Je,Ie){var de=this;return new $(function(he,ie){d.call(de,he,ie)}).then(Je,Ie)},{unsafe:!0}),typeof me=="function"&&_({global:!0,enumerable:!0,forced:!0},{fetch:function(Je){return D($,me.apply(h,arguments))}}))),_({global:!0,wrap:!0,forced:Ue},{Promise:$}),p($,re,!1,!0),y(re),a=m(re),_({target:re,stat:!0,forced:Ue},{reject:function(Je){var Ie=ve(this);return Ie.reject.call(void 0,Je),Ie.promise}}),_({target:re,stat:!0,forced:w||Ue},{resolve:function(Je){return D(w&&this===a?$:this,Je)}}),_({target:re,stat:!0,forced:et},{all:function(Je){var Ie=this,de=ve(Ie),he=de.resolve,ie=de.reject,ye=W(function(){var Pe=j(Ie.resolve),Ve=[],$e=0,ct=1;T(Je,function(yt){var vt=$e++,bt=!1;Ve.push(void 0),ct++,Pe.call(Ie,yt).then(function(Lt){bt||(bt=!0,Ve[vt]=Lt,--ct||he(Ve))},ie)}),--ct||he(Ve)});return ye.error&&ie(ye.value),de.promise},race:function(Je){var Ie=this,de=ve(Ie),he=de.reject,ie=W(function(){var ye=j(Ie.resolve);T(Je,function(Pe){ye.call(Ie,Pe).then(de.resolve,he)})});return ie.error&&he(ie.value),de.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":57,"../internals/global":60,"../internals/host-report-errors":63,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-object":75,"../internals/is-pure":76,"../internals/iterate":78,"../internals/microtask":82,"../internals/native-promise-constructor":83,"../internals/new-promise-capability":87,"../internals/perform":107,"../internals/promise-resolve":108,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-species":118,"../internals/set-to-string-tag":119,"../internals/species-constructor":123,"../internals/task":132,"../internals/well-known-symbol":150}],192:[function(h,o,c){var l=h("../internals/export"),g=h("../internals/get-built-in"),f=h("../internals/a-function"),a=h("../internals/an-object"),d=h("../internals/is-object"),_=h("../internals/object-create"),w=h("../internals/function-bind"),h=h("../internals/fails"),m=g("Reflect","construct"),b=h(function(){function p(){}return!(m(function(){},[],p)instanceof p)}),v=!h(function(){m(function(){})}),g=b||v;l({target:"Reflect",stat:!0,forced:g,sham:g},{construct:function(p,y){f(p),a(y);var S=arguments.length<3?p:f(arguments[2]);if(v&&!b)return m(p,y,S);if(p==S){switch(y.length){case 0:return new p;case 1:return new p(y[0]);case 2:return new p(y[0],y[1]);case 3:return new p(y[0],y[1],y[2]);case 4:return new p(y[0],y[1],y[2],y[3])}var j=[null];return j.push.apply(j,y),new(w.apply(p,j))}return j=S.prototype,S=_(d(j)?j:Object.prototype),j=Function.apply.call(p,S,y),d(j)?j:S}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":56,"../internals/get-built-in":57,"../internals/is-object":75,"../internals/object-create":91}],193:[function(t,o,c){var l=t("../internals/export"),f=t("../internals/is-object"),a=t("../internals/an-object"),d=t("../internals/has"),_=t("../internals/object-get-own-property-descriptor"),w=t("../internals/object-get-prototype-of");l({target:"Reflect",stat:!0},{get:function h(m,b){var v,g=arguments.length<3?m:arguments[2];return a(m)===g?m[b]:(v=_.f(m,b))?d(v,"value")?v.value:v.get===void 0?void 0:v.get.call(g):f(v=w(m))?h(v,b,g):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":61,"../internals/is-object":75,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-prototype-of":98}],194:[function(t,o,c){var l=t("../internals/descriptors"),f=t("../internals/global"),a=t("../internals/is-forced"),d=t("../internals/inherit-if-required"),_=t("../internals/object-define-property").f,w=t("../internals/object-get-own-property-names").f,h=t("../internals/is-regexp"),m=t("../internals/regexp-flags"),b=t("../internals/regexp-sticky-helpers"),v=t("../internals/redefine"),g=t("../internals/fails"),p=t("../internals/internal-state").set,y=t("../internals/set-species"),S=t("../internals/well-known-symbol")("match"),j=f.RegExp,A=j.prototype,N=/a/g,C=/a/g,T=new j(N)!==N,R=b.UNSUPPORTED_Y;if(l&&a("RegExp",!T||R||g(function(){return C[S]=!1,j(N)!=N||j(C)==C||j(N,"i")!="/a/i"}))){for(var P=function(D,q){var H,W=this instanceof P,Q=h(D),J=q===void 0;return!W&&Q&&D.constructor===P&&J?D:(T?Q&&!J&&(D=D.source):D instanceof P&&(J&&(q=m.call(D)),D=D.source),R&&(H=!!q&&-1<q.indexOf("y"))&&(q=q.replace(/y/g,"")),Q=d(T?new j(D,q):j(D,q),W?this:A,P),R&&H&&p(Q,{sticky:H}),Q)},k=w(j),F=0;k.length>F;)(function(D){D in P||_(P,D,{configurable:!0,get:function(){return j[D]},set:function(q){j[D]=q}})})(k[F++]);(A.constructor=P).prototype=A,v(f,"RegExp",P)}y("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-regexp":77,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/regexp-flags":113,"../internals/regexp-sticky-helpers":114,"../internals/set-species":118,"../internals/well-known-symbol":150}],195:[function(f,o,c){var l=f("../internals/export"),f=f("../internals/regexp-exec");l({target:"RegExp",proto:!0,forced:/./.exec!==f},{exec:f})},{"../internals/export":50,"../internals/regexp-exec":112}],196:[function(d,o,c){var l=d("../internals/redefine"),f=d("../internals/an-object"),h=d("../internals/fails"),a=d("../internals/regexp-flags"),d="toString",_=RegExp.prototype,w=_[d],h=h(function(){return w.call({source:"a",flags:"b"})!="/a/b"}),m=w.name!=d;(h||m)&&l(RegExp.prototype,d,function(){var b=f(this),v=String(b.source),g=b.flags;return"/"+v+"/"+String(g===void 0&&b instanceof RegExp&&!("flags"in _)?a.call(b):g)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-flags":113}],197:[function(f,o,c){var l=f("../internals/collection"),f=f("../internals/collection-strong");o.exports=l("Set",function(a){return function(){return a(this,arguments.length?arguments[0]:void 0)}},f)},{"../internals/collection":32,"../internals/collection-strong":30}],198:[function(w,o,c){var l=w("../internals/export"),f=w("../internals/object-get-own-property-descriptor").f,a=w("../internals/to-length"),d=w("../internals/not-a-regexp"),_=w("../internals/require-object-coercible"),b=w("../internals/correct-is-regexp-logic"),w=w("../internals/is-pure"),h="".endsWith,m=Math.min,b=b("endsWith");l({target:"String",proto:!0,forced:!!(w||b||!(l=f(String.prototype,"endsWith"))||l.writable)&&!b},{endsWith:function(v){var g=String(_(this)),p=(d(v),1<arguments.length?arguments[1]:void 0),y=a(g.length),p=p===void 0?y:m(a(p),y),y=String(v);return h?h.call(g,y,p):g.slice(p-y.length,p)===y}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],199:[function(t,o,c){var l=t("../internals/export"),f=t("../internals/not-a-regexp"),a=t("../internals/require-object-coercible");l({target:"String",proto:!0,forced:!t("../internals/correct-is-regexp-logic")("includes")},{includes:function(d){return!!~String(a(this)).indexOf(f(d),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":88,"../internals/require-object-coercible":115}],200:[function(a,o,c){var l=a("../internals/string-multibyte").charAt,f=a("../internals/internal-state"),a=a("../internals/define-iterator"),d="String Iterator",_=f.set,w=f.getterFor(d);a(String,"String",function(h){_(this,{type:d,string:String(h),index:0})},function(){var h=w(this),m=h.string,b=h.index;return b>=m.length?{value:void 0,done:!0}:(m=l(m,b),h.index+=m.length,{value:m,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/string-multibyte":125}],201:[function(t,o,c){var l=t("../internals/fix-regexp-well-known-symbol-logic"),f=t("../internals/an-object"),a=t("../internals/to-length"),d=t("../internals/require-object-coercible"),_=t("../internals/advance-string-index"),w=t("../internals/regexp-exec-abstract");l("match",1,function(h,m,b){return[function(v){var g=d(this),p=v==null?void 0:v[h];return p!==void 0?p.call(v,g):new RegExp(v)[h](String(g))},function(v){var g=b(m,v,this);if(g.done)return g.value;var p=f(v),y=String(this);if(!p.global)return w(p,y);for(var S=p.unicode,j=[],A=p.lastIndex=0;(N=w(p,y))!==null;){var N=String(N[0]);(j[A]=N)===""&&(p.lastIndex=_(y,a(p.lastIndex),S)),A++}return A===0?null:j}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-length":138}],202:[function(t,o,c){var l=t("../internals/export"),f=t("../internals/string-pad").start;l({target:"String",proto:!0,forced:t("../internals/string-pad-webkit-bug")},{padStart:function(a){return f(this,a,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":127,"../internals/string-pad-webkit-bug":126}],203:[function(t,o,c){t("../internals/export")({target:"String",proto:!0},{repeat:t("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":129}],204:[function(t,o,c){var l=t("../internals/fix-regexp-well-known-symbol-logic"),f=t("../internals/an-object"),a=t("../internals/to-object"),d=t("../internals/to-length"),_=t("../internals/to-integer"),w=t("../internals/require-object-coercible"),h=t("../internals/advance-string-index"),m=t("../internals/regexp-exec-abstract"),b=Math.max,v=Math.min,g=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,y=/\$([$&'`]|\d\d?)/g;l("replace",2,function(S,j,A,N){var C=N.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,T=N.REPLACE_KEEPS_$0,R=C?"$":"$0";return[function(P,k){var F=w(this),D=P==null?void 0:P[S];return D!==void 0?D.call(P,F,k):j.call(String(F),P,k)},function(P,k){if(!C&&T||typeof k=="string"&&k.indexOf(R)===-1){var F=A(j,P,this,k);if(F.done)return F.value}for(var D,q=f(P),H=String(this),W=typeof k=="function",Q=(W||(k=String(k)),q.global),J=(Q&&(D=q.unicode,q.lastIndex=0),[]);(M=m(q,H))!==null&&(J.push(M),Q);)String(M[0])===""&&(q.lastIndex=h(H,d(q.lastIndex),D));for(var Z,K="",re=0,oe=0;oe<J.length;oe++){for(var M=J[oe],z=String(M[0]),$=b(v(_(M.index),H.length),0),ee=[],le=1;le<M.length;le++)ee.push((Z=M[le])===void 0?Z:String(Z));var ce=M.groups,me=W?(me=[z].concat(ee,$,H),ce!==void 0&&me.push(ce),String(k.apply(void 0,me))):function(ve,ge,we,xe,fe,Se){var Ce=we+ve.length,Ne=xe.length,Oe=y;return fe!==void 0&&(fe=a(fe),Oe=p),j.call(Se,Oe,function(Me,Ue){var et;switch(Ue.charAt(0)){case"$":return"$";case"&":return ve;case"`":return ge.slice(0,we);case"'":return ge.slice(Ce);case"<":et=fe[Ue.slice(1,-1)];break;default:var Fe,mt=+Ue;if(mt==0)return Me;if(Ne<mt)return(Fe=g(mt/10))!==0&&Fe<=Ne?xe[Fe-1]===void 0?Ue.charAt(1):xe[Fe-1]+Ue.charAt(1):Me;et=xe[mt-1]}return et===void 0?"":et})}(z,H,$,ee,ce,k);re<=$&&(K+=H.slice(re,$)+me,re=$+z.length)}return K+H.slice(re)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],205:[function(t,o,c){var l=t("../internals/fix-regexp-well-known-symbol-logic"),f=t("../internals/an-object"),a=t("../internals/require-object-coercible"),d=t("../internals/same-value"),_=t("../internals/regexp-exec-abstract");l("search",1,function(w,h,m){return[function(b){var v=a(this),g=b==null?void 0:b[w];return g!==void 0?g.call(b,v):new RegExp(b)[w](String(v))},function(b){var v,g=m(h,b,this);return g.done?g.value:(g=f(b),b=String(this),v=g.lastIndex,d(v,0)||(g.lastIndex=0),b=_(g,b),d(g.lastIndex,v)||(g.lastIndex=v),b===null?-1:b.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/same-value":116}],206:[function(v,o,c){var l=v("../internals/fix-regexp-well-known-symbol-logic"),f=v("../internals/is-regexp"),a=v("../internals/an-object"),d=v("../internals/require-object-coercible"),_=v("../internals/species-constructor"),w=v("../internals/advance-string-index"),h=v("../internals/to-length"),m=v("../internals/regexp-exec-abstract"),b=v("../internals/regexp-exec"),v=v("../internals/fails"),g=[].push,p=Math.min,y=4294967295,S=!v(function(){return!RegExp(y,"y")});l("split",2,function(j,A,N){var C="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(T,R){var P=String(d(this)),k=R===void 0?y:R>>>0;if(k==0)return[];if(T===void 0)return[P];if(!f(T))return A.call(P,T,k);for(var F,D,q,H=[],R=(T.ignoreCase?"i":"")+(T.multiline?"m":"")+(T.unicode?"u":"")+(T.sticky?"y":""),W=0,Q=new RegExp(T.source,R+"g");(F=b.call(Q,P))&&!(W<(D=Q.lastIndex)&&(H.push(P.slice(W,F.index)),1<F.length&&F.index<P.length&&g.apply(H,F.slice(1)),q=F[0].length,W=D,H.length>=k));)Q.lastIndex===F.index&&Q.lastIndex++;return W===P.length?!q&&Q.test("")||H.push(""):H.push(P.slice(W)),H.length>k?H.slice(0,k):H}:"0".split(void 0,0).length?function(T,R){return T===void 0&&R===0?[]:A.call(this,T,R)}:A;return[function(T,R){var P=d(this),k=T==null?void 0:T[j];return k!==void 0?k.call(T,P,R):C.call(String(P),T,R)},function(F,R){var P=N(C,F,this,R,C!==A);if(P.done)return P.value;var P=a(F),k=String(this),F=_(P,RegExp),D=P.unicode,q=(P.ignoreCase?"i":"")+(P.multiline?"m":"")+(P.unicode?"u":"")+(S?"y":"g"),H=new F(S?P:"^(?:"+P.source+")",q),W=R===void 0?y:R>>>0;if(W==0)return[];if(k.length===0)return m(H,k)===null?[k]:[];for(var Q=0,J=0,Z=[];J<k.length;){H.lastIndex=S?J:0;var K,re=m(H,S?k:k.slice(J));if(re===null||(K=p(h(H.lastIndex+(S?0:J)),k.length))===Q)J=w(k,J,D);else{if(Z.push(k.slice(Q,J)),Z.length===W)return Z;for(var oe=1;oe<=re.length-1;oe++)if(Z.push(re[oe]),Z.length===W)return Z;J=Q=K}}return Z.push(k.slice(Q)),Z}]},!S)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":77,"../internals/regexp-exec":112,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/species-constructor":123,"../internals/to-length":138}],207:[function(w,o,c){var l=w("../internals/export"),f=w("../internals/object-get-own-property-descriptor").f,a=w("../internals/to-length"),d=w("../internals/not-a-regexp"),_=w("../internals/require-object-coercible"),b=w("../internals/correct-is-regexp-logic"),w=w("../internals/is-pure"),h="".startsWith,m=Math.min,b=b("startsWith");l({target:"String",proto:!0,forced:!!(w||b||!(l=f(String.prototype,"startsWith"))||l.writable)&&!b},{startsWith:function(y){var g=String(_(this)),p=(d(y),a(m(1<arguments.length?arguments[1]:void 0,g.length))),y=String(y);return h?h.call(g,y,p):g.slice(p,p+y.length)===y}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],208:[function(t,o,c){var l=t("../internals/export"),f=t("../internals/create-html");l({target:"String",proto:!0,forced:t("../internals/string-html-forced")("sub")},{sub:function(){return f(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":124}],209:[function(t,o,c){var l=t("../internals/export"),f=t("../internals/string-trim").trim;l({target:"String",proto:!0,forced:t("../internals/string-trim-forced")("trim")},{trim:function(){return f(this)}})},{"../internals/export":50,"../internals/string-trim":131,"../internals/string-trim-forced":130}],210:[function(p,o,c){var l,f,a,d,_,w=p("../internals/export"),h=p("../internals/descriptors"),m=p("../internals/global"),b=p("../internals/has"),v=p("../internals/is-object"),g=p("../internals/object-define-property").f,p=p("../internals/copy-constructor-properties"),y=m.Symbol;!h||typeof y!="function"||"description"in y.prototype&&y().description===void 0||(l={},p(f=function(){var S=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),j=this instanceof f?new y(S):S===void 0?y():y(S);return S===""&&(l[j]=!0),j},y),(m=f.prototype=y.prototype).constructor=f,a=m.toString,d=String(y("test"))=="Symbol(test)",_=/^Symbol\((.*)\)[^)]+$/,g(m,"description",{configurable:!0,get:function(){var S=v(this)?this.valueOf():this,j=a.call(S);return b(l,S)?"":(S=d?j.slice(7,-1):j.replace(_,"$1"))===""?void 0:S}}),w({global:!0,forced:!0},{Symbol:f}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93}],211:[function(t,o,c){t("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],212:[function(ge,o,c){function l(ie,ye){var Pe=et[ie]=P(Se[ve]);return we(Pe,{type:me,tag:ie,description:ye}),b||(Pe.description=ye),Pe}function f(ie,Ve){A(ie);var Pe=C(Ve),Ve=k(Pe).concat(he(Pe));return le(Ve,function($e){b&&!de.call(Pe,$e)||Ie(ie,$e,Pe[$e])}),ie}function a(Ve,$e){var Pe,Ve=C(Ve),$e=T($e,!0);if(Ve!==fe||!y(et,$e)||y(Fe,$e))return!(Pe=Ne(Ve,$e))||!y(et,$e)||y(Ve,ce)&&Ve[ce][$e]||(Pe.enumerable=!0),Pe}function d(ye){var ye=Me(C(ye)),Pe=[];return le(ye,function(Ve){y(et,Ve)||y(re,Ve)||Pe.push(Ve)}),Pe}var _=ge("../internals/export"),w=ge("../internals/global"),h=ge("../internals/get-built-in"),m=ge("../internals/is-pure"),b=ge("../internals/descriptors"),v=ge("../internals/native-symbol"),g=ge("../internals/use-symbol-as-uid"),p=ge("../internals/fails"),y=ge("../internals/has"),S=ge("../internals/is-array"),j=ge("../internals/is-object"),A=ge("../internals/an-object"),N=ge("../internals/to-object"),C=ge("../internals/to-indexed-object"),T=ge("../internals/to-primitive"),R=ge("../internals/create-property-descriptor"),P=ge("../internals/object-create"),k=ge("../internals/object-keys"),F=ge("../internals/object-get-own-property-names"),D=ge("../internals/object-get-own-property-names-external"),q=ge("../internals/object-get-own-property-symbols"),H=ge("../internals/object-get-own-property-descriptor"),W=ge("../internals/object-define-property"),Q=ge("../internals/object-property-is-enumerable"),J=ge("../internals/create-non-enumerable-property"),Z=ge("../internals/redefine"),K=ge("../internals/shared"),it=ge("../internals/shared-key"),re=ge("../internals/hidden-keys"),oe=ge("../internals/uid"),M=ge("../internals/well-known-symbol"),z=ge("../internals/well-known-symbol-wrapped"),$=ge("../internals/define-well-known-symbol"),ee=ge("../internals/set-to-string-tag"),ft=ge("../internals/internal-state"),le=ge("../internals/array-iteration").forEach,ce=it("hidden"),me="Symbol",ve="prototype",ge=M("toPrimitive"),we=ft.set,xe=ft.getterFor(me),fe=Object[ve],Se=w.Symbol,Ce=h("JSON","stringify"),Ne=H.f,Oe=W.f,Me=D.f,Ue=Q.f,et=K("symbols"),Fe=K("op-symbols"),mt=K("string-to-symbol-registry"),ut=K("symbol-to-string-registry"),it=K("wks"),ft=w.QObject,at=!ft||!ft[ve]||!ft[ve].findChild,Le=b&&p(function(){return P(Oe({},"a",{get:function(){return Oe(this,"a",{value:7}).a}})).a!=7})?function(ie,ye,Pe){var Ve=Ne(fe,ye);Ve&&delete fe[ye],Oe(ie,ye,Pe),Ve&&ie!==fe&&Oe(fe,ye,Ve)}:Oe,Je=g?function(ie){return typeof ie=="symbol"}:function(ie){return Object(ie)instanceof Se},Ie=function(ie,ye,Pe){return ie===fe&&Ie(Fe,ye,Pe),A(ie),ye=T(ye,!0),A(Pe),(y(et,ye)?(Pe.enumerable?(y(ie,ce)&&ie[ce][ye]&&(ie[ce][ye]=!1),Pe=P(Pe,{enumerable:R(0,!1)})):(y(ie,ce)||Oe(ie,ce,R(1,{})),ie[ce][ye]=!0),Le):Oe)(ie,ye,Pe)},de=function(ye){var ye=T(ye,!0),Pe=Ue.call(this,ye);return!(this===fe&&y(et,ye)&&!y(Fe,ye))&&(!(Pe||!y(this,ye)||!y(et,ye)||y(this,ce)&&this[ce][ye])||Pe)},he=function(Pe){var ye=Pe===fe,Pe=Me(ye?Fe:C(Pe)),Ve=[];return le(Pe,function($e){!y(et,$e)||ye&&!y(fe,$e)||Ve.push(et[$e])}),Ve};v||(Z((Se=function(){if(this instanceof Se)throw TypeError("Symbol is not a constructor");var ie=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,ye=oe(ie),Pe=function(Ve){this===fe&&Pe.call(Fe,Ve),y(this,ce)&&y(this[ce],ye)&&(this[ce][ye]=!1),Le(this,ye,R(1,Ve))};return b&&at&&Le(fe,ye,{configurable:!0,set:Pe}),l(ye,ie)})[ve],"toString",function(){return xe(this).tag}),Z(Se,"withoutSetter",function(ie){return l(oe(ie),ie)}),Q.f=de,W.f=Ie,H.f=a,F.f=D.f=d,q.f=he,z.f=function(ie){return l(M(ie),ie)},b&&(Oe(Se[ve],"description",{configurable:!0,get:function(){return xe(this).description}}),m||Z(fe,"propertyIsEnumerable",de,{unsafe:!0}))),_({global:!0,wrap:!0,forced:!v,sham:!v},{Symbol:Se}),le(k(it),function(ie){$(ie)}),_({target:me,stat:!0,forced:!v},{for:function(Pe){var ye,Pe=String(Pe);return y(mt,Pe)?mt[Pe]:(ye=Se(Pe),mt[Pe]=ye,ut[ye]=Pe,ye)},keyFor:function(ie){if(!Je(ie))throw TypeError(ie+" is not a symbol");if(y(ut,ie))return ut[ie]},useSetter:function(){at=!0},useSimple:function(){at=!1}}),_({target:"Object",stat:!0,forced:!v,sham:!b},{create:function(ie,ye){return ye===void 0?P(ie):f(P(ie),ye)},defineProperty:Ie,defineProperties:f,getOwnPropertyDescriptor:a}),_({target:"Object",stat:!0,forced:!v},{getOwnPropertyNames:d,getOwnPropertySymbols:he}),_({target:"Object",stat:!0,forced:p(function(){q.f(1)})},{getOwnPropertySymbols:function(ie){return q.f(N(ie))}}),Ce&&_({target:"JSON",stat:!0,forced:!v||p(function(){var ie=Se();return Ce([ie])!="[null]"||Ce({a:ie})!="{}"||Ce(Object(ie))!="{}"})},{stringify:function(ie,ye,Pe){for(var Ve,$e=[ie],ct=1;ct<arguments.length;)$e.push(arguments[ct++]);if((j(Ve=ye)||ie!==void 0)&&!Je(ie))return S(ye)||(ye=function(yt,vt){if(typeof Ve=="function"&&(vt=Ve.call(this,yt,vt)),!Je(vt))return vt}),$e[1]=ye,Ce.apply(null,$e)}}),Se[ve][ge]||J(Se[ve],ge,Se[ve].valueOf),ee(Se,me),re[ce]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":57,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/internal-state":71,"../internals/is-array":73,"../internals/is-object":75,"../internals/is-pure":76,"../internals/native-symbol":84,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-names-external":95,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/shared":122,"../internals/shared-key":120,"../internals/to-indexed-object":136,"../internals/to-object":139,"../internals/to-primitive":142,"../internals/uid":147,"../internals/use-symbol-as-uid":148,"../internals/well-known-symbol":150,"../internals/well-known-symbol-wrapped":149}],213:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-copy-within"),a=l.aTypedArray;(0,l.exportTypedArrayMethod)("copyWithin",function(d,_){return f.call(a(this),d,_,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],214:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").every,a=l.aTypedArray;(0,l.exportTypedArrayMethod)("every",function(d){return f(a(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],215:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-fill"),a=l.aTypedArray;(0,l.exportTypedArrayMethod)("fill",function(d){return f.apply(a(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],216:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").filter,a=t("../internals/species-constructor"),d=l.aTypedArray,_=l.aTypedArrayConstructor;(0,l.exportTypedArrayMethod)("filter",function(w){for(var h=f(d(this),w,1<arguments.length?arguments[1]:void 0),w=a(this,this.constructor),m=0,b=h.length,v=new(_(w))(b);m<b;)v[m]=h[m++];return v})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],217:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").findIndex,a=l.aTypedArray;(0,l.exportTypedArrayMethod)("findIndex",function(d){return f(a(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],218:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").find,a=l.aTypedArray;(0,l.exportTypedArrayMethod)("find",function(d){return f(a(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],219:[function(t,o,c){t("../internals/typed-array-constructor")("Float32",function(l){return function(f,a,d){return l(this,f,a,d)}})},{"../internals/typed-array-constructor":144}],220:[function(t,o,c){t("../internals/typed-array-constructor")("Float64",function(l){return function(f,a,d){return l(this,f,a,d)}})},{"../internals/typed-array-constructor":144}],221:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").forEach,a=l.aTypedArray;(0,l.exportTypedArrayMethod)("forEach",function(d){f(a(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],222:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-includes").includes,a=l.aTypedArray;(0,l.exportTypedArrayMethod)("includes",function(d){return f(a(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],223:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-includes").indexOf,a=l.aTypedArray;(0,l.exportTypedArrayMethod)("indexOf",function(d){return f(a(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],224:[function(t,o,c){t("../internals/typed-array-constructor")("Int16",function(l){return function(f,a,d){return l(this,f,a,d)}})},{"../internals/typed-array-constructor":144}],225:[function(t,o,c){t("../internals/typed-array-constructor")("Int32",function(l){return function(f,a,d){return l(this,f,a,d)}})},{"../internals/typed-array-constructor":144}],226:[function(f,o,c){function l(){return a.call(w(this))}var b=f("../internals/global"),m=f("../internals/array-buffer-view-core"),h=f("../modules/es.array.iterator"),f=f("../internals/well-known-symbol")("iterator"),b=b.Uint8Array,a=h.values,d=h.keys,_=h.entries,w=m.aTypedArray,h=m.exportTypedArrayMethod,m=b&&b.prototype[f],b=!!m&&(m.name=="values"||m.name==null);h("entries",function(){return _.call(w(this))}),h("keys",function(){return d.call(w(this))}),h("values",l,!b),h(f,l,!b)},{"../internals/array-buffer-view-core":12,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],227:[function(f,o,c){var f=f("../internals/array-buffer-view-core"),l=f.aTypedArray,f=f.exportTypedArrayMethod,a=[].join;f("join",function(d){return a.apply(l(this),arguments)})},{"../internals/array-buffer-view-core":12}],228:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-last-index-of"),a=l.aTypedArray;(0,l.exportTypedArrayMethod)("lastIndexOf",function(d){return f.apply(a(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],229:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").map,a=t("../internals/species-constructor"),d=l.aTypedArray,_=l.aTypedArrayConstructor;(0,l.exportTypedArrayMethod)("map",function(w){return f(d(this),w,1<arguments.length?arguments[1]:void 0,function(h,m){return new(_(a(h,h.constructor)))(m)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],230:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-reduce").right,a=l.aTypedArray;(0,l.exportTypedArrayMethod)("reduceRight",function(d){return f(a(this),d,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],231:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-reduce").left,a=l.aTypedArray;(0,l.exportTypedArrayMethod)("reduce",function(d){return f(a(this),d,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],232:[function(f,o,c){var f=f("../internals/array-buffer-view-core"),l=f.aTypedArray,f=f.exportTypedArrayMethod,a=Math.floor;f("reverse",function(){for(var d,_=l(this).length,w=a(_/2),h=0;h<w;)d=this[h],this[h++]=this[--_],this[_]=d;return this})},{"../internals/array-buffer-view-core":12}],233:[function(_,o,c){var l=_("../internals/array-buffer-view-core"),f=_("../internals/to-length"),a=_("../internals/to-offset"),d=_("../internals/to-object"),_=_("../internals/fails"),w=l.aTypedArray;(0,l.exportTypedArrayMethod)("set",function(h){w(this);var m=a(1<arguments.length?arguments[1]:void 0,1),b=this.length,v=d(h),g=f(v.length),p=0;if(b<g+m)throw RangeError("Wrong length");for(;p<g;)this[m+p]=v[p++]},_(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":138,"../internals/to-object":139,"../internals/to-offset":140}],234:[function(f,o,c){var _=f("../internals/array-buffer-view-core"),l=f("../internals/species-constructor"),f=f("../internals/fails"),a=_.aTypedArray,d=_.aTypedArrayConstructor,_=_.exportTypedArrayMethod,w=[].slice;_("slice",function(h,m){for(var b=w.call(a(this),h,m),h=l(this,this.constructor),v=0,g=b.length,p=new(d(h))(g);v<g;)p[v]=b[v++];return p},f(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":123}],235:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").some,a=l.aTypedArray;(0,l.exportTypedArrayMethod)("some",function(d){return f(a(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],236:[function(f,o,c){var f=f("../internals/array-buffer-view-core"),l=f.aTypedArray,f=f.exportTypedArrayMethod,a=[].sort;f("sort",function(d){return a.call(l(this),d)})},{"../internals/array-buffer-view-core":12}],237:[function(t,o,c){var l=t("../internals/array-buffer-view-core"),f=t("../internals/to-length"),a=t("../internals/to-absolute-index"),d=t("../internals/species-constructor"),_=l.aTypedArray;(0,l.exportTypedArrayMethod)("subarray",function(v,h){var m=_(this),b=m.length,v=a(v,b);return new(d(m,m.constructor))(m.buffer,m.byteOffset+v*m.BYTES_PER_ELEMENT,f((h===void 0?b:a(h,b))-v))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":123,"../internals/to-absolute-index":134,"../internals/to-length":138}],238:[function(f,o,c){var _=f("../internals/global"),l=f("../internals/array-buffer-view-core"),f=f("../internals/fails"),a=_.Int8Array,d=l.aTypedArray,_=l.exportTypedArrayMethod,w=[].toLocaleString,h=[].slice,m=!!a&&f(function(){w.call(new a(1))});_("toLocaleString",function(){return w.apply(m?h.call(d(this)):d(this),arguments)},f(function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()})||!f(function(){a.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],239:[function(f,o,c){var l=f("../internals/array-buffer-view-core").exportTypedArrayMethod,_=f("../internals/fails"),f=f("../internals/global").Uint8Array,f=f&&f.prototype||{},a=[].toString,d=[].join,_=(_(function(){a.call({})})&&(a=function(){return d.call(this)}),f.toString!=a);l("toString",a,_)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],240:[function(t,o,c){t("../internals/typed-array-constructor")("Uint16",function(l){return function(f,a,d){return l(this,f,a,d)}})},{"../internals/typed-array-constructor":144}],241:[function(t,o,c){t("../internals/typed-array-constructor")("Uint32",function(l){return function(f,a,d){return l(this,f,a,d)}})},{"../internals/typed-array-constructor":144}],242:[function(t,o,c){t("../internals/typed-array-constructor")("Uint8",function(l){return function(f,a,d){return l(this,f,a,d)}})},{"../internals/typed-array-constructor":144}],243:[function(t,o,c){t("../internals/typed-array-constructor")("Uint8",function(l){return function(f,a,d){return l(this,f,a,d)}},!0)},{"../internals/typed-array-constructor":144}],244:[function(y,A,c){function l(N){return function(){return N(this,arguments.length?arguments[0]:void 0)}}var f,a,d,_,w,S=y("../internals/global"),h=y("../internals/redefine-all"),m=y("../internals/internal-metadata"),b=y("../internals/collection"),v=y("../internals/collection-weak"),g=y("../internals/is-object"),p=y("../internals/internal-state").enforce,y=y("../internals/native-weak-map"),S=!S.ActiveXObject&&"ActiveXObject"in S,j=Object.isExtensible,A=A.exports=b("WeakMap",l,v);y&&S&&(f=v.getConstructor(l,"WeakMap",!0),m.REQUIRED=!0,b=A.prototype,a=b.delete,d=b.has,_=b.get,w=b.set,h(b,{delete:function(N){var C;return g(N)&&!j(N)?((C=p(this)).frozen||(C.frozen=new f),a.call(this,N)||C.frozen.delete(N)):a.call(this,N)},has:function(N){var C;return g(N)&&!j(N)?((C=p(this)).frozen||(C.frozen=new f),d.call(this,N)||C.frozen.has(N)):d.call(this,N)},get:function(N){var C;return!g(N)||j(N)||((C=p(this)).frozen||(C.frozen=new f),d.call(this,N))?_.call(this,N):C.frozen.get(N)},set:function(N,C){var T;return!g(N)||j(N)||((T=p(this)).frozen||(T.frozen=new f),d.call(this,N))?w.call(this,N,C):T.frozen.set(N,C),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":60,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/redefine-all":109}],245:[function(t,o,c){var l,f=t("../internals/global"),a=t("../internals/dom-iterables"),d=t("../internals/array-for-each"),_=t("../internals/create-non-enumerable-property");for(l in a){var w=f[l],w=w&&w.prototype;if(w&&w.forEach!==d)try{_(w,"forEach",d)}catch{w.forEach=d}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60}],246:[function(w,o,c){var l,f=w("../internals/global"),a=w("../internals/dom-iterables"),d=w("../modules/es.array.iterator"),_=w("../internals/create-non-enumerable-property"),w=w("../internals/well-known-symbol"),h=w("iterator"),m=w("toStringTag"),b=d.values;for(l in a){var v=f[l],g=v&&v.prototype;if(g){if(g[h]!==b)try{_(g,h,b)}catch{g[h]=b}if(g[m]||_(g,m,l),a[l]){for(var p in d)if(g[p]!==d[p])try{_(g,p,d[p])}catch{g[p]=d[p]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],247:[function(ce,o,c){ce("../modules/es.array.iterator");function l(me){try{return decodeURIComponent(me)}catch{return me}}function f(me){return $[me]}function a(me){return encodeURIComponent(me).replace(z,f)}function d(me){this.entries.length=0,ee(this.entries,me)}function _(me,ve){if(me<ve)throw TypeError("Not enough arguments")}function w(){S(this,w,W);var me,ve,ge,we,xe,fe,Se,Ce,Ne=0<arguments.length?arguments[0]:void 0,Oe=[];if(J(this,{type:W,entries:Oe,updateURL:function(){},updateSearchParams:d}),Ne!==void 0)if(T(Ne))if(typeof(me=F(Ne))=="function")for(ge=(ve=me.call(Ne)).next;!(we=ge.call(ve)).done;){if((fe=(xe=(we=k(C(we.value))).next).call(we)).done||(Se=xe.call(we)).done||!xe.call(we).done)throw TypeError("Expected sequence with length 2");Oe.push({key:fe.value+"",value:Se.value+""})}else for(Ce in Ne)j(Ne,Ce)&&Oe.push({key:Ce,value:Ne[Ce]+""});else ee(Oe,typeof Ne=="string"?Ne.charAt(0)==="?"?Ne.slice(1):Ne:Ne+"")}var h=ce("../internals/export"),H=ce("../internals/get-built-in"),m=ce("../internals/native-url"),b=ce("../internals/redefine"),v=ce("../internals/redefine-all"),g=ce("../internals/set-to-string-tag"),p=ce("../internals/create-iterator-constructor"),y=ce("../internals/internal-state"),S=ce("../internals/an-instance"),j=ce("../internals/has"),A=ce("../internals/function-bind-context"),N=ce("../internals/classof"),C=ce("../internals/an-object"),T=ce("../internals/is-object"),R=ce("../internals/object-create"),P=ce("../internals/create-property-descriptor"),k=ce("../internals/get-iterator"),F=ce("../internals/get-iterator-method"),ce=ce("../internals/well-known-symbol"),D=H("fetch"),q=H("Headers"),H=ce("iterator"),W="URLSearchParams",Q=W+"Iterator",J=y.set,Z=y.getterFor(W),K=y.getterFor(Q),re=/\+/g,oe=Array(4),M=function(me){var ve,ge=me.replace(re," "),we=4;try{return decodeURIComponent(ge)}catch{for(;we;)ge=ge.replace((ve=we--,oe[ve-1]||(oe[ve-1]=RegExp("((?:%[\\da-f]{2}){"+ve+"})","gi"))),l);return ge}},z=/[!'()~]|%20/g,$={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ee=function(me,ve){if(ve)for(var ge,we=ve.split("&"),xe=0;xe<we.length;)(ge=we[xe++]).length&&(ge=ge.split("="),me.push({key:M(ge.shift()),value:M(ge.join("="))}))},le=p(function(me,ve){J(this,{type:Q,iterator:k(Z(me).entries),kind:ve})},"Iterator",function(){var ve=K(this),me=ve.kind,ve=ve.iterator.next(),ge=ve.value;return ve.done||(ve.value=me==="keys"?ge.key:me==="values"?ge.value:[ge.key,ge.value]),ve}),ce=w.prototype;v(ce,{append:function(me,ve){_(arguments.length,2);var ge=Z(this);ge.entries.push({key:me+"",value:ve+""}),ge.updateURL()},delete:function(me){_(arguments.length,1);for(var ve=Z(this),ge=ve.entries,we=me+"",xe=0;xe<ge.length;)ge[xe].key===we?ge.splice(xe,1):xe++;ve.updateURL()},get:function(me){_(arguments.length,1);for(var ve=Z(this).entries,ge=me+"",we=0;we<ve.length;we++)if(ve[we].key===ge)return ve[we].value;return null},getAll:function(me){_(arguments.length,1);for(var ve=Z(this).entries,ge=me+"",we=[],xe=0;xe<ve.length;xe++)ve[xe].key===ge&&we.push(ve[xe].value);return we},has:function(me){_(arguments.length,1);for(var ve=Z(this).entries,ge=me+"",we=0;we<ve.length;)if(ve[we++].key===ge)return!0;return!1},set:function(me,ve){_(arguments.length,1);for(var ge,we=Z(this),xe=we.entries,fe=!1,Se=me+"",Ce=ve+"",Ne=0;Ne<xe.length;Ne++)(ge=xe[Ne]).key===Se&&(fe?xe.splice(Ne--,1):(fe=!0,ge.value=Ce));fe||xe.push({key:Se,value:Ce}),we.updateURL()},sort:function(){for(var me,ve,ge=Z(this),we=ge.entries,xe=we.slice(),fe=we.length=0;fe<xe.length;fe++){for(me=xe[fe],ve=0;ve<fe;ve++)if(we[ve].key>me.key){we.splice(ve,0,me);break}ve===fe&&we.push(me)}ge.updateURL()},forEach:function(me){for(var ve,ge=Z(this).entries,we=A(me,1<arguments.length?arguments[1]:void 0,3),xe=0;xe<ge.length;)we((ve=ge[xe++]).value,ve.key,this)},keys:function(){return new le(this,"keys")},values:function(){return new le(this,"values")},entries:function(){return new le(this,"entries")}},{enumerable:!0}),b(ce,H,ce.entries),b(ce,"toString",function(){for(var me,ve=Z(this).entries,ge=[],we=0;we<ve.length;)me=ve[we++],ge.push(a(me.key)+"="+a(me.value));return ge.join("&")},{enumerable:!0}),g(w,W),h({global:!0,forced:!m},{URLSearchParams:w}),m||typeof D!="function"||typeof q!="function"||h({global:!0,enumerable:!0,forced:!0},{fetch:function(xe){var ve,ge,we,xe=[xe];return 1<arguments.length&&(T(ve=arguments[1])&&(ge=ve.body,N(ge)===W&&((we=ve.headers?new q(ve.headers):new q).has("content-type")||we.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),ve=R(ve,{body:P(0,String(ge)),headers:P(0,we)}))),xe.push(ve)),D.apply(this,xe)}}),o.exports={URLSearchParams:w,getState:Z}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":55,"../internals/get-built-in":57,"../internals/get-iterator":59,"../internals/get-iterator-method":58,"../internals/has":61,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-url":85,"../internals/object-create":91,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],248:[function(k,o,c){k("../modules/es.string.iterator");function l(Ae){var dt,wt,ot,qt;if(typeof Ae=="number"){for(dt=[],wt=0;wt<4;wt++)dt.unshift(Ae%256),Ae=Q(Ae/256);return dt.join(".")}if(typeof Ae!="object")return Ae;for(dt="",ot=Se(Ae),wt=0;wt<8;wt++)qt&&Ae[wt]===0||(qt=qt&&!1,ot===wt?(dt+=wt?":":"::",qt=!0):(dt+=Ae[wt].toString(16),wt<7&&(dt+=":")));return"["+dt+"]"}function f(Ae){return!Ae.host||Ae.cannotBeABaseURL||Ae.scheme=="file"}function a(Ae,dt,wt,ot){var qt,tt,Jt,_t=wt||Je,Pt=0,xt="",Pr=!1,gr=!1,sr=!1;for(wt||(Ae.scheme="",Ae.username="",Ae.password="",Ae.host=null,Ae.port=null,Ae.path=[],Ae.query=null,Ae.fragment=null,Ae.cannotBeABaseURL=!1,dt=dt.replace(we,"")),dt=dt.replace(xe,""),qt=N(dt);Pt<=qt.length;){switch(tt=qt[Pt],_t){case Je:if(!tt||!M.test(tt)){if(wt)return K;_t=de;continue}xt+=tt.toLowerCase(),_t=Ie;break;case Ie:if(tt&&(z.test(tt)||tt=="+"||tt=="-"||tt=="."))xt+=tt.toLowerCase();else{if(tt!=":"){if(wt)return K;xt="",_t=de,Pt=0;continue}if(wt&&(Fe(Ae)!=j(et,xt)||xt=="file"&&(mt(Ae)||Ae.port!==null)||Ae.scheme=="file"&&!Ae.host))return;if(Ae.scheme=xt,wt)return void(Fe(Ae)&&et[Ae.scheme]==Ae.port&&(Ae.port=null));xt="",Ae.scheme=="file"?_t=Lt:Fe(Ae)&&ot&&ot.scheme==Ae.scheme?_t=he:Fe(Ae)?_t=Ve:qt[Pt+1]=="/"?(_t=ie,Pt++):(Ae.cannotBeABaseURL=!0,Ae.path.push(""),_t=yr)}break;case de:if(!ot||ot.cannotBeABaseURL&&tt!="#")return K;if(ot.cannotBeABaseURL&&tt=="#"){Ae.scheme=ot.scheme,Ae.path=ot.path.slice(),Ae.query=ot.query,Ae.fragment="",Ae.cannotBeABaseURL=!0,_t=Ur;break}_t=ot.scheme=="file"?Lt:ye;continue;case he:if(tt!="/"||qt[Pt+1]!="/"){_t=ye;continue}_t=$e,Pt++;break;case ie:if(tt=="/"){_t=ct;break}_t=kt;continue;case ye:if(Ae.scheme=ot.scheme,tt==w)Ae.username=ot.username,Ae.password=ot.password,Ae.host=ot.host,Ae.port=ot.port,Ae.path=ot.path.slice(),Ae.query=ot.query;else if(tt=="/"||tt=="\\"&&Fe(Ae))_t=Pe;else if(tt=="?")Ae.username=ot.username,Ae.password=ot.password,Ae.host=ot.host,Ae.port=ot.port,Ae.path=ot.path.slice(),Ae.query="",_t=Yr;else{if(tt!="#"){Ae.username=ot.username,Ae.password=ot.password,Ae.host=ot.host,Ae.port=ot.port,Ae.path=ot.path.slice(),Ae.path.pop(),_t=kt;continue}Ae.username=ot.username,Ae.password=ot.password,Ae.host=ot.host,Ae.port=ot.port,Ae.path=ot.path.slice(),Ae.query=ot.query,Ae.fragment="",_t=Ur}break;case Pe:if(!Fe(Ae)||tt!="/"&&tt!="\\"){if(tt!="/"){Ae.username=ot.username,Ae.password=ot.password,Ae.host=ot.host,Ae.port=ot.port,_t=kt;continue}_t=ct}else _t=$e;break;case Ve:if(_t=$e,tt!="/"||xt.charAt(Pt+1)!="/")continue;Pt++;break;case $e:if(tt=="/"||tt=="\\")break;_t=ct;continue;case ct:if(tt=="@"){Pr&&(xt="%40"+xt);for(var Pr=!0,vr=N(xt),js=0;js<vr.length;js++){var Mn=vr[js];Mn!=":"||sr?(Mn=Ue(Mn,Me),sr?Ae.password+=Mn:Ae.username+=Mn):sr=!0}xt=""}else if(tt==w||tt=="/"||tt=="?"||tt=="#"||tt=="\\"&&Fe(Ae)){if(Pr&&xt=="")return Z;Pt-=N(xt).length+1,xt="",_t=yt}else xt+=tt;break;case yt:case vt:if(wt&&Ae.scheme=="file"){_t=jt;continue}if(tt!=":"||gr){if(tt==w||tt=="/"||tt=="?"||tt=="#"||tt=="\\"&&Fe(Ae)){if(Fe(Ae)&&xt=="")return re;if(wt&&xt==""&&(mt(Ae)||Ae.port!==null))return;if(Jt=fe(Ae,xt))return Jt;if(xt="",_t=Nt,wt)return;continue}tt=="["?gr=!0:tt=="]"&&(gr=!1),xt+=tt}else{if(xt=="")return re;if(Jt=fe(Ae,xt))return Jt;if(xt="",_t=bt,wt==vt)return}break;case bt:if(!$.test(tt)){if(tt==w||tt=="/"||tt=="?"||tt=="#"||tt=="\\"&&Fe(Ae)||wt){if(xt!=""){var is=parseInt(xt,10);if(65535<is)return oe;Ae.port=Fe(Ae)&&is===et[Ae.scheme]?null:is,xt=""}if(wt)return;_t=Nt;continue}return oe}xt+=tt;break;case Lt:if(Ae.scheme="file",tt=="/"||tt=="\\")_t=Tt;else{if(!ot||ot.scheme!="file"){_t=kt;continue}if(tt==w)Ae.host=ot.host,Ae.path=ot.path.slice(),Ae.query=ot.query;else if(tt=="?")Ae.host=ot.host,Ae.path=ot.path.slice(),Ae.query="",_t=Yr;else{if(tt!="#"){it(qt.slice(Pt).join(""))||(Ae.host=ot.host,Ae.path=ot.path.slice(),ft(Ae)),_t=kt;continue}Ae.host=ot.host,Ae.path=ot.path.slice(),Ae.query=ot.query,Ae.fragment="",_t=Ur}}break;case Tt:if(tt=="/"||tt=="\\"){_t=jt;break}ot&&ot.scheme=="file"&&!it(qt.slice(Pt).join(""))&&(ut(ot.path[0],!0)?Ae.path.push(ot.path[0]):Ae.host=ot.host),_t=kt;continue;case jt:if(tt==w||tt=="/"||tt=="\\"||tt=="?"||tt=="#"){if(!wt&&ut(xt))_t=kt;else{if(xt==""){if(Ae.host="",wt)return}else{if(Jt=fe(Ae,xt))return Jt;if(Ae.host=="localhost"&&(Ae.host=""),wt)return;xt=""}_t=Nt}continue}xt+=tt;break;case Nt:if(Fe(Ae)){if(_t=kt,tt!="/"&&tt!="\\")continue}else if(wt||tt!="?")if(wt||tt!="#"){if(tt!=w&&(_t=kt,tt!="/"))continue}else Ae.fragment="",_t=Ur;else Ae.query="",_t=Yr;break;case kt:if(tt==w||tt=="/"||tt=="\\"&&Fe(Ae)||!wt&&(tt=="?"||tt=="#")){if(Le(xt)?(ft(Ae),tt=="/"||tt=="\\"&&Fe(Ae)||Ae.path.push("")):at(xt)?tt=="/"||tt=="\\"&&Fe(Ae)||Ae.path.push(""):(Ae.scheme=="file"&&!Ae.path.length&&ut(xt)&&(Ae.host&&(Ae.host=""),xt=xt.charAt(0)+":"),Ae.path.push(xt)),xt="",Ae.scheme=="file"&&(tt==w||tt=="?"||tt=="#"))for(;1<Ae.path.length&&Ae.path[0]==="";)Ae.path.shift();tt=="?"?(Ae.query="",_t=Yr):tt=="#"&&(Ae.fragment="",_t=Ur)}else xt+=Ue(tt,Oe);break;case yr:tt=="?"?(Ae.query="",_t=Yr):tt=="#"?(Ae.fragment="",_t=Ur):tt!=w&&(Ae.path[0]+=Ue(tt,Ce));break;case Yr:wt||tt!="#"?tt!=w&&(tt=="'"&&Fe(Ae)?Ae.query+="%27":Ae.query+=tt=="#"?"%23":Ue(tt,Ce)):(Ae.fragment="",_t=Ur);break;case Ur:tt!=w&&(Ae.fragment+=Ue(tt,Ne))}Pt++}}function d(tt){var dt,wt,ot=S(this,d,"URL"),qt=1<arguments.length?arguments[1]:void 0,tt=String(tt),Jt=H(ot,{type:"URL"});if(qt!==void 0){if(qt instanceof d)dt=W(qt);else if(wt=a(dt={},String(qt)))throw TypeError(wt)}if(wt=a(Jt,tt,null,dt))throw TypeError(wt);var _t=Jt.searchParams=new D;(qt=q(_t)).updateSearchParams(Jt.query),qt.updateURL=function(){Jt.query=String(_t)||null},v||(ot.href=Cr.call(ot),ot.origin=Zt.call(ot),ot.protocol=Gr.call(ot),ot.username=Zr.call(ot),ot.password=mr.call(ot),ot.host=zr.call(ot),ot.hostname=ss.call(ot),ot.port=Qr.call(ot),ot.pathname=$r.call(ot),ot.search=Ss.call(ot),ot.searchParams=Ls.call(ot),ot.hash=Qs.call(ot))}function _(Ae,dt){return{get:Ae,set:dt,configurable:!0,enumerable:!0}}var w,h,m,b=k("../internals/export"),v=k("../internals/descriptors"),g=k("../internals/native-url"),Bt=k("../internals/global"),p=k("../internals/object-define-properties"),y=k("../internals/redefine"),S=k("../internals/an-instance"),j=k("../internals/has"),A=k("../internals/object-assign"),N=k("../internals/array-from"),C=k("../internals/string-multibyte").codeAt,T=k("../internals/string-punycode-to-ascii"),R=k("../internals/set-to-string-tag"),P=k("../modules/web.url-search-params"),k=k("../internals/internal-state"),F=Bt.URL,D=P.URLSearchParams,q=P.getState,H=k.set,W=k.getterFor("URL"),Q=Math.floor,J=Math.pow,Z="Invalid authority",K="Invalid scheme",re="Invalid host",oe="Invalid port",M=/[A-Za-z]/,z=/[\d+-.A-Za-z]/,$=/\d/,ee=/^(0x|0X)/,le=/^[0-7]+$/,ce=/^\d+$/,me=/^[\dA-Fa-f]+$/,ve=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,ge=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,we=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,xe=/[\u0009\u000A\u000D]/g,fe=function(Ae,dt){var wt,ot,qt;if(dt.charAt(0)=="[")return dt.charAt(dt.length-1)=="]"&&(wt=function(tt){var Jt=[0,0,0,0,0,0,0,0],_t=0,Pt=null,xt=0,Pr,gr,sr,vr,js,Mn,is,Jr=function(){return tt.charAt(xt)};if(Jr()==":"){if(tt.charAt(1)!=":")return;xt+=2,_t++,Pt=_t}for(;Jr();){if(_t==8)return;if(Jr()==":"){if(Pt!==null)return;xt++,_t++,Pt=_t;continue}for(Pr=gr=0;gr<4&&me.test(Jr());)Pr=Pr*16+parseInt(Jr(),16),xt++,gr++;if(Jr()=="."){if(gr==0||(xt-=gr,_t>6))return;for(sr=0;Jr();){if(vr=null,sr>0)if(Jr()=="."&&sr<4)xt++;else return;if(!$.test(Jr()))return;for(;$.test(Jr());){if(js=parseInt(Jr(),10),vr===null)vr=js;else{if(vr==0)return;vr=vr*10+js}if(vr>255)return;xt++}Jt[_t]=Jt[_t]*256+vr,sr++,(sr==2||sr==4)&&_t++}if(sr!=4)return;break}else if(Jr()==":"){if(xt++,!Jr())return}else if(Jr())return;Jt[_t++]=Pr}if(Pt!==null)for(Mn=_t-Pt,_t=7;_t!=0&&Mn>0;)is=Jt[_t],Jt[_t--]=Jt[Pt+Mn-1],Jt[Pt+--Mn]=is;else if(_t!=8)return;return Jt}(dt.slice(1,-1)))?void(Ae.host=wt):re;if(Fe(Ae))return dt=T(dt),ve.test(dt)||(wt=function(tt){var Jt=tt.split("."),_t,Pt,xt,Pr,gr,sr,vr;if(Jt.length&&Jt[Jt.length-1]==""&&Jt.pop(),(_t=Jt.length)>4)return tt;for(Pt=[],xt=0;xt<_t;xt++){if(Pr=Jt[xt],Pr=="")return tt;if(gr=10,Pr.length>1&&Pr.charAt(0)=="0"&&(gr=ee.test(Pr)?16:8,Pr=Pr.slice(gr==8?1:2)),Pr==="")sr=0;else{if(!(gr==10?ce:gr==8?le:me).test(Pr))return tt;sr=parseInt(Pr,gr)}Pt.push(sr)}for(xt=0;xt<_t;xt++)if(sr=Pt[xt],xt==_t-1){if(sr>=J(256,5-_t))return null}else if(sr>255)return null;for(vr=Pt.pop(),xt=0;xt<Pt.length;xt++)vr+=Pt[xt]*J(256,3-xt);return vr}(dt))===null?re:void(Ae.host=wt);if(ge.test(dt))return re;for(wt="",ot=N(dt),qt=0;qt<ot.length;qt++)wt+=Ue(ot[qt],Ce);Ae.host=wt},Se=function(Ae){for(var dt=null,wt=1,ot=null,qt=0,tt=0;tt<8;tt++)Ae[tt]!==0?(wt<qt&&(dt=ot,wt=qt),ot=null,qt=0):(ot===null&&(ot=tt),++qt);return wt<qt&&(dt=ot,wt=qt),dt},Ce={},Ne=A({},Ce,{" ":1,'"':1,"<":1,">":1,"`":1}),Oe=A({},Ne,{"#":1,"?":1,"{":1,"}":1}),Me=A({},Oe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Ue=function(Ae,dt){var wt=C(Ae,0);return 32<wt&&wt<127&&!j(dt,Ae)?Ae:encodeURIComponent(Ae)},et={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Fe=function(Ae){return j(et,Ae.scheme)},mt=function(Ae){return Ae.username!=""||Ae.password!=""},ut=function(Ae,dt){return Ae.length==2&&M.test(Ae.charAt(0))&&((Ae=Ae.charAt(1))==":"||!dt&&Ae=="|")},it=function(Ae){return 1<Ae.length&&ut(Ae.slice(0,2))&&(Ae.length==2||(Ae=Ae.charAt(2))==="/"||Ae==="\\"||Ae==="?"||Ae==="#")},ft=function(Ae){var dt=Ae.path,wt=dt.length;!wt||Ae.scheme=="file"&&wt==1&&ut(dt[0],!0)||dt.pop()},at=function(Ae){return Ae==="."||Ae.toLowerCase()==="%2e"},Le=function(Ae){return(Ae=Ae.toLowerCase())===".."||Ae==="%2e."||Ae===".%2e"||Ae==="%2e%2e"},Je={},Ie={},de={},he={},ie={},ye={},Pe={},Ve={},$e={},ct={},yt={},vt={},bt={},Lt={},Tt={},jt={},Nt={},kt={},yr={},Yr={},Ur={},Bt=d.prototype,Cr=function(){var Ae=W(this),dt=Ae.scheme,wt=Ae.username,ot=Ae.password,qt=Ae.host,tt=Ae.port,Jt=Ae.path,_t=Ae.query,Pt=Ae.fragment,xt=dt+":";return qt!==null?(xt+="//",mt(Ae)&&(xt+=wt+(ot?":"+ot:"")+"@"),xt+=l(qt),tt!==null&&(xt+=":"+tt)):dt=="file"&&(xt+="//"),xt+=Ae.cannotBeABaseURL?Jt[0]:Jt.length?"/"+Jt.join("/"):"",_t!==null&&(xt+="?"+_t),Pt!==null&&(xt+="#"+Pt),xt},Zt=function(){var Ae=W(this),dt=Ae.scheme,wt=Ae.port;if(dt=="blob")try{return new URL(dt.path[0]).origin}catch{return"null"}return dt!="file"&&Fe(Ae)?dt+"://"+l(Ae.host)+(wt!==null?":"+wt:""):"null"},Gr=function(){return W(this).scheme+":"},Zr=function(){return W(this).username},mr=function(){return W(this).password},zr=function(){var dt=W(this),Ae=dt.host,dt=dt.port;return Ae===null?"":dt===null?l(Ae):l(Ae)+":"+dt},ss=function(){var Ae=W(this).host;return Ae===null?"":l(Ae)},Qr=function(){var Ae=W(this).port;return Ae===null?"":String(Ae)},$r=function(){var Ae=W(this),dt=Ae.path;return Ae.cannotBeABaseURL?dt[0]:dt.length?"/"+dt.join("/"):""},Ss=function(){var Ae=W(this).query;return Ae?"?"+Ae:""},Ls=function(){return W(this).searchParams},Qs=function(){var Ae=W(this).fragment;return Ae?"#"+Ae:""};v&&p(Bt,{href:_(Cr,function(wt){var dt=W(this),wt=String(wt),wt=a(dt,wt);if(wt)throw TypeError(wt);q(dt.searchParams).updateSearchParams(dt.query)}),origin:_(Zt),protocol:_(Gr,function(Ae){var dt=W(this);a(dt,String(Ae)+":",Je)}),username:_(Zr,function(Ae){var dt=W(this),wt=N(String(Ae));if(!f(dt)){dt.username="";for(var ot=0;ot<wt.length;ot++)dt.username+=Ue(wt[ot],Me)}}),password:_(mr,function(Ae){var dt=W(this),wt=N(String(Ae));if(!f(dt)){dt.password="";for(var ot=0;ot<wt.length;ot++)dt.password+=Ue(wt[ot],Me)}}),host:_(zr,function(Ae){var dt=W(this);dt.cannotBeABaseURL||a(dt,String(Ae),yt)}),hostname:_(ss,function(Ae){var dt=W(this);dt.cannotBeABaseURL||a(dt,String(Ae),vt)}),port:_(Qr,function(Ae){var dt=W(this);f(dt)||((Ae=String(Ae))==""?dt.port=null:a(dt,Ae,bt))}),pathname:_($r,function(Ae){var dt=W(this);dt.cannotBeABaseURL||(dt.path=[],a(dt,Ae+"",Nt))}),search:_(Ss,function(Ae){var dt=W(this);(Ae=String(Ae))==""?dt.query=null:(Ae.charAt(0)=="?"&&(Ae=Ae.slice(1)),dt.query="",a(dt,Ae,Yr)),q(dt.searchParams).updateSearchParams(dt.query)}),searchParams:_(Ls),hash:_(Qs,function(Ae){var dt=W(this);(Ae=String(Ae))==""?dt.fragment=null:(Ae.charAt(0)=="#"&&(Ae=Ae.slice(1)),dt.fragment="",a(dt,Ae,Ur))})}),y(Bt,"toJSON",function(){return Cr.call(this)},{enumerable:!0}),y(Bt,"toString",function(){return Cr.call(this)},{enumerable:!0}),F&&(h=F.createObjectURL,m=F.revokeObjectURL,h&&y(d,"createObjectURL",function(Ae){return h.apply(F,arguments)}),m&&y(d,"revokeObjectURL",function(Ae){return m.apply(F,arguments)})),R(d,"URL"),b({global:!0,forced:!g,sham:!v},{URL:d})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/internal-state":71,"../internals/native-url":85,"../internals/object-assign":90,"../internals/object-define-properties":92,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/string-multibyte":125,"../internals/string-punycode-to-ascii":128,"../modules/es.string.iterator":200,"../modules/web.url-search-params":247}],249:[function(t,o,c){o.exports=t("./").polyfill()},{"./":250}],250:[function(t,o,c){(function(l,f){var a,d;a=this,d=function(){function _(fe){return typeof fe=="function"}var w=Array.isArray||function(fe){return Object.prototype.toString.call(fe)==="[object Array]"},h=0,m=void 0,b=void 0,v=function(fe,Se){A[h]=fe,A[h+1]=Se,(h+=2)===2&&(b?b(N):D())},g=typeof window<"u"?window:void 0,p=g||{},p=p.MutationObserver||p.WebKitMutationObserver,y=typeof self>"u"&&l!==void 0&&{}.toString.call(l)==="[object process]",S=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function j(){var fe=setTimeout;return function(){return fe(N,1)}}var A=new Array(1e3);function N(){for(var fe=0;fe<h;fe+=2)(0,A[fe])(A[fe+1]),A[fe]=void 0,A[fe+1]=void 0;h=0}function C(){try{var fe=Function("return this")().require("vertx");return(m=fe.runOnLoop||fe.runOnContext)!==void 0?function(){m(N)}:j()}catch{return j()}}var T,R,P,D=void 0;function k(fe,Se){var Ce,Ne=this,Oe=new this.constructor(H),Me=(Oe[q]===void 0&&me(Oe),Ne._state);return Me?(Ce=arguments[Me-1],v(function(){return le(Me,Oe,Ce,Ne._result)})):$(Ne,Oe,fe,Se),Oe}function F(fe){var Se;return fe&&typeof fe=="object"&&fe.constructor===this?fe:(re(Se=new this(H),fe),Se)}var D=y?function(){return l.nextTick(N)}:p?(R=0,y=new p(N),P=document.createTextNode(""),y.observe(P,{characterData:!0}),function(){P.data=R=++R%2}):S?((T=new MessageChannel).port1.onmessage=N,function(){return T.port2.postMessage(0)}):(g===void 0&&typeof t=="function"?C:j)(),q=Math.random().toString(36).substring(2);function H(){}var W=void 0,Q=1,J=2;function Z(fe,Se,Ce){v(function(Ne){var Oe=!1,Me=function(Ue,et,Fe,mt){try{Ue.call(et,Fe,mt)}catch(ut){return ut}}(Ce,Se,function(Ue){Oe||(Oe=!0,(Se!==Ue?re:M)(Ne,Ue))},function(Ue){Oe||(Oe=!0,z(Ne,Ue))},Ne._label);!Oe&&Me&&(Oe=!0,z(Ne,Me))},fe)}function K(fe,Se,Ce){var Ne,Oe;Se.constructor===fe.constructor&&Ce===k&&Se.constructor.resolve===F?(Ne=fe,(Oe=Se)._state===Q?M(Ne,Oe._result):Oe._state===J?z(Ne,Oe._result):$(Oe,void 0,function(Me){return re(Ne,Me)},function(Me){return z(Ne,Me)})):Ce!==void 0&&_(Ce)?Z(fe,Se,Ce):M(fe,Se)}function re(fe,Se){if(fe===Se)z(fe,new TypeError("You cannot resolve a promise with itself"));else if(Ce=typeof Se,Se===null||Ce!="object"&&Ce!="function")M(fe,Se);else{Ce=void 0;try{Ce=Se.then}catch(Ne){return void z(fe,Ne)}K(fe,Se,Ce)}var Ce}function oe(fe){fe._onerror&&fe._onerror(fe._result),ee(fe)}function M(fe,Se){fe._state===W&&(fe._result=Se,fe._state=Q,fe._subscribers.length!==0&&v(ee,fe))}function z(fe,Se){fe._state===W&&(fe._state=J,fe._result=Se,v(oe,fe))}function $(fe,Se,Ce,Ne){var Oe=fe._subscribers,Me=Oe.length;fe._onerror=null,Oe[Me]=Se,Oe[Me+Q]=Ce,Oe[Me+J]=Ne,Me===0&&fe._state&&v(ee,fe)}function ee(fe){var Se=fe._subscribers,Ce=fe._state;if(Se.length!==0){for(var Ne,Oe=void 0,Me=fe._result,Ue=0;Ue<Se.length;Ue+=3)Ne=Se[Ue],Oe=Se[Ue+Ce],Ne?le(Ce,Ne,Oe,Me):Oe(Me);fe._subscribers.length=0}}function le(fe,Se,Ce,Ne){var Oe=_(Ce),Me=void 0,Ue=void 0,et=!0;if(Oe){try{Me=Ce(Ne)}catch(Fe){et=!1,Ue=Fe}if(Se===Me)return void z(Se,new TypeError("A promises callback cannot return that same promise."))}else Me=Ne;Se._state===W&&(Oe&&et?re(Se,Me):et===!1?z(Se,Ue):fe===Q?M(Se,Me):fe===J&&z(Se,Me))}var ce=0;function me(fe){fe[q]=ce++,fe._state=void 0,fe._result=void 0,fe._subscribers=[]}ge.prototype._enumerate=function(fe){for(var Se=0;this._state===W&&Se<fe.length;Se++)this._eachEntry(fe[Se],Se)},ge.prototype._eachEntry=function(fe,Se){var Ce=this._instanceConstructor,Ne=Ce.resolve;if(Ne===F){var Oe,Me=void 0,Ue=void 0,et=!1;try{Me=fe.then}catch(Fe){et=!0,Ue=Fe}Me===k&&fe._state!==W?this._settledAt(fe._state,Se,fe._result):typeof Me!="function"?(this._remaining--,this._result[Se]=fe):Ce===we?(Oe=new Ce(H),et?z(Oe,Ue):K(Oe,fe,Me),this._willSettleAt(Oe,Se)):this._willSettleAt(new Ce(function(Fe){return Fe(fe)}),Se)}else this._willSettleAt(Ne(fe),Se)},ge.prototype._settledAt=function(fe,Se,Ce){var Ne=this.promise;Ne._state===W&&(this._remaining--,fe===J?z(Ne,Ce):this._result[Se]=Ce),this._remaining===0&&M(Ne,this._result)},ge.prototype._willSettleAt=function(fe,Se){var Ce=this;$(fe,void 0,function(Ne){return Ce._settledAt(Q,Se,Ne)},function(Ne){return Ce._settledAt(J,Se,Ne)})};var ve=ge;function ge(fe,Se){this._instanceConstructor=fe,this.promise=new fe(H),this.promise[q]||me(this.promise),w(Se)?(this.length=Se.length,this._remaining=Se.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(Se),this._remaining!==0)||M(this.promise,this._result)):z(this.promise,new Error("Array Methods must be provided an Array"))}xe.prototype.catch=function(fe){return this.then(null,fe)},xe.prototype.finally=function(fe){var Se=this.constructor;return _(fe)?this.then(function(Ce){return Se.resolve(fe()).then(function(){return Ce})},function(Ce){return Se.resolve(fe()).then(function(){throw Ce})}):this.then(fe,fe)};var we=xe;function xe(fe){if(this[q]=ce++,this._result=this._state=void 0,this._subscribers=[],H!==fe){if(typeof fe!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof xe))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var Se=this;try{fe(function(Ce){re(Se,Ce)},function(Ce){z(Se,Ce)})}catch(Ce){z(Se,Ce)}}}return we.prototype.then=k,we.all=function(fe){return new ve(this,fe).promise},we.race=function(fe){var Se=this;return w(fe)?new Se(function(Ce,Ne){for(var Oe=fe.length,Me=0;Me<Oe;Me++)Se.resolve(fe[Me]).then(Ce,Ne)}):new Se(function(Ce,Ne){return Ne(new TypeError("You must pass an array to race."))})},we.resolve=F,we.reject=function(fe){var Se=new this(H);return z(Se,fe),Se},we._setScheduler=function(fe){b=fe},we._setAsap=function(fe){v=fe},we._asap=v,we.polyfill=function(){var fe=void 0;if(f!==void 0)fe=f;else if(typeof self<"u")fe=self;else try{fe=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Se=fe.Promise;if(Se){var Ce=null;try{Ce=Object.prototype.toString.call(Se.resolve())}catch{}if(Ce==="[object Promise]"&&!Se.cast)return}fe.Promise=we},we.Promise=we},typeof c=="object"&&o!==void 0?o.exports=d():a.ES6Promise=d()}).call(this,t("_process"),typeof Oh<"u"?Oh:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:259}],251:[function(t,o,c){var l,f;l=this,f=function(a,d){var _=5e3,w="callback";function h(b){try{delete window[b]}catch{window[b]=void 0}}function m(b){b=document.getElementById(b),b&&document.getElementsByTagName("head")[0].removeChild(b)}d.exports=function(b){var v=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],g=b,p=v.timeout||_,y=v.jsonpCallback||w,S=void 0;return new Promise(function(j,A){var N=v.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),C=y+"_"+N,T=(window[N]=function(R){j({ok:!0,json:function(){return Promise.resolve(R)}}),S&&clearTimeout(S),m(C),h(N)},g+=g.indexOf("?")===-1?"?":"&",document.createElement("script"));T.setAttribute("src",""+g+y+"="+N),v.charset&&T.setAttribute("charset",v.charset),T.id=C,document.getElementsByTagName("head")[0].appendChild(T),S=setTimeout(function(){A(new Error("JSONP request to "+b+" timed out")),h(N),m(C),window[N]=function(){h(N)}},p),T.onerror=function(){A(new Error("JSONP request to "+b+" failed")),h(N),m(C),S&&clearTimeout(S)}})}},c!==void 0&&o!==void 0?f(0,o):(f(f={exports:{}},f),l.fetchJsonp=f.exports)},{}],252:[function(t,o,c){var l=function(f){var a,d,_,w,h,m,b,v,g,p,y;if(!(f===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return y=f.document,a=function(){return f.URL||f.webkitURL||f},d=y.createElementNS("http://www.w3.org/1999/xhtml","a"),_="download"in d,w=/constructor/i.test(f.HTMLElement)||f.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent),m=function(S){(f.setImmediate||f.setTimeout)(function(){throw S},0)},b=4e4,v=function(S){setTimeout(function(){typeof S=="string"?a().revokeObjectURL(S):S.remove()},b)},g=function(S){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(S.type)?new Blob(["\uFEFF",S],{type:S.type}):S},y=(p=function(S,j,R){R||(S=g(S));var N,C,T=this,R=S.type==="application/octet-stream",P=function(){for(var k=T,F="writestart progress write writeend".split(" "),D=void 0,q=(F=[].concat(F)).length;q--;){var H=k["on"+F[q]];if(typeof H=="function")try{H.call(k,D||k)}catch(W){m(W)}}};T.readyState=T.INIT,_?(N=a().createObjectURL(S),setTimeout(function(){var k,F;d.href=N,d.download=j,k=d,F=new MouseEvent("click"),k.dispatchEvent(F),P(),v(N),T.readyState=T.DONE})):(h||R&&w)&&f.FileReader?((C=new FileReader).onloadend=function(){var k=h?C.result:C.result.replace(/^data:[^;]*;/,"data:attachment/file;");f.open(k,"_blank")||(f.location.href=k),k=void 0,T.readyState=T.DONE,P()},C.readAsDataURL(S),T.readyState=T.INIT):(N=N||a().createObjectURL(S),!R&&f.open(N,"_blank")||(f.location.href=N),T.readyState=T.DONE,P(),v(N))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(S,j,A){return j=j||S.name||"download",A||(S=g(S)),navigator.msSaveOrOpenBlob(S,j)}:(y.abort=function(){},y.readyState=y.INIT=0,y.WRITING=1,y.DONE=2,y.error=y.onwritestart=y.onprogress=y.onwrite=y.onabort=y.onerror=y.onwriteend=null,function(S,j,A){return new p(S,j||S.name||"download",A)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);o!==void 0&&o.exports?o.exports.saveAs=l:n!=null},{}],253:[function(t,o,c){var l,f=Object.defineProperty,a=(f(c,"__esModule",{value:!0}),c),d={GIFEncoder:()=>P,applyPalette:()=>function(W,Q,J="rgb565"){if(!W||!W.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(W instanceof Uint8Array||W instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<Q.length)throw new Error("applyPalette() only works with 256 colors or less");const Z=new Uint32Array(W.buffer),K=Z.length,re=J==="rgb444"?4096:65536,oe=new Uint8Array(K),M=new Array(re);if(J==="rgba4444")for(let xe=0;xe<K;xe++){var le=Z[xe],z=le>>24&255,$=le>>16&255,ee=le>>8&255,le=255&le,ce=v(le,ee,$,z),ce=ce in M?M[ce]:M[ce]=function(fe,Se,Ce,Ne,Oe){let Me=0,Ue=1e100;for(let ut=0;ut<Oe.length;ut++){var et,Fe=Oe[ut],mt=C(Fe[3]-Ne);mt>Ue||(et=Fe[0],(mt+=C(et-fe))>Ue||(et=Fe[1],(mt+=C(et-Se))>Ue||(et=Fe[2],(mt+=C(et-Ce))>Ue||(Ue=mt,Me=ut))))}return Me}(le,ee,$,z,Q);oe[xe]=ce}else{const xe=J==="rgb444"?g:b;for(let fe=0;fe<K;fe++){var ge=Z[fe],me=ge>>16&255,ve=ge>>8&255,ge=255&ge,we=xe(ge,ve,me),we=we in M?M[we]:M[we]=function(Se,Ce,Ne,Oe){let Me=0,Ue=1e100;for(let ut=0;ut<Oe.length;ut++){var et,Fe=Oe[ut],mt=C(Fe[0]-Se);mt>Ue||(et=Fe[1],(mt+=C(et-Ce))>Ue||(et=Fe[2],(mt+=C(et-Ne))>Ue||(Ue=mt,Me=ut)))}return Me}(ge,ve,me,Q);oe[fe]=we}}return oe},default:()=>H,nearestColor:()=>function(W,Q,J=A){return W[T(W,Q,J)]},nearestColorIndex:()=>T,nearestColorIndexWithDistance:()=>R,prequantize:()=>function(W,{roundRGB:Q=5,roundAlpha:J=10,oneBitAlpha:Z=null}={}){const K=new Uint32Array(W.buffer);for(let $=0;$<K.length;$++){var z=K[$];let ee=z>>24&255;var re,oe=z>>16&255,M=z>>8&255,z=255&z;ee=N(ee,J),Z&&(re=typeof Z=="number"?Z:127,ee=ee<=re?0:255),z=N(z,Q),M=N(M,Q),oe=N(oe,Q),K[$]=ee<<24|oe<<16|M<<8|z<<0}},quantize:()=>function(W,Q,J={}){var{format:Z="rgb565",clearAlpha:K=!0,clearAlphaColor:re=0,clearAlphaThreshold:oe=0,oneBitAlpha:M=!1}=J;if(!W||!W.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(W instanceof Uint8Array||W instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");W=new Uint32Array(W.buffer);let z=J.useSqrt!==!1;const $=Z==="rgba4444",ee=function(it,ft){const at=ft==="rgb444"?4096:65536,Le=new Array(at),Je=it.length;if(ft==="rgba4444")for(let Tt=0;Tt<Je;++Tt){var ie=it[Tt],Ie=ie>>24&255,de=ie>>16&255,he=ie>>8&255,ie=255&ie,ye=v(ie,he,de,Ie);let jt=ye in Le?Le[ye]:Le[ye]=j();jt.rc+=ie,jt.gc+=he,jt.bc+=de,jt.ac+=Ie,jt.cnt++}else if(ft==="rgb444")for(let Tt=0;Tt<Je;++Tt){var $e=it[Tt],Pe=$e>>16&255,Ve=$e>>8&255,$e=255&$e,ct=g($e,Ve,Pe);let jt=ct in Le?Le[ct]:Le[ct]=j();jt.rc+=$e,jt.gc+=Ve,jt.bc+=Pe,jt.cnt++}else for(let Tt=0;Tt<Je;++Tt){var bt=it[Tt],yt=bt>>16&255,vt=bt>>8&255,bt=255&bt,Lt=b(bt,vt,yt);let jt=Lt in Le?Le[Lt]:Le[Lt]=j();jt.rc+=bt,jt.gc+=vt,jt.bc+=yt,jt.cnt++}return Le}(W,Z),le=ee.length,ce=le-1,me=new Uint32Array(le+1);for(var ve=0,ge=0;ge<le;++ge){const it=ee[ge];it!=null&&(Fe=1/it.cnt,$&&(it.ac*=Fe),it.rc*=Fe,it.gc*=Fe,it.bc*=Fe,ee[ve++]=it)}y(Q)/ve<.022&&(z=!1);for(var we,xe,fe,ge=0;ge<ve-1;++ge)ee[ge].fw=ge+1,ee[ge+1].bk=ge,z&&(ee[ge].cnt=Math.sqrt(ee[ge].cnt));for(z&&(ee[ge].cnt=Math.sqrt(ee[ge].cnt)),ge=0;ge<ve;++ge){S(ee,ge);var Se=ee[ge].err;for(xe=++me[0];1<xe&&(fe=xe>>1,!(ee[we=me[fe]].err<=Se));xe=fe)me[xe]=we;me[xe]=ge}var Ce,Ne=ve-Q;for(ge=0;ge<Ne;){for(;;){var Oe=me[1];if((Ce=ee[Oe]).tm>=Ce.mtm&&ee[Ce.nn].mtm<=Ce.tm)break;for(Ce.mtm==ce?Oe=me[1]=me[me[0]--]:(S(ee,Oe),Ce.tm=ge),Se=ee[Oe].err,xe=1;(fe=xe+xe)<=me[0]&&(fe<me[0]&&ee[me[fe]].err>ee[me[fe+1]].err&&fe++,!(Se<=ee[we=me[fe]].err));xe=fe)me[xe]=we;me[xe]=Oe}var Me=ee[Ce.nn],Ue=Ce.cnt,et=Me.cnt,Fe=1/(Ue+et);$&&(Ce.ac=Fe*(Ue*Ce.ac+et*Me.ac)),Ce.rc=Fe*(Ue*Ce.rc+et*Me.rc),Ce.gc=Fe*(Ue*Ce.gc+et*Me.gc),Ce.bc=Fe*(Ue*Ce.bc+et*Me.bc),Ce.cnt+=Me.cnt,Ce.mtm=++ge,ee[Me.bk].fw=Me.fw,ee[Me.fw].bk=Me.bk,Me.mtm=ce}let mt=[];for(ge=0;;0){let it=p(Math.round(ee[ge].rc),0,255),ft=p(Math.round(ee[ge].gc),0,255),at=p(Math.round(ee[ge].bc),0,255),Le=255;$&&(Le=p(Math.round(ee[ge].ac),0,255),M&&(ut=typeof M=="number"?M:127,Le=Le<=ut?0:255),K&&Le<=oe&&(it=ft=at=re,Le=0));var ut=$?[it,ft,at,Le]:[it,ft,at];if(function(Je,Ie){for(let ie=0;ie<Je.length;ie++){var he=Je[ie],de=he[0]===Ie[0]&&he[1]===Ie[1]&&he[2]===Ie[2],he=!(4<=he.length&&4<=Ie.length)||he[3]===Ie[3];if(de&&he)return!0}return!1}(mt,ut)||mt.push(ut),(ge=ee[ge].fw)==0)break}return mt},snapColorsToPalette:()=>function(W,Q,J=5){if(W.length&&Q.length){var Z=W.map(z=>z.slice(0,3)),K=J*J,re=W[0].length;for(let z=0;z<Q.length;z++){let $=Q[z];$=$.length<re?[$[0],$[1],$[2],255]:$.length>re?$.slice(0,3):$.slice();var M=R(Z,$.slice(0,3),A),oe=M[0],M=M[1];0<M&&M<=K&&(W[oe]=$)}}}};for(l in d)f(a,l,{get:d[l],enumerable:!0});var _={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function w(W=256){let Q=0,J=new Uint8Array(W);return{get buffer(){return J.buffer},reset(){Q=0},bytesView(){return J.subarray(0,Q)},bytes(){return J.slice(0,Q)},writeByte(K){Z(Q+1),J[Q]=K,Q++},writeBytes(K,re=0,oe=K.length){Z(Q+oe);for(let M=0;M<oe;M++)J[Q++]=K[M+re]},writeBytesView(K,re=0,oe=K.byteLength){Z(Q+oe),J.set(K.subarray(re,re+oe),Q),Q+=oe}};function Z(K){var re=J.length;if(!(K<=re)){K=Math.max(K,re*(re<1048576?2:1.125)>>>0),re!=0&&(K=Math.max(K,256));const oe=J;J=new Uint8Array(K),0<Q&&J.set(oe.subarray(0,Q),0)}}}var h=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],m=function(W,Q,J,$,K=w(512),re=new Uint8Array(256),oe=new Int32Array(5003),M=new Int32Array(5003)){var z=oe.length,$=Math.max(2,$);re.fill(0),M.fill(0),oe.fill(-1);let ee=0,le=0;var ce=$+1;const me=ce;let ve=!1,ge=me,we=(1<<ge)-1;var xe=1<<ce-1;const fe=1+xe;let Se=2+xe,Ce=0,Ne=J[0],Oe=0;for(let ut=z;ut<65536;ut*=2)++Oe;Oe=8-Oe,K.writeByte($),mt(xe);var Me=J.length;for(let ut=1;ut<Me;ut++)e:{var Ue=J[ut],et=(Ue<<12)+Ne;let it=Ue<<Oe^Ne;if(oe[it]===et)Ne=M[it];else{for(var Fe=it===0?1:z-it;0<=oe[it];)if((it-=Fe)<0&&(it+=z),oe[it]===et){Ne=M[it];break e}mt(Ne),Ne=Ue,Se<4096?(M[it]=Se++,oe[it]=et):(oe.fill(-1),Se=2+xe,ve=!0,mt(xe))}}return mt(Ne),mt(fe),K.writeByte(0),K.bytesView();function mt(ut){for(ee&=h[le],0<le?ee|=ut<<le:ee=ut,le+=ge;8<=le;)re[Ce++]=255&ee,254<=Ce&&(K.writeByte(Ce),K.writeBytesView(re,0,Ce),Ce=0),ee>>=8,le-=8;if((Se>we||ve)&&(ve?(ge=me,we=(1<<ge)-1,ve=!1):(++ge,we=ge===12?1<<ge:(1<<ge)-1)),ut==fe){for(;0<le;)re[Ce++]=255&ee,254<=Ce&&(K.writeByte(Ce),K.writeBytesView(re,0,Ce),Ce=0),ee>>=8,le-=8;0<Ce&&(K.writeByte(Ce),K.writeBytesView(re,0,Ce),Ce=0)}}};function b(W,Q,J){return W<<8&63488|Q<<2&992|J>>3}function v(W,Q,J,Z){return W>>4|240&Q|(240&J)<<4|(240&Z)<<8}function g(W,Q,J){return W>>4<<8|240&Q|J>>4}function p(W,Q,J){return W<Q?Q:J<W?J:W}function y(W){return W*W}function S(W,Q,J){var Z=0,K=1e100;const re=W[Q];for(var oe=re.cnt,M=re.ac,z=re.rc,$=re.gc,ee=re.bc,le=re.fw;le!=0;le=W[le].fw){var ce,me=W[le],ve=me.cnt,ve=oe*ve/(oe+ve);K<=ve||(ce=0,K<=(ce+=ve*y(me.rc-z))||K<=(ce+=ve*y(me.gc-$))||K<=(ce+=ve*y(me.bc-ee))||(K=ce,Z=le))}re.err=K,re.nn=Z}function j(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function A(W,Q){for(var J=0,Z=0;Z<W.length;Z++){var K=W[Z]-Q[Z];J+=K*K}return J}function N(W,Q){return 1<Q?Math.round(W/Q)*Q:W}function C(W){return W*W}function T(W,Q,J=A){let Z=1/0,K=-1;for(let oe=0;oe<W.length;oe++){var re=J(Q,W[oe]);re<Z&&(Z=re,K=oe)}return K}function R(W,Q,J=A){let Z=1/0,K=-1;for(let oe=0;oe<W.length;oe++){var re=J(Q,W[oe]);re<Z&&(Z=re,K=oe)}return[K,Z]}function P(W={}){const{initialCapacity:Q=4096,auto:J=!0}=W,Z=w(Q),K=new Uint8Array(256),re=new Int32Array(5003),oe=new Int32Array(5003);let M=!1;return{reset(){Z.reset(),M=!1},finish(){Z.writeByte(_.trailer)},bytes(){return Z.bytes()},bytesView(){return Z.bytesView()},get buffer(){return Z.buffer},get stream(){return Z},writeHeader:z,writeFrame($,ee,le,Ne={}){var{transparent:me=!1,transparentIndex:ve=0,delay:Fe=0,palette:ge=null,repeat:Me=0,colorDepth:we=8,dispose:xe=-1}=Ne;let fe=!1;if(J?M||(fe=!0,z(),M=!0):fe=!!Ne.first,ee=Math.max(0,Math.floor(ee)),le=Math.max(0,Math.floor(le)),fe){if(!ge)throw new Error("First frame must include a { palette } option");var[Ne,Ue,Ce,et,Oe=8]=[Z,ee,le,ge,we];et=q(et.length)-1,Oe=128|Oe-1<<4|et,F(Ne,Ue),F(Ne,Ce),Ne.writeBytes([Oe,0,0]),k(Z,ge),0<=Me&&(et=Z,Ue=Me,et.writeByte(33),et.writeByte(255),et.writeByte(11),D(et,"NETSCAPE2.0"),et.writeByte(3),et.writeByte(1),F(et,Ue),et.writeByte(0))}var Se,Ce=Math.round(Fe/10),Ne=Z,Oe=xe,Me=Ce,Ue=me,et=ve,Fe=(Ne.writeByte(33),Ne.writeByte(249),Ne.writeByte(4),et<0&&(et=0,Ue=!1),Ue=Ue?(Se=1,2):Se=0,0<=Oe&&(Ue=7&Oe),Ue<<=2,Ne.writeByte(0|Ue|Se),F(Ne,Me),Ne.writeByte(et||0),Ne.writeByte(0),!!ge&&!fe);xe=Z,me=ee,ve=le,Se=Fe?ge:null,xe.writeByte(44),F(xe,0),F(xe,0),F(xe,me),F(xe,ve),Se?(me=q(Se.length)-1,xe.writeByte(128|me)):xe.writeByte(0),Fe&&k(Z,ge),[Me,Ne,ve,me,xe=8,Fe,ge,$]=[Z,$,ee,le,we,K,re,oe],m(ve,me,Ne,xe,Me,Fe,ge,$)}};function z(){D(Z,"GIF89a")}}function k(W,Q){var J=1<<q(Q.length);for(let Z=0;Z<J;Z++){let K=[0,0,0];Z<Q.length&&(K=Q[Z]),W.writeByte(K[0]),W.writeByte(K[1]),W.writeByte(K[2])}}function F(W,Q){W.writeByte(255&Q),W.writeByte(Q>>8&255)}function D(W,Q){for(var J=0;J<Q.length;J++)W.writeByte(Q.charCodeAt(J))}function q(W){return Math.max(Math.ceil(Math.log2(W)),1)}var H=P},{}],254:[function(t,o,c){c.read=function(l,f,a,d,S){var w,h,m=8*S-d-1,b=(1<<m)-1,v=b>>1,g=-7,p=a?S-1:0,y=a?-1:1,S=l[f+p];for(p+=y,w=S&(1<<-g)-1,S>>=-g,g+=m;0<g;w=256*w+l[f+p],p+=y,g-=8);for(h=w&(1<<-g)-1,w>>=-g,g+=d;0<g;h=256*h+l[f+p],p+=y,g-=8);if(w===0)w=1-v;else{if(w===b)return h?NaN:1/0*(S?-1:1);h+=Math.pow(2,d),w-=v}return(S?-1:1)*h*Math.pow(2,w-d)},c.write=function(l,f,a,d,_,j){var h,m,b=8*j-_-1,v=(1<<b)-1,g=v>>1,p=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=d?0:j-1,S=d?1:-1,j=f<0||f===0&&1/f<0?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(m=isNaN(f)?1:0,h=v):(h=Math.floor(Math.log(f)/Math.LN2),f*(d=Math.pow(2,-h))<1&&(h--,d*=2),2<=(f+=1<=h+g?p/d:p*Math.pow(2,1-g))*d&&(h++,d/=2),v<=h+g?(m=0,h=v):1<=h+g?(m=(f*d-1)*Math.pow(2,_),h+=g):(m=f*Math.pow(2,g-1)*Math.pow(2,_),h=0));8<=_;l[a+y]=255&m,y+=S,m/=256,_-=8);for(h=h<<_|m,b+=_;0<b;l[a+y]=255&h,y+=S,h/=256,b-=8);l[a+y-S]|=128*j}},{}],255:[function(t,o,c){var l;function f(de,he){return de.b===he.b&&de.a===he.a}function a(de,he){return de.b<he.b||de.b===he.b&&de.a<=he.a}function d(de,he,ie){var ye=he.b-de.b,Pe=ie.b-he.b;return 0<ye+Pe?ye<Pe?he.a-de.a+ye/(ye+Pe)*(de.a-ie.a):he.a-ie.a+Pe/(ye+Pe)*(ie.a-de.a):0}function _(de,he,ie){var ye=he.b-de.b,Pe=ie.b-he.b;return 0<ye+Pe?(he.a-ie.a)*ye+(he.a-de.a)*Pe:0}function w(de,he){return de.a<he.a||de.a===he.a&&de.b<=he.b}function h(de,he,ie){var ye=he.a-de.a,Pe=ie.a-he.a;return 0<ye+Pe?ye<Pe?he.b-de.b+ye/(ye+Pe)*(de.b-ie.b):he.b-ie.b+Pe/(ye+Pe)*(ie.b-de.b):0}function m(de,he,ie){var ye=he.a-de.a,Pe=ie.a-he.a;return 0<ye+Pe?(he.b-ie.b)*ye+(he.b-de.b)*Pe:0}function b(de,he,ie,ye){return(de=de<0?0:de)<=(ie=ie<0?0:ie)?ie===0?(he+ye)/2:he+de/(de+ie)*(ye-he):ye+ie/(de+ie)*(he-ye)}function v(de){var he=j(de.b);return N(he,de.c),N(he.b,de.c),C(he,de.a),he}function g(de,he){var ie=!1,ye=!1;de!==he&&(he.a!==de.a&&(ye=!0,R(he.a,de.a)),he.d!==de.d&&(ie=!0,P(he.d,de.d)),A(he,de),ye||(N(he,de.a),de.a.c=de),ie||(C(he,de.d),de.d.a=de))}function p(de){var he=de.b,ie=!1;de.d!==de.b.d&&(ie=!0,P(de.d,de.b.d)),de.c===de?R(de.a,null):(de.b.d.a=de.b.e,de.a.c=de.c,A(de,de.b.e),ie||C(de,de.d)),he.c===he?(R(he.a,null),P(he.d,null)):(de.d.a=he.b.e,he.a.c=he.c,A(he,he.b.e)),T(de)}function y(de){var he=j(de),ie=he.b;return A(he,de.e),he.a=de.b.a,N(ie,he.a),he.d=ie.d=de.d,he=he.b,A(de.b,de.b.b.e),A(de.b,he),de.b.a=he.a,he.b.a.c=he.b,he.b.d=de.b.d,he.f=de.f,he.b.f=de.b.f,he}function S(de,he){var ie=!1,ye=j(de),Pe=ye.b;return he.d!==de.d&&(ie=!0,P(he.d,de.d)),A(ye,de.e),A(Pe,he),ye.a=de.b.a,Pe.a=he.a,ye.d=Pe.d=de.d,de.d.a=Pe,ie||C(ye,de.d),ye}function j(de){var he=new Ce,ie=new Ce,ye=de.b.h;return(((ie.h=ye).b.h=he).h=de).b.h=ie,he.b=ie,((he.c=he).e=ie).b=he,(ie.c=ie).e=he}function A(de,he){var ie=de.c,ye=he.c;ie.b.e=he,(ye.b.e=de).c=ye,he.c=ie}function N(de,he){var ie=he.f,ye=new Oe(he,ie);for(ie.e=ye,ie=(he.f=ye).c=de;ie.a=ye,(ie=ie.c)!==de;);}function C(de,he){var ie=he.d,ye=new Se(he,ie);for(ie.b=ye,(he.d=ye).a=de,ye.c=he.c,ie=de;ie.d=ye,(ie=ie.e)!==de;);}function T(de){var he=de.h;de=de.b.h,(he.b.h=de).b.h=he}function R(de,he){for(var ie=de.c,ye=ie;ye.a=he,(ye=ye.c)!==ie;);ie=de.f,((ye=de.e).f=ie).e=ye}function P(de,he){for(var ie=de.a,ye=ie;ye.d=he,(ye=ye.e)!==ie;);ie=de.d,((ye=de.b).d=ie).b=ye}function k(de){var he=0;return Math.abs(de[1])>Math.abs(de[0])&&(he=1),he=Math.abs(de[2])>Math.abs(de[he])?2:he}function F(de,he){de.f+=he.f,de.b.f+=he.b.f}function D(de,he,ie){return de=de.a,he=he.a,ie=ie.a,he.b.a===de?ie.b.a===de?a(he.a,ie.a)?_(ie.b.a,he.a,ie.a)<=0:0<=_(he.b.a,ie.a,he.a):_(ie.b.a,de,ie.a)<=0:ie.b.a===de?0<=_(he.b.a,de,he.a):(he=d(he.b.a,de,he.a),(de=d(ie.b.a,de,ie.a))<=he)}function q(de){de.a.i=null;var he=de.e;he.a.c=he.c,he.c.a=he.a,de.e=null}function H(de,he){p(de.a),de.c=!1,(de.a=he).i=de}function W(de){for(var he=de.a.a;(de=Ie(de)).a.a===he;);return de.c&&(H(de,he=S(Je(de).a.b,de.a.e)),de=Ie(de)),de}function Q(de,he,ie){var ye=new Le;return ye.a=ie,ye.e=ve(de.f,he.e,ye),ie.i=ye}function J(de,he){switch(de.s){case 100130:return(1&he)!=0;case 100131:return he!==0;case 100132:return 0<he;case 100133:return he<0;case 100134:return 2<=he||he<=-2}return!1}function Z(de){var he=de.a,ie=he.d;ie.c=de.d,ie.a=he,q(de)}function K(de,he,ie){for(he=(de=he).a;de!==ie;){de.c=!1;var ye=Je(de),Pe=ye.a;if(Pe.a!==he.a){if(!ye.c){Z(de);break}H(ye,Pe=S(he.c.b,Pe.b))}he.c!==Pe&&(g(Pe.b.e,Pe),g(he,Pe)),Z(de),he=ye.a,de=ye}return he}function re(de,he,ie,ye,Pe,Ve){for(var $e=!0;Q(de,he,ie.b),(ie=ie.c)!==ye;);for(Pe===null&&(Pe=Je(he).a.b.c);(ie=(ye=Je(he)).a.b).a===Pe.a;)ie.c!==Pe&&(g(ie.b.e,ie),g(Pe.b.e,ie)),ye.f=he.f-ie.f,ye.d=J(de,ye.f),he.b=!0,!$e&&$(de,he)&&(F(ie,Pe),q(he),p(Pe)),$e=!1,he=ye,Pe=ie;he.b=!0,Ve&&le(de,he)}function oe(de,he,ie,ye,Pe){var Ve=[he.g[0],he.g[1],he.g[2]];he.d=null,he.d=de.o&&de.o(Ve,ie,ye,de.c)||null,he.d===null&&(Pe?de.n||(fe(de,100156),de.n=!0):he.d=ie[0])}function M(de,he,ie){var ye=[null,null,null,null];ye[0]=he.a.d,ye[1]=ie.a.d,oe(de,he.a,ye,[.5,.5,0,0],!1),g(he,ie)}function z(de,he,ie,ye,Pe){var Ve=Math.abs(he.b-de.b)+Math.abs(he.a-de.a),$e=Math.abs(ie.b-de.b)+Math.abs(ie.a-de.a),ct=Pe+1;ye[Pe]=.5*$e/(Ve+$e),ye[ct]=.5*Ve/(Ve+$e),de.g[0]+=ye[Pe]*he.g[0]+ye[ct]*ie.g[0],de.g[1]+=ye[Pe]*he.g[1]+ye[ct]*ie.g[1],de.g[2]+=ye[Pe]*he.g[2]+ye[ct]*ie.g[2]}function $(de,he){var ie=Je(he),ye=he.a,Pe=ie.a;if(a(ye.a,Pe.a)){if(0<_(Pe.b.a,ye.a,Pe.a))return;if(f(ye.a,Pe.a)){if(ye.a!==Pe.a){var ie=de.e,Ve=ye.a.h;if(0<=Ve){var $e=(ie=ie.b).d,ct=ie.e,yt=ie.c,vt=yt[Ve];$e[vt]=$e[ie.a],(yt[$e[vt]]=vt)<=--ie.a&&(vt<=1||a(ct[$e[vt>>1]],ct[$e[vt]])?ft:at)(ie,vt),ct[Ve]=null,yt[Ve]=ie.b,ie.b=Ve}else for(ie.c[-(Ve+1)]=null;0<ie.a&&ie.c[ie.d[ie.a-1]]===null;)--ie.a;M(de,Pe.b.e,ye)}}else y(Pe.b),g(ye,Pe.b.e),he.b=ie.b=!0}else{if(_(ye.b.a,Pe.a,ye.a)<0)return;Ie(he).b=he.b=!0,y(ye.b),g(Pe.b.e,ye)}return 1}function ee(de,he){var ie=Je(he),ye=he.a,Pe=ie.a,Ve=ye.a,$e=Pe.a,ct=ye.b.a,yt=Pe.b.a,vt=new Oe;if(_(ct,de.a,Ve),_(yt,de.a,$e),!(Ve===$e||Math.min(Ve.a,ct.a)>Math.max($e.a,yt.a))){if(a(Ve,$e)){if(0<_(yt,Ve,$e))return}else if(_(ct,$e,Ve)<0)return;var bt,Lt,Tt=ct,jt=Ve,Nt=yt,kt=$e;if(a(Tt,jt)||(bt=Tt,Tt=jt,jt=bt),a(Nt,kt)||(bt=Nt,Nt=kt,kt=bt),a(Tt,Nt)||(bt=Tt,Tt=Nt,Nt=bt,bt=jt,jt=kt,kt=bt),a(Nt,jt)?a(jt,kt)?((bt=d(Tt,Nt,jt))+(Lt=d(Nt,jt,kt))<0&&(bt=-bt,Lt=-Lt),vt.b=b(bt,Nt.b,Lt,jt.b)):((bt=_(Tt,Nt,jt))+(Lt=-_(Tt,kt,jt))<0&&(bt=-bt,Lt=-Lt),vt.b=b(bt,Nt.b,Lt,kt.b)):vt.b=(Nt.b+jt.b)/2,w(Tt,jt)||(bt=Tt,Tt=jt,jt=bt),w(Nt,kt)||(bt=Nt,Nt=kt,kt=bt),w(Tt,Nt)||(bt=Tt,Tt=Nt,Nt=bt,bt=jt,jt=kt,kt=bt),w(Nt,jt)?w(jt,kt)?((bt=h(Tt,Nt,jt))+(Lt=h(Nt,jt,kt))<0&&(bt=-bt,Lt=-Lt),vt.a=b(bt,Nt.a,Lt,jt.a)):((bt=m(Tt,Nt,jt))+(Lt=-m(Tt,kt,jt))<0&&(bt=-bt,Lt=-Lt),vt.a=b(bt,Nt.a,Lt,kt.a)):vt.a=(Nt.a+jt.a)/2,a(vt,de.a)&&(vt.b=de.a.b,vt.a=de.a.a),Tt=a(Ve,$e)?Ve:$e,a(Tt,vt)&&(vt.b=Tt.b,vt.a=Tt.a),f(vt,Ve)||f(vt,$e))return $(de,he),0;if(!f(ct,de.a)&&0<=_(ct,de.a,vt)||!f(yt,de.a)&&_(yt,de.a,vt)<=0){if(yt===de.a)y(ye.b),g(Pe.b,ye),ye=Je(he=W(he)).a,K(de,Je(he),ie),re(de,he,ye.b.e,ye,ye,!0);else{if(ct!==de.a)return 0<=_(ct,de.a,vt)&&(Ie(he).b=he.b=!0,y(ye.b),ye.a.b=de.a.b,ye.a.a=de.a.a),void(_(yt,de.a,vt)<=0&&(he.b=ie.b=!0,y(Pe.b),Pe.a.b=de.a.b,Pe.a.a=de.a.a));for(y(Pe.b),g(ye.e,Pe.b.e),$e=(Ve=ie=he).a.b.a;(Ve=Ie(Ve)).a.b.a===$e;);Ve=Je(he=Ve).a.b.c,ie.a=Pe.b.e,re(de,he,(Pe=K(de,ie,null)).c,ye.b.c,Ve,!0)}return 1}y(ye.b),y(Pe.b),g(Pe.b.e,ye),ye.a.b=vt.b,ye.a.a=vt.a,ye.a.h=Ue(de.e,ye.a),ye=ye.a,Pe=[0,0,0,0],vt=[Ve.d,ct.d,$e.d,yt.d],ye.g[0]=ye.g[1]=ye.g[2]=0,z(ye,Ve,ct,Pe,0),z(ye,$e,yt,Pe,2),oe(de,ye,vt,Pe,!0),Ie(he).b=he.b=ie.b=!0}}function le(de,he){for(var ie=Je(he);;){for(;ie.b;)ie=Je(he=ie);if(!he.b&&((he=Ie(ie=he))===null||!he.b))break;he.b=!1;var ye=he.a,Pe=ie.a;if(Ve=ye.b.a!==Pe.b.a)e:{var Ve,$e=Je(Ve=he),ct=Ve.a,yt=$e.a,vt=void 0;if(a(ct.b.a,yt.b.a)){if(_(ct.b.a,yt.b.a,ct.a)<0){Ve=!1;break e}Ie(Ve).b=Ve.b=!0,vt=y(ct),g(yt.b,vt),vt.d.c=Ve.d}else{if(0<_(yt.b.a,ct.b.a,yt.a)){Ve=!1;break e}Ve.b=$e.b=!0,vt=y(yt),g(ct.e,yt.b),vt.b.d.c=Ve.d}Ve=!0}if(Ve&&(ie.c?(q(ie),p(Pe),Pe=(ie=Je(he)).a):he.c&&(q(he),p(ye),ye=(he=Ie(ie)).a)),ye.a!==Pe.a){if(ye.b.a===Pe.b.a||he.c||ie.c||ye.b.a!==de.a&&Pe.b.a!==de.a)$(de,he);else if(ee(de,he))break}ye.a===Pe.a&&ye.b.a===Pe.b.a&&(F(Pe,ye),q(he),p(ye),he=Ie(ie))}}function ce(de,he){var ie=new Le,ye=v(de.b);ye.a.b=4e150,ye.a.a=he,ye.b.a.b=-4e150,ye.b.a.a=he,de.a=ye.b.a,ie.a=ye,ie.f=0,ie.d=!1,ie.c=!1,ie.h=!0,ie.b=!1,ye=ve(ye=de.f,ye.a,ie),ie.e=ye}function me(de){this.a=new ge,this.b=de,this.c=D}function ve(de,he,ie){for(;(he=he.c).b!==null&&!de.c(de.b,he.b,ie););return de=new ge(ie,he.a,he),he.a.c=de,he.a=de}function ge(de,he,ie){this.b=de||null,this.a=he||this,this.c=ie||this}function we(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function xe(de,he){if(de.d!==he)for(;de.d!==he;)if(de.d<he)switch(de.d){case 0:fe(de,100151),de.u(null);break;case 1:fe(de,100152),de.t()}else switch(de.d){case 2:fe(de,100154),de.v();break;case 1:fe(de,100153),de.w()}}function fe(de,he){de.p&&de.p(he,de.c)}function Se(de,he){this.b=de||this,this.d=he||this,this.a=null,this.c=!1}function Ce(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Ne(){this.c=new Oe,this.a=new Se,this.b=new Ce,this.d=new Ce,this.b.b=this.d,this.d.b=this.b}function Oe(de,he){this.e=de||this,this.f=he||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function Me(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new Fe}function Ue(de,he){var ie,ye,Pe;return de.e?(2*(ye=++(ie=de.b).a)>ie.f&&(ie.f*=2,ie.c=mt(ie.c,ie.f+1)),ie.b===0?Pe=ye:(Pe=ie.b,ie.b=ie.c[ie.b]),ie.e[Pe]=he,ie.c[Pe]=ye,ie.d[ye]=Pe,ie.h&&at(ie,ye),Pe):(ie=de.a++,de.c[ie]=he,-(ie+1))}function et(de){if(de.a===0)return it(de.b);var he=de.c[de.d[de.a-1]];if(de.b.a!==0&&a(ut(de.b),he))return it(de.b);for(;--de.a,0<de.a&&de.c[de.d[de.a-1]]===null;);return he}function Fe(){this.d=mt([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function mt(de,he){for(var ie=Array(he),ye=0;ye<de.length;ye++)ie[ye]=de[ye];for(;ye<he;ye++)ie[ye]=0;return ie}function ut(de){return de.e[de.d[1]]}function it(de){var he=de.d,ie=de.e,ye=de.c,Pe=he[1],Ve=ie[Pe];return 0<de.a&&(he[1]=he[de.a],ye[he[1]]=1,ie[Pe]=null,ye[Pe]=de.b,de.b=Pe,0<--de.a&&ft(de,1)),Ve}function ft(de,he){for(var ie=de.d,ye=de.e,Pe=de.c,Ve=he,$e=ie[Ve];;){var ct=Ve<<1,yt=(ct<de.a&&a(ye[ie[ct+1]],ye[ie[ct]])&&(ct+=1),ie[ct]);if(ct>de.a||a(ye[$e],ye[yt])){Pe[ie[Ve]=$e]=Ve;break}Pe[ie[Ve]=yt]=Ve,Ve=ct}}function at(de,he){for(var ie=de.d,ye=de.e,Pe=de.c,Ve=he,$e=ie[Ve];;){var ct=Ve>>1,yt=ie[ct];if(ct==0||a(ye[yt],ye[$e])){Pe[ie[Ve]=$e]=Ve;break}Pe[ie[Ve]=yt]=Ve,Ve=ct}}function Le(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function Je(de){return de.e.c.b}function Ie(de){return de.e.a.b}(l=we.prototype).x=function(){xe(this,0)},l.B=function(de,he){switch(de){case 100142:return;case 100140:switch(he){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=he)}break;case 100141:return void(this.m=!!he);default:return void fe(this,100900)}fe(this,100901)},l.y=function(de){switch(de){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:fe(this,100900)}return!1},l.A=function(de,he,ie){this.j[0]=de,this.j[1]=he,this.j[2]=ie},l.z=function(de,he){var ie=he||null;switch(de){case 100100:case 100106:this.h=ie;break;case 100104:case 100110:this.l=ie;break;case 100101:case 100107:this.k=ie;break;case 100102:case 100108:this.i=ie;break;case 100103:case 100109:this.p=ie;break;case 100105:case 100111:this.o=ie;break;case 100112:this.r=ie;break;default:fe(this,100900)}},l.C=function(de,he){var ie=!1,ye=[0,0,0];xe(this,2);for(var Pe=0;Pe<3;++Pe){var Ve=de[Pe];Ve<-1e150&&(Ve=-1e150,ie=!0),1e150<Ve&&(Ve=1e150,ie=!0),ye[Pe]=Ve}ie&&fe(this,100155),(ie=this.q)===null?g(ie=v(this.b),ie.b):(y(ie),ie=ie.e),ie.a.d=he,ie.a.g[0]=ye[0],ie.a.g[1]=ye[1],ie.a.g[2]=ye[2],ie.f=1,ie.b.f=-1,this.q=ie},l.u=function(de){xe(this,0),this.d=1,this.b=new Ne,this.c=de},l.t=function(){xe(this,1),this.d=2,this.q=null},l.v=function(){xe(this,2),this.d=1},l.w=function(){xe(this,1),this.d=0;var de,he,ie=this.j[0],ye=this.j[1],Pe=this.j[2],Ve=!1,$e=[ie,ye,Pe];if(ie===0&&ye===0&&Pe===0){for(var ye=[-2e150,-2e150,-2e150],ct=[2e150,2e150,2e150],Pe=[],yt=[],ie=(Ve=this.b.c).e;ie!==Ve;ie=ie.e)for(var vt=0;vt<3;++vt){var bt=ie.g[vt];bt<ct[vt]&&(ct[vt]=bt,yt[vt]=ie),bt>ye[vt]&&(ye[vt]=bt,Pe[vt]=ie)}if(ye[1]-ct[1]>ye[ie=0]-ct[0]&&(ie=1),ct[ie=ye[2]-ct[2]>ye[ie]-ct[ie]?2:ie]>=ye[ie])$e[0]=0,$e[1]=0,$e[2]=1;else{for(ct=yt[ie],Pe=Pe[ie],yt=[ye=0,0,0],ct=[ct.g[0]-Pe.g[0],ct.g[1]-Pe.g[1],ct.g[2]-Pe.g[2]],vt=[0,0,0],ie=Ve.e;ie!==Ve;ie=ie.e)vt[0]=ie.g[0]-Pe.g[0],vt[1]=ie.g[1]-Pe.g[1],vt[2]=ie.g[2]-Pe.g[2],yt[0]=ct[1]*vt[2]-ct[2]*vt[1],yt[1]=ct[2]*vt[0]-ct[0]*vt[2],yt[2]=ct[0]*vt[1]-ct[1]*vt[0],ye<(bt=yt[0]*yt[0]+yt[1]*yt[1]+yt[2]*yt[2])&&(ye=bt,$e[0]=yt[0],$e[1]=yt[1],$e[2]=yt[2]);ye<=0&&($e[0]=$e[1]=$e[2]=0,$e[k(ct)]=1)}Ve=!0}for(yt=k($e),ie=this.b.c,ye=(yt+1)%3,Pe=(yt+2)%3,yt=0<$e[yt]?1:-1,$e=ie.e;$e!==ie;$e=$e.e)$e.b=$e.g[ye],$e.a=yt*$e.g[Pe];if(Ve){for($e=0,ie=(Ve=this.b.a).b;ie!==Ve;ie=ie.b)if(!((ye=ie.a).f<=0))for(;$e+=(ye.a.b-ye.b.a.b)*(ye.a.a+ye.b.a.a),(ye=ye.e)!==ie.a;);if($e<0)for(Ve=($e=this.b.c).e;Ve!==$e;Ve=Ve.e)Ve.a=-Ve.a}for(this.n=!1,$e=this.b.b,ie=$e.h;ie!==$e;ie=Ve)Ve=ie.h,ye=ie.e,f(ie.a,ie.b.a)&&ie.e.e!==ie&&(M(this,ye,ie),p(ie),ye=(ie=ye).e),ye.e===ie&&(ye!==ie&&(ye!==Ve&&ye!==Ve.b||(Ve=Ve.h),p(ye)),ie!==Ve&&ie!==Ve.b||(Ve=Ve.h),p(ie));for(this.e=$e=new Me,Ve=this.b.c,ie=Ve.e;ie!==Ve;ie=ie.e)ie.h=Ue($e,ie);var Lt=$e;Lt.d=[];for(var Tt=0;Tt<Lt.a;Tt++)Lt.d[Tt]=Tt;Lt.d.sort(function(kt){return function(yr,Yr){return a(kt[yr],kt[Yr])?1:-1}}(Lt.c)),Lt.e=!0;for(var jt=Lt.b,Nt=jt.a;1<=Nt;--Nt)ft(jt,Nt);for(jt.h=!0,this.f=new me(this),ce(this,-4e150),ce(this,4e150);($e=et(this.e))!==null;){for(;;){e:if((ie=this.e).a===0)Ve=ut(ie.b);else if(Ve=ie.c[ie.d[ie.a-1]],ie.b.a!==0&&a(ie=ut(ie.b),Ve)){Ve=ie;break e}if(Ve===null||!f(Ve,$e))break;Ve=et(this.e),M(this,$e.c,Ve.c)}(function kt(yr,Yr){for(var Ur,Bt=(yr.a=Yr).c;Bt.i===null;)if((Bt=Bt.c)===Yr.c){var Bt=yr,Cr=Yr;(mr=new Le).a=Cr.c.b;for(var zr=(Zt=Bt.f).a;(zr=zr.a).b!==null&&!Zt.c(Zt.b,mr,zr.b););var Zt,Gr,Zr=Je(Zt=zr.b),mr=Zt.a,zr=Zr.a;return void(_(mr.b.a,Cr,mr.a)===0?f((mr=Zt.a).a,Cr)||f(mr.b.a,Cr)||(y(mr.b),Zt.c&&(p(mr.c),Zt.c=!1),g(Cr.c,mr),kt(Bt,Cr)):(Gr=a(zr.b.a,mr.b.a)?Zt:Zr,Zr=void 0,Zt.d||Gr.c?(Zr=Gr===Zt?S(Cr.c.b,mr.e):S(zr.b.c.b,Cr.c).b,Gr.c?H(Gr,Zr):((Zt=Q(mr=Bt,Zt,Zr)).f=Ie(Zt).f+Zt.a.f,Zt.d=J(mr,Zt.f)),kt(Bt,Cr)):re(Bt,Zt,Cr.c,Cr.c,null,!0)))}Zt=(mr=Je(Bt=W(Bt.i))).a,(mr=K(yr,mr,null)).c===Zt?(mr=(Zt=mr).c,zr=Je(Bt),Zr=Bt.a,Gr=zr.a,Ur=!1,Zr.b.a!==Gr.b.a&&ee(yr,Bt),f(Zr.a,yr.a)&&(g(mr.b.e,Zr),mr=Je(Bt=W(Bt)).a,K(yr,Je(Bt),zr),Ur=!0),f(Gr.a,yr.a)&&(g(Zt,Gr.b.e),Zt=K(yr,zr,null),Ur=!0),Ur?re(yr,Bt,Zt.c,mr,mr,!0):(Cr=a(Gr.a,Zr.a)?Gr.b.e:Zr,re(yr,Bt,Cr=S(Zt.c.b,Cr),Cr.c,Cr.c,!1),Cr.b.i.c=!0,le(yr,Bt))):re(yr,Bt,mr.c,Zt,Zt,!0)})(this,$e)}for(this.a=this.f.a.a.b.a.a,$e=0;(Ve=this.f.a.a.b)!==null;)Ve.h||++$e,q(Ve);for(this.f=null,($e=this.e).b=null,$e.d=null,this.e=$e.c=null,$e=this.b,ie=$e.a.b;ie!==$e.a;ie=Ve)Ve=ie.b,(ie=ie.a).e.e===ie&&(F(ie.c,ie),p(ie));if(!this.n){if($e=this.b,this.m)for(ie=$e.b.h;ie!==$e.b;ie=Ve)Ve=ie.h,ie.b.d.c!==ie.d.c?ie.f=ie.d.c?1:-1:p(ie);else for(ie=$e.a.b;ie!==$e.a;ie=Ve)if(Ve=ie.b,ie.c){for(ie=ie.a;a(ie.b.a,ie.a);ie=ie.c.b);for(;a(ie.a,ie.b.a);ie=ie.e);for(ye=ie.c.b,Pe=void 0;ie.e!==ye;)if(a(ie.b.a,ye.a)){for(;ye.e!==ie&&(a((he=ye.e).b.a,he.a)||_(ye.a,ye.b.a,ye.e.b.a)<=0);)ye=(Pe=S(ye.e,ye)).b;ye=ye.c.b}else{for(;ye.e!==ie&&(a((de=ie.c.b).a,de.b.a)||0<=_(ie.b.a,ie.a,ie.c.b.a));)ie=(Pe=S(ie,ie.c.b)).b;ie=ie.e}for(;ye.e.e!==ie;)Pe=S(ye.e,ye),ye=Pe.b}if(this.h||this.i||this.k||this.l)if(this.m){for(Ve=($e=this.b).a.b;Ve!==$e.a;Ve=Ve.b)if(Ve.c){for(this.h&&this.h(2,this.c),ie=Ve.a;this.k&&this.k(ie.a.d,this.c),(ie=ie.e)!==Ve.a;);this.i&&this.i(this.c)}}else{for($e=this.b,Ve=!!this.l,ie=!1,ye=-1,Pe=$e.a.d;Pe!==$e.a;Pe=Pe.d)if(Pe.c)for(ie||(this.h&&this.h(4,this.c),ie=!0),yt=Pe.a;Ve&&(ct=yt.b.d.c?0:1,ye!==ct&&(ye=ct,this.l&&this.l(!!ye,this.c))),this.k&&this.k(yt.a.d,this.c),(yt=yt.e)!==Pe.a;);ie&&this.i&&this.i(this.c)}if(this.r){for($e=this.b,ie=$e.a.b;ie!==$e.a;ie=Ve)if(Ve=ie.b,!ie.c){for(Pe=(ye=ie.a).e,yt=void 0;Pe=(yt=Pe).e,(yt.d=null)===yt.b.d&&(yt.c===yt?R(yt.a,null):(yt.a.c=yt.c,A(yt,yt.b.e)),(ct=yt.b).c===ct?R(ct.a,null):(ct.a.c=ct.c,A(ct,ct.b.e)),T(yt)),yt!==ye;);ye=ie.d,((ie=ie.b).d=ye).b=ie}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:we,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},we.prototype.gluDeleteTess=we.prototype.x,we.prototype.gluTessProperty=we.prototype.B,we.prototype.gluGetTessProperty=we.prototype.y,we.prototype.gluTessNormal=we.prototype.A,we.prototype.gluTessCallback=we.prototype.z,we.prototype.gluTessVertex=we.prototype.C,we.prototype.gluTessBeginPolygon=we.prototype.u,we.prototype.gluTessBeginContour=we.prototype.t,we.prototype.gluTessEndContour=we.prototype.v,we.prototype.gluTessEndPolygon=we.prototype.w,o!==void 0&&(o.exports=this.libtess)},{}],256:[function(t,o,c){function l(a,d,_,w){var h=0,m=(w=w===void 0?{}:w).loop===void 0?null:w.loop,b=w.palette===void 0?null:w.palette;if(d<=0||_<=0||65535<d||65535<_)throw new Error("Width/Height invalid.");function v(C){if(C=C.length,C<2||256<C||C&C-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return C}a[h++]=71,a[h++]=73,a[h++]=70,a[h++]=56,a[h++]=57,a[h++]=97;var g=0,p=0;if(b!==null){for(var y=v(b);y>>=1;)++g;if(y=1<<g,--g,w.background!==void 0){if(y<=(p=w.background))throw new Error("Background index out of range.");if(p===0)throw new Error("Background index explicitly passed as 0.")}}if(a[h++]=255&d,a[h++]=d>>8&255,a[h++]=255&_,a[h++]=_>>8&255,a[h++]=(b!==null?128:0)|g,a[h++]=p,a[h++]=0,b!==null)for(var S=0,j=b.length;S<j;++S){var A=b[S];a[h++]=A>>16&255,a[h++]=A>>8&255,a[h++]=255&A}if(m!==null){if(m<0||65535<m)throw new Error("Loop count invalid.");a[h++]=33,a[h++]=255,a[h++]=11,a[h++]=78,a[h++]=69,a[h++]=84,a[h++]=83,a[h++]=67,a[h++]=65,a[h++]=80,a[h++]=69,a[h++]=50,a[h++]=46,a[h++]=48,a[h++]=3,a[h++]=1,a[h++]=255&m,a[h++]=m>>8&255,a[h++]=0}var N=!1;this.addFrame=function(C,T,R,P,k,F){if(N===!0&&(--h,N=!1),F=F===void 0?{}:F,C<0||T<0||65535<C||65535<T)throw new Error("x/y invalid.");if(R<=0||P<=0||65535<R||65535<P)throw new Error("Width/Height invalid.");if(k.length<R*P)throw new Error("Not enough pixels for the frame size.");var D=!0,q=F.palette;if(q==null&&(D=!1,q=b),q==null)throw new Error("Must supply either a local or global palette.");for(var W=v(q),H=0;W>>=1;)++H;var W=1<<H,Q=F.delay===void 0?0:F.delay,J=F.disposal===void 0?0:F.disposal;if(J<0||3<J)throw new Error("Disposal out of range.");var Z=!1,K=0;if(F.transparent!==void 0&&F.transparent!==null&&(Z=!0,(K=F.transparent)<0||W<=K))throw new Error("Transparent color index.");if(J===0&&!Z&&Q===0||(a[h++]=33,a[h++]=249,a[h++]=4,a[h++]=J<<2|(Z===!0?1:0),a[h++]=255&Q,a[h++]=Q>>8&255,a[h++]=K,a[h++]=0),a[h++]=44,a[h++]=255&C,a[h++]=C>>8&255,a[h++]=255&T,a[h++]=T>>8&255,a[h++]=255&R,a[h++]=R>>8&255,a[h++]=255&P,a[h++]=P>>8&255,a[h++]=D===!0?128|H-1:0,D===!0)for(var re=0,oe=q.length;re<oe;++re){var M=q[re];a[h++]=M>>16&255,a[h++]=M>>8&255,a[h++]=255&M}return h=function(z,$,ee,le){z[$++]=ee;var ce=$++,me=1<<ee,ve=me-1,ge=1+me,we=1+ge,xe=ee+1,fe=0,Se=0;function Ce(it){for(;it<=fe;)z[$++]=255&Se,Se>>=8,fe-=8,$===ce+256&&(z[ce]=255,ce=$++)}function Ne(it){Se|=it<<fe,fe+=xe,Ce(8)}var Oe=le[0]&ve,Me={};Ne(me);for(var Ue=1,et=le.length;Ue<et;++Ue){var Fe=le[Ue]&ve,mt=Oe<<8|Fe,ut=Me[mt];if(ut===void 0){for(Se|=Oe<<fe,fe+=xe;8<=fe;)z[$++]=255&Se,Se>>=8,fe-=8,$===ce+256&&(z[ce]=255,ce=$++);we===4096?(Ne(me),we=1+ge,xe=ee+1,Me={}):(1<<xe<=we&&++xe,Me[mt]=we++),Oe=Fe}else Oe=ut}return Ne(Oe),Ne(ge),Ce(1),ce+1===$?z[ce]=0:(z[ce]=$-ce-1,z[$++]=0),$}(a,h,H<2?2:H,k)},this.end=function(){return N===!1&&(a[h++]=59,N=!0),h},this.getOutputBuffer=function(){return a},this.setOutputBuffer=function(C){a=C},this.getOutputBufferPosition=function(){return h},this.setOutputBufferPosition=function(C){h=C}}function f(a,d,_,w){for(var h=a[d++],m=1<<h,b=1+m,v=1+b,g=h+1,p=(1<<g)-1,y=0,S=0,j=0,A=a[d++],N=new Int32Array(4096),C=null;;){for(;y<16&&A!==0;)S|=a[d++]<<y,y+=8,A===1?A=a[d++]:--A;if(y<g)break;var T=S&p;if(S>>=g,y-=g,T==m)v=1+b,p=(1<<(g=h+1))-1,C=null;else{if(T==b)break;for(var R=T<v?T:C,P=0,k=R;m<k;)k=N[k]>>8,++P;var F=k;if(w<j+P+(R!==T?1:0))return void console.log("Warning, gif stream longer than expected.");_[j++]=F;var D=j+=P;for(R!==T&&(_[j++]=F),k=R;P--;)k=N[k],_[--D]=255&k,k>>=8;C!==null&&v<4096&&(N[v++]=C<<8|F,p+1<=v&&g<12&&(++g,p=p<<1|1)),C=T}}j!==w&&console.log("Warning, gif stream shorter than expected.")}try{c.GifWriter=l,c.GifReader=function(a){var d=0;if(a[d++]!==71||a[d++]!==73||a[d++]!==70||a[d++]!==56||(a[d++]+1&253)!=56||a[d++]!==97)throw new Error("Invalid GIF 87a/89a header.");var _=a[d++]|a[d++]<<8,w=a[d++]|a[d++]<<8,h=a[d++],m=1<<1+(7&h),b=(a[d++],a[d++],null),v=null,g=(h>>7&&(b=d,d+=3*(v=m)),!0),p=[],y=0,S=null,j=0,A=null;for(this.width=_,this.height=w;g&&d<a.length;)switch(a[d++]){case 33:switch(a[d++]){case 255:if(a[d]!==11||a[d+1]==78&&a[d+2]==69&&a[d+3]==84&&a[d+4]==83&&a[d+5]==67&&a[d+6]==65&&a[d+7]==80&&a[d+8]==69&&a[d+9]==50&&a[d+10]==46&&a[d+11]==48&&a[d+12]==3&&a[d+13]==1&&a[d+16]==0)d+=14,A=a[d++]|a[d++]<<8,d++;else for(d+=12;;){if(!(0<=(C=a[d++])))throw Error("Invalid block size");if(C===0)break;d+=C}break;case 249:if(a[d++]!==4||a[d+4]!==0)throw new Error("Invalid graphics extension block.");var N=a[d++],y=a[d++]|a[d++]<<8,S=a[d++];!(1&N)&&(S=null),j=N>>2&7,d++;break;case 254:for(;;){if(!(0<=(C=a[d++])))throw Error("Invalid block size");if(C===0)break;d+=C}break;default:throw new Error("Unknown graphic control label: 0x"+a[d-1].toString(16))}break;case 44:var C,T=a[d++]|a[d++]<<8,R=a[d++]|a[d++]<<8,P=a[d++]|a[d++]<<8,k=a[d++]|a[d++]<<8,Q=a[d++],F=Q>>6&1,D=1<<1+(7&Q),q=b,H=v,W=!1,Q=(Q>>7&&(W=!0,q=d,d+=3*(H=D)),d);for(d++;;){if(!(0<=(C=a[d++])))throw Error("Invalid block size");if(C===0)break;d+=C}p.push({x:T,y:R,width:P,height:k,has_local_palette:W,palette_offset:q,palette_size:H,data_offset:Q,data_length:d-Q,transparent_index:S,interlaced:!!F,delay:y,disposal:j});break;case 59:g=!1;break;default:throw new Error("Unknown gif block: 0x"+a[d-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return A},this.frameInfo=function(J){if(J<0||J>=p.length)throw new Error("Frame index out of range.");return p[J]},this.decodeAndBlitFrameBGRA=function(J,Z){for(var J=this.frameInfo(J),K=J.width*J.height,re=new Uint8Array(K),oe=(f(a,J.data_offset,re,K),J.palette_offset),M=J.transparent_index,z=(M===null&&(M=256),J.width),$=_-z,ee=z,le=4*(J.y*_+J.x),ce=4*((J.y+J.height)*_+J.x),me=le,ve=4*$,ge=(J.interlaced===!0&&(ve+=4*_*7),8),we=0,xe=re.length;we<xe;++we){var fe,Se,Ce=re[we];ee===0&&(ee=z,ce<=(me+=ve)&&(ve=4*$+4*_*(ge-1),me=le+(z+$)*(ge<<1),ge>>=1)),Ce===M?me+=4:(fe=a[oe+3*Ce],Se=a[oe+3*Ce+1],Ce=a[oe+3*Ce+2],Z[me++]=Ce,Z[me++]=Se,Z[me++]=fe,Z[me++]=255),--ee}},this.decodeAndBlitFrameRGBA=function(J,Z){for(var J=this.frameInfo(J),K=J.width*J.height,re=new Uint8Array(K),oe=(f(a,J.data_offset,re,K),J.palette_offset),M=J.transparent_index,z=(M===null&&(M=256),J.width),$=_-z,ee=z,le=4*(J.y*_+J.x),ce=4*((J.y+J.height)*_+J.x),me=le,ve=4*$,ge=(J.interlaced===!0&&(ve+=4*_*7),8),we=0,xe=re.length;we<xe;++we){var fe,Se,Ce=re[we];ee===0&&(ee=z,ce<=(me+=ve)&&(ve=4*$+4*_*(ge-1),me=le+(z+$)*(ge<<1),ge>>=1)),Ce===M?me+=4:(fe=a[oe+3*Ce],Se=a[oe+3*Ce+1],Ce=a[oe+3*Ce+2],Z[me++]=fe,Z[me++]=Se,Z[me++]=Ce,Z[me++]=255),--ee}}}}catch{}},{}],257:[function(t,o,c){(function(l){var f,a;f=this,a=function(d){function _(X){if(this==null)throw TypeError();var I,L=String(this),G=L.length,X=X?Number(X):0;if(!((X=X!=X?0:X)<0||G<=X))return 55296<=(I=L.charCodeAt(X))&&I<=56319&&X+1<G&&56320<=(G=L.charCodeAt(X+1))&&G<=57343?1024*(I-55296)+G-56320+65536:I}String.prototype.codePointAt||((w=function(){try{var E={},I=Object.defineProperty,L=I(E,E,E)&&I}catch{}return L}())?w(String.prototype,"codePointAt",{value:_,configurable:!0,writable:!0}):String.prototype.codePointAt=_);var w,h=0,m=-3;function b(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function v(E,I){this.source=E,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=I,this.destLen=0,this.ltree=new b,this.dtree=new b}var g=new b,p=new b,y=new Uint8Array(30),S=new Uint16Array(30),j=new Uint8Array(30),A=new Uint16Array(30),N=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),C=new b,T=new Uint8Array(320);function R(E,I,L,G){for(var X,te=0;te<L;++te)E[te]=0;for(te=0;te<30-L;++te)E[te+L]=te/L|0;for(X=G,te=0;te<30;++te)I[te]=X,X+=1<<E[te]}var P=new Uint16Array(16);function k(E,I,L,G){for(var X,te=0;te<16;++te)E.table[te]=0;for(te=0;te<G;++te)E.table[I[L+te]]++;for(te=X=E.table[0]=0;te<16;++te)P[te]=X,X+=E.table[te];for(te=0;te<G;++te)I[L+te]&&(E.trans[P[I[L+te]]++]=te)}function F(E,I,L){if(!I)return L;for(;E.bitcount<24;)E.tag|=E.source[E.sourceIndex++]<<E.bitcount,E.bitcount+=8;var G=E.tag&65535>>>16-I;return E.tag>>>=I,E.bitcount-=I,G+L}function D(E,I){for(;E.bitcount<24;)E.tag|=E.source[E.sourceIndex++]<<E.bitcount,E.bitcount+=8;for(var L=0,G=0,X=0,te=E.tag;G=2*G+(1&te),te>>>=1,L+=I.table[++X],0<=(G-=I.table[X]););return E.tag=te,E.bitcount-=X,I.trans[L+G]}function q(E,I,L){for(;;){var G=D(E,I);if(G===256)return h;if(G<256)E.dest[E.destLen++]=G;else for(var X,te=F(E,y[G-=257],S[G]),G=D(E,L),se=X=E.destLen-F(E,j[G],A[G]);se<X+te;++se)E.dest[E.destLen++]=E.dest[se]}}for(var H=g,W=p,Q=0;Q<7;++Q)H.table[Q]=0;for(H.table[7]=24,H.table[8]=152,H.table[9]=112,Q=0;Q<24;++Q)H.trans[Q]=256+Q;for(Q=0;Q<144;++Q)H.trans[24+Q]=Q;for(Q=0;Q<8;++Q)H.trans[168+Q]=280+Q;for(Q=0;Q<112;++Q)H.trans[176+Q]=144+Q;for(Q=0;Q<5;++Q)W.table[Q]=0;for(W.table[5]=32,Q=0;Q<32;++Q)W.trans[Q]=Q;R(y,S,4,3),R(j,A,2,1),y[28]=0,S[28]=258;var J=function(E,I){var L,G,X,te=new v(E,I);do{switch(X=void 0,(G=te).bitcount--||(G.tag=G.source[G.sourceIndex++],G.bitcount=7),X=1&G.tag,G.tag>>>=1,G=X,F(te,2,0)){case 0:L=function(We){for(var At,Wt;8<We.bitcount;)We.sourceIndex--,We.bitcount-=8;if((At=256*We.source[We.sourceIndex+1]+We.source[We.sourceIndex])!==(65535&~(256*We.source[We.sourceIndex+3]+We.source[We.sourceIndex+2])))return m;for(We.sourceIndex+=4,Wt=At;Wt;--Wt)We.dest[We.destLen++]=We.source[We.sourceIndex++];return We.bitcount=0,h}(te);break;case 1:L=q(te,g,p);break;case 2:Ze=Xe=nt=qe=se=Re=Be=He=De=je=Te=pe=void 0;for(var se,pe=te,Te=te.ltree,je=te.dtree,De=F(pe,5,257),He=F(pe,5,1),Be=F(pe,4,4),Re=0;Re<19;++Re)T[Re]=0;for(Re=0;Re<Be;++Re){var nt=F(pe,3,0);T[N[Re]]=nt}for(k(C,T,0,19),se=0;se<De+He;){var Xe=D(pe,C);switch(Xe){case 16:for(var Ze=T[se-1],qe=F(pe,2,3);qe;--qe)T[se++]=Ze;break;case 17:for(qe=F(pe,3,3);qe;--qe)T[se++]=0;break;case 18:for(qe=F(pe,7,11);qe;--qe)T[se++]=0;break;default:T[se++]=Xe}}k(Te,T,0,De),k(je,T,De,He),L=q(te,te.ltree,te.dtree);break;default:L=m}if(L!==h)throw new Error("Data error")}while(!G);return te.destLen<te.dest.length?typeof te.dest.slice=="function"?te.dest.slice(0,te.destLen):te.dest.subarray(0,te.destLen):te.dest};function Z(E,I,L,G,X){return Math.pow(1-X,3)*E+3*Math.pow(1-X,2)*X*I+3*(1-X)*Math.pow(X,2)*L+Math.pow(X,3)*G}function K(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function re(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function oe(E){throw new Error(E)}function M(E,I){E||oe(I)}K.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},K.prototype.addPoint=function(E,I){typeof E=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=E,this.x2=E),E<this.x1&&(this.x1=E),E>this.x2&&(this.x2=E)),typeof I=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=I,this.y2=I),I<this.y1&&(this.y1=I),I>this.y2&&(this.y2=I))},K.prototype.addX=function(E){this.addPoint(E,null)},K.prototype.addY=function(E){this.addPoint(null,E)},K.prototype.addBezier=function(E,I,L,G,X,te,se,pe){var Te=[E,I],je=[L,G],De=[X,te],He=[se,pe];this.addPoint(E,I),this.addPoint(se,pe);for(var Be=0;Be<=1;Be++){var Re,nt=6*Te[Be]-12*je[Be]+6*De[Be],Xe=-3*Te[Be]+9*je[Be]-9*De[Be]+3*He[Be],Ze=3*je[Be]-3*Te[Be];Xe==0?nt==0||0<(Re=-Ze/nt)&&Re<1&&(Be===0&&this.addX(Z(Te[Be],je[Be],De[Be],He[Be],Re)),Be===1&&this.addY(Z(Te[Be],je[Be],De[Be],He[Be],Re))):(Re=Math.pow(nt,2)-4*Ze*Xe)<0||(0<(Ze=(-nt+Math.sqrt(Re))/(2*Xe))&&Ze<1&&(Be===0&&this.addX(Z(Te[Be],je[Be],De[Be],He[Be],Ze)),Be===1&&this.addY(Z(Te[Be],je[Be],De[Be],He[Be],Ze))),0<(Ze=(-nt-Math.sqrt(Re))/(2*Xe))&&Ze<1&&(Be===0&&this.addX(Z(Te[Be],je[Be],De[Be],He[Be],Ze)),Be===1&&this.addY(Z(Te[Be],je[Be],De[Be],He[Be],Ze))))}},K.prototype.addQuad=function(E,I,L,G,X,te){L=E+2/3*(L-E),G=I+2/3*(G-I),this.addBezier(E,I,L,G,L+1/3*(X-E),G+1/3*(te-I),X,te)},re.prototype.moveTo=function(E,I){this.commands.push({type:"M",x:E,y:I})},re.prototype.lineTo=function(E,I){this.commands.push({type:"L",x:E,y:I})},re.prototype.curveTo=re.prototype.bezierCurveTo=function(E,I,L,G,X,te){this.commands.push({type:"C",x1:E,y1:I,x2:L,y2:G,x:X,y:te})},re.prototype.quadTo=re.prototype.quadraticCurveTo=function(E,I,L,G){this.commands.push({type:"Q",x1:E,y1:I,x:L,y:G})},re.prototype.close=re.prototype.closePath=function(){this.commands.push({type:"Z"})},re.prototype.extend=function(E){var I;if(E.commands)E=E.commands;else if(E instanceof K)return I=E,this.moveTo(I.x1,I.y1),this.lineTo(I.x2,I.y1),this.lineTo(I.x2,I.y2),this.lineTo(I.x1,I.y2),void this.close();Array.prototype.push.apply(this.commands,E)},re.prototype.getBoundingBox=function(){for(var E=new K,I=0,L=0,G=0,X=0,te=0;te<this.commands.length;te++){var se=this.commands[te];switch(se.type){case"M":E.addPoint(se.x,se.y),I=G=se.x,L=X=se.y;break;case"L":E.addPoint(se.x,se.y),G=se.x,X=se.y;break;case"Q":E.addQuad(G,X,se.x1,se.y1,se.x,se.y),G=se.x,X=se.y;break;case"C":E.addBezier(G,X,se.x1,se.y1,se.x2,se.y2,se.x,se.y),G=se.x,X=se.y;break;case"Z":G=I,X=L;break;default:throw new Error("Unexpected path command "+se.type)}}return E.isEmpty()&&E.addPoint(0,0),E},re.prototype.draw=function(E){E.beginPath();for(var I=0;I<this.commands.length;I+=1){var L=this.commands[I];L.type==="M"?E.moveTo(L.x,L.y):L.type==="L"?E.lineTo(L.x,L.y):L.type==="C"?E.bezierCurveTo(L.x1,L.y1,L.x2,L.y2,L.x,L.y):L.type==="Q"?E.quadraticCurveTo(L.x1,L.y1,L.x,L.y):L.type==="Z"&&E.closePath()}this.fill&&(E.fillStyle=this.fill,E.fill()),this.stroke&&(E.strokeStyle=this.stroke,E.lineWidth=this.strokeWidth,E.stroke())},re.prototype.toPathData=function(E){function I(){for(var te=arguments,se="",pe=0;pe<arguments.length;pe+=1){var Te=te[pe];0<=Te&&0<pe&&(se+=" "),se+=(Te=Te,Math.round(Te)===Te?""+Math.round(Te):Te.toFixed(E))}return se}E=E!==void 0?E:2;for(var L="",G=0;G<this.commands.length;G+=1){var X=this.commands[G];X.type==="M"?L+="M"+I(X.x,X.y):X.type==="L"?L+="L"+I(X.x,X.y):X.type==="C"?L+="C"+I(X.x1,X.y1,X.x2,X.y2,X.x,X.y):X.type==="Q"?L+="Q"+I(X.x1,X.y1,X.x,X.y):X.type==="Z"&&(L+="Z")}return L},re.prototype.toSVG=function(E){var I=(I='<path d="')+this.toPathData(E)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?I+=' fill="none"':I+=' fill="'+this.fill+'"'),this.stroke&&(I+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),I+="/>"},re.prototype.toDOMElement=function(I){var I=this.toPathData(I),L=document.createElementNS("http://www.w3.org/2000/svg","path");return L.setAttribute("d",I),L};var z={fail:oe,argument:M,assert:M},$={},ee={},le={};function ce(E){return function(){return E}}ee.BYTE=function(E){return z.argument(0<=E&&E<=255,"Byte value should be between 0 and 255."),[E]},le.BYTE=ce(1),ee.CHAR=function(E){return[E.charCodeAt(0)]},le.CHAR=ce(1),ee.CHARARRAY=function(E){for(var I=[],L=0;L<E.length;L+=1)I[L]=E.charCodeAt(L);return I},le.CHARARRAY=function(E){return E.length},ee.USHORT=function(E){return[E>>8&255,255&E]},le.USHORT=ce(2),ee.SHORT=function(E){return[(E=32768<=E?-(65536-E):E)>>8&255,255&E]},le.SHORT=ce(2),ee.UINT24=function(E){return[E>>16&255,E>>8&255,255&E]},le.UINT24=ce(3),ee.ULONG=function(E){return[E>>24&255,E>>16&255,E>>8&255,255&E]},le.ULONG=ce(4),ee.LONG=function(E){return[(E=2147483648<=E?-(4294967296-E):E)>>24&255,E>>16&255,E>>8&255,255&E]},le.LONG=ce(4),ee.FIXED=ee.ULONG,le.FIXED=le.ULONG,ee.FWORD=ee.SHORT,le.FWORD=le.SHORT,ee.UFWORD=ee.USHORT,le.UFWORD=le.USHORT,ee.LONGDATETIME=function(E){return[0,0,0,0,E>>24&255,E>>16&255,E>>8&255,255&E]},le.LONGDATETIME=ce(8),ee.TAG=function(E){return z.argument(E.length===4,"Tag should be exactly 4 ASCII characters."),[E.charCodeAt(0),E.charCodeAt(1),E.charCodeAt(2),E.charCodeAt(3)]},le.TAG=ce(4),ee.Card8=ee.BYTE,le.Card8=le.BYTE,ee.Card16=ee.USHORT,le.Card16=le.USHORT,ee.OffSize=ee.BYTE,le.OffSize=le.BYTE,ee.SID=ee.USHORT,le.SID=le.USHORT,ee.NUMBER=function(E){return-107<=E&&E<=107?[E+139]:108<=E&&E<=1131?[247+((E-=108)>>8),255&E]:-1131<=E&&E<=-108?[251+((E=-E-108)>>8),255&E]:-32768<=E&&E<=32767?ee.NUMBER16(E):ee.NUMBER32(E)},le.NUMBER=function(E){return ee.NUMBER(E).length},ee.NUMBER16=function(E){return[28,E>>8&255,255&E]},le.NUMBER16=ce(3),ee.NUMBER32=function(E){return[29,E>>24&255,E>>16&255,E>>8&255,255&E]},le.NUMBER32=ce(5),ee.REAL=function(E){for(var I=E.toString(),L=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(I),G=(L&&(L=parseFloat("1e"+((L[2]?+L[2]:0)+L[1].length)),I=(Math.round(E*L)/L).toString()),""),X=0,te=I.length;X<te;X+=1){var se=I[X];G+=se==="e"?I[++X]==="-"?"c":"b":se==="."?"a":se==="-"?"e":se}for(var pe=[30],Te=0,je=(G+=1&G.length?"f":"ff").length;Te<je;Te+=2)pe.push(parseInt(G.substr(Te,2),16));return pe},le.REAL=function(E){return ee.REAL(E).length},ee.NAME=ee.CHARARRAY,le.NAME=le.CHARARRAY,ee.STRING=ee.CHARARRAY,le.STRING=le.CHARARRAY,$.UTF8=function(E,I,L){for(var G=[],X=L,te=0;te<X;te++,I+=1)G[te]=E.getUint8(I);return String.fromCharCode.apply(null,G)},$.UTF16=function(E,I,L){for(var G=[],X=L/2,te=0;te<X;te++,I+=2)G[te]=E.getUint16(I);return String.fromCharCode.apply(null,G)},ee.UTF16=function(E){for(var I=[],L=0;L<E.length;L+=1){var G=E.charCodeAt(L);I[I.length]=G>>8&255,I[I.length]=255&G}return I},le.UTF16=function(E){return 2*E.length};var me,ve={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""},ge=($.MACSTRING=function(E,I,L,G){var X=ve[G];if(X!==void 0){for(var te="",se=0;se<L;se++){var pe=E.getUint8(I+se);te+=pe<=127?String.fromCharCode(pe):X[127&pe]}return te}},typeof WeakMap=="function"&&new WeakMap);function we(E){return-128<=E&&E<=127}ee.MACSTRING=function(E,I){var L=function(se){if(!me)for(var pe in me={},ve)me[pe]=new String(pe);var Te=me[se];if(Te!==void 0){if(ge){var je=ge.get(Te);if(je!==void 0)return je}var De=ve[se];if(De!==void 0){for(var He={},Be=0;Be<De.length;Be++)He[De.charCodeAt(Be)]=Be+128;return ge&&ge.set(Te,He),He}}}(I);if(L!==void 0){for(var G=[],X=0;X<E.length;X++){var te=E.charCodeAt(X);if(128<=te&&(te=L[te])===void 0)return;G[X]=te}return G}},le.MACSTRING=function(E,I){return E=ee.MACSTRING(E,I),E!==void 0?E.length:0},ee.VARDELTAS=function(E){for(var G=0,I=[];G<E.length;)var L=E[G],G=(L===0?function(X,te,se){for(var pe=0,Te=X.length;te<Te&&pe<64&&X[te]===0;)++te,++pe;return se.push(128|pe-1),te}:-128<=L&&L<=127?function(X,te,se){for(var pe=0,Te=X.length,je=te;je<Te&&pe<64;){var De=X[je];if(!we(De)||De===0&&je+1<Te&&X[je+1]===0)break;++je,++pe}se.push(pe-1);for(var He=te;He<je;++He)se.push(X[He]+256&255);return je}:function(X,te,se){for(var pe=0,Te=X.length,je=te;je<Te&&pe<64;){var De=X[je];if(De===0||we(De)&&je+1<Te&&we(X[je+1]))break;++je,++pe}se.push(64|pe-1);for(var He=te;He<je;++He){var Be=X[He];se.push(Be+65536>>8&255,Be+256&255)}return je})(E,G,I);return I},ee.INDEX=function(E){for(var I=1,L=[I],G=[],X=0;X<E.length;X+=1){var te=ee.OBJECT(E[X]);Array.prototype.push.apply(G,te),I+=te.length,L.push(I)}if(G.length===0)return[0,0];for(var se=[],pe=1+Math.floor(Math.log(I)/Math.log(2))/8|0,Te=[void 0,ee.BYTE,ee.USHORT,ee.UINT24,ee.ULONG][pe],je=0;je<L.length;je+=1){var De=Te(L[je]);Array.prototype.push.apply(se,De)}return Array.prototype.concat(ee.Card16(E.length),ee.OffSize(pe),se,G)},le.INDEX=function(E){return ee.INDEX(E).length},ee.DICT=function(E){for(var I=[],L=Object.keys(E),G=L.length,X=0;X<G;X+=1){var te=parseInt(L[X],0),se=E[te];I=(I=I.concat(ee.OPERAND(se.value,se.type))).concat(ee.OPERATOR(te))}return I},le.DICT=function(E){return ee.DICT(E).length},ee.OPERATOR=function(E){return E<1200?[E]:[12,E-1200]},ee.OPERAND=function(E,I){var L=[];if(Array.isArray(I))for(var G=0;G<I.length;G+=1)z.argument(E.length===I.length,"Not enough arguments given for type"+I),L=L.concat(ee.OPERAND(E[G],I[G]));else if(I==="SID")L=L.concat(ee.NUMBER(E));else if(I==="offset")L=L.concat(ee.NUMBER32(E));else if(I==="number")L=L.concat(ee.NUMBER(E));else{if(I!=="real")throw new Error("Unknown operand type "+I);L=L.concat(ee.REAL(E))}return L},ee.OP=ee.BYTE,le.OP=le.BYTE;var xe=typeof WeakMap=="function"&&new WeakMap;function fe(E,I,L){for(var G=0;G<I.length;G+=1){var X=I[G];this[X.name]=X.value}if(this.tableName=E,this.fields=I,L)for(var te=Object.keys(L),se=0;se<te.length;se+=1){var pe=te[se],Te=L[pe];this[pe]!==void 0&&(this[pe]=Te)}}function Se(E,I,L){L===void 0&&(L=I.length);var G=new Array(I.length+1);G[0]={name:E+"Count",type:"USHORT",value:L};for(var X=0;X<I.length;X++)G[X+1]={name:E+X,type:"USHORT",value:I[X]};return G}function Ce(E,I,L){var G=I.length,X=new Array(G+1);X[0]={name:E+"Count",type:"USHORT",value:G};for(var te=0;te<G;te++)X[te+1]={name:E+te,type:"TABLE",value:L(I[te],te)};return X}function Ne(E,I,L){var G=I.length,X=[];X[0]={name:E+"Count",type:"USHORT",value:G};for(var te=0;te<G;te++)X=X.concat(L(I[te],te));return X}function Oe(E){E.format===1?fe.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(Se("glyph",E.glyphs))):z.assert(!1,"Can't create coverage table format 2 yet.")}function Me(E){fe.call(this,"scriptListTable",Ne("scriptRecord",E,function(I,L){var G=I.script,X=G.defaultLangSys;return z.assert(!!X,"Unable to write GSUB: script "+I.tag+" has no default language system."),[{name:"scriptTag"+L,type:"TAG",value:I.tag},{name:"script"+L,type:"TABLE",value:new fe("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new fe("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:X.reqFeatureIndex}].concat(Se("featureIndex",X.featureIndexes)))}].concat(Ne("langSys",G.langSysRecords,function(te,se){var pe=te.langSys;return[{name:"langSysTag"+se,type:"TAG",value:te.tag},{name:"langSys"+se,type:"TABLE",value:new fe("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:pe.reqFeatureIndex}].concat(Se("featureIndex",pe.featureIndexes)))}]})))}]}))}function Ue(E){fe.call(this,"featureListTable",Ne("featureRecord",E,function(I,L){var G=I.feature;return[{name:"featureTag"+L,type:"TAG",value:I.tag},{name:"feature"+L,type:"TABLE",value:new fe("featureTable",[{name:"featureParams",type:"USHORT",value:G.featureParams}].concat(Se("lookupListIndex",G.lookupListIndexes)))}]}))}function et(E,I){fe.call(this,"lookupListTable",Ce("lookup",E,function(L){var G=I[L.lookupType];return z.assert(!!G,"Unable to write GSUB lookup type "+L.lookupType+" tables."),new fe("lookupTable",[{name:"lookupType",type:"USHORT",value:L.lookupType},{name:"lookupFlag",type:"USHORT",value:L.lookupFlag}].concat(Ce("subtable",L.subtables,G)))}))}ee.CHARSTRING=function(E){if(xe){var I=xe.get(E);if(I!==void 0)return I}for(var te=[],L=E.length,G=0;G<L;G+=1)var X=E[G],te=te.concat(ee[X.type](X.value));return xe&&xe.set(E,te),te},le.CHARSTRING=function(E){return ee.CHARSTRING(E).length},ee.OBJECT=function(E){var I=ee[E.type];return z.argument(I!==void 0,"No encoding function for type "+E.type),I(E.value)},le.OBJECT=function(E){var I=le[E.type];return z.argument(I!==void 0,"No sizeOf function for type "+E.type),I(E.value)},ee.TABLE=function(E){for(var I=[],L=E.fields.length,G=[],X=[],te=0;te<L;te+=1){var se=E.fields[te],Te=ee[se.type],pe=(z.argument(Te!==void 0,"No encoding function for field type "+se.type+" ("+se.name+")"),E[se.name]),Te=Te(pe=pe===void 0?se.value:pe);se.type==="TABLE"?(X.push(I.length),I=I.concat([0,0]),G.push(Te)):I=I.concat(Te)}for(var je=0;je<G.length;je+=1){var De=X[je],He=I.length;z.argument(He<65536,"Table "+E.tableName+" too big."),I[De]=He>>8,I[De+1]=255&He,I=I.concat(G[je])}return I},le.TABLE=function(E){for(var I=0,L=E.fields.length,G=0;G<L;G+=1){var X=E.fields[G],te=le[X.type],se=(z.argument(te!==void 0,"No sizeOf function for field type "+X.type+" ("+X.name+")"),E[X.name]);I+=te(se=se===void 0?X.value:se),X.type==="TABLE"&&(I+=2)}return I},ee.RECORD=ee.TABLE,le.RECORD=le.TABLE,ee.LITERAL=function(E){return E},le.LITERAL=function(E){return E.length},fe.prototype.encode=function(){return ee.TABLE(this)},fe.prototype.sizeOf=function(){return le.TABLE(this)};var Fe={Table:fe,Record:fe,Coverage:(Oe.prototype=Object.create(fe.prototype)).constructor=Oe,ScriptList:(Me.prototype=Object.create(fe.prototype)).constructor=Me,FeatureList:(Ue.prototype=Object.create(fe.prototype)).constructor=Ue,LookupList:(et.prototype=Object.create(fe.prototype)).constructor=et,ushortList:Se,tableList:Ce,recordList:Ne};function mt(E,I){return E.getUint8(I)}function ut(E,I){return E.getUint16(I,!1)}function it(E,I){return E.getUint32(I,!1)}function ft(E,I){return E.getInt16(I,!1)+E.getUint16(I+2,!1)/65535}var at={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Le(E,I){this.data=E,this.offset=I,this.relativeOffset=0}Le.prototype.parseByte=function(){var E=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,E},Le.prototype.parseChar=function(){var E=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,E},Le.prototype.parseCard8=Le.prototype.parseByte,Le.prototype.parseCard16=Le.prototype.parseUShort=function(){var E=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,E},Le.prototype.parseSID=Le.prototype.parseUShort,Le.prototype.parseOffset16=Le.prototype.parseUShort,Le.prototype.parseShort=function(){var E=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,E},Le.prototype.parseF2Dot14=function(){var E=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,E},Le.prototype.parseOffset32=Le.prototype.parseULong=function(){var E=it(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,E},Le.prototype.parseFixed=function(){var E=ft(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,E},Le.prototype.parseString=function(E){var I=this.data,L=this.offset+this.relativeOffset,G="";this.relativeOffset+=E;for(var X=0;X<E;X++)G+=String.fromCharCode(I.getUint8(L+X));return G},Le.prototype.parseTag=function(){return this.parseString(4)},Le.prototype.parseLongDateTime=function(){var E=it(this.data,this.offset+this.relativeOffset+4);return E-=2082844800,this.relativeOffset+=8,E},Le.prototype.parseVersion=function(E){var I=ut(this.data,this.offset+this.relativeOffset),L=ut(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,I+L/(E=E===void 0?4096:E)/10},Le.prototype.skip=function(E,I){this.relativeOffset+=at[E]*(I=I===void 0?1:I)},Le.prototype.parseULongList=function(E){E===void 0&&(E=this.parseULong());for(var I=new Array(E),L=this.data,G=this.offset+this.relativeOffset,X=0;X<E;X++)I[X]=L.getUint32(G),G+=4;return this.relativeOffset+=4*E,I},Le.prototype.parseOffset16List=Le.prototype.parseUShortList=function(E){E===void 0&&(E=this.parseUShort());for(var I=new Array(E),L=this.data,G=this.offset+this.relativeOffset,X=0;X<E;X++)I[X]=L.getUint16(G),G+=2;return this.relativeOffset+=2*E,I},Le.prototype.parseShortList=function(E){for(var I=new Array(E),L=this.data,G=this.offset+this.relativeOffset,X=0;X<E;X++)I[X]=L.getInt16(G),G+=2;return this.relativeOffset+=2*E,I},Le.prototype.parseByteList=function(E){for(var I=new Array(E),L=this.data,G=this.offset+this.relativeOffset,X=0;X<E;X++)I[X]=L.getUint8(G++);return this.relativeOffset+=E,I},Le.prototype.parseList=function(E,I){I||(I=E,E=this.parseUShort());for(var L=new Array(E),G=0;G<E;G++)L[G]=I.call(this);return L},Le.prototype.parseList32=function(E,I){I||(I=E,E=this.parseULong());for(var L=new Array(E),G=0;G<E;G++)L[G]=I.call(this);return L},Le.prototype.parseRecordList=function(E,I){I||(I=E,E=this.parseUShort());for(var L=new Array(E),G=Object.keys(I),X=0;X<E;X++){for(var te={},se=0;se<G.length;se++){var pe=G[se],Te=I[pe];te[pe]=Te.call(this)}L[X]=te}return L},Le.prototype.parseRecordList32=function(E,I){I||(I=E,E=this.parseULong());for(var L=new Array(E),G=Object.keys(I),X=0;X<E;X++){for(var te={},se=0;se<G.length;se++){var pe=G[se],Te=I[pe];te[pe]=Te.call(this)}L[X]=te}return L},Le.prototype.parseStruct=function(E){if(typeof E=="function")return E.call(this);for(var I=Object.keys(E),L={},G=0;G<I.length;G++){var X=I[G],te=E[X];L[X]=te.call(this)}return L},Le.prototype.parseValueRecord=function(E){var I;if((E=E===void 0?this.parseUShort():E)!==0)return I={},1&E&&(I.xPlacement=this.parseShort()),2&E&&(I.yPlacement=this.parseShort()),4&E&&(I.xAdvance=this.parseShort()),8&E&&(I.yAdvance=this.parseShort()),16&E&&(I.xPlaDevice=void 0,this.parseShort()),32&E&&(I.yPlaDevice=void 0,this.parseShort()),64&E&&(I.xAdvDevice=void 0,this.parseShort()),128&E&&(I.yAdvDevice=void 0,this.parseShort()),I},Le.prototype.parseValueRecordList=function(){for(var E=this.parseUShort(),I=this.parseUShort(),L=new Array(I),G=0;G<I;G++)L[G]=this.parseValueRecord(E);return L},Le.prototype.parsePointer=function(E){var I=this.parseOffset16();if(0<I)return new Le(this.data,this.offset+I).parseStruct(E)},Le.prototype.parsePointer32=function(E){var I=this.parseOffset32();if(0<I)return new Le(this.data,this.offset+I).parseStruct(E)},Le.prototype.parseListOfLists=function(E){for(var I=this.parseOffset16List(),L=I.length,G=this.relativeOffset,X=new Array(L),te=0;te<L;te++){var se=I[te];if(se===0)X[te]=void 0;else if(this.relativeOffset=se,E){for(var pe=this.parseOffset16List(),Te=new Array(pe.length),je=0;je<pe.length;je++)this.relativeOffset=se+pe[je],Te[je]=E.call(this);X[te]=Te}else X[te]=this.parseUShortList()}return this.relativeOffset=G,X},Le.prototype.parseCoverage=function(){var E=this.offset+this.relativeOffset,I=this.parseUShort(),L=this.parseUShort();if(I===1)return{format:1,glyphs:this.parseUShortList(L)};if(I!==2)throw new Error("0x"+E.toString(16)+": Coverage format must be 1 or 2.");for(var G=new Array(L),X=0;X<L;X++)G[X]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:G}},Le.prototype.parseClassDef=function(){var E=this.offset+this.relativeOffset,I=this.parseUShort();if(I===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(I===2)return{format:2,ranges:this.parseRecordList({start:Le.uShort,end:Le.uShort,classId:Le.uShort})};throw new Error("0x"+E.toString(16)+": ClassDef format must be 1 or 2.")},Le.list=function(E,I){return function(){return this.parseList(E,I)}},Le.list32=function(E,I){return function(){return this.parseList32(E,I)}},Le.recordList=function(E,I){return function(){return this.parseRecordList(E,I)}},Le.recordList32=function(E,I){return function(){return this.parseRecordList32(E,I)}},Le.pointer=function(E){return function(){return this.parsePointer(E)}},Le.pointer32=function(E){return function(){return this.parsePointer32(E)}},Le.tag=Le.prototype.parseTag,Le.byte=Le.prototype.parseByte,Le.uShort=Le.offset16=Le.prototype.parseUShort,Le.uShortList=Le.prototype.parseUShortList,Le.uLong=Le.offset32=Le.prototype.parseULong,Le.uLongList=Le.prototype.parseULongList,Le.struct=Le.prototype.parseStruct,Le.coverage=Le.prototype.parseCoverage,Le.classDef=Le.prototype.parseClassDef;var Je={reserved:Le.uShort,reqFeatureIndex:Le.uShort,featureIndexes:Le.uShortList},Ie=(Le.prototype.parseScriptList=function(){return this.parsePointer(Le.recordList({tag:Le.tag,script:Le.pointer({defaultLangSys:Le.pointer(Je),langSysRecords:Le.recordList({tag:Le.tag,langSys:Le.pointer(Je)})})}))||[]},Le.prototype.parseFeatureList=function(){return this.parsePointer(Le.recordList({tag:Le.tag,feature:Le.pointer({featureParams:Le.offset16,lookupListIndexes:Le.uShortList})}))||[]},Le.prototype.parseLookupList=function(E){return this.parsePointer(Le.list(Le.pointer(function(){var I=this.parseUShort(),L=(z.argument(1<=I&&I<=9,"GPOS/GSUB lookup type "+I+" unknown."),this.parseUShort()),G=16&L;return{lookupType:I,lookupFlag:L,subtables:this.parseList(Le.pointer(E[I])),markFilteringSet:G?this.parseUShort():void 0}})))||[]},Le.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var E=this.parseUShort(),I=this.parseUShort();return z.argument(E===1&&I<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:Le.offset32,featureTableSubstitutionOffset:Le.offset32})})||[]},{getByte:mt,getCard8:mt,getUShort:ut,getCard16:ut,getShort:function(E,I){return E.getInt16(I,!1)},getULong:it,getFixed:ft,getTag:function(E,I){for(var L="",G=I;G<I+4;G+=1)L+=String.fromCharCode(E.getInt8(G));return L},getOffset:function(E,I,L){for(var G=0,X=0;X<L;X+=1)G=(G<<=8)+E.getUint8(I+X);return G},getBytes:function(E,I,L){for(var G=[],X=I;X<L;X+=1)G.push(E.getUint8(X));return G},bytesToString:function(E){for(var I="",L=0;L<E.length;L+=1)I+=String.fromCharCode(E[L]);return I},Parser:Le}),de={parse:function(E,I){for(var L={},G=(L.version=Ie.getUShort(E,I),z.argument(L.version===0,"cmap table version should be 0."),L.numTables=Ie.getUShort(E,I+2),-1),X=L.numTables-1;0<=X;--X){var te=Ie.getUShort(E,I+4+8*X),se=Ie.getUShort(E,I+4+8*X+2);if(te===3&&(se===0||se===1||se===10)||te===0&&(se===0||se===1||se===2||se===3||se===4)){G=Ie.getULong(E,I+4+8*X+4);break}}if(G===-1)throw new Error("No valid cmap sub-tables found.");var pe=new Ie.Parser(E,I+G);if(L.format=pe.parseUShort(),L.format===12){var Te,je=L,De=pe;De.parseUShort(),je.length=De.parseULong(),je.language=De.parseULong(),je.groupCount=Te=De.parseULong(),je.glyphIndexMap={};for(var He=0;He<Te;He+=1)for(var Be=De.parseULong(),Re=De.parseULong(),nt=De.parseULong(),Xe=Be;Xe<=Re;Xe+=1)je.glyphIndexMap[Xe]=nt,nt++}else{if(L.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+L.format+").");var Ze=L,qe=E,We=I,At=G;Ze.length=pe.parseUShort(),Ze.language=pe.parseUShort(),Ze.segCount=Wt=pe.parseUShort()>>1,pe.skip("uShort",3),Ze.glyphIndexMap={};for(var Wt,Ot=new Ie.Parser(qe,We+At+14),Mt=new Ie.Parser(qe,We+At+16+2*Wt),er=new Ie.Parser(qe,We+At+16+4*Wt),Dr=new Ie.Parser(qe,We+At+16+6*Wt),ar=We+At+16+8*Wt,Hr=0;Hr<Wt-1;Hr+=1)for(var Dn=void 0,Nn=Ot.parseUShort(),As=Mt.parseUShort(),Ar=er.parseShort(),kr=Dr.parseUShort(),Sr=As;Sr<=Nn;Sr+=1)kr!==0?(ar=(ar=Dr.offset+Dr.relativeOffset-2)+kr+2*(Sr-As),(Dn=Ie.getUShort(qe,ar))!==0&&(Dn=Dn+Ar&65535)):Dn=Sr+Ar&65535,Ze.glyphIndexMap[Sr]=Dn}return L},make:function(E){for(var I=!0,L=E.length-1;0<L;--L)if(65535<E.get(L).unicode){console.log("Adding CMAP format 12 (needed!)"),I=!1;break}var G,X,te=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:I?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:I?12:20}],se=(te=(te=I?te:te.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new Fe.Table("cmap",te));for(se.segments=[],L=0;L<E.length;L+=1){for(var pe=E.get(L),Te=0;Te<pe.unicodes.length;Te+=1)G=pe.unicodes[Te],X=L,se.segments.push({end:G,start:G,delta:-(G-X),offset:0,glyphIndex:X});se.segments=se.segments.sort(function(We,At){return We.start-At.start})}se.segments.push({end:65535,start:65535,delta:1,offset:0});var je=se.segments.length,De=0,He=[],Be=[],Re=[],nt=[],Xe=[],Ze=[];for(L=0;L<je;L+=1){var qe=se.segments[L];qe.end<=65535&&qe.start<=65535?(He=He.concat({name:"end_"+L,type:"USHORT",value:qe.end}),Be=Be.concat({name:"start_"+L,type:"USHORT",value:qe.start}),Re=Re.concat({name:"idDelta_"+L,type:"SHORT",value:qe.delta}),nt=nt.concat({name:"idRangeOffset_"+L,type:"USHORT",value:qe.offset}),qe.glyphId!==void 0&&(Xe=Xe.concat({name:"glyph_"+L,type:"USHORT",value:qe.glyphId}))):De+=1,I||qe.glyphIndex===void 0||(Ze=(Ze=(Ze=Ze.concat({name:"cmap12Start_"+L,type:"ULONG",value:qe.start})).concat({name:"cmap12End_"+L,type:"ULONG",value:qe.end})).concat({name:"cmap12Glyph_"+L,type:"ULONG",value:qe.glyphIndex}))}return se.segCountX2=2*(je-De),se.searchRange=2*Math.pow(2,Math.floor(Math.log(je-De)/Math.log(2))),se.entrySelector=Math.log(se.searchRange/2)/Math.log(2),se.rangeShift=se.segCountX2-se.searchRange,se.fields=se.fields.concat(He),se.fields.push({name:"reservedPad",type:"USHORT",value:0}),se.fields=se.fields.concat(Be),se.fields=se.fields.concat(Re),se.fields=se.fields.concat(nt),se.fields=se.fields.concat(Xe),se.cmap4Length=14+2*He.length+2+2*Be.length+2*Re.length+2*nt.length+2*Xe.length,I||(te=16+4*Ze.length,se.cmap12Offset=20+se.cmap4Length,se.fields=se.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:te},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:Ze.length/3}]),se.fields=se.fields.concat(Ze)),se}},he=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],ie=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],ye=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Pe=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Ve(E){this.font=E}function $e(E){this.cmap=E}function ct(E,I){this.encoding=E,this.charset=I}function yt(E){switch(E.version){case 1:this.names=Pe.slice();break;case 2:this.names=new Array(E.numberOfGlyphs);for(var I=0;I<E.numberOfGlyphs;I++)E.glyphNameIndex[I]<Pe.length?this.names[I]=Pe[E.glyphNameIndex[I]]:this.names[I]=E.names[E.glyphNameIndex[I]-Pe.length];break;case 2.5:this.names=new Array(E.numberOfGlyphs);for(var L=0;L<E.numberOfGlyphs;L++)this.names[L]=Pe[L+E.glyphNameIndex[L]];break;default:this.names=[]}}Ve.prototype.charToGlyphIndex=function(E){var I=E.codePointAt(0),L=this.font.glyphs;if(L){for(var G=0;G<L.length;G+=1)for(var X=L.get(G),te=0;te<X.unicodes.length;te+=1)if(X.unicodes[te]===I)return G}return null},$e.prototype.charToGlyphIndex=function(E){return this.cmap.glyphIndexMap[E.codePointAt(0)]||0},ct.prototype.charToGlyphIndex=function(E){return E=E.codePointAt(0),E=this.encoding[E],this.charset.indexOf(E)},yt.prototype.nameToGlyphIndex=function(E){return this.names.indexOf(E)},yt.prototype.glyphIndexToName=function(E){return this.names[E]};var vt={line:function(E,I,L,G,X){E.beginPath(),E.moveTo(I,L),E.lineTo(G,X),E.stroke()}};function bt(E){this.bindConstructorValues(E)}function Lt(E,I,L){Object.defineProperty(E,I,{get:function(){return E.path,E[L]},set:function(G){E[L]=G},enumerable:!0,configurable:!0})}function Tt(E,I){if(this.font=E,this.glyphs={},Array.isArray(I))for(var L=0;L<I.length;L++)this.glyphs[L]=I[L];this.length=I&&I.length||0}bt.prototype.bindConstructorValues=function(E){var I;this.index=E.index||0,this.name=E.name||null,this.unicode=E.unicode||void 0,this.unicodes=E.unicodes||E.unicode!==void 0?[E.unicode]:[],E.xMin&&(this.xMin=E.xMin),E.yMin&&(this.yMin=E.yMin),E.xMax&&(this.xMax=E.xMax),E.yMax&&(this.yMax=E.yMax),E.advanceWidth&&(this.advanceWidth=E.advanceWidth),Object.defineProperty(this,"path",(E=E.path,I=E||new re,{configurable:!0,get:function(){return I=typeof I=="function"?I():I},set:function(L){I=L}}))},bt.prototype.addUnicode=function(E){this.unicodes.length===0&&(this.unicode=E),this.unicodes.push(E)},bt.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},bt.prototype.getPath=function(E,I,L,G,X){E=E!==void 0?E:0,I=I!==void 0?I:0,L=L!==void 0?L:72;for(var te,se,pe=(G=G||{}).xScale,Te=G.yScale,je=((te=G.hinting&&X&&X.hinting?this.path&&X.hinting.exec(this,L):te)?(se=X.hinting.getCommands(te),E=Math.round(E),I=Math.round(I),pe=Te=1):(se=this.path.commands,G=1/this.path.unitsPerEm*L,pe===void 0&&(pe=G),Te===void 0&&(Te=G)),new re),De=0;De<se.length;De+=1){var He=se[De];He.type==="M"?je.moveTo(E+He.x*pe,I+-He.y*Te):He.type==="L"?je.lineTo(E+He.x*pe,I+-He.y*Te):He.type==="Q"?je.quadraticCurveTo(E+He.x1*pe,I+-He.y1*Te,E+He.x*pe,I+-He.y*Te):He.type==="C"?je.curveTo(E+He.x1*pe,I+-He.y1*Te,E+He.x2*pe,I+-He.y2*Te,E+He.x*pe,I+-He.y*Te):He.type==="Z"&&je.closePath()}return je},bt.prototype.getContours=function(){if(this.points===void 0)return[];for(var E=[],I=[],L=0;L<this.points.length;L+=1){var G=this.points[L];I.push(G),G.lastPointOfContour&&(E.push(I),I=[])}return z.argument(I.length===0,"There are still points left in the current contour."),E},bt.prototype.getMetrics=function(){for(var E=this.path.commands,I=[],L=[],G=0;G<E.length;G+=1){var X=E[G];X.type!=="Z"&&(I.push(X.x),L.push(X.y)),X.type!=="Q"&&X.type!=="C"||(I.push(X.x1),L.push(X.y1)),X.type==="C"&&(I.push(X.x2),L.push(X.y2))}var te={xMin:Math.min.apply(null,I),yMin:Math.min.apply(null,L),xMax:Math.max.apply(null,I),yMax:Math.max.apply(null,L),leftSideBearing:this.leftSideBearing};return isFinite(te.xMin)||(te.xMin=0),isFinite(te.xMax)||(te.xMax=this.advanceWidth),isFinite(te.yMin)||(te.yMin=0),isFinite(te.yMax)||(te.yMax=0),te.rightSideBearing=this.advanceWidth-te.leftSideBearing-(te.xMax-te.xMin),te},bt.prototype.draw=function(E,I,L,G,X){this.getPath(I,L,G,X).draw(E)},bt.prototype.drawPoints=function(E,I,L,G){function X(De,He,Be,Re){var nt=2*Math.PI;E.beginPath();for(var Xe=0;Xe<De.length;Xe+=1)E.moveTo(He+De[Xe].x*Re,Be+De[Xe].y*Re),E.arc(He+De[Xe].x*Re,Be+De[Xe].y*Re,2,0,nt,!1);E.closePath(),E.fill()}I=I!==void 0?I:0,L=L!==void 0?L:0;for(var G=1/this.path.unitsPerEm*(G=G!==void 0?G:24),te=[],se=[],pe=this.path,Te=0;Te<pe.commands.length;Te+=1){var je=pe.commands[Te];je.x!==void 0&&te.push({x:je.x,y:-je.y}),je.x1!==void 0&&se.push({x:je.x1,y:-je.y1}),je.x2!==void 0&&se.push({x:je.x2,y:-je.y2})}E.fillStyle="blue",X(te,I,L,G),E.fillStyle="red",X(se,I,L,G)},bt.prototype.drawMetrics=function(E,I,L,G){I=I!==void 0?I:0,L=L!==void 0?L:0,G=1/this.path.unitsPerEm*(G=G!==void 0?G:24),E.lineWidth=1,E.strokeStyle="black",vt.line(E,I,-1e4,I,1e4),vt.line(E,-1e4,L,1e4,L);var X=this.xMin||0,te=this.yMin||0,se=this.xMax||0,pe=this.yMax||0,Te=this.advanceWidth||0;E.strokeStyle="blue",vt.line(E,I+X*G,-1e4,I+X*G,1e4),vt.line(E,I+se*G,-1e4,I+se*G,1e4),vt.line(E,-1e4,L+-te*G,1e4,L+-te*G),vt.line(E,-1e4,L+-pe*G,1e4,L+-pe*G),E.strokeStyle="green",vt.line(E,I+Te*G,-1e4,I+Te*G,1e4)},Tt.prototype.get=function(E){return typeof this.glyphs[E]=="function"&&(this.glyphs[E]=this.glyphs[E]()),this.glyphs[E]},Tt.prototype.push=function(E,I){this.glyphs[E]=I,this.length++};var jt={GlyphSet:Tt,glyphLoader:function(E,I){return new bt({index:I,font:E})},ttfGlyphLoader:function(E,I,L,G,X,te){return function(){var se=new bt({index:I,font:E});return se.path=function(){L(se,G,X);var pe=te(E.glyphs,se);return pe.unitsPerEm=E.unitsPerEm,pe},Lt(se,"xMin","_xMin"),Lt(se,"xMax","_xMax"),Lt(se,"yMin","_yMin"),Lt(se,"yMax","_yMax"),se}},cffGlyphLoader:function(E,I,L,G){return function(){var X=new bt({index:I,font:E});return X.path=function(){var te=L(E,X,G);return te.unitsPerEm=E.unitsPerEm,te},X}}};function Nt(E){return E=E.length<1240?107:E.length<33900?1131:32768,E}function kt(E,I,L){var G,X=[],te=[],se=Ie.getCard16(E,I);if(se!==0){for(var pe=Ie.getByte(E,I+2),Te=I+(se+1)*pe+2,je=I+3,De=0;De<se+1;De+=1)X.push(Ie.getOffset(E,je,pe)),je+=pe;G=Te+X[se]}else G=I+2;for(var He=0;He<X.length-1;He+=1){var Be=Ie.getBytes(E,Te+X[He],Te+X[He+1]);L&&(Be=L(Be)),te.push(Be)}return{objects:te,startOffset:I,endOffset:G}}function yr(E,I){if(I===28)return E.parseByte()<<8|E.parseByte();if(I===29)return E.parseByte()<<24|E.parseByte()<<16|E.parseByte()<<8|E.parseByte();if(I===30){for(var L=E,G="",X=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var se=L.parseByte(),te=se>>4,se=15&se;if(te==15||(G+=X[te],se==15))break;G+=X[se]}return parseFloat(G)}if(32<=I&&I<=246)return I-139;if(247<=I&&I<=250)return 256*(I-247)+E.parseByte()+108;if(251<=I&&I<=254)return 256*-(I-251)-E.parseByte()-108;throw new Error("Invalid b0 "+I)}function Yr(E,I,L){var G=new Ie.Parser(E,I=I!==void 0?I:0),X=[],te=[];for(L=L!==void 0?L:E.length;G.relativeOffset<L;){var se=G.parseByte();se<=21?(se===12&&(se=1200+G.parseByte()),X.push([se,te]),te=[]):te.push(yr(G,se))}for(var pe=X,Te={},je=0;je<pe.length;je+=1){var De=pe[je][0],He=pe[je][1],Be=void 0,Be=He.length===1?He[0]:He;if(Te.hasOwnProperty(De)&&!isNaN(Te[De]))throw new Error("Object "+Te+" already has key "+De);Te[De]=Be}return Te}function Ur(E,I){return I=I<=390?he[I]:E[I-391]}function Bt(E,I,L){for(var G,X={},te=0;te<I.length;te+=1){var se=I[te];if(Array.isArray(se.type)){var pe=[];pe.length=se.type.length;for(var Te=0;Te<se.type.length;Te++)(G=E[se.op]!==void 0?E[se.op][Te]:void 0)===void 0&&(G=se.value!==void 0&&se.value[Te]!==void 0?se.value[Te]:null),se.type[Te]==="SID"&&(G=Ur(L,G)),pe[Te]=G;X[se.name]=pe}else(G=E[se.op])===void 0&&(G=se.value!==void 0?se.value:null),se.type==="SID"&&(G=Ur(L,G)),X[se.name]=G}return X}var Cr=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Zt=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Gr(E,I,L,G){return Bt(Yr(E,I,L),Zt,G)}function Zr(E,I,L,G){for(var X=[],te=0;te<L.length;te+=1){var se=new DataView(new Uint8Array(L[te]).buffer),se=(pe=G,Bt(Yr(se,0,se.byteLength),Cr,pe)),pe=(se._subrs=[],se._subrsBias=0,se.private[0]),Te=se.private[1];pe!==0&&Te!==0&&(pe=Gr(E,Te+I,pe,G),se._defaultWidthX=pe.defaultWidthX,se._nominalWidthX=pe.nominalWidthX,pe.subrs!==0&&(Te=kt(E,Te+pe.subrs+I),se._subrs=Te.objects,se._subrsBias=Nt(se._subrs)),se._privateDict=pe),X.push(se)}return X}function mr(E,I,L){var G,X,te,se,pe,Te,je,De,He,Be=new re,Re=[],nt=0,Xe=!1,Ze=!1,qe=0,We=0,At=(He=(E.isCIDFont?(pe=E.tables.cff.topDict._fdSelect[I.index],pe=E.tables.cff.topDict._fdArray[pe],Te=pe._subrs,je=pe._subrsBias,De=pe._defaultWidthX,pe):(Te=E.tables.cff.topDict._subrs,je=E.tables.cff.topDict._subrsBias,De=E.tables.cff.topDict._defaultWidthX,E.tables.cff.topDict))._nominalWidthX,De);function Wt(Mt,er){Ze&&Be.closePath(),Be.moveTo(Mt,er),Ze=!0}function Ot(){Re.length%2==0||Xe||(At=Re.shift()+He),nt+=Re.length>>1,Re.length=0,Xe=!0}return function Mt(er){for(var Dr,ar,Hr,Dn,Nn,As,Ar,kr,Sr,Bn,Rr,pn,jr=0;jr<er.length;){var on=er[jr];switch(jr+=1,on){case 1:case 3:Ot();break;case 4:1<Re.length&&!Xe&&(At=Re.shift()+He,Xe=!0),We+=Re.pop(),Wt(qe,We);break;case 5:for(;0<Re.length;)qe+=Re.shift(),We+=Re.shift(),Be.lineTo(qe,We);break;case 6:for(;0<Re.length&&(qe+=Re.shift(),Be.lineTo(qe,We),Re.length!==0);)We+=Re.shift(),Be.lineTo(qe,We);break;case 7:for(;0<Re.length&&(We+=Re.shift(),Be.lineTo(qe,We),Re.length!==0);)qe+=Re.shift(),Be.lineTo(qe,We);break;case 8:for(;0<Re.length;)G=qe+Re.shift(),X=We+Re.shift(),te=G+Re.shift(),se=X+Re.shift(),qe=te+Re.shift(),We=se+Re.shift(),Be.curveTo(G,X,te,se,qe,We);break;case 10:Nn=Re.pop()+je,(As=Te[Nn])&&Mt(As);break;case 11:return;case 12:switch(on=er[jr],jr+=1,on){case 35:G=qe+Re.shift(),X=We+Re.shift(),te=G+Re.shift(),se=X+Re.shift(),Ar=te+Re.shift(),kr=se+Re.shift(),Sr=Ar+Re.shift(),Bn=kr+Re.shift(),Rr=Sr+Re.shift(),pn=Bn+Re.shift(),qe=Rr+Re.shift(),We=pn+Re.shift(),Re.shift(),Be.curveTo(G,X,te,se,Ar,kr),Be.curveTo(Sr,Bn,Rr,pn,qe,We);break;case 34:G=qe+Re.shift(),X=We,te=G+Re.shift(),se=X+Re.shift(),Ar=te+Re.shift(),kr=se,Sr=Ar+Re.shift(),Bn=se,Rr=Sr+Re.shift(),pn=We,qe=Rr+Re.shift(),Be.curveTo(G,X,te,se,Ar,kr),Be.curveTo(Sr,Bn,Rr,pn,qe,We);break;case 36:G=qe+Re.shift(),X=We+Re.shift(),te=G+Re.shift(),se=X+Re.shift(),Ar=te+Re.shift(),kr=se,Sr=Ar+Re.shift(),Bn=se,Rr=Sr+Re.shift(),pn=Bn+Re.shift(),qe=Rr+Re.shift(),Be.curveTo(G,X,te,se,Ar,kr),Be.curveTo(Sr,Bn,Rr,pn,qe,We);break;case 37:G=qe+Re.shift(),X=We+Re.shift(),te=G+Re.shift(),se=X+Re.shift(),Ar=te+Re.shift(),kr=se+Re.shift(),Sr=Ar+Re.shift(),Bn=kr+Re.shift(),Rr=Sr+Re.shift(),pn=Bn+Re.shift(),Math.abs(Rr-qe)>Math.abs(pn-We)?qe=Rr+Re.shift():We=pn+Re.shift(),Be.curveTo(G,X,te,se,Ar,kr),Be.curveTo(Sr,Bn,Rr,pn,qe,We);break;default:console.log("Glyph "+I.index+": unknown operator 1200"+on),Re.length=0}break;case 14:0<Re.length&&!Xe&&(At=Re.shift()+He,Xe=!0),Ze&&(Be.closePath(),Ze=!1);break;case 18:Ot();break;case 19:case 20:Ot(),jr+=nt+7>>3;break;case 21:2<Re.length&&!Xe&&(At=Re.shift()+He,Xe=!0),We+=Re.pop(),Wt(qe+=Re.pop(),We);break;case 22:1<Re.length&&!Xe&&(At=Re.shift()+He,Xe=!0),Wt(qe+=Re.pop(),We);break;case 23:Ot();break;case 24:for(;2<Re.length;)G=qe+Re.shift(),X=We+Re.shift(),te=G+Re.shift(),se=X+Re.shift(),qe=te+Re.shift(),We=se+Re.shift(),Be.curveTo(G,X,te,se,qe,We);qe+=Re.shift(),We+=Re.shift(),Be.lineTo(qe,We);break;case 25:for(;6<Re.length;)qe+=Re.shift(),We+=Re.shift(),Be.lineTo(qe,We);G=qe+Re.shift(),X=We+Re.shift(),te=G+Re.shift(),se=X+Re.shift(),qe=te+Re.shift(),We=se+Re.shift(),Be.curveTo(G,X,te,se,qe,We);break;case 26:for(Re.length%2&&(qe+=Re.shift());0<Re.length;)G=qe,X=We+Re.shift(),te=G+Re.shift(),se=X+Re.shift(),qe=te,We=se+Re.shift(),Be.curveTo(G,X,te,se,qe,We);break;case 27:for(Re.length%2&&(We+=Re.shift());0<Re.length;)G=qe+Re.shift(),X=We,te=G+Re.shift(),se=X+Re.shift(),qe=te+Re.shift(),We=se,Be.curveTo(G,X,te,se,qe,We);break;case 28:Dr=er[jr],ar=er[jr+1],Re.push((Dr<<24|ar<<16)>>16),jr+=2;break;case 29:Nn=Re.pop()+E.gsubrsBias,(As=E.gsubrs[Nn])&&Mt(As);break;case 30:for(;0<Re.length&&(G=qe,X=We+Re.shift(),te=G+Re.shift(),se=X+Re.shift(),qe=te+Re.shift(),We=se+(Re.length===1?Re.shift():0),Be.curveTo(G,X,te,se,qe,We),Re.length!==0);)G=qe+Re.shift(),X=We,te=G+Re.shift(),se=X+Re.shift(),We=se+Re.shift(),qe=te+(Re.length===1?Re.shift():0),Be.curveTo(G,X,te,se,qe,We);break;case 31:for(;0<Re.length&&(G=qe+Re.shift(),X=We,te=G+Re.shift(),se=X+Re.shift(),We=se+Re.shift(),qe=te+(Re.length===1?Re.shift():0),Be.curveTo(G,X,te,se,qe,We),Re.length!==0);)G=qe,X=We+Re.shift(),te=G+Re.shift(),se=X+Re.shift(),qe=te+Re.shift(),We=se+(Re.length===1?Re.shift():0),Be.curveTo(G,X,te,se,qe,We);break;default:on<32?console.log("Glyph "+I.index+": unknown operator "+on):on<247?Re.push(on-139):on<251?(Dr=er[jr],jr+=1,Re.push(256*(on-247)+Dr+108)):on<255?(Dr=er[jr],jr+=1,Re.push(256*-(on-251)-Dr-108)):(Dr=er[jr],ar=er[jr+1],Hr=er[jr+2],Dn=er[jr+3],jr+=4,Re.push((Dr<<24|ar<<16|Hr<<8|Dn)/65536))}}}(L),I.advanceWidth=At,Be}function zr(E,I){var L,G=he.indexOf(E);return 0<=G&&(L=G),0<=(G=I.indexOf(E))?L=G+he.length:(L=he.length+I.length,I.push(E)),L}function ss(E,I,L){for(var G={},X=0;X<E.length;X+=1){var te=E[X],se=I[te.name];se===void 0||function pe(Te,je){if(Te===je)return 1;if(Array.isArray(Te)&&Array.isArray(je)&&Te.length===je.length){for(var De=0;De<Te.length;De+=1)if(!pe(Te[De],je[De]))return;return 1}}(se,te.value)||(te.type==="SID"&&(se=zr(se,L)),G[te.op]={name:te.name,type:te.type,value:se})}return G}function Qr(E,I){var L=new Fe.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return L.dict=ss(Cr,E,I),L}function $r(E){var I=new Fe.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return I.topDicts=[{name:"topDict_0",type:"TABLE",value:E}],I}function Ss(E){for(var I=new Fe.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),L=0;L<E.length;L+=1){var G=E.get(L),X=function(te){for(var se=[],pe=te.path,Te=(se.push({name:"width",type:"NUMBER",value:te.advanceWidth}),0),je=0,De=0;De<pe.commands.length;De+=1){var He,Be,Re,nt,Xe=void 0,Ze=void 0,qe=pe.commands[De];(qe=qe.type==="Q"?{type:"C",x:qe.x,y:qe.y,x1:1/3*Te+2/3*qe.x1,y1:1/3*je+2/3*qe.y1,x2:1/3*qe.x+2/3*qe.x1,y2:1/3*qe.y+2/3*qe.y1}:qe).type==="M"?(Xe=Math.round(qe.x-Te),Ze=Math.round(qe.y-je),se.push({name:"dx",type:"NUMBER",value:Xe}),se.push({name:"dy",type:"NUMBER",value:Ze}),se.push({name:"rmoveto",type:"OP",value:21}),Te=Math.round(qe.x),je=Math.round(qe.y)):qe.type==="L"?(Xe=Math.round(qe.x-Te),Ze=Math.round(qe.y-je),se.push({name:"dx",type:"NUMBER",value:Xe}),se.push({name:"dy",type:"NUMBER",value:Ze}),se.push({name:"rlineto",type:"OP",value:5}),Te=Math.round(qe.x),je=Math.round(qe.y)):qe.type==="C"&&(He=Math.round(qe.x1-Te),Be=Math.round(qe.y1-je),Re=Math.round(qe.x2-qe.x1),nt=Math.round(qe.y2-qe.y1),Xe=Math.round(qe.x-qe.x2),Ze=Math.round(qe.y-qe.y2),se.push({name:"dx1",type:"NUMBER",value:He}),se.push({name:"dy1",type:"NUMBER",value:Be}),se.push({name:"dx2",type:"NUMBER",value:Re}),se.push({name:"dy2",type:"NUMBER",value:nt}),se.push({name:"dx",type:"NUMBER",value:Xe}),se.push({name:"dy",type:"NUMBER",value:Ze}),se.push({name:"rrcurveto",type:"OP",value:8}),Te=Math.round(qe.x),je=Math.round(qe.y))}return se.push({name:"endchar",type:"OP",value:14}),se}(G);I.charStrings.push({name:G.name,type:"CHARSTRING",value:X})}return I}var Ls={parse:function(E,I,L){L.tables.cff={},pe=E,G=I,(X={}).formatMajor=Ie.getCard8(pe,G),X.formatMinor=Ie.getCard8(pe,G+1),X.size=Ie.getCard8(pe,G+2),X.offsetSize=Ie.getCard8(pe,G+3),X.startOffset=G,X.endOffset=G+4;var pe=kt(E,X.endOffset,Ie.bytesToString),G=kt(E,pe.endOffset),X=kt(E,G.endOffset,Ie.bytesToString),pe=kt(E,X.endOffset);if(L.gsubrs=pe.objects,L.gsubrsBias=Nt(L.gsubrs),(pe=Zr(E,I,G.objects,X.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+pe.length);if(G=pe[0],(L.tables.cff.topDict=G)._privateDict&&(L.defaultWidthX=G._privateDict.defaultWidthX,L.nominalWidthX=G._privateDict.nominalWidthX),G.ros[0]!==void 0&&G.ros[1]!==void 0&&(L.isCIDFont=!0),L.isCIDFont){var pe=G.fdArray,te=G.fdSelect;if(pe===0||te===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");pe=Zr(E,I,kt(E,pe+=I).objects,X.objects),G._fdArray=pe,G._fdSelect=function(Be,Re,nt,Xe){var Ze,qe=[],We=new Ie.Parser(Be,Re);if((Be=We.parseCard8())===0)for(var At=0;At<nt;At++){if(Xe<=(Ze=We.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+Ze+" (FD count "+Xe+")");qe.push(Ze)}else{if(Be!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Be);var Wt,Ot=We.parseCard16(),Mt=We.parseCard16();if(Mt!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+Mt);for(var er=0;er<Ot;er++){if(Ze=We.parseCard8(),Wt=We.parseCard16(),Xe<=Ze)throw new Error("CFF table CID Font FDSelect has bad FD index value "+Ze+" (FD count "+Xe+")");if(nt<Wt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+Wt);for(;Mt<Wt;Mt++)qe.push(Ze);Mt=Wt}if(Wt!==nt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+Wt)}return qe}(E,te+=I,L.numGlyphs,pe.length)}var te=I+G.private[1],pe=Gr(E,te,G.private[0],X.objects),se=(L.defaultWidthX=pe.defaultWidthX,L.nominalWidthX=pe.nominalWidthX,pe.subrs!==0?(te=kt(E,te+pe.subrs),L.subrs=te.objects,L.subrsBias=Nt(L.subrs)):(L.subrs=[],L.subrsBias=0),kt(E,I+G.charStrings)),pe=(L.nGlyphs=se.objects.length,function(De,He,Be,Re){var nt=new Ie.Parser(De,He),Xe=(--Be,[".notdef"]);if((De=nt.parseCard8())===0)for(var Ze=0;Ze<Be;Ze+=1)qe=nt.parseSID(),Xe.push(Ur(Re,qe));else if(De===1)for(;Xe.length<=Be;)for(var qe=nt.parseSID(),We=nt.parseCard8(),At=0;At<=We;At+=1)Xe.push(Ur(Re,qe)),qe+=1;else{if(De!==2)throw new Error("Unknown charset format "+De);for(;Xe.length<=Be;){qe=nt.parseSID(),We=nt.parseCard16();for(var Wt=0;Wt<=We;Wt+=1)Xe.push(Ur(Re,qe)),qe+=1}}return Xe}(E,I+G.charset,L.nGlyphs,X.objects));G.encoding===0?L.cffEncoding=new ct(ie,pe):G.encoding===1?L.cffEncoding=new ct(ye,pe):L.cffEncoding=function(De,He,Be){var Re={},nt=new Ie.Parser(De,He);if((De=nt.parseCard8())===0)for(var Xe=nt.parseCard8(),Ze=0;Ze<Xe;Ze+=1)Re[We=nt.parseCard8()]=Ze;else{if(De!==1)throw new Error("Unknown encoding format "+De);for(var qe=nt.parseCard8(),We=1,At=0;At<qe;At+=1)for(var Wt=nt.parseCard8(),Ot=nt.parseCard8(),Mt=Wt;Mt<=Wt+Ot;Mt+=1)Re[Mt]=We,We+=1}return new ct(Re,Be)}(E,I+G.encoding,pe),L.encoding=L.encoding||L.cffEncoding,L.glyphs=new jt.GlyphSet(L);for(var Te=0;Te<L.nGlyphs;Te+=1){var je=se.objects[Te];L.glyphs.push(Te,jt.cffGlyphLoader(L,Te,mr,je))}},make:function(E,De){for(var L,G=new Fe.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),X=1/De.unitsPerEm,X={version:De.version,fullName:De.fullName,familyName:De.familyName,weight:De.weightName,fontBBox:De.fontBBox||[0,0,0,0],fontMatrix:[X,0,0,X,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},te=[],se=1;se<E.length;se+=1)L=E.get(se),te.push(L.name);var pe,Te,je=[],De=(G.header=new Fe.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),G.nameIndex=function(Be){var Re=new Fe.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Re.names=[];for(var nt=0;nt<Be.length;nt+=1)Re.names.push({name:"name_"+nt,type:"NAME",value:Be[nt]});return Re}([De.postScriptName]),Qr(X,je)),He=(G.topDictIndex=$r(De),G.globalSubrIndex=new Fe.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),G.charsets=function(Be,Re){for(var nt=new Fe.Record("Charsets",[{name:"format",type:"Card8",value:0}]),Xe=0;Xe<Be.length;Xe+=1){var Ze=zr(Be[Xe],Re);nt.fields.push({name:"glyph_"+Xe,type:"SID",value:Ze})}return nt}(te,je),G.charStringsIndex=Ss(E),G.privateDict=(He={},pe=je,(Te=new Fe.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=ss(Zt,He,pe),Te),G.stringIndex=function(Be){var Re=new Fe.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Re.strings=[];for(var nt=0;nt<Be.length;nt+=1)Re.strings.push({name:"string_"+nt,type:"STRING",value:Be[nt]});return Re}(je),G.header.sizeOf()+G.nameIndex.sizeOf()+G.topDictIndex.sizeOf()+G.stringIndex.sizeOf()+G.globalSubrIndex.sizeOf());return X.charset=He,X.encoding=0,X.charStrings=X.charset+G.charsets.sizeOf(),X.private[1]=X.charStrings+G.charStringsIndex.sizeOf(),De=Qr(X,je),G.topDictIndex=$r(De),G}},Qs={parse:function(G,I){var L={},G=new Ie.Parser(G,I);return L.version=G.parseVersion(),L.fontRevision=Math.round(1e3*G.parseFixed())/1e3,L.checkSumAdjustment=G.parseULong(),L.magicNumber=G.parseULong(),z.argument(L.magicNumber===1594834165,"Font header has wrong magic number."),L.flags=G.parseUShort(),L.unitsPerEm=G.parseUShort(),L.created=G.parseLongDateTime(),L.modified=G.parseLongDateTime(),L.xMin=G.parseShort(),L.yMin=G.parseShort(),L.xMax=G.parseShort(),L.yMax=G.parseShort(),L.macStyle=G.parseUShort(),L.lowestRecPPEM=G.parseUShort(),L.fontDirectionHint=G.parseShort(),L.indexToLocFormat=G.parseShort(),L.glyphDataFormat=G.parseShort(),L},make:function(E){var I=Math.round(new Date().getTime()/1e3)+2082844800,L=I;return E.createdTimestamp&&(L=E.createdTimestamp+2082844800),new Fe.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:L},{name:"modified",type:"LONGDATETIME",value:I},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],E)}},Ae={parse:function(G,I){var L={},G=new Ie.Parser(G,I);return L.version=G.parseVersion(),L.ascender=G.parseShort(),L.descender=G.parseShort(),L.lineGap=G.parseShort(),L.advanceWidthMax=G.parseUShort(),L.minLeftSideBearing=G.parseShort(),L.minRightSideBearing=G.parseShort(),L.xMaxExtent=G.parseShort(),L.caretSlopeRise=G.parseShort(),L.caretSlopeRun=G.parseShort(),L.caretOffset=G.parseShort(),G.relativeOffset+=8,L.metricDataFormat=G.parseShort(),L.numberOfHMetrics=G.parseUShort(),L},make:function(E){return new Fe.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],E)}},dt={parse:function(E,I,L,G,X){for(var te,se,pe=new Ie.Parser(E,I),Te=0;Te<G;Te+=1){Te<L&&(te=pe.parseUShort(),se=pe.parseShort());var je=X.get(Te);je.advanceWidth=te,je.leftSideBearing=se}},make:function(E){for(var I=new Fe.Table("hmtx",[]),L=0;L<E.length;L+=1){var X=E.get(L),G=X.advanceWidth||0,X=X.leftSideBearing||0;I.fields.push({name:"advanceWidth_"+L,type:"USHORT",value:G}),I.fields.push({name:"leftSideBearing_"+L,type:"SHORT",value:X})}return I}},wt={make:function(E){for(var I=new Fe.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:E.length}]),L="",G=12+4*E.length,X=0;X<E.length;++X){var te=L.indexOf(E[X]);te<0&&(te=L.length,L+=E[X]),I.fields.push({name:"offset "+X,type:"USHORT",value:G+te}),I.fields.push({name:"length "+X,type:"USHORT",value:E[X].length})}return I.fields.push({name:"stringPool",type:"CHARARRAY",value:L}),I},parse:function(E,I){for(var L=new Ie.Parser(E,I),G=L.parseULong(),X=(z.argument(G===1,"Unsupported ltag table version."),L.skip("uLong",1),L.parseULong()),te=[],se=0;se<X;se++){for(var pe="",Te=I+L.parseUShort(),je=L.parseUShort(),De=Te;De<Te+je;++De)pe+=String.fromCharCode(E.getInt8(De));te.push(pe)}return te}},ot={parse:function(G,I){var L={},G=new Ie.Parser(G,I);return L.version=G.parseVersion(),L.numGlyphs=G.parseUShort(),L.version===1&&(L.maxPoints=G.parseUShort(),L.maxContours=G.parseUShort(),L.maxCompositePoints=G.parseUShort(),L.maxCompositeContours=G.parseUShort(),L.maxZones=G.parseUShort(),L.maxTwilightPoints=G.parseUShort(),L.maxStorage=G.parseUShort(),L.maxFunctionDefs=G.parseUShort(),L.maxInstructionDefs=G.parseUShort(),L.maxStackElements=G.parseUShort(),L.maxSizeOfInstructions=G.parseUShort(),L.maxComponentElements=G.parseUShort(),L.maxComponentDepth=G.parseUShort()),L},make:function(E){return new Fe.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:E}])}},qt=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],tt={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Jt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},_t={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},Pt="utf-16",xt={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Pr={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function gr(E,I,L){switch(E){case 0:return Pt;case 1:return Pr[L]||xt[I];case 3:if(I===1||I===10)return Pt}}function sr(E){var I,L={};for(I in E)L[E[I]]=parseInt(I);return L}function vr(E,I,L,G,X,te){return new Fe.Record("NameRecord",[{name:"platformID",type:"USHORT",value:E},{name:"encodingID",type:"USHORT",value:I},{name:"languageID",type:"USHORT",value:L},{name:"nameID",type:"USHORT",value:G},{name:"length",type:"USHORT",value:X},{name:"offset",type:"USHORT",value:te}])}function js(E,I){if((L=function(te,se){var pe=te.length,Te=se.length-pe+1;e:for(var je=0;je<Te;je++)for(;je<Te;je++){for(var De=0;De<pe;De++)if(se[je+De]!==te[De])continue e;return je}return-1}(E,I))<0)for(var L=I.length,G=0,X=E.length;G<X;++G)I.push(E[G]);return L}var Mn={parse:function(E,I,L){for(var G={},X=new Ie.Parser(E,I),I=X.parseUShort(),te=X.parseUShort(),se=X.offset+X.parseUShort(),pe=0;pe<te;pe++){var nt=X.parseUShort(),Te=X.parseUShort(),je=X.parseUShort(),De=X.parseUShort(),De=qt[De]||De,He=X.parseUShort(),Be=X.parseUShort(),Re=function(Ze,qe,We){switch(Ze){case 0:if(qe===65535)return"und";if(We)return We[qe];break;case 1:return tt[qe];case 3:return _t[qe]}}(nt,je,L),nt=gr(nt,Te,je);nt!==void 0&&Re!==void 0&&(Te=void 0,(Te=nt===Pt?$.UTF16(E,se+Be,He):$.MACSTRING(E,se+Be,He,nt))&&((je=(je=G[De])===void 0?G[De]={}:je)[Re]=Te))}return I===1&&X.parseUShort(),G},make:function(E,I){var L,G=[],X={},te=sr(qt);for(L in E){var se=te[L];if(se===void 0&&(se=L),Be=parseInt(se),isNaN(Be))throw new Error('Name table entry "'+L+'" does not exist, see nameTableNames for complete list.');X[Be]=E[L],G.push(Be)}for(var pe=sr(tt),Te=sr(_t),je=[],De=[],He=0;He<G.length;He++){var Be,Re,nt=X[Be=G[He]];for(Re in nt){var Xe=nt[Re],Wt=1,Ze=pe[Re],qe=Jt[Ze],We=gr(Wt,qe,Ze),We=ee.MACSTRING(Xe,We),At=(We===void 0&&(Wt=0,(Ze=I.indexOf(Re))<0&&(Ze=I.length,I.push(Re)),qe=4,We=ee.UTF16(Xe)),js(We,De)),Wt=(je.push(vr(Wt,qe,Ze,Be,We.length,At)),Te[Re]);Wt!==void 0&&(Ze=js(qe=ee.UTF16(Xe),De),je.push(vr(3,1,Wt,Be,qe.length,Ze)))}}je.sort(function(er,Dr){return er.platformID-Dr.platformID||er.encodingID-Dr.encodingID||er.languageID-Dr.languageID||er.nameID-Dr.nameID});for(var Ot=new Fe.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:je.length},{name:"stringOffset",type:"USHORT",value:6+12*je.length}]),Mt=0;Mt<je.length;Mt++)Ot.fields.push({name:"record_"+Mt,type:"RECORD",value:je[Mt]});return Ot.fields.push({name:"strings",type:"LITERAL",value:De}),Ot}},is=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],Jr={parse:function(E,I){var L={},G=new Ie.Parser(E,I);L.version=G.parseUShort(),L.xAvgCharWidth=G.parseShort(),L.usWeightClass=G.parseUShort(),L.usWidthClass=G.parseUShort(),L.fsType=G.parseUShort(),L.ySubscriptXSize=G.parseShort(),L.ySubscriptYSize=G.parseShort(),L.ySubscriptXOffset=G.parseShort(),L.ySubscriptYOffset=G.parseShort(),L.ySuperscriptXSize=G.parseShort(),L.ySuperscriptYSize=G.parseShort(),L.ySuperscriptXOffset=G.parseShort(),L.ySuperscriptYOffset=G.parseShort(),L.yStrikeoutSize=G.parseShort(),L.yStrikeoutPosition=G.parseShort(),L.sFamilyClass=G.parseShort(),L.panose=[];for(var X=0;X<10;X++)L.panose[X]=G.parseByte();return L.ulUnicodeRange1=G.parseULong(),L.ulUnicodeRange2=G.parseULong(),L.ulUnicodeRange3=G.parseULong(),L.ulUnicodeRange4=G.parseULong(),L.achVendID=String.fromCharCode(G.parseByte(),G.parseByte(),G.parseByte(),G.parseByte()),L.fsSelection=G.parseUShort(),L.usFirstCharIndex=G.parseUShort(),L.usLastCharIndex=G.parseUShort(),L.sTypoAscender=G.parseShort(),L.sTypoDescender=G.parseShort(),L.sTypoLineGap=G.parseShort(),L.usWinAscent=G.parseUShort(),L.usWinDescent=G.parseUShort(),1<=L.version&&(L.ulCodePageRange1=G.parseULong(),L.ulCodePageRange2=G.parseULong()),2<=L.version&&(L.sxHeight=G.parseShort(),L.sCapHeight=G.parseShort(),L.usDefaultChar=G.parseUShort(),L.usBreakChar=G.parseUShort(),L.usMaxContent=G.parseUShort()),L},make:function(E){return new Fe.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],E)},unicodeRanges:is,getUnicodeRange:function(E){for(var I=0;I<is.length;I+=1){var L=is[I];if(E>=L.begin&&E<L.end)return I}return-1}},vi={parse:function(E,I){var L={},G=new Ie.Parser(E,I);switch(L.version=G.parseVersion(),L.italicAngle=G.parseFixed(),L.underlinePosition=G.parseShort(),L.underlineThickness=G.parseShort(),L.isFixedPitch=G.parseULong(),L.minMemType42=G.parseULong(),L.maxMemType42=G.parseULong(),L.minMemType1=G.parseULong(),L.maxMemType1=G.parseULong(),L.version){case 1:L.names=Pe.slice();break;case 2:L.numberOfGlyphs=G.parseUShort(),L.glyphNameIndex=new Array(L.numberOfGlyphs);for(var X=0;X<L.numberOfGlyphs;X++)L.glyphNameIndex[X]=G.parseUShort();L.names=[];for(var te,se=0;se<L.numberOfGlyphs;se++)L.glyphNameIndex[se]>=Pe.length&&(te=G.parseChar(),L.names.push(G.parseString(te)));break;case 2.5:L.numberOfGlyphs=G.parseUShort(),L.offset=new Array(L.numberOfGlyphs);for(var pe=0;pe<L.numberOfGlyphs;pe++)L.offset[pe]=G.parseChar()}return L},make:function(){return new Fe.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},vn=new Array(9),Pn=(vn[1]=function(){var E=this.offset+this.relativeOffset,I=this.parseUShort();return I===1?{substFormat:1,coverage:this.parsePointer(Le.coverage),deltaGlyphId:this.parseUShort()}:I===2?{substFormat:2,coverage:this.parsePointer(Le.coverage),substitute:this.parseOffset16List()}:void z.assert(!1,"0x"+E.toString(16)+": lookup type 1 format must be 1 or 2.")},vn[2]=function(){var E=this.parseUShort();return z.argument(E===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:E,coverage:this.parsePointer(Le.coverage),sequences:this.parseListOfLists()}},vn[3]=function(){var E=this.parseUShort();return z.argument(E===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:E,coverage:this.parsePointer(Le.coverage),alternateSets:this.parseListOfLists()}},vn[4]=function(){var E=this.parseUShort();return z.argument(E===1,"GSUB ligature table identifier-format must be 1"),{substFormat:E,coverage:this.parsePointer(Le.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:Le.uShort,lookupListIndex:Le.uShort});vn[5]=function(){var E,I,L=this.offset+this.relativeOffset,G=this.parseUShort();return G===1?{substFormat:G,coverage:this.parsePointer(Le.coverage),ruleSets:this.parseListOfLists(function(){var X=this.parseUShort(),te=this.parseUShort();return{input:this.parseUShortList(X-1),lookupRecords:this.parseRecordList(te,Pn)}})}:G===2?{substFormat:G,coverage:this.parsePointer(Le.coverage),classDef:this.parsePointer(Le.classDef),classSets:this.parseListOfLists(function(){var X=this.parseUShort(),te=this.parseUShort();return{classes:this.parseUShortList(X-1),lookupRecords:this.parseRecordList(te,Pn)}})}:G===3?(E=this.parseUShort(),I=this.parseUShort(),{substFormat:G,coverages:this.parseList(E,Le.pointer(Le.coverage)),lookupRecords:this.parseRecordList(I,Pn)}):void z.assert(!1,"0x"+L.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},vn[6]=function(){var E=this.offset+this.relativeOffset,I=this.parseUShort();return I===1?{substFormat:1,coverage:this.parsePointer(Le.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Pn)}})}:I===2?{substFormat:2,coverage:this.parsePointer(Le.coverage),backtrackClassDef:this.parsePointer(Le.classDef),inputClassDef:this.parsePointer(Le.classDef),lookaheadClassDef:this.parsePointer(Le.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Pn)}})}:I===3?{substFormat:3,backtrackCoverage:this.parseList(Le.pointer(Le.coverage)),inputCoverage:this.parseList(Le.pointer(Le.coverage)),lookaheadCoverage:this.parseList(Le.pointer(Le.coverage)),lookupRecords:this.parseRecordList(Pn)}:void z.assert(!1,"0x"+E.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},vn[7]=function(){var E=this.parseUShort(),E=(z.argument(E===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),I=new Le(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:E,extension:vn[E].call(I)}},vn[8]=function(){var E=this.parseUShort();return z.argument(E===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:E,coverage:this.parsePointer(Le.coverage),backtrackCoverage:this.parseList(Le.pointer(Le.coverage)),lookaheadCoverage:this.parseList(Le.pointer(Le.coverage)),substitutes:this.parseUShortList()}};var bn=new Array(9);bn[1]=function(E){return E.substFormat===1?new Fe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Fe.Coverage(E.coverage)},{name:"deltaGlyphID",type:"USHORT",value:E.deltaGlyphId}]):new Fe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Fe.Coverage(E.coverage)}].concat(Fe.ushortList("substitute",E.substitute)))},bn[3]=function(E){return z.assert(E.substFormat===1,"Lookup type 3 substFormat must be 1."),new Fe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Fe.Coverage(E.coverage)}].concat(Fe.tableList("altSet",E.alternateSets,function(I){return new Fe.Table("alternateSetTable",Fe.ushortList("alternate",I))})))},bn[4]=function(E){return z.assert(E.substFormat===1,"Lookup type 4 substFormat must be 1."),new Fe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Fe.Coverage(E.coverage)}].concat(Fe.tableList("ligSet",E.ligatureSets,function(I){return new Fe.Table("ligatureSetTable",Fe.tableList("ligature",I,function(L){return new Fe.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:L.ligGlyph}].concat(Fe.ushortList("component",L.components,L.components.length+1)))}))})))};var Fa={parse:function(E,I){return I=(E=new Le(E,I=I||0)).parseVersion(1),z.argument(I===1||I===1.1,"Unsupported GSUB table version."),I===1?{version:I,scripts:E.parseScriptList(),features:E.parseFeatureList(),lookups:E.parseLookupList(vn)}:{version:I,scripts:E.parseScriptList(),features:E.parseFeatureList(),lookups:E.parseLookupList(vn),variations:E.parseFeatureVariationsList()}},make:function(E){return new Fe.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Fe.ScriptList(E.scripts)},{name:"features",type:"TABLE",value:new Fe.FeatureList(E.features)},{name:"lookups",type:"TABLE",value:new Fe.LookupList(E.lookups,bn)}])}},Nl={parse:function(E,I){for(var L=new Ie.Parser(E,I),G=L.parseULong(),X=(z.argument(G===1,"Unsupported META table version."),L.parseULong(),L.parseULong(),L.parseULong()),te={},se=0;se<X;se++){var pe=L.parseTag(),je=L.parseULong(),Te=L.parseULong(),je=$.UTF8(E,I+je,Te);te[pe]=je}return te},make:function(E){var I,L=Object.keys(E).length,G="",X=16+12*L,te=new Fe.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:X},{name:"numTags",type:"ULONG",value:L}]);for(I in E){var se=G.length;G+=E[I],te.fields.push({name:"tag "+I,type:"TAG",value:I}),te.fields.push({name:"offset "+I,type:"ULONG",value:X+se}),te.fields.push({name:"length "+I,type:"ULONG",value:E[I].length})}return te.fields.push({name:"stringPool",type:"CHARARRAY",value:G}),te}};function Ni(E){return Math.log(E)/Math.log(2)|0}function io(E){for(;E.length%4!=0;)E.push(0);for(var I=0,L=0;L<E.length;L+=4)I+=(E[L]<<24)+(E[L+1]<<16)+(E[L+2]<<8)+E[L+3];return I%=Math.pow(2,32)}function oo(E,I,L,G){return new Fe.Record("Table Record",[{name:"tag",type:"TAG",value:E!==void 0?E:""},{name:"checkSum",type:"ULONG",value:I!==void 0?I:0},{name:"offset",type:"ULONG",value:L!==void 0?L:0},{name:"length",type:"ULONG",value:G!==void 0?G:0}])}function Zs(E){for(var I=new Fe.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),L=(I.tables=E,I.numTables=E.length,Math.pow(2,Ni(I.numTables))),G=(I.searchRange=16*L,I.entrySelector=Ni(L),I.rangeShift=16*I.numTables-I.searchRange,[]),X=[],te=I.sizeOf()+oo().sizeOf()*I.numTables;te%4!=0;)te+=1,X.push({name:"padding",type:"BYTE",value:0});for(var se=0;se<E.length;se+=1){var pe=E[se],Te=(z.argument(pe.tableName.length===4,"Table name"+pe.tableName+" is invalid."),pe.sizeOf()),je=oo(pe.tableName,io(pe.encode()),te,Te);for(G.push({name:je.tag+" Table Record",type:"RECORD",value:je}),X.push({name:pe.tableName+" table",type:"RECORD",value:pe}),te+=Te,z.argument(!isNaN(te),"Something went wrong calculating the offset.");te%4!=0;)te+=1,X.push({name:"padding",type:"BYTE",value:0})}return G.sort(function(De,He){return De.value.tag>He.value.tag?1:-1}),I.fields=I.fields.concat(G),I.fields=I.fields.concat(X),I}function Xr(E,I,L){for(var G=0;G<I.length;G+=1){var X=E.charToGlyphIndex(I[G]);if(0<X)return E.glyphs.get(X).getMetrics()}return L}var Li={make:Zs,fontToTable:function(E){for(var I,L=[],G=[],X=[],te=[],se=[],pe=[],Te=[],je=0,De=0,He=0,Be=0,Re=0,nt=0;nt<E.glyphs.length;nt+=1){var Xe=E.glyphs.get(nt),Ze=0|Xe.unicode;if(isNaN(Xe.advanceWidth))throw new Error("Glyph "+Xe.name+" ("+nt+"): advanceWidth is not a number.");(Ze<I||I===void 0)&&0<Ze&&(I=Ze),je<Ze&&(je=Ze);var Ze=Jr.getUnicodeRange(Ze);if(Ze<32)De|=1<<Ze;else if(Ze<64)He|=1<<Ze-32;else if(Ze<96)Be|=1<<Ze-64;else{if(!(Ze<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");Re|=1<<Ze-96}Xe.name!==".notdef"&&(Ze=Xe.getMetrics(),L.push(Ze.xMin),G.push(Ze.yMin),X.push(Ze.xMax),te.push(Ze.yMax),pe.push(Ze.leftSideBearing),Te.push(Ze.rightSideBearing),se.push(Xe.advanceWidth))}var qe,We={xMin:Math.min.apply(null,L),yMin:Math.min.apply(null,G),xMax:Math.max.apply(null,X),yMax:Math.max.apply(null,te),advanceWidthMax:Math.max.apply(null,se),advanceWidthAvg:function(on){for(var ea=0,Rs=0;Rs<on.length;Rs+=1)ea+=on[Rs];return ea/on.length}(se),minLeftSideBearing:Math.min.apply(null,pe),maxLeftSideBearing:Math.max.apply(null,pe),minRightSideBearing:Math.min.apply(null,Te)},At=(We.ascender=E.ascender,We.descender=E.descender,Qs.make({flags:3,unitsPerEm:E.unitsPerEm,xMin:We.xMin,yMin:We.yMin,xMax:We.xMax,yMax:We.yMax,lowestRecPPEM:3,createdTimestamp:E.createdTimestamp})),Wt=Ae.make({ascender:We.ascender,descender:We.descender,advanceWidthMax:We.advanceWidthMax,minLeftSideBearing:We.minLeftSideBearing,minRightSideBearing:We.minRightSideBearing,xMaxExtent:We.maxLeftSideBearing+(We.xMax-We.xMin),numberOfHMetrics:E.glyphs.length}),Ot=ot.make(E.glyphs.length),Mt=Jr.make({xAvgCharWidth:Math.round(We.advanceWidthAvg),usWeightClass:E.tables.os2.usWeightClass,usWidthClass:E.tables.os2.usWidthClass,usFirstCharIndex:I,usLastCharIndex:je,ulUnicodeRange1:De,ulUnicodeRange2:He,ulUnicodeRange3:Be,ulUnicodeRange4:Re,fsSelection:E.tables.os2.fsSelection,sTypoAscender:We.ascender,sTypoDescender:We.descender,sTypoLineGap:0,usWinAscent:We.yMax,usWinDescent:Math.abs(We.yMin),ulCodePageRange1:1,sxHeight:Xr(E,"xyvw",{yMax:Math.round(We.ascender/2)}).yMax,sCapHeight:Xr(E,"HIKLEFJMNTZBDPRAGOQSUVWXY",We).yMax,usDefaultChar:E.hasChar(" ")?32:0,usBreakChar:E.hasChar(" ")?32:0}),er=dt.make(E.glyphs),Dr=de.make(E.glyphs),kr=E.getEnglishName("fontFamily"),Sr=E.getEnglishName("fontSubfamily"),Ar=kr+" "+Sr,ar=(ar=E.getEnglishName("postScriptName"))||kr.replace(/\s/g,"")+"-"+Sr,Hr={};for(qe in E.names)Hr[qe]=E.names[qe];Hr.uniqueID||(Hr.uniqueID={en:E.getEnglishName("manufacturer")+":"+Ar}),Hr.postScriptName||(Hr.postScriptName={en:ar}),Hr.preferredFamily||(Hr.preferredFamily=E.names.fontFamily),Hr.preferredSubfamily||(Hr.preferredSubfamily=E.names.fontSubfamily);var Nn=[],Dn=Mn.make(Hr,Nn),Nn=0<Nn.length?wt.make(Nn):void 0,As=vi.make(),Ar=Ls.make(E.glyphs,{version:E.getEnglishName("version"),fullName:Ar,familyName:kr,weightName:Sr,postScriptName:ar,unitsPerEm:E.unitsPerEm,fontBBox:[0,We.yMin,We.ascender,We.advanceWidthMax]}),kr=E.metas&&0<Object.keys(E.metas).length?Nl.make(E.metas):void 0,Sr=[At,Wt,Ot,Mt,Dn,Dr,As,Ar,er];Nn&&Sr.push(Nn),E.tables.gsub&&Sr.push(Fa.make(E.tables.gsub)),kr&&Sr.push(kr);for(var Bn=io((ar=Zs(Sr)).encode()),Rr=ar.fields,pn=!1,jr=0;jr<Rr.length;jr+=1)if(Rr[jr].name==="head table"){Rr[jr].value.checkSumAdjustment=2981146554-Bn,pn=!0;break}if(pn)return ar;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:io};function bi(E,I){for(var L=0,G=E.length-1;L<=G;){var X=L+G>>>1,te=E[X].tag;if(te===I)return X;te<I?L=1+X:G=X-1}return-L-1}function ao(E,I){for(var L=0,G=E.length-1;L<=G;){var X=L+G>>>1,te=E[X];if(te===I)return X;te<I?L=1+X:G=X-1}return-L-1}function ur(E,I){for(var L=0,G=E.length-1;L<=G;){var X,te=L+G>>>1,se=(X=E[te]).start;if(se===I)return X;se<I?L=1+te:G=te-1}if(0<L)return I>(X=E[L-1]).end?0:X}function Js(E,I){this.font=E,this.tableName=I}function Us(E){Js.call(this,E,"gpos")}function en(E){Js.call(this,E,"gsub")}function Ll(E,I,L){for(var G=E.subtables,X=0;X<G.length;X++){var te=G[X];if(te.substFormat===I)return te}if(L)return G.push(L),L}function Ko(E){for(var I=new ArrayBuffer(E.length),L=new Uint8Array(I),G=0;G<E.length;++G)L[G]=E[G];return I}function _i(E,I){if(!E)throw I}function Qo(E,I,L,G,X){var te=0<(I&G)?(te=E.parseByte(),L+(te=I&X?te:-te)):0<(I&X)?L:L+E.parseShort();return te}function Hu(E,I,L){var G,X=new Ie.Parser(I,L);if(E.numberOfContours=X.parseShort(),E._xMin=X.parseShort(),E._yMin=X.parseShort(),E._xMax=X.parseShort(),E._yMax=X.parseShort(),0<E.numberOfContours){for(var te=E.endPointIndices=[],se=0;se<E.numberOfContours;se+=1)te.push(X.parseUShort());E.instructionLength=X.parseUShort(),E.instructions=[];for(var pe=0;pe<E.instructionLength;pe+=1)E.instructions.push(X.parseByte());for(var Te=te[te.length-1]+1,je=[],De=0;De<Te;De+=1)if(G=X.parseByte(),je.push(G),0<(8&G))for(var He=X.parseByte(),Be=0;Be<He;Be+=1)je.push(G),De+=1;if(z.argument(je.length===Te,"Bad flags."),0<te.length){var Re,nt=[];if(0<Te){for(var Xe=0;Xe<Te;Xe+=1)G=je[Xe],(Re={}).onCurve=!!(1&G),Re.lastPointOfContour=0<=te.indexOf(Xe),nt.push(Re);for(var Ze=0,qe=0;qe<Te;qe+=1)G=je[qe],(Re=nt[qe]).x=Qo(X,G,Ze,2,16),Ze=Re.x;for(var We=0,At=0;At<Te;At+=1)G=je[At],(Re=nt[At]).y=Qo(X,G,We,4,32),We=Re.y}E.points=nt}else E.points=[]}else if(E.numberOfContours===0)E.points=[];else{E.isComposite=!0,E.points=[],E.components=[];for(var Wt=!0;Wt;){je=X.parseUShort();var Ot={glyphIndex:X.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&je)?0<(2&je)?(Ot.dx=X.parseShort(),Ot.dy=X.parseShort()):Ot.matchedPoints=[X.parseUShort(),X.parseUShort()]:0<(2&je)?(Ot.dx=X.parseChar(),Ot.dy=X.parseChar()):Ot.matchedPoints=[X.parseByte(),X.parseByte()],0<(8&je)?Ot.xScale=Ot.yScale=X.parseF2Dot14():0<(64&je)?(Ot.xScale=X.parseF2Dot14(),Ot.yScale=X.parseF2Dot14()):0<(128&je)&&(Ot.xScale=X.parseF2Dot14(),Ot.scale01=X.parseF2Dot14(),Ot.scale10=X.parseF2Dot14(),Ot.yScale=X.parseF2Dot14()),E.components.push(Ot),Wt=!!(32&je)}if(256&je){E.instructionLength=X.parseUShort(),E.instructions=[];for(var Mt=0;Mt<E.instructionLength;Mt+=1)E.instructions.push(X.parseByte())}}}function Va(E,I){for(var L=[],G=0;G<E.length;G+=1){var X=E[G],X={x:I.xScale*X.x+I.scale01*X.y+I.dx,y:I.scale10*X.x+I.yScale*X.y+I.dy,onCurve:X.onCurve,lastPointOfContour:X.lastPointOfContour};L.push(X)}return L}function Fs(E){var I=new re;if(E)for(var L=function(He){for(var Be=[],Re=[],nt=0;nt<He.length;nt+=1){var Xe=He[nt];Re.push(Xe),Xe.lastPointOfContour&&(Be.push(Re),Re=[])}return z.argument(Re.length===0,"There are still points left in the current contour."),Be}(E),G=0;G<L.length;++G){var X,te=L[G],se=te[te.length-1],pe=te[0];se.onCurve?I.moveTo(se.x,se.y):pe.onCurve?I.moveTo(pe.x,pe.y):(X={x:.5*(se.x+pe.x),y:.5*(se.y+pe.y)},I.moveTo(X.x,X.y));for(var Te=0;Te<te.length;++Te){var je,De=se,se=pe,pe=te[(Te+1)%te.length];se.onCurve?I.lineTo(se.x,se.y):(je=pe,De.onCurve||(se.x,De.x,se.y,De.y),pe.onCurve||(je={x:.5*(se.x+pe.x),y:.5*(se.y+pe.y)}),I.quadraticCurveTo(se.x,se.y,je.x,je.y))}I.closePath()}return I}function Es(E,I){if(I.isComposite)for(var L=0;L<I.components.length;L+=1){var G=I.components[L],X=E.get(G.glyphIndex);if(X.getPath(),X.points){var te=void 0;if(G.matchedPoints===void 0)te=Va(X.points,G);else{if(G.matchedPoints[0]>I.points.length-1||G.matchedPoints[1]>X.points.length-1)throw Error("Matched points out of range in "+I.name);var se=I.points[G.matchedPoints[0]],pe=X.points[G.matchedPoints[1]],G={xScale:G.xScale,scale01:G.scale01,scale10:G.scale10,yScale:G.yScale,dx:0,dy:0},pe=Va([pe],G)[0];G.dx=se.x-pe.x,G.dy=se.y-pe.y,te=Va(X.points,G)}I.points=I.points.concat(te)}}return Fs(I.points)}(Us.prototype=Js.prototype={searchTag:bi,binSearch:ao,getTable:function(E){var I=this.font.tables[this.tableName];return I=!I&&E?this.font.tables[this.tableName]=this.createDefaultTable():I},getScriptNames:function(){var E=this.getTable();return E?E.scripts.map(function(I){return I.tag}):[]},getDefaultScriptName:function(){var E=this.getTable();if(E){for(var I=!1,L=0;L<E.scripts.length;L++){var G=E.scripts[L].tag;if(G==="DFLT")return G;G==="latn"&&(I=!0)}return I?"latn":void 0}},getScriptTable:function(E,I){var L,G=this.getTable(I);if(G)return L=G.scripts,0<=(G=bi(G.scripts,E=E||"DFLT"))?L[G].script:I?(L.splice(-1-G,0,I={tag:E,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),I.script):void 0},getLangSysTable:function(X,I,L){var G,X=this.getScriptTable(X,L);if(X)return I&&I!=="dflt"&&I!=="DFLT"?0<=(G=bi(X.langSysRecords,I))?X.langSysRecords[G].langSys:L?(X.langSysRecords.splice(-1-G,0,L={tag:I,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),L.langSys):void 0:X.defaultLangSys},getFeatureTable:function(E,I,L,G){if(E=this.getLangSysTable(E,I,G),E){for(var X,te=E.featureIndexes,se=this.font.tables[this.tableName].features,pe=0;pe<te.length;pe++)if((X=se[te[pe]]).tag===L)return X.feature;if(G)return I=se.length,z.assert(I===0||L>=se[I-1].tag,"Features must be added in alphabetical order."),se.push(X={tag:L,feature:{params:0,lookupListIndexes:[]}}),te.push(I),X.feature}},getLookupTables:function(te,I,L,G,X){var te=this.getFeatureTable(te,I,L,X),se=[];if(te){for(var pe,Te=te.lookupListIndexes,je=this.font.tables[this.tableName].lookups,De=0;De<Te.length;De++)(pe=je[Te[De]]).lookupType===G&&se.push(pe);if(se.length===0&&X)return I=je.length,je.push(pe={lookupType:G,lookupFlag:0,subtables:[],markFilteringSet:void 0}),Te.push(I),[pe]}return se},getGlyphClass:function(E,I){switch(E.format){case 1:return E.startGlyph<=I&&I<E.startGlyph+E.classes.length?E.classes[I-E.startGlyph]:0;case 2:var L=ur(E.ranges,I);return L?L.classId:0}},getCoverageIndex:function(E,I){switch(E.format){case 1:var L=ao(E.glyphs,I);return 0<=L?L:-1;case 2:return L=ur(E.ranges,I),L?L.index+I-L.start:-1}},expandCoverage:function(E){if(E.format===1)return E.glyphs;for(var I=[],L=E.ranges,G=0;G<L.length;G++)for(var X=L[G],te=X.start,se=X.end,pe=te;pe<=se;pe++)I.push(pe);return I}}).init=function(){var E=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(E)},Us.prototype.getKerningValue=function(E,I,L){for(var G=0;G<E.length;G++)for(var X=E[G].subtables,te=0;te<X.length;te++){var se=X[te],pe=this.getCoverageIndex(se.coverage,I);if(!(pe<0))switch(se.posFormat){case 1:for(var Te=se.pairSets[pe],je=0;je<Te.length;je++){var De=Te[je];if(De.secondGlyph===L)return De.value1&&De.value1.xAdvance||0}break;case 2:var Be=this.getGlyphClass(se.classDef1,I),He=this.getGlyphClass(se.classDef2,L),Be=se.classRecords[Be][He];return Be.value1&&Be.value1.xAdvance||0}}return 0},Us.prototype.getKerningTables=function(E,I){if(this.font.tables.gpos)return this.getLookupTables(E,I,"kern",2)},(en.prototype=Js.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},en.prototype.getSingle=function(E,I,L){for(var G=[],X=this.getLookupTables(I,L,E,1),te=0;te<X.length;te++)for(var se=X[te].subtables,pe=0;pe<se.length;pe++){var Te=se[pe],je=this.expandCoverage(Te.coverage),De=void 0;if(Te.substFormat===1)for(var He=Te.deltaGlyphId,De=0;De<je.length;De++){var Be=je[De];G.push({sub:Be,by:Be+He})}else{var Re=Te.substitute;for(De=0;De<je.length;De++)G.push({sub:je[De],by:Re[De]})}}return G},en.prototype.getAlternates=function(E,I,L){for(var G=[],X=this.getLookupTables(I,L,E,3),te=0;te<X.length;te++)for(var se=X[te].subtables,pe=0;pe<se.length;pe++)for(var Te=se[pe],je=this.expandCoverage(Te.coverage),De=Te.alternateSets,He=0;He<je.length;He++)G.push({sub:je[He],by:De[He]});return G},en.prototype.getLigatures=function(E,I,L){for(var G=[],X=this.getLookupTables(I,L,E,4),te=0;te<X.length;te++)for(var se=X[te].subtables,pe=0;pe<se.length;pe++)for(var Te=se[pe],je=this.expandCoverage(Te.coverage),De=Te.ligatureSets,He=0;He<je.length;He++)for(var Be=je[He],Re=De[He],nt=0;nt<Re.length;nt++){var Xe=Re[nt];G.push({sub:[Be].concat(Xe.components),by:Xe.ligGlyph})}return G},en.prototype.addSingle=function(E,I,L,G){L=Ll(this.getLookupTables(L,G,E,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),z.assert(L.coverage.format===1,"Ligature: unable to modify coverage table format "+L.coverage.format),G=I.sub,E=this.binSearch(L.coverage.glyphs,G),E<0&&(L.coverage.glyphs.splice(E=-1-E,0,G),L.substitute.splice(E,0,0)),L.substitute[E]=I.by},en.prototype.addAlternate=function(E,I,L,G){L=Ll(this.getLookupTables(L,G,E,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),z.assert(L.coverage.format===1,"Ligature: unable to modify coverage table format "+L.coverage.format),G=I.sub,E=this.binSearch(L.coverage.glyphs,G),E<0&&(L.coverage.glyphs.splice(E=-1-E,0,G),L.alternateSets.splice(E,0,0)),L.alternateSets[E]=I.by},en.prototype.addLigature=function(te,Te,pe,X){var pe=this.getLookupTables(pe,X,te,4,!0)[0],X=pe.subtables[0],te=(X||(pe.subtables[0]=X={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),z.assert(X.coverage.format===1,"Ligature: unable to modify coverage table format "+X.coverage.format),Te.sub[0]),se=Te.sub.slice(1),pe={ligGlyph:Te.by,components:se},Te=this.binSearch(X.coverage.glyphs,te);if(0<=Te){for(var je=X.ligatureSets[Te],De=0;De<je.length;De++)if(function(He,Be){var Re=He.length;if(Re===Be.length){for(var nt=0;nt<Re;nt++)if(He[nt]!==Be[nt])return;return 1}}(je[De].components,se))return;je.push(pe)}else X.coverage.glyphs.splice(Te=-1-Te,0,te),X.ligatureSets.splice(Te,0,[pe])},en.prototype.getFeature=function(E,I,L){if(/ss\d\d/.test(E))return this.getSingle(E,I,L);switch(E){case"aalt":case"salt":return this.getSingle(E,I,L).concat(this.getAlternates(E,I,L));case"dlig":case"liga":case"rlig":return this.getLigatures(E,I,L)}},en.prototype.add=function(E,I,L,G){if(/ss\d\d/.test(E))return this.addSingle(E,I,L,G);switch(E){case"aalt":case"salt":return typeof I.by=="number"?this.addSingle(E,I,L,G):this.addAlternate(E,I,L,G);case"dlig":case"liga":case"rlig":return this.addLigature(E,I,L,G)}};var lo={getPath:Fs,parse:function(E,I,L,G){for(var X=new jt.GlyphSet(G),te=0;te<L.length-1;te+=1){var se=L[te];se!==L[te+1]?X.push(te,jt.ttfGlyphLoader(G,te,Hu,E,I+se,Es)):X.push(te,jt.glyphLoader(G,te))}return X}};function ei(E){this.font=E,this.getCommands=function(I){return lo.getPath(I).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function wi(E){return E}function ti(E){return Math.sign(E)*Math.round(Math.abs(E))}function Ba(E){return Math.sign(E)*Math.round(Math.abs(2*E))/2}function Ul(E){return Math.sign(E)*(Math.round(Math.abs(E)+.5)-.5)}function uo(E){return Math.sign(E)*Math.ceil(Math.abs(E))}function Ts(E){return Math.sign(E)*Math.floor(Math.abs(E))}function Ui(E){var I=this.srPeriod,L=this.srPhase,G=1;return E<0&&(E=-E,G=-1),E+=this.srThreshold-L,E=Math.trunc(E/I)*I,(E+=L)<0?L*G:E*G}var fn={x:1,y:0,axis:"x",distance:function(E,I,L,G){return(L?E.xo:E.x)-(G?I.xo:I.x)},interpolate:function(E,I,L,G){var X,te,se,pe,Te,je,De;if(!G||G===this)return X=E.xo-I.xo,te=E.xo-L.xo,Te=I.x-I.xo,je=L.x-L.xo,(De=(se=Math.abs(X))+(pe=Math.abs(te)))===0?void(E.x=E.xo+(Te+je)/2):void(E.x=E.xo+(Te*pe+je*se)/De);X=G.distance(E,I,!0,!0),te=G.distance(E,L,!0,!0),Te=G.distance(I,I,!1,!0),je=G.distance(L,L,!1,!0),(De=(se=Math.abs(X))+(pe=Math.abs(te)))===0?fn.setRelative(E,E,(Te+je)/2,G,!0):fn.setRelative(E,E,(Te*pe+je*se)/De,G,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(E,I,L,G,X){var te,se;G&&G!==this?(te=X?I.xo:I.x,se=X?I.yo:I.y,te+=L*G.x,se+=L*G.y,E.x=te+(E.y-se)/G.normalSlope):E.x=(X?I.xo:I.x)+L},slope:0,touch:function(E){E.xTouched=!0},touched:function(E){return E.xTouched},untouch:function(E){E.xTouched=!1}},Vn={x:0,y:1,axis:"y",distance:function(E,I,L,G){return(L?E.yo:E.y)-(G?I.yo:I.y)},interpolate:function(E,I,L,G){var X,te,se,pe,Te,je,De;if(!G||G===this)return X=E.yo-I.yo,te=E.yo-L.yo,Te=I.y-I.yo,je=L.y-L.yo,(De=(se=Math.abs(X))+(pe=Math.abs(te)))===0?void(E.y=E.yo+(Te+je)/2):void(E.y=E.yo+(Te*pe+je*se)/De);X=G.distance(E,I,!0,!0),te=G.distance(E,L,!0,!0),Te=G.distance(I,I,!1,!0),je=G.distance(L,L,!1,!0),(De=(se=Math.abs(X))+(pe=Math.abs(te)))===0?Vn.setRelative(E,E,(Te+je)/2,G,!0):Vn.setRelative(E,E,(Te*pe+je*se)/De,G,!0)},normalSlope:0,setRelative:function(E,I,L,G,X){var te,se;G&&G!==this?(te=X?I.xo:I.x,se=X?I.yo:I.y,te+=L*G.x,se+=L*G.y,E.y=se+G.normalSlope*(E.x-te)):E.y=(X?I.yo:I.y)+L},slope:Number.POSITIVE_INFINITY,touch:function(E){E.yTouched=!0},touched:function(E){return E.yTouched},untouch:function(E){E.yTouched=!1}};function gs(E,I){this.x=E,this.y=I,this.axis=void 0,this.slope=I/E,this.normalSlope=-E/I,Object.freeze(this)}function xi(E,I){var L=Math.sqrt(E*E+I*I);return I/=L,(E/=L)===1&&I===0?fn:E===0&&I===1?Vn:new gs(E,I)}function _n(E,I,L,G){this.x=this.xo=Math.round(64*E)/64,this.y=this.yo=Math.round(64*I)/64,this.lastPointOfContour=L,this.onCurve=G,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(fn),Object.freeze(Vn),gs.prototype.distance=function(E,I,L,G){return this.x*fn.distance(E,I,L,G)+this.y*Vn.distance(E,I,L,G)},gs.prototype.interpolate=function(E,X,te,G){var se=G.distance(E,X,!0,!0),pe=G.distance(E,te,!0,!0),X=G.distance(X,X,!1,!0),te=G.distance(te,te,!1,!0),se=Math.abs(se),pe=Math.abs(pe),Te=se+pe;Te===0?this.setRelative(E,E,(X+te)/2,G,!0):this.setRelative(E,E,(X*pe+te*se)/Te,G,!0)},gs.prototype.setRelative=function(E,te,Te,je,pe){var se=pe?te.xo:te.x,pe=pe?te.yo:te.y,te=se+Te*(je=je||this).x,se=pe+Te*je.y,pe=je.normalSlope,Te=this.slope,je=E.x,De=E.y;E.x=(Te*je-pe*te+se-De)/(Te-pe),E.y=Te*(E.x-je)+De},gs.prototype.touch=function(E){E.xTouched=!0,E.yTouched=!0},_n.prototype.nextTouched=function(E){for(var I=this.nextPointOnContour;!E.touched(I)&&I!==this;)I=I.nextPointOnContour;return I},_n.prototype.prevTouched=function(E){for(var I=this.prevPointOnContour;!E.touched(I)&&I!==this;)I=I.prevPointOnContour;return I};var os=Object.freeze(new _n(0,0)),Ga={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Fr(E,I){switch(this.env=E,this.stack=[],this.prog=I,E){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=fn,this.round=ti}}function cr(E){for(var I=E.tZone=new Array(E.gZone.length),L=0;L<I.length;L++)I[L]=new _n(0,0)}function co(E,I){var L,G=E.prog,X=E.ip,te=1;do if((L=G[++X])===88)te++;else if(L===89)te--;else if(L===64)X+=G[X+1]+1;else if(L===65)X+=2*G[X+1]+1;else if(176<=L&&L<=183)X+=L-176+1;else if(184<=L&&L<=191)X+=2*(L-184+1);else if(I&&te===1&&L===27)break;while(0<te);E.ip=X}function Fi(E,I){d.DEBUG&&console.log(I.step,"SVTCA["+E.axis+"]"),I.fv=I.pv=I.dpv=E}function za(E,I){d.DEBUG&&console.log(I.step,"SPVTCA["+E.axis+"]"),I.pv=I.dpv=E}function ho(E,I){d.DEBUG&&console.log(I.step,"SFVTCA["+E.axis+"]"),I.fv=E}function fo(E,I){var L,X=I.stack,G=X.pop(),X=X.pop(),te=I.z2[G],se=I.z1[X];d.DEBUG&&console.log("SPVTL["+E+"]",G,X),G=E?(L=te.y-se.y,se.x-te.x):(L=se.x-te.x,se.y-te.y),I.pv=I.dpv=xi(L,G)}function Vs(E,I){var L,X=I.stack,G=X.pop(),X=X.pop(),te=I.z2[G],se=I.z1[X];d.DEBUG&&console.log("SFVTL["+E+"]",G,X),G=E?(L=te.y-se.y,se.x-te.x):(L=se.x-te.x,se.y-te.y),I.fv=xi(L,G)}function Si(E){d.DEBUG&&console.log(E.step,"POP[]"),E.stack.pop()}function ys(E,I){var L=I.stack.pop(),G=I.z0[L],X=I.fv,te=I.pv,se=(d.DEBUG&&console.log(I.step,"MDAP["+E+"]",L),te.distance(G,os));E&&(se=I.round(se)),X.setRelative(G,os,se,te),X.touch(G),I.rp0=I.rp1=L}function Ha(E,I){var L,G,X,te=I.z2,se=te.length-2;d.DEBUG&&console.log(I.step,"IUP["+E.axis+"]");for(var pe=0;pe<se;pe++)L=te[pe],E.touched(L)||(G=L.prevTouched(E))!==L&&(G===(X=L.nextTouched(E))&&E.setRelative(L,L,E.distance(G,G,!1,!0),E,!0),E.interpolate(L,G,X,E))}function Fl(E,I){for(var L=I.stack,G=E?I.rp1:I.rp2,X=(E?I.z0:I.z1)[G],te=I.fv,se=I.pv,pe=I.loop,Te=I.z2;pe--;){var je=L.pop(),De=Te[je],He=se.distance(X,X,!1,!0);te.setRelative(De,De,He,se),te.touch(De),d.DEBUG&&console.log(I.step,(1<I.loop?"loop "+(I.loop-pe)+": ":"")+"SHP["+(E?"rp1":"rp2")+"]",je)}I.loop=1}function Vi(E,I){for(var L=I.stack,se=E?I.rp1:I.rp2,G=(E?I.z0:I.z1)[se],X=I.fv,te=I.pv,se=L.pop(),pe=I.z2[I.contours[se]],Te=pe,je=(d.DEBUG&&console.log(I.step,"SHC["+E+"]",se),te.distance(G,G,!1,!0));Te!==G&&X.setRelative(Te,Te,je,te),(Te=Te.nextPointOnContour)!==pe;);}function po(E,I){var L,G,pe=I.stack,X=E?I.rp1:I.rp2,X=(E?I.z0:I.z1)[X],te=I.fv,se=I.pv,pe=pe.pop();switch(d.DEBUG&&console.log(I.step,"SHZ["+E+"]",pe),pe){case 0:L=I.tZone;break;case 1:L=I.gZone;break;default:throw new Error("Invalid zone")}for(var Te=se.distance(X,X,!1,!0),je=L.length-2,De=0;De<je;De++)G=L[De],te.setRelative(G,G,Te,se)}function Zo(E,I){var G=I.stack,L=G.pop()/64,G=G.pop(),X=I.z1[G],te=I.z0[I.rp0],se=I.fv,pe=I.pv;se.setRelative(X,te,L,pe),se.touch(X),d.DEBUG&&console.log(I.step,"MSIRP["+E+"]",L,G),I.rp1=I.rp0,I.rp2=G,E&&(I.rp0=G)}function mo(E,I){var L=I.stack,pe=L.pop(),L=L.pop(),G=I.z0[L],X=I.fv,te=I.pv,se=I.cvt[pe],pe=(d.DEBUG&&console.log(I.step,"MIAP["+E+"]",pe,"(",se,")",L),te.distance(G,os));E&&(Math.abs(pe-se)<I.cvCutIn&&(pe=se),pe=I.round(pe)),X.setRelative(G,os,pe,te),I.zp0===0&&(G.xo=G.x,G.yo=G.y),X.touch(G),I.rp0=I.rp1=L}function qa(E,I){var L=I.stack,G=L.pop(),X=I.z2[G];d.DEBUG&&console.log(I.step,"GC["+E+"]",G),L.push(64*I.dpv.distance(X,os,E,!1))}function go(E,I){var G=I.stack,L=G.pop(),G=G.pop(),X=I.z1[L],te=I.z0[G],te=I.dpv.distance(te,X,E,E);d.DEBUG&&console.log(I.step,"MD["+E+"]",L,G,"->",te),I.stack.push(Math.round(64*te))}function Wa(E,I){var L=I.stack,G=L.pop(),X=I.fv,te=I.pv,se=I.ppem,pe=I.deltaBase+16*(E-1),Te=I.deltaShift,je=I.z0;d.DEBUG&&console.log(I.step,"DELTAP["+E+"]",G,L);for(var De=0;De<G;De++){var He=L.pop(),Be=L.pop();pe+((240&Be)>>4)===se&&(0<=(Be=(15&Be)-8)&&Be++,d.DEBUG&&console.log(I.step,"DELTAPFIX",He,"by",Be*Te),He=je[He],X.setRelative(He,He,Be*Te,te))}}function Bi(E,I){var L=I.stack,G=L.pop();d.DEBUG&&console.log(I.step,"ROUND[]"),L.push(64*I.round(G/64))}function ji(E,I){var L=I.stack,G=L.pop(),X=I.ppem,te=I.deltaBase+16*(E-1),se=I.deltaShift;d.DEBUG&&console.log(I.step,"DELTAC["+E+"]",G,L);for(var pe=0;pe<G;pe++){var Te=L.pop(),je=L.pop();te+((240&je)>>4)===X&&(0<=(je=(15&je)-8)&&je++,je=je*se,d.DEBUG&&console.log(I.step,"DELTACFIX",Te,"by",je),I.cvt[Te]+=je)}}function Ya(E,I){var L,X=I.stack,G=X.pop(),X=X.pop(),te=I.z2[G],se=I.z1[X];d.DEBUG&&console.log(I.step,"SDPVTL["+E+"]",G,X),G=E?(L=te.y-se.y,se.x-te.x):(L=se.x-te.x,se.y-te.y),I.dpv=xi(L,G)}function Bs(E,I){var L=I.stack,G=I.prog,X=I.ip;d.DEBUG&&console.log(I.step,"PUSHB["+E+"]");for(var te=0;te<E;te++)L.push(G[++X]);I.ip=X}function Cs(E,I){var L=I.ip,G=I.prog,X=I.stack;d.DEBUG&&console.log(I.ip,"PUSHW["+E+"]");for(var te=0;te<E;te++){var se=G[++L]<<8|G[++L];32768&se&&(se=-(1+(65535^se))),X.push(se)}I.ip=L}function Et(E,I,L,G,X,te){var se,pe,je=te.stack,Te=E&&je.pop(),je=je.pop(),De=te.rp0,De=te.z0[De],He=te.z1[je],Be=te.minDis,Re=te.fv,nt=te.dpv,Xe=se=nt.distance(He,De,!0,!0),Ze=0<=Xe?1:-1;Xe=Math.abs(Xe),E&&(pe=te.cvt[Te],G&&Math.abs(Xe-pe)<te.cvCutIn&&(Xe=pe)),L&&Xe<Be&&(Xe=Be),G&&(Xe=te.round(Xe)),Re.setRelative(He,De,Ze*Xe,nt),Re.touch(He),d.DEBUG&&console.log(te.step,(E?"MIRP[":"MDRP[")+(I?"M":"m")+(L?">":"_")+(G?"R":"_")+(X===0?"Gr":X===1?"Bl":X===2?"Wh":"")+"]",E?Te+"("+te.cvt[Te]+","+pe+")":"",je,"(d =",se,"->",Ze*Xe,")"),te.rp1=te.rp0,te.rp2=je,I&&(te.rp0=je)}ei.prototype.exec=function(E,I){if(typeof I!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var L=this.font,G=this._prepState;if(!G||G.ppem!==I){var X=this._fpgmState;if(!X){Fr.prototype=Ga,(X=this._fpgmState=new Fr("fpgm",L.tables.fpgm)).funcs=[],X.font=L,d.DEBUG&&(console.log("---EXEC FPGM---"),X.step=-1);try{Ei(X)}catch(je){return console.log("Hinting error in FPGM:"+je),void(this._errorState=3)}}Fr.prototype=X,(G=this._prepState=new Fr("prep",L.tables.prep)).ppem=I;var te=L.tables.cvt;if(te)for(var se=G.cvt=new Array(te.length),pe=I/L.unitsPerEm,Te=0;Te<te.length;Te++)se[Te]=te[Te]*pe;else G.cvt=[];d.DEBUG&&(console.log("---EXEC PREP---"),G.step=-1);try{Ei(G)}catch(je){this._errorState<2&&console.log("Hinting error in PREP:"+je),this._errorState=2}}if(!(1<this._errorState))try{return Vl(E,G)}catch(je){this._errorState<1&&(console.log("Hinting error:"+je),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var Vl=function(E,I){var L=I.ppem/I.font.unitsPerEm,G=L,X=E.components;if(Fr.prototype=I,X){for(var te=I.font,se=[],pe=[],Te=0;Te<X.length;Te++){var je=X[Te],De=te.glyphs.get(je.glyphIndex),He=new Fr("glyf",De.instructions);d.DEBUG&&(console.log("---EXEC COMP "+Te+"---"),He.step=-1),yo(De,He,L,G);for(var Be=Math.round(je.dx*L),Re=Math.round(je.dy*G),nt=He.gZone,Xe=He.contours,Ze=0;Ze<nt.length;Ze++){var qe=nt[Ze];qe.xTouched=qe.yTouched=!1,qe.xo=qe.x=qe.x+Be,qe.yo=qe.y=qe.y+Re}var We=se.length;se.push.apply(se,nt);for(var At=0;At<Xe.length;At++)pe.push(Xe[At]+We)}E.instructions&&!He.inhibitGridFit&&((He=new Fr("glyf",E.instructions)).gZone=He.z0=He.z1=He.z2=se,He.contours=pe,se.push(new _n(0,0),new _n(Math.round(E.advanceWidth*L),0)),d.DEBUG&&(console.log("---EXEC COMPOSITE---"),He.step=-1),Ei(He),se.length-=2)}else He=new Fr("glyf",E.instructions),d.DEBUG&&(console.log("---EXEC GLYPH---"),He.step=-1),yo(E,He,L,G),se=He.gZone;return se},yo=function(E,I,L,G){for(var X,te,se,pe=E.points||[],Te=pe.length,je=I.gZone=I.z0=I.z1=I.z2=[],De=I.contours=[],He=0;He<Te;He++)X=pe[He],je[He]=new _n(X.x*L,X.y*G,X.lastPointOfContour,X.onCurve);for(var Be=0;Be<Te;Be++)X=je[Be],te||(te=X,De.push(Be)),X.lastPointOfContour?((X.nextPointOnContour=te).prevPointOnContour=X,te=void 0):(se=je[Be+1],(X.nextPointOnContour=se).prevPointOnContour=X);if(!I.inhibitGridFit){if(d.DEBUG){console.log("PROCESSING GLYPH",I.stack);for(var Re=0;Re<Te;Re++)console.log(Re,je[Re].x,je[Re].y)}if(je.push(new _n(0,0),new _n(Math.round(E.advanceWidth*L),0)),Ei(I),je.length-=2,d.DEBUG){console.log("FINISHED GLYPH",I.stack);for(var nt=0;nt<Te;nt++)console.log(nt,je[nt].x,je[nt].y)}}},Ei=function(E){var I=E.prog;if(I){var L,G=I.length;for(E.ip=0;E.ip<G;E.ip++){if(d.DEBUG&&E.step++,!(L=$a[I[E.ip]]))throw new Error("unknown instruction: 0x"+Number(I[E.ip]).toString(16));L(E)}}},$a=[Fi.bind(void 0,Vn),Fi.bind(void 0,fn),za.bind(void 0,Vn),za.bind(void 0,fn),ho.bind(void 0,Vn),ho.bind(void 0,fn),fo.bind(void 0,0),fo.bind(void 0,1),Vs.bind(void 0,0),Vs.bind(void 0,1),function(E){var I=(L=E.stack).pop(),L=L.pop();d.DEBUG&&console.log(E.step,"SPVFS[]",I,L),E.pv=E.dpv=xi(L,I)},function(E){var I=(L=E.stack).pop(),L=L.pop();d.DEBUG&&console.log(E.step,"SPVFS[]",I,L),E.fv=xi(L,I)},function(E){var I=E.stack,L=E.pv;d.DEBUG&&console.log(E.step,"GPV[]"),I.push(16384*L.x),I.push(16384*L.y)},function(E){var I=E.stack,L=E.fv;d.DEBUG&&console.log(E.step,"GFV[]"),I.push(16384*L.x),I.push(16384*L.y)},function(E){E.fv=E.pv,d.DEBUG&&console.log(E.step,"SFVTPV[]")},function(I){var L=(se=I.stack).pop(),G=se.pop(),X=se.pop(),te=se.pop(),se=se.pop(),Te=I.z0,De=I.z1,pe=Te[L],Te=Te[G],je=De[X],De=De[te],I=I.z2[se],L=(d.DEBUG&&console.log("ISECT[], ",L,G,X,te,se),pe.x),G=pe.y,X=Te.x,te=Te.y,se=je.x,pe=je.y,Te=De.x,je=De.y,De=(L-X)*(pe-je)-(G-te)*(se-Te),He=L*te-G*X,Be=se*je-pe*Te;I.x=(He*(se-Te)-Be*(L-X))/De,I.y=(He*(pe-je)-Be*(G-te))/De},function(E){E.rp0=E.stack.pop(),d.DEBUG&&console.log(E.step,"SRP0[]",E.rp0)},function(E){E.rp1=E.stack.pop(),d.DEBUG&&console.log(E.step,"SRP1[]",E.rp1)},function(E){E.rp2=E.stack.pop(),d.DEBUG&&console.log(E.step,"SRP2[]",E.rp2)},function(E){var I=E.stack.pop();switch(d.DEBUG&&console.log(E.step,"SZP0[]",I),E.zp0=I){case 0:E.tZone||cr(E),E.z0=E.tZone;break;case 1:E.z0=E.gZone;break;default:throw new Error("Invalid zone pointer")}},function(E){var I=E.stack.pop();switch(d.DEBUG&&console.log(E.step,"SZP1[]",I),E.zp1=I){case 0:E.tZone||cr(E),E.z1=E.tZone;break;case 1:E.z1=E.gZone;break;default:throw new Error("Invalid zone pointer")}},function(E){var I=E.stack.pop();switch(d.DEBUG&&console.log(E.step,"SZP2[]",I),E.zp2=I){case 0:E.tZone||cr(E),E.z2=E.tZone;break;case 1:E.z2=E.gZone;break;default:throw new Error("Invalid zone pointer")}},function(E){var I=E.stack.pop();switch(d.DEBUG&&console.log(E.step,"SZPS[]",I),E.zp0=E.zp1=E.zp2=I){case 0:E.tZone||cr(E),E.z0=E.z1=E.z2=E.tZone;break;case 1:E.z0=E.z1=E.z2=E.gZone;break;default:throw new Error("Invalid zone pointer")}},function(E){E.loop=E.stack.pop(),d.DEBUG&&console.log(E.step,"SLOOP[]",E.loop)},function(E){d.DEBUG&&console.log(E.step,"RTG[]"),E.round=ti},function(E){d.DEBUG&&console.log(E.step,"RTHG[]"),E.round=Ul},function(E){var I=E.stack.pop();d.DEBUG&&console.log(E.step,"SMD[]",I),E.minDis=I/64},function(E){d.DEBUG&&console.log(E.step,"ELSE[]"),co(E,!1)},function(E){var I=E.stack.pop();d.DEBUG&&console.log(E.step,"JMPR[]",I),E.ip+=I-1},function(E){var I=E.stack.pop();d.DEBUG&&console.log(E.step,"SCVTCI[]",I),E.cvCutIn=I/64},void 0,void 0,function(E){var I=E.stack;d.DEBUG&&console.log(E.step,"DUP[]"),I.push(I[I.length-1])},Si,function(E){d.DEBUG&&console.log(E.step,"CLEAR[]"),E.stack.length=0},function(E){var I=E.stack,L=I.pop(),G=I.pop();d.DEBUG&&console.log(E.step,"SWAP[]"),I.push(L),I.push(G)},function(E){var I=E.stack;d.DEBUG&&console.log(E.step,"DEPTH[]"),I.push(I.length)},function(E){var I=E.stack,L=I.pop();d.DEBUG&&console.log(E.step,"CINDEX[]",L),I.push(I[I.length-L])},function(E){var I=E.stack,L=I.pop();d.DEBUG&&console.log(E.step,"MINDEX[]",L),I.push(I.splice(I.length-L,1)[0])},void 0,void 0,void 0,function(E){var I=(G=E.stack).pop(),L=G.pop(),G=(d.DEBUG&&console.log(E.step,"LOOPCALL[]",I,L),E.ip),X=E.prog;E.prog=E.funcs[I];for(var te=0;te<L;te++)Ei(E),d.DEBUG&&console.log(++E.step,te+1<L?"next loopcall":"done loopcall",te);E.ip=G,E.prog=X},function(E){var I=E.stack.pop(),L=(d.DEBUG&&console.log(E.step,"CALL[]",I),E.ip),G=E.prog;E.prog=E.funcs[I],Ei(E),E.ip=L,E.prog=G,d.DEBUG&&console.log(++E.step,"returning from",I)},function(E){if(E.env!=="fpgm")throw new Error("FDEF not allowed here");var G=E.stack,I=E.prog,L=E.ip,G=G.pop(),X=L;for(d.DEBUG&&console.log(E.step,"FDEF[]",G);I[++L]!==45;);E.ip=L,E.funcs[G]=I.slice(X+1,L)},void 0,ys.bind(void 0,0),ys.bind(void 0,1),Ha.bind(void 0,Vn),Ha.bind(void 0,fn),Fl.bind(void 0,0),Fl.bind(void 0,1),Vi.bind(void 0,0),Vi.bind(void 0,1),po.bind(void 0,0),po.bind(void 0,1),function(E){for(var I=E.stack,L=E.loop,G=E.fv,X=I.pop()/64,te=E.z2;L--;){var se=I.pop(),pe=te[se];d.DEBUG&&console.log(E.step,(1<E.loop?"loop "+(E.loop-L)+": ":"")+"SHPIX[]",se,X),G.setRelative(pe,pe,X),G.touch(pe)}E.loop=1},function(E){for(var I=E.stack,L=E.rp1,G=E.rp2,X=E.loop,te=E.z0[L],se=E.z1[G],pe=E.fv,Te=E.dpv,je=E.z2;X--;){var De=I.pop(),He=je[De];d.DEBUG&&console.log(E.step,(1<E.loop?"loop "+(E.loop-X)+": ":"")+"IP[]",De,L,"<->",G),pe.interpolate(He,te,se,Te),pe.touch(He)}E.loop=1},Zo.bind(void 0,0),Zo.bind(void 0,1),function(E){for(var I=E.stack,L=E.rp0,G=E.z0[L],X=E.loop,te=E.fv,se=E.pv,pe=E.z1;X--;){var Te=I.pop(),je=pe[Te];d.DEBUG&&console.log(E.step,(1<E.loop?"loop "+(E.loop-X)+": ":"")+"ALIGNRP[]",Te),te.setRelative(je,G,0,se),te.touch(je)}E.loop=1},function(E){d.DEBUG&&console.log(E.step,"RTDG[]"),E.round=Ba},mo.bind(void 0,0),mo.bind(void 0,1),function(E){var I=E.prog,L=E.ip,G=E.stack,X=I[++L];d.DEBUG&&console.log(E.step,"NPUSHB[]",X);for(var te=0;te<X;te++)G.push(I[++L]);E.ip=L},function(E){var I=E.ip,L=E.prog,G=E.stack,X=L[++I];d.DEBUG&&console.log(E.step,"NPUSHW[]",X);for(var te=0;te<X;te++){var se=L[++I]<<8|L[++I];32768&se&&(se=-(1+(65535^se))),G.push(se)}E.ip=I},function(E){var G=E.stack,I=(I=E.store)||(E.store=[]),L=G.pop(),G=G.pop();d.DEBUG&&console.log(E.step,"WS",L,G),I[G]=L},function(X){var I=X.stack,L=X.store,G=I.pop(),X=(d.DEBUG&&console.log(X.step,"RS",G),L&&L[G]||0);I.push(X)},function(E){var I=(L=E.stack).pop(),L=L.pop();d.DEBUG&&console.log(E.step,"WCVTP",I,L),E.cvt[L]=I/64},function(E){var I=E.stack,L=I.pop();d.DEBUG&&console.log(E.step,"RCVT",L),I.push(64*E.cvt[L])},qa.bind(void 0,0),qa.bind(void 0,1),void 0,go.bind(void 0,0),go.bind(void 0,1),function(E){d.DEBUG&&console.log(E.step,"MPPEM[]"),E.stack.push(E.ppem)},void 0,function(E){d.DEBUG&&console.log(E.step,"FLIPON[]"),E.autoFlip=!0},void 0,void 0,function(E){var I=E.stack,L=I.pop(),G=I.pop();d.DEBUG&&console.log(E.step,"LT[]",L,G),I.push(G<L?1:0)},function(E){var I=E.stack,L=I.pop(),G=I.pop();d.DEBUG&&console.log(E.step,"LTEQ[]",L,G),I.push(G<=L?1:0)},function(E){var I=E.stack,L=I.pop(),G=I.pop();d.DEBUG&&console.log(E.step,"GT[]",L,G),I.push(L<G?1:0)},function(E){var I=E.stack,L=I.pop(),G=I.pop();d.DEBUG&&console.log(E.step,"GTEQ[]",L,G),I.push(L<=G?1:0)},function(E){var I=E.stack,L=I.pop(),G=I.pop();d.DEBUG&&console.log(E.step,"EQ[]",L,G),I.push(L===G?1:0)},function(E){var I=E.stack,L=I.pop(),G=I.pop();d.DEBUG&&console.log(E.step,"NEQ[]",L,G),I.push(L!==G?1:0)},function(E){var I=E.stack,L=I.pop();d.DEBUG&&console.log(E.step,"ODD[]",L),I.push(Math.trunc(L)%2?1:0)},function(E){var I=E.stack,L=I.pop();d.DEBUG&&console.log(E.step,"EVEN[]",L),I.push(Math.trunc(L)%2?0:1)},function(E){var I=E.stack.pop();d.DEBUG&&console.log(E.step,"IF[]",I),I||(co(E,!0),d.DEBUG&&console.log(E.step,"EIF[]"))},function(E){d.DEBUG&&console.log(E.step,"EIF[]")},function(E){var I=E.stack,L=I.pop(),G=I.pop();d.DEBUG&&console.log(E.step,"AND[]",L,G),I.push(L&&G?1:0)},function(E){var I=E.stack,L=I.pop(),G=I.pop();d.DEBUG&&console.log(E.step,"OR[]",L,G),I.push(L||G?1:0)},function(E){var I=E.stack,L=I.pop();d.DEBUG&&console.log(E.step,"NOT[]",L),I.push(L?0:1)},Wa.bind(void 0,1),function(E){var I=E.stack.pop();d.DEBUG&&console.log(E.step,"SDB[]",I),E.deltaBase=I},function(E){var I=E.stack.pop();d.DEBUG&&console.log(E.step,"SDS[]",I),E.deltaShift=Math.pow(.5,I)},function(E){var I=E.stack,L=I.pop(),G=I.pop();d.DEBUG&&console.log(E.step,"ADD[]",L,G),I.push(G+L)},function(E){var I=E.stack,L=I.pop(),G=I.pop();d.DEBUG&&console.log(E.step,"SUB[]",L,G),I.push(G-L)},function(E){var I=E.stack,L=I.pop(),G=I.pop();d.DEBUG&&console.log(E.step,"DIV[]",L,G),I.push(64*G/L)},function(E){var I=E.stack,L=I.pop(),G=I.pop();d.DEBUG&&console.log(E.step,"MUL[]",L,G),I.push(G*L/64)},function(E){var I=E.stack,L=I.pop();d.DEBUG&&console.log(E.step,"ABS[]",L),I.push(Math.abs(L))},function(E){var I=E.stack,L=I.pop();d.DEBUG&&console.log(E.step,"NEG[]",L),I.push(-L)},function(E){var I=E.stack,L=I.pop();d.DEBUG&&console.log(E.step,"FLOOR[]",L),I.push(64*Math.floor(L/64))},function(E){var I=E.stack,L=I.pop();d.DEBUG&&console.log(E.step,"CEILING[]",L),I.push(64*Math.ceil(L/64))},Bi.bind(void 0,0),Bi.bind(void 0,1),Bi.bind(void 0,2),Bi.bind(void 0,3),void 0,void 0,void 0,void 0,function(E){var I=(L=E.stack).pop(),L=L.pop();d.DEBUG&&console.log(E.step,"WCVTF[]",I,L),E.cvt[L]=I*E.ppem/E.font.unitsPerEm},Wa.bind(void 0,2),Wa.bind(void 0,3),ji.bind(void 0,1),ji.bind(void 0,2),ji.bind(void 0,3),function(E){var I,L=E.stack.pop();switch(d.DEBUG&&console.log(E.step,"SROUND[]",L),E.round=Ui,192&L){case 0:I=.5;break;case 64:I=1;break;case 128:I=2;break;default:throw new Error("invalid SROUND value")}switch(E.srPeriod=I,48&L){case 0:E.srPhase=0;break;case 16:E.srPhase=.25*I;break;case 32:E.srPhase=.5*I;break;case 48:E.srPhase=.75*I;break;default:throw new Error("invalid SROUND value")}E.srThreshold=(L&=15)===0?0:(L/8-.5)*I},function(E){var I,L=E.stack.pop();switch(d.DEBUG&&console.log(E.step,"S45ROUND[]",L),E.round=Ui,192&L){case 0:I=Math.sqrt(2)/2;break;case 64:I=Math.sqrt(2);break;case 128:I=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(E.srPeriod=I,48&L){case 0:E.srPhase=0;break;case 16:E.srPhase=.25*I;break;case 32:E.srPhase=.5*I;break;case 48:E.srPhase=.75*I;break;default:throw new Error("invalid S45ROUND value")}E.srThreshold=(L&=15)===0?0:(L/8-.5)*I},void 0,void 0,function(E){d.DEBUG&&console.log(E.step,"ROFF[]"),E.round=wi},void 0,function(E){d.DEBUG&&console.log(E.step,"RUTG[]"),E.round=uo},function(E){d.DEBUG&&console.log(E.step,"RDTG[]"),E.round=Ts},Si,Si,void 0,void 0,void 0,void 0,void 0,function(E){var I=E.stack.pop();d.DEBUG&&console.log(E.step,"SCANCTRL[]",I)},Ya.bind(void 0,0),Ya.bind(void 0,1),function(E){var I=E.stack,L=I.pop(),G=0;d.DEBUG&&console.log(E.step,"GETINFO[]",L),1&L&&(G=35),32&L&&(G|=4096),I.push(G)},void 0,function(E){var I=E.stack,L=I.pop(),G=I.pop(),X=I.pop();d.DEBUG&&console.log(E.step,"ROLL[]"),I.push(G),I.push(L),I.push(X)},function(E){var I=E.stack,L=I.pop(),G=I.pop();d.DEBUG&&console.log(E.step,"MAX[]",L,G),I.push(Math.max(G,L))},function(E){var I=E.stack,L=I.pop(),G=I.pop();d.DEBUG&&console.log(E.step,"MIN[]",L,G),I.push(Math.min(G,L))},function(E){var I=E.stack.pop();d.DEBUG&&console.log(E.step,"SCANTYPE[]",I)},function(E){var I=E.stack.pop(),L=E.stack.pop();switch(d.DEBUG&&console.log(E.step,"INSTCTRL[]",I,L),I){case 1:return void(E.inhibitGridFit=!!L);case 2:return void(E.ignoreCvt=!!L);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Bs.bind(void 0,1),Bs.bind(void 0,2),Bs.bind(void 0,3),Bs.bind(void 0,4),Bs.bind(void 0,5),Bs.bind(void 0,6),Bs.bind(void 0,7),Bs.bind(void 0,8),Cs.bind(void 0,1),Cs.bind(void 0,2),Cs.bind(void 0,3),Cs.bind(void 0,4),Cs.bind(void 0,5),Cs.bind(void 0,6),Cs.bind(void 0,7),Cs.bind(void 0,8),Et.bind(void 0,0,0,0,0,0),Et.bind(void 0,0,0,0,0,1),Et.bind(void 0,0,0,0,0,2),Et.bind(void 0,0,0,0,0,3),Et.bind(void 0,0,0,0,1,0),Et.bind(void 0,0,0,0,1,1),Et.bind(void 0,0,0,0,1,2),Et.bind(void 0,0,0,0,1,3),Et.bind(void 0,0,0,1,0,0),Et.bind(void 0,0,0,1,0,1),Et.bind(void 0,0,0,1,0,2),Et.bind(void 0,0,0,1,0,3),Et.bind(void 0,0,0,1,1,0),Et.bind(void 0,0,0,1,1,1),Et.bind(void 0,0,0,1,1,2),Et.bind(void 0,0,0,1,1,3),Et.bind(void 0,0,1,0,0,0),Et.bind(void 0,0,1,0,0,1),Et.bind(void 0,0,1,0,0,2),Et.bind(void 0,0,1,0,0,3),Et.bind(void 0,0,1,0,1,0),Et.bind(void 0,0,1,0,1,1),Et.bind(void 0,0,1,0,1,2),Et.bind(void 0,0,1,0,1,3),Et.bind(void 0,0,1,1,0,0),Et.bind(void 0,0,1,1,0,1),Et.bind(void 0,0,1,1,0,2),Et.bind(void 0,0,1,1,0,3),Et.bind(void 0,0,1,1,1,0),Et.bind(void 0,0,1,1,1,1),Et.bind(void 0,0,1,1,1,2),Et.bind(void 0,0,1,1,1,3),Et.bind(void 0,1,0,0,0,0),Et.bind(void 0,1,0,0,0,1),Et.bind(void 0,1,0,0,0,2),Et.bind(void 0,1,0,0,0,3),Et.bind(void 0,1,0,0,1,0),Et.bind(void 0,1,0,0,1,1),Et.bind(void 0,1,0,0,1,2),Et.bind(void 0,1,0,0,1,3),Et.bind(void 0,1,0,1,0,0),Et.bind(void 0,1,0,1,0,1),Et.bind(void 0,1,0,1,0,2),Et.bind(void 0,1,0,1,0,3),Et.bind(void 0,1,0,1,1,0),Et.bind(void 0,1,0,1,1,1),Et.bind(void 0,1,0,1,1,2),Et.bind(void 0,1,0,1,1,3),Et.bind(void 0,1,1,0,0,0),Et.bind(void 0,1,1,0,0,1),Et.bind(void 0,1,1,0,0,2),Et.bind(void 0,1,1,0,0,3),Et.bind(void 0,1,1,0,1,0),Et.bind(void 0,1,1,0,1,1),Et.bind(void 0,1,1,0,1,2),Et.bind(void 0,1,1,0,1,3),Et.bind(void 0,1,1,1,0,0),Et.bind(void 0,1,1,1,0,1),Et.bind(void 0,1,1,1,0,2),Et.bind(void 0,1,1,1,0,3),Et.bind(void 0,1,1,1,1,0),Et.bind(void 0,1,1,1,1,1),Et.bind(void 0,1,1,1,1,2),Et.bind(void 0,1,1,1,1,3)],Ti=Array.from||function(E){return E.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function br(E){(E=E||{}).empty||(_i(E.familyName,"When creating a new Font object, familyName is required."),_i(E.styleName,"When creating a new Font object, styleName is required."),_i(E.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),_i(E.ascender,"When creating a new Font object, ascender is required."),_i(E.descender,"When creating a new Font object, descender is required."),_i(E.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:E.familyName||" "},fontSubfamily:{en:E.styleName||" "},fullName:{en:E.fullName||E.familyName+" "+E.styleName},postScriptName:{en:E.postScriptName||(E.familyName+E.styleName).replace(/\s/g,"")},designer:{en:E.designer||" "},designerURL:{en:E.designerURL||" "},manufacturer:{en:E.manufacturer||" "},manufacturerURL:{en:E.manufacturerURL||" "},license:{en:E.license||" "},licenseURL:{en:E.licenseURL||" "},version:{en:E.version||"Version 0.1"},description:{en:E.description||" "},copyright:{en:E.copyright||" "},trademark:{en:E.trademark||" "}},this.unitsPerEm=E.unitsPerEm||1e3,this.ascender=E.ascender,this.descender=E.descender,this.createdTimestamp=E.createdTimestamp,this.tables={os2:{usWeightClass:E.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:E.widthClass||this.usWidthClasses.MEDIUM,fsSelection:E.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new jt.GlyphSet(this,E.glyphs||[]),this.encoding=new Ve(this),this.position=new Us(this),this.substitution=new en(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new ei(this):void 0)}})}function Xa(E,I){var L,G=JSON.stringify(E),X=256;for(L in I){var te=parseInt(L);if(te&&!(te<256)){if(JSON.stringify(I[L])===G)return te;X<=te&&(X=te+1)}}return I[X]=E,X}br.prototype.hasChar=function(E){return this.encoding.charToGlyphIndex(E)!==null},br.prototype.charToGlyphIndex=function(E){return this.encoding.charToGlyphIndex(E)},br.prototype.charToGlyph=function(E){return E=this.charToGlyphIndex(E),this.glyphs.get(E)||this.glyphs.get(0)},br.prototype.stringToGlyphs=function(E,I){I=I||this.defaultRenderOptions;for(var L=Ti(E),G=[],X=0;X<L.length;X+=1){var te=L[X];G.push(this.charToGlyphIndex(te))}var se=G.length;if(I.features){var E=I.script||this.substitution.getDefaultScriptName(),pe=[];I.features.liga&&(pe=pe.concat(this.substitution.getFeature("liga",E,I.language))),I.features.rlig&&(pe=pe.concat(this.substitution.getFeature("rlig",E,I.language)));for(var Te=0;Te<se;Te+=1)for(var je=0;je<pe.length;je++){for(var De=pe[je],He=De.sub,Be=He.length,Re=0;Re<Be&&He[Re]===G[Te+Re];)Re++;Re===Be&&(G.splice(Te,Be,De.by),se=se-Be+1)}}for(var nt=new Array(se),Xe=this.glyphs.get(0),Ze=0;Ze<se;Ze+=1)nt[Ze]=this.glyphs.get(G[Ze])||Xe;return nt},br.prototype.nameToGlyphIndex=function(E){return this.glyphNames.nameToGlyphIndex(E)},br.prototype.nameToGlyph=function(E){return E=this.nameToGlyphIndex(E),this.glyphs.get(E)||this.glyphs.get(0)},br.prototype.glyphIndexToName=function(E){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(E):""},br.prototype.getKerningValue=function(E,I){E=E.index||E,I=I.index||I;var L=this.position.defaultKerningTables;return L?this.position.getKerningValue(L,E,I):this.kerningPairs[E+","+I]||0},br.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},br.prototype.forEachGlyph=function(E,I,L,G,X,te){I=I!==void 0?I:0,L=L!==void 0?L:0,X=X||this.defaultRenderOptions;var se,pe=1/this.unitsPerEm*(G=G!==void 0?G:72),Te=this.stringToGlyphs(E,X);X.kerning&&(E=X.script||this.position.getDefaultScriptName(),se=this.position.getKerningTables(E,X.language));for(var je=0;je<Te.length;je+=1){var De=Te[je];te.call(this,De,I,L,G,X),De.advanceWidth&&(I+=De.advanceWidth*pe),X.kerning&&je<Te.length-1&&(I+=(se?this.position.getKerningValue(se,De.index,Te[je+1].index):this.getKerningValue(De,Te[je+1]))*pe),X.letterSpacing?I+=X.letterSpacing*G:X.tracking&&(I+=X.tracking/1e3*G)}return I},br.prototype.getPath=function(E,I,L,G,X){var te=new re;return this.forEachGlyph(E,I,L,G,X,function(se,pe,Te,je){se=se.getPath(pe,Te,je,X,this),te.extend(se)}),te},br.prototype.getPaths=function(E,I,L,G,X){var te=[];return this.forEachGlyph(E,I,L,G,X,function(se,pe,Te,je){se=se.getPath(pe,Te,je,X,this),te.push(se)}),te},br.prototype.getAdvanceWidth=function(E,I,L){return this.forEachGlyph(E,0,0,I,L,function(){})},br.prototype.draw=function(E,I,L,G,X,te){this.getPath(I,L,G,X,te).draw(E)},br.prototype.drawPoints=function(E,I,L,G,X,te){this.forEachGlyph(I,L,G,X,te,function(se,pe,Te,je){se.drawPoints(E,pe,Te,je)})},br.prototype.drawMetrics=function(E,I,L,G,X,te){this.forEachGlyph(I,L,G,X,te,function(se,pe,Te,je){se.drawMetrics(E,pe,Te,je)})},br.prototype.getEnglishName=function(E){if(E=this.names[E],E)return E.en},br.prototype.validate=function(){var E=this;function I(L){L=E.getEnglishName(L),L&&L.trim().length}I("fontFamily"),I("weightName"),I("manufacturer"),I("copyright"),I("version"),this.unitsPerEm},br.prototype.toTables=function(){return Li.fontToTable(this)},br.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},br.prototype.toArrayBuffer=function(){for(var E=this.toTables().encode(),I=new ArrayBuffer(E.length),L=new Uint8Array(I),G=0;G<E.length;G++)L[G]=E[G];return I},br.prototype.download=function(E){var I=this.getEnglishName("fontFamily"),L=this.getEnglishName("fontSubfamily"),G=(E=E||I.replace(/\s/g,"")+"-"+L+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,G.byteLength,function(X){X.root.getFile(E,{create:!0},function(te){te.createWriter(function(se){var pe=new DataView(G),pe=new Blob([pe],{type:"font/opentype"});se.write(pe),se.addEventListener("writeend",function(){location.href=te.toURL()},!1)})})},function(X){throw new Error(X.name+": "+X.message)})):(I=t("fs"),L=function(X){for(var te=new l(X.byteLength),se=new Uint8Array(X),pe=0;pe<te.length;++pe)te[pe]=se[pe];return te}(G),I.writeFileSync(E,L))},br.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},br.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},br.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var Bl={make:function(E,I){var L=new Fe.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:E.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:E.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*E.axes.length}]);L.offsetToData=L.sizeOf();for(var G,X,te,se=0;se<E.axes.length;se++)L.fields=L.fields.concat((G=se,X=E.axes[se],te=I,te=Xa(X.name,I),[{name:"tag_"+G,type:"TAG",value:X.tag},{name:"minValue_"+G,type:"FIXED",value:X.minValue<<16},{name:"defaultValue_"+G,type:"FIXED",value:X.defaultValue<<16},{name:"maxValue_"+G,type:"FIXED",value:X.maxValue<<16},{name:"flags_"+G,type:"USHORT",value:0},{name:"nameID_"+G,type:"USHORT",value:te}]));for(var pe=0;pe<E.instances.length;pe++)L.fields=L.fields.concat(function(Te,je,De,He){for(var Be=[{name:"nameID_"+Te,type:"USHORT",value:Xa(je.name,He)},{name:"flags_"+Te,type:"USHORT",value:0}],Re=0;Re<De.length;++Re){var nt=De[Re].tag;Be.push({name:"axis_"+Te+" "+nt,type:"FIXED",value:je.coordinates[nt]<<16})}return Be}(pe,E.instances[pe],E.axes,I));return L},parse:function(E,I,L){for(var G,X,te,se,pe=new Ie.Parser(E,I),Te=pe.parseULong(),je=(z.argument(Te===65536,"Unsupported fvar table version."),pe.parseOffset16()),De=(pe.skip("uShort",1),pe.parseUShort()),He=pe.parseUShort(),Be=pe.parseUShort(),Re=pe.parseUShort(),nt=[],Xe=0;Xe<De;Xe++)nt.push((G=E,X=I+je+Xe*He,te=L,se={},G=new Ie.Parser(G,X),se.tag=G.parseTag(),se.minValue=G.parseFixed(),se.defaultValue=G.parseFixed(),se.maxValue=G.parseFixed(),G.skip("uShort",1),se.name=te[G.parseUShort()]||{},se));for(var Ze=[],qe=I+je+De*He,We=0;We<Be;We++)Ze.push(function(At,Wt,Ot,Mt){var er={},Dr=new Ie.Parser(At,Wt);er.name=Mt[Dr.parseUShort()]||{},Dr.skip("uShort",1),er.coordinates={};for(var ar=0;ar<Ot.length;++ar)er.coordinates[Ot[ar].tag]=Dr.parseFixed();return er}(E,qe+We*Re,nt,L));return{axes:nt,instances:Ze}}},as=new Array(10);as[1]=function(){var E=this.offset+this.relativeOffset,I=this.parseUShort();return I===1?{posFormat:1,coverage:this.parsePointer(Le.coverage),value:this.parseValueRecord()}:I===2?{posFormat:2,coverage:this.parsePointer(Le.coverage),values:this.parseValueRecordList()}:void z.assert(!1,"0x"+E.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},as[2]=function(){var E,I,L,G,te=this.offset+this.relativeOffset,X=this.parseUShort(),te=(z.assert(X===1||X===2,"0x"+te.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(Le.coverage)),se=this.parseUShort(),pe=this.parseUShort();return X===1?{posFormat:X,coverage:te,valueFormat1:se,valueFormat2:pe,pairSets:this.parseList(Le.pointer(Le.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(se),value2:this.parseValueRecord(pe)}})))}:X===2?(E=this.parsePointer(Le.classDef),I=this.parsePointer(Le.classDef),L=this.parseUShort(),G=this.parseUShort(),{posFormat:X,coverage:te,valueFormat1:se,valueFormat2:pe,classDef1:E,classDef2:I,class1Count:L,class2Count:G,classRecords:this.parseList(L,Le.list(G,function(){return{value1:this.parseValueRecord(se),value2:this.parseValueRecord(pe)}}))}):void 0},as[3]=function(){return{error:"GPOS Lookup 3 not supported"}},as[4]=function(){return{error:"GPOS Lookup 4 not supported"}},as[5]=function(){return{error:"GPOS Lookup 5 not supported"}},as[6]=function(){return{error:"GPOS Lookup 6 not supported"}},as[7]=function(){return{error:"GPOS Lookup 7 not supported"}},as[8]=function(){return{error:"GPOS Lookup 8 not supported"}},as[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var Jo=new Array(10),Yn={parse:function(E,I){return I=(E=new Le(E,I=I||0)).parseVersion(1),z.argument(I===1||I===1.1,"Unsupported GPOS table version "+I),I===1?{version:I,scripts:E.parseScriptList(),features:E.parseFeatureList(),lookups:E.parseLookupList(as)}:{version:I,scripts:E.parseScriptList(),features:E.parseFeatureList(),lookups:E.parseLookupList(as),variations:E.parseFeatureVariationsList()}},make:function(E){return new Fe.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Fe.ScriptList(E.scripts)},{name:"features",type:"TABLE",value:new Fe.FeatureList(E.features)},{name:"lookups",type:"TABLE",value:new Fe.LookupList(E.lookups,Jo)}])}},Gl={parse:function(E,I){if(E=new Ie.Parser(E,I),(I=E.parseUShort())===0){var L=E,G={},He=(L.skip("uShort"),L.parseUShort()),X=(z.argument(He===0,"Unsupported kern sub-table version."),L.skip("uShort",2),L.parseUShort());L.skip("uShort",3);for(var te=0;te<X;te+=1){var se=L.parseUShort(),pe=L.parseUShort(),Te=L.parseShort();G[se+","+pe]=Te}return G}if(I!==1)throw new Error("Unsupported kern table version ("+I+").");var je=E,De={},He=(je.skip("uShort"),1<je.parseULong()&&console.warn("Only the first kern subtable is supported."),je.skip("uLong"),255&je.parseUShort());if(je.skip("uShort"),He==0){var Be=je.parseUShort();je.skip("uShort",3);for(var Re=0;Re<Be;Re+=1){var nt=je.parseUShort(),Xe=je.parseUShort(),Ze=je.parseShort();De[nt+","+Xe]=Ze}}return De}},zl={parse:function(E,I,L,G){for(var X=new Ie.Parser(E,I),te=G?X.parseUShort:X.parseULong,se=[],pe=0;pe<L+1;pe+=1){var Te=te.call(X);G&&(Te*=2),se.push(Te)}return se}};function ri(E,I){t("fs").readFile(E,function(L,G){if(L)return I(L.message);I(null,Ko(G))})}function U(E,I){var L=new XMLHttpRequest;L.open("get",E,!0),L.responseType="arraybuffer",L.onload=function(){return L.response?I(null,L.response):I("Font could not be loaded: "+L.statusText)},L.onerror=function(){I("Font could not be loaded")},L.send()}function ne(E,I){for(var L=[],G=12,X=0;X<I;X+=1){var te=Ie.getTag(E,G),se=Ie.getULong(E,G+4),pe=Ie.getULong(E,G+8),Te=Ie.getULong(E,G+12);L.push({tag:te,checksum:se,offset:pe,length:Te,compression:!1}),G+=16}return L}function ae(L,I){if(I.compression!=="WOFF")return{data:L,offset:I.offset};var L=new Uint8Array(L.buffer,I.offset+2,I.compressedLength-2),G=new Uint8Array(I.length);if(J(L,G),G.byteLength!==I.length)throw new Error("Decompression error: "+I.tag+" decompressed length doesn't match recorded length");return{data:new DataView(G.buffer,0),offset:0}}function Ee(We){var I,L,G,X,te,se,pe,Te,je,De,He,Be,Re,nt,Xe=new br({empty:!0}),Ze=new DataView(We,0),qe=[],We=Ie.getTag(Ze,0);if(We==="\0\0\0"||We==="true"||We==="typ1")Xe.outlinesFormat="truetype",qe=ne(Ze,G=Ie.getUShort(Ze,4));else if(We==="OTTO")Xe.outlinesFormat="cff",qe=ne(Ze,G=Ie.getUShort(Ze,4));else{if(We!=="wOFF")throw new Error("Unsupported OpenType signature "+We);var At=Ie.getTag(Ze,4);if(At==="\0\0\0")Xe.outlinesFormat="truetype";else{if(At!=="OTTO")throw new Error("Unsupported OpenType flavor "+We);Xe.outlinesFormat="cff"}qe=function(kr,Sr){for(var Bn=[],Rr=44,pn=0;pn<Sr;pn+=1){var jr=Ie.getTag(kr,Rr),on=Ie.getULong(kr,Rr+4),ea=Ie.getULong(kr,Rr+8),Rs=Ie.getULong(kr,Rr+12),vo=void 0,vo=ea<Rs&&"WOFF";Bn.push({tag:jr,offset:on,compression:vo,compressedLength:ea,length:Rs}),Rr+=20}return Bn}(Ze,G=Ie.getUShort(Ze,12))}for(var Wt=0;Wt<G;Wt+=1){var Ot=qe[Wt],Mt=void 0;switch(Ot.tag){case"cmap":Mt=ae(Ze,Ot),Xe.tables.cmap=de.parse(Mt.data,Mt.offset),Xe.encoding=new $e(Xe.tables.cmap);break;case"cvt ":Mt=ae(Ze,Ot),nt=new Ie.Parser(Mt.data,Mt.offset),Xe.tables.cvt=nt.parseShortList(Ot.length/2);break;case"fvar":te=Ot;break;case"fpgm":Mt=ae(Ze,Ot),nt=new Ie.Parser(Mt.data,Mt.offset),Xe.tables.fpgm=nt.parseByteList(Ot.length);break;case"head":Mt=ae(Ze,Ot),Xe.tables.head=Qs.parse(Mt.data,Mt.offset),Xe.unitsPerEm=Xe.tables.head.unitsPerEm,I=Xe.tables.head.indexToLocFormat;break;case"hhea":Mt=ae(Ze,Ot),Xe.tables.hhea=Ae.parse(Mt.data,Mt.offset),Xe.ascender=Xe.tables.hhea.ascender,Xe.descender=Xe.tables.hhea.descender,Xe.numberOfHMetrics=Xe.tables.hhea.numberOfHMetrics;break;case"hmtx":je=Ot;break;case"ltag":Mt=ae(Ze,Ot),L=wt.parse(Mt.data,Mt.offset);break;case"maxp":Mt=ae(Ze,Ot),Xe.tables.maxp=ot.parse(Mt.data,Mt.offset),Xe.numGlyphs=Xe.tables.maxp.numGlyphs;break;case"name":Be=Ot;break;case"OS/2":Mt=ae(Ze,Ot),Xe.tables.os2=Jr.parse(Mt.data,Mt.offset);break;case"post":Mt=ae(Ze,Ot),Xe.tables.post=vi.parse(Mt.data,Mt.offset),Xe.glyphNames=new yt(Xe.tables.post);break;case"prep":Mt=ae(Ze,Ot),nt=new Ie.Parser(Mt.data,Mt.offset),Xe.tables.prep=nt.parseByteList(Ot.length);break;case"glyf":se=Ot;break;case"loca":He=Ot;break;case"CFF ":X=Ot;break;case"kern":De=Ot;break;case"GPOS":pe=Ot;break;case"GSUB":Te=Ot;break;case"meta":Re=Ot}}if(At=ae(Ze,Be),Xe.tables.name=Mn.parse(At.data,At.offset,L),Xe.names=Xe.tables.name,se&&He)We=I===0,At=ae(Ze,He),At=zl.parse(At.data,At.offset,Xe.numGlyphs,We),We=ae(Ze,se),Xe.glyphs=lo.parse(We.data,We.offset,At,Xe);else{if(!X)throw new Error("Font doesn't contain TrueType or CFF outlines.");We=ae(Ze,X),Ls.parse(We.data,We.offset,Xe)}for(var At=ae(Ze,je),er=(dt.parse(At.data,At.offset,Xe.numberOfHMetrics,Xe.numGlyphs,Xe.glyphs),Xe),Dr=er.tables.cmap.glyphIndexMap,ar=Object.keys(Dr),Hr=0;Hr<ar.length;Hr+=1){var Dn,Nn=ar[Hr],As=Dr[Nn];(Dn=er.glyphs.get(As)).addUnicode(parseInt(Nn))}for(var Ar=0;Ar<er.glyphs.length;Ar+=1)Dn=er.glyphs.get(Ar),er.cffEncoding?er.isCIDFont?Dn.name="gid"+Ar:Dn.name=er.cffEncoding.charset[Ar]:er.glyphNames.names&&(Dn.name=er.glyphNames.glyphIndexToName(Ar));return De?(We=ae(Ze,De),Xe.kerningPairs=Gl.parse(We.data,We.offset)):Xe.kerningPairs={},pe&&(At=ae(Ze,pe),Xe.tables.gpos=Yn.parse(At.data,At.offset),Xe.position.init()),Te&&(We=ae(Ze,Te),Xe.tables.gsub=Fa.parse(We.data,We.offset)),te&&(At=ae(Ze,te),Xe.tables.fvar=Bl.parse(At.data,At.offset,Xe.names)),Re&&(We=ae(Ze,Re),Xe.tables.meta=Nl.parse(We.data,We.offset),Xe.metas=Xe.tables.meta),Xe}d.Font=br,d.Glyph=bt,d.Path=re,d.BoundingBox=K,d._parse=Ie,d.parse=Ee,d.load=function(E,I){(typeof window>"u"?ri:U)(E,function(L,G){if(L)return I(L);var X;try{X=Ee(G)}catch(te){return I(te,null)}return I(null,X)})},d.loadSync=function(E){return Ee(Ko(t("fs").readFileSync(E)))},Object.defineProperty(d,"__esModule",{value:!0})},a(typeof c=="object"&&o!==void 0?c:f.opentype={})}).call(this,t("buffer").Buffer)},{buffer:4,fs:2}],258:[function(t,o,c){(function(l){function f(_,w){for(var h=0,m=_.length-1;0<=m;m--){var b=_[m];b==="."?_.splice(m,1):b===".."?(_.splice(m,1),h++):h&&(_.splice(m,1),h--)}if(w)for(;h--;)_.unshift("..");return _}function a(_,w){if(_.filter)return _.filter(w);for(var h=[],m=0;m<_.length;m++)w(_[m],m,_)&&h.push(_[m]);return h}c.resolve=function(){for(var _="",w=!1,h=arguments.length-1;-1<=h&&!w;h--){var m=0<=h?arguments[h]:l.cwd();if(typeof m!="string")throw new TypeError("Arguments to path.resolve must be strings");m&&(_=m+"/"+_,w=m.charAt(0)==="/")}return(w?"/":"")+(_=f(a(_.split("/"),function(b){return!!b}),!w).join("/"))||"."},c.normalize=function(_){var w=c.isAbsolute(_),h=d(_,-1)==="/";return(_=(_=f(a(_.split("/"),function(m){return!!m}),!w).join("/"))||w?_:".")&&h&&(_+="/"),(w?"/":"")+_},c.isAbsolute=function(_){return _.charAt(0)==="/"},c.join=function(){var _=Array.prototype.slice.call(arguments,0);return c.normalize(a(_,function(w,h){if(typeof w!="string")throw new TypeError("Arguments to path.join must be strings");return w}).join("/"))},c.relative=function(_,w){function h(S){for(var j=0;j<S.length&&S[j]==="";j++);for(var A=S.length-1;0<=A&&S[A]==="";A--);return A<j?[]:S.slice(j,A-j+1)}_=c.resolve(_).substr(1),w=c.resolve(w).substr(1);for(var m=h(_.split("/")),b=h(w.split("/")),v=Math.min(m.length,b.length),g=v,p=0;p<v;p++)if(m[p]!==b[p]){g=p;break}for(var y=[],p=g;p<m.length;p++)y.push("..");return(y=y.concat(b.slice(g))).join("/")},c.sep="/",c.delimiter=":",c.dirname=function(_){if(typeof _!="string"&&(_+=""),_.length===0)return".";for(var w=_.charCodeAt(0)===47,h=-1,m=!0,b=_.length-1;1<=b;--b)if(_.charCodeAt(b)===47){if(!m){h=b;break}}else m=!1;return h===-1?w?"/":".":w&&h===1?"/":_.slice(0,h)},c.basename=function(_,w){return _=function(h){typeof h!="string"&&(h+="");for(var m=0,b=-1,v=!0,g=h.length-1;0<=g;--g)if(h.charCodeAt(g)===47){if(!v){m=g+1;break}}else b===-1&&(v=!1,b=g+1);return b===-1?"":h.slice(m,b)}(_),_=w&&_.substr(-1*w.length)===w?_.substr(0,_.length-w.length):_},c.extname=function(_){typeof _!="string"&&(_+="");for(var w=-1,h=0,m=-1,b=!0,v=0,g=_.length-1;0<=g;--g){var p=_.charCodeAt(g);if(p===47){if(b)continue;h=g+1;break}m===-1&&(b=!1,m=g+1),p===46?w===-1?w=g:v!==1&&(v=1):w!==-1&&(v=-1)}return w===-1||m===-1||v===0||v===1&&w===m-1&&w===h+1?"":_.slice(w,m)};var d="ab".substr(-1)==="b"?function(_,w,h){return _.substr(w,h)}:function(_,w,h){return w<0&&(w=_.length+w),_.substr(w,h)}}).call(this,t("_process"))},{_process:259}],259:[function(t,a,c){var l,f,a=a.exports={};function d(){throw new Error("setTimeout has not been defined")}function _(){throw new Error("clearTimeout has not been defined")}try{l=typeof setTimeout=="function"?setTimeout:d}catch{l=d}try{f=typeof clearTimeout=="function"?clearTimeout:_}catch{f=_}function w(j){if(l===setTimeout)return setTimeout(j,0);if((l===d||!l)&&setTimeout)return(l=setTimeout)(j,0);try{return l(j,0)}catch{try{return l.call(null,j,0)}catch{return l.call(this,j,0)}}}var h,m=[],b=!1,v=-1;function g(){b&&h&&(b=!1,h.length?m=h.concat(m):v=-1,m.length&&p())}function p(){if(!b){for(var j=w(g),A=(b=!0,m.length);A;){for(h=m,m=[];++v<A;)h&&h[v].run();v=-1,A=m.length}h=null,b=!1,function(N){if(f===clearTimeout)return clearTimeout(N);if((f===_||!f)&&clearTimeout)return(f=clearTimeout)(N);try{f(N)}catch{try{return f.call(null,N)}catch{return f.call(this,N)}}}(j)}}function y(j,A){this.fun=j,this.array=A}function S(){}a.nextTick=function(j){var A=new Array(arguments.length-1);if(1<arguments.length)for(var N=1;N<arguments.length;N++)A[N-1]=arguments[N];m.push(new y(j,A)),m.length!==1||b||w(p)},y.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=S,a.addListener=S,a.once=S,a.off=S,a.removeListener=S,a.removeAllListeners=S,a.emit=S,a.prependListener=S,a.prependOnceListener=S,a.listeners=function(j){return[]},a.binding=function(j){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(j){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],260:[function(t,o,c){o=function(l){var f,a=Object.prototype,d=a.hasOwnProperty,C=typeof Symbol=="function"?Symbol:{},_=C.iterator||"@@iterator",w=C.asyncIterator||"@@asyncIterator",h=C.toStringTag||"@@toStringTag";function m(Q,$,Z,ee){var re,oe,M,z,$=$&&$.prototype instanceof j?$:j,$=Object.create($.prototype),ee=new q(ee||[]);return $._invoke=(re=Q,oe=Z,M=ee,z=v,function(le,ce){if(z===p)throw new Error("Generator is already running");if(z===y){if(le==="throw")throw ce;return W()}for(M.method=le,M.arg=ce;;){var me=M.delegate;if(me&&(me=function ve(ge,we){var xe=ge.iterator[we.method];if(xe===f){if(we.delegate=null,we.method==="throw"){if(ge.iterator.return&&(we.method="return",we.arg=f,ve(ge,we),we.method==="throw"))return S;we.method="throw",we.arg=new TypeError("The iterator does not provide a 'throw' method")}return S}if(xe=b(xe,ge.iterator,we.arg),xe.type==="throw")return we.method="throw",we.arg=xe.arg,we.delegate=null,S;if(xe=xe.arg,!xe)return we.method="throw",we.arg=new TypeError("iterator result is not an object"),we.delegate=null,S;{if(!xe.done)return xe;we[ge.resultName]=xe.value,we.next=ge.nextLoc,we.method!=="return"&&(we.method="next",we.arg=f)}return we.delegate=null,S}(me,M),me)){if(me===S)continue;return me}if(M.method==="next")M.sent=M._sent=M.arg;else if(M.method==="throw"){if(z===v)throw z=y,M.arg;M.dispatchException(M.arg)}else M.method==="return"&&M.abrupt("return",M.arg);if(z=p,me=b(re,oe,M),me.type==="normal"){if(z=M.done?y:g,me.arg!==S)return{value:me.arg,done:M.done}}else me.type==="throw"&&(z=y,M.method="throw",M.arg=me.arg)}}),$}function b(Q,J,Z){try{return{type:"normal",arg:Q.call(J,Z)}}catch(K){return{type:"throw",arg:K}}}l.wrap=m;var v="suspendedStart",g="suspendedYield",p="executing",y="completed",S={};function j(){}function A(){}function N(){}var C={},T=(C[_]=function(){return this},Object.getPrototypeOf),T=T&&T(T(H([]))),R=(T&&T!==a&&d.call(T,_)&&(C=T),N.prototype=j.prototype=Object.create(C));function P(Q){["next","throw","return"].forEach(function(J){Q[J]=function(Z){return this._invoke(J,Z)}})}function k(Q){var J;this._invoke=function(Z,K){function re(){return new Promise(function(oe,M){(function z(ve,ee,le,ce){var me,ve=b(Q[ve],Q,ee);if(ve.type!=="throw")return(ee=(me=ve.arg).value)&&typeof ee=="object"&&d.call(ee,"__await")?Promise.resolve(ee.__await).then(function(ge){z("next",ge,le,ce)},function(ge){z("throw",ge,le,ce)}):Promise.resolve(ee).then(function(ge){me.value=ge,le(me)},function(ge){return z("throw",ge,le,ce)});ce(ve.arg)})(Z,K,oe,M)})}return J=J?J.then(re,re):re()}}function F(Q){var J={tryLoc:Q[0]};1 in Q&&(J.catchLoc=Q[1]),2 in Q&&(J.finallyLoc=Q[2],J.afterLoc=Q[3]),this.tryEntries.push(J)}function D(Q){var J=Q.completion||{};J.type="normal",delete J.arg,Q.completion=J}function q(Q){this.tryEntries=[{tryLoc:"root"}],Q.forEach(F,this),this.reset(!0)}function H(Q){if(Q){var J,Z=Q[_];if(Z)return Z.call(Q);if(typeof Q.next=="function")return Q;if(!isNaN(Q.length))return J=-1,(Z=function K(){for(;++J<Q.length;)if(d.call(Q,J))return K.value=Q[J],K.done=!1,K;return K.value=f,K.done=!0,K}).next=Z}return{next:W}}function W(){return{value:f,done:!0}}return(A.prototype=R.constructor=N).constructor=A,N[h]=A.displayName="GeneratorFunction",l.isGeneratorFunction=function(Q){return Q=typeof Q=="function"&&Q.constructor,!!Q&&(Q===A||(Q.displayName||Q.name)==="GeneratorFunction")},l.mark=function(Q){return Object.setPrototypeOf?Object.setPrototypeOf(Q,N):(Q.__proto__=N,h in Q||(Q[h]="GeneratorFunction")),Q.prototype=Object.create(R),Q},l.awrap=function(Q){return{__await:Q}},P(k.prototype),k.prototype[w]=function(){return this},l.AsyncIterator=k,l.async=function(Q,J,Z,K){var re=new k(m(Q,J,Z,K));return l.isGeneratorFunction(J)?re:re.next().then(function(oe){return oe.done?oe.value:re.next()})},P(R),R[h]="Generator",R[_]=function(){return this},R.toString=function(){return"[object Generator]"},l.keys=function(Q){var J,Z=[];for(J in Q)Z.push(J);return Z.reverse(),function K(){for(;Z.length;){var re=Z.pop();if(re in Q)return K.value=re,K.done=!1,K}return K.done=!0,K}},l.values=H,q.prototype={constructor:q,reset:function(Q){if(this.prev=0,this.next=0,this.sent=this._sent=f,this.done=!1,this.delegate=null,this.method="next",this.arg=f,this.tryEntries.forEach(D),!Q)for(var J in this)J.charAt(0)==="t"&&d.call(this,J)&&!isNaN(+J.slice(1))&&(this[J]=f)},stop:function(){this.done=!0;var Q=this.tryEntries[0].completion;if(Q.type==="throw")throw Q.arg;return this.rval},dispatchException:function(Q){if(this.done)throw Q;var J=this;function Z($,ee){return oe.type="throw",oe.arg=Q,J.next=$,ee&&(J.method="next",J.arg=f),!!ee}for(var K=this.tryEntries.length-1;0<=K;--K){var re=this.tryEntries[K],oe=re.completion;if(re.tryLoc==="root")return Z("end");if(re.tryLoc<=this.prev){var M=d.call(re,"catchLoc"),z=d.call(re,"finallyLoc");if(M&&z){if(this.prev<re.catchLoc)return Z(re.catchLoc,!0);if(this.prev<re.finallyLoc)return Z(re.finallyLoc)}else if(M){if(this.prev<re.catchLoc)return Z(re.catchLoc,!0)}else{if(!z)throw new Error("try statement without catch or finally");if(this.prev<re.finallyLoc)return Z(re.finallyLoc)}}}},abrupt:function(Q,J){for(var Z=this.tryEntries.length-1;0<=Z;--Z){var K=this.tryEntries[Z];if(K.tryLoc<=this.prev&&d.call(K,"finallyLoc")&&this.prev<K.finallyLoc){var re=K;break}}var oe=(re=re&&(Q==="break"||Q==="continue")&&re.tryLoc<=J&&J<=re.finallyLoc?null:re)?re.completion:{};return oe.type=Q,oe.arg=J,re?(this.method="next",this.next=re.finallyLoc,S):this.complete(oe)},complete:function(Q,J){if(Q.type==="throw")throw Q.arg;return Q.type==="break"||Q.type==="continue"?this.next=Q.arg:Q.type==="return"?(this.rval=this.arg=Q.arg,this.method="return",this.next="end"):Q.type==="normal"&&J&&(this.next=J),S},finish:function(Q){for(var J=this.tryEntries.length-1;0<=J;--J){var Z=this.tryEntries[J];if(Z.finallyLoc===Q)return this.complete(Z.completion,Z.afterLoc),D(Z),S}},catch:function(Q){for(var J=this.tryEntries.length-1;0<=J;--J){var Z,K,re=this.tryEntries[J];if(re.tryLoc===Q)return(Z=re.completion).type==="throw"&&(K=Z.arg,D(re)),K}throw new Error("illegal catch attempt")},delegateYield:function(Q,J,Z){return this.delegate={iterator:H(Q),resultName:J,nextLoc:Z},this.method==="next"&&(this.arg=f),S}},l}(typeof o=="object"?o.exports:{});try{regeneratorRuntime=o}catch{Function("r","regeneratorRuntime = r")(o)}},{}],261:[function(t,o,c){(function(l){var f,a,d,_,w,h,m,b,v,g;function p(D){if(typeof D!="string"&&(D=String(D)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(D))throw new TypeError("Invalid character in header field name");return D.toLowerCase()}function y(D){return D=typeof D!="string"?String(D):D}function S(D){var q={next:function(){var H=D.shift();return{done:H===void 0,value:H}}};return a&&(q[Symbol.iterator]=function(){return q}),q}function j(D){this.map={},D instanceof j?D.forEach(function(q,H){this.append(H,q)},this):Array.isArray(D)?D.forEach(function(q){this.append(q[0],q[1])},this):D&&Object.getOwnPropertyNames(D).forEach(function(q){this.append(q,D[q])},this)}function A(D){if(D.bodyUsed)return Promise.reject(new TypeError("Already read"));D.bodyUsed=!0}function N(D){return new Promise(function(q,H){D.onload=function(){q(D.result)},D.onerror=function(){H(D.error)}})}function C(D){var q=new FileReader,H=N(q);return q.readAsArrayBuffer(D),H}function T(D){var q;return D.slice?D.slice(0):((q=new Uint8Array(D.byteLength)).set(new Uint8Array(D)),q.buffer)}function R(){return this.bodyUsed=!1,this._initBody=function(D){if(this._bodyInit=D)if(typeof D=="string")this._bodyText=D;else if(d&&Blob.prototype.isPrototypeOf(D))this._bodyBlob=D;else if(_&&FormData.prototype.isPrototypeOf(D))this._bodyFormData=D;else if(f&&URLSearchParams.prototype.isPrototypeOf(D))this._bodyText=D.toString();else if(w&&d&&m(D))this._bodyArrayBuffer=T(D.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!w||!ArrayBuffer.prototype.isPrototypeOf(D)&&!b(D))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=T(D)}else this._bodyText="";this.headers.get("content-type")||(typeof D=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f&&URLSearchParams.prototype.isPrototypeOf(D)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d&&(this.blob=function(){var D=A(this);if(D)return D;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?A(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(C)}),this.text=function(){var D,q,H=A(this);if(H)return H;if(this._bodyBlob)return H=this._bodyBlob,D=new FileReader,q=N(D),D.readAsText(H),q;if(this._bodyArrayBuffer)return Promise.resolve(function(W){for(var Q=new Uint8Array(W),J=new Array(Q.length),Z=0;Z<Q.length;Z++)J[Z]=String.fromCharCode(Q[Z]);return J.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},_&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}function P(D,q){var H,W=(q=q||{}).body;if(D instanceof P){if(D.bodyUsed)throw new TypeError("Already read");this.url=D.url,this.credentials=D.credentials,q.headers||(this.headers=new j(D.headers)),this.method=D.method,this.mode=D.mode,W||D._bodyInit==null||(W=D._bodyInit,D.bodyUsed=!0)}else this.url=String(D);if(this.credentials=q.credentials||this.credentials||"omit",!q.headers&&this.headers||(this.headers=new j(q.headers)),this.method=(D=q.method||this.method||"GET",H=D.toUpperCase(),-1<v.indexOf(H)?H:D),this.mode=q.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&W)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(W)}function k(D){var q=new FormData;return D.trim().split("&").forEach(function(H){var W;H&&(W=(H=H.split("=")).shift().replace(/\+/g," "),H=H.join("=").replace(/\+/g," "),q.append(decodeURIComponent(W),decodeURIComponent(H)))}),q}function F(D,q){q=q||{},this.type="default",this.status=q.status===void 0?200:q.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in q?q.statusText:"OK",this.headers=new j(q.headers),this.url=q.url||"",this._initBody(D)}l.fetch||(f="URLSearchParams"in l,a="Symbol"in l&&"iterator"in Symbol,d="FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch{return!1}}(),_="FormData"in l,(w="ArrayBuffer"in l)&&(h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=function(D){return D&&DataView.prototype.isPrototypeOf(D)},b=ArrayBuffer.isView||function(D){return D&&-1<h.indexOf(Object.prototype.toString.call(D))}),j.prototype.append=function(D,q){D=p(D),q=y(q);var H=this.map[D];this.map[D]=H?H+","+q:q},j.prototype.delete=function(D){delete this.map[p(D)]},j.prototype.get=function(D){return D=p(D),this.has(D)?this.map[D]:null},j.prototype.has=function(D){return this.map.hasOwnProperty(p(D))},j.prototype.set=function(D,q){this.map[p(D)]=y(q)},j.prototype.forEach=function(D,q){for(var H in this.map)this.map.hasOwnProperty(H)&&D.call(q,this.map[H],H,this)},j.prototype.keys=function(){var D=[];return this.forEach(function(q,H){D.push(H)}),S(D)},j.prototype.values=function(){var D=[];return this.forEach(function(q){D.push(q)}),S(D)},j.prototype.entries=function(){var D=[];return this.forEach(function(q,H){D.push([H,q])}),S(D)},a&&(j.prototype[Symbol.iterator]=j.prototype.entries),v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],P.prototype.clone=function(){return new P(this,{body:this._bodyInit})},R.call(P.prototype),R.call(F.prototype),F.prototype.clone=function(){return new F(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new j(this.headers),url:this.url})},F.error=function(){var D=new F(null,{status:0,statusText:""});return D.type="error",D},g=[301,302,303,307,308],F.redirect=function(D,q){if(g.indexOf(q)===-1)throw new RangeError("Invalid status code");return new F(null,{status:q,headers:{location:D}})},l.Headers=j,l.Request=P,l.Response=F,l.fetch=function(D,q){return new Promise(function(H,W){var Q=new P(D,q),J=new XMLHttpRequest;J.onload=function(){var Z,K={status:J.status,statusText:J.statusText,headers:(K=J.getAllResponseHeaders()||"",Z=new j,K.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(M){var M=M.split(":"),z=M.shift().trim();z&&(M=M.join(":").trim(),Z.append(z,M))}),Z)},re=(K.url="responseURL"in J?J.responseURL:K.headers.get("X-Request-URL"),"response"in J?J.response:J.responseText);H(new F(re,K))},J.onerror=function(){W(new TypeError("Network request failed"))},J.ontimeout=function(){W(new TypeError("Network request failed"))},J.open(Q.method,Q.url,!0),Q.credentials==="include"?J.withCredentials=!0:Q.credentials==="omit"&&(J.withCredentials=!1),"responseType"in J&&d&&(J.responseType="blob"),Q.headers.forEach(function(Z,K){J.setRequestHeader(K,Z)}),J.send(Q._bodyInit===void 0?null:Q._bodyInit)})},l.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],262:[function(t,o,c){t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l,f=d(t("../core/main")),a=d(t("../color/color_conversion"));function d(h){return h&&h.__esModule?h:{default:h}}var _=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],w=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];f.default.prototype._rgbColorName=function(v){var m,b,v=a.default._rgbaToHSBA(v),g=[(l=v)[0],v[1],v[2]];g[0]!==0&&(g[0]=Math.round(100*g[0]),(v=g[0].toString().split(""))[b=v.length-1]=parseInt(v[b]),v[b]<2.5?v[b]=0:2.5<=v[b]&&v[b]<7.5&&(v[b]=5),v.length===2?(v[0]=parseInt(v[0]),7.5<=v[b]&&(v[b]=0,v[0]=v[0]+1),g[0]=10*v[0]+v[1]):7.5<=v[b]?g[0]=10:g[0]=v[b]),g[2]=g[2]/255;for(var p=g.length-1;1<=p;p--)g[p]<=.25?g[p]=0:.25<g[p]&&g[p]<.75?g[p]=.5:g[p]=1;if(g[0]===0&&g[1]===0&&g[2]===1){for(var y=2;0<=y;y--)l[y]=Math.round(1e4*l[y])/1e4;for(var S=0;S<_.length;S++){if(_[S].h===l[0]&&_[S].s===l[1]&&_[S].b===l[2]){m=_[S].name;break}m="white"}}else for(var j=0;j<w.length;j++)if(w[j].h===g[0]&&w[j].s===g[1]&&w[j].b===g[2]){m=w[j].name;break}return m},t=f.default,c.default=t},{"../color/color_conversion":268,"../core/main":283,"core-js/modules/es.function.name":174,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206}],263:[function(t,o,c){t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t},f="_Description",a="_fallbackDesc",d="_fallbackTable",_="_Label",w="_labelDesc",h="_labelTable";function m(b){if(b==="label"||b==="fallback")throw new Error("description should not be LABEL or FALLBACK");return b.endsWith(".")||b.endsWith(";")||b.endsWith(",")||b.endsWith("?")||b.endsWith("!")||(b+="."),b}l.default.prototype.describe=function(b,v){var g;l.default._validateParameters("describe",arguments),typeof b=="string"&&(g=this.canvas.id,b=m(b),this.dummyDOM||(this.dummyDOM=document.getElementById(g).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==b&&(this.descriptions.fallback.innerHTML=b):this._describeHTML("fallback",b),v===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==b&&(this.descriptions.label.innerHTML=b):this._describeHTML("label",b)))},l.default.prototype.describeElement=function(b,v,g){var p,y;l.default._validateParameters("describeElement",arguments),typeof v=="string"&&typeof b=="string"&&(p=this.canvas.id,v=m(v),y=function(S){if(S==="label"||S==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return S.endsWith(".")||S.endsWith(";")||S.endsWith(",")?S=S.replace(/.$/,":"):S.endsWith(":")||(S+=":"),S}(b),b=b.replace(/[^a-zA-Z0-9]/g,""),y='<th scope="row">'.concat(y,"</th><td>").concat(v,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(p).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[b]?this.descriptions.fallbackElements[b].innerHTML!==y&&(this.descriptions.fallbackElements[b].innerHTML=y):this._describeElementHTML("fallback",b,y),g===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[b]?this.descriptions.labelElements[b].innerHTML!==y&&(this.descriptions.labelElements[b].innerHTML=y):this._describeElementHTML("label",b,y)))},l.default.prototype._describeHTML=function(b,v){var g,p=this.canvas.id;b==="fallback"?(this.dummyDOM.querySelector("#".concat(p+f))?this.dummyDOM.querySelector("#"+p+d).insertAdjacentHTML("beforebegin",'<p id="'.concat(p+a,'"></p>')):(g='<div id="'.concat(p).concat(f,'" role="region" aria-label="Canvas Description"><p id="').concat(p).concat(a,'"></p></div>'),this.dummyDOM.querySelector("#".concat(p,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(p,"accessibleOutput")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#".concat(p)).innerHTML=g),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(p).concat(a)),this.descriptions.fallback.innerHTML=v):b==="label"&&(this.dummyDOM.querySelector("#".concat(p+_))?this.dummyDOM.querySelector("#".concat(p+h))&&this.dummyDOM.querySelector("#".concat(p+h)).insertAdjacentHTML("beforebegin",'<p id="'.concat(p).concat(w,'"></p>')):(g='<div id="'.concat(p).concat(_,'" class="p5Label"><p id="').concat(p).concat(w,'"></p></div>'),this.dummyDOM.querySelector("#".concat(p,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(p,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#"+p).insertAdjacentHTML("afterend",g)),this.descriptions.label=this.dummyDOM.querySelector("#"+p+w),this.descriptions.label.innerHTML=v)},l.default.prototype._describeElementHTML=function(b,v,g){var p,y=this.canvas.id;b==="fallback"?(this.dummyDOM.querySelector("#".concat(y+f))?this.dummyDOM.querySelector("#"+y+d)||this.dummyDOM.querySelector("#"+y+a).insertAdjacentHTML("afterend",'<table id="'.concat(y).concat(d,'"><caption>Canvas elements and their descriptions</caption></table>')):(p='<div id="'.concat(y).concat(f,'" role="region" aria-label="Canvas Description"><table id="').concat(y).concat(d,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(y,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(y,"accessibleOutput")).insertAdjacentHTML("beforebegin",p):this.dummyDOM.querySelector("#"+y).innerHTML=p),(p=document.createElement("tr")).id=y+"_fte_"+v,this.dummyDOM.querySelector("#"+y+d).appendChild(p),this.descriptions.fallbackElements[v]=this.dummyDOM.querySelector("#".concat(y).concat("_fte_").concat(v)),this.descriptions.fallbackElements[v].innerHTML=g):b==="label"&&(this.dummyDOM.querySelector("#".concat(y+_))?this.dummyDOM.querySelector("#".concat(y+h))||this.dummyDOM.querySelector("#"+y+w).insertAdjacentHTML("afterend",'<table id="'.concat(y+h,'"></table>')):(p='<div id="'.concat(y).concat(_,'" class="p5Label"><table id="').concat(y).concat(h,'"></table></div>'),this.dummyDOM.querySelector("#".concat(y,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(y,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",p):this.dummyDOM.querySelector("#"+y).insertAdjacentHTML("afterend",p)),(b=document.createElement("tr")).id=y+"_lte_"+v,this.dummyDOM.querySelector("#"+y+h).appendChild(b),this.descriptions.labelElements[v]=this.dummyDOM.querySelector("#".concat(y).concat("_lte_").concat(v)),this.descriptions.labelElements[v].innerHTML=g)},t=l.default,c.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.replace":204}],264:[function(t,o,c){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype._updateGridOutput=function(l){var f,a,d,_;this.dummyDOM.querySelector("#".concat(l,"_summary"))&&(f=this._accessibleOutputs[l],d=function(w,h,m,b){return h="".concat(h," canvas, ").concat(m," by ").concat(b," pixels, contains ").concat(w[0]),h=(w[0]===1?"".concat(h," shape: "):"".concat(h," shapes: ")).concat(w[1]),h}((a=function(w,h){var m,b="",v="",g=0;for(m in h){var p,y=0;for(p in h[m]){var S='<li id="'.concat(w,"shape").concat(g,'">').concat(h[m][p].color," ").concat(m,",");m==="line"?S+=" location = ".concat(h[m][p].pos,", length = ").concat(h[m][p].length," pixels"):(S+=" location = ".concat(h[m][p].pos),m!=="point"&&(S+=", area = ".concat(h[m][p].area," %")),S+="</li>"),b+=S,y++,g++}v=1<y?"".concat(v," ").concat(y," ").concat(m,"s"):"".concat(v," ").concat(y," ").concat(m)}return{numShapes:[g,v],details:b}}(l,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),_=function(w,h){var m,b,v=0,g="",p=Array.from(Array(10),function(){return Array(10)});for(m in h)for(var y in h[m]){var S=void 0;S=m!=="line"?'<a href="#'.concat(w,"shape").concat(v,'">').concat(h[m][y].color," ").concat(m,"</a>"):'<a href="#'.concat(w,"shape").concat(v,'">').concat(h[m][y].color," ").concat(m," midpoint</a>"),h[m][y].loc.locY<p.length&&h[m][y].loc.locX<p[h[m][y].loc.locY].length&&(p[h[m][y].loc.locY][h[m][y].loc.locX]?p[h[m][y].loc.locY][h[m][y].loc.locX]=p[h[m][y].loc.locY][h[m][y].loc.locX]+"  "+S:p[h[m][y].loc.locY][h[m][y].loc.locX]=S,v++)}for(b in p){var j,A="<tr>";for(j in p[b])A+="<td>",p[b][j]!==void 0&&(A+=p[b][j]),A+="</td>";g=g+A+"</tr>"}return g}(l,this.ingredients.shapes),d!==f.summary.innerHTML&&(f.summary.innerHTML=d),_!==f.map.innerHTML&&(f.map.innerHTML=_),a.details!==f.shapeDetails.innerHTML&&(f.shapeDetails.innerHTML=a.details),this._accessibleOutputs[l]=f)},t=t.default,c.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.map":168,"core-js/modules/es.string.iterator":200}],265:[function(t,o,c){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(d){return function(_){if(Array.isArray(_)){for(var w=0,h=new Array(_.length);w<_.length;w++)h[w]=_[w];return h}}(d)||function(_){if(Symbol.iterator in Object(_)||Object.prototype.toString.call(_)==="[object Arguments]")return Array.from(_)}(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(d,_,w){return _=Math.floor(d[0]/_*10),d=Math.floor(d[1]/w*10),_===10&&(_-=1),d===10&&(d-=1),{locX:_,locY:d}}l.default.prototype.textOutput=function(d){l.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),d===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},l.default.prototype.gridOutput=function(d){l.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),d===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},l.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},l.default.prototype._createOutput=function(d,_){var w,h,m,b=this.canvas.id,v=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:"",pBackground:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(b).parentNode),"");_==="Fallback"?(w=b+d,this.dummyDOM.querySelector("#".concat(h=b+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(b,"_Description"))?this.dummyDOM.querySelector("#".concat(b,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(h,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(b)).innerHTML='<div id="'.concat(h,'" role="region" aria-label="Canvas Outputs"></div>'))):_==="Label"&&(w=b+d+(v=_),this.dummyDOM.querySelector("#".concat(h=b+"accessibleOutput"+_))||(this.dummyDOM.querySelector("#".concat(b,"_Label"))?this.dummyDOM.querySelector("#".concat(b,"_Label")):this.dummyDOM.querySelector("#".concat(b))).insertAdjacentHTML("afterend",'<div id="'.concat(h,'"></div>'))),this._accessibleOutputs[w]={},d==="textOutput"?(v="#".concat(b,"gridOutput").concat(v),m='<div id="'.concat(w,'">Text Output<div id="').concat(w,'Summary" aria-label="text output summary"><p id="').concat(w,'_summary"></p><ul id="').concat(w,'_list"></ul></div><table id="').concat(w,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(v)?this.dummyDOM.querySelector(v).insertAdjacentHTML("beforebegin",m):this.dummyDOM.querySelector("#".concat(h)).innerHTML=m,this._accessibleOutputs[w].list=this.dummyDOM.querySelector("#".concat(w,"_list"))):d==="gridOutput"&&(v="#".concat(b,"textOutput").concat(v),m='<div id="'.concat(w,'">Grid Output<p id="').concat(w,'_summary" aria-label="grid output summary"><table id="').concat(w,'_map" summary="grid output content"></table><ul id="').concat(w,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(v)?this.dummyDOM.querySelector(v).insertAdjacentHTML("afterend",m):this.dummyDOM.querySelector("#".concat(h)).innerHTML=m,this._accessibleOutputs[w].map=this.dummyDOM.querySelector("#".concat(w,"_map"))),this._accessibleOutputs[w].shapeDetails=this.dummyDOM.querySelector("#".concat(w,"_shapeDetails")),this._accessibleOutputs[w].summary=this.dummyDOM.querySelector("#".concat(w,"_summary"))},l.default.prototype._updateAccsOutput=function(){var d=this.canvas.id;JSON.stringify(this.ingredients.shapes)===this.ingredients.pShapes&&this.ingredients.colors.background===this.ingredients.pBackground||(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(d+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(d+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(d+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(d+"gridOutputLabel"))},l.default.prototype._accsBackground=function(d){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.pBackground=this.ingredients.colors.background,this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==d&&(this.ingredients.colors.backgroundRGBA=d,this.ingredients.colors.background=this._rgbColorName(d))},l.default.prototype._accsCanvasColors=function(d,_){d==="fill"?this.ingredients.colors.fillRGBA!==_&&(this.ingredients.colors.fillRGBA=_,this.ingredients.colors.fill=this._rgbColorName(_)):d==="stroke"&&this.ingredients.colors.strokeRGBA!==_&&(this.ingredients.colors.strokeRGBA=_,this.ingredients.colors.stroke=this._rgbColorName(_))},l.default.prototype._accsOutput=function(d,_){d==="ellipse"&&_[2]===_[3]?d="circle":d==="rectangle"&&_[2]===_[3]&&(d="square");var w,h,m={},b=!0,v=function(p,y){var S;return p=p==="rectangle"||p==="ellipse"||p==="arc"||p==="circle"||p==="square"?(S=Math.round(y[0]+y[2]/2),Math.round(y[1]+y[3]/2)):p==="triangle"?(S=(y[0]+y[2]+y[4])/3,(y[1]+y[3]+y[5])/3):p==="quadrilateral"?(S=(y[0]+y[2]+y[4]+y[6])/4,(y[1]+y[3]+y[5]+y[7])/4):p==="line"?(S=(y[0]+y[2])/2,(y[1]+y[3])/2):(S=y[0],y[1]),[S,p]}(d,_);if(d==="line"?(m.color=this.ingredients.colors.stroke,m.length=Math.round(this.dist(_[0],_[1],_[2],_[3])),w=this._getPos(_[0],[1]),h=this._getPos(_[2],[3]),m.loc=a(v,this.width,this.height),m.pos=w===h?"at ".concat(w):"from ".concat(w," to ").concat(h)):(d==="point"?m.color=this.ingredients.colors.stroke:(m.color=this.ingredients.colors.fill,m.area=this._getArea(d,_)),m.pos=this._getPos.apply(this,f(v)),m.loc=a(v,this.width,this.height)),this.ingredients.shapes[d]){if(this.ingredients.shapes[d]!==[m]){for(var g in this.ingredients.shapes[d])JSON.stringify(this.ingredients.shapes[d][g])===JSON.stringify(m)&&(b=!1);b===!0&&this.ingredients.shapes[d].push(m)}}else this.ingredients.shapes[d]=[m]},l.default.prototype._getPos=function(h,w){var h=new DOMPointReadOnly(h,w),w=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),h=h.matrixTransform(w),w=h.x,h=h.y,m=this.width*this._pixelDensity,b=this.height*this._pixelDensity;return w<.4*m?h<.4*b?"top left":.6*b<h?"bottom left":"mid left":.6*m<w?h<.4*b?"top right":.6*b<h?"bottom right":"mid right":h<.4*b?"top middle":.6*b<h?"bottom middle":"middle"},l.default.prototype._getArea=function(d,_){var w,h,m=0,b=(d==="arc"?(m=(w=((_[5]-_[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*_[2]*_[3]/8,_[6]!=="open"&&_[6]!=="chord"||(h=_[0],y=_[1],b=_[0]+_[2]/2*Math.cos(_[4]).toFixed(2),S=_[1]+_[3]/2*Math.sin(_[4]).toFixed(2),g=_[0]+_[2]/2*Math.cos(_[5]).toFixed(2),v=_[1]+_[3]/2*Math.sin(_[5]).toFixed(2),h=Math.abs(h*(S-v)+b*(v-y)+g*(y-S))/2,w>Math.PI?m+=h:m-=h)):d==="ellipse"||d==="circle"?m=3.14*_[2]/2*_[3]/2:d==="line"||d==="point"?m=0:d==="quadrilateral"?m=Math.abs((_[6]+_[0])*(_[7]-_[1])+(_[0]+_[2])*(_[1]-_[3])+(_[2]+_[4])*(_[3]-_[5])+(_[4]+_[6])*(_[5]-_[7]))/2:d==="rectangle"||d==="square"?m=_[2]*_[3]:d==="triangle"&&(m=Math.abs(_[0]*(_[3]-_[5])+_[2]*(_[5]-_[1])+_[4]*(_[1]-_[3]))/2),this.width*this._pixelDensity),v=this.height*this._pixelDensity,g=[new DOMPoint(0,0),new DOMPoint(b,0),new DOMPoint(b,v),new DOMPoint(0,v)],p=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),y=g.map(function(j){return j.matrixTransform(p)}),S=Math.abs((y[3].x+y[0].x)*(y[3].y-y[0].y)+(y[0].x+y[1].x)*(y[0].y-y[1].y)+(y[1].x+y[2].x)*(y[1].y-y[2].y)+(y[2].x+y[3].x)*(y[2].y-y[3].y))/2;return Math.round(100*m/S)},t=l.default,c.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],266:[function(t,o,c){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.concat"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype._updateTextOutput=function(l){var f,a,d,_;this.dummyDOM.querySelector("#".concat(l,"_summary"))&&(f=this._accessibleOutputs[l],d=function(w,h,m,b){return m="Your output is a, ".concat(m," by ").concat(b," pixels, ").concat(h," canvas containing the following"),m=w===1?"".concat(m," shape:"):"".concat(m," ").concat(w," shapes:"),m}((a=function(w,h){var m,b="",v=0;for(m in h)for(var g in h[m]){var p='<li><a href="#'.concat(w,"shape").concat(v,'">').concat(h[m][g].color," ").concat(m,"</a>");m==="line"?p+=", ".concat(h[m][g].pos,", ").concat(h[m][g].length," pixels long.</li>"):(p+=", at ".concat(h[m][g].pos),m!=="point"&&(p+=", covering ".concat(h[m][g].area,"% of the canvas")),p+=".</li>"),b+=p,v++}return{numShapes:v,listShapes:b}}(l,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),_=function(w,h){var m,b="",v=0;for(m in h)for(var g in h[m]){var p='<tr id="'.concat(w,"shape").concat(v,'"><th>').concat(h[m][g].color," ").concat(m,"</th>");m==="line"?p+="<td>location = ".concat(h[m][g].pos,"</td><td>length = ").concat(h[m][g].length," pixels</td></tr>"):(p+="<td>location = ".concat(h[m][g].pos,"</td>"),m!=="point"&&(p+="<td> area = ".concat(h[m][g].area,"%</td>")),p+="</tr>"),b+=p,v++}return b}(l,this.ingredients.shapes),d!==f.summary.innerHTML&&(f.summary.innerHTML=d),a.listShapes!==f.list.innerHTML&&(f.list.innerHTML=a.listShapes),_!==f.shapeDetails.innerHTML&&(f.shapeDetails.innerHTML=_),this._accessibleOutputs[l]=f)},t=t.default,c.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153}],267:[function(t,o,c){var l=(l=t("./core/main"))&&l.__esModule?l:{default:l};t("./core/constants"),t("./core/environment"),t("./core/friendly_errors/stacktrace"),t("./core/friendly_errors/validate_params"),t("./core/friendly_errors/file_errors"),t("./core/friendly_errors/fes_core"),t("./core/friendly_errors/sketch_reader"),t("./core/helpers"),t("./core/legacy"),t("./core/preload"),t("./core/p5.Element"),t("./core/p5.Graphics"),t("./core/p5.Renderer"),t("./core/p5.Renderer2D"),t("./core/rendering"),t("./core/shim"),t("./core/structure"),t("./core/transform"),t("./core/shape/2d_primitives"),t("./core/shape/attributes"),t("./core/shape/curves"),t("./core/shape/vertex"),t("./accessibility/outputs"),t("./accessibility/textOutput"),t("./accessibility/gridOutput"),t("./accessibility/color_namer"),t("./color/color_conversion"),t("./color/creating_reading"),t("./color/p5.Color"),t("./color/setting"),t("./data/p5.TypedDict"),t("./data/local_storage.js"),t("./dom/dom"),t("./accessibility/describe"),t("./events/acceleration"),t("./events/keyboard"),t("./events/mouse"),t("./events/touch"),t("./image/filters"),t("./image/image"),t("./image/loading_displaying"),t("./image/p5.Image"),t("./image/pixels"),t("./io/files"),t("./io/p5.Table"),t("./io/p5.TableRow"),t("./io/p5.XML"),t("./math/calculation"),t("./math/math"),t("./math/noise"),t("./math/p5.Vector"),t("./math/random"),t("./math/trigonometry"),t("./typography/attributes"),t("./typography/loading_displaying"),t("./typography/p5.Font"),t("./utilities/array_functions"),t("./utilities/conversion"),t("./utilities/string_functions"),t("./utilities/time_date"),t("./webgl/3d_primitives"),t("./webgl/interaction"),t("./webgl/light"),t("./webgl/loading"),t("./webgl/material"),t("./webgl/p5.Camera"),t("./webgl/p5.DataArray"),t("./webgl/p5.Geometry"),t("./webgl/p5.Matrix"),t("./webgl/p5.Quat"),t("./webgl/p5.RendererGL.Immediate"),t("./webgl/p5.RendererGL"),t("./webgl/p5.RendererGL.Retained"),t("./webgl/p5.Framebuffer"),t("./webgl/p5.Shader"),t("./webgl/p5.RenderBuffer"),t("./webgl/p5.Texture"),t("./webgl/text"),t("./core/init"),o.exports=l.default},{"./accessibility/color_namer":262,"./accessibility/describe":263,"./accessibility/gridOutput":264,"./accessibility/outputs":265,"./accessibility/textOutput":266,"./color/color_conversion":268,"./color/creating_reading":269,"./color/p5.Color":270,"./color/setting":271,"./core/constants":272,"./core/environment":273,"./core/friendly_errors/fes_core":274,"./core/friendly_errors/file_errors":275,"./core/friendly_errors/sketch_reader":276,"./core/friendly_errors/stacktrace":277,"./core/friendly_errors/validate_params":278,"./core/helpers":279,"./core/init":280,"./core/legacy":282,"./core/main":283,"./core/p5.Element":284,"./core/p5.Graphics":285,"./core/p5.Renderer":286,"./core/p5.Renderer2D":287,"./core/preload":288,"./core/rendering":289,"./core/shape/2d_primitives":290,"./core/shape/attributes":291,"./core/shape/curves":292,"./core/shape/vertex":293,"./core/shim":294,"./core/structure":295,"./core/transform":296,"./data/local_storage.js":297,"./data/p5.TypedDict":298,"./dom/dom":299,"./events/acceleration":300,"./events/keyboard":301,"./events/mouse":302,"./events/touch":303,"./image/filters":304,"./image/image":305,"./image/loading_displaying":306,"./image/p5.Image":307,"./image/pixels":308,"./io/files":309,"./io/p5.Table":310,"./io/p5.TableRow":311,"./io/p5.XML":312,"./math/calculation":313,"./math/math":314,"./math/noise":315,"./math/p5.Vector":316,"./math/random":317,"./math/trigonometry":318,"./typography/attributes":319,"./typography/loading_displaying":320,"./typography/p5.Font":321,"./utilities/array_functions":322,"./utilities/conversion":323,"./utilities/string_functions":324,"./utilities/time_date":325,"./webgl/3d_primitives":326,"./webgl/interaction":328,"./webgl/light":329,"./webgl/loading":330,"./webgl/material":331,"./webgl/p5.Camera":332,"./webgl/p5.DataArray":333,"./webgl/p5.Framebuffer":334,"./webgl/p5.Geometry":335,"./webgl/p5.Matrix":336,"./webgl/p5.Quat":337,"./webgl/p5.RenderBuffer":338,"./webgl/p5.RendererGL":341,"./webgl/p5.RendererGL.Immediate":339,"./webgl/p5.RendererGL.Retained":340,"./webgl/p5.Shader":342,"./webgl/p5.Texture":343,"./webgl/text":344}],268:[function(t,o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.ColorConversion={_hsbaToHSLA:function(l){var f=l[0],a=l[1],d=l[2],_=(2-a)*d/2;return _!=0&&(_==1?a=0:_<.5?a/=2-a:a=a*d/(2-2*_)),[f,a,_,l[3]]},_hsbaToRGBA:function(l){var f,a,d,_,w,h=6*l[0],m=l[1],b=l[2];return m===0?[b,b,b,l[3]]:(a=b*(1-m),d=b*(1-m*(h-(f=Math.floor(h)))),m=b*(1-m*(1+f-h)),h=f===1?(_=d,w=b,a):f===2?(_=a,w=b,m):f===3?(_=a,w=d,b):f===4?(_=m,w=a,b):f===5?(_=b,w=a,d):(_=b,w=m,a),[_,w,h,l[3]])},_hslaToHSBA:function(l){var f=l[0],a=l[1],d=l[2],_=d<.5?(1+a)*d:d+a-d*a;return[f,a=2*(_-d)/_,_,l[3]]},_hslaToRGBA:function(l){var f,a=6*l[0],d=l[1],_=l[2];return d===0?[_,_,_,l[3]]:[(f=function(w,h,m){return w<0?w+=6:6<=w&&(w-=6),w<1?h+(m-h)*w:w<3?m:w<4?h+(m-h)*(4-w):h})(2+a,d=2*_-(_=_<.5?(1+d)*_:_+d-_*d),_),f(a,d,_),f(a-2,d,_),l[3]]},_rgbaToHSBA:function(l){var f,a,d=l[0],_=l[1],w=l[2],h=Math.max(d,_,w),m=h-Math.min(d,_,w);return m==0?a=f=0:(a=m/h,d===h?f=(_-w)/m:_===h?f=2+(w-d)/m:w===h&&(f=4+(d-_)/m),f<0?f+=6:6<=f&&(f-=6)),[f/6,a,h,l[3]]},_rgbaToHSLA:function(l){var f,a,d=l[0],_=l[1],w=l[2],h=Math.max(d,_,w),b=Math.min(d,_,w),m=h+b,b=h-b;return b==0?a=f=0:(a=m<1?b/m:b/(2-m),d===h?f=(_-w)/b:_===h?f=2+(w-d)/b:w===h&&(f=4+(d-_)/b),f<0?f+=6:6<=f&&(f-=6)),[f/6,a,m/2,l[3]]}},t=t.default.ColorConversion,c.default=t},{"../core/main":283}],269:[function(t,o,c){function l(h){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function f(h){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(m){return l(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":l(m)})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.map"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(w=t("../core/main"))&&w.__esModule?w:{default:w},d=function(h){if(h&&h.__esModule)return h;if(h===null||f(h)!=="object"&&typeof h!="function")return{default:h};var m=_();if(m&&m.has(h))return m.get(h);var b,v={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in h){var p;Object.prototype.hasOwnProperty.call(h,b)&&((p=g?Object.getOwnPropertyDescriptor(h,b):null)&&(p.get||p.set)?Object.defineProperty(v,b,p):v[b]=h[b])}return v.default=h,m&&m.set(h,v),v}(t("../core/constants"));function _(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,_=function(){return h},h)}t("./p5.Color"),t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),a.default.prototype.alpha=function(h){return a.default._validateParameters("alpha",arguments),this.color(h)._getAlpha()},a.default.prototype.blue=function(h){return a.default._validateParameters("blue",arguments),this.color(h)._getBlue()},a.default.prototype.brightness=function(h){return a.default._validateParameters("brightness",arguments),this.color(h)._getBrightness()},a.default.prototype.color=function(){for(var h,m=arguments.length,b=new Array(m),v=0;v<m;v++)b[v]=arguments[v];return a.default._validateParameters("color",b),b[0]instanceof a.default.Color?b[0]:(h=Array.isArray(b[0])?b[0]:b,new a.default.Color(this,h))},a.default.prototype.green=function(h){return a.default._validateParameters("green",arguments),this.color(h)._getGreen()},a.default.prototype.hue=function(h){return a.default._validateParameters("hue",arguments),this.color(h)._getHue()},a.default.prototype.lerpColor=function(h,m,b){a.default._validateParameters("lerpColor",arguments),h instanceof a.default.Color||(h=color(h)),m instanceof a.default.Color||(m=color(m));var v,g,p,y=this._colorMode,S=this._colorMaxes;if(y===d.RGB)g=h.levels.map(function(j){return j/255}),p=m.levels.map(function(j){return j/255});else if(y===d.HSB)h._getBrightness(),m._getBrightness(),g=h.hsba,p=m.hsba;else{if(y!==d.HSL)throw new Error("".concat(y," cannot be used for interpolation."));h._getLightness(),m._getLightness(),g=h.hsla,p=m.hsla}return b=Math.max(Math.min(b,1),0),this.lerp===void 0&&(this.lerp=function(j,A,N){return N*(A-j)+j}),y===d.RGB?v=this.lerp(g[0],p[0],b):(.5<Math.abs(g[0]-p[0])&&(g[0]>p[0]?p[0]+=1:g[0]+=1),1<=(v=this.lerp(g[0],p[0],b))&&--v),h=this.lerp(g[1],p[1],b),m=this.lerp(g[2],p[2],b),g=this.lerp(g[3],p[3],b),v*=S[y][0],h*=S[y][1],m*=S[y][2],g*=S[y][3],this.color(v,h,m,g)},a.default.prototype.paletteLerp=function(h,m){var b=h[0];if(m<b[1])return this.color(b[0]);for(var v=1;v<h.length;v++){var g,p=h[v];if(m<p[1])return g=h[v-1],this.lerpColor(this.color(g[0]),this.color(p[0]),(m-g[1])/(p[1]-g[1]))}return this.color(h[h.length-1][0])},a.default.prototype.lightness=function(h){return a.default._validateParameters("lightness",arguments),this.color(h)._getLightness()},a.default.prototype.red=function(h){return a.default._validateParameters("red",arguments),this.color(h)._getRed()},a.default.prototype.saturation=function(h){return a.default._validateParameters("saturation",arguments),this.color(h)._getSaturation()};var w=a.default;c.default=w},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],270:[function(v,o,c){function l(j){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(j)}function f(j){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(A){return l(A)}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":l(A)})(j)}v("core-js/modules/es.symbol"),v("core-js/modules/es.symbol.description"),v("core-js/modules/es.symbol.iterator"),v("core-js/modules/es.array.includes"),v("core-js/modules/es.array.iterator"),v("core-js/modules/es.array.join"),v("core-js/modules/es.array.map"),v("core-js/modules/es.array.slice"),v("core-js/modules/es.object.get-own-property-descriptor"),v("core-js/modules/es.object.to-string"),v("core-js/modules/es.regexp.constructor"),v("core-js/modules/es.regexp.exec"),v("core-js/modules/es.regexp.to-string"),v("core-js/modules/es.string.includes"),v("core-js/modules/es.string.iterator"),v("core-js/modules/es.string.trim"),v("core-js/modules/es.weak-map"),v("core-js/modules/web.dom-collections.iterator"),v("core-js/modules/es.array.includes"),v("core-js/modules/es.array.join"),v("core-js/modules/es.array.map"),v("core-js/modules/es.array.slice"),v("core-js/modules/es.object.to-string"),v("core-js/modules/es.regexp.constructor"),v("core-js/modules/es.regexp.exec"),v("core-js/modules/es.regexp.to-string"),v("core-js/modules/es.string.includes"),v("core-js/modules/es.string.trim"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=h(v("../core/main")),d=function(j){if(j&&j.__esModule)return j;if(j===null||f(j)!=="object"&&typeof j!="function")return{default:j};var A=w();if(A&&A.has(j))return A.get(j);var N,C={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(N in j){var R;Object.prototype.hasOwnProperty.call(j,N)&&((R=T?Object.getOwnPropertyDescriptor(j,N):null)&&(R.get||R.set)?Object.defineProperty(C,N,R):C[N]=j[N])}return C.default=j,A&&A.set(j,C),C}(v("../core/constants")),_=h(v("./color_conversion"));function w(){var j;return typeof WeakMap!="function"?null:(j=new WeakMap,w=function(){return j},j)}function h(j){return j&&j.__esModule?j:{default:j}}function m(j,A){for(var N=0;N<A.length;N++){var C=A[N];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(j,C.key,C)}}var b={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},v=/\s*/,S=/(\d{1,3})/,g=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,p=new RegExp("".concat(g.source,"%")),y={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",S.source,",",S.source,",",S.source,"\\)$"].join(v.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",p.source,",",p.source,",",p.source,"\\)$"].join(v.source),"i"),RGBA:new RegExp(["^rgba\\(",S.source,",",S.source,",",S.source,",",g.source,"\\)$"].join(v.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",p.source,",",p.source,",",p.source,",",g.source,"\\)$"].join(v.source),"i"),HSL:new RegExp(["^hsl\\(",S.source,",",p.source,",",p.source,"\\)$"].join(v.source),"i"),HSLA:new RegExp(["^hsla\\(",S.source,",",p.source,",",p.source,",",g.source,"\\)$"].join(v.source),"i"),HSB:new RegExp(["^hsb\\(",S.source,",",p.source,",",p.source,"\\)$"].join(v.source),"i"),HSBA:new RegExp(["^hsba\\(",S.source,",",p.source,",",p.source,",",g.source,"\\)$"].join(v.source),"i")},S=(a.default.Color=function(){function j(T,R){if(!(this instanceof j))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(T._colorMode,T._colorMaxes),![d.RGB,d.HSL,d.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=j._parseInputs.apply(this,R),this._calculateLevels()}var A,N,C;return A=j,C=[{key:"_parseInputs",value:function(T,R,P,k){var F,D=arguments.length,q=this.mode,H=this.maxes[q],W=[];if(3<=D){for(W[0]=T/H[0],W[1]=R/H[1],W[2]=P/H[2],W[3]=typeof k=="number"?k/H[3]:1,F=W.length-1;0<=F;--F){var Q=W[F];Q<0?W[F]=0:1<Q&&(W[F]=1)}return q===d.HSL?_.default._hslaToRGBA(W):q===d.HSB?_.default._hsbaToRGBA(W):W}if(D===1&&typeof T=="string"){if(P=T.trim().toLowerCase(),b[P])return j._parseInputs.call(this,b[P]);if(y.HEX3.test(P))return(W=y.HEX3.exec(P).slice(1).map(function(J){return parseInt(J+J,16)/255}))[3]=1,W;if(y.HEX6.test(P))return(W=y.HEX6.exec(P).slice(1).map(function(J){return parseInt(J,16)/255}))[3]=1,W;if(y.HEX4.test(P))return W=y.HEX4.exec(P).slice(1).map(function(J){return parseInt(J+J,16)/255});if(y.HEX8.test(P))return W=y.HEX8.exec(P).slice(1).map(function(J){return parseInt(J,16)/255});if(y.RGB.test(P))return(W=y.RGB.exec(P).slice(1).map(function(J){return J/255}))[3]=1,W;if(y.RGB_PERCENT.test(P))return(W=y.RGB_PERCENT.exec(P).slice(1).map(function(J){return parseFloat(J)/100}))[3]=1,W;if(y.RGBA.test(P))return W=y.RGBA.exec(P).slice(1).map(function(J,Z){return Z===3?parseFloat(J):J/255});if(y.RGBA_PERCENT.test(P))return W=y.RGBA_PERCENT.exec(P).slice(1).map(function(J,Z){return Z===3?parseFloat(J):parseFloat(J)/100});if(y.HSL.test(P)?(W=y.HSL.exec(P).slice(1).map(function(J,Z){return Z===0?parseInt(J,10)/360:parseInt(J,10)/100}))[3]=1:y.HSLA.test(P)&&(W=y.HSLA.exec(P).slice(1).map(function(J,Z){return Z===0?parseInt(J,10)/360:Z===3?parseFloat(J):parseInt(J,10)/100})),(W=W.map(function(J){return Math.max(Math.min(J,1),0)})).length)return _.default._hslaToRGBA(W);if(y.HSB.test(P)?(W=y.HSB.exec(P).slice(1).map(function(J,Z){return Z===0?parseInt(J,10)/360:parseInt(J,10)/100}))[3]=1:y.HSBA.test(P)&&(W=y.HSBA.exec(P).slice(1).map(function(J,Z){return Z===0?parseInt(J,10)/360:Z===3?parseFloat(J):parseInt(J,10)/100})),W.length){for(F=W.length-1;0<=F;--F)W[F]=Math.max(Math.min(W[F],1),0);return _.default._hsbaToRGBA(W)}W=[1,1,1,1]}else{if(D!==1&&D!==2||typeof T!="number")throw new Error("".concat(arguments,"is not a valid color representation."));W[0]=T/H[2],W[1]=T/H[2],W[2]=T/H[2],W[3]=typeof R=="number"?R/H[3]:1,W=W.map(function(J){return Math.max(Math.min(J,1),0)})}return W}}],(N=[{key:"toString",value:function(T){var R=this.levels,P=this._array,k=P[3];switch(T){case"#rrggbb":return"#".concat(R[0]<16?"0".concat(R[0].toString(16)):R[0].toString(16),R[1]<16?"0".concat(R[1].toString(16)):R[1].toString(16),R[2]<16?"0".concat(R[2].toString(16)):R[2].toString(16));case"#rrggbbaa":return"#".concat(R[0]<16?"0".concat(R[0].toString(16)):R[0].toString(16),R[1]<16?"0".concat(R[1].toString(16)):R[1].toString(16),R[2]<16?"0".concat(R[2].toString(16)):R[2].toString(16),R[3]<16?"0".concat(R[3].toString(16)):R[3].toString(16));case"#rgb":return"#".concat(Math.round(15*P[0]).toString(16),Math.round(15*P[1]).toString(16),Math.round(15*P[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*P[0]).toString(16),Math.round(15*P[1]).toString(16),Math.round(15*P[2]).toString(16),Math.round(15*P[3]).toString(16));case"rgb":return"rgb(".concat(R[0],", ",R[1],", ",R[2],")");case"rgb%":return"rgb(".concat((100*P[0]).toPrecision(3),"%, ",(100*P[1]).toPrecision(3),"%, ",(100*P[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*P[0]).toPrecision(3),"%, ",(100*P[1]).toPrecision(3),"%, ",(100*P[2]).toPrecision(3),"%, ",(100*P[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=_.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[d.HSB][0],", ",this.hsba[1]*this.maxes[d.HSB][1],", ",this.hsba[2]*this.maxes[d.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=_.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=_.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[d.HSB][0],", ",this.hsba[1]*this.maxes[d.HSB][1],", ",this.hsba[2]*this.maxes[d.HSB][2],", ",k,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=_.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*k).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=_.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[d.HSL][0],", ",this.hsla[1]*this.maxes[d.HSL][1],", ",this.hsla[2]*this.maxes[d.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=_.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=_.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[d.HSL][0],", ",this.hsla[1]*this.maxes[d.HSL][1],", ",this.hsla[2]*this.maxes[d.HSL][2],", ",k,")");case"hsla%":return this.hsla||(this.hsla=_.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*k).toPrecision(3),"%)");default:return"rgba(".concat(R[0],",",R[1],",",R[2],",",k,")")}}},{key:"setRed",value:function(T){this._array[0]=T/this.maxes[d.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(T){this._array[1]=T/this.maxes[d.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(T){this._array[2]=T/this.maxes[d.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(T){this._array[3]=T/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var T=this._array,R=this.levels=new Array(T.length),P=T.length-1;0<=P;--P)R[P]=Math.round(255*T[P]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(T,R){this.mode=T,this.maxes=R}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[d.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=_.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[d.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[d.RGB][1]}},{key:"_getHue",value:function(){return this.mode===d.HSB?(this.hsba||(this.hsba=_.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[d.HSB][0]):(this.hsla||(this.hsla=_.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[d.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=_.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[d.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[d.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===d.HSB?(this.hsba||(this.hsba=_.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[d.HSB][1]):(this.hsla||(this.hsla=_.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[d.HSL][1])}}])&&m(A.prototype,N),C&&m(A,C),j}(),a.default.Color);c.default=S},{"../core/constants":272,"../core/main":283,"./color_conversion":268,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],271:[function(t,o,c){function l(h){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function f(h){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(m){return l(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":l(m)})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.fill"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(w=t("../core/main"))&&w.__esModule?w:{default:w},d=function(h){if(h&&h.__esModule)return h;if(h===null||f(h)!=="object"&&typeof h!="function")return{default:h};var m=_();if(m&&m.has(h))return m.get(h);var b,v={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in h){var p;Object.prototype.hasOwnProperty.call(h,b)&&((p=g?Object.getOwnPropertyDescriptor(h,b):null)&&(p.get||p.set)?Object.defineProperty(v,b,p):v[b]=h[b])}return v.default=h,m&&m.set(h,v),v}(t("../core/constants"));function _(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,_=function(){return h},h)}t("./p5.Color"),a.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{})},a.default.prototype.endClip=function(){this._renderer.endClip()},a.default.prototype.clip=function(h,m){this._renderer.beginClip(m),h(),this._renderer.endClip(m)},a.default.prototype.background=function(){var h;return(h=this._renderer).background.apply(h,arguments),this},a.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},a.default.prototype.colorMode=function(h,m,b,v,g){return a.default._validateParameters("colorMode",arguments),h!==d.RGB&&h!==d.HSB&&h!==d.HSL||(this._colorMode=h,h=this._colorMaxes[h],arguments.length===2?(h[0]=m,h[1]=m,h[2]=m,h[3]=m):arguments.length===4?(h[0]=m,h[1]=b,h[2]=v):arguments.length===5&&(h[0]=m,h[1]=b,h[2]=v,h[3]=g)),this},a.default.prototype.fill=function(){var h;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(h=this._renderer).fill.apply(h,arguments),this},a.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},a.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},a.default.prototype.stroke=function(){var h;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(h=this._renderer).stroke.apply(h,arguments),this},a.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},a.default.prototype.noErase=function(){return this._renderer.noErase(),this};var w=a.default;c.default=w},{"../core/constants":272,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],272:[function(t,o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.QUADRATIC=c.LINEAR=c._CTX_MIDDLE=c._DEFAULT_LEADMULT=c._DEFAULT_TEXT_FILL=c.WORD=c.CHAR=c.BOLDITALIC=c.BOLD=c.ITALIC=c.NORMAL=c.BLUR=c.ERODE=c.DILATE=c.POSTERIZE=c.INVERT=c.OPAQUE=c.GRAY=c.THRESHOLD=c.BURN=c.DODGE=c.SOFT_LIGHT=c.HARD_LIGHT=c.OVERLAY=c.REPLACE=c.SCREEN=c.MULTIPLY=c.EXCLUSION=c.SUBTRACT=c.DIFFERENCE=c.LIGHTEST=c.DARKEST=c.ADD=c.REMOVE=c.BLEND=c.UP_ARROW=c.TAB=c.SHIFT=c.RIGHT_ARROW=c.RETURN=c.OPTION=c.LEFT_ARROW=c.ESCAPE=c.ENTER=c.DOWN_ARROW=c.DELETE=c.CONTROL=c.BACKSPACE=c.ALT=c.AUTO=c.HSL=c.HSB=c.RGB=c.MITER=c.BEVEL=c.ROUND=c.SQUARE=c.PROJECT=c.PIE=c.CHORD=c.OPEN=c.CLOSE=c.TESS=c.QUAD_STRIP=c.QUADS=c.TRIANGLE_STRIP=c.TRIANGLE_FAN=c.TRIANGLES=c.LINE_LOOP=c.LINE_STRIP=c.LINES=c.POINTS=c.BASELINE=c.BOTTOM=c.TOP=c.CENTER=c.LEFT=c.RIGHT=c.RADIUS=c.CORNERS=c.CORNER=c.RAD_TO_DEG=c.DEG_TO_RAD=c.RADIANS=c.DEGREES=c.TWO_PI=c.TAU=c.QUARTER_PI=c.PI=c.HALF_PI=c.WAIT=c.TEXT=c.MOVE=c.HAND=c.CROSS=c.ARROW=c.WEBGL2=c.WEBGL=c.P2D=c.VERSION=void 0,c.RGBA=c.HALF_FLOAT=c.FLOAT=c.UNSIGNED_INT=c.UNSIGNED_BYTE=c.COVER=c.CONTAIN=c.FALLBACK=c.LABEL=c.AXES=c.GRID=c._DEFAULT_FILL=c._DEFAULT_STROKE=c.PORTRAIT=c.LANDSCAPE=c.SMOOTH=c.FLAT=c.MIRROR=c.CLAMP=c.REPEAT=c.NEAREST=c.IMAGE=c.IMMEDIATE=c.TEXTURE=c.FILL=c.STROKE=c.CURVE=c.BEZIER=void 0;var l=Math.PI,f=(c.VERSION="1.11.2",c.P2D="p2d",c.WEBGL="webgl",c.WEBGL2="webgl2",c.ARROW="default",c.CROSS="crosshair",c.HAND="pointer",c.MOVE="move",c.TEXT="text",c.WAIT="wait",l/2),f=(c.HALF_PI=f,l),f=(c.PI=f,l/4),f=(c.QUARTER_PI=f,2*l),f=(c.TAU=f,2*l),f=(c.TWO_PI=f,c.DEGREES="degrees",c.RADIANS="radians",l/180),f=(c.DEG_TO_RAD=f,180/l);c.RAD_TO_DEG=f,c.CORNER="corner",c.CORNERS="corners",c.RADIUS="radius",c.RIGHT="right",c.LEFT="left",c.CENTER="center",c.TOP="top",c.BOTTOM="bottom",c.BASELINE="alphabetic",c.POINTS=0,c.LINES=1,c.LINE_STRIP=3,c.LINE_LOOP=2,c.TRIANGLES=4,c.TRIANGLE_FAN=6,c.TRIANGLE_STRIP=5,c.QUADS="quads",c.QUAD_STRIP="quad_strip",c.TESS="tess",c.CLOSE="close",c.OPEN="open",c.CHORD="chord",c.PIE="pie",c.PROJECT="square",c.SQUARE="butt",c.ROUND="round",c.BEVEL="bevel",c.MITER="miter",c.RGB="rgb",c.HSB="hsb",c.HSL="hsl",c.AUTO="auto",c.ALT=18,c.BACKSPACE=8,c.CONTROL=17,c.DELETE=46,c.DOWN_ARROW=40,c.ENTER=13,c.ESCAPE=27,c.LEFT_ARROW=37,c.OPTION=18,c.RETURN=13,c.RIGHT_ARROW=39,c.SHIFT=16,c.TAB=9,c.UP_ARROW=38,c.BLEND="source-over",c.REMOVE="destination-out",c.ADD="lighter",c.DARKEST="darken",c.LIGHTEST="lighten",c.DIFFERENCE="difference",c.SUBTRACT="subtract",c.EXCLUSION="exclusion",c.MULTIPLY="multiply",c.SCREEN="screen",c.REPLACE="copy",c.OVERLAY="overlay",c.HARD_LIGHT="hard-light",c.SOFT_LIGHT="soft-light",c.DODGE="color-dodge",c.BURN="color-burn",c.THRESHOLD="threshold",c.GRAY="gray",c.OPAQUE="opaque",c.INVERT="invert",c.POSTERIZE="posterize",c.DILATE="dilate",c.ERODE="erode",c.BLUR="blur",c.NORMAL="normal",c.ITALIC="italic",c.BOLD="bold",c.BOLDITALIC="bold italic",c.CHAR="CHAR",c.WORD="WORD",c._DEFAULT_TEXT_FILL="#000000",c._DEFAULT_LEADMULT=1.25,c._CTX_MIDDLE="middle",c.LINEAR="linear",c.QUADRATIC="quadratic",c.BEZIER="bezier",c.CURVE="curve",c.STROKE="stroke",c.FILL="fill",c.TEXTURE="texture",c.IMMEDIATE="immediate",c.IMAGE="image",c.NEAREST="nearest",c.REPEAT="repeat",c.CLAMP="clamp",c.MIRROR="mirror",c.FLAT="flat",c.SMOOTH="smooth",c.LANDSCAPE="landscape",c.PORTRAIT="portrait",c._DEFAULT_STROKE="#000000",c._DEFAULT_FILL="#FFFFFF",c.GRID="grid",c.AXES="axes",c.LABEL="label",c.FALLBACK="fallback",c.CONTAIN="contain",c.COVER="cover",c.UNSIGNED_BYTE="unsigned-byte",c.UNSIGNED_INT="unsigned-int",c.FLOAT="float",c.HALF_FLOAT="half-float",c.RGBA="rgba"},{}],273:[function(t,o,c){function l(g){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(g)}function f(g){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(p){return l(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":l(p)})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(d=t("./main"))&&d.__esModule?d:{default:d},d=function(g){if(g&&g.__esModule)return g;if(g===null||f(g)!=="object"&&typeof g!="function")return{default:g};var p=_();if(p&&p.has(g))return p.get(g);var y,S={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in g){var A;Object.prototype.hasOwnProperty.call(g,y)&&((A=j?Object.getOwnPropertyDescriptor(g,y):null)&&(A.get||A.set)?Object.defineProperty(S,y,A):S[y]=g[y])}return S.default=g,p&&p.set(g,S),S}(t("./constants"));function _(){var g;return typeof WeakMap!="function"?null:(g=new WeakMap,_=function(){return g},g)}var w=[d.ARROW,d.CROSS,d.HAND,d.MOVE,d.TEXT,d.WAIT],h=(a.default.prototype._frameRate=0,a.default.prototype._lastFrameTime=window.performance.now(),a.default.prototype._targetFrameRate=60,window.print),m=!1;function b(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function v(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}a.default.prototype.print=function(){var g;arguments.length?(g=console).log.apply(g,arguments):m||(h(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(m=!0))},a.default.prototype.frameCount=0,a.default.prototype.deltaTime=0,a.default.prototype.focused=document.hasFocus(),a.default.prototype.cursor=function(g,p,y){var S,j="auto",A=this._curElement.elt;w.includes(g)?j=g:typeof g=="string"&&(S="",p&&y&&typeof p=="number"&&typeof y=="number"&&(S="".concat(p," ").concat(y)),j=g.substring(0,7)==="http://"||g.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(g)?"url(".concat(g,") ").concat(S,", auto"):g),A.style.cursor=j},a.default.prototype.frameRate=function(g){return a.default._validateParameters("frameRate",arguments),typeof g!="number"||g<0?this._frameRate:(this._setProperty("_targetFrameRate",g),g===0&&this._setProperty("_frameRate",g),this)},a.default.prototype.getFrameRate=function(){return this.frameRate()},a.default.prototype.setFrameRate=function(g){return this.frameRate(g)},a.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},a.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},a.default.prototype.webglVersion=d.P2D,a.default.prototype.displayWidth=screen.width,a.default.prototype.displayHeight=screen.height,a.default.prototype.windowWidth=0,a.default.prototype.windowHeight=0,a.default.prototype._onresize=function(g){this._setProperty("windowWidth",b()),this._setProperty("windowHeight",v());var p=this._isGlobal?window:this;typeof p.windowResized!="function"||(p=p.windowResized(g))===void 0||p||g.preventDefault()},a.default.prototype._updateWindowSize=function(){this._setProperty("windowWidth",b()),this._setProperty("windowHeight",v())},a.default.prototype.width=0,a.default.prototype.height=0,a.default.prototype.fullscreen=function(g){if(a.default._validateParameters("fullscreen",arguments),g===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(g){if(g=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");g.requestFullscreen?g.requestFullscreen():g.mozRequestFullScreen?g.mozRequestFullScreen():g.webkitRequestFullscreen?g.webkitRequestFullscreen():g.msRequestFullscreen&&g.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},a.default.prototype.pixelDensity=function(g){var p;return a.default._validateParameters("pixelDensity",arguments),typeof g=="number"?(g!==this._pixelDensity&&(this._pixelDensity=this._maxAllowedPixelDimensions=g),(p=this).resizeCanvas(this.width,this.height,!0)):p=this._pixelDensity,p},a.default.prototype.displayDensity=function(){return window.devicePixelRatio},a.default.prototype.getURL=function(){return location.href},a.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(g){return g!==""})},a.default.prototype.getURLParams=function(){for(var g,p=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,y={};(g=p.exec(location.search))!=null;)g.index===p.lastIndex&&p.lastIndex++,y[g[1]]=g[2];return y},t=a.default,c.default=t},{"./constants":272,"./main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.search":205,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],274:[function(t,o,c){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(w=t("../main"))&&w.__esModule?w:{default:w};t("../internationalization");function f(h,m){m=m||console.log.bind(console),a||_(),a.some(function(b){var v;if(h.message&&h.message.match("\\W?".concat(b.name,"\\W"))!==null)return v=b.type==="function"?"".concat(b.name,"()"):b.name,m("Did you just try to use p5.js's ".concat(v," ").concat(b.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(d)),!0})}var a=null,_=null,d=(l.default._friendlyError=l.default._checkForUserDefinedFunctions=l.default._fesErrorMonitor=function(){},a=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),_=function(){function h(b){return Object.getOwnPropertyNames(b).filter(function(v){return v[0]!=="_"&&!(v in m)&&(m[v]=!0)}).map(function(v){var g=typeof b[v]=="function"?"function":v===v.toUpperCase()?"constant":"variable";return{name:v,type:g}})}var m={};(a=[].concat(h(l.default.prototype),h(t("../constants")))).sort(function(b,v){return v.name.length-b.name.length})},w=(l.default.prototype._helpForMisusedAtTopLevelCode=f,document.readyState!=="complete"&&(window.addEventListener("error",f,!1),window.addEventListener("load",function(){window.removeEventListener("error",f,!1)})),l.default);c.default=w},{"../constants":272,"../internationalization":281,"../main":283,"./browser_errors":void 0,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.starts-with":207,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],275:[function(t,o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(l=t("../main"))&&l.__esModule?l:{default:l};t("../internationalization"),l.default._friendlyFileLoadError=function(){},t=l.default,c.default=t},{"../internationalization":281,"../main":283}],276:[function(t,o,c){function l(m){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(m)}function f(m){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(b){return l(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":l(b)})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=w(t("../main"));t("../internationalization"),_(t("../constants"));function d(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,d=function(){return m},m)}function _(m){if(m&&m.__esModule)return m;if(m===null||f(m)!=="object"&&typeof m!="function")return{default:m};var b=d();if(b&&b.has(m))return b.get(m);var v,g,p={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in m)Object.prototype.hasOwnProperty.call(m,v)&&((g=y?Object.getOwnPropertyDescriptor(m,v):null)&&(g.get||g.set)?Object.defineProperty(p,v,g):p[v]=m[v]);return p.default=m,b&&b.set(m,p),p}function w(m){return m&&m.__esModule?m:{default:m}}a.default._fesCodeReader=function(){};var h=a.default;c.default=h},{"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],277:[function(t,o,c){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t=(t=t("../main"))&&t.__esModule?t:{default:t};function l(){var f=/(^|@)\S+:\d+/,a=/^\s*at .*(\S+:\d+|\(native\))/m,d=/^(eval@)?(\[native code])?$/;return{parse:function(_){return _.stacktrace!==void 0||_["opera#sourceloc"]!==void 0?this.parseOpera(_):_.stack&&_.stack.match(a)?this.parseV8OrIE(_):_.stack?this.parseFFOrSafari(_):void 0},extractLocation:function(_){return _.indexOf(":")===-1?[_]:[(_=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(_.replace(/[()]/g,"")))[1],_[2]||void 0,_[3]||void 0]},parseV8OrIE:function(_){return _.stack.split(`
`).filter(function(w){return!!w.match(a)},this).map(function(w){var h=(w=-1<w.indexOf("(eval ")?w.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):w).replace(/^\s+/,"").replace(/\(eval code/g,"("),m=h.match(/ (\((.+):(\d+):(\d+)\)$)/),h=(h=m?h.replace(m[0],""):h).split(/\s+/).slice(1),m=this.extractLocation(m?m[1]:h.pop());return{functionName:h.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(m[0])?void 0:m[0],lineNumber:m[1],columnNumber:m[2],source:w}},this)},parseFFOrSafari:function(_){return _.stack.split(`
`).filter(function(w){return!w.match(d)},this).map(function(w){var h,m;return(w=-1<w.indexOf(" > eval")?w.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):w).indexOf("@")===-1&&w.indexOf(":")===-1?{functionName:w}:{functionName:(m=w.match(h=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&m[1]?m[1]:void 0,fileName:(m=this.extractLocation(w.replace(h,"")))[0],lineNumber:m[1],columnNumber:m[2],source:w}},this)},parseOpera:function(_){return!_.stacktrace||-1<_.message.indexOf(`
`)&&_.message.split(`
`).length>_.stacktrace.split(`
`).length?this.parseOpera9(_):_.stack?this.parseOpera11(_):this.parseOpera10(_)},parseOpera9:function(_){for(var w=/Line (\d+).*script (?:in )?(\S+)/i,h=_.message.split(`
`),m=[],b=2,v=h.length;b<v;b+=2){var g=w.exec(h[b]);g&&m.push({fileName:g[2],lineNumber:g[1],source:h[b]})}return m},parseOpera10:function(_){for(var w=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,h=_.stacktrace.split(`
`),m=[],b=0,v=h.length;b<v;b+=2){var g=w.exec(h[b]);g&&m.push({functionName:g[3]||void 0,fileName:g[2],lineNumber:g[1],source:h[b]})}return m},parseOpera11:function(_){return _.stack.split(`
`).filter(function(w){return!!w.match(f)&&!w.match(/^Error created at/)},this).map(function(w){var h,b=w.split("@"),m=this.extractLocation(b.pop()),b=b.shift()||"";return{functionName:b.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(h=b.match(/\(([^)]*)\)/)?b.replace(/^[^(]+\(([^)]*)\)$/,"$1"):h)===void 0||h==="[arguments not available]"?void 0:h.split(","),fileName:m[0],lineNumber:m[1],columnNumber:m[2],source:w}},this)}}}t.default._getErrorStackParser=function(){return new l},t=t.default,c.default=t},{"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],278:[function(t,o,c){function l(_){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(_)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=(f=t("../main"))&&f.__esModule?f:{default:f};(function(_){if(!(_&&_.__esModule)&&!(_===null||d(_)!=="object"&&typeof _!="function")){var w=a();if(w&&w.has(_))return w.get(_);var h,m={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in _){var v;Object.prototype.hasOwnProperty.call(_,h)&&((v=b?Object.getOwnPropertyDescriptor(_,h):null)&&(v.get||v.set)?Object.defineProperty(m,h,v):m[h]=_[h])}m.default=_,w&&w.set(_,m)}})(t("../constants")),t("../internationalization");function a(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,a=function(){return _},_)}function d(_){return(d=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(w){return l(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":l(w)})(_)}f.default._validateParameters=f.default._clearValidateParamsCache=function(){},t=f.default,c.default=t},{"../../../docs/parameterData.json":void 0,"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],279:[function(t,o,c){function l(_){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(_)}function f(_){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(w){return l(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":l(w)})(_)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=function(_){if(_&&_.__esModule)return _;if(_===null||f(_)!=="object"&&typeof _!="function")return{default:_};var w=d();if(w&&w.has(_))return w.get(_);var h,m={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in _){var v;Object.prototype.hasOwnProperty.call(_,h)&&((v=b?Object.getOwnPropertyDescriptor(_,h):null)&&(v.get||v.set)?Object.defineProperty(m,h,v):m[h]=_[h])}return m.default=_,w&&w.set(_,m),m}(t("./constants"));function d(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,d=function(){return _},_)}c.default={modeAdjust:function(_,w,h,m,b){var v;return b===a.CORNER?v={x:_,y:w,w:Math.abs(h),h:Math.abs(m)}:b===a.CORNERS?v={x:Math.min(_,h),y:Math.min(w,m),w:Math.abs(h-_),h:Math.abs(m-w)}:b===a.RADIUS?v={x:_-(h=Math.abs(h)),y:w-(m=Math.abs(m)),w:2*h,h:2*m}:b===a.CENTER&&(v={x:_-.5*(h=Math.abs(h)),y:w-.5*(m=Math.abs(m)),w:h,h:m}),v}}},{"./constants":272,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],280:[function(t,o,c){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var l=(f=t("../core/main"))&&f.__esModule?f:{default:f};t("./internationalization");var f=Promise.resolve();Promise.all([new Promise(function(a,d){document.readyState==="complete"?a():window.addEventListener("load",a,!1)}),f]).then(function(){var a;window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(a=new Event("p5Ready"),window.dispatchEvent(a),(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!l.default.instance&&new l.default)})},{"../core/main":283,"./internationalization":281,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/web.dom-collections.iterator":246}],281:[function(t,o,c){t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.setTranslatorLanguage=c.currentTranslatorLanguage=c.availableTranslatorLanguages=c.initialize=c.translator=void 0;var l,f,a=_(t("i18next")),d=_(t("i18next-browser-languagedetector"));function _(m){return m&&m.__esModule?m:{default:m}}function w(m,b){for(var v=0;v<b.length;v++){var g=b[v];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(m,g.key,g)}}var h=function(){function m(g,p){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");this.init(g,p)}var b,v;return b=m,(v=[{key:"fetchWithTimeout",value:function(g,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(g,p),new Promise(function(S,j){return setTimeout(function(){return j(new Error("timeout"))},y)})])}},{key:"init",value:function(g){var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=g,this.options=p}},{key:"read",value:function(g,p,y){var S=this.options.loadPath;g===this.options.fallback?y(null,l[g][p]):f.includes(g)?(S=this.services.interpolator.interpolate(S,{lng:g,ns:p}),this.loadUrl(S,y)):y("Not found",!1)}},{key:"loadUrl",value:function(g,p){this.fetchWithTimeout(g).then(function(y){if(y.ok)return y.json();throw new Error("failed loading ".concat(g))},function(){throw new Error("failed loading ".concat(g))}).then(function(y){return p(null,y)}).catch(p)}}])&&w(b.prototype,v),m}();h.type="backend",c.translator=function(m,b){console.debug("p5.js translator called before translations were loaded"),a.default.t(m,b)},c.initialize=function(){return a.default.use(d.default).use(h).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:l}).then(function(m){c.translator=m},function(m){return console.debug("Translations failed to load (".concat(m,")"))})},c.availableTranslatorLanguages=function(){return a.default.languages},c.currentTranslatorLanguage=function(m){return a.default.language},c.setTranslatorLanguage=function(m){return a.default.changeLanguage(m||void 0,function(b){return console.debug("Translations failed to load (".concat(b,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246,i18next:3,"i18next-browser-languagedetector":3}],282:[function(t,o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t=(t=t("./main"))&&t.__esModule?t:{default:t},t.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},t.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},t.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},t.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},t=t.default,c.default=t},{"./main":283}],283:[function(t,o,c){function l(m){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(m)}function f(m){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(b){return l(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":l(b)})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t("./shim");var a=function(m){if(m&&m.__esModule)return m;if(m===null||f(m)!=="object"&&typeof m!="function")return{default:m};var b=d();if(b&&b.has(m))return b.get(m);var v,g={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in m){var y;Object.prototype.hasOwnProperty.call(m,v)&&((y=p?Object.getOwnPropertyDescriptor(m,v):null)&&(y.get||y.set)?Object.defineProperty(g,v,y):g[v]=m[v])}return g.default=m,b&&b.set(m,g),g}(t("./constants"));function d(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,d=function(){return m},m)}function _(m,b){for(var v=0;v<b.length;v++){var g=b[v];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(m,g.key,g)}}var w,h=function(){function m(g,S){var y=this;if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._maxAllowedPixelDimensions=0,this._userNode=S,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this.touchstart=!1,this.touchend=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var S=Object.getOwnPropertyNames(m.prototype._registeredMethods),j=!0,A=!1,N=void 0;try{for(var C,T=S[Symbol.iterator]();!(j=(C=T.next()).done);j=!0){var R=C.value;this._registeredMethods[R]=m.prototype._registeredMethods[R].slice()}}catch(J){A=!0,N=J}finally{try{j||T.return==null||T.return()}finally{if(A)throw N}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),m.prototype.callRegisteredHooksFor=function(J){var Z=this||m.prototype,K=this._isGlobal?window:this;if(Z._registeredMethods.hasOwnProperty(J)){var Z=Z._registeredMethods[J],re=!0,J=!1,oe=void 0;try{for(var M,z=Z[Symbol.iterator]();!(re=(M=z.next()).done);re=!0){var $=M.value;typeof $=="function"&&$.call(K)}}catch(ce){J=!0,oe=ce}finally{try{re||z.return==null||z.return()}finally{if(J)throw oe}}}},this._start=function(){y._userNode&&typeof y._userNode=="string"&&(y._userNode=document.getElementById(y._userNode));var J=y._isGlobal?window:y;if(J.preload){y.callRegisteredHooksFor("beforePreload");var Z,K=document.getElementById(y._loadingScreenId),re=(K||((K=document.createElement("div")).innerHTML="Loading...",K.style.position="absolute",K.id=y._loadingScreenId,(y._userNode||document.body).appendChild(K)),y._preloadMethods);for(Z in re){re[Z]=re[Z]||m;var oe=re[Z];oe!==m.prototype&&oe!==m||(y._isGlobal&&(window[Z]=y._wrapPreload(y,Z)),oe=y),y._registeredPreloadMethods[Z]=oe[Z],oe[Z]=y._wrapPreload(oe,Z)}J.preload(),y._runIfPreloadsAreDone()}else y._setup(),y._recording||y._draw()},this._runIfPreloadsAreDone=function(){var J,Z=this._isGlobal?window:this;Z._preloadCount===0&&((J=document.getElementById(Z._loadingScreenId))&&J.parentNode.removeChild(J),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),Z._setup(),this._recording||Z._draw()))},this._decrementPreload=function(){var J=this._isGlobal?window:this;J._preloadDone||typeof J.preload!="function"||(J._setProperty("_preloadCount",J._preloadCount-1),J._runIfPreloadsAreDone())},this._wrapPreload=function(J,Z){var K=this;return function(){K._incrementPreload();for(var re=arguments.length,oe=new Array(re),M=0;M<re;M++)oe[M]=arguments[M];return K._registeredPreloadMethods[Z].apply(J,oe)}},this._incrementPreload=function(){var J=this._isGlobal?window:this;J._preloadDone||J._setProperty("_preloadCount",J._preloadCount+1)},this._setup=function(){y.callRegisteredHooksFor("beforeSetup"),y.createCanvas(y._defaultCanvasSize.width,y._defaultCanvasSize.height,"p2d");var J=y._isGlobal?window:y;if(typeof J.preload=="function")for(var Z in y._preloadMethods)J[Z]=y._preloadMethods[Z][Z],J[Z]&&y&&(J[Z]=J[Z].bind(y));y._millisStart=window.performance.now(),J._preloadDone=!0,typeof J.setup=="function"&&J.setup();var K=document.getElementsByTagName("canvas"),re=!0,oe=!1,M=void 0;try{for(var z,$=K[Symbol.iterator]();!(re=(z=$.next()).done);re=!0){var ee=z.value;ee.dataset.hidden==="true"&&(ee.style.visibility="",delete ee.dataset.hidden)}}catch(le){oe=!0,M=le}finally{try{re||$.return==null||$.return()}finally{if(oe)throw M}}y._lastTargetFrameTime=window.performance.now(),y._lastRealFrameTime=window.performance.now(),y._setupDone=!0,(y._accessibleOutputs.grid||y._accessibleOutputs.text)&&y._updateAccsOutput(),y.callRegisteredHooksFor("afterSetup")},this._draw=function(Z){var Z=Z||window.performance.now(),K=Z-y._lastTargetFrameTime,re=1e3/y._targetFrameRate;(!y._loop||re-5<=K)&&(y.deltaTime=Z-y._lastRealFrameTime,y._setProperty("deltaTime",y.deltaTime),y._frameRate=1e3/y.deltaTime,y.redraw(),y._lastTargetFrameTime=Math.max(y._lastTargetFrameTime+re,Z),y._lastRealFrameTime=Z,y._updateMouseCoords!==void 0&&(y._updateMouseCoords(),y._setProperty("movedX",0),y._setProperty("movedY",0))),y._loop&&(y._requestAnimId=window.requestAnimationFrame(y._draw))},this._setProperty=function(J,Z){y[J]=Z,y._isGlobal&&(window[J]=Z)},this.remove=function(){y._startListener&&window.removeEventListener("load",y._startListener,!1);var J=document.getElementById(y._loadingScreenId);if(J&&(J.parentNode.removeChild(J),y._incrementPreload()),y._curElement){for(var Z in y._loop=!1,y._requestAnimId&&window.cancelAnimationFrame(y._requestAnimId),y._events)window.removeEventListener(Z,y._events[Z]);var K=!0,J=!1,re=void 0;try{for(var oe,M=y._elements[Symbol.iterator]();!(K=(oe=M.next()).done);K=!0){var z,$=oe.value;for(z in $.elt&&$.elt.parentNode&&$.elt.parentNode.removeChild($.elt),$._events)$.elt.removeEventListener(z,$._events[z])}}catch(ve){J=!0,re=ve}finally{try{K||M.return==null||M.return()}finally{if(J)throw re}}var ee=y;y._registeredMethods.remove.forEach(function(ve){ve!==void 0&&ve.call(ee)})}if(y._isGlobal){for(var le in m.prototype)try{delete window[le]}catch{window[le]=void 0}for(var ce in y)if(y.hasOwnProperty(ce))try{delete window[ce]}catch{window[ce]=void 0}m.instance=null}},this._updateWindowSize(),this._registeredMethods.init.forEach(function(J){J!==void 0&&J.call(this)},this),this._setupPromisePreloads();var P,k,F=this._createFriendlyGlobalFunctionBinder();if(g)g(this),m._checkForUserDefinedFunctions(this);else{for(var D in this._isGlobal=!0,m.instance=this,m.prototype)typeof m.prototype[D]=="function"?(P=D.substring(2),this._events.hasOwnProperty(P)||(Math.hasOwnProperty(D)&&Math[D]===m.prototype[D]?F(D,m.prototype[D]):F(D,m.prototype[D].bind(this)))):F(D,m.prototype[D]);for(var q in this)this.hasOwnProperty(q)&&F(q,this[q])}for(k in this._events){var H=this["_on".concat(k)];H&&(H=H.bind(this),window.addEventListener(k,H,{passive:!1}),this._events[k]=H)}function W(){y._setProperty("focused",!0)}function Q(){y._setProperty("focused",!1)}window.addEventListener("focus",W),window.addEventListener("blur",Q),this.registerMethod("remove",function(){window.removeEventListener("focus",W),window.removeEventListener("blur",Q)}),document.readyState==="complete"?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1))}var b,v;return b=m,(v=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=a.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(g,p){m.prototype._preloadMethods.hasOwnProperty(g)||(m.prototype._preloadMethods[g]=p)}},{key:"registerMethod",value:function(g,p){var y=this||m.prototype;y._registeredMethods.hasOwnProperty(g)||(y._registeredMethods[g]=[]),y._registeredMethods[g].push(p)}},{key:"unregisterMethod",value:function(g,p){var y=this||m.prototype;if(y._registeredMethods.hasOwnProperty(g)){for(var S=y._registeredMethods[g],j=[],A=0;A<S.length;A++)S[A]===p&&j.push(A);for(var N=j.length-1;0<=N;N--)S.splice(j[N],1)}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var g=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},p=g.globalObject||window;return g.log||console.log.bind(console),function(y,S){m.disableFriendlyErrors,p[y]=S}}}])&&_(b.prototype,v),m}();for(w in h.instance=null,h.disableFriendlyErrors=!1,a)h.prototype[w]=a[w];h.VERSION=a.VERSION,h.prototype._preloadMethods={loadJSON:h.prototype,loadImage:h.prototype,loadStrings:h.prototype,loadXML:h.prototype,loadBytes:h.prototype,loadTable:h.prototype,loadFont:h.prototype,loadModel:h.prototype,loadShader:h.prototype},h.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},h.prototype._registeredPreloadMethods={},c.default=h},{"./constants":272,"./shim":294,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],284:[function(t,o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("./main"))&&t.__esModule?t:{default:t};function f(a,d){for(var _=0;_<d.length;_++){var w=d[_];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(a,w.key,w)}}l.default.Element=function(){function a(h,m){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.elt=h,this._pInst=this._pixelsState=m,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var d,_,w;return d=a,w=[{key:"_adjustListener",value:function(h,m,b){return m===!1?l.default.Element._detachListener(h,b):l.default.Element._attachListener(h,m,b),this}},{key:"_attachListener",value:function(h,m,b){b._events[h]&&l.default.Element._detachListener(h,b),m=m.bind(b),b.elt.addEventListener(h,m,!1),b._events[h]=m}},{key:"_detachListener",value:function(h,m){var b=m._events[h];m.elt.removeEventListener(h,b,!1),m._events[h]=null}}],(_=[{key:"parent",value:function(h){return h===void 0?this.elt.parentNode:(typeof h=="string"?(h[0]==="#"&&(h=h.substring(1)),h=document.getElementById(h)):h instanceof l.default.Element&&(h=h.elt),h.appendChild(this.elt),this)}},{key:"id",value:function(h){return h===void 0?this.elt.id:(this.elt.id=h,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(h){return h===void 0?this.elt.className:(this.elt.className=h,this)}},{key:"mousePressed",value:function(h){return l.default.Element._adjustListener("mousedown",function(m){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(m),h.call(this,m)},this),this}},{key:"doubleClicked",value:function(h){return l.default.Element._adjustListener("dblclick",h,this),this}},{key:"mouseWheel",value:function(h){return l.default.Element._adjustListener("wheel",h,this),this}},{key:"mouseReleased",value:function(h){return l.default.Element._adjustListener("mouseup",h,this),this}},{key:"mouseClicked",value:function(h){return l.default.Element._adjustListener("click",h,this),this}},{key:"mouseMoved",value:function(h){return l.default.Element._adjustListener("mousemove",h,this),this}},{key:"mouseOver",value:function(h){return l.default.Element._adjustListener("mouseover",h,this),this}},{key:"mouseOut",value:function(h){return l.default.Element._adjustListener("mouseout",h,this),this}},{key:"touchStarted",value:function(h){return l.default.Element._adjustListener("touchstart",h,this),this}},{key:"touchMoved",value:function(h){return l.default.Element._adjustListener("touchmove",h,this),this}},{key:"touchEnded",value:function(h){return l.default.Element._adjustListener("touchend",h,this),this}},{key:"dragOver",value:function(h){return l.default.Element._adjustListener("dragover",h,this),this}},{key:"dragLeave",value:function(h){return l.default.Element._adjustListener("dragleave",h,this),this}},{key:"_setProperty",value:function(h,m){this[h]=m}}])&&f(d.prototype,_),w&&f(d,w),a}(),t=l.default.Element,c.default=t},{"./main":283}],285:[function(t,o,c){function l(y){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(y)}function f(y){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(S){return l(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":l(S)})(y)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(p=t("./main"))&&p.__esModule?p:{default:p},d=function(y){if(y&&y.__esModule)return y;if(y===null||f(y)!=="object"&&typeof y!="function")return{default:y};var S=_();if(S&&S.has(y))return S.get(y);var j,A={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(j in y){var C;Object.prototype.hasOwnProperty.call(y,j)&&((C=N?Object.getOwnPropertyDescriptor(y,j):null)&&(C.get||C.set)?Object.defineProperty(A,j,C):A[j]=y[j])}return A.default=y,S&&S.set(y,A),A}(t("./constants"));function _(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,_=function(){return y},y)}function w(y,S){for(var j=0;j<S.length;j++){var A=S[j];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(y,A.key,A)}}function h(y,S){return(h=Object.setPrototypeOf||function(j,A){return j.__proto__=A,j})(y,S)}function m(y){return function(){var S,j=g(y);return b(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(S=g(this).constructor,Reflect.construct(j,arguments,S)):j.apply(this,arguments))}}function b(y,S){return!S||f(S)!=="object"&&typeof S!="function"?v(y):S}function v(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function g(y){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(y)}a.default.Graphics=function(y){var S=A;if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(y&&y.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),y&&h(S,y);var j=m(A);function A(N,C,q,R,P){var k;if(!(this instanceof A))throw new TypeError("Cannot call a class as a function");D=P||document.createElement("canvas"),(k=j.call(this,D,R)).canvas=D;var F,D=q||d.P2D,q=R._userNode||document.body;for(F in P||q.appendChild(k.canvas),a.default.prototype)k[F]||(typeof a.default.prototype[F]=="function"?k[F]=a.default.prototype[F].bind(v(k)):k[F]=a.default.prototype[F]);return a.default.prototype._initializeInstanceVariables.apply(v(k)),k.width=N,k.height=C,k._pixelDensity=R._pixelDensity,D===d.WEBGL?(k._renderer=new a.default.RendererGL(k.canvas,v(k),!1),N=(P=k._renderer._adjustDimensions(N,C)).adjustedWidth,C=P.adjustedHeight):k._renderer=new a.default.Renderer2D(k.canvas,v(k),!1),R._elements.push(v(k)),Object.defineProperty(v(k),"deltaTime",{get:function(){return this._pInst.deltaTime}}),k._renderer.resize(N,C),k._renderer._applyDefaults(),b(k,v(k))}return S=A,(y=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var N,C=this._pInst._elements.indexOf(this);for(N in C!==-1&&this._pInst._elements.splice(C,1),this._events)this.elt.removeEventListener(N,this._events[N]);this._renderer=void 0,this.canvas=void 0,this.elt=void 0}},{key:"createFramebuffer",value:function(N){return new a.default.Framebuffer(this,N)}}])&&w(S.prototype,y),A}(a.default.Element);var p=a.default.Graphics;c.default=p},{"./constants":272,"./main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],286:[function(t,o,c){function l(y){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(y)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=(g=t("./main"))&&g.__esModule?g:{default:g},a=function(y){if(y&&y.__esModule)return y;if(y===null||_(y)!=="object"&&typeof y!="function")return{default:y};var S=d();if(S&&S.has(y))return S.get(y);var j,A={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(j in y){var C;Object.prototype.hasOwnProperty.call(y,j)&&((C=N?Object.getOwnPropertyDescriptor(y,j):null)&&(C.get||C.set)?Object.defineProperty(A,j,C):A[j]=y[j])}return A.default=y,S&&S.set(y,A),A}(t("../core/constants"));function d(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,d=function(){return y},y)}function _(y){return(_=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(S){return l(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":l(S)})(y)}function w(y,S){for(var j=0;j<S.length;j++){var A=S[j];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(y,A.key,A)}}function h(y,S){return(h=Object.setPrototypeOf||function(j,A){return j.__proto__=A,j})(y,S)}function m(y){return function(){var S,j,A=v(y);return S=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(S=v(this).constructor,Reflect.construct(A,arguments,S)):A.apply(this,arguments),A=this,!(j=S)||_(j)!=="object"&&typeof j!="function"?b(A):j}}function b(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function v(y){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(y)}var g=function(y){var S=A;if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(y&&y.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),y&&h(S,y);var j=m(A);function A(N,C,T){var R;if(this instanceof A)return(R=j.call(this,N,C)).canvas=N,R._pixelsState=C,T?(R._isMainCanvas=!0,R._pInst._setProperty("_curElement",b(R)),R._pInst._setProperty("canvas",R.canvas),R._pInst._setProperty("width",R.width),R._pInst._setProperty("height",R.height)):(R.canvas.style.display="none",R._styles=[]),R._clipping=!1,R._clipInvert=!1,R._textSize=12,R._textLeading=15,R._textFont="sans-serif",R._textStyle=a.NORMAL,R._textAscent=null,R._textDescent=null,R._textAlign=a.LEFT,R._textBaseline=a.BASELINE,R._textWrap=a.WORD,R._rectMode=a.CORNER,R._ellipseMode=a.CENTER,R._curveTightness=0,R._imageMode=a.CORNER,R._tint=null,R._doStroke=!0,R._doFill=!0,R._strokeSet=!1,R._fillSet=!1,R._leadingSet=!1,R._pushPopDepth=0,R;throw new TypeError("Cannot call a class as a function")}return S=A,(y=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(N){this._pushPopDepth--,N.properties&&Object.assign(this,N.properties)}},{key:"beginClip",value:function(){var N=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=N.invert}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}},{key:"resize",value:function(N,C){this.width=N,this.height=C,this.elt.width=N*this._pInst._pixelDensity,this.elt.height=C*this._pInst._pixelDensity,this.elt.style.width="".concat(N,"px"),this.elt.style.height="".concat(C,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(N,C,T,R){var P=this._pixelsState,k=P._pixelDensity,F=this.canvas;if(N===void 0&&C===void 0)N=C=0,T=P.width,R=P.height;else if(N*=k,C*=k,T===void 0&&R===void 0)return N<0||C<0||N>=F.width||C>=F.height?[0,0,0,0]:this._getPixel(N,C);return P=new f.default.Image(T*k,R*k),P.pixelDensity(k),P.canvas.getContext("2d").drawImage(F,N,C,T*k,R*k,0,0,T*k,R*k),P}},{key:"textLeading",value:function(N){return typeof N=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",N),this._pInst):this._textLeading}},{key:"textStyle",value:function(N){return N?(N!==a.NORMAL&&N!==a.ITALIC&&N!==a.BOLD&&N!==a.BOLDITALIC||this._setProperty("_textStyle",N),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(N,C){return N!==void 0?(this._setProperty("_textAlign",N),C!==void 0&&this._setProperty("_textBaseline",C),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(N){return this._setProperty("_textWrap",N),this._textWrap}},{key:"text",value:function(N,C,T,R,P){var k,F,D,q,H=this._pInst,W=this._textWrap,Q=Number.MAX_VALUE,J=T;if((this._doFill||this._doStroke)&&N!==void 0){if(k=(N=(N=typeof N!="string"?N.toString():N).replace(/(\t)/g,"  ")).split(`
`),R!==void 0){switch(this._rectMode===a.CENTER&&(C-=R/2),this._textAlign){case a.CENTER:C+=R/2;break;case a.RIGHT:C+=R}if(P!==void 0){this._rectMode===a.CENTER&&(T-=P/2,J-=P/2);var N=T,Z=H.textAscent();switch(this._textBaseline){case a.BOTTOM:q=T+P,T=Math.max(q,T),J+=Z;break;case a.CENTER:q=T+P/2,T=Math.max(q,T),J+=Z/2}Q=T+P-Z,this._textBaseline===a.CENTER&&(Q=N+P-Z/2)}else this._textBaseline!==a.BOTTOM&&this._textBaseline!==a.CENTER||(J=T-(N=H.textSize()*this._textLeading)/2,Q=T+N/2);if(W===a.WORD){for(var K=[],re=0;re<k.length;re++){for(var oe="",M=k[re].split(" "),z=0;z<M.length;z++)F="".concat(oe+M[z])+" ",oe=R<(D=this.textWidth(F))&&0<oe.length?(K.push(oe),"".concat(M[z])+" "):F;K.push(oe)}var $=0;this._textBaseline===a.CENTER?$=(K.length-1)*H.textLeading()/2:this._textBaseline===a.BOTTOM&&($=(K.length-1)*H.textLeading());for(var ee=0;ee<k.length;ee++){oe="",M=k[ee].split(" ");for(var le=0;le<M.length;le++)F="".concat(oe+M[le])+" ",R<(D=this.textWidth(F))&&0<oe.length?(this._renderText(H,oe.trim(),C,T-$,Q,J),oe="".concat(M[le])+" ",T+=H.textLeading()):oe=F;this._renderText(H,oe.trim(),C,T-$,Q,J),T+=H.textLeading()}}else{for(var ce=[],me=0;me<k.length;me++)for(var ve=k[me].split(oe=""),ge=0;ge<ve.length;ge++)F="".concat(oe+ve[ge]),(D=this.textWidth(F))<=R?oe+=ve[ge]:R<D&&0<oe.length&&(ce.push(oe),oe="".concat(ve[ge]));ce.push(oe);var we=0;this._textBaseline===a.CENTER?we=(ce.length-1)*H.textLeading()/2:this._textBaseline===a.BOTTOM&&(we=(ce.length-1)*H.textLeading());for(var xe=0;xe<k.length;xe++){ve=k[xe].split(oe="");for(var fe=0;fe<ve.length;fe++)F="".concat(oe+ve[fe]),(D=this.textWidth(F))<=R?oe+=ve[fe]:R<D&&0<oe.length&&(this._renderText(H,oe.trim(),C,T-we,Q,J),T+=H.textLeading(),oe="".concat(ve[fe]))}this._renderText(H,oe.trim(),C,T-we,Q,J),T+=H.textLeading()}}else{var Se=0;this._textBaseline===a.CENTER?Se=(k.length-1)*H.textLeading()/2:this._textBaseline===a.BOTTOM&&(Se=(k.length-1)*H.textLeading());for(var Ce=0;Ce<k.length;Ce++)this._renderText(H,k[Ce],C,T-Se,Q,J-Se),T+=H.textLeading()}return H}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var N=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return _(N)==="object"&&N.font&&N.font.supported}},{key:"_updateTextMetrics",value:function(){var N,C,T,R,P,k;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((N=document.createElement("span")).style.fontFamily=this._textFont,N.style.fontSize="".concat(this._textSize,"px"),N.innerHTML="ABCjgq|",(k=document.createElement("div")).style.display="inline-block",k.style.width="1px",k.style.height="0px",R=((C=document.createElement("div")).appendChild(N),C.appendChild(k),C.style.height="0px",C.style.overflow="hidden",document.body.appendChild(C),k.style.verticalAlign="baseline",p(k)),P=p(N),T=R[1]-P[1],R=(k.style.verticalAlign="bottom",p(k)),P=p(N),k=R[1]-P[1]-T,document.body.removeChild(C),this._setProperty("_textAscent",T),this._setProperty("_textDescent",k)),this}}])&&w(S.prototype,y),A}(f.default.Element);function p(y){var S=0,j=0;if(y.offsetParent)for(;S+=y.offsetLeft,j+=y.offsetTop,y=y.offsetParent;);else S+=y.offsetLeft,j+=y.offsetTop;return[S,j]}g.prototype.textSize=function(y){return typeof y=="number"?(this._setProperty("_textSize",y),this._leadingSet||this._setProperty("_textLeading",y*a._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},f.default.Renderer=g,t=f.default.Renderer,c.default=t},{"../core/constants":272,"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],287:[function(y,o,c){function l(S){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(S)}function f(S){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(j){return l(j)}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":l(j)})(S)}y("core-js/modules/es.symbol"),y("core-js/modules/es.symbol.description"),y("core-js/modules/es.symbol.iterator"),y("core-js/modules/es.array.concat"),y("core-js/modules/es.array.fill"),y("core-js/modules/es.array.iterator"),y("core-js/modules/es.array.join"),y("core-js/modules/es.array.slice"),y("core-js/modules/es.function.name"),y("core-js/modules/es.object.get-own-property-descriptor"),y("core-js/modules/es.object.get-prototype-of"),y("core-js/modules/es.object.to-string"),y("core-js/modules/es.reflect.construct"),y("core-js/modules/es.reflect.get"),y("core-js/modules/es.regexp.exec"),y("core-js/modules/es.regexp.to-string"),y("core-js/modules/es.string.iterator"),y("core-js/modules/es.weak-map"),y("core-js/modules/web.dom-collections.iterator"),y("core-js/modules/es.array.concat"),y("core-js/modules/es.array.fill"),y("core-js/modules/es.array.join"),y("core-js/modules/es.array.slice"),y("core-js/modules/es.function.name"),y("core-js/modules/es.object.get-prototype-of"),y("core-js/modules/es.object.to-string"),y("core-js/modules/es.regexp.exec"),y("core-js/modules/es.regexp.to-string"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(p=y("./main"))&&p.__esModule?p:{default:p},d=function(S){if(S&&S.__esModule)return S;if(S===null||f(S)!=="object"&&typeof S!="function")return{default:S};var j=_();if(j&&j.has(S))return j.get(S);var A,N={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(A in S){var T;Object.prototype.hasOwnProperty.call(S,A)&&((T=C?Object.getOwnPropertyDescriptor(S,A):null)&&(T.get||T.set)?Object.defineProperty(N,A,T):N[A]=S[A])}return N.default=S,j&&j.set(S,N),N}(y("./constants"));function _(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,_=function(){return S},S)}function w(S,j){for(var A=0;A<j.length;A++){var N=j[A];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(S,N.key,N)}}function h(S,j,A){return(h=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(R,C,T){var R=function(P,k){for(;!Object.prototype.hasOwnProperty.call(P,k)&&(P=v(P))!==null;);return P}(R,C);if(R)return(R=Object.getOwnPropertyDescriptor(R,C)).get?R.get.call(T):R.value})(S,j,A||S)}function m(S,j){return(m=Object.setPrototypeOf||function(A,N){return A.__proto__=N,A})(S,j)}function b(S){return function(){var j,A=v(S),A=(j=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(j=v(this).constructor,Reflect.construct(A,arguments,j)):A.apply(this,arguments),this);if(!j||f(j)!=="object"&&typeof j!="function"){if(A!==void 0)return A;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return j}}function v(S){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(j){return j.__proto__||Object.getPrototypeOf(j)})(S)}y("./p5.Renderer");var g="rgba(0,0,0,0)",p=function(S){var j=N;if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(S&&S.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),S&&m(j,S);var A=b(N);function N(C,T,R){if(this instanceof N)return(C=A.call(this,C,T,R)).drawingContext=C.canvas.getContext("2d"),C._pInst._setProperty("drawingContext",C.drawingContext),C;throw new TypeError("Cannot call a class as a function")}return j=N,(S=[{key:"getFilterGraphicsLayer",value:function(){var C;return this.filterGraphicsLayer||(C=(this._pInst instanceof a.default.Graphics?this._pInst:this)._pInst,this.filterGraphicsLayer=new a.default.Graphics(this.width,this.height,d.WEBGL,C)),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=d.BLEND,this._setFill(d._DEFAULT_FILL),this._setStroke(d._DEFAULT_STROKE),this.drawingContext.lineCap=d.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(C,T){h(v(N.prototype),"resize",this).call(this,C,T),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var C,T;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof a.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(C=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(C,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(C=this._getFill(),T=(T=this._pInst).color.apply(T,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(T.levels),T=T.toString(),this._setFill(T),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(C),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var C=(C=this._pInst).color.apply(C,arguments);this._setFill(C.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",C.levels)}},{key:"stroke",value:function(){var C=(C=this._pInst).color.apply(C,arguments);this._setStroke(C.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",C.levels)}},{key:"erase",value:function(C,T){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,C=this._pInst.color(255,C).toString(),this.drawingContext.fillStyle=C,this._cachedStrokeStyle=this.drawingContext.strokeStyle,C=this._pInst.color(255,T).toString(),this.drawingContext.strokeStyle=C,T=this._cachedBlendMode,this.blendMode(d.REMOVE),this._cachedBlendMode=T,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"beginClip",value:function(){var C=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},C=(h(v(N.prototype),"beginClip",this).call(this,C),this._cachedFillStyle=this.drawingContext.fillStyle,this._pInst.color(255,0).toString()),C=(this.drawingContext.fillStyle=C,this._cachedStrokeStyle=this.drawingContext.strokeStyle,this._pInst.color(255,0).toString()),C=(this.drawingContext.strokeStyle=C,this._cachedBlendMode);this.blendMode(d.BLEND),this._cachedBlendMode=C,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath())}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),h(v(N.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}},{key:"image",value:function(C,T,R,P,k,F,D,q,H){C.gifProperties&&C._animateGif(this._pInst);try{a.default.MediaElement&&C instanceof a.default.MediaElement&&C._ensureCanvas();var W=(W=this._tint&&C.canvas?this._getTintedImageCanvas(C):W)||C.canvas||C.elt,Q=1;C.width&&0<C.width&&(Q=W.width/C.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(W,Q*T,Q*R,Q*P,Q*k,F,D,q,H),this._isErasing&&this._pInst.erase()}catch(J){if(J.name!=="NS_ERROR_NOT_AVAILABLE")throw J}}},{key:"_getTintedImageCanvas",value:function(C){if(!C.canvas)return C;C.tintCanvas||(C.tintCanvas=document.createElement("canvas")),C.tintCanvas.width!==C.canvas.width&&(C.tintCanvas.width=C.canvas.width),C.tintCanvas.height!==C.canvas.height&&(C.tintCanvas.height=C.canvas.height);var T=C.tintCanvas.getContext("2d");return T.save(),T.clearRect(0,0,C.canvas.width,C.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(T.drawImage(C.canvas,0,0),T.globalCompositeOperation="luminosity",T.drawImage(C.canvas,0,0),T.globalCompositeOperation="color",T.drawImage(C.canvas,0,0),T.globalCompositeOperation="multiply",T.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),T.fillRect(0,0,C.canvas.width,C.canvas.height),T.globalCompositeOperation="destination-in"),T.globalAlpha=this._tint[3]/255,T.drawImage(C.canvas,0,0),T.restore(),C.tintCanvas}},{key:"blendMode",value:function(C){if(C===d.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(C!==d.BLEND&&C!==d.REMOVE&&C!==d.DARKEST&&C!==d.LIGHTEST&&C!==d.DIFFERENCE&&C!==d.MULTIPLY&&C!==d.EXCLUSION&&C!==d.SCREEN&&C!==d.REPLACE&&C!==d.OVERLAY&&C!==d.HARD_LIGHT&&C!==d.SOFT_LIGHT&&C!==d.DODGE&&C!==d.BURN&&C!==d.ADD)throw new Error("Mode ".concat(C," not recognized."));this._cachedBlendMode=C,this.drawingContext.globalCompositeOperation=C}}},{key:"blend",value:function(){for(var C=this.drawingContext.globalCompositeOperation,T=arguments.length,R=new Array(T),P=0;P<T;P++)R[P]=arguments[P];var k=R[R.length-1],F=Array.prototype.slice.call(R,0,R.length-1);this.drawingContext.globalCompositeOperation=k,a.default.prototype.copy.apply(this,F),this.drawingContext.globalCompositeOperation=C}},{key:"_getPixel",value:function(C,T){return C=this.drawingContext.getImageData(C,T,1,1).data,[C[0],C[1],C[2],C[3]]}},{key:"loadPixels",value:function(){var C=this._pixelsState,T=C._pixelDensity,R=this.width*T,T=this.height*T,R=this.drawingContext.getImageData(0,0,R,T);C._setProperty("imageData",R),C._setProperty("pixels",R.data)}},{key:"set",value:function(C,T,R){C=Math.floor(C),T=Math.floor(T);var P=this._pixelsState;if(R instanceof a.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(P._pixelDensity,P._pixelDensity),this.drawingContext.clearRect(C,T,R.width,R.height),this.drawingContext.drawImage(R.canvas,C,T),this.drawingContext.restore();else{var k=0,F=0,D=0,q=0,H=4*(T*P._pixelDensity*(this.width*P._pixelDensity)+C*P._pixelDensity);if(P.imageData||P.loadPixels(),typeof R=="number")H<P.pixels.length&&(D=F=k=R,q=255);else if(Array.isArray(R)){if(R.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");H<P.pixels.length&&(k=R[0],F=R[1],D=R[2],q=R[3])}else R instanceof a.default.Color&&H<P.pixels.length&&(k=R.levels[0],F=R.levels[1],D=R.levels[2],q=R.levels[3]);for(var W=0;W<P._pixelDensity;W++)for(var Q=0;Q<P._pixelDensity;Q++)H=4*((T*P._pixelDensity+Q)*this.width*P._pixelDensity+(C*P._pixelDensity+W)),P.pixels[H]=k,P.pixels[H+1]=F,P.pixels[H+2]=D,P.pixels[H+3]=q}}},{key:"updatePixels",value:function(C,T,R,P){var k=this._pixelsState,F=k._pixelDensity;C===void 0&&T===void 0&&R===void 0&&P===void 0&&(T=C=0,R=this.width,P=this.height),C*=F,T*=F,R*=F,P*=F,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=k.imageData),this.drawingContext.putImageData(k.imageData,0,0,C,T,R,P)}},{key:"arc",value:function(H,W,Q,J,k,F,D){var q=this.drawingContext,H=H+Q/2,W=W+J/2,Q=Q/2,J=J/2,Z=!(D===d.CHORD||D===d.OPEN||(F-k)%d.TWO_PI==0);return this._doFill&&(this._clipping||q.beginPath(),q.ellipse(H,W,Q,J,0,k,F),Z&&q.lineTo(H,W),q.closePath(),this._clipping||q.fill()),this._doStroke&&(this._clipping||q.beginPath(),q.ellipse(H,W,Q,J,0,k,F),D===d.PIE&&Z&&q.lineTo(H,W),D!==d.PIE&&D!==d.CHORD||q.closePath(),this._clipping||q.stroke()),this}},{key:"ellipse",value:function(q){var T=this.drawingContext,R=this._doFill,P=this._doStroke,k=parseFloat(q[0]),F=parseFloat(q[1]),D=parseFloat(q[2]),q=parseFloat(q[3]);if(R&&!P){if(this._getFill()===g)return this}else if(!R&&P&&this._getStroke()===g)return this;k+=D/2,F+=q/2,D/=2,q/=2,this._clipping||T.beginPath(),T.ellipse(k,F,D,q,0,0,2*Math.PI),T.closePath(),!this._clipping&&R&&T.fill(),!this._clipping&&P&&T.stroke()}},{key:"line",value:function(C,T,R,P){var k=this.drawingContext;return this._doStroke&&this._getStroke()!==g&&(this._clipping||k.beginPath(),k.moveTo(C,T),k.lineTo(R,P),k.stroke()),this}},{key:"point",value:function(C,T){var R,P,k=this.drawingContext;return!this._doStroke||this._getStroke()===g?this:(R=this._getStroke(),P=this._getFill(),this._clipping||this._setFill(R),this._clipping||k.beginPath(),k.arc(C,T,k.lineWidth/2,0,d.TWO_PI,!1),void(this._clipping||(k.fill(),this._setFill(P))))}},{key:"quad",value:function(C,T,R,P,k,F,D,q){var H=this.drawingContext,W=this._doFill,Q=this._doStroke;if(W&&!Q){if(this._getFill()===g)return this}else if(!W&&Q&&this._getStroke()===g)return this;return this._clipping||H.beginPath(),H.moveTo(C,T),H.lineTo(R,P),H.lineTo(k,F),H.lineTo(D,q),H.closePath(),!this._clipping&&W&&H.fill(),!this._clipping&&Q&&H.stroke(),this}},{key:"rect",value:function(Q){var T,R,P=Q[0],k=Q[1],F=Q[2],D=Q[3],q=Q[4],H=Q[5],W=Q[6],Q=Q[7],J=this.drawingContext,Z=this._doFill,K=this._doStroke;if(Z&&!K){if(this._getFill()===g)return this}else if(!Z&&K&&this._getStroke()===g)return this;return this._clipping||J.beginPath(),q===void 0?J.rect(P,k,F,D):(H===void 0&&(H=q),W===void 0&&(W=H),Q===void 0&&(Q=W),K=(Z=Math.abs(F))/2,R=(T=Math.abs(D))/2,J.roundRect(P,k,F,D,[q=T<2*(q=Z<2*q?K:q)?R:q,H=T<2*(H=Z<2*H?K:H)?R:H,W=T<2*(W=Z<2*W?K:W)?R:W,Q=T<2*(Q=Z<2*Q?K:Q)?R:Q])),!this._clipping&&this._doFill&&J.fill(),!this._clipping&&this._doStroke&&J.stroke(),this}},{key:"triangle",value:function(W){var T=this.drawingContext,R=this._doFill,P=this._doStroke,k=W[0],F=W[1],D=W[2],q=W[3],H=W[4],W=W[5];if(R&&!P){if(this._getFill()===g)return this}else if(!R&&P&&this._getStroke()===g)return this;this._clipping||T.beginPath(),T.moveTo(k,F),T.lineTo(D,q),T.lineTo(H,W),T.closePath(),!this._clipping&&R&&T.fill(),!this._clipping&&P&&T.stroke()}},{key:"endShape",value:function(C,T,R,P,k,F,D){if(T.length!==0&&(this._doStroke||this._doFill)){var q,H,W,Q=C===d.CLOSE,J=(Q&&!F&&T.push(T[0]),T.length);if(R&&D===null){if(3<J){var Z=[],K=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(T[1][0],T[1][1]),H=1;H+2<J;H++)q=T[H],Z[0]=[q[0],q[1]],Z[1]=[q[0]+(K*T[H+1][0]-K*T[H-1][0])/6,q[1]+(K*T[H+1][1]-K*T[H-1][1])/6],Z[2]=[T[H+1][0]+(K*T[H][0]-K*T[H+2][0])/6,T[H+1][1]+(K*T[H][1]-K*T[H+2][1])/6],Z[3]=[T[H+1][0],T[H+1][1]],this.drawingContext.bezierCurveTo(Z[1][0],Z[1][1],Z[2][0],Z[2][1],Z[3][0],Z[3][1]);Q&&this.drawingContext.lineTo(T[H+1][0],T[H+1][1]),this._doFillStrokeClose(Q)}}else if(P&&D===null){for(this._clipping||this.drawingContext.beginPath(),H=0;H<J;H++)T[H].isVert?T[H].moveTo?this.drawingContext.moveTo(T[H][0],T[H][1]):this.drawingContext.lineTo(T[H][0],T[H][1]):this.drawingContext.bezierCurveTo(T[H][0],T[H][1],T[H][2],T[H][3],T[H][4],T[H][5]);this._doFillStrokeClose(Q)}else if(k&&D===null){for(this._clipping||this.drawingContext.beginPath(),H=0;H<J;H++)T[H].isVert?T[H].moveTo?this.drawingContext.moveTo(T[H][0],T[H][1]):this.drawingContext.lineTo(T[H][0],T[H][1]):this.drawingContext.quadraticCurveTo(T[H][0],T[H][1],T[H][2],T[H][3]);this._doFillStrokeClose(Q)}else if(D===d.POINTS)for(H=0;H<J;H++)q=T[H],this._doStroke&&this._pInst.stroke(q[6]),this._pInst.point(q[0],q[1]);else if(D===d.LINES)for(H=0;H+1<J;H+=2)q=T[H],this._doStroke&&this._pInst.stroke(T[H+1][6]),this._pInst.line(q[0],q[1],T[H+1][0],T[H+1][1]);else if(D===d.TRIANGLES)for(H=0;H+2<J;H+=3)q=T[H],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(q[0],q[1]),this.drawingContext.lineTo(T[H+1][0],T[H+1][1]),this.drawingContext.lineTo(T[H+2][0],T[H+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(T[H+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(T[H+2][6]),this.drawingContext.stroke());else if(D===d.TRIANGLE_STRIP)for(H=0;H+1<J;H++)q=T[H],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(T[H+1][0],T[H+1][1]),this.drawingContext.lineTo(q[0],q[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(T[H+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(T[H+1][5]),H+2<J&&(this.drawingContext.lineTo(T[H+2][0],T[H+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(T[H+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(T[H+2][5])),this._doFillStrokeClose(Q);else if(D===d.TRIANGLE_FAN){if(2<J){for(this._clipping||this.drawingContext.beginPath(),H=2;H<J;H++)q=T[H],this.drawingContext.moveTo(T[0][0],T[0][1]),this.drawingContext.lineTo(T[H-1][0],T[H-1][1]),this.drawingContext.lineTo(q[0],q[1]),this.drawingContext.lineTo(T[0][0],T[0][1]),H<J-1&&(this._doFill&&q[5]!==T[H+1][5]||this._doStroke&&q[6]!==T[H+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(q[5]),this.drawingContext.fill(),this._pInst.fill(T[H+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(q[6]),this.drawingContext.stroke(),this._pInst.stroke(T[H+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(Q)}}else if(D===d.QUADS)for(H=0;H+3<J;H+=4){for(q=T[H],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(q[0],q[1]),W=1;W<4;W++)this.drawingContext.lineTo(T[H+W][0],T[H+W][1]);this.drawingContext.lineTo(q[0],q[1]),!this._clipping&&this._doFill&&this._pInst.fill(T[H+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(T[H+3][6]),this._doFillStrokeClose(Q)}else if(D===d.QUAD_STRIP){if(3<J)for(H=0;H+1<J;H+=2)q=T[H],this._clipping||this.drawingContext.beginPath(),H+3<J?(this.drawingContext.moveTo(T[H+2][0],T[H+2][1]),this.drawingContext.lineTo(q[0],q[1]),this.drawingContext.lineTo(T[H+1][0],T[H+1][1]),this.drawingContext.lineTo(T[H+3][0],T[H+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(T[H+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(T[H+3][6])):(this.drawingContext.moveTo(q[0],q[1]),this.drawingContext.lineTo(T[H+1][0],T[H+1][1])),this._doFillStrokeClose(Q)}else{for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(T[0][0],T[0][1]),H=1;H<J;H++)(q=T[H]).isVert&&(q.moveTo?(Q&&this.drawingContext.closePath(),this.drawingContext.moveTo(q[0],q[1])):this.drawingContext.lineTo(q[0],q[1]));this._doFillStrokeClose(Q)}F=k=P=R=!1,Q&&T.pop()}return this}},{key:"strokeCap",value:function(C){return C!==d.ROUND&&C!==d.SQUARE&&C!==d.PROJECT||(this.drawingContext.lineCap=C),this}},{key:"strokeJoin",value:function(C){return C!==d.ROUND&&C!==d.BEVEL&&C!==d.MITER||(this.drawingContext.lineJoin=C),this}},{key:"strokeWeight",value:function(C){return this.drawingContext.lineWidth=C===void 0||C===0?1e-4:C,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(C){C!==this._cachedFillStyle&&(this.drawingContext.fillStyle=C,this._cachedFillStyle=C)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(C){C!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=C,this._cachedStrokeStyle=C)}},{key:"bezier",value:function(C,T,R,P,k,F,D,q){return this._pInst.beginShape(),this._pInst.vertex(C,T),this._pInst.bezierVertex(R,P,k,F,D,q),this._pInst.endShape(),this}},{key:"curve",value:function(C,T,R,P,k,F,D,q){return this._pInst.beginShape(),this._pInst.curveVertex(C,T),this._pInst.curveVertex(R,P),this._pInst.curveVertex(k,F),this._pInst.curveVertex(D,q),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(C){C&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(C,T,R,P,k,F){this.drawingContext.transform(C,T,R,P,k,F)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(C){this.drawingContext.rotate(C)}},{key:"scale",value:function(C,T){return this.drawingContext.scale(C,T),this}},{key:"translate",value:function(C,T){return C instanceof a.default.Vector&&(T=C.y,C=C.x),this.drawingContext.translate(C,T),this}},{key:"_renderText",value:function(C,T,R,P,k,F){if(!(P<F||k<=P))return C.push(),this._isOpenType()?this._textFont._renderPath(T,R,P,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(T,R,P),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(d._DEFAULT_TEXT_FILL),this.drawingContext.fillText(T,R,P))),C.pop(),C}},{key:"textWidth",value:function(C){return this._isOpenType()?this._textFont._textWidth(C,this._textSize):this.drawingContext.measureText(C).width}},{key:"_applyTextProperties",value:function(){var C=this._pInst,T=(this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),T=this._textFont,this._isOpenType()&&(T=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),T||"sans-serif");return/\s/.exec(T)&&(T='"'.concat(T,'"')),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(T),this.drawingContext.textAlign=this._textAlign,this._textBaseline===d.CENTER?this.drawingContext.textBaseline=d._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,C}},{key:"push",value:function(){return this.drawingContext.save(),h(v(N.prototype),"push",this).call(this)}},{key:"pop",value:function(C){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,h(v(N.prototype),"pop",this).call(this,C)}}])&&w(j.prototype,S),N}(a.default.Renderer),y=(p.prototype.text=function(S,j,A,R,C){R!==void 0&&this.drawingContext.textBaseline===d.BASELINE&&(T=!0,this.drawingContext.textBaseline=d.TOP);var T,R=a.default.Renderer.prototype.text.apply(this,arguments);return T&&(this.drawingContext.textBaseline=d.BASELINE),R},a.default.Renderer2D=p,a.default.Renderer2D);c.default=y},{"./constants":272,"./main":283,"./p5.Renderer":286,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],288:[function(t,o,c){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var l=(t=t("./main"))&&t.__esModule?t:{default:t};l.default.prototype._promisePreloads=[];function f(){return{}}var a=!(l.default.prototype.registerPromisePreload=function(d){l.default.prototype._promisePreloads.push(d)});l.default.prototype._setupPromisePreloads=function(){var d=!0,_=!1,w=void 0;try{for(var h,m=this._promisePreloads[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var b=h.value,v=this,g=b.method,p=b.addCallbacks,y=b.legacyPreloadSetup,S=b.target||this,j=S[g].bind(S);if(S===l.default.prototype){if(a)continue;v=null,j=S[g]}S[g]=this._wrapPromisePreload(v,j,p),y&&(S[y.method]=this._legacyPreloadGenerator(v,y,S[g]))}}catch(A){_=!0,w=A}finally{try{d||m.return==null||m.return()}finally{if(_)throw w}}a=!0},l.default.prototype._wrapPromisePreload=function(d,_,w){var h=function(){for(var m=this,b=(this._incrementPreload(),null),v=null,g=arguments.length,p=new Array(g),y=0;y<g;y++)p[y]=arguments[y];if(w)for(var S=p.length-1;0<=S&&!v&&typeof p[S]=="function";S--)v=b,b=p.pop();var j=Promise.resolve(_.apply(this,p));return b&&j.then(b),v&&j.catch(v),j.then(function(){return m._decrementPreload()}),j};return h=d?h.bind(d):h},l.default.prototype._legacyPreloadGenerator=function(d,m,w){var h=m.createBaseObject||f,m=function(){var b=this;this._incrementPreload();for(var v=arguments.length,g=new Array(v),p=0;p<v;p++)g[p]=arguments[p];var y=h.apply(this,g);return w.apply(this,g).then(function(S){Object.assign(y,S),b._decrementPreload()}),y};return m=d?m.bind(d):m}},{"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],289:[function(t,o,c){function l(m){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=(h=t("./main"))&&h.__esModule?h:{default:h},a=function(m){if(m&&m.__esModule)return m;if(m===null||_(m)!=="object"&&typeof m!="function")return{default:m};var b=d();if(b&&b.has(m))return b.get(m);var v,g={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in m){var y;Object.prototype.hasOwnProperty.call(m,v)&&((y=p?Object.getOwnPropertyDescriptor(m,v):null)&&(y.get||y.set)?Object.defineProperty(g,v,y):g[v]=m[v])}return g.default=m,b&&b.set(m,g),g}(t("./constants"));function d(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,d=function(){return m},m)}function _(m){return(_=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(b){return l(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":l(b)})(m)}t("./p5.Graphics"),t("./p5.Renderer2D"),t("../webgl/p5.RendererGL");var w="defaultCanvas0",h=(f.default.prototype.createCanvas=function(m,b,v,g){var p,y,S;if(f.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(v=a.P2D,g=arguments[2]):p=v||a.P2D,g)(S=document.getElementById(w))&&S.parentNode.removeChild(S),S=g,this._defaultGraphicsCreated=!1;else{if(p===a.WEBGL)(S=document.getElementById(w))&&(S.parentNode.removeChild(S),y=this._renderer,this._elements=this._elements.filter(function(A){return A!==y})),(S=document.createElement("canvas")).id=w,S.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)S=this.canvas;else{S=g||document.createElement("canvas");for(var j=0;document.getElementById("defaultCanvas".concat(j));)j++;w="defaultCanvas".concat(j),S.id=w,S.classList.add("p5Canvas")}this._setupDone||(S.dataset.hidden=!0,S.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(v=document.createElement("main"),document.body.appendChild(v)),document.getElementsByTagName("main")[0])).appendChild(S)}return p===a.WEBGL?(this._setProperty("_renderer",new f.default.RendererGL(S,this,!0)),this._elements.push(this._renderer),m=(g=this._renderer._adjustDimensions(m,b)).adjustedWidth,b=g.adjustedHeight):this._defaultGraphicsCreated||(this._setProperty("_renderer",new f.default.Renderer2D(S,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(m,b),this._renderer._applyDefaults(),this._renderer},f.default.prototype.resizeCanvas=function(m,b,v){if(f.default._validateParameters("resizeCanvas",arguments),this._renderer){var g,p,y,S={};for(g in this.drawingContext){var j=this.drawingContext[g];_(j)!=="object"&&typeof j!="function"&&(S[g]=j)}for(y in this._renderer instanceof f.default.RendererGL&&(m=(p=this._renderer._adjustDimensions(m,b)).adjustedWidth,b=p.adjustedHeight),this.width=m,this.height=b,this._renderer.resize(m,b),S)try{this.drawingContext[y]=S[y]}catch{}v||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},f.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},f.default.prototype.createGraphics=function(m,b){for(var v=arguments.length,g=new Array(2<v?v-2:0),p=2;p<v;p++)g[p-2]=arguments[p];return g[0]instanceof HTMLCanvasElement&&(g[1]=g[0],g[0]=a.P2D),f.default._validateParameters("createGraphics",arguments),new f.default.Graphics(m,b,g[0],this,g[1])},f.default.prototype.createFramebuffer=function(m){return new f.default.Framebuffer(this,m)},f.default.prototype.clearDepth=function(m){this._assert3d("clearDepth"),this._renderer.clearDepth(m)},f.default.prototype.blendMode=function(m){f.default._validateParameters("blendMode",arguments),m===a.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),m=a.BLEND),this._renderer.blendMode(m)},f.default);c.default=h},{"../webgl/p5.RendererGL":341,"./constants":272,"./main":283,"./p5.Graphics":285,"./p5.Renderer2D":287,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],290:[function(t,o,c){function l(b){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(b)}function f(b){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(v){return l(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":l(v)})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.slice"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=h(t("../main")),d=function(b){if(b&&b.__esModule)return b;if(b===null||f(b)!=="object"&&typeof b!="function")return{default:b};var v=w();if(v&&v.has(b))return v.get(b);var g,p={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in b){var S;Object.prototype.hasOwnProperty.call(b,g)&&((S=y?Object.getOwnPropertyDescriptor(b,g):null)&&(S.get||S.set)?Object.defineProperty(p,g,S):p[g]=b[g])}return p.default=b,v&&v.set(b,p),p}(t("../constants")),_=h(t("../helpers"));function w(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,w=function(){return b},b)}function h(b){return b&&b.__esModule?b:{default:b}}function m(b){return function(v){if(Array.isArray(v)){for(var g=0,p=new Array(v.length);g<v.length;g++)p[g]=v[g];return p}}(b)||function(v){if(Symbol.iterator in Object(v)||Object.prototype.toString.call(v)==="[object Arguments]")return Array.from(v)}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),a.default.prototype._normalizeArcAngles=function(b,v,g,p,y){var S;return b-=d.TWO_PI*Math.floor(b/d.TWO_PI),v-=d.TWO_PI*Math.floor(v/d.TWO_PI),S=Math.min(Math.abs(b-v),d.TWO_PI-Math.abs(b-v)),y&&(b=b<=d.HALF_PI?Math.atan(g/p*Math.tan(b)):b>d.HALF_PI&&b<=3*d.HALF_PI?Math.atan(g/p*Math.tan(b))+d.PI:Math.atan(g/p*Math.tan(b))+d.TWO_PI,v=v<=d.HALF_PI?Math.atan(g/p*Math.tan(v)):v>d.HALF_PI&&v<=3*d.HALF_PI?Math.atan(g/p*Math.tan(v))+d.PI:Math.atan(g/p*Math.tan(v))+d.TWO_PI),v<b&&(v+=d.TWO_PI),{start:b,stop:v,correspondToSamePoint:S<1e-5}},a.default.prototype.arc=function(b,v,g,p,y,S,j,A){return a.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&y!==S&&(y=this._toRadians(y),S=this._toRadians(S),b=_.default.modeAdjust(b,v,g,p,this._renderer._ellipseMode),(v=this._normalizeArcAngles(y,S,b.w,b.h,!0)).correspondToSamePoint?this._renderer.ellipse([b.x,b.y,b.w,b.h,A]):(this._renderer.arc(b.x,b.y,b.w,b.h,v.start,v.stop,j,A),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[b.x,b.y,b.w,b.h,v.start,v.stop,j]))),this},a.default.prototype.ellipse=function(b,v,g,p,y){return a.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},a.default.prototype.circle=function(){for(var b=arguments.length,v=new Array(b),g=0;g<b;g++)v[g]=arguments[g];a.default._validateParameters("circle",v);var p=v.slice(0,2);return p.push(v[2],v[2]),this._renderEllipse.apply(this,m(p))},a.default.prototype._renderEllipse=function(b,v,g,p,y){return(this._renderer._doStroke||this._renderer._doFill)&&(b=_.default.modeAdjust(b,v,g,p=p===void 0?g:p,this._renderer._ellipseMode),this._renderer.ellipse([b.x,b.y,b.w,b.h,y]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[b.x,b.y,b.w,b.h])),this},a.default.prototype.line=function(){for(var b,v=arguments.length,g=new Array(v),p=0;p<v;p++)g[p]=arguments[p];return a.default._validateParameters("line",g),this._renderer._doStroke&&(b=this._renderer).line.apply(b,g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",g),this},a.default.prototype.point=function(){for(var b,v=arguments.length,g=new Array(v),p=0;p<v;p++)g[p]=arguments[p];return a.default._validateParameters("point",g),this._renderer._doStroke&&(g.length===1&&g[0]instanceof a.default.Vector?this._renderer.point.call(this._renderer,g[0].x,g[0].y,g[0].z):((b=this._renderer).point.apply(b,g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",g))),this},a.default.prototype.quad=function(){for(var b,v=arguments.length,g=new Array(v),p=0;p<v;p++)g[p]=arguments[p];return a.default._validateParameters("quad",g),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&g.length<12?this._renderer.quad.call(this._renderer,g[0],g[1],0,g[2],g[3],0,g[4],g[5],0,g[6],g[7],0,g[8],g[9]):((b=this._renderer).quad.apply(b,g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",g))),this},a.default.prototype.rect=function(){for(var b=arguments.length,v=new Array(b),g=0;g<b;g++)v[g]=arguments[g];return a.default._validateParameters("rect",v),this._renderRect.apply(this,v)},a.default.prototype.square=function(b,v,g,p,y,S,j){return a.default._validateParameters("square",arguments),this._renderRect.call(this,b,v,g,g,p,y,S,j)},a.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var b=_.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),v=(this._renderer._rectMode===d.CORNER&&(b.w=arguments[2],b.h=arguments[3]),[b.x,b.y,b.w,b.h]),g=4;g<arguments.length;g++)v[g]=arguments[g];this._renderer.rect(v),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[b.x,b.y,b.w,b.h])}return this},a.default.prototype.triangle=function(){for(var b=arguments.length,v=new Array(b),g=0;g<b;g++)v[g]=arguments[g];return a.default._validateParameters("triangle",v),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(v),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",v),this},t=a.default,c.default=t},{"../constants":272,"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../helpers":279,"../main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],291:[function(t,o,c){function l(h){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function f(h){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(m){return l(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":l(m)})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(w=t("../main"))&&w.__esModule?w:{default:w},d=function(h){if(h&&h.__esModule)return h;if(h===null||f(h)!=="object"&&typeof h!="function")return{default:h};var m=_();if(m&&m.has(h))return m.get(h);var b,v={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in h){var p;Object.prototype.hasOwnProperty.call(h,b)&&((p=g?Object.getOwnPropertyDescriptor(h,b):null)&&(p.get||p.set)?Object.defineProperty(v,b,p):v[b]=h[b])}return v.default=h,m&&m.set(h,v),v}(t("../constants"));function _(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,_=function(){return h},h)}a.default.prototype.ellipseMode=function(h){return a.default._validateParameters("ellipseMode",arguments),h!==d.CORNER&&h!==d.CORNERS&&h!==d.RADIUS&&h!==d.CENTER||(this._renderer._ellipseMode=h),this},a.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},a.default.prototype.rectMode=function(h){return a.default._validateParameters("rectMode",arguments),h!==d.CORNER&&h!==d.CORNERS&&h!==d.RADIUS&&h!==d.CENTER||(this._renderer._rectMode=h),this},a.default.prototype.smooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!0):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},a.default.prototype.strokeCap=function(h){return a.default._validateParameters("strokeCap",arguments),h!==d.ROUND&&h!==d.SQUARE&&h!==d.PROJECT||this._renderer.strokeCap(h),this},a.default.prototype.strokeJoin=function(h){return a.default._validateParameters("strokeJoin",arguments),h!==d.ROUND&&h!==d.BEVEL&&h!==d.MITER||this._renderer.strokeJoin(h),this},a.default.prototype.strokeWeight=function(h){return a.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(h),this};var w=a.default;c.default=w},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],292:[function(t,o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(f=t("../main"))&&f.__esModule?f:{default:f};t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),l.default.prototype.bezier=function(){for(var a,d=arguments.length,_=new Array(d),w=0;w<d;w++)_[w]=arguments[w];return l.default._validateParameters("bezier",_),(this._renderer._doStroke||this._renderer._doFill)&&(a=this._renderer).bezier.apply(a,_),this},l.default.prototype.bezierDetail=function(a){return l.default._validateParameters("bezierDetail",arguments),this._bezierDetail=a,this},l.default.prototype.bezierPoint=function(a,d,_,w,h){l.default._validateParameters("bezierPoint",arguments);var m=1-h;return Math.pow(m,3)*a+3*Math.pow(m,2)*h*d+3*m*Math.pow(h,2)*_+Math.pow(h,3)*w},l.default.prototype.bezierTangent=function(a,d,_,w,h){l.default._validateParameters("bezierTangent",arguments);var m=1-h;return 3*w*Math.pow(h,2)-3*_*Math.pow(h,2)+6*_*m*h-6*d*m*h+3*d*Math.pow(m,2)-3*a*Math.pow(m,2)},l.default.prototype.curve=function(){for(var a,d=arguments.length,_=new Array(d),w=0;w<d;w++)_[w]=arguments[w];return l.default._validateParameters("curve",_),this._renderer._doStroke&&(a=this._renderer).curve.apply(a,_),this},l.default.prototype.curveDetail=function(a){return l.default._validateParameters("curveDetail",arguments),this._curveDetail=a<3?3:a,this},l.default.prototype.curveTightness=function(a){return l.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=a,this},l.default.prototype.curvePoint=function(a,d,_,w,h){l.default._validateParameters("curvePoint",arguments);var m=this._renderer._curveTightness,b=h*h*h,v=h*h;return a*((m-1)/2*b+(1-m)*v+(m-1)/2*h)+d*((m+3)/2*b+(-5-m)/2*v+1)+_*((-3-m)/2*b+(m+2)*v+(1-m)/2*h)+w*((1-m)/2*b+(m-1)/2*v)},l.default.prototype.curveTangent=function(a,d,_,w,v){l.default._validateParameters("curveTangent",arguments);var m=this._renderer._curveTightness,b=v*v*3,v=2*v;return a*((m-1)/2*b+(1-m)*v+(m-1)/2)+d*((m+3)/2*b+(-5-m)/2*v)+_*((-3-m)/2*b+(m+2)*v+(1-m)/2)+w*((1-m)/2*b+(m-1)/2*v)};var f=l.default;c.default=f},{"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../main":283}],293:[function(t,o,c){function l(j){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(j)}function f(j){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(A){return l(A)}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":l(A)})(j)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.slice"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(S=t("../main"))&&S.__esModule?S:{default:S},d=function(j){if(j&&j.__esModule)return j;if(j===null||f(j)!=="object"&&typeof j!="function")return{default:j};var A=_();if(A&&A.has(j))return A.get(j);var N,C={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(N in j){var R;Object.prototype.hasOwnProperty.call(j,N)&&((R=T?Object.getOwnPropertyDescriptor(j,N):null)&&(R.get||R.set)?Object.defineProperty(C,N,R):C[N]=j[N])}return C.default=j,A&&A.set(j,C),C}(t("../constants"));function _(){var j;return typeof WeakMap!="function"?null:(j=new WeakMap,_=function(){return j},j)}var w=null,h=[],m=[],b=!1,v=!1,g=!1,p=!1,y=!0,S=(a.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(m=[],p=!0),this},a.default.prototype.beginShape=function(j){var A;return a.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(A=this._renderer).beginShape.apply(A,arguments):(w=j===d.POINTS||j===d.LINES||j===d.TRIANGLES||j===d.TRIANGLE_FAN||j===d.TRIANGLE_STRIP||j===d.QUADS||j===d.QUAD_STRIP?j:null,h=[],m=[]),this},a.default.prototype.bezierVertex=function(){for(var j,A=arguments.length,N=new Array(A),C=0;C<A;C++)N[C]=arguments[C];if(a.default._validateParameters("bezierVertex",N),this._renderer.isP3D)(j=this._renderer).bezierVertex.apply(j,N);else if(h.length===0)a.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{b=!0;for(var T=[],R=0;R<N.length;R++)T[R]=N[R];T.isVert=!1,(p?m:h).push(T)}return this},a.default.prototype.curveVertex=function(){for(var j,A=arguments.length,N=new Array(A),C=0;C<A;C++)N[C]=arguments[C];return a.default._validateParameters("curveVertex",N),this._renderer.isP3D?(j=this._renderer).curveVertex.apply(j,N):(v=!0,this.vertex(N[0],N[1])),this},a.default.prototype.endContour=function(){if(!this._renderer.isP3D){var j=m[0].slice();j.isVert=m[0].isVert,j.moveTo=!1,m.push(j),y&&(h.push(h[0]),y=!1);for(var A=0;A<m.length;A++)h.push(m[A])}return this},a.default.prototype.endShape=function(j){var A=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(a.default._validateParameters("endShape",arguments),A<1&&(console.log(" p5.js says: You can not have less than one instance"),A=1),this._renderer.isP3D)this._renderer.endShape(j,v,b,g,p,w,A);else{if(A!==1&&console.log(" p5.js says: Instancing is only supported in WebGL2 mode"),h.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;A=j===d.CLOSE,A&&!p&&h.push(h[0]),this._renderer.endShape(j,h,v,b,g,p,w),y=!(p=g=b=v=!1),A&&h.pop()}return this},a.default.prototype.quadraticVertex=function(){for(var j,A=arguments.length,N=new Array(A),C=0;C<A;C++)N[C]=arguments[C];if(a.default._validateParameters("quadraticVertex",N),this._renderer.isP3D)(j=this._renderer).quadraticVertex.apply(j,N);else{if(this._contourInited)return(j={}).x=N[0],j.y=N[1],j.x3=N[2],j.y3=N[3],j.type=d.QUADRATIC,this._contourVertices.push(j),this;if(0<h.length){g=!0;for(var T=[],R=0;R<N.length;R++)T[R]=N[R];T.isVert=!1,(p?m:h).push(T)}else a.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},a.default.prototype.vertex=function(j,A,N,C,T){var R;return this._renderer.isP3D?(R=this._renderer).vertex.apply(R,arguments):((R=[]).isVert=!0,R[0]=j,R[1]=A,R[2]=0,R[3]=0,R[4]=0,R[5]=this._renderer._getFill(),R[6]=this._renderer._getStroke(),N&&(R.moveTo=N),(p?(m.length===0&&(R.moveTo=!0),m):h).push(R)),this},a.default.prototype.normal=function(j,A,N){var C;return this._assert3d("normal"),a.default._validateParameters("normal",arguments),(C=this._renderer).normal.apply(C,arguments),this},a.default);c.default=S},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],294:[function(t,o,c){},{}],295:[function(t,o,c){t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.assign"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t=(t=t("./main"))&&t.__esModule?t:{default:t},t.default.prototype.noLoop=function(){this._loop=!1},t.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},t.default.prototype.isLooping=function(){return this._loop},t.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},t.default.prototype.pop=function(){var l=this._styles.pop();l?(this._renderer.pop(l.renderer),Object.assign(this,l.props)):console.warn("pop() was called without matching push()")},t.default.prototype.redraw=function(l){if(!this._inUserDraw&&this._setupDone){var f=parseInt(l),a=((isNaN(f)||f<1)&&(f=1),this._isGlobal?window:this);if(typeof a.draw=="function"){a.setup===void 0&&a.scale(a._pixelDensity,a._pixelDensity);for(var d=0;d<f;d++){a.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),a._renderer.isP3D&&a._renderer._update(),a._setProperty("frameCount",a.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{a.draw()}finally{this._inUserDraw=!1}this.callRegisteredHooksFor("post")}}}},t=t.default,c.default=t},{"./main":283,"core-js/modules/es.object.assign":183}],296:[function(t,o,c){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("./main"))&&t.__esModule?t:{default:t};function f(a){return function(d){if(Array.isArray(d)){for(var _=0,w=new Array(d.length);_<d.length;_++)w[_]=d[_];return w}}(a)||function(d){if(Symbol.iterator in Object(d)||Object.prototype.toString.call(d)==="[object Arguments]")return Array.from(d)}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}l.default.prototype.applyMatrix=function(){var a=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||a?(a=this._renderer).applyMatrix.apply(a,f(arguments.length<=0?void 0:arguments[0])):(a=this._renderer).applyMatrix.apply(a,arguments),this},l.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},l.default.prototype.rotate=function(a,d){return l.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(a),d),this},l.default.prototype.rotateX=function(a){return this._assert3d("rotateX"),l.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(a)),this},l.default.prototype.rotateY=function(a){return this._assert3d("rotateY"),l.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(a)),this},l.default.prototype.rotateZ=function(a){return this._assert3d("rotateZ"),l.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(a)),this},l.default.prototype.scale=function(a,d,_){var w;return l.default._validateParameters("scale",arguments),a instanceof l.default.Vector?(a=(w=a).x,d=w.y,_=w.z):Array.isArray(a)&&(a=(w=a)[0],d=w[1],_=w[2]||1),isNaN(d)?d=_=a:isNaN(_)&&(_=1),this._renderer.scale(a,d,_),this},l.default.prototype.shearX=function(a){return l.default._validateParameters("shearX",arguments),a=this._toRadians(a),this._renderer.applyMatrix(1,0,Math.tan(a),1,0,0),this},l.default.prototype.shearY=function(a){return l.default._validateParameters("shearY",arguments),a=this._toRadians(a),this._renderer.applyMatrix(1,Math.tan(a),0,1,0,0),this},l.default.prototype.translate=function(a,d,_){return l.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(a,d,_):this._renderer.translate(a,d),this},t=l.default,c.default=t},{"./main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246}],297:[function(t,o,c){function l(_){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(_)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator");var f=(t=t("../core/main"))&&t.__esModule?t:{default:t};function a(_){return function(w){if(Array.isArray(w)){for(var h=0,m=new Array(w.length);h<w.length;h++)m[h]=w[h];return m}}(_)||function(w){if(Symbol.iterator in Object(w)||Object.prototype.toString.call(w)==="[object Arguments]")return Array.from(w)}(_)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(_){return(d=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(w){return l(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":l(w)})(_)}f.default.prototype.storeItem=function(_,w){typeof _!="string"&&console.log("The argument that you passed to storeItem() - ".concat(_," is not a string.")),_.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(_," must not end with 'p5TypeID'.")),w===void 0&&console.log("You cannot store undefined variables using storeItem().");var h=d(w);switch(h){case"number":case"boolean":w=w.toString();break;case"object":w instanceof f.default.Color?h="p5.Color":w instanceof f.default.Vector&&(h="p5.Vector",w=[w.x,w.y,w.z]),w=JSON.stringify(w)}localStorage.setItem(_,w),_="".concat(_,"p5TypeID"),localStorage.setItem(_,h)},f.default.prototype.getItem=function(_){var w=localStorage.getItem(_),h=localStorage.getItem("".concat(_,"p5TypeID"));if(h===void 0)console.log("Unable to determine type of item stored under ".concat(_,"in local storage. Did you save the item with something other than setItem()?"));else if(w!==null)switch(h){case"number":w=parseFloat(w);break;case"boolean":w=w==="true";break;case"object":w=JSON.parse(w);break;case"p5.Color":w=JSON.parse(w),w=this.color.apply(this,a(w.levels));break;case"p5.Vector":w=JSON.parse(w),w=this.createVector.apply(this,a(w))}return w},f.default.prototype.clearStorage=function(){var _=this;Object.keys(localStorage).forEach(function(w){w.endsWith("p5TypeID")&&_.removeItem(w.replace("p5TypeID",""))})},f.default.prototype.removeItem=function(_){typeof _!="string"&&console.log("The argument that you passed to removeItem() - ".concat(_," is not a string.")),localStorage.removeItem(_),localStorage.removeItem("".concat(_,"p5TypeID"))}},{"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],298:[function(t,o,c){function l(g){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(g)}function f(g){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(p){return l(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":l(p)})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.object.keys"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(t=t("../core/main"))&&t.__esModule?t:{default:t};function d(g,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(p&&p.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),p&&_(g,p)}function _(g,p){return(_=Object.setPrototypeOf||function(y,S){return y.__proto__=S,y})(g,p)}function w(g){return function(){var p,y=h(g),y=(p=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(p=h(this).constructor,Reflect.construct(y,arguments,p)):y.apply(this,arguments),this);if(!p||f(p)!=="object"&&typeof p!="function"){if(y!==void 0)return y;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return p}}function h(g){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(p){return p.__proto__||Object.getPrototypeOf(p)})(g)}function m(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}function b(g,p){for(var y=0;y<p.length;y++){var S=p[y];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(g,S.key,S)}}function v(g,p,y){p&&b(g.prototype,p)}a.default.prototype.createStringDict=function(g,p){return a.default._validateParameters("createStringDict",arguments),new a.default.StringDict(g,p)},a.default.prototype.createNumberDict=function(g,p){return a.default._validateParameters("createNumberDict",arguments),new a.default.NumberDict(g,p)},a.default.TypedDict=function(){function g(p,y){return m(this,g),p instanceof Object?this.data=p:(this.data={},this.data[p]=y),this}return v(g,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(p){return this.data.hasOwnProperty(p)}},{key:"get",value:function(p){if(this.data.hasOwnProperty(p))return this.data[p];console.log("".concat(p," does not exist in this Dictionary"))}},{key:"set",value:function(p,y){this._validate(y)?this.data[p]=y:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(p){for(var y in p)this.set(y,p[y])}},{key:"create",value:function(p,y){p instanceof Object&&y===void 0?this._addObj(p):p!==void 0?this.set(p,y):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(p){if(!this.data.hasOwnProperty(p))throw new Error("".concat(p," does not exist in this Dictionary"));delete this.data[p]}},{key:"print",value:function(){for(var p in this.data)console.log("key:".concat(p," value:").concat(this.data[p]))}},{key:"saveTable",value:function(p){var y,S="";for(y in this.data)S+="".concat(y,",").concat(this.data[y],`
`);var j=new Blob([S],{type:"text/csv"});a.default.prototype.downloadFile(j,p||"mycsv","csv")}},{key:"saveJSON",value:function(p,y){a.default.prototype.saveJSON(this.data,p,y)}},{key:"_validate",value:function(p){return!0}}]),g}(),a.default.StringDict=function(){d(p,a.default.TypedDict);var g=w(p);function p(){m(this,p);for(var y=arguments.length,S=new Array(y),j=0;j<y;j++)S[j]=arguments[j];return g.call.apply(g,[this].concat(S))}return v(p,[{key:"_validate",value:function(y){return typeof y=="string"}}]),p}(),a.default.NumberDict=function(){d(p,a.default.TypedDict);var g=w(p);function p(){m(this,p);for(var y=arguments.length,S=new Array(y),j=0;j<y;j++)S[j]=arguments[j];return g.call.apply(g,[this].concat(S))}return v(p,[{key:"_validate",value:function(y){return typeof y=="number"}},{key:"add",value:function(y,S){this.data.hasOwnProperty(y)?this.data[y]+=S:console.log("The key - ".concat(y," does not exist in this dictionary."))}},{key:"sub",value:function(y,S){this.add(y,-S)}},{key:"mult",value:function(y,S){this.data.hasOwnProperty(y)?this.data[y]*=S:console.log("The key - ".concat(y," does not exist in this dictionary."))}},{key:"div",value:function(y,S){this.data.hasOwnProperty(y)?this.data[y]/=S:console.log("The key - ".concat(y," does not exist in this dictionary."))}},{key:"_valueTest",value:function(y){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var S,j=this.data[Object.keys(this.data)[0]];for(S in this.data)this.data[S]*y<j*y&&(j=this.data[S]);return j}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(y){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var S=Object.keys(this.data)[0],j=1;j<Object.keys(this.data).length;j++)Object.keys(this.data)[j]*y<S*y&&(S=Object.keys(this.data)[j]);return S}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),p}(),t=a.default.TypedDict,c.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],299:[function(t,o,c){function l(j){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(j)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=(t=t("../core/main"))&&t.__esModule?t:{default:t};function a(j,A){for(var N=0;N<A.length;N++){var C=A[N];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(j,C.key,C)}}function d(j,A,N){A&&a(j.prototype,A),N&&a(j,N)}function _(j,A){return(_=Object.setPrototypeOf||function(N,C){return N.__proto__=C,N})(j,A)}function w(j){return function(){var A,N,C=m(j);return A=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(A=m(this).constructor,Reflect.construct(C,arguments,A)):C.apply(this,arguments),C=this,!(N=A)||v(N)!=="object"&&typeof N!="function"?h(C):N}}function h(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}function m(j){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(A){return A.__proto__||Object.getPrototypeOf(A)})(j)}function b(j,A){if(!(j instanceof A))throw new TypeError("Cannot call a class as a function")}function v(j){return(v=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(A){return l(A)}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":l(A)})(j)}function g(j,A,N){return(A._userNode||document.body).appendChild(j),N=new(N?f.default.MediaElement:f.default.Element)(j,A),A._elements.push(N),N}f.default.prototype.select=function(j,A){return f.default._validateParameters("select",arguments),A=this._getContainer(A).querySelector(j),A?this._wrapElement(A):null},f.default.prototype.selectAll=function(j,A){f.default._validateParameters("selectAll",arguments);var N=[],C=this._getContainer(A).querySelectorAll(j);if(C)for(var T=0;T<C.length;T++){var R=this._wrapElement(C[T]);N.push(R)}return N},f.default.prototype._getContainer=function(j){var A=document;return typeof j=="string"?A=document.querySelector(j)||document:j instanceof f.default.Element?A=j.elt:j instanceof HTMLElement&&(A=j),A},f.default.prototype._wrapElement=function(j){var A,N=Array.prototype.slice.call(j.children);return j.tagName==="INPUT"&&j.type==="checkbox"?((A=new f.default.Element(j,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},A):j.tagName==="VIDEO"||j.tagName==="AUDIO"?new f.default.MediaElement(j,this):j.tagName==="SELECT"?this.createSelect(new f.default.Element(j,this)):0<N.length&&N.every(function(C){return C.tagName==="INPUT"||C.tagName==="LABEL"})&&(j.tagName==="DIV"||j.tagName==="SPAN")?this.createRadio(new f.default.Element(j,this)):new f.default.Element(j,this)},f.default.prototype.removeElements=function(j){f.default._validateParameters("removeElements",arguments),this._elements.filter(function(A){return!(A.elt instanceof HTMLCanvasElement)}).map(function(A){return A.remove()})},f.default.Element.prototype.changed=function(j){return f.default.Element._adjustListener("change",j,this),this},f.default.Element.prototype.input=function(j){return f.default.Element._adjustListener("input",j,this),this},f.default.prototype.createDiv=function(){var j=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",A=document.createElement("div");return A.innerHTML=j,g(A,this)},f.default.prototype.createP=function(){var j=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",A=document.createElement("p");return A.innerHTML=j,g(A,this)},f.default.prototype.createSpan=function(){var j=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",A=document.createElement("span");return A.innerHTML=j,g(A,this)},f.default.prototype.createImg=function(){f.default._validateParameters("createImg",arguments);var j,A=document.createElement("img"),N=arguments;return 1<N.length&&typeof N[1]=="string"&&(A.alt=N[1]),2<N.length&&typeof N[2]=="string"&&(A.crossOrigin=N[2]),A.src=N[0],j=g(A,this),A.addEventListener("load",function(){j.width=A.offsetWidth||A.width,j.height=A.offsetHeight||A.height;var C=N[N.length-1];typeof C=="function"&&C(j)}),j},f.default.prototype.createA=function(j,A,N){f.default._validateParameters("createA",arguments);var C=document.createElement("a");return C.href=j,C.innerHTML=A,N&&(C.target=N),g(C,this)},f.default.prototype.createSlider=function(j,A,N,C){f.default._validateParameters("createSlider",arguments);var T=document.createElement("input");return T.type="range",T.min=j,T.max=A,C===0?T.step=1e-18:C&&(T.step=C),typeof N=="number"&&(T.value=N),g(T,this)},f.default.prototype.createButton=function(j,A){f.default._validateParameters("createButton",arguments);var N=document.createElement("button");return N.innerHTML=j,A&&(N.value=A),g(N,this)},f.default.prototype.createCheckbox=function(){for(var j=arguments.length,A=new Array(j),N=0;N<j;N++)A[N]=arguments[N];f.default._validateParameters("createCheckbox",A);var C=document.createElement("div"),T=document.createElement("input"),R=(T.type="checkbox",document.createElement("label")),P=(R.appendChild(T),C.appendChild(R),g(C,this));return P.checked=function(){var k=P.elt.firstElementChild.getElementsByTagName("input")[0];if(k){if(arguments.length===0)return k.checked;k.checked=!(arguments.length<=0||!arguments[0])}return P},this.value=function(k){return P.value=k,this},A[0]&&(P.value(A[0]),(C=document.createElement("span")).innerHTML=A[0],R.appendChild(C)),A[1]&&(T.checked=!0),P},f.default.prototype.createSelect=function(){for(var j,A=arguments.length,N=new Array(A),C=0;C<A;C++)N[C]=arguments[C];f.default._validateParameters("createSelect",N);var T,R=N[0];return R instanceof f.default.Element&&R.elt instanceof HTMLSelectElement?this.elt=(j=R).elt:R instanceof HTMLSelectElement?(j=g(R,this),this.elt=R):(T=document.createElement("select"),R&&typeof R=="boolean"&&T.setAttribute("multiple","true"),j=g(T,this),this.elt=T),j.option=function(P,k){var F;if(P!==void 0){for(var D,q=0;q<this.elt.length;q+=1)if(this.elt[q].textContent===P){F=q;break}F!==void 0?k===!1?this.elt.remove(F):this.elt[F].value=k:((D=document.createElement("option")).textContent=P,D.value=k===void 0?P:k,this.elt.appendChild(D),this._pInst._elements.push(D))}},j.selected=function(P){if(P!==void 0){for(var k=0;k<this.elt.length;k+=1)this.elt[k].value.toString()===P.toString()&&(this.elt.selectedIndex=k);return this}if(this.elt.getAttribute("multiple")){var F=[],D=!0,q=!1,H=void 0;try{for(var W,Q=this.elt.selectedOptions[Symbol.iterator]();!(D=(W=Q.next()).done);D=!0){var J=W.value;F.push(J.value)}}catch(Z){q=!0,H=Z}finally{try{D||Q.return==null||Q.return()}finally{if(q)throw H}}return F}return this.elt.value},j.disable=function(P){if(typeof P=="string")for(var k=0;k<this.elt.length;k++)this.elt[k].value.toString()===P&&(this.elt[k].disabled=!0,this.elt[k].selected=!1);else this.elt.disabled=!0;return this},j.enable=function(P){if(typeof P=="string")for(var k=0;k<this.elt.length;k++)this.elt[k].value.toString()===P&&(this.elt[k].disabled=!1,this.elt[k].selected=!1);else{this.elt.disabled=!1;for(var F=0;F<this.elt.length;F++)this.elt[F].disabled=!1,this.elt[F].selected=!1}return this},j};var p=0;function y(j,P,N,C){var T=document.createElement(P),R=(typeof(N=N||"")=="string"&&(N=[N]),!0),P=!1,k=void 0;try{for(var F,D=N[Symbol.iterator]();!(R=(F=D.next()).done);R=!0){var q=F.value,H=document.createElement("source");H.setAttribute("src",q),T.appendChild(H)}}catch(Q){P=!0,k=Q}finally{try{R||D.return==null||D.return()}finally{if(P)throw k}}typeof C=="function"&&T.addEventListener("canplaythrough",function Q(){C(),T.removeEventListener("canplaythrough",Q)});var W=g(T,j,!0);return W.loadedmetadata=!1,T.addEventListener("loadedmetadata",function(){W.width=T.videoWidth,W.height=T.videoHeight,W.elt.width===0&&(W.elt.width=T.videoWidth),W.elt.height===0&&(W.elt.height=T.videoHeight),W.presetPlaybackRate&&(W.elt.playbackRate=W.presetPlaybackRate,delete W.presetPlaybackRate),W.loadedmetadata=!0}),W}f.default.prototype.createRadio=function(){function j(P){return P instanceof HTMLInputElement&&P.type==="radio"}function A(P){return P instanceof HTMLLabelElement}var N,C,T,R=arguments.length<=0?void 0:arguments[0];return R instanceof f.default.Element&&(R.elt instanceof HTMLDivElement||R.elt instanceof HTMLSpanElement)?(N=R,this.elt=R.elt):R instanceof HTMLDivElement||R instanceof HTMLSpanElement?(N=g(R,this),C=this.elt=R,typeof(arguments.length<=1?void 0:arguments[1])=="string"&&(T=arguments.length<=1?void 0:arguments[1])):(typeof R=="string"&&(T=R),C=document.createElement("div"),N=g(C,this),this.elt=C),N._name=T||"radioOption_".concat(p++),N._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(P){return j(P)||A(P)&&j(P.firstElementChild)}).map(function(P){return j(P)?P:P.firstElementChild})},N.option=function(P,k){var F,D,q,H=!0,W=!1,Q=void 0;try{for(var J,Z=N._getOptionsArray()[Symbol.iterator]();!(H=(J=Z.next()).done);H=!0){var K=J.value;if(K.value===P){F=K;break}}}catch(re){W=!0,Q=re}finally{try{H||Z.return==null||Z.return()}finally{if(W)throw Q}}return F===void 0&&((F=document.createElement("input")).setAttribute("type","radio"),F.setAttribute("value",P)),F.setAttribute("name",N._name),A(F.parentElement)?D=F.parentElement:(D=document.createElement("label")).insertAdjacentElement("afterbegin",F),D.lastElementChild instanceof HTMLSpanElement?q=D.lastElementChild:(q=document.createElement("span"),F.insertAdjacentElement("afterend",q)),q.innerHTML=k===void 0?P:k,this.elt.appendChild(D),F},N.remove=function(P){var k=!0,F=!1,D=void 0;try{for(var q,H=N._getOptionsArray()[Symbol.iterator]();!(k=(q=H.next()).done);k=!0){var W=q.value;if(W.value===P)return void(A(W.parentElement)?W.parentElement:W).remove()}}catch(Q){F=!0,D=Q}finally{try{k||H.return==null||H.return()}finally{if(F)throw D}}},N.value=function(){var P="",k=!0,F=!1,D=void 0;try{for(var q,H=N._getOptionsArray()[Symbol.iterator]();!(k=(q=H.next()).done);k=!0){var W=q.value;if(W.checked){P=W.value;break}}}catch(Q){F=!0,D=Q}finally{try{k||H.return==null||H.return()}finally{if(F)throw D}}return P},N.selected=function(P){var k=null;if(P===void 0){var F=!0,D=!1,q=void 0;try{for(var H,W=N._getOptionsArray()[Symbol.iterator]();!(F=(H=W.next()).done);F=!0){var Q=H.value;if(Q.checked){k=Q;break}}}catch(oe){D=!0,q=oe}finally{try{F||W.return==null||W.return()}finally{if(D)throw q}}}else{N._getOptionsArray().forEach(function(z){z.checked=!1,z.removeAttribute("checked")});var J=!0,D=!1,q=void 0;try{for(var Z,K=N._getOptionsArray()[Symbol.iterator]();!(J=(Z=K.next()).done);J=!0){var re=Z.value;re.value===P&&(re.setAttribute("checked",!0),re.checked=!0,k=re)}}catch(z){D=!0,q=z}finally{try{J||K.return==null||K.return()}finally{if(D)throw q}}}return k},N.disable=function(){var P=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],k=!0,F=!1,D=void 0;try{for(var q,H=N._getOptionsArray()[Symbol.iterator]();!(k=(q=H.next()).done);k=!0)q.value.setAttribute("disabled",P)}catch(W){F=!0,D=W}finally{try{k||H.return==null||H.return()}finally{if(F)throw D}}},N},f.default.prototype.createColorPicker=function(j){f.default._validateParameters("createColorPicker",arguments);var A=document.createElement("input");return A.type="color",j?j instanceof f.default.Color?A.value=j.toString("#rrggbb"):(f.default.prototype._colorMode="rgb",f.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},A.value=f.default.prototype.color(j).toString("#rrggbb")):A.value="#000000",(A=g(A,this)).color=function(){return j&&(j.mode&&(f.default.prototype._colorMode=j.mode),j.maxes&&(f.default.prototype._colorMaxes=j.maxes)),f.default.prototype.color(this.elt.value)},A},f.default.prototype.createInput=function(){var j=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",A=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",N=(f.default._validateParameters("createInput",arguments),document.createElement("input"));return N.setAttribute("value",j),N.setAttribute("type",A),g(N,this)},f.default.prototype.createFileInput=function(j){var A,N=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(f.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(A=document.createElement("input")).setAttribute("type","file"),N&&A.setAttribute("multiple",!0),A.addEventListener("change",function(C){var T=!0,R=!1,P=void 0;try{for(var k,F=C.target.files[Symbol.iterator]();!(T=(k=F.next()).done);T=!0){var D=k.value;f.default.File._load(D,j)}}catch(q){R=!0,P=q}finally{try{T||F.return==null||F.return()}finally{if(R)throw P}}},!1),g(A,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},f.default.prototype.createVideo=function(j,A){return f.default._validateParameters("createVideo",arguments),y(this,"video",j,A)},f.default.prototype.createAudio=function(j,A){return f.default._validateParameters("createAudio",arguments),y(this,"audio",j,A)},f.default.prototype.VIDEO="video",f.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(j){var A=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return A?new Promise(function(N,C){A.call(navigator,j,N,C)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),f.default.prototype.createCapture=function(){for(var j=arguments.length,A=new Array(j),N=0;N<j;N++)A[N]=arguments[N];if(f.default._validateParameters("createCapture",A),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var C,T=!0,R=!0,P=!1,k=0,F=A;k<F.length;k++){var D=F[k];D===f.default.prototype.VIDEO?R=!1:D===f.default.prototype.AUDIO?T=!1:v(D)==="object"?(D.flipped!==void 0&&(P=D.flipped,delete D.flipped),q=Object.assign({},q,D)):typeof D=="function"&&(C=D)}var q=Object.assign({},{video:T,audio:R},q),H=document.createElement("video"),W=(H.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(q).then(function(Q){try{"srcObject"in H?H.srcObject=Q:H.src=window.URL.createObjectURL(Q)}catch{H.src=Q}}).catch(function(Q){Q.name==="NotFoundError"&&f.default._friendlyError("No webcam found on this device","createCapture"),Q.name==="NotAllowedError"&&f.default._friendlyError("Access to the camera was denied","createCapture"),console.error(Q)}),g(H,this,!0));return W.loadedmetadata=!1,H.addEventListener("loadedmetadata",function(){H.play(),H.width?(W.width=H.width,W.height=H.height,P&&(W.elt.style.transform="scaleX(-1)")):(W.width=W.elt.width=H.videoWidth,W.height=W.elt.height=H.videoHeight),W.loadedmetadata=!0,C&&C(H.srcObject)}),W.flipped=P,W},f.default.prototype.createElement=function(j,A){return f.default._validateParameters("createElement",arguments),j=document.createElement(j),A!==void 0&&(j.innerHTML=A),g(j,this)},f.default.Element.prototype.addClass=function(j){return this.elt.className?this.hasClass(j)||(this.elt.className=this.elt.className+" "+j):this.elt.className=j,this},f.default.Element.prototype.removeClass=function(j){return this.elt.classList.remove(j),this},f.default.Element.prototype.hasClass=function(j){return this.elt.classList.contains(j)},f.default.Element.prototype.toggleClass=function(j){return this.elt.classList.contains(j)?this.elt.classList.remove(j):this.elt.classList.add(j),this},f.default.Element.prototype.child=function(j){return j===void 0?this.elt.childNodes:(typeof j=="string"?(j[0]==="#"&&(j=j.substring(1)),j=document.getElementById(j)):j instanceof f.default.Element&&(j=j.elt),j instanceof HTMLElement&&this.elt.appendChild(j),this)},f.default.Element.prototype.center=function(j){var A=this.elt.style.display,N=this.elt.style.display==="none",C=this.parent().style.display==="none",T={x:this.elt.offsetLeft,y:this.elt.offsetTop},R=(N&&this.show(),C&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),P=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return j==="both"||j===void 0?this.position(R/2+this.parent().offsetLeft,P/2+this.parent().offsetTop):j==="horizontal"?this.position(R/2+this.parent().offsetLeft,T.y):j==="vertical"&&this.position(T.x,P/2+this.parent().offsetTop),this.style("display",A),N&&this.hide(),C&&this.parent().hide(),this},f.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},f.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=(arguments.length<=2?void 0:arguments[2])!=="static"&&(arguments.length<=2?void 0:arguments[2])!=="fixed"&&(arguments.length<=2?void 0:arguments[2])!=="relative"&&(arguments.length<=2?void 0:arguments[2])!=="sticky"&&(arguments.length<=2?void 0:arguments[2])!=="initial"&&(arguments.length<=2?void 0:arguments[2])!=="inherit"?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},f.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var j="";return this.elt.style.transform&&(j=(j=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=j,this},f.default.Element.prototype._rotate=function(){var j="";return this.elt.style.transform&&(j=(j=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":arguments.length===2?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=j,this},f.default.Element.prototype.style=function(j,A){if((A=A instanceof f.default.Color?"rgba("+A.levels[0]+","+A.levels[1]+","+A.levels[2]+","+A.levels[3]/255+")":A)===void 0){if(j.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(j);for(var N=j.split(";"),C=0;C<N.length;C++){var T=N[C].split(":");T[0]&&T[1]&&(this.elt.style[T[0].trim()]=T[1].trim())}}else this.elt.style[j]=A,j!=="width"&&j!=="height"&&j!=="left"&&j!=="top"||(A=window.getComputedStyle(this.elt).getPropertyValue(j).replace(/[^\d.]/g,""),this[j]=Math.round(parseFloat(A,10)));return this},f.default.Element.prototype.attribute=function(j,A){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return A===void 0?this.elt.getAttribute(j):(this.elt.setAttribute(j,A),this);if(A===void 0)return this.elt.firstChild.getAttribute(j);for(var N=0;N<this.elt.childNodes.length;N++)this.elt.childNodes[N].setAttribute(j,A)},f.default.Element.prototype.removeAttribute=function(j){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var A=0;A<this.elt.childNodes.length;A++)this.elt.childNodes[A].removeAttribute(j);return this.elt.removeAttribute(j),this},f.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},f.default.Element.prototype.show=function(){return this.elt.style.display="block",this},f.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},f.default.Element.prototype.size=function(j,A){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var N=j,C=A,T=f.default.prototype.AUTO;if(N!==T||C!==T){if(N===T?N=A*this.width/this.height:C===T&&(C=j*this.height/this.width),this.elt instanceof HTMLCanvasElement){var R,P={},k=this.elt.getContext("2d");for(R in k)P[R]=k[R];for(R in this.elt.setAttribute("width",N*this._pInst._pixelDensity),this.elt.setAttribute("height",C*this._pInst._pixelDensity),this.elt.style.width=N+"px",this.elt.style.height=C+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),P)this.elt.getContext("2d")[R]=P[R]}else this.elt.style.width=N+"px",this.elt.style.height=C+"px",this.elt.width=N,this.elt.height=C;this.width=N,this.height=C,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",N),this._pInst._setProperty("height",C))}return this},f.default.Element.prototype.remove=function(){this instanceof f.default.MediaElement&&(this.stop(),(A=this.elt.srcObject)!==null&&A.getTracks().forEach(function(N){N.stop()}));var j,A=this._pInst._elements.indexOf(this);for(j in A!==-1&&this._pInst._elements.splice(A,1),this._events)this.elt.removeEventListener(j,this._events[j]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},f.default.Element.prototype.drop=function(j,A){var N;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",N=function(C){C.preventDefault()}),this.elt.addEventListener("dragleave",N)),f.default.Element._attachListener("drop",function(T){T.preventDefault(),typeof A=="function"&&A.call(this,T);var T=T.dataTransfer.files,R=!0,P=!1,k=void 0;try{for(var F,D=T[Symbol.iterator]();!(R=(F=D.next()).done);R=!0){var q=F.value;f.default.File._load(q,j)}}catch(H){P=!0,k=H}finally{try{R||D.return==null||D.return()}finally{if(P)throw k}}},this)):console.log("The File APIs are not fully supported in this browser."),this},f.default.Element.prototype.draggable=function(j){var A,N="ontouchstart"in window,C=0,T=0,R=0,P=0,k=N?"touchend":"mouseup",F=N?"touchmove":"mousemove";function D(H){var W;H=H||window.event,P=N?(W=H.changedTouches,C=R-parseInt(W[0].clientX),T=P-parseInt(W[0].clientY),R=parseInt(W[0].clientX),parseInt(W[0].clientY)):(C=R-parseInt(H.clientX),T=P-parseInt(H.clientY),R=parseInt(H.clientX),parseInt(H.clientY)),j.style.left=j.offsetLeft-C+"px",j.style.top=j.offsetTop-T+"px"}function q(){document.removeEventListener(k,q,!1),document.removeEventListener(F,D,!1)}return j===void 0?A=j=this.elt:j!==this.elt&&j.elt!==this.elt&&(j=j.elt,A=this.elt),A.addEventListener(N?"touchstart":"mousedown",function(H){{var W;H=H||window.event,P=N?(W=H.changedTouches,R=parseInt(W[0].clientX),parseInt(W[0].clientY)):(R=parseInt(H.clientX),parseInt(H.clientY))}return document.addEventListener(k,q,!1),document.addEventListener(F,D,!1),!1},!1),A.style.cursor="move",this};function S(j,A,N,C){b(this,S),this.callback=j,this.time=A,this.id=N,this.val=C}t=function(j){var A=C;if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(j&&j.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),j&&_(A,j);var N=w(C);function C(T,R){b(this,C);var P=h(R=N.call(this,T,R));return R.elt.crossOrigin="anonymous",R._prevTime=0,R._cueIDCounter=0,R._cues=[],R.pixels=[],R._pixelsState=h(R),R._pixelDensity=1,R._modified=!1,R._frameOnCanvas=-1,Object.defineProperty(P,"src",{get:function(){var k=P.elt.children[0].src,F=P.elt.src===window.location.href?"":P.elt.src;return k===window.location.href?F:k},set:function(k){for(var F=0;F<P.elt.children.length;F++)P.elt.removeChild(P.elt.children[F]);var D=document.createElement("source");D.src=k,T.appendChild(D),P.elt.src=k,P.modified=!0}}),P._onended=function(){},P.elt.onended=function(){P._onended(P)},R}return d(C,[{key:"play",value:function(){var T;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(T=this.elt.play())&&T.catch&&T.catch(function(R){R.name==="NotAllowedError"?console.error(R):console.error("Media play method encountered an unexpected error",R)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var T=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(T)},{passive:!0,once:!0})}},{key:"autoplay",value:function(T){var R=this,P=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",T),T&&!P&&(T=function(){return R._setupAutoplayFailDetection()},this.elt.readyState===4?T():this.elt.addEventListener("canplay",T,{passive:!0,once:!0})),this}},{key:"volume",value:function(T){if(T===void 0)return this.elt.volume;this.elt.volume=T}},{key:"speed",value:function(T){if(T===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=T:this.presetPlaybackRate=T}},{key:"time",value:function(T){return T===void 0?this.elt.currentTime:(this.elt.currentTime=T,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var T=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&T&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&(this.drawingContext.save(),this.drawingContext.scale(-1,1),this.drawingContext.translate(-this.canvas.width,0)),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&this.drawingContext.restore(),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var T=arguments.length,R=new Array(T),P=0;P<T;P++)R[P]=arguments[P];return f.default.Renderer2D.prototype.loadPixels.apply(this,R)}},{key:"updatePixels",value:function(T,R,P,k){return this.loadedmetadata&&(this._ensureCanvas(),f.default.Renderer2D.prototype.updatePixels.call(this,T,R,P,k)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var T=arguments.length,R=new Array(T),P=0;P<T;P++)R[P]=arguments[P];return f.default.Renderer2D.prototype.get.apply(this,R)}},{key:"_getPixel",value:function(){this.loadPixels();for(var T=arguments.length,R=new Array(T),P=0;P<T;P++)R[P]=arguments[P];return f.default.Renderer2D.prototype._getPixel.apply(this,R)}},{key:"set",value:function(T,R,P){this.loadedmetadata&&(this._ensureCanvas(),f.default.Renderer2D.prototype.set.call(this,T,R,P),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var T=arguments.length,R=new Array(T),P=0;P<T;P++)R[P]=arguments[P];f.default.prototype.copy.apply(this,R)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var T=arguments.length,R=new Array(T),P=0;P<T;P++)R[P]=arguments[P];f.default.Image.prototype.mask.apply(this,R)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(T){this._modified=T}},{key:"onended",value:function(T){return this._onended=T,this}},{key:"connect",value:function(T){var R,P;if(typeof f.default.prototype.getAudioContext=="function")R=f.default.prototype.getAudioContext(),P=f.default.soundOut.input;else try{P=(R=T.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=R.createMediaElementSource(this.elt),this.audioSourceNode.connect(P)),T?T.input?this.audioSourceNode.connect(T.input):this.audioSourceNode.connect(T):this.audioSourceNode.connect(P)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(T,F,P){var k=this._cueIDCounter++,F=new S(F,T,k,P);return this._cues.push(F),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),k}},{key:"removeCue",value:function(T){for(var R=0;R<this._cues.length;R++)this._cues[R].id===T&&(console.log(T),this._cues.splice(R,1));this._cues.length===0&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var T=this.time(),R=0;R<this._cues.length;R++){var P=this._cues[R].time,k=this._cues[R].val;this._prevTime<P&&P<=T&&this._cues[R].callback(k)}this._prevTime=T}}]),C}(f.default.Element),f.default.MediaElement=t,t=function(){function j(A,N){b(this,j),this.file=A,this._pInst=N,N=A.type.split("/"),this.type=N[0],this.subtype=N[1],this.name=A.name,this.size=A.size,this.data=void 0}return d(j,null,[{key:"_createLoader",value:function(A,N){var C=new FileReader;return C.onload=function(T){var R,P=new f.default.File(A);P.file.type==="application/json"?P.data=JSON.parse(T.target.result):P.file.type==="text/xml"?(R=new DOMParser().parseFromString(T.target.result,"text/xml"),P.data=new f.default.XML(R.documentElement)):P.data=T.target.result,N(P)},C}},{key:"_load",value:function(A,N){var C;/^text\//.test(A.type)||A.type==="application/json"?f.default.File._createLoader(A,N).readAsText(A):/^(video|audio)\//.test(A.type)?((C=new f.default.File(A)).data=URL.createObjectURL(A),N(C)):f.default.File._createLoader(A,N).readAsDataURL(A)}}]),j}(),f.default.File=t,t=f.default,c.default=t},{"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248}],300:[function(v,o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(v=v("../core/main"))&&v.__esModule?v:{default:v};l.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",l.default.prototype.accelerationX=0,l.default.prototype.accelerationY=0,l.default.prototype.accelerationZ=0,l.default.prototype.pAccelerationX=0,l.default.prototype.pAccelerationY=0,l.default.prototype.pAccelerationZ=0,l.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},l.default.prototype.rotationX=0,l.default.prototype.rotationY=0,l.default.prototype.rotationZ=0,l.default.prototype.pRotationX=0,l.default.prototype.pRotationY=0;var f=l.default.prototype.pRotationZ=0,a=0,d=0,_="clockwise",w="clockwise",h="clockwise",m=(l.default.prototype.pRotateDirectionX=void 0,l.default.prototype.pRotateDirectionY=void 0,l.default.prototype.pRotateDirectionZ=void 0,l.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},l.default.prototype.turnAxis=void 0,.5),b=30,v=(l.default.prototype.setMoveThreshold=function(g){l.default._validateParameters("setMoveThreshold",arguments),m=g},l.default.prototype.setShakeThreshold=function(g){l.default._validateParameters("setShakeThreshold",arguments),b=g},l.default.prototype._ondeviceorientation=function(g){this._updatePRotations(),this._setProperty("rotationX",this._fromDegrees(g.beta)),this._setProperty("rotationY",this._fromDegrees(g.gamma)),this._setProperty("rotationZ",this._fromDegrees(g.alpha)),this._handleMotion()},l.default.prototype._ondevicemotion=function(g){this._updatePAccelerations(),this._setProperty("accelerationX",2*g.acceleration.x),this._setProperty("accelerationY",2*g.acceleration.y),this._setProperty("accelerationZ",2*g.acceleration.z),this._handleMotion()},l.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var g,p,y,S,j,A=this._isGlobal?window:this;typeof A.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>m||Math.abs(this.accelerationY-this.pAccelerationY)>m||Math.abs(this.accelerationZ-this.pAccelerationZ)>m)&&A.deviceMoved(),typeof A.deviceTurned=="function"&&(p=this._toDegrees(this.rotationX)+180,y=this._toDegrees(this.pRotationX)+180,g=f+180,0<p-y&&p-y<270||p-y<-270?_="clockwise":(p-y<0||270<p-y)&&(_="counter-clockwise"),_!==this.pRotateDirectionX&&(g=p),90<Math.abs(p-g)&&Math.abs(p-g)<270&&(g=p,this._setProperty("turnAxis","X"),A.deviceTurned()),this.pRotateDirectionX=_,f=g-180,y=this._toDegrees(this.rotationY)+180,p=this._toDegrees(this.pRotationY)+180,g=a+180,0<y-p&&y-p<270||y-p<-270?w="clockwise":(y-p<0||270<y-this.pRotationY)&&(w="counter-clockwise"),w!==this.pRotateDirectionY&&(g=y),90<Math.abs(y-g)&&Math.abs(y-g)<270&&(g=y,this._setProperty("turnAxis","Y"),A.deviceTurned()),this.pRotateDirectionY=w,a=g-180,0<(p=this._toDegrees(this.rotationZ))-(y=this._toDegrees(this.pRotationZ))&&p-y<270||p-y<-270?h="clockwise":(p-y<0||270<p-y)&&(h="counter-clockwise"),h!==this.pRotateDirectionZ&&(d=p),90<Math.abs(p-d)&&Math.abs(p-d)<270&&(d=p,this._setProperty("turnAxis","Z"),A.deviceTurned()),this.pRotateDirectionZ=h,this._setProperty("turnAxis",void 0)),typeof A.deviceShaken=="function"&&(this.pAccelerationX!==null&&(S=Math.abs(this.accelerationX-this.pAccelerationX),j=Math.abs(this.accelerationY-this.pAccelerationY)),b<S+j&&A.deviceShaken())},l.default);c.default=v},{"../core/main":283}],301:[function(t,o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};l.default.prototype.isKeyPressed=!1,l.default.prototype.keyIsPressed=!1,l.default.prototype.key="",l.default.prototype.keyCode=0,l.default.prototype._onkeydown=function(f){var a;this._downKeys[f.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",f.which),this._downKeys[f.which]=!0,this._setProperty("key",f.key||String.fromCharCode(f.which)||f.which),typeof(a=this._isGlobal?window:this).keyPressed!="function"||f.charCode||a.keyPressed(f)===!1&&f.preventDefault())},l.default.prototype._onkeyup=function(f){this._downKeys[f.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",f.key||String.fromCharCode(f.which)||f.which),this._setProperty("keyCode",f.which);var a=this._isGlobal?window:this;typeof a.keyReleased=="function"&&a.keyReleased(f)===!1&&f.preventDefault()},l.default.prototype._onkeypress=function(f){var a;f.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",f.which),this._setProperty("key",f.key||String.fromCharCode(f.which)||f.which),typeof(a=this._isGlobal?window:this).keyTyped=="function"&&a.keyTyped(f)===!1&&f.preventDefault())},l.default.prototype._onblur=function(f){this._downKeys={}},l.default.prototype.keyIsDown=function(f){return l.default._validateParameters("keyIsDown",arguments),this._downKeys[f]||!1},l.default.prototype._areDownKeys=function(){for(var f in this._downKeys)if(this._downKeys.hasOwnProperty(f)&&this._downKeys[f]===!0)return!0;return!1},t=l.default,c.default=t},{"../core/main":283}],302:[function(t,o,c){function l(w){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(w)}function f(w){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(h){return l(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":l(h)})(w)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(a=t("../core/main"))&&a.__esModule?a:{default:a},d=function(w){if(w&&w.__esModule)return w;if(w===null||f(w)!=="object"&&typeof w!="function")return{default:w};var h=_();if(h&&h.has(w))return h.get(w);var m,b={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in w){var g;Object.prototype.hasOwnProperty.call(w,m)&&((g=v?Object.getOwnPropertyDescriptor(w,m):null)&&(g.get||g.set)?Object.defineProperty(b,m,g):b[m]=w[m])}return b.default=w,h&&h.set(w,b),b}(t("../core/constants"));function _(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,_=function(){return w},w)}a.default.prototype.movedX=0,a.default.prototype.movedY=0,a.default.prototype._hasMouseInteracted=!1,a.default.prototype.mouseX=0,a.default.prototype.mouseY=0,a.default.prototype.pmouseX=0,a.default.prototype.pmouseY=0,a.default.prototype.winMouseX=0,a.default.prototype.winMouseY=0,a.default.prototype.pwinMouseX=0,a.default.prototype.pwinMouseY=0,a.default.prototype.mouseButton=0,a.default.prototype.mouseIsPressed=!1,a.default.prototype._updateNextMouseCoords=function(w){var h,m,b,v,g;this._curElement!==null&&(!w.touches||0<w.touches.length)&&(h=this._curElement.elt,m=this.width,b=this.height,(v=w)&&!v.clientX&&(v.touches?v=v.touches[0]:v.changedTouches&&(v=v.changedTouches[0])),g=h.getBoundingClientRect(),m=h.scrollWidth/m||1,h=h.scrollHeight/b||1,b={x:(v.clientX-g.left)/m,y:(v.clientY-g.top)/h,winX:v.clientX,winY:v.clientY,id:v.identifier},this._setProperty("movedX",w.movementX),this._setProperty("movedY",w.movementY),this._setProperty("mouseX",b.x),this._setProperty("mouseY",b.y),this._setProperty("winMouseX",b.winX),this._setProperty("winMouseY",b.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},a.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},a.default.prototype._setMouseButton=function(w){w.button===1?this._setProperty("mouseButton",d.CENTER):w.button===2?this._setProperty("mouseButton",d.RIGHT):this._setProperty("mouseButton",d.LEFT)},a.default.prototype._onmousemove=function(w){var h=this._isGlobal?window:this;this._updateNextMouseCoords(w),this.mouseIsPressed?typeof h.mouseDragged=="function"?h.mouseDragged(w)===!1&&w.preventDefault():typeof h.touchMoved=="function"&&h.touchMoved(w)===!1&&w.preventDefault():typeof h.mouseMoved=="function"&&h.mouseMoved(w)===!1&&w.preventDefault()},a.default.prototype._onmousedown=function(w){var h=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(w),this._updateNextMouseCoords(w),this.touchstart||(typeof h.mousePressed=="function"?h.mousePressed(w)===!1&&w.preventDefault():typeof h.touchStarted=="function"&&h.touchStarted(w)===!1&&w.preventDefault(),this.touchstart=!1)},a.default.prototype._onmouseup=function(w){var h=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),this.touchend||(typeof h.mouseReleased=="function"?h.mouseReleased(w)===!1&&w.preventDefault():typeof h.touchEnded=="function"&&h.touchEnded(w)===!1&&w.preventDefault(),this.touchend=!1)},a.default.prototype._ondragend=a.default.prototype._onmouseup,a.default.prototype._ondragover=a.default.prototype._onmousemove,a.default.prototype._onclick=function(w){var h=this._isGlobal?window:this;typeof h.mouseClicked=="function"&&h.mouseClicked(w)===!1&&w.preventDefault()},a.default.prototype._ondblclick=function(w){var h=this._isGlobal?window:this;typeof h.doubleClicked=="function"&&h.doubleClicked(w)===!1&&w.preventDefault()},a.default.prototype._mouseWheelDeltaY=0,a.default.prototype._pmouseWheelDeltaY=0,a.default.prototype._onwheel=function(w){var h=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",w.deltaY),typeof h.mouseWheel=="function"&&(w.delta=w.deltaY,h.mouseWheel(w)===!1&&w.preventDefault())},a.default.prototype.requestPointerLock=function(){var w=this._curElement.elt;return w.requestPointerLock=w.requestPointerLock||w.mozRequestPointerLock,w.requestPointerLock?(w.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},a.default.prototype.exitPointerLock=function(){document.exitPointerLock()},t=a.default,c.default=t},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],303:[function(t,o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.touches=[],t.default.prototype._updateTouchCoords=function(l){if(this._curElement!==null){for(var f=[],a=0;a<l.touches.length;a++)f[a]=function(g,v,p,h){var m=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,b=g.getBoundingClientRect(),v=g.scrollWidth/v||1,g=g.scrollHeight/p||1,p=h.touches[m]||h.changedTouches[m];return{x:(p.clientX-b.left)/v,y:(p.clientY-b.top)/g,winX:p.clientX,winY:p.clientY,id:p.identifier}}(this._curElement.elt,this.width,this.height,l,a);this._setProperty("touches",f)}},t.default.prototype._ontouchstart=function(l){var f=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(l),this._updateNextMouseCoords(l),this._updateMouseCoords(),typeof f.touchStarted=="function"&&(f.touchStarted(l)===!1&&l.preventDefault(),this.touchstart=!0)},t.default.prototype._ontouchmove=function(l){var f=this._isGlobal?window:this;this._updateTouchCoords(l),this._updateNextMouseCoords(l),typeof f.touchMoved=="function"?f.touchMoved(l)===!1&&l.preventDefault():typeof f.mouseDragged=="function"&&f.mouseDragged(l)===!1&&l.preventDefault()},t.default.prototype._ontouchend=function(l){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(l),this._updateNextMouseCoords(l);var f=this._isGlobal?window:this;typeof f.touchEnded=="function"&&(f.touchEnded(l)===!1&&l.preventDefault(),this.touchend=!0)},t=t.default,c.default=t},{"../core/main":283}],304:[function(t,o,c){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l,f,a,d,_={_toPixels:function(w){var h,m;return w instanceof ImageData?w.data:w.getContext("2d")?w.getContext("2d").getImageData(0,0,w.width,w.height).data:w.getContext("webgl")?(m=(h=w.getContext("webgl")).drawingBufferWidth*h.drawingBufferHeight*4,m=new Uint8Array(m),h.readPixels(0,0,w.width,w.height,h.RGBA,h.UNSIGNED_BYTE,m),m):void 0},_getARGB:function(w,h){return h*=4,w[3+h]<<24&4278190080|w[h]<<16&16711680|w[1+h]<<8&65280|255&w[2+h]},_setPixels:function(w,h){for(var m,b=0,v=w.length;b<v;b++)w[0+(m=4*b)]=(16711680&h[b])>>>16,w[1+m]=(65280&h[b])>>>8,w[2+m]=255&h[b],w[3+m]=(4278190080&h[b])>>>24},_toImageData:function(w){return w instanceof ImageData?w:w.getContext("2d").getImageData(0,0,w.width,w.height)},_createImageData:function(w,h){return _._tmpCanvas=document.createElement("canvas"),_._tmpCtx=_._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(w,h)},apply:function(w,g,m){var b=w.getContext("2d"),v=b.getImageData(0,0,w.width,w.height),g=g(v,m);g instanceof ImageData?b.putImageData(g,0,0,0,0,w.width,w.height):b.putImageData(v,0,0,0,0,w.width,w.height)},threshold:function(w){for(var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:.5,m=_._toPixels(w),b=Math.floor(255*h),v=0;v<m.length;v+=4){var g=void 0,g=b<=.2126*m[v]+.7152*m[v+1]+.0722*m[v+2]?255:0;m[v]=m[v+1]=m[v+2]=g}},gray:function(w){for(var h=_._toPixels(w),m=0;m<h.length;m+=4){var b=h[m],v=h[m+1],g=h[m+2];h[m]=h[m+1]=h[m+2]=.2126*b+.7152*v+.0722*g}},opaque:function(w){for(var h=_._toPixels(w),m=0;m<h.length;m+=4)h[m+3]=255;return h},invert:function(w){for(var h=_._toPixels(w),m=0;m<h.length;m+=4)h[m]=255-h[m],h[m+1]=255-h[m+1],h[m+2]=255-h[m+2]},posterize:function(w){var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:4,m=_._toPixels(w);if(h<2||255<h)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var b=h-1,v=0;v<m.length;v+=4){var g=m[v],p=m[v+1],y=m[v+2];m[v]=255*(g*h>>8)/b,m[v+1]=255*(p*h>>8)/b,m[v+2]=255*(y*h>>8)/b}},dilate:function(w){for(var h,m,b,v,g,p,y,S,j,A=_._toPixels(w),N=0,C=A.length?A.length/4:0,T=new Int32Array(C);N<C;)for(m=(h=N)+w.width;N<m;)v=b=_._getARGB(A,N),(j=N-1)<h&&(j=N),m<=(S=N+1)&&(S=N),(g=N-w.width)<0&&(g=0),C<=(p=N+w.width)&&(p=N),g=_._getARGB(A,g),j=_._getARGB(A,j),p=_._getARGB(A,p),(v=77*(v>>16&255)+151*(v>>8&255)+28*(255&v))<(y=77*(j>>16&255)+151*(j>>8&255)+28*(255&j))&&(b=j,v=y),v<(y=77*((j=_._getARGB(A,S))>>16&255)+151*(j>>8&255)+28*(255&j))&&(b=j,v=y),v<(S=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))&&(b=g,v=S),v<(j=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))&&(b=p,v=j),T[N++]=b;_._setPixels(A,T)},erode:function(w){for(var h,m,b,v,g,p,y,S,j,A=_._toPixels(w),N=0,C=A.length?A.length/4:0,T=new Int32Array(C);N<C;)for(m=(h=N)+w.width;N<m;)v=b=_._getARGB(A,N),(j=N-1)<h&&(j=N),m<=(S=N+1)&&(S=N),(g=N-w.width)<0&&(g=0),C<=(p=N+w.width)&&(p=N),g=_._getARGB(A,g),j=_._getARGB(A,j),p=_._getARGB(A,p),(y=77*(j>>16&255)+151*(j>>8&255)+28*(255&j))<(v=77*(v>>16&255)+151*(v>>8&255)+28*(255&v))&&(b=j,v=y),(y=77*((j=_._getARGB(A,S))>>16&255)+151*(j>>8&255)+28*(255&j))<v&&(b=j,v=y),(S=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))<v&&(b=g,v=S),(j=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))<v&&(b=p,v=j),T[N++]=b;_._setPixels(A,T)},blur:function(w,h){for(var m,b,v,g,p,y,S,j,A,N,C=_._toPixels(w),T=w.width,R=w.height,P=T*R,k=new Int32Array(P),F=0;F<P;F++)k[F]=_._getARGB(C,F);var D,q,H,W,Q,J,Z,K,re=new Int32Array(P),oe=new Int32Array(P),M=new Int32Array(P),z=new Int32Array(P),$=0,ee=3.5*h|0;if(l!==(ee=ee<1?1:ee<248?ee:248)){f=1+(l=ee)<<1,a=new Int32Array(f),d=new Array(f);for(var le=0;le<f;le++)d[le]=new Int32Array(256);for(var ce=1,me=ee-1;ce<ee;ce++){a[ee+ce]=a[me]=J=me*me,Z=d[ee+ce],K=d[me--];for(var ve=0;ve<256;ve++)Z[ve]=K[ve]=J*ve}Q=a[ee]=ee*ee,Z=d[ee];for(var ge=0;ge<256;ge++)Z[ge]=Q*ge}for(q=0;q<R;q++){for(D=0;D<T;D++){if(g=v=b=p=m=0,(y=D-l)<0)N=-y,y=0;else{if(T<=y)break;N=0}for(H=N;H<f&&!(T<=y);H++){var we=k[y+$];W=d[H],p+=W[(-16777216&we)>>>24],b+=W[(16711680&we)>>16],v+=W[(65280&we)>>8],g+=W[255&we],m+=a[H],y++}re[S=$+D]=p/m,oe[S]=b/m,M[S]=v/m,z[S]=g/m}$+=T}for(A=(j=-l)*T,q=$=0;q<R;q++){for(D=0;D<T;D++){if(g=v=b=p=m=0,j<0)N=S=-j,y=D;else{if(R<=j)break;N=0,S=j,y=D+A}for(H=N;H<f&&!(R<=S);H++)W=d[H],p+=W[re[y]],b+=W[oe[y]],v+=W[M[y]],g+=W[z[y]],m+=a[H],S++,y+=T;k[D+$]=p/m<<24|b/m<<16|v/m<<8|g/m}$+=T,A+=T,j++}_._setPixels(C,k)}};c.default=_},{"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int32-array":225,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242}],305:[function(t,o,c){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=a(t("../core/main")),f=a(t("omggif"));function a(_){return _&&_.__esModule?_:{default:_}}function d(_){return function(w){if(Array.isArray(w)){for(var h=0,m=new Array(w.length);h<w.length;h++)m[h]=w[h];return m}}(_)||function(w){if(Symbol.iterator in Object(w)||Object.prototype.toString.call(w)==="[object Arguments]")return Array.from(w)}(_)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}l.default.prototype.createImage=function(_,w){return l.default._validateParameters("createImage",arguments),new l.default.Image(_,w)},l.default.prototype.saveCanvas=function(){for(var _,w,h,m,b,v,g=arguments.length,p=new Array(g),y=0;y<g;y++)p[y]=arguments[y];switch(l.default._validateParameters("saveCanvas",p),p[0]instanceof HTMLCanvasElement?(_=p[0],p.shift()):p[0]instanceof l.default.Element?(_=p[0].elt,p.shift()):p[0]instanceof l.default.Framebuffer?(m=p[0],(b=this.createGraphics(m.width,m.height)).pixelDensity(pixelDensity()),m.loadPixels(),b.loadPixels(),b.pixels.set(m.pixels),b.updatePixels(),_=b.elt,p.shift()):_=this._curElement&&this._curElement.elt,1<=p.length&&(w=p[0]),h=(h=2<=p.length?p[1]:h)||l.default.prototype._checkFileExtension(w,h)[1]||"png"){default:v="image/png";break;case"webp":v="image/webp";break;case"jpeg":case"jpg":v="image/jpeg"}_.toBlob(function(S){l.default.prototype.downloadFile(S,w,h),b&&b.remove()},v)},l.default.prototype.encodeAndDownloadGif=function(_,w){for(var h=_.gifProperties,m=h.loopLimit,b=(m===1?m=null:m===null&&(m=0),new Uint8Array(_.width*_.height*h.numFrames)),v=[],g={},p=0;p<h.numFrames;p++){for(var y=new Set,S=h.frames[p].image.data,j=S.length,A=new Uint32Array(_.width*_.height),N=0,C=0;N<j;N+=4,C++){var T=S[N+0]<<16|S[N+1]<<8|S[N+2]<<0;y.add(T),A[C]=T}var R=d(y).sort().toString();g[R]===void 0?g[R]={freq:1,frames:[p]}:(g[R].freq+=1,g[R].frames.push(p)),v.push(A)}for(var F=[],P=Object.keys(g).sort(function(M,z){return g[z].freq-g[M].freq}),k=P[0].split(",").map(function(M){return parseInt(M)}),F=F.concat(g[k].frames),D=new Set(k),q=1;q<P.length;q++){var H=P[q].split(",").map(function(M){return parseInt(M)}).filter(function(M){return!D.has(M)});if(k.length+H.length<=256){for(var W=0;W<H.length;W++)k.push(H[W]),D.add(H[W]);F=F.concat(g[P[q]].frames)}}F=new Set(F);for(var Q={},J=0;J<k.length;J++)Q[k[J]]||(Q[k[J]]=J);for(var Z=1;Z<k.length;)Z<<=1;k.length=Z;for(var m={loop:m,palette:new Uint32Array(k)},K=new f.default.GifWriter(b,_.width,_.height,m),re={},oe=0;oe<h.numFrames;oe++)(function(z){var $=!F.has(z),ee=$?[]:k,le=new Uint8Array(_.width*_.height),ce={},me=new Set,ve=(v[z].forEach(function(Se,Ce){$?(ce[Se]===void 0&&(ce[Se]=ee.length,ee.push(Se)),le[Ce]=ce[Se]):le[Ce]=Q[Se],0<z&&v[z-1][Ce]!==Se&&me.add(Se)}),{}),ge=ee.filter(function(Se){return!me.has(Se)});if(0<ge.length){var ge=ge[0],we=($?ce:Q)[ge];if(0<z){for(var xe=0;xe<v[z].length;xe++)v[z-1][xe]===v[z][xe]&&(le[xe]=we);ve.transparent=we,re.frameOpts.disposal=1}}if(ve.delay=h.frames[z].delay/10,$){for(var fe=1;fe<ee.length;)fe<<=1;ee.length=fe,ve.palette=new Uint32Array(ee)}0<z&&K.addFrame(0,0,_.width,_.height,re.pixelPaletteIndex,re.frameOpts),re={pixelPaletteIndex:le,frameOpts:ve}})(oe);re.frameOpts.disposal=1,K.addFrame(0,0,_.width,_.height,re.pixelPaletteIndex,re.frameOpts),m=new Blob([b.slice(0,K.end())],{type:"image/gif"}),l.default.prototype.downloadFile(m,w,"gif")},l.default.prototype.saveFrames=function(_,w,h,v,b){l.default._validateParameters("saveFrames",arguments),h=l.default.prototype.constrain(h=h||3,0,15),h*=1e3;var v=l.default.prototype.constrain(v||15,0,22),g=0,p=l.default.prototype._makeFrame,y=this._curElement.elt,S=[],j=setInterval(function(){S.push(p(_+g,w,y)),g++},1e3/v);setTimeout(function(){if(clearInterval(j),b)b(S);else for(var A=0,N=S;A<N.length;A++){var C=N[A];l.default.prototype.downloadFile(C.imageData,C.filename,C.ext)}S=[]},.01+h)},l.default.prototype._makeFrame=function(_,w,b){var m,b=this?this._curElement.elt:b;if(w)switch(w.toLowerCase()){case"png":m="image/png";break;case"jpeg":case"jpg":m="image/jpeg";break;default:m="image/png"}else w="png",m="image/png";var b=(b=b.toDataURL(m)).replace(m,"image/octet-stream"),v={};return v.imageData=b,v.filename=_,v.ext=w,v},t=l.default,c.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,omggif:256}],306:[function(t,o,c){function l(y){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(y)}function f(y){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(S){return l(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":l(S)})(y)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t("regenerator-runtime/runtime");var a=b(t("../core/main")),d=b(t("../core/helpers")),_=function(y){if(y&&y.__esModule)return y;if(y===null||f(y)!=="object"&&typeof y!="function")return{default:y};var S=m();if(S&&S.has(y))return S.get(y);var j,A={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(j in y){var C;Object.prototype.hasOwnProperty.call(y,j)&&((C=N?Object.getOwnPropertyDescriptor(y,j):null)&&(C.get||C.set)?Object.defineProperty(A,j,C):A[j]=y[j])}return A.default=y,S&&S.set(y,A),A}(t("../core/constants")),w=b(t("omggif")),h=t("gifenc");function m(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,m=function(){return y},y)}function b(y){return y&&y.__esModule?y:{default:y}}function v(y,S,j,A,N,C,T){try{var R=y[C](T),P=R.value}catch(k){return void j(k)}R.done?S(P):Promise.resolve(P).then(A,N)}function g(y,S,j,A,N,C,T,R,P,k,F){var D,q,H,W,Q,J,Z,K,re;return y===_.COVER&&(D=S,H=j,Z=C,K=T,J=R,re=P,q=k,W=F,Q=Math.max(Z/q,K/W),Z/=Q,K/=Q,Q=J,J=re,D===_.CENTER?Q+=(q-Z)/2:D===_.RIGHT&&(Q+=q-Z),H===_.CENTER?J+=(W-K)/2:H===_.BOTTOM&&(J+=W-K),R=(re={x:Q,y:J,w:Z,h:K}).x,P=re.y,k=re.w,F=re.h),y===_.CONTAIN&&(D=S,q=j,H=A,W=N,Q=C,J=T,Z=k,K=F,re=Math.max(Z/Q,K/J),Z/=re,K/=re,re=H,H=W,D===_.CENTER?re+=(Q-Z)/2:D===_.RIGHT&&(re+=Q-Z),q===_.CENTER?H+=(J-K)/2:q===_.BOTTOM&&(H+=J-K),A=(y={x:re,y:H,w:Z,h:K}).x,N=y.y,C=y.w,T=y.h),{sx:R,sy:P,sw:k,sh:F,dx:A,dy:N,dw:C,dh:T}}function p(y,S){return 0<y&&y<S?y:S}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),a.default.prototype.loadImage=function(y,S,j){a.default._validateParameters("loadImage",arguments);var A=new a.default.Image(1,1,this),N=this,C=new Request(y,{method:"GET",mode:"cors"});return fetch(y,C).then(function(T){var R,P=T.headers.get("content-type");P===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),P&&P.includes("image/gif")?T.arrayBuffer().then(function(k){if(k){for(var k=new Uint8Array(k),F=A,D=S,q=j,H=(function($){N._decrementPreload()}).bind(N),W=new w.default.GifReader(k),Q=(F.width=F.canvas.width=W.width,F.height=F.canvas.height=W.height,[]),J=W.numFrames(),Z=new Uint8ClampedArray(F.width*F.height*4),K=0;K<J;K++){var re=W.frameInfo(K),oe=F.drawingContext.getImageData(0,0,F.width,F.height),M=(Z=oe.data.slice(),function($,ee){try{ee.decodeAndBlitFrameRGBA($,Z)}catch(le){a.default._friendlyFileLoadError(8,F.src),typeof q=="function"?q(le):console.error(le)}}(K,W),new ImageData(Z,F.width,F.height)),M=(F.drawingContext.putImageData(M,0,0),re.delay);M===0&&(M=10),Q.push({image:F.drawingContext.getImageData(0,0,F.width,F.height),delay:10*M}),re.disposal===2?F.drawingContext.clearRect(re.x,re.y,re.width,re.height):re.disposal===3&&F.drawingContext.putImageData(oe,0,0,re.x,re.y,re.width,re.height)}(k=W.loopCount())===null?k=1:k===0&&(k=null),F.drawingContext.putImageData(Q[0].image,0,0),1<Q.length&&(F.gifProperties={displayIndex:0,loopLimit:k,loopCount:0,frames:Q,numFrames:J,playing:!0,timeDisplayed:0,lastChangeTime:0}),typeof D=="function"&&D(F),H()}},function(k){typeof j=="function"?(j(k),N._decrementPreload()):console.error(k)}):((R=new Image).onload=function(){A.width=A.canvas.width=R.width,A.height=A.canvas.height=R.height,A.drawingContext.drawImage(R,0,0),A.modified=!0,typeof S=="function"&&S(A),N._decrementPreload()},R.onerror=function(k){a.default._friendlyFileLoadError(0,R.src),typeof j=="function"?(j(k),N._decrementPreload()):console.error(k)},y.indexOf("data:image/")!==0&&(R.crossOrigin="Anonymous"),R.src=y),A.modified=!0}).catch(function(T){a.default._friendlyFileLoadError(0,y),typeof j=="function"?(j(T),N._decrementPreload()):console.error(T)}),A},a.default.prototype.saveGif=function(){y=regeneratorRuntime.mark(function j(A,N){var C,T,R,P,k,F,D,q,H,W,Q,J,Z,K,re,oe,M,z,$,ee,le,ce,me,ve,ge,we,xe=arguments;return regeneratorRuntime.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(C=2<xe.length&&xe[2]!==void 0?xe[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},typeof A!="string")throw TypeError("fileName parameter must be a string");fe.next=3;break;case 3:if(typeof N!="number")throw TypeError("Duration parameter must be a number");fe.next=5;break;case 5:if(T=C&&C.delay||0,R=C&&C.units||"seconds",P=C&&C.silent||!1,k=C&&C.notificationDuration||0,F=C&&C.notificationID||"progressBar",typeof T!="number")throw TypeError("Delay parameter must be a number");fe.next=12;break;case 12:if(R!=="seconds"&&R!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');fe.next=14;break;case 14:if(typeof P!="boolean")throw TypeError("Silent parameter must be a boolean");fe.next=16;break;case 16:if(typeof k!="number")throw TypeError("Notification duration parameter must be a number");fe.next=18;break;case 18:if(typeof F!="string")throw TypeError("Notification ID parameter must be a string");fe.next=20;break;case 20:return this._recording=!0,W=this._targetFrameRate,D=(D=1/(W=W!==1/0&&W!==void 0&&W!==0?W:60)*1e3)<20?20:D,H=(q=R==="seconds"?N*W:N)+(W=R==="seconds"?T*W:T),W=W,this.frameCount=W,Q=this._pixelDensity,this.pixelDensity(1),J=[],document.getElementById(F)!==null&&document.getElementById(F).remove(),P||((Z=this.createP("")).id(F),Z.style("font-size","16px"),Z.style("font-family","Montserrat"),Z.style("background-color","#ffffffa0"),Z.style("padding","8px"),Z.style("border-radius","10px"),Z.position(0,0)),this._renderer instanceof a.default.RendererGL&&(re=this.drawingContext,K=new Uint8Array(re.drawingBufferWidth*re.drawingBufferHeight*4)),this.noLoop(),fe.next=39,Promise.resolve();case 39:if(W<H)return this.redraw(),ve=void 0,ve=this._renderer instanceof a.default.RendererGL?(K=new Uint8Array(re.drawingBufferWidth*re.drawingBufferHeight*4),re.readPixels(0,0,re.drawingBufferWidth,re.drawingBufferHeight,re.RGBA,re.UNSIGNED_BYTE,K),function(Se,Ce,Ne){for(var Oe=parseInt(Ne/2),Me=4*Ce,Ue=new Uint8Array(4*Ce),et=0;et<Oe;++et){var Fe=et*Me,mt=(Ne-et-1)*Me;Ue.set(Se.subarray(Fe,Fe+Me)),Se.copyWithin(Fe,mt,mt+Me),Se.set(Ue,mt)}return Se}(K,this.width,this.height)):this.drawingContext.getImageData(0,0,this.width,this.height).data,J.push(ve),W++,P||Z.html("Saved frame <b>"+J.length.toString()+"</b> out of "+q.toString()),fe.next=48,new Promise(function(Se){return setTimeout(Se,0)});fe.next=50;break;case 48:fe.next=39;break;case 50:P||Z.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(Q),oe=(0,h.GIFEncoder)(),M=function(Se){for(var Ce=new Uint8Array(Se.length*Se[0].length),Ne=0;Ne<Se.length;Ne++)Ce.set(Se[Ne],Ne*Se[0].length);var Oe=(0,h.quantize)(Ce,256,{format:"rgba4444",oneBitAlpha:!0});return Oe.length===256?Oe[Oe.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:Oe.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),Oe}(J),z={},$=function(Se){for(var Ce=Se.length/4,Ne=new Uint8Array(Ce),Oe=0;Oe<Ce;Oe++){var Me=Se[4*Oe]<<24|Se[4*Oe+1]<<16|Se[4*Oe+2]<<8|Se[4*Oe+3];z[Me]===void 0&&(z[Me]=(0,h.nearestColorIndex)(M,Se.slice(4*Oe,4*(Oe+1)))),Ne[Oe]=z[Me]}return Ne},ee=M.length-1,le=[],ce=0;case 60:if(!(ce<J.length)){fe.next=71;break}if(me=$(J[ce]),ve=me.slice(),ce===0)oe.writeFrame(me,this.width,this.height,{palette:M,delay:D,dispose:1});else{for(ge=0;ge<me.length;ge++)me[ge]===le[ge]&&(me[ge]=ee);oe.writeFrame(me,this.width,this.height,{delay:D,transparent:!0,transparentIndex:ee,dispose:1})}return le=ve,P||Z.html("Rendered frame <b>"+ce.toString()+"</b> out of "+q.toString()),fe.next=68,new Promise(function(Se){return setTimeout(Se,0)});case 68:ce++,fe.next=60;break;case 71:oe.finish(),we=oe.bytesView(),we=new Blob([we],{type:"image/gif"}),J=[],this._recording=!1,this.loop(),P||(Z.html("Done. Downloading your gif!"),0<k&&setTimeout(function(){return Z.remove()},1e3*k)),a.default.prototype.downloadFile(we,A,"gif");case 80:case"end":return fe.stop()}},j,this)});var y,S=function(){var j=this,A=arguments;return new Promise(function(N,C){var T=y.apply(j,A);function R(k){v(T,N,C,R,P,"next",k)}function P(k){v(T,N,C,R,P,"throw",k)}R(void 0)})};return function(j,A){return S.apply(this,arguments)}}(),a.default.prototype.image=function(y,S,j,A,W,Q,J,Z,re,k,F,D){a.default._validateParameters("image",arguments);var K=y.width,q=y.height,H=(D=D||_.CENTER,F=F||_.CENTER,y.elt&&(K=K!==void 0?K:y.elt.width,q=q!==void 0?q:y.elt.height),y.elt&&y.elt.videoWidth&&!y.canvas&&(K=K!==void 0?K:y.elt.videoWidth,q=q!==void 0?q:y.elt.videoHeight),A||K),W=W||q,Q=Q||0,J=J||0,Z=p(Z!==void 0?Z:K,K),K=p(re!==void 0?re:q,q),re=1;y.elt&&!y.canvas&&y.elt.style.width&&(re=y.elt.videoWidth&&!A?y.elt.videoWidth:y.elt.width,re/=parseInt(y.elt.style.width,10)),Q*=re,J*=re,K*=re,Z*=re,q=g(k,F,D,(q=d.default.modeAdjust(S,j,H,W,this._renderer._imageMode)).x,q.y,q.w,q.h,Q,J,Z,K),this._renderer.image(y,q.sx,q.sy,q.sw,q.sh,q.dx,q.dy,q.dw,q.dh)},a.default.prototype.tint=function(){for(var y=arguments.length,S=new Array(y),j=0;j<y;j++)S[j]=arguments[j];a.default._validateParameters("tint",S);var A=this.color.apply(this,S);this._renderer._tint=A.levels},a.default.prototype.noTint=function(){this._renderer._tint=null},a.default.prototype._getTintedImageCanvas=a.default.Renderer2D.prototype._getTintedImageCanvas,a.default.prototype.imageMode=function(y){a.default._validateParameters("imageMode",arguments),y!==_.CORNER&&y!==_.CORNERS&&y!==_.CENTER||(this._renderer._imageMode=y)},t=a.default,c.default=t},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/helpers":279,"../core/main":283,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,gifenc:253,omggif:256,"regenerator-runtime/runtime":260}],307:[function(t,o,c){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=a(t("../core/main")),f=a(t("./filters"));function a(_){return _&&_.__esModule?_:{default:_}}function d(_,w){for(var h=0;h<w.length;h++){var m=w[h];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(_,m.key,m)}}l.default.Image=function(){function _(m,b){if(!(this instanceof _))throw new TypeError("Cannot call a class as a function");this.width=m,this.height=b,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var w,h;return w=_,(h=[{key:"pixelDensity",value:function(m){return m!==void 0?(m<=0&&(l.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),m=1),this._pixelDensity=m,this.width/=m,this.height/=m,this):this._pixelDensity}},{key:"_animateGif",value:function(g){var b,v=this.gifProperties,g=g._lastRealFrameTime||window.performance.now();v.lastChangeTime===0&&(v.lastChangeTime=g),v.playing&&(v.timeDisplayed=g-v.lastChangeTime,b=v.frames[v.displayIndex].delay,v.timeDisplayed>=b&&(b=Math.floor(v.timeDisplayed/b),v.timeDisplayed=0,v.lastChangeTime=g,v.displayIndex+=b,v.loopCount=Math.floor(v.displayIndex/v.numFrames),v.loopLimit!==null&&v.loopCount>=v.loopLimit?v.playing=!1:(g=v.displayIndex%v.numFrames,this.drawingContext.putImageData(v.frames[g].image,0,0),v.displayIndex=g,this.setModified(!0))))}},{key:"_setProperty",value:function(m,b){this[m]=b,this.setModified(!0)}},{key:"loadPixels",value:function(){l.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(m,b,v,g){l.default.Renderer2D.prototype.updatePixels.call(this,m,b,v,g),this.setModified(!0)}},{key:"get",value:function(m,b,v,g){return l.default._validateParameters("p5.Image.get",arguments),l.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var m=arguments.length,b=new Array(m),v=0;v<m;v++)b[v]=arguments[v];return l.default.Renderer2D.prototype._getPixel.apply(this,b)}},{key:"set",value:function(m,b,v){l.default.Renderer2D.prototype.set.call(this,m,b,v),this.setModified(!0)}},{key:"resize",value:function(m,b){m===0&&b===0?(m=this.canvas.width,b=this.canvas.height):m===0?m=this.canvas.width*b/this.canvas.height:b===0&&(b=this.canvas.height*m/this.canvas.width),m=Math.floor(m),b=Math.floor(b);var v=document.createElement("canvas");if(v.width=m,v.height=b,this.gifProperties)for(var g=this.gifProperties,p=0;p<g.numFrames;p++){for(var y=this.drawingContext.createImageData(m,b),S=(T=T=C=N=A=void 0,g.frames[p].image),j=y,A=0,N=0;N<j.height;N++)for(var C=0;C<j.width;C++){var T=Math.floor(C*S.width/j.width),T=4*(Math.floor(N*S.height/j.height)*S.width+T);j.data[A++]=S.data[T++],j.data[A++]=S.data[T++],j.data[A++]=S.data[T++],j.data[A++]=S.data[+T]}g.frames[p].image=y}v.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,v.width,v.height),this.canvas.width=this.width=m,this.canvas.height=this.height=b,this.drawingContext.drawImage(v,0,0,m,b,0,0,m,b),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var m=arguments.length,b=new Array(m),v=0;v<m;v++)b[v]=arguments[v];l.default.prototype.copy.apply(this,b)}},{key:"mask",value:function(m){var b=this.drawingContext.globalCompositeOperation,v=this._pixelDensity,g=1,p=[m=m===void 0?this:m,0,0,(g=m instanceof l.default.Renderer?m._pInst._pixelDensity:g)*m.width,g*m.height,0,0,v*this.width,v*this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var y=0;y<this.gifProperties.frames.length;y++)this.drawingContext.putImageData(this.gifProperties.frames[y].image,0,0),this.copy.apply(this,p),this.gifProperties.frames[y].image=this.drawingContext.getImageData(0,0,v*this.width,v*this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,p);this.drawingContext.globalCompositeOperation=b,this.setModified(!0)}},{key:"filter",value:function(m,b){f.default.apply(this.canvas,f.default[m],b),this.setModified(!0)}},{key:"blend",value:function(){for(var m=arguments.length,b=new Array(m),v=0;v<m;v++)b[v]=arguments[v];l.default._validateParameters("p5.Image.blend",arguments),l.default.prototype.blend.apply(this,b),this.setModified(!0)}},{key:"setModified",value:function(m){this._modified=m}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(m,b){this.gifProperties?l.default.prototype.encodeAndDownloadGif(this,m):l.default.prototype.saveCanvas(this.canvas,m,b)}},{key:"reset",value:function(){var m;this.gifProperties&&((m=this.gifProperties).playing=!0,m.timeSinceStart=0,m.timeDisplayed=0,m.lastChangeTime=0,m.loopCount=0,m.displayIndex=0,this.drawingContext.putImageData(m.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var m;if(this.gifProperties)return(m=this.gifProperties).displayIndex%m.numFrames}},{key:"setFrame",value:function(m){var b;this.gifProperties&&(m<(b=this.gifProperties).numFrames&&0<=m?(b.timeDisplayed=0,b.lastChangeTime=0,b.displayIndex=m,this.drawingContext.putImageData(b.frames[m].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(m,b){if(this.gifProperties){var v=this.gifProperties;if(b<v.numFrames&&0<=b)v.frames[b].delay=m;else{var g=!0,b=!1,p=void 0;try{for(var y,S=v.frames[Symbol.iterator]();!(g=(y=S.next()).done);g=!0)y.value.delay=m}catch(A){b=!0,p=A}finally{try{g||S.return==null||S.return()}finally{if(b)throw p}}}}}}])&&d(w.prototype,h),_}(),t=l.default.Image,c.default=t},{"../core/main":283,"./filters":304,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],308:[function(t,o,c){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.filter"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=a(t("../core/main")),f=a(t("./filters"));function a(d){return d&&d.__esModule?d:{default:d}}t("../color/p5.Color"),l.default.prototype.pixels=[],l.default.prototype.blend=function(){for(var d,_=arguments.length,w=new Array(_),h=0;h<_;h++)w[h]=arguments[h];l.default._validateParameters("blend",w),this._renderer?(d=this._renderer).blend.apply(d,w):l.default.Renderer2D.prototype.blend.apply(this,w)},l.default.prototype.copy=function(){for(var d,_,w,h,m,b,v,g,p,y=arguments.length,S=new Array(y),j=0;j<y;j++)S[j]=arguments[j];if(l.default._validateParameters("copy",S),S.length===9)d=S[0],_=S[1],w=S[2],h=S[3],m=S[4],b=S[5],v=S[6],g=S[7],p=S[8];else{if(S.length!==8)throw new Error("Signature not supported");d=this,_=S[0],w=S[1],h=S[2],m=S[3],b=S[4],v=S[5],g=S[6],p=S[7]}l.default.prototype._copyHelper(this,d,_,w,h,m,b,v,g,p)},l.default.prototype._copyHelper=function(d,_,w,h,m,b,v,g,p,y){var S=_.canvas.width/_.width,j=0,A=0;_._renderer&&_._renderer.isP3D&&(j=_.width/2,A=_.height/2),d._renderer&&d._renderer.isP3D?(d.push(),d.resetMatrix(),d.noLights(),d.blendMode(d.BLEND),d.imageMode(d.CORNER),l.default.RendererGL.prototype.image.call(d._renderer,_,w+j,h+A,m,b,v,g,p,y),d.pop()):d.drawingContext.drawImage(_.canvas,S*(w+j),S*(h+A),S*m,S*b,v,g,p,y)},l.default.prototype.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},l.default.prototype.filter=function(){for(var d=arguments.length,_=new Array(d),w=0;w<d;w++)_[w]=arguments[w];l.default._validateParameters("filter",_);var v=(function(){var g,p={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return(arguments.length<=0?void 0:arguments[0])instanceof l.default.Shader?p.shader=arguments.length<=0?void 0:arguments[0]:(p.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&typeof(arguments.length<=1?void 0:arguments[1])=="number"&&(p.value=arguments.length<=1?void 0:arguments[1]),((g=arguments.length-1)<0||arguments.length<=g?void 0:arguments[g])===!1&&(p.useWebGL=!1)),p}).apply(void 0,_),h=v.shader,m=v.operation,b=v.value,v=v.useWebGL;this._renderer.isP3D&&h?l.default.RendererGL.prototype.filter.call(this._renderer,h):v||this._renderer.isP3D?(!v&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?l.default.RendererGL.prototype.filter.call(this._renderer,m,b):((h=this.getFilterGraphicsLayer()).copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this._renderer.clear(),this._renderer.resetMatrix(),h.filter.apply(h,_),this.copy(h._renderer,0,0,this.width,this.height,0,0,this.width,this.height),h.clear())):this.canvas!==void 0?f.default.apply(this.canvas,f.default[m],b):f.default.apply(this.elt,f.default[m],b)},l.default.prototype.get=function(d,_,w,h){var m;return l.default._validateParameters("get",arguments),(m=this._renderer).get.apply(m,arguments)},l.default.prototype.loadPixels=function(){for(var d=arguments.length,_=new Array(d),w=0;w<d;w++)_[w]=arguments[w];l.default._validateParameters("loadPixels",_),this._renderer.loadPixels()},l.default.prototype.set=function(d,_,w){this._renderer.set(d,_,w)},l.default.prototype.updatePixels=function(d,_,w,h){l.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(d,_,w,h)},t=l.default,c.default=t},{"../color/p5.Color":270,"../core/main":283,"./filters":304,"core-js/modules/es.array.filter":157}],309:[function(t,o,c){function l(b){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=_(t("../core/main")),a=(t("whatwg-fetch"),t("es6-promise/auto"),_(t("fetch-jsonp"))),d=_(t("file-saver"));function _(b){return b&&b.__esModule?b:{default:b}}function w(b){return(w=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(v){return l(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":l(v)})(b)}function h(b){return b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function m(b,v){v&&v!==!0&&v!=="true"||(v="");var g="";return(b=b||"untitled")&&b.includes(".")&&(g=b.split(".").pop()),v&&g!==v&&(g=v,b="".concat(b,".").concat(g)),[b,g]}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),f.default.prototype.loadJSON=function(){for(var b=arguments.length,v=new Array(b),g=0;g<b;g++)v[g]=arguments[g];f.default._validateParameters("loadJSON",v);for(var p,y,S,j=v[0],A={},N="json",C=1;C<v.length;C++){var T=v[C];typeof T=="string"?T!=="jsonp"&&T!=="json"||(N=T):typeof T=="function"?p?y=T:p=T:w(T)==="object"&&(T.hasOwnProperty("jsonpCallback")||T.hasOwnProperty("jsonpCallbackFunction"))&&(N="jsonp",S=T)}var R=this;return this.httpDo(j,"GET",S,N,function(P){for(var k in P)A[k]=P[k];p!==void 0&&p(P),R._decrementPreload()},function(P){if(f.default._friendlyFileLoadError(5,j),!y)throw P;y(P)}),A},f.default.prototype.loadStrings=function(){for(var b=arguments.length,v=new Array(b),g=0;g<b;g++)v[g]=arguments[g];f.default._validateParameters("loadStrings",v);for(var p,y,S=[],j=1;j<v.length;j++){var A=v[j];typeof A=="function"&&(p===void 0?p=A:y===void 0&&(y=A))}var N=this;return f.default.prototype.httpDo.call(this,v[0],"GET","text",function(C){for(var T=C.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),R=0,P=T.length;R<P;R+=32768)Array.prototype.push.apply(S,T.slice(R,Math.min(R+32768,P)));p!==void 0&&p(S),N._decrementPreload()},function(C){if(f.default._friendlyFileLoadError(3,C),!y)throw C;y(C)}),S},f.default.prototype.loadTable=function(b){var v,g,p,y=!1,S=b.substring(b.lastIndexOf(".")+1,b.length);S==="csv"?p=",":S==="ssv"?p=";":S==="tsv"&&(p="	");for(var j=1;j<arguments.length;j++)typeof arguments[j]=="function"?v===void 0?v=arguments[j]:g===void 0&&(g=arguments[j]):typeof arguments[j]=="string"&&(arguments[j]==="header"&&(y=!0),arguments[j]==="csv"?p=",":arguments[j]==="ssv"?p=";":arguments[j]==="tsv"&&(p="	"));var A=new f.default.Table,N=this;return this.httpDo(b,"GET","table",function(C){for(var T,R,P={},k=0,F=[],D=0,q=null,H=function(){P.currentState=k,P.token=""},W=function(){q.push(P.token),H()},Q=function(){P.currentState=4,F.push(q),q=null};;){if((T=C[D++])==null){if(P.escaped)throw new Error("Unclosed quote in file.");if(q){W(),Q();break}}if(q===null&&(P.escaped=!1,q=[],H()),P.currentState===k){if(T==='"'){P.escaped=!0,P.currentState=1;continue}P.currentState=1}if(P.currentState===1&&P.escaped)if(T==='"')C[D]==='"'?(P.token+='"',D++):(P.escaped=!1,P.currentState=2);else{if(T==="\r")continue;P.token+=T}else T==="\r"?(C[D]===`
`&&D++,W(),Q()):T===`
`?(W(),Q()):T===p?W():P.currentState===1&&(P.token+=T)}if(y)A.columns=F.shift();else for(var J=0;J<F[0].length;J++)A.columns[J]="null";for(var Z=0;Z<F.length;Z++)(F[Z].length!==1||F[Z][0]!=="undefined"&&F[Z][0]!=="")&&((R=new f.default.TableRow).arr=F[Z],R.obj=function(K,re){if((re=re||[])===void 0)for(var oe=0;oe<K.length;oe++)re[oe.toString()]=oe;return Object.fromEntries(re.map(function(M,z){return[M,K[z]]}))}(F[Z],A.columns),A.addRow(R));typeof v=="function"&&v(A),N._decrementPreload()},function(C){f.default._friendlyFileLoadError(2,b),g?g(C):console.error(C)}),A},f.default.prototype.loadXML=function(){for(var b=arguments.length,v=new Array(b),g=0;g<b;g++)v[g]=arguments[g];for(var p,y,S=new f.default.XML,j=1;j<v.length;j++){var A=v[j];typeof A=="function"&&(p===void 0?p=A:y===void 0&&(y=A))}var N=this;return this.httpDo(v[0],"GET","xml",function(C){for(var T in C)S[T]=C[T];p!==void 0&&p(S),N._decrementPreload()},function(C){if(f.default._friendlyFileLoadError(1,C),!y)throw C;y(C)}),S},f.default.prototype.loadBytes=function(b,v,g){var p={},y=this;return this.httpDo(b,"GET","arrayBuffer",function(S){p.bytes=new Uint8Array(S),typeof v=="function"&&v(p),y._decrementPreload()},function(S){if(f.default._friendlyFileLoadError(6,b),!g)throw S;g(S)}),p},f.default.prototype.httpGet=function(){for(var b=arguments.length,v=new Array(b),g=0;g<b;g++)v[g]=arguments[g];return f.default._validateParameters("httpGet",v),v.splice(1,0,"GET"),f.default.prototype.httpDo.apply(this,v)},f.default.prototype.httpPost=function(){for(var b=arguments.length,v=new Array(b),g=0;g<b;g++)v[g]=arguments[g];return f.default._validateParameters("httpPost",v),v.splice(1,0,"POST"),f.default.prototype.httpDo.apply(this,v)},f.default.prototype.httpDo=function(){for(var b,v,g,p={},y=0,S="text/plain",j=arguments.length-1;0<j&&typeof(j<0||arguments.length<=j?void 0:arguments[j])=="function";j--)y++;var A=arguments.length-y,N=arguments.length<=0?void 0:arguments[0];if(A==2&&typeof N=="string"&&w(arguments.length<=1?void 0:arguments[1])==="object")F=new Request(N,arguments.length<=1?void 0:arguments[1]),v=arguments.length<=2?void 0:arguments[2],g=arguments.length<=3?void 0:arguments[3];else{for(var C,T="GET",R=1;R<arguments.length;R++){var P=R<0||arguments.length<=R?void 0:arguments[R];if(typeof P=="string")P==="GET"||P==="POST"||P==="PUT"||P==="DELETE"?T=P:P==="json"||P==="jsonp"||P==="binary"||P==="arrayBuffer"||P==="xml"||P==="text"||P==="table"?b=P:C=P;else if(typeof P=="number")C=P.toString();else if(w(P)==="object")if(P.hasOwnProperty("jsonpCallback")||P.hasOwnProperty("jsonpCallbackFunction"))for(var k in P)p[k]=P[k];else S=P instanceof f.default.XML?(C=P.serialize(),"application/xml"):(C=JSON.stringify(P),"application/json");else typeof P=="function"&&(v?g=P:v=P)}var A=T==="GET"?new Headers:new Headers({"Content-Type":S}),F=new Request(N,{method:T,mode:"cors",body:C,headers:A})}return(A=(A=(b=b||(N.includes("json")?"json":N.includes("xml")?"xml":"text"))==="jsonp"?(0,a.default)(N,p):fetch(F)).then(function(D){if(!D.ok)throw(q=new Error(D.body)).status=D.status,q.ok=!1,q;var q=0;switch((q=b!=="jsonp"?D.headers.get("content-length"):q)&&64e6<q&&f.default._friendlyFileLoadError(7,N),b){case"json":case"jsonp":return D.json();case"binary":return D.blob();case"arrayBuffer":return D.arrayBuffer();case"xml":return D.text().then(function(H){return H=new DOMParser().parseFromString(H,"text/xml"),new f.default.XML(H.documentElement)});default:return D.text()}})).then(v||function(){}),A.catch(g||console.error),A},window.URL=window.URL||window.webkitURL,f.default.prototype._pWriters=[],f.default.prototype.createWriter=function(b,v){var g,p;for(p in f.default.prototype._pWriters)if(f.default.prototype._pWriters[p].name===b)return g=new f.default.PrintWriter(b+this.millis(),v),f.default.prototype._pWriters.push(g),g;return g=new f.default.PrintWriter(b,v),f.default.prototype._pWriters.push(g),g},f.default.PrintWriter=function(b,v){var g=this;this.name=b,this.content="",this.write=function(p){this.content+=p},this.print=function(p){this.content+="".concat(p,`
`)},this.clear=function(){this.content=""},this.close=function(){var p,y=[];for(p in y.push(this.content),f.default.prototype.writeFile(y,b,v),f.default.prototype._pWriters)f.default.prototype._pWriters[p].name===this.name&&f.default.prototype._pWriters.splice(p,1);g.clear(),g={}}},f.default.prototype.save=function(b,v,g){var p=arguments,y=(this._curElement||this).elt;if(p.length===0)f.default.prototype.saveCanvas(y);else if(p[0]instanceof f.default.Renderer||p[0]instanceof f.default.Graphics)f.default.prototype.saveCanvas(p[0].elt,p[1],p[2]);else if(p.length===1&&typeof p[0]=="string")f.default.prototype.saveCanvas(y,p[0]);else switch(m(p[1],p[2])[1]){case"json":return void f.default.prototype.saveJSON(p[0],p[1],p[2]);case"txt":return void f.default.prototype.saveStrings(p[0],p[1],p[2]);default:p[0]instanceof Array?f.default.prototype.saveStrings(p[0],p[1],p[2]):p[0]instanceof f.default.Table?f.default.prototype.saveTable(p[0],p[1],p[2]):p[0]instanceof f.default.Image?f.default.prototype.saveCanvas(p[0].canvas,p[1]):p[0]instanceof f.default.SoundFile&&f.default.prototype.saveSound(p[0],p[1],p[2],p[3])}},f.default.prototype.saveJSON=function(b,v,g){f.default._validateParameters("saveJSON",arguments),g=g?JSON.stringify(b):JSON.stringify(b,void 0,2),this.saveStrings(g.split(`
`),v,"json")},f.default.prototype.saveJSONObject=f.default.prototype.saveJSON,f.default.prototype.saveJSONArray=f.default.prototype.saveJSON,f.default.prototype.saveStrings=function(b,v,g,p){f.default._validateParameters("saveStrings",arguments);for(var y=this.createWriter(v,g||"txt"),S=0;S<b.length;S++)p?y.write(b[S]+`\r
`):y.write(b[S]+`
`);y.close(),y.clear()},f.default.prototype.saveTable=function(b,v,g){f.default._validateParameters("saveTable",arguments),p=g===void 0?v.substring(v.lastIndexOf(".")+1,v.length):g;var p,y=this.createWriter(v,p),S=b.columns,j=p==="tsv"?"	":",";if(p!=="html"){if(S[0]!=="0"){for(var A=0;A<S.length;A++)A<S.length-1?y.write(S[A]+j):y.write(S[A]);y.write(`
`)}for(var N=0;N<b.rows.length;N++){for(var C=void 0,C=0;C<b.rows[N].arr.length;C++)C<b.rows[N].arr.length-1?p==="csv"&&String(b.rows[N].arr[C]).includes(",")?y.write('"'+b.rows[N].arr[C]+'"'+j):y.write(b.rows[N].arr[C]+j):p==="csv"&&String(b.rows[N].arr[C]).includes(",")?y.write('"'+b.rows[N].arr[C]+'"'):y.write(b.rows[N].arr[C]);y.write(`
`)}}else{if(y.print("<html>"),y.print("<head>"),y.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),y.print("</head>"),y.print("<body>"),y.print("  <table>"),S[0]!=="0"){y.print("    <tr>");for(var T=0;T<S.length;T++){var R=h(S[T]);y.print("      <td>".concat(R)),y.print("      </td>")}y.print("    </tr>")}for(var P=0;P<b.rows.length;P++){y.print("    <tr>");for(var k=0;k<b.columns.length;k++){var F=h(b.rows[P].getString(k));y.print("      <td>".concat(F)),y.print("      </td>")}y.print("    </tr>")}y.print("  </table>"),y.print("</body>"),y.print("</html>")}y.close(),y.clear()},f.default.prototype.writeFile=function(y,v,g){var p="application/octet-stream",y=(f.default.prototype._isSafari()&&(p="text/plain"),new Blob(y,{type:p}));f.default.prototype.downloadFile(y,v,g)},f.default.prototype.downloadFile=function(b,y,S){var p,y=m(y,S),S=y[0];b instanceof Blob?d.default.saveAs(b,S):((p=document.createElement("a")).href=b,p.download=S,p.onclick=function(j){document.body.removeChild(j.target),j.stopPropagation()},p.style.display="none",document.body.appendChild(p),f.default.prototype._isSafari()&&(b=(b=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(y[1],'"'),alert(b)),p.click())},f.default.prototype._checkFileExtension=m,f.default.prototype._isSafari=function(){return window.HTMLElement.toString().includes("Constructor")},t=f.default,c.default=t},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248,"es6-promise/auto":249,"fetch-jsonp":251,"file-saver":252,"whatwg-fetch":261}],310:[function(t,o,c){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(a,d){for(var _=0;_<d.length;_++){var w=d[_];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(a,w.key,w)}}l.default.Table=function(){function a(){var w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],h=this,m=a;if(!(h instanceof m))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=w}var d,_;return d=a,(_=[{key:"addRow",value:function(w){if(w=w||new l.default.TableRow,w.arr===void 0||w.obj===void 0)throw new Error("invalid TableRow: ".concat(w));return(w.table=this).rows.push(w),w}},{key:"removeRow",value:function(w){this.rows[w].table=null,w=this.rows.splice(w+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(w)}},{key:"getRow",value:function(w){return this.rows[w]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(w,h){if(typeof h=="string"){for(var m=0;m<this.rows.length;m++)if(this.rows[m].obj[h]===w)return this.rows[m]}else for(var b=0;b<this.rows.length;b++)if(this.rows[b].arr[h]===w)return this.rows[b];return null}},{key:"findRows",value:function(w,h){var m=[];if(typeof h=="string")for(var b=0;b<this.rows.length;b++)this.rows[b].obj[h]===w&&m.push(this.rows[b]);else for(var v=0;v<this.rows.length;v++)this.rows[v].arr[h]===w&&m.push(this.rows[v]);return m}},{key:"matchRow",value:function(w,h){if(typeof h=="number"){for(var m=0;m<this.rows.length;m++)if(this.rows[m].arr[h].match(w))return this.rows[m]}else for(var b=0;b<this.rows.length;b++)if(this.rows[b].obj[h].match(w))return this.rows[b];return null}},{key:"matchRows",value:function(w,h){var m=[];if(typeof h=="number")for(var b=0;b<this.rows.length;b++)this.rows[b].arr[h].match(w)&&m.push(this.rows[b]);else for(var v=0;v<this.rows.length;v++)this.rows[v].obj[h].match(w)&&m.push(this.rows[v]);return m}},{key:"getColumn",value:function(w){var h=[];if(typeof w=="string")for(var m=0;m<this.rows.length;m++)h.push(this.rows[m].obj[w]);else for(var b=0;b<this.rows.length;b++)h.push(this.rows[b].arr[w]);return h}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(w){this.columns.push(w||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(w,h){for(var m=[],b=0;b<w.length;b++)m.push(w.charAt(b).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var v=new RegExp(m.join("|"),"g");if(h===void 0)for(var g=0;g<this.columns.length;g++)for(var p=0;p<this.rows.length;p++){var y=(y=this.rows[p].arr[g]).replace(v,"");this.rows[p].arr[g]=y,this.rows[p].obj[this.columns[g]]=y}else if(typeof h=="string")for(var S=0;S<this.rows.length;S++){var j=(j=this.rows[S].obj[h]).replace(v,""),A=(this.rows[S].obj[h]=j,this.columns.indexOf(h));this.rows[S].arr[A]=j}else for(var N=0;N<this.rows.length;N++){var C=(C=this.rows[N].arr[h]).replace(v,"");this.rows[N].arr[h]=C,this.rows[N].obj[this.columns[h]]=C}}},{key:"trim",value:function(w){var h=new RegExp(" ","g");if(w===void 0)for(var m=0;m<this.columns.length;m++)for(var b=0;b<this.rows.length;b++){var v=(v=this.rows[b].arr[m]).replace(h,"");this.rows[b].arr[m]=v,this.rows[b].obj[this.columns[m]]=v}else if(typeof w=="string")for(var g=0;g<this.rows.length;g++){var p=(p=this.rows[g].obj[w]).replace(h,""),y=(this.rows[g].obj[w]=p,this.columns.indexOf(w));this.rows[g].arr[y]=p}else for(var S=0;S<this.rows.length;S++){var j=(j=this.rows[S].arr[w]).replace(h,"");this.rows[S].arr[w]=j,this.rows[S].obj[this.columns[w]]=j}}},{key:"removeColumn",value:function(b){typeof b=="string"?m=this.columns.indexOf(h=b):h=this.columns[m=b];var h,m,b=this.columns.splice(m+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(b);for(var v=0;v<this.rows.length;v++){var g=this.rows[v].arr,p=g.splice(m+1,g.length);g.pop(),this.rows[v].arr=g.concat(p),delete this.rows[v].obj[h]}}},{key:"set",value:function(w,h,m){this.rows[w].set(h,m)}},{key:"setNum",value:function(w,h,m){this.rows[w].setNum(h,m)}},{key:"setString",value:function(w,h,m){this.rows[w].setString(h,m)}},{key:"get",value:function(w,h){return this.rows[w].get(h)}},{key:"getNum",value:function(w,h){return this.rows[w].getNum(h)}},{key:"getString",value:function(w,h){return this.rows[w].getString(h)}},{key:"getObject",value:function(w){for(var h,m={},b=0;b<this.rows.length;b++)if(h=this.rows[b].obj,typeof w=="string"){if(!(0<=this.columns.indexOf(w)))throw new Error('This table has no column named "'.concat(w,'"'));m[h[w]]=h}else m[b]=this.rows[b].obj;return m}},{key:"getArray",value:function(){for(var w=[],h=0;h<this.rows.length;h++)w.push(this.rows[h].arr);return w}}])&&f(d.prototype,_),a}(),t=l.default,c.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.splice":171,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204}],311:[function(t,o,c){t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function l(f,a){for(var d=0;d<a.length;d++){var _=a[d];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(f,_.key,_)}}t.default.TableRow=function(){function f(_,w){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");var h=[];_&&(h=_.split(w=w||",")),this.arr=h,this.obj=Object.fromEntries(h.entries()),this.table=null}var a,d;return a=f,(d=[{key:"set",value:function(_,w){if(typeof _=="string"){var h=this.table.columns.indexOf(_);if(!(0<=h))throw new Error('This table has no column named "'.concat(_,'"'));this.obj[_]=w,this.arr[h]=w}else{if(!(_<this.table.columns.length))throw new Error("Column #".concat(_," is out of the range of this table"));this.arr[_]=w,h=this.table.columns[_],this.obj[h]=w}}},{key:"setNum",value:function(_,w){w=parseFloat(w),this.set(_,w)}},{key:"setString",value:function(_,w){w=w.toString(),this.set(_,w)}},{key:"get",value:function(_){return(typeof _=="string"?this.obj:this.arr)[_]}},{key:"getNum",value:function(_){var w=parseFloat(typeof _=="string"?this.obj[_]:this.arr[_]);if(w.toString()==="NaN")throw"Error: ".concat(this.obj[_]," is NaN (Not a Number)");return w}},{key:"getString",value:function(_){return(typeof _=="string"?this.obj:this.arr)[_].toString()}}])&&l(a.prototype,d),f}(),t=t.default,c.default=t},{"../core/main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246}],312:[function(t,o,c){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(d,_){for(var w=0;w<_.length;w++){var h=_[w];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(d,h.key,h)}}function a(d){for(var _=[],w=0;w<d.length;w++)_.push(new l.default.XML(d[w]));return _}l.default.XML=function(){function d(h){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");h?this.DOM=h:(h=document.implementation.createDocument(null,"doc"),this.DOM=h.createElement("root"))}var _,w;return _=d,(w=[{key:"getParent",value:function(){return new l.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(h){var m=this.DOM.innerHTML,b=this.DOM.attributes,v=document.implementation.createDocument(null,"default").createElement(h);v.innerHTML=m;for(var g=0;g<b.length;g++)v.setAttribute(b[g].nodeName,b[g].nodeValue);this.DOM=v}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var h=[],m=0;m<this.DOM.childNodes.length;m++)h.push(this.DOM.childNodes[m].nodeName);return h}},{key:"getChildren",value:function(h){return a(h?this.DOM.getElementsByTagName(h):this.DOM.children)}},{key:"getChild",value:function(h){if(typeof h!="string")return new l.default.XML(this.DOM.children[h]);var m=!0,b=!1,v=void 0;try{for(var g,p=this.DOM.children[Symbol.iterator]();!(m=(g=p.next()).done);m=!0){var y=g.value;if(y.tagName===h)return new l.default.XML(y)}}catch(S){b=!0,v=S}finally{try{m||p.return==null||p.return()}finally{if(b)throw v}}}},{key:"addChild",value:function(h){h instanceof l.default.XML&&this.DOM.appendChild(h.DOM)}},{key:"removeChild",value:function(h){var m=-1;if(typeof h=="string"){for(var b=0;b<this.DOM.children.length;b++)if(this.DOM.children[b].tagName===h){m=b;break}}else m=h;m!==-1&&this.DOM.removeChild(this.DOM.children[m])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var h=[],m=!0,b=!1,v=void 0;try{for(var g,p=this.DOM.attributes[Symbol.iterator]();!(m=(g=p.next()).done);m=!0){var y=g.value;h.push(y.nodeName)}}catch(S){b=!0,v=S}finally{try{m||p.return==null||p.return()}finally{if(b)throw v}}return h}},{key:"hasAttribute",value:function(h){var m={},b=!0,v=!1,g=void 0;try{for(var p,y=this.DOM.attributes[Symbol.iterator]();!(b=(p=y.next()).done);b=!0){var S=p.value;m[S.nodeName]=S.nodeValue}}catch(j){v=!0,g=j}finally{try{b||y.return==null||y.return()}finally{if(v)throw g}}return!!m[h]}},{key:"getNum",value:function(h,m){var b={},v=!0,g=!1,p=void 0;try{for(var y,S=this.DOM.attributes[Symbol.iterator]();!(v=(y=S.next()).done);v=!0){var j=y.value;b[j.nodeName]=j.nodeValue}}catch(A){g=!0,p=A}finally{try{v||S.return==null||S.return()}finally{if(g)throw p}}return Number(b[h])||m||0}},{key:"getString",value:function(h,m){var b={},v=!0,g=!1,p=void 0;try{for(var y,S=this.DOM.attributes[Symbol.iterator]();!(v=(y=S.next()).done);v=!0){var j=y.value;b[j.nodeName]=j.nodeValue}}catch(A){g=!0,p=A}finally{try{v||S.return==null||S.return()}finally{if(g)throw p}}return b[h]?String(b[h]):m||null}},{key:"setAttribute",value:function(h,m){this.DOM.setAttribute(h,m)}},{key:"getContent",value:function(h){var m=this.DOM.textContent;return(m=m.replace(/\s\s+/g,","))||h||null}},{key:"setContent",value:function(h){this.DOM.children.length||(this.DOM.textContent=h)}},{key:"serialize",value:function(){return new XMLSerializer().serializeToString(this.DOM)}}])&&f(_.prototype,w),d}(),t=l.default,c.default=t},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],313:[function(t,o,c){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.string.includes"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(a){return function(d){if(Array.isArray(d)){for(var _=0,w=new Array(d.length);_<d.length;_++)w[_]=d[_];return w}}(a)||function(d){if(Symbol.iterator in Object(d)||Object.prototype.toString.call(d)==="[object Arguments]")return Array.from(d)}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}l.default.prototype.abs=Math.abs,l.default.prototype.ceil=Math.ceil,l.default.prototype.constrain=function(a,d,_){return l.default._validateParameters("constrain",arguments),Math.max(Math.min(a,_),d)},l.default.prototype.dist=function(){for(var a=arguments.length,d=new Array(a),_=0;_<a;_++)d[_]=arguments[_];return l.default._validateParameters("dist",d),d.length===4?Math.hypot(d[2]-d[0],d[3]-d[1]):d.length===6?Math.hypot(d[3]-d[0],d[4]-d[1],d[5]-d[2]):void 0},l.default.prototype.exp=Math.exp,l.default.prototype.floor=Math.floor,l.default.prototype.lerp=function(a,d,_){return l.default._validateParameters("lerp",arguments),_*(d-a)+a},l.default.prototype.log=Math.log,l.default.prototype.mag=function(a,d){return l.default._validateParameters("mag",arguments),Math.hypot(a,d)},l.default.prototype.map=function(a,d,_,w,h,m){return l.default._validateParameters("map",arguments),a=(a-d)/(_-d)*(h-w)+w,m?w<h?this.constrain(a,w,h):this.constrain(a,h,w):a},l.default.prototype.max=function(){for(var a=function(h){return Math.max.apply(Math,f(h))},d=arguments.length,_=new Array(d),w=0;w<d;w++)_[w]=arguments[w];return Array.isArray(_[0])?a(_[0]):a(_)},l.default.prototype.min=function(){for(var a=function(h){return Math.min.apply(Math,f(h))},d=arguments.length,_=new Array(d),w=0;w<d;w++)_[w]=arguments[w];return Array.isArray(_[0])?a(_[0]):a(_)},l.default.prototype.norm=function(a,d,_){return l.default._validateParameters("norm",arguments),this.map(a,d,_,0,1)},l.default.prototype.pow=Math.pow,l.default.prototype.round=function(a,d){return d?(d=Math.pow(10,d),Math.round(a*d)/d):Math.round(a)},l.default.prototype.sq=function(a){return a*a},l.default.prototype.sqrt=Math.sqrt,l.default.prototype.fract=function(w){l.default._validateParameters("fract",arguments);var d,_=0,w=Number(w);return isNaN(w)||Math.abs(w)===1/0?w:(w<0&&(w=-w,_=1),String(w).includes(".")&&!String(w).includes("e")?(d=String(w),d=+("0"+d.slice(d.indexOf("."))),Math.abs(_-d)):w<1?Math.abs(_-w):0)},t=l.default,c.default=t},{"../core/main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],314:[function(t,o,c){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(d,_,w){return(f=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(h,m,b){var v=[null];return v.push.apply(v,m),m=new(Function.bind.apply(h,v)),b&&a(m,b.prototype),m}).apply(null,arguments)}function a(d,_){return(a=Object.setPrototypeOf||function(w,h){return w.__proto__=h,w})(d,_)}l.default.prototype.createVector=function(d,_,w){return this instanceof l.default?f(l.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new l.default.Vector(d,_,w)},t=l.default,c.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196}],315:[function(w,o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,w=(w=w("../core/main"))&&w.__esModule?w:{default:w};function l(h){return .5*(1-Math.cos(h*Math.PI))}var f,a=4095,d=4,_=.5,w=(w.default.prototype.noise=function(h){var m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(f==null){f=new Array(4096);for(var v=0;v<4096;v++)f[v]=Math.random()}h<0&&(h=-h),m<0&&(m=-m),b<0&&(b=-b);for(var g,p,y=Math.floor(h),S=Math.floor(m),j=Math.floor(b),A=h-y,N=m-S,C=b-j,T=0,R=.5,P=0;P<d;P++){var k=y+(S<<4)+(j<<8),F=l(A),D=l(N),q=f[k&a];q+=F*(f[k+1&a]-q),g=f[k+16&a],q+=D*((g+=F*(f[k+16+1&a]-g))-q),g=f[(k+=256)&a],g+=F*(f[k+1&a]-g),p=f[k+16&a],g+=D*((p+=F*(f[k+16+1&a]-p))-g),T+=(q+=l(C)*(g-q))*R,R*=_,y<<=1,S<<=1,j<<=1,1<=(A*=2)&&(y++,A--),1<=(N*=2)&&(S++,N--),1<=(C*=2)&&(j++,C--)}return T},w.default.prototype.noiseDetail=function(h,m){0<h&&(d=h),0<m&&(_=m)},w.default.prototype.noiseSeed=function(h){v=4294967296;var m,b,v,g={setSeed:function(y){b=m=(y??Math.random()*v)>>>0},getSeed:function(){return m},rand:function(){return(b=(1664525*b+1013904223)%v)/v}};g.setSeed(h),f=new Array(4096);for(var p=0;p<4096;p++)f[p]=g.rand()},w.default);c.default=w},{"../core/main":283}],316:[function(t,o,c){function l(m){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(m)}function f(m){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(b){return l(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":l(b)})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.epsilon"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.epsilon"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.string.sub"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(h=t("../core/main"))&&h.__esModule?h:{default:h},d=function(m){if(m&&m.__esModule)return m;if(m===null||f(m)!=="object"&&typeof m!="function")return{default:m};var b=_();if(b&&b.has(m))return b.get(m);var v,g={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in m){var y;Object.prototype.hasOwnProperty.call(m,v)&&((y=p?Object.getOwnPropertyDescriptor(m,v):null)&&(y.get||y.set)?Object.defineProperty(g,v,y):g[v]=m[v])}return g.default=m,b&&b.set(m,g),g}(t("../core/constants"));function _(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,_=function(){return m},m)}function w(m,b){for(var v=0;v<b.length;v++){var g=b[v];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(m,g.key,g)}}a.default.Vector=function(){function m(){var j=this,p=m;if(!(j instanceof p))throw new TypeError("Cannot call a class as a function");var y,S,j=typeof(arguments.length<=0?void 0:arguments[0])=="function"?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],y=(arguments.length<=2?void 0:arguments[2])||0,S=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(y=(arguments.length<=0?void 0:arguments[0])||0,S=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=y,this.y=S,this.z=j}var b,v,g;return b=m,g=[{key:"fromAngle",value:function(p){var y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;return new a.default.Vector(y*Math.cos(p),y*Math.sin(p),0)}},{key:"fromAngles",value:function(C,A){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,j=Math.cos(A),A=Math.sin(A),N=Math.cos(C),C=Math.sin(C);return new a.default.Vector(S*C*A,-S*N,S*C*j)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*d.TWO_PI)}},{key:"random3D",value:function(){var p=Math.random()*d.TWO_PI,y=2*Math.random()-1,j=Math.sqrt(1-y*y),S=j*Math.cos(p),j=j*Math.sin(p);return new a.default.Vector(S,j,y)}},{key:"copy",value:function(p){return p.copy(p)}},{key:"add",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j=y[0],A=y[1],N=y[2];return N?N.set(j):(N=j.copy(),y.length===3&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),N.add(A),N}},{key:"rem",value:function(p,y){if(p instanceof a.default.Vector&&y instanceof a.default.Vector)return(p=p.copy()).rem(y),p}},{key:"sub",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j=y[0],A=y[1],N=y[2];return N?N.set(j):(N=j.copy(),y.length===3&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),N.sub(A),N}},{key:"mult",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j=y[0],A=y[1],N=y[2];return N?N.set(j):(N=j.copy(),y.length===3&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),N.mult(A),N}},{key:"rotate",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j=y[0],A=y[1],N=y[2];return y.length===2?N=j.copy():(N instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),N.set(j)),N.rotate(A),N}},{key:"div",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j=y[0],A=y[1],N=y[2];return N?N.set(j):(N=j.copy(),y.length===3&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),N.div(A),N}},{key:"dot",value:function(p,y){return p.dot(y)}},{key:"cross",value:function(p,y){return p.cross(y)}},{key:"dist",value:function(p,y){return p.dist(y)}},{key:"lerp",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j=y[0],A=y[1],N=y[2],C=y[3];return C?C.set(j):(C=j.copy(),y.length===4&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),C.lerp(A,N),C}},{key:"slerp",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j=y[0],A=y[1],N=y[2],C=y[3];return C?C.set(j):(C=j.copy(),y.length===4&&a.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),C.slerp(A,N),C}},{key:"mag",value:function(p){return p.mag()}},{key:"magSq",value:function(p){return p.magSq()}},{key:"normalize",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j=y[0],A=y[1];return y.length<2?A=j.copy():(A instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),A.set(j)),A.normalize()}},{key:"limit",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j=y[0],A=y[1],N=y[2];return y.length<3?N=j.copy():(N instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),N.set(j)),N.limit(A)}},{key:"setMag",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j=y[0],A=y[1],N=y[2];return y.length<3?N=j.copy():(N instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),N.set(j)),N.setMag(A)}},{key:"heading",value:function(p){return p.heading()}},{key:"angleBetween",value:function(p,y){return p.angleBetween(y)}},{key:"reflect",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j=y[0],A=y[1],N=y[2];return y.length<3?N=j.copy():(N instanceof a.default.Vector||a.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),N.set(j)),N.reflect(A)}},{key:"array",value:function(p){return p.array()}},{key:"equals",value:function(p,y){var S;return p instanceof a.default.Vector?S=p:Array.isArray(p)?S=new a.default.Vector().set(p):a.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),S.equals(y)}}],(v=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(p,y,S){return p instanceof a.default.Vector?(this.x=p.x||0,this.y=p.y||0,this.z=p.z||0):Array.isArray(p)?(this.x=p[0]||0,this.y=p[1]||0,this.z=p[2]||0):(this.x=p||0,this.y=y||0,this.z=S||0),this}},{key:"copy",value:function(){return this.isPInst?new a.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new a.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(p,y,S){return p instanceof a.default.Vector?(this.x+=p.x||0,this.y+=p.y||0,this.z+=p.z||0):Array.isArray(p)?(this.x+=p[0]||0,this.y+=p[1]||0,this.z+=p[2]||0):(this.x+=p||0,this.y+=y||0,this.z+=S||0),this}},{key:"calculateRemainder2D",value:function(p,y){return p!==0&&(this.x=this.x%p),y!==0&&(this.y=this.y%y),this}},{key:"calculateRemainder3D",value:function(p,y,S){return p!==0&&(this.x=this.x%p),y!==0&&(this.y=this.y%y),S!==0&&(this.z=this.z%S),this}},{key:"rem",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j,A,N,C=y[0],T=y[1],R=y[2];if(C instanceof a.default.Vector){if([C.x,C.y,C.z].every(Number.isFinite))return j=parseFloat(C.x),A=parseFloat(C.y),N=parseFloat(C.z),this.calculateRemainder3D(j,A,N)}else if(Array.isArray(C)){if(C.every(Number.isFinite))return C.length===2?this.calculateRemainder2D(C[0],C[1]):C.length===3?this.calculateRemainder3D(C[0],C[1],C[2]):void 0}else if(y.length===1){if(Number.isFinite(C)&&C!==0)return this.x=this.x%C,this.y=this.y%C,this.z=this.z%C,this}else if(y.length===2){if(y.every(Number.isFinite))return this.calculateRemainder2D(C,T)}else if(y.length===3&&y.every(Number.isFinite))return this.calculateRemainder3D(C,T,R)}},{key:"sub",value:function(p,y,S){return p instanceof a.default.Vector?(this.x-=p.x||0,this.y-=p.y||0,this.z-=p.z||0):Array.isArray(p)?(this.x-=p[0]||0,this.y-=p[1]||0,this.z-=p[2]||0):(this.x-=p||0,this.y-=y||0,this.z-=S||0),this}},{key:"mult",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j,A=y[0],N=y[1],C=y[2];return A instanceof a.default.Vector?Number.isFinite(A.x)&&Number.isFinite(A.y)&&Number.isFinite(A.z)&&typeof A.x=="number"&&typeof A.y=="number"&&typeof A.z=="number"?(this.x*=A.x,this.y*=A.y,this.z*=A.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(A)?A.every(function(T){return Number.isFinite(T)})&&A.every(function(T){return typeof T=="number"})?A.length===1?(this.x*=A[0],this.y*=A[0],this.z*=A[0]):A.length===2?(this.x*=A[0],this.y*=A[1]):A.length===3&&(this.x*=A[0],this.y*=A[1],this.z*=A[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(j=y).every(function(T){return Number.isFinite(T)})&&j.every(function(T){return typeof T=="number"})?(y.length===1&&(this.x*=A,this.y*=A,this.z*=A),y.length===2&&(this.x*=A,this.y*=N),y.length===3&&(this.x*=A,this.y*=N,this.z*=C)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];var j=y[0],A=y[1],N=y[2];if(j instanceof a.default.Vector)if(Number.isFinite(j.x)&&Number.isFinite(j.y)&&Number.isFinite(j.z)&&typeof j.x=="number"&&typeof j.y=="number"&&typeof j.z=="number"){var C=j.z===0&&this.z===0;if(j.x===0||j.y===0||!C&&j.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=j.x,this.y/=j.y,C||(this.z/=j.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(j))if(j.every(Number.isFinite)&&j.every(function(T){return typeof T=="number"})){if(j.some(function(T){return T===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;j.length===1?(this.x/=j[0],this.y/=j[0],this.z/=j[0]):j.length===2?(this.x/=j[0],this.y/=j[1]):j.length===3&&(this.x/=j[0],this.y/=j[1],this.z/=j[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(y.every(Number.isFinite)&&y.every(function(T){return typeof T=="number"})){if(y.some(function(T){return T===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;y.length===1&&(this.x/=j,this.y/=j,this.z/=j),y.length===2&&(this.x/=j,this.y/=A),y.length===3&&(this.x/=j,this.y/=A,this.z/=N)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var p=this.x,y=this.y,S=this.z;return p*p+y*y+S*S}},{key:"dot",value:function(p,y,S){return p instanceof a.default.Vector?this.dot(p.x,p.y,p.z):this.x*(p||0)+this.y*(y||0)+this.z*(S||0)}},{key:"cross",value:function(j){var y=this.y*j.z-this.z*j.y,S=this.z*j.x-this.x*j.z,j=this.x*j.y-this.y*j.x;return this.isPInst?new a.default.Vector(this._fromRadians,this._toRadians,y,S,j):new a.default.Vector(y,S,j)}},{key:"dist",value:function(p){return p.copy().sub(this).mag()}},{key:"normalize",value:function(){var p=this.mag();return p!==0&&this.mult(1/p),this}},{key:"limit",value:function(p){var y=this.magSq();return p*p<y&&this.div(Math.sqrt(y)).mult(p),this}},{key:"setMag",value:function(p){return this.normalize().mult(p)}},{key:"heading",value:function(){var p=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(p):p}},{key:"setHeading",value:function(p){this.isPInst&&(p=this._toRadians(p));var y=this.mag();return this.x=y*Math.cos(p),this.y=y*Math.sin(p),this}},{key:"rotate",value:function(y){var y=this.heading()+y,S=(this.isPInst&&(y=this._toRadians(y)),this.mag());return this.x=Math.cos(y)*S,this.y=Math.sin(y)*S,this}},{key:"angleBetween",value:function(p){var y;return this.magSq()*p.magSq()==0?NaN:(y=this.cross(p),p=Math.atan2(y.mag(),this.dot(p))*Math.sign(y.z||1),this.isPInst?this._fromRadians(p):p)}},{key:"lerp",value:function(p,y,S,j){return p instanceof a.default.Vector?this.lerp(p.x,p.y,p.z,y):(this.x+=(p-this.x)*j||0,this.y+=(y-this.y)*j||0,this.z+=(S-this.z)*j||0,this)}},{key:"slerp",value:function(p,y){if(y!==0){if(y===1)return this.set(p);var S=this.mag(),j=p.mag();if(S*j==0)this.mult(1-y).add(p.x*y,p.y*y,p.z*y);else{var A=this.cross(p),N=A.mag(),C=Math.atan2(N,this.dot(p));if(0<N)A.x/=N,A.y/=N,A.z/=N;else{if(C<.5*Math.PI)return this.mult(1-y).add(p.x*y,p.y*y,p.z*y),this;this.z===0&&p.z===0?A.set(0,0,1):this.x!==0?A.set(this.y,-this.x,0).normalize():A.set(1,0,0)}N=A.cross(this),p=1-y+y*j/S,A=p*Math.cos(y*C),j=p*Math.sin(y*C),this.x=this.x*A+N.x*j,this.y=this.y*A+N.y*j,this.z=this.z*A+N.z*j}}return this}},{key:"reflect",value:function(p){return p=a.default.Vector.normalize(p),this.sub(p.mult(2*this.dot(p)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(N,y,S){var j,A,N=N instanceof a.default.Vector?(j=N.x||0,A=N.y||0,N.z||0):Array.isArray(N)?(j=N[0]||0,A=N[1]||0,N[2]||0):(j=N||0,A=y||0,S||0);return this.x===j&&this.y===A&&this.z===N}},{key:"clampToZero",value:function(){return this.x=this._clampToZero(this.x),this.y=this._clampToZero(this.y),this.z=this._clampToZero(this.z),this}},{key:"_clampToZero",value:function(p){return Math.abs(+(p||0))<=Number.EPSILON?0:p}}])&&w(b.prototype,v),g&&w(b,g),m}();var h=a.default.Vector;c.default=h},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.every":155,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.constructor":179,"core-js/modules/es.number.epsilon":180,"core-js/modules/es.number.is-finite":181,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],317:[function(_,o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(_=_("../core/main"))&&_.__esModule?_:{default:_},f="_lcg_random_state",a=4294967296,d=0,_=(l.default.prototype._lcg=function(w){return this[w]=(1664525*this[w]+1013904223)%a,this[w]/a},l.default.prototype._lcgSetSeed=function(w,h){this[w]=(h??Math.random()*a)>>>0},l.default.prototype.randomSeed=function(w){this._lcgSetSeed(f,w),this._gaussian_previous=!1},l.default.prototype.random=function(w,h){var m,b;return l.default._validateParameters("random",arguments),m=this[f]!=null?this._lcg(f):Math.random(),w===void 0?m:h===void 0?Array.isArray(w)?w[Math.floor(m*w.length)]:m*w:(h<w&&(b=w,w=h,h=b),m*(h-w)+w)},l.default.prototype.randomGaussian=function(w){var h,m,b,v,g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)h=d,this._gaussian_previous=!1;else{for(;1<=(v=(m=this.random(2)-1)*m+(b=this.random(2)-1)*b););h=m*(v=Math.sqrt(-2*Math.log(v)/v)),d=b*v,this._gaussian_previous=!0}return h*g+(w||0)},l.default);c.default=_},{"../core/main":283}],318:[function(t,o,c){function l(h){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function f(h){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(m){return l(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":l(m)})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(w=t("../core/main"))&&w.__esModule?w:{default:w},d=function(h){if(h&&h.__esModule)return h;if(h===null||f(h)!=="object"&&typeof h!="function")return{default:h};var m=_();if(m&&m.has(h))return m.get(h);var b,v={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in h){var p;Object.prototype.hasOwnProperty.call(h,b)&&((p=g?Object.getOwnPropertyDescriptor(h,b):null)&&(p.get||p.set)?Object.defineProperty(v,b,p):v[b]=h[b])}return v.default=h,m&&m.set(h,v),v}(t("../core/constants"));function _(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,_=function(){return h},h)}a.default.prototype._angleMode=d.RADIANS,a.default.prototype.acos=function(h){return this._fromRadians(Math.acos(h))},a.default.prototype.asin=function(h){return this._fromRadians(Math.asin(h))},a.default.prototype.atan=function(h){return this._fromRadians(Math.atan(h))},a.default.prototype.atan2=function(h,m){return this._fromRadians(Math.atan2(h,m))},a.default.prototype.cos=function(h){return Math.cos(this._toRadians(h))},a.default.prototype.sin=function(h){return Math.sin(this._toRadians(h))},a.default.prototype.tan=function(h){return Math.tan(this._toRadians(h))},a.default.prototype.degrees=function(h){return h*d.RAD_TO_DEG},a.default.prototype.radians=function(h){return h*d.DEG_TO_RAD},a.default.prototype.angleMode=function(h){if(a.default._validateParameters("angleMode",arguments),h===void 0)return this._angleMode;h!==d.DEGREES&&h!==d.RADIANS||h!==this._angleMode&&(h===d.RADIANS?(this._setProperty("pRotationX",this.pRotationX*d.DEG_TO_RAD),this._setProperty("pRotationY",this.pRotationY*d.DEG_TO_RAD),this._setProperty("pRotationZ",this.pRotationZ*d.DEG_TO_RAD)):(this._setProperty("pRotationX",this.pRotationX*d.RAD_TO_DEG),this._setProperty("pRotationY",this.pRotationY*d.RAD_TO_DEG),this._setProperty("pRotationZ",this.pRotationZ*d.RAD_TO_DEG)),this._angleMode=h)},a.default.prototype._toRadians=function(h){return this._angleMode===d.DEGREES?h*d.DEG_TO_RAD:h},a.default.prototype._toDegrees=function(h){return this._angleMode===d.RADIANS?h*d.RAD_TO_DEG:h},a.default.prototype._fromRadians=function(h){return this._angleMode===d.DEGREES?h*d.RAD_TO_DEG:h},a.default.prototype._fromDegrees=function(h){return this._angleMode===d.RADIANS?h*d.DEG_TO_RAD:h};var w=a.default;c.default=w},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],319:[function(t,o,c){t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};l.default.prototype.textAlign=function(f,a){var d;return l.default._validateParameters("textAlign",arguments),(d=this._renderer).textAlign.apply(d,arguments)},l.default.prototype.textLeading=function(f){var a;return l.default._validateParameters("textLeading",arguments),(a=this._renderer).textLeading.apply(a,arguments)},l.default.prototype.textSize=function(f){var a;return l.default._validateParameters("textSize",arguments),(a=this._renderer).textSize.apply(a,arguments)},l.default.prototype.textStyle=function(f){var a;return l.default._validateParameters("textStyle",arguments),(a=this._renderer).textStyle.apply(a,arguments)},l.default.prototype.textWidth=function(){for(var f=arguments.length,a=new Array(f),d=0;d<f;d++)a[d]=arguments[d];if(a[0]+="",l.default._validateParameters("textWidth",a),a[0].length===0)return 0;for(var _=a[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),w=[],h=0;h<_.length;h++)w.push(this._renderer.textWidth(_[h]));return Math.max.apply(Math,w)},l.default.prototype.textAscent=function(){for(var f=arguments.length,a=new Array(f),d=0;d<f;d++)a[d]=arguments[d];return l.default._validateParameters("textAscent",a),this._renderer.textAscent()},l.default.prototype.textDescent=function(){for(var f=arguments.length,a=new Array(f),d=0;d<f;d++)a[d]=arguments[d];return l.default._validateParameters("textDescent",a),this._renderer.textDescent()},l.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},l.default.prototype.textWrap=function(f){return l.default._validateParameters("textWrap",[f]),this._renderer.textWrap(f)},t=l.default,c.default=t},{"../core/main":283,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],320:[function(t,o,c){function l(b){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(b)}function f(b){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(v){return l(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":l(v)})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.split"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(m=t("../core/main"))&&m.__esModule?m:{default:m},d=h(t("../core/constants")),_=h(t("opentype.js"));function w(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,w=function(){return b},b)}function h(b){if(b&&b.__esModule)return b;if(b===null||f(b)!=="object"&&typeof b!="function")return{default:b};var v=w();if(v&&v.has(b))return v.get(b);var g,p,y={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in b)Object.prototype.hasOwnProperty.call(b,g)&&((p=S?Object.getOwnPropertyDescriptor(b,g):null)&&(p.get||p.set)?Object.defineProperty(y,g,p):y[g]=b[g]);return y.default=b,v&&v.set(b,y),y}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),a.default.prototype.loadFont=function(b,v,g){a.default._validateParameters("loadFont",arguments);var p=new a.default.Font(this),y=this;return _.load(b,function(A,N){if(A)return a.default._friendlyFileLoadError(4,b),g!==void 0?g(A):void console.error(A,b);p.font=N,v!==void 0&&v(p),y._decrementPreload();var A=b.split("\\").pop().split("/").pop(),N=A.lastIndexOf("."),C=N<1?null:A.slice(N+1);["ttf","otf","woff","woff2"].includes(C)&&(C=A.slice(0,N!==-1?N:0),(A=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(C,`;
src: url(`).concat(b,`);
}
`))),document.head.appendChild(A))}),p},a.default.prototype.text=function(b,v,g,p,y){var S;return a.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(S=this._renderer).text.apply(S,arguments):this},a.default.prototype.textFont=function(b,v){if(a.default._validateParameters("textFont",arguments),arguments.length){if(b)return this._renderer._setProperty("_textFont",b),v&&(this._renderer._setProperty("_textSize",v),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",v*d._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var m=a.default;c.default=m},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,"opentype.js":257}],321:[function(t,o,c){function l(T){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R})(T)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=(f=t("../core/main"))&&f.__esModule?f:{default:f},a=function(T){if(T&&T.__esModule)return T;if(T===null||_(T)!=="object"&&typeof T!="function")return{default:T};var R=d();if(R&&R.has(T))return R.get(T);var P,k={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(P in T){var D;Object.prototype.hasOwnProperty.call(T,P)&&((D=F?Object.getOwnPropertyDescriptor(T,P):null)&&(D.get||D.set)?Object.defineProperty(k,P,D):k[P]=T[P])}return k.default=T,R&&R.set(T,k),k}(t("../core/constants"));function d(){var T;return typeof WeakMap!="function"?null:(T=new WeakMap,d=function(){return T},T)}function _(T){return(_=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(R){return l(R)}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":l(R)})(T)}function w(T,R){for(var P=0;P<R.length;P++){var k=R[P];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(T,k.key,k)}}function h(T,R){var P=T.length;return T[R<0?R%P+P:R%P]}function m(T,R,P,k){var F,D,q;return k?(m.tmpPoint1===void 0&&(m.tmpPoint1=[],m.tmpPoint2=[]),D=m.tmpPoint1,q=m.tmpPoint2,D.x=R.x-T.x,D.y=R.y-T.y,q.x=P.x-R.x,q.y=P.y-R.y,F=D.x*q.x+D.y*q.y,D=Math.sqrt(D.x*D.x+D.y*D.y),q=Math.sqrt(q.x*q.x+q.y*q.y),Math.acos(F/(D*q))<k):(R[0]-T[0])*(P[1]-T[1])-(P[0]-T[0])*(R[1]-T[1])==0}function b(z,ee,$,le,ce,D,q,H,W){var Q=1-W,Z=Math.pow(Q,3),K=Math.pow(Q,2),M=W*W,re=M*W,J=Z*z+3*K*W*$+3*Q*W*W*ce+re*q,Z=Z*ee+3*K*W*le+3*Q*W*W*D+re*H,K=z+2*W*($-z)+M*(ce-2*$+z),re=ee+2*W*(le-ee)+M*(D-2*le+ee),oe=$+2*W*(ce-$)+M*(q-2*ce+$),M=le+2*W*(D-le)+M*(H-2*D+le),z=Q*z+W*$,$=Q*ee+W*le,ee=Q*ce+W*q,le=Q*D+W*H,ce=90-180*Math.atan2(K-oe,re-M)/Math.PI;return(oe<K||re<M)&&(ce+=180),{x:J,y:Z,m:{x:K,y:re},n:{x:oe,y:M},start:{x:z,y:$},end:{x:ee,y:le},alpha:ce}}function v(T,R,P,k,F,D,q,H,W){return W==null?N(T,R,P,k,F,D,q,H):b(T,R,P,k,F,D,q,H,function(Q,J,Z,K,re,oe,M,z,$){if(!($<0||N(Q,J,Z,K,re,oe,M,z)<$)){var ee,le=.5,ce=1-le;for(ee=N(Q,J,Z,K,re,oe,M,z,ce);.01<Math.abs(ee-$);)ee=N(Q,J,Z,K,re,oe,M,z,ce+=(ee<$?1:-1)*(le/=2));return ce}}(T,R,P,k,F,D,q,H,W))}function g(T,R,P){for(var k,F,D,q,H,W=0,Q=0,J=(T=function(Z,K){function re(Oe,Me,Ue){var et,Fe;if(!Oe)return["C",Me.x,Me.y,Me.x,Me.y,Me.x,Me.y];switch(Oe[0]in{T:1,Q:1}||(Me.qx=Me.qy=null),Oe[0]){case"M":Me.X=Oe[1],Me.Y=Oe[2];break;case"A":Oe=["C"].concat(y.apply(0,[Me.x,Me.y].concat(Oe.slice(1))));break;case"S":Fe=Ue==="C"||Ue==="S"?(et=2*Me.x-Me.bx,2*Me.y-Me.by):(et=Me.x,Me.y),Oe=["C",et,Fe].concat(Oe.slice(1));break;case"T":Ue==="Q"||Ue==="T"?(Me.qx=2*Me.x-Me.qx,Me.qy=2*Me.y-Me.qy):(Me.qx=Me.x,Me.qy=Me.y),Oe=["C"].concat(A(Me.x,Me.y,Me.qx,Me.qy,Oe[1],Oe[2]));break;case"Q":Me.qx=Oe[1],Me.qy=Oe[2],Oe=["C"].concat(A(Me.x,Me.y,Oe[1],Oe[2],Oe[3],Oe[4]));break;case"L":Oe=["C"].concat(j(Me.x,Me.y,Oe[1],Oe[2]));break;case"H":Oe=["C"].concat(j(Me.x,Me.y,Oe[1],Me.y));break;case"V":Oe=["C"].concat(j(Me.x,Me.y,Me.x,Oe[1]));break;case"Z":Oe=["C"].concat(j(Me.x,Me.y,Me.X,Me.Y))}return Oe}function oe(Oe,Me){if(7<Oe[Me].length){Oe[Me].shift();for(var Ue=Oe[Me];Ue.length;)me[Me]="A",ee&&(ve[Me]="A"),Oe.splice(Me++,0,["C"].concat(Ue.splice(0,6)));Oe.splice(Me,1),z=Math.max($.length,ee&&ee.length||0)}}function M(Oe,Me,Ue,et,Fe){Oe&&Me&&Oe[Fe][0]==="M"&&Me[Fe][0]!=="M"&&(Me.splice(Fe,0,["M",et.x,et.y]),Ue.bx=0,Ue.by=0,Ue.x=Oe[Fe][1],Ue.y=Oe[Fe][2],z=Math.max($.length,ee&&ee.length||0))}var z,$=p(Z),ee=K&&p(K),le={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ce={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},me=[],ve=[],ge="",we="";z=Math.max($.length,ee&&ee.length||0);for(var xe=0;xe<z;xe++){(ge=$[xe]?$[xe][0]:ge)!=="C"&&(me[xe]=ge,xe&&(we=me[xe-1])),$[xe]=re($[xe],le,we),me[xe]!=="A"&&ge==="C"&&(me[xe]="C"),oe($,xe),ee&&((ge=ee[xe]?ee[xe][0]:ge)!=="C"&&(ve[xe]=ge,xe&&(we=ve[xe-1])),ee[xe]=re(ee[xe],ce,we),ve[xe]!=="A"&&ge==="C"&&(ve[xe]="C"),oe(ee,xe)),M($,ee,le,ce,xe),M(ee,$,ce,le,xe);var fe=$[xe],Se=ee&&ee[xe],Ce=fe.length,Ne=ee&&Se.length;le.x=fe[Ce-2],le.y=fe[Ce-1],le.bx=parseFloat(fe[Ce-4])||le.x,le.by=parseFloat(fe[Ce-3])||le.y,ce.bx=ee&&(parseFloat(Se[Ne-4])||ce.x),ce.by=ee&&(parseFloat(Se[Ne-3])||ce.y),ce.x=ee&&Se[Ne-2],ce.y=ee&&Se[Ne-1]}return ee?[$,ee]:$}(T)).length;Q<J;Q++){if((D=T[Q])[0]==="M")k=+D[1],F=+D[2];else{if(R<W+(q=v(k,F,D[1],D[2],D[3],D[4],D[5],D[6]))&&!P)return{x:(H=v(k,F,D[1],D[2],D[3],D[4],D[5],D[6],R-W)).x,y:H.y,alpha:H.alpha};W+=q,k=+D[5],F=+D[6]}D.shift()}return H=(H=P?W:b(k,F,D[0],D[1],D[2],D[3],D[4],D[5],1)).alpha?{x:H.x,y:H.y,alpha:H.alpha}:H}function p(T){var R=[],P=0,k=0,F=0,D=0,q=0;if(T){T[0][0]==="M"&&(F=P=+T[0][1],D=k=+T[0][2],q++,R[0]=["M",P,k]);for(var H,W,Q=T.length===3&&T[0][0]==="M"&&T[1][0].toUpperCase()==="R"&&T[2][0].toUpperCase()==="Z",J=q,Z=T.length;J<Z;J++){if(R.push(H=[]),(W=T[J])[0]!==W[0].toUpperCase())switch(H[0]=W[0].toUpperCase(),H[0]){case"A":H[1]=W[1],H[2]=W[2],H[3]=W[3],H[4]=W[4],H[5]=W[5],H[6]=+(W[6]+P),H[7]=+(W[7]+k);break;case"V":H[1]=+W[1]+k;break;case"H":H[1]=+W[1]+P;break;case"R":for(var K,re=2,oe=(K=[P,k].concat(W.slice(1))).length;re<oe;re++)K[re]=+K[re]+P,K[++re]=+K[re]+k;R.pop(),R=R.concat(S(K,Q));break;case"M":F=+W[1]+P,D=+W[2]+k;break;default:for(var M=1,z=W.length;M<z;M++)H[M]=+W[M]+(M%2?P:k)}else if(W[0]==="R")K=[P,k].concat(W.slice(1)),R.pop(),R=R.concat(S(K,Q)),H=["R"].concat(W.slice(-2));else for(var $=0,ee=W.length;$<ee;$++)H[$]=W[$];switch(H[0]){case"Z":P=F,k=D;break;case"H":P=H[1];break;case"V":k=H[1];break;case"M":F=H[H.length-2],D=H[H.length-1];break;default:P=H[H.length-2],k=H[H.length-1]}}}return R}function y(T,R,P,k,ee,me,le,H,W,Q){function J(Ne,Oe,Me){return{x:Ne*Math.cos(Me)-Oe*Math.sin(Me),y:Ne*Math.sin(Me)+Oe*Math.cos(Me)}}var Z,z=Math.PI,$=120*z/180,K=z/180*(+ee||0),re=[],oe=(Q?(xe=Q[0],Z=Q[1],ge=Q[2],we=Q[3]):(T=(ce=J(T,R,-K)).x,R=ce.y,1<(oe=(M=(T-(H=(ce=J(H,W,-K)).x))/2)*M/(P*P)+(ce=(R-(W=ce.y))/2)*ce/(k*k))&&(P*=oe=Math.sqrt(oe),k*=oe),oe=P*P,ve=k*k,ge=(me=(me===le?-1:1)*Math.sqrt(Math.abs((oe*ve-oe*ce*ce-ve*M*M)/(oe*ce*ce+ve*M*M))))*P*ce/k+(T+H)/2,we=me*-k*M/P+(R+W)/2,xe=Math.asin(((R-we)/k).toFixed(9)),Z=Math.asin(((W-we)/k).toFixed(9)),(xe=T<ge?z-xe:xe)<0&&(xe=2*z+xe),(Z=H<ge?z-Z:Z)<0&&(Z=2*z+Z),le&&Z<xe&&(xe-=2*z),!le&&xe<Z&&(Z-=2*z)),Z-xe),M=(Math.abs(oe)>$&&(ve=Z,ce=H,me=W,Z=xe+$*(le&&xe<Z?1:-1),re=y(H=ge+P*Math.cos(Z),W=we+k*Math.sin(Z),P,k,ee,0,le,ce,me,[Z,ve,ge,we])),oe=Z-xe,Math.cos(xe)),z=Math.sin(xe),$=Math.cos(Z),ee=Math.sin(Z),le=Math.tan(oe/4),ce=4/3*P*le,me=4/3*k*le,ve=[T,R],ge=[T+ce*z,R-me*M],we=[H+ce*ee,W-me*$],xe=[H,W];if(ge[0]=2*ve[0]-ge[0],ge[1]=2*ve[1]-ge[1],Q)return[ge,we,xe].concat(re);for(var fe=[],Se=0,Ce=(re=[ge,we,xe].concat(re).join().split(",")).length;Se<Ce;Se++)fe[Se]=Se%2?J(re[Se-1],re[Se],K).y:J(re[Se],re[Se+1],K).x;return fe}function S(T,R){for(var P=[],k=0,F=T.length;k<F-2*!R;k+=2){var D=[{x:+T[k-2],y:+T[k-1]},{x:+T[k],y:+T[k+1]},{x:+T[k+2],y:+T[k+3]},{x:+T[k+4],y:+T[k+5]}];R?k?F-4===k?D[3]={x:+T[0],y:+T[1]}:F-2===k&&(D[2]={x:+T[0],y:+T[1]},D[3]={x:+T[2],y:+T[3]}):D[0]={x:+T[F-2],y:+T[F-1]}:F-4===k?D[3]=D[2]:k||(D[0]={x:+T[k],y:+T[k+1]}),P.push(["C",(-D[0].x+6*D[1].x+D[2].x)/6,(-D[0].y+6*D[1].y+D[2].y)/6,(D[1].x+6*D[2].x-D[3].x)/6,(D[1].y+6*D[2].y-D[3].y)/6,D[2].x,D[2].y])}return P}function j(T,R,P,k){return[T,R,P,k,P,k]}function A(T,R,P,k,F,D){return[1/3*T+2/3*P,1/3*R+2/3*k,1/3*F+2/3*P,1/3*D+2/3*k,F,D]}function N(T,R,P,k,F,D,q,H,W){for(var Q=(W=1<(W=W??1)?1:W<0?0:W)/2,J=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Z=0,K=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],re=0;re<12;re++){var M=Q*J[re]+Q,oe=C(M,T,P,F,q),M=C(M,R,k,D,H);Z+=K[re]*Math.sqrt(oe*oe+M*M)}return Q*Z}function C(T,R,P,k,F){return T*(T*(-3*R+9*P-9*k+3*F)+6*R-12*P+6*k)-3*R+3*P}f.default.Font=function(){function T(k){if(!(this instanceof T))throw new TypeError("Cannot call a class as a function");this.parent=k,this.cache={},this.font=void 0}var R,P;return R=T,(P=[{key:"textBounds",value:function(k){var F=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,D=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,Q=3<arguments.length?arguments[3]:void 0,q=4<arguments.length?arguments[4]:void 0,H=q&&q.renderer&&q.renderer._pInst||this.parent,W=H._renderer.drawingContext,Q=(W.textAlign||a.LEFT,W.textBaseline||a.BASELINE,Q||H._renderer._textSize);if(!ce){for(var J=[],Z=[],K=[],re=(K[0]=[],[]),oe=this._scale(Q),M=H._renderer.textLeading(),z=0,$=(this.font.forEachGlyph(k,F,D,Q,q,function(ge,we,xe,fe){var Se=ge.getMetrics();ge.index===0?K[z+=1]=[]:(K[z].push(we+Se.xMin*oe),K[z].push(we+Se.xMax*oe),re.push(xe+z*M+-Se.yMin*oe),re.push(xe+z*M+-Se.yMax*oe))}),0<K[z].length&&(J[z]=Math.min.apply(null,K[z]),Z[z]=Math.max.apply(null,K[z])),0),ee=0;ee<=z;ee++){J[ee]=Math.min.apply(null,K[ee]),Z[ee]=Math.max.apply(null,K[ee]);var le=Z[ee]-J[ee];$<le&&($=le)}var W=Math.min.apply(null,J),ce={x:W,y:D=Math.min.apply(null,re),h:Math.max.apply(null,re)-D,w:$,advance:W-F},Q=this._handleAlignment(H._renderer,k,ce.x,ce.y,ce.w+ce.advance);ce.x=Q.x,ce.y=Q.y}return ce}},{key:"textToPoints",value:function(k,F,D,q,H){var W,Q=F,J=[],Z=this.parent,K=k.split(/\r?\n|\r|\n/g);q=q||this.parent._renderer._textSize;for(var re,oe,M,z=0;z<K.length;z++){var $=0;F=Q;for(var ee=(ee=K[z]).replace("	","  "),le=this._getGlyphs(ee),ce=0;ce<le.length;ce++){if(oe=ee,!((M=le)[re=ce].name&&M[re].name==="space"||oe.length===M.length&&oe[re]===" "))for(var me=function(xe){for(var fe,Se=[],Ce=0;Ce<xe.length;Ce++)xe[Ce].type==="M"&&(fe&&Se.push(fe),fe=[]),fe.push(function(Ne){var Oe=[Ne.type];return Ne.type==="M"||Ne.type==="L"?Oe.push(Ne.x,Ne.y):Ne.type==="C"?Oe.push(Ne.x1,Ne.y1,Ne.x2,Ne.y2,Ne.x,Ne.y):Ne.type==="Q"&&Oe.push(Ne.x1,Ne.y1,Ne.x,Ne.y),Oe}(xe[Ce]));return Se.push(fe),Se}(le[ce].getPath(F,D,q).commands),ve=0;ve<me.length;ve++)for(var ge=function(xe,fe){for(var fe=function(Ue,et){if(_(Ue)!=="object")Ue=et;else for(var Fe in et)Ue[Fe]===void 0&&(Ue[Fe]=et[Fe]);return Ue}(fe,{sampleFactor:.1,simplifyThreshold:0}),Se=g(xe,0,1),Ce=Se/(Se*fe.sampleFactor),Ne=[],Oe=0;Oe<Se;Oe+=Ce)Ne.push(g(xe,Oe));return fe.simplifyThreshold&&function(Me){for(var Ue=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,et=0,Fe=Me.length-1;3<Me.length&&0<=Fe;--Fe)m(h(Me,Fe-1),h(Me,Fe),h(Me,Fe+1),Ue)&&(Me.splice(Fe%Me.length,1),et++)}(Ne,fe.simplifyThreshold),Ne}(me[ve],H),we=0;we<ge.length;we++)ge[we].x+=$,W=this._handleAlignment(Z._renderer,ee,ge[we].x,ge[we].y),ge[we].x=W.x,ge[we].y=W.y,J.push(ge[we]);$+=le[ce].advanceWidth*this._scale(q)}D+=this.parent._renderer._textLeading}return J}},{key:"_getGlyphs",value:function(k){return this.font.stringToGlyphs(k)}},{key:"_getPath",value:function(k,W,D,q){var H=(q&&q.renderer&&q.renderer._pInst||this.parent)._renderer,W=this._handleAlignment(H,k,W,D);return this.font.getPath(k,W.x,W.y,H._textSize,q)}},{key:"_getPathData",value:function(k,F,D,q){var H=3;return typeof k=="string"&&2<arguments.length?k=this._getPath(k,F,D,q):_(F)==="object"&&(q=F),q&&typeof q.decimals=="number"&&(H=q.decimals),k.toPathData(H)}},{key:"_getSVG",value:function(k,F,D,q){var H=3;return typeof k=="string"&&2<arguments.length?k=this._getPath(k,F,D,q):_(F)==="object"&&(q=F),q&&(typeof q.decimals=="number"&&(H=q.decimals),typeof q.strokeWidth=="number"&&(k.strokeWidth=q.strokeWidth),q.fill!==void 0&&(k.fill=q.fill),q.stroke!==void 0&&(k.stroke=q.stroke)),k.toSVG(H)}},{key:"_renderPath",value:function(Q,Z,K,q){var H=q&&q.renderer||this.parent._renderer,W=H.drawingContext,Q=(_(Q)==="object"&&Q.commands?Q:this._getPath(Q,Z,K,q)).commands,J=(H._clipping||W.beginPath(),!0),Z=!1,K=void 0;try{for(var re,oe=Q[Symbol.iterator]();!(J=(re=oe.next()).done);J=!0){var M=re.value;M.type==="M"?W.moveTo(M.x,M.y):M.type==="L"?W.lineTo(M.x,M.y):M.type==="C"?W.bezierCurveTo(M.x1,M.y1,M.x2,M.y2,M.x,M.y):M.type==="Q"?W.quadraticCurveTo(M.x1,M.y1,M.x,M.y):M.type==="Z"&&W.closePath()}}catch(z){Z=!0,K=z}finally{try{J||oe.return==null||oe.return()}finally{if(Z)throw K}}return H._doStroke&&H._strokeSet&&!H._clipping&&W.stroke(),H._doFill&&!H._clipping&&(H._fillSet||H._setFill(a._DEFAULT_TEXT_FILL),W.fill()),this}},{key:"_textWidth",value:function(k,F){return this.font.getAdvanceWidth(k,F)}},{key:"_textAscent",value:function(k){return this.font.ascender*this._scale(k)}},{key:"_textDescent",value:function(k){return-this.font.descender*this._scale(k)}},{key:"_scale",value:function(k){return 1/this.font.unitsPerEm*(k||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(k,F,D,q,H){var W=k._textSize;switch(H===void 0&&(H=this._textWidth(F,W)),k._textAlign){case a.CENTER:D-=H/2;break;case a.RIGHT:D-=H}switch(k._textBaseline){case a.TOP:q+=this._textAscent(W);break;case a.CENTER:q+=this._textAscent(W)/2;break;case a.BOTTOM:q-=this._textDescent(W)}return{x:D,y:q}}}])&&w(R.prototype,P),T}(),t=f.default,c.default=t},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],322:[function(t,o,c){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.append=function(l,f){return l.push(f),l},t.default.prototype.arrayCopy=function(l,f,a,d,_){var w,h;l=_!==void 0?(h=Math.min(_,l.length),w=d,l.slice(f,h+f)):(h=a!==void 0?(h=a,Math.min(h,l.length)):l.length,a=f,l.slice(w=0,h)),Array.prototype.splice.apply(a,[w,h].concat(l))},t.default.prototype.concat=function(l,f){return l.concat(f)},t.default.prototype.reverse=function(l){return l.reverse()},t.default.prototype.shorten=function(l){return l.pop(),l},t.default.prototype.shuffle=function(l,f){for(var a,d,_=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(l),w=(l=f||_?l:l.slice()).length;1<w;)a=this.random(0,1)*w|0,d=l[--w],l[w]=l[a],l[a]=d;return l},t.default.prototype.sort=function(l,d){var a=d?l.slice(0,Math.min(d,l.length)):l,d=d?l.slice(Math.min(d,l.length)):[];return(a=typeof a[0]=="string"?a.sort():a.sort(function(_,w){return _-w})).concat(d)},t.default.prototype.splice=function(l,f,a){return Array.prototype.splice.apply(l,[a,0].concat(f)),l},t.default.prototype.subset=function(l,f,a){return a!==void 0?l.slice(f,f+a):l.slice(f,l.length)},t=t.default,c.default=t},{"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.to-string":190}],323:[function(t,o,c){t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};l.default.prototype.float=function(f){return f instanceof Array?f.map(parseFloat):parseFloat(f)},l.default.prototype.int=function(f){var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return f===1/0||f==="Infinity"?1/0:f===-1/0||f==="-Infinity"?-1/0:typeof f=="string"?parseInt(f,a):typeof f=="number"?0|f:typeof f=="boolean"?f?1:0:f instanceof Array?f.map(function(d){return l.default.prototype.int(d,a)}):void 0},l.default.prototype.str=function(f){return f instanceof Array?f.map(l.default.prototype.str):String(f)},l.default.prototype.boolean=function(f){return typeof f=="number"?f!==0:typeof f=="string"?f.toLowerCase()==="true":typeof f=="boolean"?f:f instanceof Array?f.map(l.default.prototype.boolean):void 0},l.default.prototype.byte=function(f){return f=l.default.prototype.int(f,10),typeof f=="number"?(f+128)%256-128:f instanceof Array?f.map(l.default.prototype.byte):void 0},l.default.prototype.char=function(f){return typeof f!="number"||isNaN(f)?f instanceof Array?f.map(l.default.prototype.char):typeof f=="string"?l.default.prototype.char(parseInt(f,10)):void 0:String.fromCharCode(f)},l.default.prototype.unchar=function(f){return typeof f=="string"&&f.length===1?f.charCodeAt(0):f instanceof Array?f.map(l.default.prototype.unchar):void 0},l.default.prototype.hex=function(f,a){if(a=a??8,f instanceof Array)return f.map(function(_){return l.default.prototype.hex(_,a)});if(f===1/0||f===-1/0)return(f===1/0?"F":"0").repeat(a);if(typeof f=="number"){f<0&&(f=4294967295+f+1);for(var d=Number(f).toString(16).toUpperCase();d.length<a;)d="0".concat(d);return d=d.length>=a?d.substring(d.length-a,d.length):d}},l.default.prototype.unhex=function(f){return f instanceof Array?f.map(l.default.prototype.unhex):parseInt("0x".concat(f),16)},t=l.default,c.default=t},{"../core/main":283,"core-js/modules/es.array.map":168,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.repeat":203}],324:[function(t,o,c){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(h=t("../core/main"))&&h.__esModule?h:{default:h};function f(m,b){return function(v){if(Array.isArray(v))return v}(m)||function(v,g){if(Symbol.iterator in Object(v)||Object.prototype.toString.call(v)==="[object Arguments]"){var p=[],y=!0,S=!1,j=void 0;try{for(var A,N=v[Symbol.iterator]();!(y=(A=N.next()).done)&&(p.push(A.value),!g||p.length!==g);y=!0);}catch(C){S=!0,j=C}finally{try{y||N.return==null||N.return()}finally{if(S)throw j}}return p}}(m,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(m,b,v){var g,p=m<0,S=f((m=Math.abs(m)).toString().split("."),2),y=S[0],S=S[1];return v===void 0?(y=y.padStart(b,"0"),g=S?y+"."+S:y,p?"-"+g:g):(y=(g=f(m.toFixed(v).toString().split("."),2))[0],S=g[1],y=y.padStart(b,"0"),m=S===void 0?y:y+"."+S,p?"-"+m:m)}function d(p,b){var v=(p=p.toString()).indexOf("."),g=v!==-1?p.substring(v):"",p=(p=v!==-1?p.substring(0,v):p).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(b===0)g="";else if(b!==void 0)if(b>g.length)for(var y=b-(g+=v===-1?".":"").length+1,S=0;S<y;S++)g+="0";else g=g.substring(0,b+1);return p+g}function _(m){return 0<parseFloat(m)?"+".concat(m.toString()):m.toString()}function w(m){return 0<=parseFloat(m)?" ".concat(m.toString()):m.toString()}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),l.default.prototype.join=function(m,b){return l.default._validateParameters("join",arguments),m.join(b)},l.default.prototype.match=function(m,b){return l.default._validateParameters("match",arguments),m.match(b)},l.default.prototype.matchAll=function(m,b){l.default._validateParameters("matchAll",arguments);for(var v=new RegExp(b,"g"),g=v.exec(m),p=[];g!==null;)p.push(g),g=v.exec(m);return p},l.default.prototype.nf=function(m,b,v){return l.default._validateParameters("nf",arguments),m instanceof Array?m.map(function(g){return a(g,b,v)}):Object.prototype.toString.call(m)==="[object Arguments]"?m.length===3?this.nf(m[0],m[1],m[2]):m.length===2?this.nf(m[0],m[1]):this.nf(m[0]):a(m,b,v)},l.default.prototype.nfc=function(m,b){return l.default._validateParameters("nfc",arguments),m instanceof Array?m.map(function(v){return d(v,b)}):d(m,b)},l.default.prototype.nfp=function(){for(var m=arguments.length,b=new Array(m),v=0;v<m;v++)b[v]=arguments[v];l.default._validateParameters("nfp",b);var g=l.default.prototype.nf.apply(this,b);return g instanceof Array?g.map(_):_(g)},l.default.prototype.nfs=function(){for(var m=arguments.length,b=new Array(m),v=0;v<m;v++)b[v]=arguments[v];l.default._validateParameters("nfs",b);var g=l.default.prototype.nf.apply(this,b);return g instanceof Array?g.map(w):w(g)},l.default.prototype.split=function(m,b){return l.default._validateParameters("split",arguments),m.split(b)},l.default.prototype.splitTokens=function(m,b){var v,g;return l.default._validateParameters("splitTokens",arguments),g=b!==void 0?(g=/\]/g.exec(b=b),(v=/\[/g.exec(b))&&g?(b=b.slice(0,g.index)+b.slice(g.index+1),v=/\[/g.exec(b),b=b.slice(0,v.index)+b.slice(v.index+1),new RegExp("[\\[".concat(b,"\\]]"),"g")):g?(b=b.slice(0,g.index)+b.slice(g.index+1),new RegExp("[".concat(b,"\\]]"),"g")):v?(b=b.slice(0,v.index)+b.slice(v.index+1),new RegExp("[".concat(b,"\\[]"),"g")):new RegExp("[".concat(b,"]"),"g")):/\s/g,m.split(g).filter(function(p){return p})},l.default.prototype.trim=function(m){return l.default._validateParameters("trim",arguments),m instanceof Array?m.map(this.trim):m.trim()};var h=l.default;c.default=h},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.pad-start":202,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],325:[function(t,o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.day=function(){return new Date().getDate()},t.default.prototype.hour=function(){return new Date().getHours()},t.default.prototype.minute=function(){return new Date().getMinutes()},t.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},t.default.prototype.month=function(){return new Date().getMonth()+1},t.default.prototype.second=function(){return new Date().getSeconds()},t.default.prototype.year=function(){return new Date().getFullYear()},t=t.default,c.default=t},{"../core/main":283}],326:[function(t,o,c){function l(m){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(m)}function f(m){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(b){return l(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":l(b)})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(h=t("../core/main"))&&h.__esModule?h:{default:h},d=(t("./p5.Geometry"),function(m){if(m&&m.__esModule)return m;if(m===null||f(m)!=="object"&&typeof m!="function")return{default:m};var b=_();if(b&&b.has(m))return b.get(m);var v,g={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in m){var y;Object.prototype.hasOwnProperty.call(m,v)&&((y=p?Object.getOwnPropertyDescriptor(m,v):null)&&(y.get||y.set)?Object.defineProperty(g,v,y):g[v]=m[v])}return g.default=m,b&&b.set(m,g),g}(t("../core/constants")));function _(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,_=function(){return m},m)}a.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},a.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},a.default.prototype.buildGeometry=function(m){return this._renderer.buildGeometry(m)},a.default.prototype.freeGeometry=function(m){this._renderer._freeBuffers(m.gid)},a.default.prototype.plane=function(){var m,b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,v=1<arguments.length&&arguments[1]!==void 0?arguments[1]:b,g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,y=(this._assert3d("plane"),a.default._validateParameters("plane",arguments),"plane|".concat(g,"|").concat(p));return this._renderer.geometryInHash(y)||((m=new a.default.Geometry(g,p,function(){for(var S,j,A=0;A<=this.detailY;A++)for(var N=A/this.detailY,C=0;C<=this.detailX;C++)S=C/this.detailX,j=new a.default.Vector(S-.5,N-.5,0),this.vertices.push(j),this.uvs.push(S,N)})).computeFaces().computeNormals(),g<=1&&p<=1?m._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(y,m)),this._renderer.drawBuffersScaled(y,b,v,1),this},a.default.prototype.box=function(m,b,v,g,p){this._assert3d("box"),a.default._validateParameters("box",arguments),m===void 0&&(m=50),b===void 0&&(b=m),v===void 0&&(v=b);var y,S=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,S=(p===void 0&&(p=S?1:4),"box|".concat(g=g===void 0?S?1:4:g,"|").concat(p));return this._renderer.geometryInHash(S)||((y=new a.default.Geometry(g,p,function(){var j=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(A,N){for(var N=4*N,C=0;C<4;C++){var T=A[C],T=new a.default.Vector((2*(1&T)-1)/2,((2&T)-1)/2,((4&T)/2-1)/2);j.vertices.push(T),j.uvs.push(1&C,(2&C)/2)}j.faces.push([N,1+N,2+N]),j.faces.push([2+N,1+N,3+N])})})).computeNormals(),g<=4&&p<=4?y._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(S,y)),this._renderer.drawBuffersScaled(S,m,b,v),this},a.default.prototype.sphere=function(){var m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:24,v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:16;return this._assert3d("sphere"),a.default._validateParameters("sphere",arguments),this.ellipsoid(m,m,m,b,v),this};function w(m,b,v,g,p,y,S){m=m<=0?1:m,b=b<0?0:b,v=v<=0?m:v,g=g<3?3:g;for(var j,A,N=(y=y===void 0||y)?-2:0,C=(p=p<1?1:p)+((S=S===void 0?b!==0:S)?2:0),T=Math.atan2(m-b,v),R=Math.sin(T),P=Math.cos(T),k=N;k<=C;++k){var F=k/p,D=v*F,q=void 0,q=k<0?(F=D=0,m):p<k?(D=v,F=1,b):m+(b-m)*F;for(k!==-2&&k!==p+2||(q=0),D-=v/2,j=0;j<g;++j){var H=j/(g-1),Q=2*Math.PI*H,W=Math.sin(Q),Q=Math.cos(Q),J=(this.vertices.push(new a.default.Vector(W*q,D,Q*q)),void 0),J=k<0?new a.default.Vector(0,-1,0):p<k&&b?new a.default.Vector(0,1,0):new a.default.Vector(W*P,R,Q*P);this.vertexNormals.push(J),this.uvs.push(H,F)}}var Z=0;if(y){for(A=0;A<g;++A)this.faces.push([Z+A,Z+g+(A+1)%g,Z+g+A]);Z+=2*g}for(k=0;k<p;++k){for(j=0;j<g;++j){var K=(j+1)%g;this.faces.push([Z+j,Z+K,Z+g+K]),this.faces.push([Z+j,Z+g+K,Z+g+j])}Z+=g}if(S)for(Z+=g,j=0;j<g;++j)this.faces.push([Z+j,Z+(j+1)%g,Z+g])}a.default.prototype.cylinder=function(){var m,b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,v=1<arguments.length&&arguments[1]!==void 0?arguments[1]:b,g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,y=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],S=!(5<arguments.length&&arguments[5]!==void 0)||arguments[5],j=(this._assert3d("cylinder"),a.default._validateParameters("cylinder",arguments),"cylinder|".concat(g,"|").concat(p,"|").concat(y,"|").concat(S));return this._renderer.geometryInHash(j)||(m=new a.default.Geometry(g,p),w.call(m,1,1,1,g,p,y,S),g<=24&&p<=16?m._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(j,m)),this._renderer.drawBuffersScaled(j,b,v,b),this},a.default.prototype.cone=function(){var m,b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,v=1<arguments.length&&arguments[1]!==void 0?arguments[1]:b,g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,y=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],S=(this._assert3d("cone"),a.default._validateParameters("cone",arguments),"cone|".concat(g,"|").concat(p,"|").concat(y));return this._renderer.geometryInHash(S)||(m=new a.default.Geometry(g,p),w.call(m,1,0,1,g,p,y,!1),g<=24&&p<=16?m._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(S,m)),this._renderer.drawBuffersScaled(S,b,v,b),this},a.default.prototype.ellipsoid=function(){var m,b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,v=1<arguments.length&&arguments[1]!==void 0?arguments[1]:b,g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:b,p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:24,y=4<arguments.length&&arguments[4]!==void 0?arguments[4]:16,S=(this._assert3d("ellipsoid"),a.default._validateParameters("ellipsoid",arguments),"ellipsoid|".concat(p,"|").concat(y));return this._renderer.geometryInHash(S)||((m=new a.default.Geometry(p,y,function(){for(var j=0;j<=this.detailY;j++)for(var A=j/this.detailY,N=Math.PI*A-Math.PI/2,C=Math.cos(N),T=Math.sin(N),R=0;R<=this.detailX;R++){var P=R/this.detailX,F=2*Math.PI*P,k=Math.cos(F),F=Math.sin(F),F=new a.default.Vector(C*F,T,C*k);this.vertices.push(F),this.vertexNormals.push(F),this.uvs.push(P,A)}})).computeFaces(),p<=24&&y<=24?m._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(S,m)),this._renderer.drawBuffersScaled(S,b,v,g),this},a.default.prototype.torus=function(m,S,v,g){if(this._assert3d("torus"),a.default._validateParameters("torus",arguments),m===void 0)m=50;else if(!m)return;if(S===void 0)S=10;else if(!S)return;v===void 0&&(v=24),g===void 0&&(g=16);var p,y=(S/m).toPrecision(4),S="torus|".concat(y,"|").concat(v,"|").concat(g);return this._renderer.geometryInHash(S)||((p=new a.default.Geometry(v,g,function(){for(var j=0;j<=this.detailY;j++)for(var A=j/this.detailY,N=2*Math.PI*A,C=Math.cos(N),T=Math.sin(N),R=1+y*C,P=0;P<=this.detailX;P++){var k=P/this.detailX,F=2*Math.PI*k,q=Math.cos(F),F=Math.sin(F),D=new a.default.Vector(R*q,R*F,y*T),q=new a.default.Vector(C*q,C*F,T);this.vertices.push(D),this.vertexNormals.push(q),this.uvs.push(k,A)}})).computeFaces(),v<=24&&g<=16?p._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(S,p)),this._renderer.drawBuffersScaled(S,m,m,m),this},a.default.RendererGL.prototype.point=function(m,b){var v=[];return v.push(new a.default.Vector(m,b,2<arguments.length&&arguments[2]!==void 0?arguments[2]:0)),this._drawPoints(v,this.immediateMode.buffers.point),this},a.default.RendererGL.prototype.triangle=function(S){var b=S[0],v=S[1],g=S[2],p=S[3],y=S[4],S=S[5],j=(this.geometryInHash("tri")||((j=new a.default.Geometry(1,1,function(){var C=[];C.push(new a.default.Vector(0,0,0)),C.push(new a.default.Vector(1,0,0)),C.push(new a.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=C,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),j.computeNormals(),this.createBuffers("tri",j)),this.uModelMatrix.copy());try{var A=Math.sign(b*p-g*v+g*S-y*p+y*v-b*S),N=new a.default.Matrix([g-b,p-v,0,0,y-b,S-v,0,0,0,0,A,0,b,v,0,1]).mult(this.uModelMatrix);this.uModelMatrix=N,this.drawBuffers("tri")}finally{this.uModelMatrix=j}return this},a.default.RendererGL.prototype.ellipse=function(m){this.arc(m[0],m[1],m[2],m[3],0,d.TWO_PI,d.OPEN,m[4])},a.default.RendererGL.prototype.arc=function(){var m,b=arguments.length<=0?void 0:arguments[0],v=arguments.length<=1?void 0:arguments[1],g=arguments.length<=2?void 0:arguments[2],p=arguments.length<=3?void 0:arguments[3],y=arguments.length<=4?void 0:arguments[4],S=arguments.length<=5?void 0:arguments[5],j=arguments.length<=6?void 0:arguments[6],A=(arguments.length<=7?void 0:arguments[7])||25,N=(Math.abs(S-y)>=d.TWO_PI?"".concat(C="ellipse","|"):"".concat(C="arc","|").concat(y,"|").concat(S,"|").concat(j,"|")).concat(A,"|"),C=(this.geometryInHash(N)||((m=new a.default.Geometry(A,1,function(){if(y.toFixed(10)!==S.toFixed(10)){j!==d.PIE&&j!==void 0||(this.vertices.push(new a.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var T=0;T<=A;T++){var P=(S-y)*(T/A)+y,R=.5+Math.cos(P)/2,P=.5+Math.sin(P)/2;this.vertices.push(new a.default.Vector(R,P,0)),this.uvs.push([R,P]),T<A-1&&(this.faces.push([0,T+1,T+2]),this.edges.push([T+1,T+2]))}switch(j){case d.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case d.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case d.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),A<=50?m._edgesToVertices(m):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(C," with more than 50 detail")),this.createBuffers(N,m)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([b,v,0]),this.uModelMatrix.scale(g,p,1),this.drawBuffers(N)}finally{this.uModelMatrix=C}return this},a.default.RendererGL.prototype.rect=function(m){var b=m[0],v=m[1],g=m[2],p=m[3];if(m[4]===void 0){var j=this._pInst._glAttributes.perPixelLighting,y=m[4]||(j?1:24),S=m[5]||(j?1:16),j="rect|".concat(y,"|").concat(S),A=(this.geometryInHash(j)||((A=new a.default.Geometry(y,S,function(){for(var J=0;J<=this.detailY;J++)for(var Z=J/this.detailY,K=0;K<=this.detailX;K++){var re=K/this.detailX,oe=new a.default.Vector(re,Z,0);this.vertices.push(oe),this.uvs.push(re,Z)}0<y&&0<S&&(this.edges=[[0,y],[y,(y+1)*(S+1)-1],[(y+1)*(S+1)-1,(y+1)*S],[(y+1)*S,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(j,A)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([b,v,0]),this.uModelMatrix.scale(g,p,1),this.drawBuffers(j)}finally{this.uModelMatrix=A}}else{var j=m[4],A=m[5]===void 0?j:m[5],N=m[6]===void 0?A:m[6],m=m[7]===void 0?N:m[7],F=g,C=p,P=((F+=b)<b&&(P=b,b=F,F=P),(C+=v)<v&&(P=v,v=C,C=P),Math.min((F-b)/2,(C-v)/2)),T=(P<j&&(j=P),P<A&&(A=P),P<N&&(N=P),P<m&&(m=P),b),R=v,P=F,b=C,k=(this.beginShape(),A!==0?(this.vertex(P-A,R),this.quadraticVertex(P,R,P,R+A)):this.vertex(P,R),N!==0?(this.vertex(P,b-N),this.quadraticVertex(P,b,P-N,b)):this.vertex(P,b),m!==0?(this.vertex(T+m,b),this.quadraticVertex(T,b,T,b-m)):this.vertex(T,b),j!==0?(this.vertex(T,R+j),this.quadraticVertex(T,R,T+j,R)):this.vertex(T,R),!(this.immediateMode.geometry.uvs.length=0)),v=!1,F=void 0;try{for(var D,q=this.immediateMode.geometry.vertices[Symbol.iterator]();!(k=(D=q.next()).done);k=!0){var H=D.value,W=(H.x-T)/g,Q=(H.y-R)/p;this.immediateMode.geometry.uvs.push(W,Q)}}catch(M){v=!0,F=M}finally{try{k||q.return==null||q.return()}finally{if(v)throw F}}this.endShape(d.CLOSE)}return this},a.default.RendererGL.prototype.quad=function(m,b,v,g,p,y,S,j,A,N,C,T){var R=12<arguments.length&&arguments[12]!==void 0?arguments[12]:2,P=13<arguments.length&&arguments[13]!==void 0?arguments[13]:2,k="quad|".concat(m,"|").concat(b,"|").concat(v,"|").concat(g,"|").concat(p,"|").concat(y,"|").concat(S,"|").concat(j,"|").concat(A,"|").concat(N,"|").concat(C,"|").concat(T,"|").concat(R,"|").concat(P);if(!this.geometryInHash(k)){var F=new a.default.Geometry(R,P,function(){for(var K=1/(this.detailX-1),re=1/(this.detailY-1),oe=0;oe<this.detailY;oe++)for(var M=0;M<this.detailX;M++){var z=M*K,$=oe*re;this.vertices.push(new a.default.Vector((1-z)*((1-$)*m+$*N)+z*((1-$)*g+$*S),(1-z)*((1-$)*b+$*C)+z*((1-$)*p+$*j),(1-z)*((1-$)*v+$*T)+z*((1-$)*y+$*A))),this.uvs.push([z,$])}});F.faces=[];for(var D=0;D<P-1;D++)for(var q=0;q<R-1;q++){var H=q+D*R,W=q+1+(D+1)*R,Q=q+(D+1)*R;F.faces.push([H,q+1+D*R,W]),F.faces.push([H,W,Q])}F.computeNormals();for(var J=[F.edges.length=0,2,3,1],Z=0;Z<J.length;Z++)F.edges.push([J[Z],J[(Z+1)%J.length]]);F._edgesToVertices(),this.createBuffers(k,F)}return this.drawBuffers(k),this},a.default.RendererGL.prototype.bezier=function(m,b,v,g,p,y,S,j,A,N,C,T){arguments.length===8&&(C=j,N=S,j=y,S=p,p=g,g=v,v=y=A=T=0);var R=this._pInst._bezierDetail||20;this.beginShape();for(var P=0;P<=R;P++){var k=Math.pow(1-P/R,3),F=P/R*3*Math.pow(1-P/R,2),D=3*Math.pow(P/R,2)*(1-P/R),q=Math.pow(P/R,3);this.vertex(m*k+g*F+S*D+N*q,b*k+p*F+j*D+C*q,v*k+y*F+A*D+T*q)}return this.endShape(),this},a.default.RendererGL.prototype.curve=function(m,b,v,g,p,y,S,j,A,N,C,T){arguments.length===8&&(N=S,C=j,S=p,j=g,p=g=v,v=y=A=T=0);var R=this._pInst._curveDetail;this.beginShape();for(var P=0;P<=R;P++){var k=.5*Math.pow(P/R,3),F=.5*Math.pow(P/R,2),D=P/R*.5;this.vertex(k*(3*g-m-3*S+N)+F*(2*m-5*g+4*S-N)+D*(-m+S)+2*g*.5,k*(3*p-b-3*j+C)+F*(2*b-5*p+4*j-C)+D*(-b+j)+2*p*.5,k*(3*y-v-3*A+T)+F*(2*v-5*y+4*A-T)+D*(-v+A)+2*y*.5)}return this.endShape(),this},a.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(d.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(d.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},a.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var m,b,v,g,p,y,S=[],j=[],A=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var N=1/this._lutBezierDetail,C=N,T=1,R=0;C<1;){if(y=parseFloat(C.toFixed(6)),this._lookUpTableBezier[R]=this._bezierCoefficients(y),T.toFixed(6)===N.toFixed(6)){y=parseFloat(T.toFixed(6))+parseFloat(C.toFixed(6)),++R,this._lookUpTableBezier[R]=this._bezierCoefficients(y);break}C+=N,T-=N,++R}}for(var P=this._lookUpTableBezier.length,k=[],F=0;F<4;F++)k.push([]);k[0]=this.immediateMode.geometry.vertexColors.slice(-4),k[3]=this.curFillColor.slice();var D=[];for(F=0;F<4;F++)D.push([]);if(D[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),D[3]=this.curStrokeColor.slice(),A===6){this.isBezier=!0;var S=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],j=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],q=Math.hypot(S[0]-S[1],j[0]-j[1]),W=Math.hypot(S[1]-S[2],j[1]-j[2]),H=Math.hypot(S[2]-S[3],j[2]-j[3]),W=q+W+H;for(q/=W,H/=W,p=0;p<4;p++)k[1].push(k[0][p]*(1-q)+k[3][p]*q),k[2].push(k[0][p]*H+k[3][p]*(1-H)),D[1].push(D[0][p]*(1-q)+D[3][p]*q),D[2].push(D[0][p]*H+D[3][p]*(1-H));for(g=0;g<P;g++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],F=m=b=0;F<4;F++){for(p=0;p<4;p++)this.curFillColor[p]+=this._lookUpTableBezier[g][F]*k[F][p],this.curStrokeColor[p]+=this._lookUpTableBezier[g][F]*D[F][p];m+=S[F]*this._lookUpTableBezier[g][F],b+=j[F]*this._lookUpTableBezier[g][F]}this.vertex(m,b)}this.curFillColor=k[3],this.curStrokeColor=D[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(A===9){this.isBezier=!0,S=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],j=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var Q=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],J=Math.hypot(S[0]-S[1],j[0]-j[1],Q[0]-Q[1]),W=Math.hypot(S[1]-S[2],j[1]-j[2],Q[1]-Q[2]),Z=Math.hypot(S[2]-S[3],j[2]-j[3],Q[2]-Q[3]),A=J+W+Z;for(J/=A,Z/=A,p=0;p<4;p++)k[1].push(k[0][p]*(1-J)+k[3][p]*J),k[2].push(k[0][p]*Z+k[3][p]*(1-Z)),D[1].push(D[0][p]*(1-J)+D[3][p]*J),D[2].push(D[0][p]*Z+D[3][p]*(1-Z));for(g=0;g<P;g++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],F=m=b=v=0;F<4;F++){for(p=0;p<4;p++)this.curFillColor[p]+=this._lookUpTableBezier[g][F]*k[F][p],this.curStrokeColor[p]+=this._lookUpTableBezier[g][F]*D[F][p];m+=S[F]*this._lookUpTableBezier[g][F],b+=j[F]*this._lookUpTableBezier[g][F],v+=Q[F]*this._lookUpTableBezier[g][F]}this.vertex(m,b,v)}this.curFillColor=k[3],this.curStrokeColor=D[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},a.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var m,b,v,g,p,y,S=[],j=[],A=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var N=1/this._lutQuadraticDetail,C=N,T=1,R=0;C<1;){if(y=parseFloat(C.toFixed(6)),this._lookUpTableQuadratic[R]=this._quadraticCoefficients(y),T.toFixed(6)===N.toFixed(6)){y=parseFloat(T.toFixed(6))+parseFloat(C.toFixed(6)),++R,this._lookUpTableQuadratic[R]=this._quadraticCoefficients(y);break}C+=N,T-=N,++R}}for(var P=this._lookUpTableQuadratic.length,k=[],F=0;F<3;F++)k.push([]);k[0]=this.immediateMode.geometry.vertexColors.slice(-4),k[2]=this.curFillColor.slice();var D=[];for(F=0;F<3;F++)D.push([]);if(D[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),D[2]=this.curStrokeColor.slice(),A===4){this.isQuadratic=!0;var S=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],j=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],q=Math.hypot(S[0]-S[1],j[0]-j[1]);for(q/=q+Math.hypot(S[1]-S[2],j[1]-j[2]),p=0;p<4;p++)k[1].push(k[0][p]*(1-q)+k[2][p]*q),D[1].push(D[0][p]*(1-q)+D[2][p]*q);for(g=0;g<P;g++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],F=m=b=0;F<3;F++){for(p=0;p<4;p++)this.curFillColor[p]+=this._lookUpTableQuadratic[g][F]*k[F][p],this.curStrokeColor[p]+=this._lookUpTableQuadratic[g][F]*D[F][p];m+=S[F]*this._lookUpTableQuadratic[g][F],b+=j[F]*this._lookUpTableQuadratic[g][F]}this.vertex(m,b)}this.curFillColor=k[2],this.curStrokeColor=D[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(A===6){this.isQuadratic=!0,S=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],j=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var H=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],W=Math.hypot(S[0]-S[1],j[0]-j[1],H[0]-H[1]);for(W/=W+Math.hypot(S[1]-S[2],j[1]-j[2],H[1]-H[2]),p=0;p<4;p++)k[1].push(k[0][p]*(1-W)+k[2][p]*W),D[1].push(D[0][p]*(1-W)+D[2][p]*W);for(g=0;g<P;g++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],F=m=b=v=0;F<3;F++){for(p=0;p<4;p++)this.curFillColor[p]+=this._lookUpTableQuadratic[g][F]*k[F][p],this.curStrokeColor[p]+=this._lookUpTableQuadratic[g][F]*D[F][p];m+=S[F]*this._lookUpTableQuadratic[g][F],b+=j[F]*this._lookUpTableQuadratic[g][F],v+=H[F]*this._lookUpTableQuadratic[g][F]}this.vertex(m,b,v)}this.curFillColor=k[2],this.curStrokeColor=D[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},a.default.RendererGL.prototype.curveVertex=function(){var m,b,v,g,p,y,S=[],j=[],A=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var N=1/this._lutBezierDetail,C=N,T=1,R=0;C<1;){if(y=parseFloat(C.toFixed(6)),this._lookUpTableBezier[R]=this._bezierCoefficients(y),T.toFixed(6)===N.toFixed(6)){y=parseFloat(T.toFixed(6))+parseFloat(C.toFixed(6)),++R,this._lookUpTableBezier[R]=this._bezierCoefficients(y);break}C+=N,T-=N,++R}}var P=this._lookUpTableBezier.length;if(A===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,S=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),j=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),p=0;p<P;p++)b=S[0]*this._lookUpTableBezier[p][0]+S[1]*this._lookUpTableBezier[p][1]+S[2]*this._lookUpTableBezier[p][2]+S[3]*this._lookUpTableBezier[p][3],v=j[0]*this._lookUpTableBezier[p][0]+j[1]*this._lookUpTableBezier[p][1]+j[2]*this._lookUpTableBezier[p][2]+j[3]*this._lookUpTableBezier[p][3],this.vertex(b,v);for(p=0;p<A;p++)this.immediateMode._curveVertex.shift()}}else if(A===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,S=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),j=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),m=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),p=0;p<P;p++)b=S[0]*this._lookUpTableBezier[p][0]+S[1]*this._lookUpTableBezier[p][1]+S[2]*this._lookUpTableBezier[p][2]+S[3]*this._lookUpTableBezier[p][3],v=j[0]*this._lookUpTableBezier[p][0]+j[1]*this._lookUpTableBezier[p][1]+j[2]*this._lookUpTableBezier[p][2]+j[3]*this._lookUpTableBezier[p][3],g=m[0]*this._lookUpTableBezier[p][0]+m[1]*this._lookUpTableBezier[p][1]+m[2]*this._lookUpTableBezier[p][2]+m[3]*this._lookUpTableBezier[p][3],this.vertex(b,v,g);for(p=0;p<A;p++)this.immediateMode._curveVertex.shift()}},a.default.RendererGL.prototype.image=function(m,T,v,R,p,y,S,j,A){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(m),this._pInst.textureMode(d.NORMAL);var N=0,C=(T<=m.width&&(N=T/m.width),1),T=(T+R<=m.width&&(C=(T+R)/m.width),0),R=(v<=m.height&&(T=v/m.height),1);v+p<=m.height&&(R=(v+p)/m.height),this.beginShape(),this.vertex(y,S,0,N,T),this.vertex(y+j,S,0,C,T),this.vertex(y+j,S+A,0,C,R),this.vertex(y,S+A,0,N,R),this.endShape(d.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(d.REMOVE)};var h=a.default;c.default=h},{"../core/constants":272,"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],327:[function(t,o,c){function l(b){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(b)}function f(b){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(v){return l(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":l(v)})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.assign"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(m=t("../core/main"))&&m.__esModule?m:{default:m},d=function(b){if(b&&b.__esModule)return b;if(b===null||f(b)!=="object"&&typeof b!="function")return{default:b};var v=_();if(v&&v.has(b))return v.get(b);var g,p={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in b){var S;Object.prototype.hasOwnProperty.call(b,g)&&((S=y?Object.getOwnPropertyDescriptor(b,g):null)&&(S.get||S.set)?Object.defineProperty(p,g,S):p[g]=b[g])}return p.default=b,v&&v.set(b,p),p}(t("../core/constants"));function _(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,_=function(){return b},b)}function w(b){return function(v){if(Array.isArray(v)){for(var g=0,p=new Array(v.length);g<v.length;g++)p[g]=v[g];return p}}(b)||function(v){if(Symbol.iterator in Object(v)||Object.prototype.toString.call(v)==="[object Arguments]")return Array.from(v)}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(b,v){for(var g=0;g<v.length;g++){var p=v[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(b,p.key,p)}}var m=function(){function b(p){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");(this.renderer=p)._pInst.push(),this.identityMatrix=new a.default.Matrix,p.uModelMatrix=new a.default.Matrix,this.geometry=new a.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(b.nextGeometryId),b.nextGeometryId++,this.hasTransform=!1}var v,g;return v=b,(g=[{key:"transformVertices",value:function(p){var y=this;return this.hasTransform?p.map(function(S){return y.renderer.uModelMatrix.multiplyPoint(S)}):p}},{key:"transformNormals",value:function(p){var y=this;return this.hasTransform?p.map(function(S){return y.renderer.uNMatrix.multiplyVec3(S)}):p}},{key:"addGeometry",value:function(p){for(var y,S=this,j=(this.hasTransform=!this.renderer.uModelMatrix.mat4.every(function(N,C){return N===S.identityMatrix.mat4[C]}),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uModelMatrix),this.geometry.vertices.length),A=((y=this.geometry.vertices).push.apply(y,w(this.transformVertices(p.vertices))),(y=this.geometry.vertexNormals).push.apply(y,w(this.transformNormals(p.vertexNormals))),(y=this.geometry.uvs).push.apply(y,w(p.uvs)),this.renderer._doFill&&(y=this.geometry.faces).push.apply(y,w(p.faces.map(function(N){return N.map(function(C){return C+j})}))),this.renderer._doStroke&&(y=this.geometry.edges).push.apply(y,w(p.edges.map(function(N){return N.map(function(C){return C+j})}))),w(p.vertexColors));A.length<4*p.vertices.length;)A.push.apply(A,w(this.renderer.curFillColor));(y=this.geometry.vertexColors).push.apply(y,w(A))}},{key:"addImmediate",value:function(){var p=this.renderer.immediateMode.geometry,y=this.renderer.immediateMode.shapeMode,S=[];if(this.renderer._doFill)if(y===d.TRIANGLE_STRIP||y===d.QUAD_STRIP)for(var j=2;j<p.vertices.length;j++)j%2==0?S.push([j,j-1,j-2]):S.push([j,j-2,j-1]);else if(y===d.TRIANGLE_FAN)for(var A=2;A<p.vertices.length;A++)S.push([0,A-1,A]);else for(var N=0;N<p.vertices.length;N+=3)S.push([N,N+1,N+2]);this.addGeometry(Object.assign({},p,{faces:S}))}},{key:"addRetained",value:function(p){this.addGeometry(p.model)}},{key:"finish",value:function(){return this.renderer._pInst.pop(),this.geometry}}])&&h(v.prototype,g),b}();m.nextGeometryId=0,c.default=m},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],328:[function(t,o,c){function l(h){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=(w=t("../core/main"))&&w.__esModule?w:{default:w},a=function(h){if(h&&h.__esModule)return h;if(h===null||_(h)!=="object"&&typeof h!="function")return{default:h};var m=d();if(m&&m.has(h))return m.get(h);var b,v={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in h){var p;Object.prototype.hasOwnProperty.call(h,b)&&((p=g?Object.getOwnPropertyDescriptor(h,b):null)&&(p.get||p.set)?Object.defineProperty(v,b,p):v[b]=h[b])}return v.default=h,m&&m.set(h,v),v}(t("../core/constants"));function d(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,d=function(){return h},h)}function _(h){return(_=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(m){return l(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":l(m)})(h)}f.default.prototype.orbitControl=function(h,m,b,A){var g=this,p=(this._assert3d("orbitControl"),f.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);h===void 0&&(h=1),m===void 0&&(m=h),b===void 0&&(b=1),_(A)!=="object"&&(A={}),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var C=A.disableTouchActions;this.touchActionsDisabled===!0||C!==void 0&&!C||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0));var y,S,j,C=A.freeRotation,A=C!==void 0&&C,N=[],C=(this.touches.forEach(function(q){g._renderer.prevTouches.forEach(function(H){q.id===H.id&&(H={x:q.x,y:q.y,px:H.x,py:H.y},N.push(H))})}),this._renderer.prevTouches=this.touches,0),T=0,R=0,P=0,k=0,F=this.height<this.width?this.height:this.width,D=!1;return 0<N.length?(D=0<N[0].x&&N[0].x<this.width&&0<N[0].y&&N[0].y<this.height,N.length===1?(T=-h*((y=N[0]).x-y.px)/F,R=m*(y.y-y.py)/F):(y=N[0],S=N[1],C=-(Math.hypot(y.x-S.x,y.y-S.y)-Math.hypot(y.px-S.px,y.py-S.py))*b*4e-4,P=.5*(y.x+S.x)-.5*(y.px+S.px),k=.5*(y.y+S.y)-.5*(y.py+S.py)),0<this.touches.length?D&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(D=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,this._mouseWheelDeltaY!==0?(C=Math.sign(this._mouseWheelDeltaY)*b,C*=.01,this._mouseWheelDeltaY=0,D&&(this._renderer.executeZoom=!0)):this._renderer.executeZoom=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(T=-h*this.movedX/F,R=m*this.movedY/F):this.mouseButton===this.RIGHT&&(P=this.movedX,k=this.movedY*p.yScale),D&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),C!==0&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=C),.001<Math.abs(this._renderer.zoomVelocity)?(A?p._orbitFree(0,0,this._renderer.zoomVelocity):p._orbit(0,0,this._renderer.zoomVelocity),p.projMatrix.mat4[15]!==0&&(p.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),p.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=p.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=p.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,T===0&&R===0||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*T,.6*R),1e-6<this._renderer.rotateVelocity.magSq()?(A?p._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):p._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),P===0&&k===0||!this._renderer.executeRotateAndMove||(y=2*P/this.width,S=2*-k/this.height,this._renderer.moveVelocity.add(.15*y,.15*S)),1e-6<this._renderer.moveVelocity.magSq()?(b=p._getLocalAxes(),h=p.eyeX-p.centerX,m=p.eyeY-p.centerY,F=p.eyeZ-p.centerZ,D=Math.sqrt(h*h+m*m+F*F),C=new f.default.Vector(p.centerX,p.centerY,p.centerZ),C=p.cameraMatrix.multiplyPoint(C),(C=this._renderer.uPMatrix.multiplyAndNormalizePoint(C)).x-=this._renderer.moveVelocity.x,C.y-=this._renderer.moveVelocity.y,R=(T=this._renderer.uPMatrix.mat4)[15]===0?(j=(T[8]+C.x)/T[0]*D,(T[9]+C.y)/T[5]*D):(j=(C.x-T[12])/T[0],(C.y-T[13])/T[5]),p.setPosition(p.eyeX+j*b.x[0]+R*b.y[0],p.eyeY+j*b.x[1]+R*b.y[1],p.eyeZ+j*b.x[2]+R*b.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},f.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var h=arguments.length,m=new Array(h),b=0;b<h;b++)m[b]=arguments[b];f.default._validateParameters("debugMode",m);for(var v=this._registeredMethods.post.length-1;0<=v;v--)this._registeredMethods.post[v].toString()!==this._grid().toString()&&this._registeredMethods.post[v].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(v,1);m[0]===a.GRID?this.registerMethod("post",this._grid(m[1],m[2],m[3],m[4],m[5])):m[0]===a.AXES?this.registerMethod("post",this._axesIcon(m[1],m[2],m[3],m[4])):(this.registerMethod("post",this._grid(m[0],m[1],m[2],m[3],m[4])),this.registerMethod("post",this._axesIcon(m[5],m[6],m[7],m[8])))},f.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var h=this._registeredMethods.post.length-1;0<=h;h--)this._registeredMethods.post[h].toString()!==this._grid().toString()&&this._registeredMethods.post[h].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(h,1)},f.default.prototype._grid=function(h,m,b,v,g){h===void 0&&(h=this.width/2),m===void 0&&(m=Math.round(h/30)<4?4:Math.round(h/30)),b===void 0&&(b=0),v===void 0&&(v=0),g===void 0&&(g=0);var p=h/m,y=h/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uModelMatrix.reset();for(var S=0;S<=m;S++)this.beginShape(this.LINES),this.vertex(-y+b,v,S*p-y+g),this.vertex(y+b,v,S*p-y+g),this.endShape();for(var j=0;j<=m;j++)this.beginShape(this.LINES),this.vertex(j*p-y+b,v,-y+g),this.vertex(j*p-y+b,v,y+g),this.endShape();this.pop()}},f.default.prototype._axesIcon=function(h,m,b,v){return h===void 0&&(h=40<this.width/20?this.width/20:40),m===void 0&&(m=-this.width/4),b===void 0&&(b=m),v===void 0&&(v=m),function(){this.push(),this._renderer.uModelMatrix.reset(),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(m,b,v),this.vertex(m+h,b,v),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(m,b,v),this.vertex(m,b+h,v),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(m,b,v),this.vertex(m,b,v+h),this.endShape(),this.pop()}};var w=f.default;c.default=w},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],329:[function(t,o,c){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.filter"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};l.default.prototype.ambientLight=function(f,a,d,_){this._assert3d("ambientLight"),l.default._validateParameters("ambientLight",arguments);var w=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(w._array[0],w._array[1],w._array[2]),this._renderer._enableLighting=!0,this},l.default.prototype.specularColor=function(f,a,d){this._assert3d("specularColor"),l.default._validateParameters("specularColor",arguments);var _=this.color.apply(this,arguments);return this._renderer.specularColors=[_._array[0],_._array[1],_._array[2]],this},l.default.prototype.directionalLight=function(f,g,v,_,w,h){this._assert3d("directionalLight"),l.default._validateParameters("directionalLight",arguments),f=f instanceof l.default.Color?f:this.color(f,g,v);var m,b,g=arguments[arguments.length-1],v=typeof g=="number"?(m=arguments[arguments.length-3],b=arguments[arguments.length-2],arguments[arguments.length-1]):(m=g.x,b=g.y,g.z),g=Math.sqrt(m*m+b*b+v*v);return this._renderer.directionalLightDirections.push(m/g,b/g,v/g),this._renderer.directionalLightDiffuseColors.push(f._array[0],f._array[1],f._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},l.default.prototype.pointLight=function(f,v,g,_,w,h){this._assert3d("pointLight"),l.default._validateParameters("pointLight",arguments),f=f instanceof l.default.Color?f:this.color(f,v,g);var m,b,v=arguments[arguments.length-1],g=typeof v=="number"?(m=arguments[arguments.length-3],b=arguments[arguments.length-2],arguments[arguments.length-1]):(m=v.x,b=v.y,v.z);return this._renderer.pointLightPositions.push(m,b,g),this._renderer.pointLightDiffuseColors.push(f._array[0],f._array[1],f._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},l.default.prototype.imageLight=function(f){this._renderer.activeImageLight=f,this._renderer._enableLighting=!0},l.default.prototype.panorama=function(f){this.filter(this._renderer._getSphereMapping(f))},l.default.prototype.lights=function(){this._assert3d("lights");var f=this.color("rgb(128,128,128)");return this.ambientLight(f),this.directionalLight(f,0,0,-1),this},l.default.prototype.lightFalloff=function(f,a,d){return this._assert3d("lightFalloff"),l.default._validateParameters("lightFalloff",arguments),f<0&&(f=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),a<0&&(a=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),d<0&&(d=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),f===0&&a===0&&d===0&&(f=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=f,this._renderer.linearAttenuation=a,this._renderer.quadraticAttenuation=d,this},l.default.prototype.spotLight=function(f,a,d,_,w,h,m,b,v,g,p){this._assert3d("spotLight"),l.default._validateParameters("spotLight",arguments);var y,S,j,A=arguments.length;switch(A){case 11:case 10:y=this.color(f,a,d),S=new l.default.Vector(_,w,h),j=new l.default.Vector(m,b,v);break;case 9:f instanceof l.default.Color?(y=f,S=new l.default.Vector(a,d,_),j=new l.default.Vector(w,h,m),g=b,p=v):_ instanceof l.default.Vector?(y=this.color(f,a,d),S=_,j=new l.default.Vector(w,h,m),g=b,p=v):m instanceof l.default.Vector?(y=this.color(f,a,d),S=new l.default.Vector(_,w,h),j=m,g=b,p=v):(y=this.color(f,a,d),S=new l.default.Vector(_,w,h),j=new l.default.Vector(m,b,v));break;case 8:g=(j=f instanceof l.default.Color?(y=f,S=new l.default.Vector(a,d,_),new l.default.Vector(w,h,m)):_ instanceof l.default.Vector?(y=this.color(f,a,d),S=_,new l.default.Vector(w,h,m)):(y=this.color(f,a,d),S=new l.default.Vector(_,w,h),m),b);break;case 7:f instanceof l.default.Color&&a instanceof l.default.Vector?(y=f,S=a,j=new l.default.Vector(d,_,w),g=h,p=m):f instanceof l.default.Color&&w instanceof l.default.Vector?(y=f,S=new l.default.Vector(a,d,_),j=w,g=h,p=m):_ instanceof l.default.Vector&&w instanceof l.default.Vector?(y=this.color(f,a,d),S=_,j=w,g=h,p=m):j=f instanceof l.default.Color?(y=f,S=new l.default.Vector(a,d,_),new l.default.Vector(w,h,m)):_ instanceof l.default.Vector?(y=this.color(f,a,d),S=_,new l.default.Vector(w,h,m)):(y=this.color(f,a,d),S=new l.default.Vector(_,w,h),m);break;case 6:_ instanceof l.default.Vector&&w instanceof l.default.Vector?(y=this.color(f,a,d),S=_,j=w,g=h):f instanceof l.default.Color&&w instanceof l.default.Vector?(y=f,S=new l.default.Vector(a,d,_),j=w,g=h):f instanceof l.default.Color&&a instanceof l.default.Vector&&(y=f,S=a,j=new l.default.Vector(d,_,w),g=h);break;case 5:f instanceof l.default.Color&&a instanceof l.default.Vector&&d instanceof l.default.Vector?(y=f,S=a,j=d,g=_,p=w):_ instanceof l.default.Vector&&w instanceof l.default.Vector?(y=this.color(f,a,d),S=_,j=w):f instanceof l.default.Color&&w instanceof l.default.Vector?(y=f,S=new l.default.Vector(a,d,_),j=w):f instanceof l.default.Color&&a instanceof l.default.Vector&&(y=f,S=a,j=new l.default.Vector(d,_,w));break;case 4:y=f,S=a,j=d,g=_;break;case 3:y=f,S=a,j=d;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(A<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(y._array[0],y._array[1],y._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(S.x,S.y,S.z),j.normalize(),this._renderer.spotLightDirections.push(j.x,j.y,j.z),g===void 0&&(g=Math.PI/3),p!==void 0&&p<1?(p=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):p===void 0&&(p=100),g=this._renderer._pInst._toRadians(g),this._renderer.spotLightAngle.push(Math.cos(g)),this._renderer.spotLightConc.push(p),this._renderer._enableLighting=!0,this},l.default.prototype.noLights=function(){this._assert3d("noLights");for(var f=arguments.length,a=new Array(f),d=0;d<f;d++)a[d]=arguments[d];return l.default._validateParameters("noLights",a),this._renderer.activeImageLight=null,this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this._renderer._useMetalness=0,this},t=l.default,c.default=t},{"../core/main":283,"core-js/modules/es.array.filter":157}],330:[function(t,o,c){function l(g){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t("regenerator-runtime/runtime");var f=(v=t("../core/main"))&&v.__esModule?v:{default:v};function a(g){return function(p){if(Array.isArray(p)){for(var y=0,S=new Array(p.length);y<p.length;y++)S[y]=p[y];return S}}(g)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(g,p,y,S,j,A,N){try{var C=g[A](N),T=C.value}catch(R){return void y(R)}C.done?p(T):Promise.resolve(T).then(S,j)}function _(g){return function(){var p=this,y=arguments;return new Promise(function(S,j){var A=g.apply(p,y);function N(T){d(A,S,j,N,C,"next",T)}function C(T){d(A,S,j,N,C,"throw",T)}N(void 0)})}}function w(g){return(w=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(p){return l(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":l(p)})(g)}function h(g,p,y){for(var S=2<arguments.length&&y!==void 0?y:{},j={v:[],vt:[],vn:[]},A={},N=null,C=new Set,T=!1,R=!1,P=0;P<p.length;++P){var k=p[P].trim().split(/\b\s+/);if(0<k.length){if(k[0]==="usemtl")N=k[1];else if(k[0]==="v"||k[0]==="vn"){var F=new f.default.Vector(parseFloat(k[1]),parseFloat(k[2]),parseFloat(k[3]));j[k[0]].push(F)}else if(k[0]==="vt")F=[parseFloat(k[1]),1-parseFloat(k[2])],j[k[0]].push(F);else if(k[0]==="f")for(var D=3;D<k.length;++D){for(var q=[],H=[1,D-1,D],W=0;W<H.length;++W){for(var Q,J=k[H[W]],Z=J.split("/"),K=0;K<Z.length;K++)Z[K]=parseInt(Z[K])-1;A[J]||(A[J]={}),A[J][N]===void 0?(Q=g.vertices.length,g.vertices.push(j.v[Z[0]].copy()),g.uvs.push(j.vt[Z[1]]?j.vt[Z[1]].slice():[0,0]),g.vertexNormals.push(j.vn[Z[2]]?j.vn[Z[2]].copy():new f.default.Vector),A[J][N]=Q,q.push(Q),N&&S[N]&&S[N].diffuseColor&&C.add(j.v[Z[0]])):q.push(A[J][N])}if(q[0]!==q[1]&&q[0]!==q[2]&&q[1]!==q[2])if(g.faces.push(q),N&&S[N]&&S[N].diffuseColor)for(var T=T=!0,re=S[N].diffuseColor,oe=0;oe<q.length;oe++)g.vertexColors.push(re[0]),g.vertexColors.push(re[1]),g.vertexColors.push(re[2]);else R=!0}}}if(g.vertexNormals.length===0&&g.computeNormals(),T===R)throw new Error("Model coloring is inconsistent. Either all vertices should have colors or none should.")}function m(g,p){if(function(xe){for(var fe=new DataView(xe),Se=[115,111,108,105,100],Ce=0;Ce<5;Ce++)if(function(Ne,Oe,Me){for(var Ue=0,et=Ne.length;Ue<et;Ue++)if(Ne[Ue]!==Oe.getUint8(Me+Ue,!1))return;return 1}(Se,fe,Ce))return;return 1}(p)){for(var y,S,j,A,N,C,T,R=g,P=new DataView(p),k=P.getUint32(80,!0),F=!1,D=0;D<70;D++)P.getUint32(D,!1)===1129270351&&P.getUint8(D+4)===82&&P.getUint8(D+5)===61&&(F=!0,A=[],N=P.getUint8(D+6)/255,C=P.getUint8(D+7)/255,T=P.getUint8(D+8)/255);for(var q=0;q<k;q++){for(var H,W=84+50*q,Q=P.getFloat32(W,!0),J=P.getFloat32(4+W,!0),Z=P.getFloat32(8+W,!0),K=(F&&(H=P.getUint16(48+W,!0),j=32768&H?(y=N,S=C,T):(y=(31&H)/31,S=(H>>5&31)/31,(H>>10&31)/31)),new f.default.Vector(Q,J,Z)),re=1;re<=3;re++){var oe=W+12*re,oe=new f.default.Vector(P.getFloat32(oe,!0),P.getFloat32(4+oe,!0),P.getFloat32(8+oe,!0));R.vertices.push(oe),R.vertexNormals.push(K),F&&A.push(y,S,j)}R.faces.push([3*q,3*q+1,3*q+2]),R.uvs.push([0,0],[0,0],[0,0])}}else if(p=new DataView(p),"TextDecoder"in window)for(var M,z,$=g,ee=new TextDecoder("utf-8").decode(p).split(`
`),le="",ce=[],me=0;me<ee.length;++me){for(var ve=ee[me].trim(),ge=ve.split(" "),we=0;we<ge.length;++we)ge[we]===""&&ge.splice(we,1);if(ge.length!==0)switch(le){case"":if(ge[0]!=="solid")return console.error(ve),void console.error('Invalid state "'.concat(ge[0],'", should be "solid"'));le="solid";break;case"solid":if(ge[0]!=="facet"||ge[1]!=="normal")return console.error(ve),void console.error('Invalid state "'.concat(ge[0],'", should be "facet normal"'));M=new f.default.Vector(parseFloat(ge[2]),parseFloat(ge[3]),parseFloat(ge[4])),$.vertexNormals.push(M,M,M),le="facet normal";break;case"facet normal":if(ge[0]!=="outer"||ge[1]!=="loop")return console.error(ve),void console.error('Invalid state "'.concat(ge[0],'", should be "outer loop"'));le="vertex";break;case"vertex":if(ge[0]==="vertex")z=new f.default.Vector(parseFloat(ge[1]),parseFloat(ge[2]),parseFloat(ge[3])),$.vertices.push(z),$.uvs.push([0,0]),ce.push($.vertices.indexOf(z));else{if(ge[0]!=="endloop")return console.error(ve),void console.error('Invalid state "'.concat(ge[0],'", should be "vertex" or "endloop"'));$.faces.push(ce),ce=[],le="endloop"}break;case"endloop":if(ge[0]!=="endfacet")return console.error(ve),void console.error('Invalid state "'.concat(ge[0],'", should be "endfacet"'));le="endfacet";break;case"endfacet":if(ge[0]!=="endsolid"){if(ge[0]!=="facet"||ge[1]!=="normal")return console.error(ve),void console.error('Invalid state "'.concat(ge[0],'", should be "endsolid" or "facet normal"'));M=new f.default.Vector(parseFloat(ge[2]),parseFloat(ge[3]),parseFloat(ge[4])),$.vertexNormals.push(M,M,M),le="facet normal"}break;default:console.error('Invalid state "'.concat(le,'"'))}}else console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)")}t("./p5.Geometry"),f.default.prototype.loadModel=function(g,p){f.default._validateParameters("loadModel",arguments);var y,S,j=!1,A=!1,N=!1,C=g.slice(-4),T=(p&&w(p)==="object"?(j=p.normalize||!1,y=p.successCallback,S=p.failureCallback,C=p.fileType||C,A=p.flipU||!1,N=p.flipV||!1):typeof p=="boolean"?(j=p,y=arguments[2],S=arguments[3],arguments[4]!==void 0&&(C=arguments[4])):(y=typeof p=="function"?p:void 0,S=arguments[2],arguments[3]!==void 0&&(C=arguments[3])),new f.default.Geometry),R=(T.gid="".concat(g,"|").concat(j),this);function P(){return(P=_(regeneratorRuntime.mark(function F(D){var q,H,W,Q;return regeneratorRuntime.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:for(q=[],H=0;H<D.length;H++)(W=D[H].match(/^mtllib (.+)/))&&function(){var Z="",K=W[1],re=g.split("/");Z=1<re.length?(re.pop(),re.join("/")+"/"+K):K,q.push(function(){return k.apply(this,arguments)}(Z).then(function(oe){return oe?(M=R,z=Z,new Promise(function($,ee){var le=null,ce={};M.loadStrings(z,function(me){for(var ve=0;ve<me.length;++ve){var ge,we=me[ve].trim().split(/\s+/);we[0]==="newmtl"?(ge=we[1],ce[le=ge]={}):we[0]==="Kd"?ce[le].diffuseColor=[parseFloat(we[1]),parseFloat(we[2]),parseFloat(we[3])]:we[0]==="Ka"?ce[le].ambientColor=[parseFloat(we[1]),parseFloat(we[2]),parseFloat(we[3])]:we[0]==="Ks"?ce[le].specularColor=[parseFloat(we[1]),parseFloat(we[2]),parseFloat(we[3])]:we[0]==="map_Kd"&&(ce[le].texturePath=we[1])}$(ce)},ee)})):(console.warn("MTL file not found or error in parsing; proceeding without materials: ".concat(Z)),{});var M,z}).catch(function(oe){return console.warn("Error loading MTL file: ".concat(Z),oe),{}}))}();return J.prev=2,J.next=5,Promise.all(q);case 5:return Q=J.sent,Q=Object.assign.apply(Object,[{}].concat(a(Q))),J.abrupt("return",Q);case 10:return J.prev=10,J.t0=J.catch(2),J.abrupt("return",{});case 13:case"end":return J.stop()}},F,null,[[2,10]])}))).apply(this,arguments)}function k(){return(k=_(regeneratorRuntime.mark(function F(D){var q;return regeneratorRuntime.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.prev=0,H.next=3,fetch(D,{method:"HEAD"});case 3:return q=H.sent,H.abrupt("return",q.ok);case 7:return H.prev=7,H.t0=H.catch(0),H.abrupt("return",!1);case 10:case"end":return H.stop()}},F,null,[[0,7]])}))).apply(this,arguments)}return C.match(/\.stl$/i)?this.httpDo(g,"GET","arrayBuffer",function(F){m(T,F),j&&T.normalize(),A&&T.flipU(),N&&T.flipV(),R._decrementPreload(),typeof y=="function"&&y(T)},S):C.match(/\.obj$/i)?this.loadStrings(g,function(){var F=_(regeneratorRuntime.mark(function D(q){var H;return regeneratorRuntime.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.prev=0,W.next=3,function(){return P.apply(this,arguments)}(q);case 3:H=W.sent,h(T,q,H),W.next=11;break;case 7:return W.prev=7,W.t0=W.catch(0),S?S(W.t0):f.default._friendlyError("Error during parsing: "+W.t0.message),W.abrupt("return");case 11:return W.prev=11,j&&T.normalize(),A&&T.flipU(),N&&T.flipV(),T._makeTriangleEdges(),R._decrementPreload(),typeof y=="function"&&y(T),W.finish(11);case 19:case"end":return W.stop()}},D,null,[[0,7,11,19]])}));return function(D){return F.apply(this,arguments)}}(),S):(f.default._friendlyFileLoadError(3,g),S?S():f.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),T},f.default.prototype.model=function(g){this._assert3d("model"),f.default._validateParameters("model",arguments),0<g.vertices.length&&(this._renderer.geometryInHash(g.gid)||(g._edgesToVertices(),this._renderer.createBuffers(g.gid,g)),this._renderer.drawBuffers(g.gid))};var b=0,v=(f.default.prototype.createModel=function(g){var p,y,S=1<arguments.length&&arguments[1]!==void 0?arguments[1]:" ",C=2<arguments.length?arguments[2]:void 0,j=(f.default._validateParameters("createModel",arguments),!1),A=!1,N=!1,C=(C&&w(C)==="object"?(j=C.normalize||!1,p=C.successCallback,y=C.failureCallback,A=C.flipU||!1,N=C.flipV||!1):y=typeof C=="boolean"?(j=C,p=arguments[3],arguments[4]):(p=typeof arguments[2]=="function"?arguments[2]:void 0,arguments[3]),new f.default.Geometry);if(C.gid="".concat(S,"|").concat(j,"|").concat(b++),S.match(/\.stl$/i))try{m(C,new TextEncoder().encode(g).buffer)}catch(T){return void(y?y(T):f.default._friendlyError("Error during parsing: "+T.message))}else if(S.match(/\.obj$/i))try{h(C,g.split(`
`))}catch(T){return void(y?y(T):f.default._friendlyError("Error during parsing: "+T.message))}else f.default._friendlyFileLoadError(3,g),y?y():f.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.");return j&&C.normalize(),A&&C.flipU(),N&&C.flipV(),C._makeTriangleEdges(),typeof p=="function"&&p(C),C},f.default);c.default=v},{"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246,"regenerator-runtime/runtime":260}],331:[function(t,o,c){function l(h){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function f(h){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(m){return l(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":l(m)})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(w=t("../core/main"))&&w.__esModule?w:{default:w},d=function(h){if(h&&h.__esModule)return h;if(h===null||f(h)!=="object"&&typeof h!="function")return{default:h};var m=_();if(m&&m.has(h))return m.get(h);var b,v={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in h){var p;Object.prototype.hasOwnProperty.call(h,b)&&((p=g?Object.getOwnPropertyDescriptor(h,b):null)&&(p.get||p.set)?Object.defineProperty(v,b,p):v[b]=h[b])}return v.default=h,m&&m.set(h,v),v}(t("../core/constants"));function _(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,_=function(){return h},h)}t("./p5.Texture"),a.default.prototype.loadShader=function(h,m,b,v){a.default._validateParameters("loadShader",arguments),v=v||console.error;function g(){y._decrementPreload(),b&&b(p)}var p=new a.default.Shader,y=this,S=!1,j=!1;return this.loadStrings(h,function(A){p._vertSrc=A.join(`
`),j=!0,S&&g()},v),this.loadStrings(m,function(A){p._fragSrc=A.join(`
`),S=!0,j&&g()},v),p},a.default.prototype.createShader=function(h,m,b){return a.default._validateParameters("createShader",arguments),new a.default.Shader(this._renderer,h,m,b)},a.default.prototype.createFilterShader=function(h){a.default._validateParameters("createFilterShader",arguments);var m=h.includes("#version 300 es")?`#version 300 es
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    in vec3 aPosition;
    in vec2 aTexCoord;
    out vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `:`
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    attribute vec3 aPosition;
    // texcoords only come from p5 to vertex shader
    // so pass texcoords on to the fragment shader in a varying variable
    attribute vec2 aTexCoord;
    varying vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `,m=new a.default.Shader(this._renderer,m,h);return this._renderer.GL?m.ensureCompiledOnContext(this):m.ensureCompiledOnContext(this._renderer.getFilterGraphicsLayer()),m},a.default.prototype.shader=function(h){return this._assert3d("shader"),a.default._validateParameters("shader",arguments),h.ensureCompiledOnContext(this),h.isStrokeShader()?this._renderer.userStrokeShader=h:(this._renderer.userFillShader=h,this._renderer._useNormalMaterial=!1),h.setDefaultUniforms(),this},a.default.prototype.baseMaterialShader=function(){return this._assert3d("baseMaterialShader"),this._renderer.baseMaterialShader()},a.default.prototype.baseNormalShader=function(){return this._assert3d("baseNormalShader"),this._renderer.baseNormalShader()},a.default.prototype.baseColorShader=function(){return this._assert3d("baseColorShader"),this._renderer.baseColorShader()},a.default.prototype.baseStrokeShader=function(){return this._assert3d("baseStrokeShader"),this._renderer.baseStrokeShader()},a.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},a.default.prototype.texture=function(h){return this._assert3d("texture"),a.default._validateParameters("texture",arguments),h.gifProperties&&h._animateGif(this),this._renderer.drawMode=d.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=h,this._renderer._setProperty("_doFill",!0),this},a.default.prototype.textureMode=function(h){h!==d.IMAGE&&h!==d.NORMAL?console.warn("You tried to set ".concat(h," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=h},a.default.prototype.textureWrap=function(h){var m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:h,b=(this._renderer.textureWrapX=h,this._renderer.textureWrapY=m,!0),v=!1,g=void 0;try{for(var p,y=this._renderer.textures.values()[Symbol.iterator]();!(b=(p=y.next()).done);b=!0)p.value.setWrapMode(h,m)}catch(S){v=!0,g=S}finally{try{b||y.return==null||y.return()}finally{if(v)throw g}}},a.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var h=arguments.length,m=new Array(h),b=0;b<h;b++)m[b]=arguments[b];return a.default._validateParameters("normalMaterial",m),this._renderer.drawMode=d.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},a.default.prototype.ambientMaterial=function(h,m,b){this._assert3d("ambientMaterial"),a.default._validateParameters("ambientMaterial",arguments);var v=a.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=v._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},a.default.prototype.emissiveMaterial=function(h,m,b,v){this._assert3d("emissiveMaterial"),a.default._validateParameters("emissiveMaterial",arguments);var g=a.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=g._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},a.default.prototype.specularMaterial=function(h,m,b,v){this._assert3d("specularMaterial"),a.default._validateParameters("specularMaterial",arguments);var g=a.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=g._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},a.default.prototype.shininess=function(h){return this._assert3d("shininess"),a.default._validateParameters("shininess",arguments),this._renderer._useShininess=h=h<1?1:h,this},a.default.prototype.metalness=function(h){return this._assert3d("metalness"),h=1-Math.exp(-h/100),this._renderer._useMetalness=h,this},a.default.RendererGL.prototype._applyColorBlend=function(h,g){var b=this.GL,v=this.drawMode===d.TEXTURE,g=g||this.userFillShader||this.userStrokeShader||this.userPointShader||v||this.curBlendMode!==d.BLEND||h[h.length-1]<1||this._isErasing;return g!==this._isBlending&&(g||this.curBlendMode!==d.BLEND&&this.curBlendMode!==d.ADD?b.enable(b.BLEND):b.disable(b.BLEND),b.depthMask(!0),this._isBlending=g),this._applyBlendMode(),h},a.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var h=this.GL;switch(this.curBlendMode){case d.BLEND:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ONE,h.ONE_MINUS_SRC_ALPHA);break;case d.ADD:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ONE,h.ONE);break;case d.REMOVE:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ZERO,h.ONE_MINUS_SRC_ALPHA);break;case d.MULTIPLY:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.DST_COLOR,h.ONE_MINUS_SRC_ALPHA);break;case d.SCREEN:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ONE,h.ONE_MINUS_SRC_COLOR);break;case d.EXCLUSION:h.blendEquationSeparate(h.FUNC_ADD,h.FUNC_ADD),h.blendFuncSeparate(h.ONE_MINUS_DST_COLOR,h.ONE_MINUS_SRC_COLOR,h.ONE,h.ONE);break;case d.REPLACE:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ONE,h.ZERO);break;case d.SUBTRACT:h.blendEquationSeparate(h.FUNC_REVERSE_SUBTRACT,h.FUNC_ADD),h.blendFuncSeparate(h.ONE,h.ONE,h.ONE,h.ONE_MINUS_SRC_ALPHA);break;case d.DARKEST:this.blendExt?(h.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,h.FUNC_ADD),h.blendFuncSeparate(h.ONE,h.ONE,h.ONE,h.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case d.LIGHTEST:this.blendExt?(h.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,h.FUNC_ADD),h.blendFuncSeparate(h.ONE,h.ONE,h.ONE,h.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var w=a.default;c.default=w},{"../core/constants":272,"../core/main":283,"./p5.Texture":343,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],332:[function(t,o,c){t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(a,d){for(var _=0;_<d.length;_++){var w=d[_];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(a,w.key,w)}}l.default.prototype.camera=function(){var a;this._assert3d("camera");for(var d=arguments.length,_=new Array(d),w=0;w<d;w++)_[w]=arguments[w];return l.default._validateParameters("camera",_),(a=this._renderer._curCamera).camera.apply(a,_),this},l.default.prototype.perspective=function(){var a;this._assert3d("perspective");for(var d=arguments.length,_=new Array(d),w=0;w<d;w++)_[w]=arguments[w];return l.default._validateParameters("perspective",_),(a=this._renderer._curCamera).perspective.apply(a,_),this},l.default.prototype.linePerspective=function(a){if(l.default._validateParameters("linePerspective",arguments),!(this._renderer instanceof l.default.RendererGL))throw new Error("linePerspective() must be called in WebGL mode.");if(a===void 0)return this._renderer._curCamera.useLinePerspective;this._renderer._curCamera.useLinePerspective=a},l.default.prototype.ortho=function(){var a;this._assert3d("ortho");for(var d=arguments.length,_=new Array(d),w=0;w<d;w++)_[w]=arguments[w];return l.default._validateParameters("ortho",_),(a=this._renderer._curCamera).ortho.apply(a,_),this},l.default.prototype.frustum=function(){var a;this._assert3d("frustum");for(var d=arguments.length,_=new Array(d),w=0;w<d;w++)_[w]=arguments[w];return l.default._validateParameters("frustum",_),(a=this._renderer._curCamera).frustum.apply(a,_),this},l.default.prototype.createCamera=function(){this._assert3d("createCamera");var a=new l.default.Camera(this._renderer);return a._computeCameraDefaultSettings(),a._setDefaultCamera(),this._renderer._curCamera=a},l.default.Camera=function(){function a(w){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._renderer=w,this.cameraType="default",this.useLinePerspective=!0,this.cameraMatrix=new l.default.Matrix,this.projMatrix=new l.default.Matrix,this.yScale=1}var d,_;return d=a,(_=[{key:"perspective",value:function(v,h,m,b){this.cameraType=0<arguments.length?"custom":"default",v===void 0?(v=this.defaultCameraFOV,this.cameraFOV=v):this.cameraFOV=this._renderer._pInst._toRadians(v),h===void 0&&(h=this.defaultAspectRatio),m===void 0&&(m=this.defaultCameraNear),b===void 0&&(b=this.defaultCameraFar),m<=1e-4&&(m=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),b<m&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=h,this.cameraNear=m,this.cameraFar=b,this.projMatrix=l.default.Matrix.identity();var v=1/Math.tan(this.cameraFOV/2),g=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(v/h,0,0,0,0,-v*this.yScale,0,0,0,0,(b+m)*g,-1,0,0,2*b*m*g,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix)}},{key:"ortho",value:function(C,N,m,b,v,g){var T=this.fbo||this._renderer,T=(C===void 0&&(C=-T.width/2),N===void 0&&(N=+T.width/2),m===void 0&&(m=-T.height/2),b===void 0&&(b=+T.height/2),v===void 0&&(v=0),g===void 0&&(g=Math.max(T.width,T.height)+800),this.cameraNear=v,N-C),p=b-m,y=(this.cameraFar=g)-v,S=2/T,j=2/p*this.yScale,A=-2/y,N=-(N+C)/T,C=-(b+m)/p,T=-(g+v)/y;this.projMatrix=l.default.Matrix.identity(),this.projMatrix.set(S,0,0,0,0,-j,0,0,0,0,A,0,N,C,T,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"frustum",value:function(C,N,m,b,v,g){C===void 0&&(C=.05*-this._renderer.width),N===void 0&&(N=.05*+this._renderer.width),m===void 0&&(m=.05*+this._renderer.height),b===void 0&&(b=.05*-this._renderer.height),v===void 0&&(v=this.defaultCameraNear),g===void 0&&(g=this.defaultCameraFar),this.cameraNear=v;var T=N-C,p=b-m,y=(this.cameraFar=g)-v,S=2*v/T,j=2*v/p*this.yScale,A=-2*g*v/y,N=(N+C)/T,C=(b+m)/p,T=-(g+v)/y;this.projMatrix=l.default.Matrix.identity(),this.projMatrix.set(S,0,0,0,0,-j,0,0,N,C,T,-1,0,0,A,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"_rotateView",value:function(S,h,m,b){var v=this.centerX,g=this.centerY,p=this.centerZ,y=(v-=this.eyeX,g-=this.eyeY,p-=this.eyeZ,l.default.Matrix.identity(this._renderer._pInst)),S=(y.rotate(this._renderer._pInst._toRadians(S),h,m,b),[v*y.mat4[0]+g*y.mat4[4]+p*y.mat4[8],v*y.mat4[1]+g*y.mat4[5]+p*y.mat4[9],v*y.mat4[2]+g*y.mat4[6]+p*y.mat4[10]]);S[0]+=this.eyeX,S[1]+=this.eyeY,S[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,S[0],S[1],S[2],this.upX,this.upY,this.upZ)}},{key:"roll",value:function(m){var h=this._getLocalAxes(),m=l.default.Quat.fromAxisAngle(this._renderer._pInst._toRadians(m),h.z[0],h.z[1],h.z[2]).rotateVector(new l.default.Vector(this.upX,this.upY,this.upZ));this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,m.x,m.y,m.z)}},{key:"pan",value:function(w){var h=this._getLocalAxes();this._rotateView(w,h.y[0],h.y[1],h.y[2])}},{key:"tilt",value:function(w){var h=this._getLocalAxes();this._rotateView(w,h.x[0],h.x[1],h.x[2])}},{key:"lookAt",value:function(w,h,m){this.camera(this.eyeX,this.eyeY,this.eyeZ,w,h,m,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(w,h,m,b,v,g,p,y,S){return w===void 0&&(w=this.defaultEyeX,h=this.defaultEyeY,m=this.defaultEyeZ,b=w,v=h,y=1,S=p=g=0),this.eyeX=w,this.eyeY=h,this.eyeZ=m,b!==void 0&&(this.centerX=b,this.centerY=v,this.centerZ=g),p!==void 0&&(this.upX=p,this.upY=y,this.upZ=S),b=this._getLocalAxes(),this.cameraMatrix.set(b.x[0],b.y[0],b.z[0],0,b.x[1],b.y[1],b.z[1],0,b.x[2],b.y[2],b.z[2],0,0,0,0,1),v=-w,this.cameraMatrix.translate([v,-h,-m]),this._isActive()&&this._renderer.uViewMatrix.set(this.cameraMatrix),this}},{key:"move",value:function(b,v,m){var g=this._getLocalAxes(),b=[g.x[0]*b,g.x[1]*b,g.x[2]*b],v=[g.y[0]*v,g.y[1]*v,g.y[2]*v],g=[g.z[0]*m,g.z[1]*m,g.z[2]*m];this.camera(this.eyeX+b[0]+v[0]+g[0],this.eyeY+b[1]+v[1]+g[1],this.eyeZ+b[2]+v[2]+g[2],this.centerX+b[0]+v[0]+g[0],this.centerY+b[1]+v[1]+g[1],this.centerZ+b[2]+v[2]+g[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(w,h,m){var b=w-this.eyeX,v=h-this.eyeY,g=m-this.eyeZ;this.camera(w,h,m,this.centerX+b,this.centerY+v,this.centerZ+g,this.upX,this.upY,this.upZ)}},{key:"set",value:function(w){for(var h=0,m=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale","useLinePerspective"];h<m.length;h++){var b=m[h];this[b]=w[b]}this.cameraMatrix=w.cameraMatrix.copy(),this.projMatrix=w.projMatrix.copy(),this._isActive()&&(this._renderer.uModelMatrix.reset(),this._renderer.uViewMatrix.set(this.cameraMatrix),this._renderer.uPMatrix.set(this.projMatrix))}},{key:"slerp",value:function(w,h,m){var b,v,g,p,y,S,j,A,N,C,T,R,P,k,F,D,q,H;m===0?this.set(w):m===1?this.set(h):(this.projMatrix.mat4[15]!==0&&(this.projMatrix.mat4[0]=w.projMatrix.mat4[0]*Math.pow(h.projMatrix.mat4[0]/w.projMatrix.mat4[0],m),this.projMatrix.mat4[5]=w.projMatrix.mat4[5]*Math.pow(h.projMatrix.mat4[5]/w.projMatrix.mat4[5],m),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),p=new l.default.Vector(w.eyeX,w.eyeY,w.eyeZ),y=new l.default.Vector(h.eyeX,h.eyeY,h.eyeZ),D=new l.default.Vector(w.centerX,w.centerY,w.centerZ),H=new l.default.Vector(h.centerX,h.centerY,h.centerZ),g=l.default.Vector.dist(p,D),b=l.default.Vector.dist(y,H),b=g*Math.pow(b/g,m),g=l.default.Vector.sub(p,y),v=1,1e-6<(q=(k=p.copy().sub(y).sub(D).add(H)).magSq())&&(v=l.default.Vector.dot(g,k)/q,v=Math.max(0,Math.min(v,1))),g=l.default.Vector.lerp(l.default.Vector.lerp(p,D,v),l.default.Vector.lerp(y,H,v),m),k=w.cameraMatrix.createSubMatrix3x3(),q=h.cameraMatrix.createSubMatrix3x3(),p=k.row(2),D=q.row(2),y=k.row(1),H=q.row(1),w=new l.default.Vector,h=new l.default.Vector,S=new l.default.Vector,j=new l.default.Vector,1-(A=.5*((k=(q=q.mult3x3(k.copy().transpose3x3())).diagonal())[0]+k[1]+k[2]-1))<1e-7?(w.set(l.default.Vector.lerp(p,D,m)).normalize(),S.set(w).mult(v*b).add(g),j.set(w).mult((v-1)*b).add(g),h.set(l.default.Vector.lerp(y,H,m)).normalize()):(D=1/(1-A),H=Math.max(k[0],k[1],k[2]),R=q.mat3[1]+q.mat3[3],P=q.mat3[2]+q.mat3[6],F=q.mat3[5]+q.mat3[7],H=H===k[0]?(C=.5*R*(D/=N=Math.sqrt((k[0]-A)*D)),T=.5*P*D,.5*(q.mat3[7]-q.mat3[5])/N):H===k[1]?(T=.5*F*(D/=C=Math.sqrt((k[1]-A)*D)),N=.5*R*D,.5*(q.mat3[2]-q.mat3[6])/C):(N=.5*P*(D/=T=Math.sqrt((k[2]-A)*D)),C=.5*F*D,.5*(q.mat3[3]-q.mat3[1])/T),R=m*Math.atan2(H,A),P=Math.cos(R),k=Math.sin(R),(H=new l.default.Matrix("mat3",[P+(F=1-P)*N*N,F*(D=N*C)+k*T,F*(q=T*N)-k*C,F*D-k*T,P+F*C*C,F*(m=C*T)+k*N,F*q+k*C,F*m-k*N,P+F*T*T])).multiplyVec3(p,w),S.set(w).mult(v*b).add(g),j.set(w).mult((v-1)*b).add(g),H.multiplyVec3(y,h)),this.camera(S.x,S.y,S.z,j.x,j.y,j.z,h.x,h.y,h.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){this.cameraType==="default"&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective())}},{key:"copy",value:function(){var w=new l.default.Camera(this._renderer);return w.cameraFOV=this.cameraFOV,w.aspectRatio=this.aspectRatio,w.eyeX=this.eyeX,w.eyeY=this.eyeY,w.eyeZ=this.eyeZ,w.centerX=this.centerX,w.centerY=this.centerY,w.centerZ=this.centerZ,w.upX=this.upX,w.upY=this.upY,w.upZ=this.upZ,w.cameraNear=this.cameraNear,w.cameraFar=this.cameraFar,w.cameraType=this.cameraType,w.useLinePerspective=this.useLinePerspective,w.cameraMatrix=this.cameraMatrix.copy(),w.projMatrix=this.projMatrix.copy(),w.yScale=this.yScale,w}},{key:"_getLocalAxes",value:function(){var w=this.eyeX-this.centerX,h=this.eyeY-this.centerY,m=this.eyeZ-this.centerZ,p=Math.sqrt(w*w+h*h+m*m),p=(p!==0&&(w/=p,h/=p,m/=p),this.upX),b=(y=this.upY)*m-(S=this.upZ)*h,v=-p*m+S*w,g=p*h-y*w,p=h*g-m*v,y=-w*g+m*b,S=w*v-h*b,j=Math.sqrt(b*b+v*v+g*g),j=(j!==0&&(b/=j,v/=j,g/=j),Math.sqrt(p*p+y*y+S*S));return j!==0&&(p/=j,y/=j,S/=j),{x:[b,v,g],y:[p,y,S],z:[w,h,m]}}},{key:"_orbit",value:function(w,j,S){var v=this.eyeX-this.centerX,g=this.eyeY-this.centerY,p=this.eyeZ-this.centerZ,b=Math.hypot(v,g,p),v=new l.default.Vector(v,g,p).normalize(),g=new l.default.Vector(this.upX,this.upY,this.upZ).normalize(),p=l.default.Vector.cross(g,v).normalize(),y=l.default.Vector.cross(p,g),S=((b=(b*=Math.pow(10,S))<this.cameraNear?this.cameraNear:b)>this.cameraFar&&(b=this.cameraFar),Math.acos(Math.max(-1,Math.min(1,l.default.Vector.dot(v,g))))+j),j=w;(S<=0||S>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),g.mult(Math.cos(S)),y.mult(Math.cos(j)*Math.sin(S)),p.mult(Math.sin(j)*Math.sin(S)),v.set(g).add(y).add(p),this.eyeX=b*v.x+this.centerX,this.eyeY=b*v.y+this.centerY,this.eyeZ=b*v.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(S,j,N){var v=this.eyeX-this.centerX,g=this.eyeY-this.centerY,p=this.eyeZ-this.centerZ,b=Math.hypot(v,g,p),v=new l.default.Vector(v,g,p).normalize(),g=new l.default.Vector(this.upX,this.upY,this.upZ),p=l.default.Vector.cross(g,v).normalize(),y=l.default.Vector.cross(v,p),C=Math.atan2(j,S),C=(y.mult(Math.sin(C)),p.mult(Math.cos(C)).add(y),Math.sqrt(S*S+j*j)),y=l.default.Vector.cross(v,p),S=((b=(b*=Math.pow(10,N))<this.cameraNear?this.cameraNear:b)>this.cameraFar&&(b=this.cameraFar),Math.cos(C)),j=Math.sin(C),N=g.dot(v),C=g.dot(p),A=N*S+C*j,N=-N*j+C*S,C=g.dot(y);g.x=A*v.x+N*p.x+C*y.x,g.y=A*v.y+N*p.y+C*y.y,g.z=A*v.z+N*p.z+C*y.z,p.mult(-j),v.mult(S).add(p).mult(b),this.camera(v.x+this.centerX,v.y+this.centerY,v.z+this.centerZ,this.centerX,this.centerY,this.centerZ,g.x,g.y,g.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&f(d.prototype,_),a}(),l.default.prototype.setCamera=function(a){this._renderer._curCamera=a,this._renderer.uPMatrix.set(a.projMatrix),this._renderer.uViewMatrix.set(a.cameraMatrix)},t=l.default.Camera,c.default=t},{"../core/main":283,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.string.sub":208}],333:[function(t,o,c){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.log2"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.log2"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function l(f,a){for(var d=0;d<a.length;d++){var _=a[d];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(f,_.key,_)}}t.default.DataArray=function(){function f(){var _=0<arguments.length&&arguments[0]!==void 0?arguments[0]:128,w=this,h=f;if(!(w instanceof h))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(_),this.initialLength=_}var a,d;return a=f,(d=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0}},{key:"rescale",value:function(){var _;this.length<this.data.length/2&&(_=1<<Math.ceil(Math.log2(this.length)),(_=new Float32Array(_)).set(this.data.subarray(0,this.length),0),this.data=_)}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength)}},{key:"push",value:function(){for(var _=arguments.length,w=new Array(_),h=0;h<_;h++)w[h]=arguments[h];this.ensureLength(this.length+w.length),this.data.set(w,this.length),this.length+=w.length}},{key:"slice",value:function(_,w){return this.data.slice(_,Math.min(w,this.length))}},{key:"subArray",value:function(_,w){return this.data.subarray(_,Math.min(w,this.length))}},{key:"ensureLength",value:function(_){for(;this.data.length<_;){var w=new Float32Array(2*this.data.length);w.set(this.data,0),this.data=w}}}])&&l(a.prototype,d),f}(),t=t.default.DataArray,c.default=t},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.log2":177,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],334:[function(R,o,c){function l(P){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(P)}function f(P){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(k){return l(k)}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":l(k)})(P)}R("core-js/modules/es.symbol"),R("core-js/modules/es.symbol.description"),R("core-js/modules/es.symbol.iterator"),R("core-js/modules/es.array.fill"),R("core-js/modules/es.array.includes"),R("core-js/modules/es.array.iterator"),R("core-js/modules/es.object.get-own-property-descriptor"),R("core-js/modules/es.object.get-prototype-of"),R("core-js/modules/es.object.to-string"),R("core-js/modules/es.reflect.construct"),R("core-js/modules/es.reflect.get"),R("core-js/modules/es.regexp.to-string"),R("core-js/modules/es.string.includes"),R("core-js/modules/es.string.iterator"),R("core-js/modules/es.typed-array.float32-array"),R("core-js/modules/es.typed-array.uint8-array"),R("core-js/modules/es.typed-array.uint8-clamped-array"),R("core-js/modules/es.typed-array.copy-within"),R("core-js/modules/es.typed-array.every"),R("core-js/modules/es.typed-array.fill"),R("core-js/modules/es.typed-array.filter"),R("core-js/modules/es.typed-array.find"),R("core-js/modules/es.typed-array.find-index"),R("core-js/modules/es.typed-array.for-each"),R("core-js/modules/es.typed-array.includes"),R("core-js/modules/es.typed-array.index-of"),R("core-js/modules/es.typed-array.iterator"),R("core-js/modules/es.typed-array.join"),R("core-js/modules/es.typed-array.last-index-of"),R("core-js/modules/es.typed-array.map"),R("core-js/modules/es.typed-array.reduce"),R("core-js/modules/es.typed-array.reduce-right"),R("core-js/modules/es.typed-array.reverse"),R("core-js/modules/es.typed-array.set"),R("core-js/modules/es.typed-array.slice"),R("core-js/modules/es.typed-array.some"),R("core-js/modules/es.typed-array.sort"),R("core-js/modules/es.typed-array.subarray"),R("core-js/modules/es.typed-array.to-locale-string"),R("core-js/modules/es.typed-array.to-string"),R("core-js/modules/es.weak-map"),R("core-js/modules/web.dom-collections.iterator"),R("core-js/modules/es.array.fill"),R("core-js/modules/es.array.includes"),R("core-js/modules/es.array.iterator"),R("core-js/modules/es.object.get-prototype-of"),R("core-js/modules/es.object.to-string"),R("core-js/modules/es.string.includes"),R("core-js/modules/es.typed-array.float32-array"),R("core-js/modules/es.typed-array.uint8-array"),R("core-js/modules/es.typed-array.uint8-clamped-array"),R("core-js/modules/es.typed-array.copy-within"),R("core-js/modules/es.typed-array.every"),R("core-js/modules/es.typed-array.fill"),R("core-js/modules/es.typed-array.filter"),R("core-js/modules/es.typed-array.find"),R("core-js/modules/es.typed-array.find-index"),R("core-js/modules/es.typed-array.for-each"),R("core-js/modules/es.typed-array.includes"),R("core-js/modules/es.typed-array.index-of"),R("core-js/modules/es.typed-array.iterator"),R("core-js/modules/es.typed-array.join"),R("core-js/modules/es.typed-array.last-index-of"),R("core-js/modules/es.typed-array.map"),R("core-js/modules/es.typed-array.reduce"),R("core-js/modules/es.typed-array.reduce-right"),R("core-js/modules/es.typed-array.reverse"),R("core-js/modules/es.typed-array.set"),R("core-js/modules/es.typed-array.slice"),R("core-js/modules/es.typed-array.some"),R("core-js/modules/es.typed-array.sort"),R("core-js/modules/es.typed-array.subarray"),R("core-js/modules/es.typed-array.to-locale-string"),R("core-js/modules/es.typed-array.to-string"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(T=R("../core/main"))&&T.__esModule?T:{default:T},d=function(P){if(P&&P.__esModule)return P;if(P===null||f(P)!=="object"&&typeof P!="function")return{default:P};var k=h();if(k&&k.has(P))return k.get(P);var F,D={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(F in P){var H;Object.prototype.hasOwnProperty.call(P,F)&&((H=q?Object.getOwnPropertyDescriptor(P,F):null)&&(H.get||H.set)?Object.defineProperty(D,F,H):D[F]=P[F])}return D.default=P,k&&k.set(P,D),D}(R("../core/constants")),_=R("./p5.Texture"),w=R("./p5.RendererGL");function h(){var P;return typeof WeakMap!="function"?null:(P=new WeakMap,h=function(){return P},P)}function m(P,k){return function(F){if(Array.isArray(F))return F}(P)||function(F,D){if(Symbol.iterator in Object(F)||Object.prototype.toString.call(F)==="[object Arguments]"){var q=[],H=!0,W=!1,Q=void 0;try{for(var J,Z=F[Symbol.iterator]();!(H=(J=Z.next()).done)&&(q.push(J.value),!D||q.length!==D);H=!0);}catch(K){W=!0,Q=K}finally{try{H||Z.return==null||Z.return()}finally{if(W)throw Q}}return q}}(P,k)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function b(P,k,F){return k in P?Object.defineProperty(P,k,{value:F,enumerable:!0,configurable:!0,writable:!0}):P[k]=F,P}function v(P,k){if(!(P instanceof k))throw new TypeError("Cannot call a class as a function")}function g(P,k){for(var F=0;F<k.length;F++){var D=k[F];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(P,D.key,D)}}function p(P,k,F){k&&g(P.prototype,k)}function y(P,k,F){return(y=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(W,q,H){var W=function(Q,J){for(;!Object.prototype.hasOwnProperty.call(Q,J)&&(Q=A(Q))!==null;);return Q}(W,q);if(W)return(W=Object.getOwnPropertyDescriptor(W,q)).get?W.get.call(H):W.value})(P,k,F||P)}function S(P,k){return(S=Object.setPrototypeOf||function(F,D){return F.__proto__=D,F})(P,k)}function j(P){return function(){var k,F=A(P),F=(k=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(k=A(this).constructor,Reflect.construct(F,arguments,k)):F.apply(this,arguments),this);if(!k||f(k)!=="object"&&typeof k!="function"){if(F!==void 0)return F;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return k}}function A(P){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(P)}var N=function(P){var k=D;if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(P&&P.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),P&&S(k,P);var F=j(D);function D(q){var H;return v(this,D),(H=F.call(this,q.target._renderer)).fbo=q,H.yScale=-1,H}return p(D,[{key:"_computeCameraDefaultSettings",value:function(){y(A(D.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ)}}]),D}(a.default.Camera),C=(a.default.FramebufferCamera=N,function(){function P(k,F){v(this,P),this.framebuffer=k,this.property=F}return p(P,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),P}()),T=(a.default.FramebufferTexture=C,function(){function P(k){var F=this,D=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},q=(v(this,P),this.target=k,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=D.format||d.UNSIGNED_BYTE,this.channels=D.channels||(k._renderer._pInst._glAttributes.alpha?d.RGBA:d.RGB),this.useDepth=D.depth===void 0||D.depth,this.depthFormat=D.depthFormat||d.FLOAT,this.textureFiltering=D.textureFiltering||d.LINEAR,D.antialias===void 0?this.antialiasSamples=k._renderer._pInst._glAttributes.antialias?2:0:typeof D.antialias=="number"?this.antialiasSamples=D.antialias:this.antialiasSamples=D.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&k.webglVersion!==d.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),this.density=D.density||k.pixelDensity(),k._renderer.GL);if(this.gl=q,D.width&&D.height?(H=k._renderer._adjustDimensions(D.width,D.height),this.width=H.adjustedWidth,this.height=H.adjustedHeight,this._autoSized=!1):(D.width===void 0!=(D.height===void 0)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=k.width,this.height=k.height,this._autoSized=!0),this._checkIfFormatsAvailable(),D.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(D.stencil===void 0||D.stencil),this.framebuffer=q.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=q.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures();var H=this.target._renderer._curCamera;this.defaultCamera=this.createCamera(),this.filterCamera=this.createCamera(),this.target._renderer._curCamera=H,this.draw(function(){return F.target.clear()})}return p(P,[{key:"resize",value:function(k,F){this._autoSized=!1;var D=this.target._renderer._adjustDimensions(k,F);k=D.adjustedWidth,F=D.adjustedHeight,this.width=k,this.height=F,this._handleResize()}},{key:"pixelDensity",value:function(k){if(!k)return this.density;this._autoSized=!1,this.density=k,this._handleResize()}},{key:"autoSized",value:function(k){if(k===void 0)return this._autoSized;this._autoSized=k,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var k=this.gl,k=(this.useDepth&&this.target.webglVersion===d.WEBGL&&!k.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===d.WEBGL&&this.depthFormat===d.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=d.UNSIGNED_INT),[d.UNSIGNED_BYTE,d.FLOAT,d.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=d.UNSIGNED_BYTE),this.useDepth&&![d.UNSIGNED_INT,d.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=d.FLOAT),(0,_.checkWebGLCapabilities)(this.target._renderer));k.float||this.format!==d.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=d.UNSIGNED_BYTE),this.useDepth&&!k.float&&this.depthFormat===d.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=d.UNSIGNED_INT),k.halfFloat||this.format!==d.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=d.UNSIGNED_BYTE),this.channels===d.RGB&&[d.FLOAT,d.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=d.RGBA)}},{key:"_recreateTextures",value:function(){var k=this.gl,F=(this._updateSize(),k.getParameter(k.TEXTURE_BINDING_2D)),D=k.getParameter(k.FRAMEBUFFER_BINDING),q=k.createTexture();if(!q)throw new Error("Unable to create color texture");k.bindTexture(k.TEXTURE_2D,q);var H=this._glColorFormat();if(k.texImage2D(k.TEXTURE_2D,0,H.internalFormat,this.width*this.density,this.height*this.density,0,H.format,H.type,null),this.colorTexture=q,k.bindFramebuffer(k.FRAMEBUFFER,this.framebuffer),k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,q,0),this.useDepth){var q=k.createTexture();if(!q)throw new Error("Unable to create depth texture");var W=this._glDepthFormat();k.bindTexture(k.TEXTURE_2D,q),k.texImage2D(k.TEXTURE_2D,0,W.internalFormat,this.width*this.density,this.height*this.density,0,W.format,W.type,null),k.framebufferTexture2D(k.FRAMEBUFFER,this.useStencil?k.DEPTH_STENCIL_ATTACHMENT:k.DEPTH_ATTACHMENT,k.TEXTURE_2D,q,0),this.depthTexture=q}this.antialias&&(this.colorRenderbuffer=k.createRenderbuffer(),k.bindRenderbuffer(k.RENDERBUFFER,this.colorRenderbuffer),k.renderbufferStorageMultisample(k.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,k.getParameter(k.MAX_SAMPLES))),H.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(W=this._glDepthFormat(),this.depthRenderbuffer=k.createRenderbuffer(),k.bindRenderbuffer(k.RENDERBUFFER,this.depthRenderbuffer),k.renderbufferStorageMultisample(k.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,k.getParameter(k.MAX_SAMPLES))),W.internalFormat,this.width*this.density,this.height*this.density)),k.bindFramebuffer(k.FRAMEBUFFER,this.aaFramebuffer),k.framebufferRenderbuffer(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&k.framebufferRenderbuffer(k.FRAMEBUFFER,this.useStencil?k.DEPTH_STENCIL_ATTACHMENT:k.DEPTH_ATTACHMENT,k.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new C(this,"depthTexture"),q=k.NEAREST,this.depthP5Texture=new a.default.Texture(this.target._renderer,this.depth,{minFilter:q,magFilter:q}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new C(this,"colorTexture"),H=this.textureFiltering===d.LINEAR?k.LINEAR:k.NEAREST,this.colorP5Texture=new a.default.Texture(this.target._renderer,this.color,{minFilter:H,magFilter:H}),this.target._renderer.textures.set(this.color,this.colorP5Texture),k.bindTexture(k.TEXTURE_2D,F),k.bindFramebuffer(k.FRAMEBUFFER,D)}},{key:"_glColorFormat",value:function(){var k,F,D=this.gl,q=this.format===d.FLOAT?D.FLOAT:this.format===d.HALF_FLOAT?this.target.webglVersion===d.WEBGL2?D.HALF_FLOAT:D.getExtension("OES_texture_half_float").HALF_FLOAT_OES:D.UNSIGNED_BYTE,H=this.channels===d.RGBA?D.RGBA:D.RGB;return{internalFormat:this.target.webglVersion===d.WEBGL2?(b(F={},D.FLOAT,b({},D.RGBA,D.RGBA32F)),b(F,D.HALF_FLOAT,b({},D.RGBA,D.RGBA16F)),b(F,D.UNSIGNED_BYTE,(b(k={},D.RGBA,D.RGBA8),b(k,D.RGB,D.RGB8),k)),F[q][H]):this.format===d.HALF_FLOAT?D.RGBA:H,format:H,type:q}}},{key:"_glDepthFormat",value:function(){var D=this.gl,k=this.useStencil?this.depthFormat===d.FLOAT?D.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===d.WEBGL2?D.UNSIGNED_INT_24_8:D.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===d.FLOAT?D.FLOAT:D.UNSIGNED_INT,F=this.useStencil?D.DEPTH_STENCIL:D.DEPTH_COMPONENT,D=this.useStencil?this.depthFormat===d.FLOAT?D.DEPTH32F_STENCIL8:this.target.webglVersion===d.WEBGL2?D.DEPTH24_STENCIL8:D.DEPTH_STENCIL:this.target.webglVersion===d.WEBGL2?this.depthFormat===d.FLOAT?D.DEPTH_COMPONENT32F:D.DEPTH_COMPONENT24:D.DEPTH_COMPONENT;return{internalFormat:D,format:F,type:k}}},{key:"_updateSize",value:function(){this._autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this._autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var q=this.color,k=this.depth,F=this.colorRenderbuffer,D=this.depthRenderbuffer,q=(this._deleteTexture(q),k&&this._deleteTexture(k),this.gl);F&&q.deleteRenderbuffer(F),D&&q.deleteRenderbuffer(D),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var k=new N(this);return k._computeCameraDefaultSettings(),k._setDefaultCamera(),this.target._renderer._curCamera=k}},{key:"_deleteTexture",value:function(k){this.gl.deleteTexture(k.rawTexture()),this.target._renderer.textures.delete(k)}},{key:"remove",value:function(){var k=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),k.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&k.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&k.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&k.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target.resetMatrix(),this.target._renderer.uViewMatrix.set(this.target._renderer._curCamera.cameraMatrix),this.target._renderer.uModelMatrix.reset(),this.target._renderer._applyStencilTestIfClipping()}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var k=this.gl;k.bindFramebuffer(k.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density)}},{key:"_beforeEnd",value:function(){if(this.antialias){var k=this.gl,F=(k.bindFramebuffer(k.READ_FRAMEBUFFER,this.aaFramebuffer),k.bindFramebuffer(k.DRAW_FRAMEBUFFER,this.framebuffer),[[k.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&F.push([k.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var D=0,q=F;D<q.length;D++){var W=m(q[D],2),H=W[0],W=W[1];k.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,H,W)}}}},{key:"end",value:function(){var k=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(k.bindFramebuffer(k.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping()}},{key:"draw",value:function(k){this.begin(),k(),this.end()}},{key:"loadPixels",value:function(){var k=this.gl,F=this.target._renderer.activeFramebuffer(),D=(k.bindFramebuffer(k.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,w.readPixelsWebGL)(this.pixels,k,this.framebuffer,0,0,this.width*this.density,this.height*this.density,D.format,D.type),F?k.bindFramebuffer(k.FRAMEBUFFER,F._framebufferToBind()):k.bindFramebuffer(k.FRAMEBUFFER,null)}},{key:"get",value:function(k,F,D,q){a.default._validateParameters("p5.Framebuffer.get",arguments);var H=this._glColorFormat();if(k===void 0&&F===void 0)F=k=0,D=this.width,q=this.height;else if(D===void 0&&q===void 0)return(k<0||F<0||k>=this.width||F>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),k=this.target.constrain(k,0,this.width-1),F=this.target.constrain(F,0,this.height-1)),(0,w.readPixelWebGL)(this.gl,this.framebuffer,k*this.density,F*this.density,H.format,H.type);k=this.target.constrain(k,0,this.width-1),F=this.target.constrain(F,0,this.height-1),D=this.target.constrain(D,1,this.width-k),q=this.target.constrain(q,1,this.height-F);for(var W=(0,w.readPixelsWebGL)(void 0,this.gl,this.framebuffer,k*this.density,F*this.density,D*this.density,q*this.density,H.format,H.type),Q=new Uint8ClampedArray(D*q*this.density*this.density*4),J=(Q.fill(255),H.type===this.gl.RGB?3:4),Z=0;Z<q*this.density;Z++)for(var K=0;K<D*this.density;K++)for(var re=0;re<4;re++){var oe,M=4*(Z*D*this.density+K)+re;re<J&&(oe=J==4?M:(Z*D*this.density+K)*J+re,Q[M]=W[oe])}return k=new a.default.Image(D*this.density,q*this.density),k.imageData=k.canvas.getContext("2d").createImageData(k.width,k.height),k.imageData.data.set(Q),k.pixels=k.imageData.data,k.updatePixels(),this.density!==1&&k.resize(D,q),k}},{key:"updatePixels",value:function(){var k=this.gl,F=(this.colorP5Texture.bindTexture(),this._glColorFormat()),D=F.format===k.RGBA?4:3,D=this.width*this.height*this.density*this.density*D,q=F.type===k.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof q)||this.pixels.length!==D)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");k.texImage2D(k.TEXTURE_2D,0,F.internalFormat,this.width*this.density,this.height*this.density,0,F.format,F.type,this.pixels),this.colorP5Texture.unbindTexture(),q=this.target._renderer.activeFramebuffer(),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(k.clearDepth(1),k.clear(k.DEPTH_BUFFER_BIT)),this.end()):(k.bindFramebuffer(k.FRAMEBUFFER,this.framebuffer),this.useDepth&&(k.clearDepth(1),k.clear(k.DEPTH_BUFFER_BIT)),q?k.bindFramebuffer(k.FRAMEBUFFER,q._framebufferToBind()):k.bindFramebuffer(k.FRAMEBUFFER,null))}}]),P}()),R=a.default.Framebuffer=T;c.default=R},{"../core/constants":272,"../core/main":283,"./p5.RendererGL":341,"./p5.Texture":343,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],335:[function(t,o,c){function l(v){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(v)}function f(v){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(g){return l(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":l(g)})(v)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.flat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.unscopables.flat"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.entries"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.flat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.unscopables.flat"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(b=t("../core/main"))&&b.__esModule?b:{default:b},d=function(v){if(v&&v.__esModule)return v;if(v===null||f(v)!=="object"&&typeof v!="function")return{default:v};var g=_();if(g&&g.has(v))return g.get(v);var p,y={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in v){var j;Object.prototype.hasOwnProperty.call(v,p)&&((j=S?Object.getOwnPropertyDescriptor(v,p):null)&&(j.get||j.set)?Object.defineProperty(y,p,j):y[p]=v[p])}return y.default=v,g&&g.set(v,y),y}(t("../core/constants"));function _(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,_=function(){return v},v)}function w(v){return function(g){if(Array.isArray(g)){for(var p=0,y=new Array(g.length);p<g.length;p++)y[p]=g[p];return y}}(v)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(v)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(v,g){return function(p){if(Array.isArray(p))return p}(v)||function(p,y){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]"){var S=[],j=!0,A=!1,N=void 0;try{for(var C,T=p[Symbol.iterator]();!(j=(C=T.next()).done)&&(S.push(C.value),!y||S.length!==y);j=!0);}catch(R){A=!0,N=R}finally{try{j||T.return==null||T.return()}finally{if(A)throw N}}return S}}(v,g)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(v,g){for(var p=0;p<g.length;p++){var y=g[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,y.key,y)}}a.default.Geometry=function(){function v(y,S,j){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");this.vertices=[],this.boundingBoxCache=null,this.lineVertices=new a.default.DataArray,this.lineTangentsIn=new a.default.DataArray,this.lineTangentsOut=new a.default.DataArray,this.lineSides=new a.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new a.default.DataArray,this.detailX=y!==void 0?y:1,this.detailY=S!==void 0?S:1,this.dirtyFlags={},this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,j instanceof Function&&j.call(this)}var g,p;return g=v,(p=[{key:"calculateBoundingBox",value:function(){if(!this.boundingBoxCache){for(var y=new a.default.Vector(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),S=new a.default.Vector(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),j=0;j<this.vertices.length;j++){var A=this.vertices[j];y.x=Math.min(y.x,A.x),y.y=Math.min(y.y,A.y),y.z=Math.min(y.z,A.z),S.x=Math.max(S.x,A.x),S.y=Math.max(S.y,A.y),S.z=Math.max(S.z,A.z)}var N=new a.default.Vector(S.x-y.x,S.y-y.y,S.z-y.z),C=new a.default.Vector((y.x+S.x)/2,(y.y+S.y)/2,(y.z+S.z)/2);this.boundingBoxCache={min:y,max:S,size:N,offset:C}}return this.boundingBoxCache}},{key:"reset",value:function(){this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"hasFillTransparency",value:function(){if(this._hasFillTransparency===void 0){this._hasFillTransparency=!1;for(var y=0;y<this.vertexColors.length;y+=4)if(this.vertexColors[y+3]<1){this._hasFillTransparency=!0;break}}return this._hasFillTransparency}},{key:"hasStrokeTransparency",value:function(){if(this._hasStrokeTransparency===void 0){this._hasStrokeTransparency=!1;for(var y=0;y<this.lineVertexColors.length;y+=4)if(this.lineVertexColors[y+3]<1){this._hasStrokeTransparency=!0;break}}return this._hasStrokeTransparency}},{key:"clearColors",value:function(){return this.vertexColors=[],this}},{key:"saveObj",value:function(){var y=this,S=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"model.obj",j="";if(this.vertices.forEach(function(C){j+="v ".concat(C.x," ").concat(C.y," ").concat(C.z,`
`)}),this.uvs&&0<this.uvs.length)for(var A=0;A<this.uvs.length;A+=2)j+="vt ".concat(this.uvs[A]," ").concat(this.uvs[A+1],`
`);this.vertexNormals&&0<this.vertexNormals.length&&this.vertexNormals.forEach(function(C){j+="vn ".concat(C.x," ").concat(C.y," ").concat(C.z,`
`)}),this.faces.forEach(function(C){var T="f";C.forEach(function(R){T=T+" "+(R+1),(0<y.vertexNormals.length||0<y.uvs.length)&&(T+="/",0<y.uvs.length&&(T+=R+1),T+="/",0<y.vertexNormals.length&&(T+=R+1))}),j+=T+`
`});var N=new Blob([j],{type:"text/plain"});a.default.prototype.downloadFile(N,S,"obj")}},{key:"saveStl",value:function(){var y=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"model.stl",S=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).binary,S=S!==void 0&&S,j=y.substring(0,y.lastIndexOf(".")),A=[],N=!0,C=!1,T=void 0;try{for(var R,P=this.faces[Symbol.iterator]();!(N=(R=P.next()).done);N=!0){var k=R.value,F=a.default.Vector.sub(this.vertices[k[1]],this.vertices[k[0]]),D=a.default.Vector.sub(this.vertices[k[2]],this.vertices[k[0]]),q=F.y*D.z-F.z*D.y,H=F.z*D.x-F.x*D.z,W=F.x*D.y-F.y*D.x;A.push(new a.default.Vector(q,H,W).normalize())}}catch(Me){C=!0,T=Me}finally{try{N||P.return==null||P.return()}finally{if(C)throw T}}if(S){var Q,J=80,C=2*this.faces.length+3*this.faces.length*4*4+80+4,T=new ArrayBuffer(C);(Q=new DataView(T)).setUint32(J,this.faces.length,!0),J+=4;for(var Z=0,K=Object.entries(this.faces);Z<K.length;Z++){var re=h(K[Z],2),M=re[0],re=re[1],M=A[M],oe=(Q.setFloat32(J,M.x,!0),J+=4,Q.setFloat32(J,M.y,!0),J+=4,Q.setFloat32(J,M.z,!0),J+=4,!0),M=!1,z=void 0;try{for(var $,ee=re[Symbol.iterator]();!(oe=($=ee.next()).done);oe=!0){var le=$.value,ce=this.vertices[le];Q.setFloat32(J,ce.x,!0),J+=4,Q.setFloat32(J,ce.y,!0),J+=4,Q.setFloat32(J,ce.z,!0),J+=4}}catch(et){M=!0,z=et}finally{try{oe||ee.return==null||ee.return()}finally{if(M)throw z}}Q.setUint16(J,0,!0),J+=2}}else{Q="solid "+j+`
`;for(var me=0,ve=Object.entries(this.faces);me<ve.length;me++){var ge=h(ve[me],2),xe=ge[0],ge=ge[1],xe=A[xe],we=(Q=Q+(" facet norm "+xe.x+" "+xe.y+" "+xe.z+`
`)+`  outer loop
`,!0),xe=!1,fe=void 0;try{for(var Se,Ce=ge[Symbol.iterator]();!(we=(Se=Ce.next()).done);we=!0){var Ne=Se.value,Oe=this.vertices[Ne];Q+="   vertex "+Oe.x+" "+Oe.y+" "+Oe.z+`
`}}catch(Me){xe=!0,fe=Me}finally{try{we||Ce.return==null||Ce.return()}finally{if(xe)throw fe}}Q=Q+`  endloop
 endfacet
`}Q+="endsolid "+j+`
`}S=new Blob([Q],{type:"text/plain"}),a.default.prototype.downloadFile(S,y,"stl")}},{key:"flipU",value:function(){this.uvs=this.uvs.flat().map(function(y,S){return S%2==0?1-y:y})}},{key:"flipV",value:function(){this.uvs=this.uvs.flat().map(function(y,S){return S%2==0?y:1-y})}},{key:"computeFaces",value:function(){this.faces.length=0;for(var y,S,j,A=this.detailX+1,N=0;N<this.detailY;N++)for(var C=0;C<this.detailX;C++)S=(N+1)*A+C+1,this.faces.push([N*A+C,y=N*A+C+1,j=(N+1)*A+C]),this.faces.push([j,y,S]);return this}},{key:"_getFaceNormal",value:function(S){var S=this.faces[S],j=this.vertices[S[0]],N=this.vertices[S[1]],S=this.vertices[S[2]],N=a.default.Vector.sub(N,j),S=a.default.Vector.sub(S,j),j=a.default.Vector.cross(N,S),A=a.default.Vector.mag(j),N=A/(a.default.Vector.mag(N)*a.default.Vector.mag(S));return N===0||isNaN(N)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),j):(1<N&&(N=1),j.mult(Math.asin(N)/A))}},{key:"computeNormals",value:function(){var y,S=this,j=0<arguments.length&&arguments[0]!==void 0?arguments[0]:d.FLAT,A=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).roundToPrecision,N=this.vertexNormals,C=this.vertices,T=this.faces;if(j===d.SMOOTH){for(var R={},P=[],k=Math.pow(10,A===void 0?3:A),F=function(Q){return Math.round(Q*k)/k},D=function(Q){return"".concat(F(Q.x),",").concat(F(Q.y),",").concat(F(Q.z))},q=0;q<C.length;q++){var H=C[q],W=D(H);R[W]===void 0&&(R[W]=P.length,P.push(H))}T.forEach(function(Q){for(var J=0;J<3;++J){var Z=Q[J],Z=C[Z],Z=D(Z);Q[J]=R[Z]}}),this.edges.forEach(function(Q){for(var J=0;J<2;++J){var Z=Q[J],Z=C[Z],Z=D(Z);Q[J]=R[Z]}}),this.vertices=C=P}for(y=N.length=0;y<C.length;++y)N.push(new a.default.Vector);for(T.forEach(function(Q,J){for(var Z=S._getFaceNormal(J),K=0;K<3;++K){var re=Q[K];N[re].add(Z)}}),y=0;y<C.length;++y)N[y].normalize();return this}},{key:"averageNormals",value:function(){for(var y=0;y<=this.detailY;y++){var S=this.detailX+1,j=a.default.Vector.add(this.vertexNormals[y*S],this.vertexNormals[y*S+this.detailX]),j=a.default.Vector.div(j,2);this.vertexNormals[y*S]=j,this.vertexNormals[y*S+this.detailX]=j}return this}},{key:"averagePoleNormals",value:function(){for(var y=new a.default.Vector(0,0,0),S=0;S<this.detailX;S++)y.add(this.vertexNormals[S]);for(var y=a.default.Vector.div(y,this.detailX),j=0;j<this.detailX;j++)this.vertexNormals[j]=y;y=new a.default.Vector(0,0,0);for(var A=this.vertices.length-1;A>this.vertices.length-1-this.detailX;A--)y.add(this.vertexNormals[A]);y=a.default.Vector.div(y,this.detailX);for(var N=this.vertices.length-1;N>this.vertices.length-1-this.detailX;N--)this.vertexNormals[N]=y;return this}},{key:"_makeTriangleEdges",value:function(){for(var y=this.edges.length=0;y<this.faces.length;y++)this.edges.push([this.faces[y][0],this.faces[y][1]]),this.edges.push([this.faces[y][1],this.faces[y][2]]),this.edges.push([this.faces[y][2],this.faces[y][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var y,S=new Map,j=new Set,A=0;A<this.edges.length;A++){var N,C=this.edges[A-1],T=this.edges[A],R=this.vertices[T[0]],P=this.vertices[T[1]],k=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*T[0],4*(T[0]+1)):[0,0,0,0],F=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*T[1],4*(T[1]+1)):[0,0,0,0],D=P.copy().sub(R).normalize(),q=0<D.magSq();q&&this._addSegment(R,P,k,F,D),0<A&&C[1]===T[0]?j.has(T[0])||(j.add(T[0]),S.delete(T[0]),y&&q&&D.dot(y)<1-1e-8&&this._addJoin(R,y,D,k)):(q&&!j.has(T[0])&&((N=S.get(T[0]))?(this._addJoin(R,N.dir,D,k),S.delete(T[0]),j.add(T[0])):S.set(T[0],{point:R,dir:D.copy().mult(-1),color:k})),y&&!j.has(C[1])&&((N=S.get(C[1]))?(this._addJoin(this.vertices[C[1]],y,N.dir.copy().mult(-1),k),S.delete(C[1]),j.add(C[1])):S.set(C[1],{point:this.vertices[C[1]],dir:y,color:k}),y=void 0)),A!==this.edges.length-1||j.has(T[1])||((R=S.get(T[1]))?(this._addJoin(P,D,R.dir.copy().mult(-1),F),S.delete(T[1]),j.add(T[1])):S.set(T[1],{point:P,dir:D,color:F})),q&&(y=D)}var H=!0,W=!1,Q=void 0;try{for(var J,Z=S.values()[Symbol.iterator]();!(H=(J=Z.next()).done);H=!0){var K=J.value,re=K.point,oe=K.dir,M=K.color;this._addCap(re,oe,M)}}catch(z){W=!0,Q=z}finally{try{H||Z.return==null||Z.return()}finally{if(W)throw Q}}return this}},{key:"_addSegment",value:function(C,T,j,A,N){var C=C.array(),T=T.array(),R=N.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var P=0,k=[this.lineTangentsIn,this.lineTangentsOut];P<k.length;P++)for(var F=k[P],D=0;D<6;D++)F.push.apply(F,w(R));return(N=this.lineVertices).push.apply(N,w(C).concat(w(T),w(C),w(T),w(T),w(C))),(N=this.lineVertexColors).push.apply(N,w(j).concat(w(A),w(j),w(A),w(A),w(j))),this}},{key:"_addCap",value:function(y,S,j){for(var A,N=y.array(),C=S.array(),T=[0,0,0],R=0;R<6;R++)(A=this.lineVertices).push.apply(A,w(N)),(A=this.lineTangentsIn).push.apply(A,w(C)),(A=this.lineTangentsOut).push.apply(A,T),(A=this.lineVertexColors).push.apply(A,w(j));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(y,S,j,A){for(var N,C=y.array(),T=S.array(),R=j.array(),P=0;P<12;P++)(N=this.lineVertices).push.apply(N,w(C)),(N=this.lineTangentsIn).push.apply(N,w(T)),(N=this.lineTangentsOut).push.apply(N,w(R)),(N=this.lineVertexColors).push.apply(N,w(A));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var y=this.vertices[0].copy(),S=this.vertices[0].copy(),j=0;j<this.vertices.length;j++)y.x=Math.max(y.x,this.vertices[j].x),S.x=Math.min(S.x,this.vertices[j].x),y.y=Math.max(y.y,this.vertices[j].y),S.y=Math.min(S.y,this.vertices[j].y),y.z=Math.max(y.z,this.vertices[j].z),S.z=Math.min(S.z,this.vertices[j].z);for(var A=a.default.Vector.lerp(y,S,.5),N=a.default.Vector.sub(y,S),C=200/Math.max(Math.max(N.x,N.y),N.z),T=0;T<this.vertices.length;T++)this.vertices[T].sub(A),this.vertices[T].mult(C)}return this}}])&&m(g.prototype,p),v}();var b=a.default.Geometry;c.default=b},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.entries":184,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],336:[function(_,o,c){_("core-js/modules/es.array.iterator"),_("core-js/modules/es.object.to-string"),_("core-js/modules/es.typed-array.float32-array"),_("core-js/modules/es.typed-array.copy-within"),_("core-js/modules/es.typed-array.every"),_("core-js/modules/es.typed-array.fill"),_("core-js/modules/es.typed-array.filter"),_("core-js/modules/es.typed-array.find"),_("core-js/modules/es.typed-array.find-index"),_("core-js/modules/es.typed-array.for-each"),_("core-js/modules/es.typed-array.includes"),_("core-js/modules/es.typed-array.index-of"),_("core-js/modules/es.typed-array.iterator"),_("core-js/modules/es.typed-array.join"),_("core-js/modules/es.typed-array.last-index-of"),_("core-js/modules/es.typed-array.map"),_("core-js/modules/es.typed-array.reduce"),_("core-js/modules/es.typed-array.reduce-right"),_("core-js/modules/es.typed-array.reverse"),_("core-js/modules/es.typed-array.set"),_("core-js/modules/es.typed-array.slice"),_("core-js/modules/es.typed-array.some"),_("core-js/modules/es.typed-array.sort"),_("core-js/modules/es.typed-array.subarray"),_("core-js/modules/es.typed-array.to-locale-string"),_("core-js/modules/es.typed-array.to-string"),_("core-js/modules/es.array.iterator"),_("core-js/modules/es.object.to-string"),_("core-js/modules/es.typed-array.float32-array"),_("core-js/modules/es.typed-array.copy-within"),_("core-js/modules/es.typed-array.every"),_("core-js/modules/es.typed-array.fill"),_("core-js/modules/es.typed-array.filter"),_("core-js/modules/es.typed-array.find"),_("core-js/modules/es.typed-array.find-index"),_("core-js/modules/es.typed-array.for-each"),_("core-js/modules/es.typed-array.includes"),_("core-js/modules/es.typed-array.index-of"),_("core-js/modules/es.typed-array.iterator"),_("core-js/modules/es.typed-array.join"),_("core-js/modules/es.typed-array.last-index-of"),_("core-js/modules/es.typed-array.map"),_("core-js/modules/es.typed-array.reduce"),_("core-js/modules/es.typed-array.reduce-right"),_("core-js/modules/es.typed-array.reverse"),_("core-js/modules/es.typed-array.set"),_("core-js/modules/es.typed-array.slice"),_("core-js/modules/es.typed-array.some"),_("core-js/modules/es.typed-array.sort"),_("core-js/modules/es.typed-array.subarray"),_("core-js/modules/es.typed-array.to-locale-string"),_("core-js/modules/es.typed-array.to-string"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(_=_("../core/main"))&&_.__esModule?_:{default:_};function f(w,h){for(var m=0;m<h.length;m++){var b=h[m];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(w,b.key,b)}}var a=Array,d=function(w){return Array.isArray(w)},_=(typeof Float32Array<"u"&&(a=Float32Array,d=function(w){return Array.isArray(w)||w instanceof Float32Array}),l.default.Matrix=function(){function w(){var v=this,g=w;if(v instanceof g)return arguments.length&&((v=arguments.length-1)<0||arguments.length<=v?void 0:arguments[v])instanceof l.default&&(this.p5=(g=arguments.length-1)<0||arguments.length<=g?void 0:arguments[g]),(arguments.length<=0?void 0:arguments[0])==="mat3"?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new a([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new a([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var h,m,b;return h=w,b=[{key:"identity",value:function(v){return new l.default.Matrix(v)}}],(m=[{key:"reset",value:function(){return this.mat3?this.mat3.set([1,0,0,0,1,0,0,0,1]):this.mat4&&this.mat4.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this}},{key:"set",value:function(v){var g=arguments;if(v instanceof l.default.Matrix?g=v.mat4:d(v)&&(g=v),g.length!==16)l.default._friendlyError("Expected 16 values but received ".concat(g.length,"."),"p5.Matrix.set");else for(var p=0;p<16;p++)this.mat4[p]=g[p];return this}},{key:"get",value:function(){return new l.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var v;return this.mat3!==void 0?((v=new l.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],v.mat3[1]=this.mat3[1],v.mat3[2]=this.mat3[2],v.mat3[3]=this.mat3[3],v.mat3[4]=this.mat3[4],v.mat3[5]=this.mat3[5],v.mat3[6]=this.mat3[6],v.mat3[7]=this.mat3[7],v.mat3[8]=this.mat3[8]):((v=new l.default.Matrix(this.p5)).mat4[0]=this.mat4[0],v.mat4[1]=this.mat4[1],v.mat4[2]=this.mat4[2],v.mat4[3]=this.mat4[3],v.mat4[4]=this.mat4[4],v.mat4[5]=this.mat4[5],v.mat4[6]=this.mat4[6],v.mat4[7]=this.mat4[7],v.mat4[8]=this.mat4[8],v.mat4[9]=this.mat4[9],v.mat4[10]=this.mat4[10],v.mat4[11]=this.mat4[11],v.mat4[12]=this.mat4[12],v.mat4[13]=this.mat4[13],v.mat4[14]=this.mat4[14],v.mat4[15]=this.mat4[15]),v}},{key:"transpose",value:function(v){var g,p,y,S,j,A;return v instanceof l.default.Matrix?(g=v.mat4[1],p=v.mat4[2],y=v.mat4[3],S=v.mat4[6],j=v.mat4[7],A=v.mat4[11],this.mat4[0]=v.mat4[0],this.mat4[1]=v.mat4[4],this.mat4[2]=v.mat4[8],this.mat4[3]=v.mat4[12],this.mat4[4]=g,this.mat4[5]=v.mat4[5],this.mat4[6]=v.mat4[9],this.mat4[7]=v.mat4[13],this.mat4[8]=p,this.mat4[9]=S,this.mat4[10]=v.mat4[10],this.mat4[11]=v.mat4[14],this.mat4[12]=y,this.mat4[13]=j,this.mat4[14]=A,this.mat4[15]=v.mat4[15]):d(v)&&(g=v[1],p=v[2],y=v[3],S=v[6],j=v[7],A=v[11],this.mat4[0]=v[0],this.mat4[1]=v[4],this.mat4[2]=v[8],this.mat4[3]=v[12],this.mat4[4]=g,this.mat4[5]=v[5],this.mat4[6]=v[9],this.mat4[7]=v[13],this.mat4[8]=p,this.mat4[9]=S,this.mat4[10]=v[10],this.mat4[11]=v[14],this.mat4[12]=y,this.mat4[13]=j,this.mat4[14]=A,this.mat4[15]=v[15]),this}},{key:"invert",value:function(W){W instanceof l.default.Matrix?(g=W.mat4[0],p=W.mat4[1],y=W.mat4[2],S=W.mat4[3],j=W.mat4[4],A=W.mat4[5],N=W.mat4[6],C=W.mat4[7],T=W.mat4[8],R=W.mat4[9],P=W.mat4[10],k=W.mat4[11],F=W.mat4[12],D=W.mat4[13],q=W.mat4[14],H=W.mat4[15]):d(W)&&(g=W[0],p=W[1],y=W[2],S=W[3],j=W[4],A=W[5],N=W[6],C=W[7],T=W[8],R=W[9],P=W[10],k=W[11],F=W[12],D=W[13],q=W[14],H=W[15]);var g,p,y,S,j,A,N,C,T,R,P,k,F,D,q,H,W=g*A-p*j,Q=g*N-y*j,J=g*C-S*j,Z=p*N-y*A,K=p*C-S*A,re=y*C-S*N,oe=T*D-R*F,M=T*q-P*F,z=T*H-k*F,$=R*q-P*D,ee=R*H-k*D,le=P*H-k*q,ce=W*le-Q*ee+J*$+Z*z-K*M+re*oe;return ce?(this.mat4[0]=(A*le-N*ee+C*$)*(ce=1/ce),this.mat4[1]=(y*ee-p*le-S*$)*ce,this.mat4[2]=(D*re-q*K+H*Z)*ce,this.mat4[3]=(P*K-R*re-k*Z)*ce,this.mat4[4]=(N*z-j*le-C*M)*ce,this.mat4[5]=(g*le-y*z+S*M)*ce,this.mat4[6]=(q*J-F*re-H*Q)*ce,this.mat4[7]=(T*re-P*J+k*Q)*ce,this.mat4[8]=(j*ee-A*z+C*oe)*ce,this.mat4[9]=(p*z-g*ee-S*oe)*ce,this.mat4[10]=(F*K-D*J+H*W)*ce,this.mat4[11]=(R*J-T*K-k*W)*ce,this.mat4[12]=(A*M-j*$-N*oe)*ce,this.mat4[13]=(g*$-p*M+y*oe)*ce,this.mat4[14]=(D*Q-F*Z-q*W)*ce,this.mat4[15]=(T*Z-R*Q+P*W)*ce,this):null}},{key:"invert3x3",value:function(){var v=this.mat3[0],g=this.mat3[1],p=this.mat3[2],y=this.mat3[3],S=this.mat3[4],j=this.mat3[5],A=this.mat3[6],N=this.mat3[7],C=this.mat3[8],T=C*S-j*N,R=-C*y+j*A,P=N*y-S*A,k=v*T+g*R+p*P;return k?(this.mat3[0]=T*(k=1/k),this.mat3[1]=(-C*g+p*N)*k,this.mat3[2]=(j*g-p*S)*k,this.mat3[3]=R*k,this.mat3[4]=(C*v-p*A)*k,this.mat3[5]=(-j*v+p*y)*k,this.mat3[6]=P*k,this.mat3[7]=(-N*v+g*A)*k,this.mat3[8]=(S*v-g*y)*k,this):null}},{key:"transpose3x3",value:function(v){var g=(v=v===void 0?this.mat3:v)[1],p=v[2],y=v[5];return this.mat3[0]=v[0],this.mat3[1]=v[3],this.mat3[2]=v[6],this.mat3[3]=g,this.mat3[4]=v[4],this.mat3[5]=v[7],this.mat3[6]=p,this.mat3[7]=y,this.mat3[8]=v[8],this}},{key:"inverseTranspose",value:function(v){if(v=v.mat4,this.mat3===void 0?l.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=v[0],this.mat3[1]=v[1],this.mat3[2]=v[2],this.mat3[3]=v[4],this.mat3[4]=v[5],this.mat3[5]=v[6],this.mat3[6]=v[8],this.mat3[7]=v[9],this.mat3[8]=v[10]),v=this.invert3x3(),v)v.transpose3x3(this.mat3);else for(var g=0;g<9;g++)this.mat3[g]=0;return this}},{key:"determinant",value:function(){var v=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],g=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],p=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],y=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],S=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],j=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],A=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],N=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],C=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],T=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],R=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return v*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-g*R+p*T+y*C-S*N+j*A}},{key:"mult",value:function(p){var g;if(p===this||p===this.mat4)g=this.copy().mat4;else if(p instanceof l.default.Matrix)g=p.mat4;else if(d(p))g=p;else{if(arguments.length!==16)return;g=arguments}var p=this.mat4[0],y=this.mat4[1],S=this.mat4[2],j=this.mat4[3];return this.mat4[0]=p*g[0]+y*g[4]+S*g[8]+j*g[12],this.mat4[1]=p*g[1]+y*g[5]+S*g[9]+j*g[13],this.mat4[2]=p*g[2]+y*g[6]+S*g[10]+j*g[14],this.mat4[3]=p*g[3]+y*g[7]+S*g[11]+j*g[15],p=this.mat4[4],y=this.mat4[5],S=this.mat4[6],j=this.mat4[7],this.mat4[4]=p*g[0]+y*g[4]+S*g[8]+j*g[12],this.mat4[5]=p*g[1]+y*g[5]+S*g[9]+j*g[13],this.mat4[6]=p*g[2]+y*g[6]+S*g[10]+j*g[14],this.mat4[7]=p*g[3]+y*g[7]+S*g[11]+j*g[15],p=this.mat4[8],y=this.mat4[9],S=this.mat4[10],j=this.mat4[11],this.mat4[8]=p*g[0]+y*g[4]+S*g[8]+j*g[12],this.mat4[9]=p*g[1]+y*g[5]+S*g[9]+j*g[13],this.mat4[10]=p*g[2]+y*g[6]+S*g[10]+j*g[14],this.mat4[11]=p*g[3]+y*g[7]+S*g[11]+j*g[15],p=this.mat4[12],y=this.mat4[13],S=this.mat4[14],j=this.mat4[15],this.mat4[12]=p*g[0]+y*g[4]+S*g[8]+j*g[12],this.mat4[13]=p*g[1]+y*g[5]+S*g[9]+j*g[13],this.mat4[14]=p*g[2]+y*g[6]+S*g[10]+j*g[14],this.mat4[15]=p*g[3]+y*g[7]+S*g[11]+j*g[15],this}},{key:"apply",value:function(p){var g;if(p===this||p===this.mat4)g=this.copy().mat4;else if(p instanceof l.default.Matrix)g=p.mat4;else if(d(p))g=p;else{if(arguments.length!==16)return;g=arguments}var p=this.mat4,y=p[0],S=p[4],j=p[8],A=p[12],y=(p[0]=g[0]*y+g[1]*S+g[2]*j+g[3]*A,p[4]=g[4]*y+g[5]*S+g[6]*j+g[7]*A,p[8]=g[8]*y+g[9]*S+g[10]*j+g[11]*A,p[12]=g[12]*y+g[13]*S+g[14]*j+g[15]*A,p[1]),S=p[5],j=p[9],A=p[13],y=(p[1]=g[0]*y+g[1]*S+g[2]*j+g[3]*A,p[5]=g[4]*y+g[5]*S+g[6]*j+g[7]*A,p[9]=g[8]*y+g[9]*S+g[10]*j+g[11]*A,p[13]=g[12]*y+g[13]*S+g[14]*j+g[15]*A,p[2]),S=p[6],j=p[10],A=p[14],y=(p[2]=g[0]*y+g[1]*S+g[2]*j+g[3]*A,p[6]=g[4]*y+g[5]*S+g[6]*j+g[7]*A,p[10]=g[8]*y+g[9]*S+g[10]*j+g[11]*A,p[14]=g[12]*y+g[13]*S+g[14]*j+g[15]*A,p[3]),S=p[7],j=p[11],A=p[15];return p[3]=g[0]*y+g[1]*S+g[2]*j+g[3]*A,p[7]=g[4]*y+g[5]*S+g[6]*j+g[7]*A,p[11]=g[8]*y+g[9]*S+g[10]*j+g[11]*A,p[15]=g[12]*y+g[13]*S+g[14]*j+g[15]*A,this}},{key:"scale",value:function(v,g,p){return v instanceof l.default.Vector?(g=v.y,p=v.z,v=v.x):v instanceof Array&&(g=v[1],p=v[2],v=v[0]),this.mat4[0]*=v,this.mat4[1]*=v,this.mat4[2]*=v,this.mat4[3]*=v,this.mat4[4]*=g,this.mat4[5]*=g,this.mat4[6]*=g,this.mat4[7]*=g,this.mat4[8]*=p,this.mat4[9]*=p,this.mat4[10]*=p,this.mat4[11]*=p,this}},{key:"rotate",value:function(W,ee,$,y){ee instanceof l.default.Vector?($=ee.y,y=ee.z,ee=ee.x):ee instanceof Array&&($=ee[1],y=ee[2],ee=ee[0]);var S=Math.sqrt(ee*ee+$*$+y*y),S=(ee*=1/S,$*=1/S,y*=1/S,this.mat4[0]),j=this.mat4[1],A=this.mat4[2],N=this.mat4[3],C=this.mat4[4],T=this.mat4[5],R=this.mat4[6],P=this.mat4[7],k=this.mat4[8],F=this.mat4[9],D=this.mat4[10],q=this.mat4[11],H=Math.sin(W),W=Math.cos(W),Q=1-W,J=ee*ee*Q+W,Z=$*ee*Q+y*H,K=y*ee*Q-$*H,re=ee*$*Q-y*H,oe=$*$*Q+W,M=y*$*Q+ee*H,z=ee*y*Q+$*H,$=$*y*Q-ee*H,ee=y*y*Q+W;return this.mat4[0]=S*J+C*Z+k*K,this.mat4[1]=j*J+T*Z+F*K,this.mat4[2]=A*J+R*Z+D*K,this.mat4[3]=N*J+P*Z+q*K,this.mat4[4]=S*re+C*oe+k*M,this.mat4[5]=j*re+T*oe+F*M,this.mat4[6]=A*re+R*oe+D*M,this.mat4[7]=N*re+P*oe+q*M,this.mat4[8]=S*z+C*$+k*ee,this.mat4[9]=j*z+T*$+F*ee,this.mat4[10]=A*z+R*$+D*ee,this.mat4[11]=N*z+P*$+q*ee,this}},{key:"translate",value:function(y){var g=y[0],p=y[1],y=y[2]||0;this.mat4[12]+=this.mat4[0]*g+this.mat4[4]*p+this.mat4[8]*y,this.mat4[13]+=this.mat4[1]*g+this.mat4[5]*p+this.mat4[9]*y,this.mat4[14]+=this.mat4[2]*g+this.mat4[6]*p+this.mat4[10]*y,this.mat4[15]+=this.mat4[3]*g+this.mat4[7]*p+this.mat4[11]*y}},{key:"rotateX",value:function(v){this.rotate(v,1,0,0)}},{key:"rotateY",value:function(v){this.rotate(v,0,1,0)}},{key:"rotateZ",value:function(v){this.rotate(v,0,0,1)}},{key:"perspective",value:function(S,g,p,y){var S=1/Math.tan(S/2),j=1/(p-y);return this.mat4[0]=S/g,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=S,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(y+p)*j,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*y*p*j,this.mat4[15]=0,this}},{key:"ortho",value:function(v,g,p,y,S,j){var A=1/(v-g),N=1/(p-y),C=1/(S-j);return this.mat4[0]=-2*A,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*N,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*C,this.mat4[11]=0,this.mat4[12]=(v+g)*A,this.mat4[13]=(y+p)*N,this.mat4[14]=(j+S)*C,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(v,g,p,y){var S=new Array(4),j=this.mat4;return S[0]=j[0]*v+j[4]*g+j[8]*p+j[12]*y,S[1]=j[1]*v+j[5]*g+j[9]*p+j[13]*y,S[2]=j[2]*v+j[6]*g+j[10]*p+j[14]*y,S[3]=j[3]*v+j[7]*g+j[11]*p+j[15]*y,S}},{key:"multiplyPoint",value:function(p){var y=p.x,g=p.y,p=p.z,y=this.multiplyVec4(y,g,p,1);return new l.default.Vector(y[0],y[1],y[2])}},{key:"multiplyAndNormalizePoint",value:function(p){var y=p.x,g=p.y,p=p.z,y=this.multiplyVec4(y,g,p,1);return y[0]/=y[3],y[1]/=y[3],y[2]/=y[3],new l.default.Vector(y[0],y[1],y[2])}},{key:"multiplyDirection",value:function(p){var y=p.x,g=p.y,p=p.z,y=this.multiplyVec4(y,g,p,0);return new l.default.Vector(y[0],y[1],y[2])}},{key:"mult3x3",value:function(p){var g;if(p===this||p===this.mat3)g=this.copy().mat3;else if(p instanceof l.default.Matrix)g=p.mat3;else if(d(p))g=p;else{if(arguments.length!==9)return;g=arguments}var p=this.mat3[0],y=this.mat3[1],S=this.mat3[2];return this.mat3[0]=p*g[0]+y*g[3]+S*g[6],this.mat3[1]=p*g[1]+y*g[4]+S*g[7],this.mat3[2]=p*g[2]+y*g[5]+S*g[8],p=this.mat3[3],y=this.mat3[4],S=this.mat3[5],this.mat3[3]=p*g[0]+y*g[3]+S*g[6],this.mat3[4]=p*g[1]+y*g[4]+S*g[7],this.mat3[5]=p*g[2]+y*g[5]+S*g[8],p=this.mat3[6],y=this.mat3[7],S=this.mat3[8],this.mat3[6]=p*g[0]+y*g[3]+S*g[6],this.mat3[7]=p*g[1]+y*g[4]+S*g[7],this.mat3[8]=p*g[2]+y*g[5]+S*g[8],this}},{key:"column",value:function(v){return new l.default.Vector(this.mat3[3*v],this.mat3[3*v+1],this.mat3[3*v+2])}},{key:"row",value:function(v){return new l.default.Vector(this.mat3[v],this.mat3[v+3],this.mat3[v+6])}},{key:"diagonal",value:function(){return this.mat3!==void 0?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(v,g){return(g=g===void 0?v.copy():g).x=this.row(0).dot(v),g.y=this.row(1).dot(v),g.z=this.row(2).dot(v),g}},{key:"createSubMatrix3x3",value:function(){var v=new l.default.Matrix("mat3");return v.mat3[0]=this.mat4[0],v.mat3[1]=this.mat4[1],v.mat3[2]=this.mat4[2],v.mat3[3]=this.mat4[4],v.mat3[4]=this.mat4[5],v.mat3[5]=this.mat4[6],v.mat3[6]=this.mat4[8],v.mat3[7]=this.mat4[9],v.mat3[8]=this.mat4[10],v}}])&&f(h.prototype,m),b&&f(h,b),w}(),l.default.Matrix);c.default=_},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],337:[function(t,o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(a,d){for(var _=0;_<d.length;_++){var w=d[_];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(a,w.key,w)}}l.default.Quat=function(){function a(h,m,b,v){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.w=h,this.vec=new l.default.Vector(m,b,v)}var d,_,w;return d=a,w=[{key:"fromAxisAngle",value:function(h,p,b,v){var g=Math.cos(h/2),p=new l.default.Vector(p,b,v).normalize().mult(Math.sin(h/2));return new l.default.Quat(g,p.x,p.y,p.z)}}],(_=[{key:"conjugate",value:function(){return new l.default.Quat(this.w,-this.vec.x,-this.vec.y,-this.vec.z)}},{key:"multiply",value:function(h){return new l.default.Quat(this.w*h.w-this.vec.x*h.vec.x-this.vec.y*h.vec.y-this.vec.z-h.vec.z,this.w*h.vec.x+this.vec.x*h.w+this.vec.y*h.vec.z-this.vec.z*h.vec.y,this.w*h.vec.y-this.vec.x*h.vec.z+this.vec.y*h.w+this.vec.z*h.vec.x,this.w*h.vec.z+this.vec.x*h.vec.y-this.vec.y*h.vec.x+this.vec.z*h.w)}},{key:"rotateVector",value:function(h){return new l.default.Vector.mult(h,this.w*this.w-this.vec.dot(this.vec)).add(l.default.Vector.mult(this.vec,2*h.dot(this.vec))).add(l.default.Vector.mult(this.vec,2*this.w).cross(h)).clampToZero()}},{key:"rotateBy",value:function(h){return h.multiply(this).multiply(h.conjugate()).vec.clampToZero()}}])&&f(d.prototype,_),w&&f(d,w),a}(),t=l.default.Quat,c.default=t},{"../core/main":283}],338:[function(t,o,c){t("core-js/modules/es.array.map"),t("core-js/modules/es.array.map"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function l(f,a){for(var d=0;d<a.length;d++){var _=a[d];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(f,_.key,_)}}t.default.RenderBuffer=function(){function f(_,w,h,m,b,v){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.size=_,this.src=w,this.dst=h,this.attr=m,this._renderer=b,this.map=v}var a,d;return a=f,(d=[{key:"_prepareBuffer",value:function(_,w){var h,m,b,p=w.attributes,v=this._renderer.GL,g=_.model||_,p=p[this.attr];p&&(h=_[this.dst],0<(m=g[this.src]).length?((b=!h)&&(_[this.dst]=h=v.createBuffer()),v.bindBuffer(v.ARRAY_BUFFER,h),!b&&g.dirtyFlags[this.src]===!1||(b=(_=this.map)?_(m):m,this._renderer._bindBuffer(h,v.ARRAY_BUFFER,b),g.dirtyFlags[this.src]=!1),w.enableAttrib(p,this.size)):(_=p.location)!==-1&&this._renderer.registerEnabled.has(_)&&(v.disableVertexAttribArray(_),this._renderer.registerEnabled.delete(_)))}}])&&l(a.prototype,d),f}(),t=t.default.RenderBuffer,c.default=t},{"../core/main":283,"core-js/modules/es.array.map":168}],339:[function(t,o,c){function l(b){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(b)}function f(b){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(v){return l(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":l(v)})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(m=t("../core/main"))&&m.__esModule?m:{default:m},d=function(b){if(b&&b.__esModule)return b;if(b===null||f(b)!=="object"&&typeof b!="function")return{default:b};var v=_();if(v&&v.has(b))return v.get(b);var g,p={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in b){var S;Object.prototype.hasOwnProperty.call(b,g)&&((S=y?Object.getOwnPropertyDescriptor(b,g):null)&&(S.get||S.set)?Object.defineProperty(p,g,S):p[g]=b[g])}return p.default=b,v&&v.set(b,p),p}(t("../core/constants"));function _(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,_=function(){return b},b)}function w(b){return function(v){if(Array.isArray(v)){for(var g=0,p=new Array(v.length);g<v.length;g++)p[g]=v[g];return p}}(b)||function(v){if(Symbol.iterator in Object(v)||Object.prototype.toString.call(v)==="[object Arguments]")return Array.from(v)}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t("./p5.RenderBuffer"),a.default.RendererGL.prototype.beginShape=function(b){return this.immediateMode.shapeMode=b!==void 0?b:d.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var h={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},m=(a.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==d.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length)},a.default.RendererGL.prototype.vertex=function(b,v){if(this.immediateMode.shapeMode===d.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var g in h){var p=h[g],g=this.immediateMode.geometry[g];g.push.apply(g,w(g.slice(g.length-3*p,g.length-2*p)).concat(w(g.slice(g.length-p,g.length))))}var y,S,j=y=S=0,A=(arguments.length===3?j=arguments[2]:arguments.length===4?(y=arguments[2],S=arguments[3]):arguments.length===5&&(j=arguments[2],y=arguments[3],S=arguments[4]),new a.default.Vector(b,v,j)),A=(this.immediateMode.geometry.vertices.push(A),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]),A=(this.immediateMode.geometry.vertexColors.push(A[0],A[1],A[2],A[3]),this.curStrokeColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexStrokeColors.push(A[0],A[1],A[2],A[3]),this.textureMode!==d.IMAGE||this.isProcessingVertices||(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(y/=this._tex.width,S/=this._tex.height):this.userFillShader===void 0&&this.userStrokeShader===void 0&&this.userPointShader===void 0&&this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(y,S),this.immediateMode._bezierVertex[0]=b,this.immediateMode._bezierVertex[1]=v,this.immediateMode._bezierVertex[2]=j,this.immediateMode._quadraticVertex[0]=b,this.immediateMode._quadraticVertex[1]=v,this.immediateMode._quadraticVertex[2]=j,this},a.default.RendererGL.prototype.normal=function(b,v,g){return b instanceof a.default.Vector?this._currentNormal=b:this._currentNormal=new a.default.Vector(b,v,g),this},a.default.RendererGL.prototype.endShape=function(b,v,g,p,y,S){var j,A=6<arguments.length&&arguments[6]!==void 0?arguments[6]:1;return this.immediateMode.shapeMode===d.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.immediateMode.geometry.vertices.length===3&&this.immediateMode.shapeMode===d.TESS&&(this.immediateMode.shapeMode=d.TRIANGLES),this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),j=this.isProcessingVertices=!1,this.immediateMode.shapeMode!==d.LINE_STRIP&&this.immediateMode.shapeMode!==d.LINES||(this.immediateMode.shapeMode=d.TRIANGLE_FAN,j=!0),this.immediateMode.shapeMode===d.QUADS?this.immediateMode.shapeMode=d.TRIANGLES:this.immediateMode.shapeMode===d.QUAD_STRIP&&(this.immediateMode.shapeMode=d.TRIANGLE_STRIP),this._doFill&&!j&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(A),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},a.default.RendererGL.prototype._processVertices=function(b){var v;this.immediateMode.geometry.vertices.length!==0&&(v=this._doStroke,b=b===d.CLOSE,v&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,b),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),v=this.immediateMode.shapeMode===d.TESS,b=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||v||b)&&this.immediateMode.shapeMode!==d.LINES&&this._tesselateShape())},a.default.RendererGL.prototype._calculateEdges=function(b,v,g){var p=[],y=0,S=this.immediateMode.contourIndices.slice(),j=0;switch(b){case d.TRIANGLE_STRIP:for(y=0;y<v.length-2;y++)p.push([y,y+1]),p.push([y,y+2]);p.push([y,y+1]);break;case d.TRIANGLE_FAN:for(y=1;y<v.length-1;y++)p.push([0,y]),p.push([y,y+1]);p.push([0,v.length-1]);break;case d.TRIANGLES:for(y=0;y<v.length-2;y+=3)p.push([y,y+1]),p.push([y+1,y+2]),p.push([y+2,y]);break;case d.LINES:for(y=0;y<v.length-1;y+=2)p.push([y,y+1]);break;case d.QUADS:for(y=0;y<v.length-5;y+=6)p.push([y,y+1]),p.push([y+1,y+2]),p.push([y+3,y+5]),p.push([y+4,y+5]);break;case d.QUAD_STRIP:for(y=0;y<v.length-2;y+=2)p.push([y,y+1]),p.push([y,y+2]),p.push([y+1,y+3]);p.push([y,y+1]);break;default:for(y=0;y<v.length;y++)y+1<v.length&&y+1!==S[0]?p.push([y,y+1]):((g||j)&&p.push([y,j]),0<S.length&&(j=S.shift()))}return b!==d.TESS&&g&&p.push([v.length-1,0]),p},a.default.RendererGL.prototype._tesselateShape=function(){for(var b=this,v=(this.immediateMode.shapeMode=d.TRIANGLES,[[]]),g=0;g<this.immediateMode.geometry.vertices.length;g++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===g&&(this.immediateMode.contourIndices.shift(),v.push([])),v[v.length-1].push(this.immediateMode.geometry.vertices[g].x,this.immediateMode.geometry.vertices[g].y,this.immediateMode.geometry.vertices[g].z,this.immediateMode.geometry.uvs[2*g],this.immediateMode.geometry.uvs[2*g+1],this.immediateMode.geometry.vertexColors[4*g],this.immediateMode.geometry.vertexColors[4*g+1],this.immediateMode.geometry.vertexColors[4*g+2],this.immediateMode.geometry.vertexColors[4*g+3],this.immediateMode.geometry.vertexNormals[g].x,this.immediateMode.geometry.vertexNormals[g].y,this.immediateMode.geometry.vertexNormals[g].z);for(var p,y=this._triangulate(v),S=this.immediateMode.geometry.vertices,j=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),A=0,N=y.length;A<N;A+=a.default.RendererGL.prototype.tessyVertexSize)j.push.apply(j,w(y.slice(A+5,A+9))),this.normal.apply(this,w(y.slice(A+9,A+12))),this.vertex.apply(this,w(y.slice(A,A+5)));this.geometryBuilder&&(p=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map(function(C){return C.map(function(T){if(!p.has(T)){var R=S[T],P=b.immediateMode.geometry.vertices.findIndex(function(Q){return R.x===Q.x&&R.y===Q.y&&R.z===Q.z});if(P===-1){for(var k=1/0,F=0,D=0;D<b.immediateMode.geometry.vertices.length;D++){var H=b.immediateMode.geometry.vertices[D],W=R.x-H.x,q=R.y-H.y,H=R.z-H.z,W=W*W+q*q+H*H;W<k&&(k=W,F=D)}P=F}p.set(T,P)}return p.get(T)})})),this.immediateMode.geometry.vertexColors=j},a.default.RendererGL.prototype._drawImmediateFill=function(){var b,v=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1,g=this.GL,p=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,b=this._getImmediateFillShader(),this._setFillUniforms(b),!0),y=!1,S=void 0;try{for(var j,A=this.immediateMode.buffers.fill[Symbol.iterator]();!(p=(j=A.next()).done);p=!0)j.value._prepareBuffer(this.immediateMode.geometry,b)}catch(N){y=!0,S=N}finally{try{p||A.return==null||A.return()}finally{if(y)throw S}}if(b.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor,this.immediateMode.geometry.hasFillTransparency()),v===1)g.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{g.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,v)}catch{console.log(" p5.js says: Instancing is only supported in WebGL2 mode")}b.unbindShader()},a.default.RendererGL.prototype._drawImmediateStroke=function(){var b=this.GL,v=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),g=(this._setStrokeUniforms(v),!0),p=!1,y=void 0;try{for(var S,j=this.immediateMode.buffers.stroke[Symbol.iterator]();!(g=(S=j.next()).done);g=!0)S.value._prepareBuffer(this.immediateMode.geometry,v)}catch(A){p=!0,y=A}finally{try{g||j.return==null||j.return()}finally{if(p)throw y}}v.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,this.immediateMode.geometry.hasFillTransparency()),b.drawArrays(b.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),v.unbindShader()},a.default.RendererGL);c.default=m},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.find-index":158,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.map":175,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],340:[function(t,o,c){function l(h){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function f(h){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(m){return l(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":l(m)})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(w=t("../core/main"))&&w.__esModule?w:{default:w},d=(t("./p5.RendererGL"),t("./p5.RenderBuffer"),function(h){if(h&&h.__esModule)return h;if(h===null||f(h)!=="object"&&typeof h!="function")return{default:h};var m=_();if(m&&m.has(h))return m.get(h);var b,v={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in h){var p;Object.prototype.hasOwnProperty.call(h,b)&&((p=g?Object.getOwnPropertyDescriptor(h,b):null)&&(p.get||p.set)?Object.defineProperty(v,b,p):v[b]=h[b])}return v.default=h,m&&m.set(h,v),v}(t("../core/constants")));function _(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,_=function(){return h},h)}a.default.RendererGL.prototype.freeGeometry=function(h){h.gid?this._freeBuffers(h.gid):console.warn("The model you passed to freeGeometry does not have an id!")},a.default.RendererGL.prototype._initBufferDefaults=function(h){var m;return this._freeBuffers(h),1e3<Object.keys(this.retainedMode.geometry).length&&(m=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(m)),this.retainedMode.geometry[h]={}},a.default.RendererGL.prototype._freeBuffers=function(h){var m,b=this.retainedMode.geometry[h];function v(g){var p=!0,y=!1,S=void 0;try{for(var j,A=g[Symbol.iterator]();!(p=(j=A.next()).done);p=!0){var N=j.value;b[N.dst]&&(m.deleteBuffer(b[N.dst]),b[N.dst]=null)}}catch(C){y=!0,S=C}finally{try{p||A.return==null||A.return()}finally{if(y)throw S}}}b&&(delete this.retainedMode.geometry[h],m=this.GL,b.indexBuffer&&m.deleteBuffer(b.indexBuffer),v(this.retainedMode.buffers.stroke),v(this.retainedMode.buffers.fill))},a.default.RendererGL.prototype.createBuffers=function(y,m){var b,v,g,p=this.GL,y=this._initBufferDefaults(y),S=(y.model=m,y.indexBuffer);return m.faces.length?(S=S||(y.indexBuffer=p.createBuffer()),g=(v=(b=a.default.RendererGL.prototype._flatten(m.faces)).some(function(j){return 65535<j}))?Uint32Array:Uint16Array,this._bindBuffer(S,p.ELEMENT_ARRAY_BUFFER,b,g),y.indexBufferType=v?p.UNSIGNED_INT:p.UNSIGNED_SHORT,y.vertexCount=3*m.faces.length):(S&&(p.deleteBuffer(S),y.indexBuffer=null),y.vertexCount=m.vertices?m.vertices.length:0),y.lineVertexCount=m.lineVertices?m.lineVertices.length/3:0,y},a.default.RendererGL.prototype.drawBuffers=function(h){var m=this.GL,b=this.retainedMode.geometry[h];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[h].vertexCount){this._useVertexColor=0<b.model.vertexColors.length;var v=this._getRetainedFillShader(),g=(this._setFillUniforms(v),!0),p=!1,y=void 0;try{for(var S,j=this.retainedMode.buffers.fill[Symbol.iterator]();!(g=(S=j.next()).done);g=!0)S.value._prepareBuffer(b,v)}catch(R){p=!0,y=R}finally{try{g||j.return==null||j.return()}finally{if(p)throw y}}v.disableRemainingAttributes(),b.indexBuffer&&this._bindBuffer(b.indexBuffer,m.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor,b.model.hasFillTransparency()),this._drawElements(m.TRIANGLES,h),v.unbindShader()}if(!this.geometryBuilder&&this._doStroke&&0<b.lineVertexCount){this._useLineColor=0<b.model.vertexStrokeColors.length;var A=this._getRetainedStrokeShader(),N=(this._setStrokeUniforms(A),!0),p=!1,y=void 0;try{for(var C,T=this.retainedMode.buffers.stroke[Symbol.iterator]();!(N=(C=T.next()).done);N=!0)C.value._prepareBuffer(b,A)}catch(k){p=!0,y=k}finally{try{N||T.return==null||T.return()}finally{if(p)throw y}}A.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,b.model.hasStrokeTransparency()),this._drawArrays(m.TRIANGLES,h),A.unbindShader()}return this.geometryBuilder&&this.geometryBuilder.addRetained(b),this},a.default.RendererGL.prototype.drawBuffersScaled=function(h,m,b,v){var g=this.uModelMatrix.copy();try{this.uModelMatrix.scale(m,b,v),this.drawBuffers(h)}finally{this.uModelMatrix=g}},a.default.RendererGL.prototype._drawArrays=function(h,m){return this.GL.drawArrays(h,0,this.retainedMode.geometry[m].lineVertexCount),this},a.default.RendererGL.prototype._drawElements=function(h,b){var b=this.retainedMode.geometry[b],v=this.GL;if(b.indexBuffer){if(this._pInst.webglVersion!==d.WEBGL2&&b.indexBufferType===v.UNSIGNED_INT&&!v.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");v.drawElements(v.TRIANGLES,b.vertexCount,b.indexBufferType,0)}else v.drawArrays(h||v.TRIANGLES,0,b.vertexCount)},a.default.RendererGL.prototype._drawPoints=function(h,m){var b=this.GL,v=this._getImmediatePointShader();this._setPointUniforms(v),this._bindBuffer(m,b.ARRAY_BUFFER,this._vToNArray(h),Float32Array,b.STATIC_DRAW),v.enableAttrib(v.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),b.drawArrays(b.Points,0,h.length),v.unbindShader()};var w=a.default.RendererGL;c.default=w},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"./p5.RendererGL":341,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],341:[function(D,o,c){function l(Z){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K})(Z)}function f(Z){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(K){return l(K)}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":l(K)})(Z)}D("core-js/modules/es.symbol"),D("core-js/modules/es.symbol.description"),D("core-js/modules/es.symbol.iterator"),D("core-js/modules/es.array.concat"),D("core-js/modules/es.array.copy-within"),D("core-js/modules/es.array.every"),D("core-js/modules/es.array.fill"),D("core-js/modules/es.array.flat"),D("core-js/modules/es.array.flat-map"),D("core-js/modules/es.array.from"),D("core-js/modules/es.array.includes"),D("core-js/modules/es.array.iterator"),D("core-js/modules/es.array.map"),D("core-js/modules/es.array.slice"),D("core-js/modules/es.array.some"),D("core-js/modules/es.array.unscopables.flat"),D("core-js/modules/es.array.unscopables.flat-map"),D("core-js/modules/es.map"),D("core-js/modules/es.object.assign"),D("core-js/modules/es.object.get-own-property-descriptor"),D("core-js/modules/es.object.get-prototype-of"),D("core-js/modules/es.object.to-string"),D("core-js/modules/es.reflect.construct"),D("core-js/modules/es.reflect.get"),D("core-js/modules/es.regexp.to-string"),D("core-js/modules/es.set"),D("core-js/modules/es.string.includes"),D("core-js/modules/es.string.iterator"),D("core-js/modules/es.typed-array.float32-array"),D("core-js/modules/es.typed-array.float64-array"),D("core-js/modules/es.typed-array.int16-array"),D("core-js/modules/es.typed-array.uint8-array"),D("core-js/modules/es.typed-array.uint16-array"),D("core-js/modules/es.typed-array.uint32-array"),D("core-js/modules/es.typed-array.copy-within"),D("core-js/modules/es.typed-array.every"),D("core-js/modules/es.typed-array.fill"),D("core-js/modules/es.typed-array.filter"),D("core-js/modules/es.typed-array.find"),D("core-js/modules/es.typed-array.find-index"),D("core-js/modules/es.typed-array.for-each"),D("core-js/modules/es.typed-array.includes"),D("core-js/modules/es.typed-array.index-of"),D("core-js/modules/es.typed-array.iterator"),D("core-js/modules/es.typed-array.join"),D("core-js/modules/es.typed-array.last-index-of"),D("core-js/modules/es.typed-array.map"),D("core-js/modules/es.typed-array.reduce"),D("core-js/modules/es.typed-array.reduce-right"),D("core-js/modules/es.typed-array.reverse"),D("core-js/modules/es.typed-array.set"),D("core-js/modules/es.typed-array.slice"),D("core-js/modules/es.typed-array.some"),D("core-js/modules/es.typed-array.sort"),D("core-js/modules/es.typed-array.subarray"),D("core-js/modules/es.typed-array.to-locale-string"),D("core-js/modules/es.typed-array.to-string"),D("core-js/modules/es.weak-map"),D("core-js/modules/web.dom-collections.iterator"),D("core-js/modules/es.symbol"),D("core-js/modules/es.symbol.description"),D("core-js/modules/es.symbol.iterator"),D("core-js/modules/es.array.concat"),D("core-js/modules/es.array.copy-within"),D("core-js/modules/es.array.every"),D("core-js/modules/es.array.fill"),D("core-js/modules/es.array.flat"),D("core-js/modules/es.array.flat-map"),D("core-js/modules/es.array.from"),D("core-js/modules/es.array.includes"),D("core-js/modules/es.array.iterator"),D("core-js/modules/es.array.map"),D("core-js/modules/es.array.slice"),D("core-js/modules/es.array.some"),D("core-js/modules/es.array.unscopables.flat"),D("core-js/modules/es.array.unscopables.flat-map"),D("core-js/modules/es.map"),D("core-js/modules/es.object.assign"),D("core-js/modules/es.object.to-string"),D("core-js/modules/es.set"),D("core-js/modules/es.string.includes"),D("core-js/modules/es.string.iterator"),D("core-js/modules/es.typed-array.float32-array"),D("core-js/modules/es.typed-array.float64-array"),D("core-js/modules/es.typed-array.int16-array"),D("core-js/modules/es.typed-array.uint8-array"),D("core-js/modules/es.typed-array.uint16-array"),D("core-js/modules/es.typed-array.uint32-array"),D("core-js/modules/es.typed-array.copy-within"),D("core-js/modules/es.typed-array.every"),D("core-js/modules/es.typed-array.fill"),D("core-js/modules/es.typed-array.filter"),D("core-js/modules/es.typed-array.find"),D("core-js/modules/es.typed-array.find-index"),D("core-js/modules/es.typed-array.for-each"),D("core-js/modules/es.typed-array.includes"),D("core-js/modules/es.typed-array.index-of"),D("core-js/modules/es.typed-array.iterator"),D("core-js/modules/es.typed-array.join"),D("core-js/modules/es.typed-array.last-index-of"),D("core-js/modules/es.typed-array.map"),D("core-js/modules/es.typed-array.reduce"),D("core-js/modules/es.typed-array.reduce-right"),D("core-js/modules/es.typed-array.reverse"),D("core-js/modules/es.typed-array.set"),D("core-js/modules/es.typed-array.slice"),D("core-js/modules/es.typed-array.some"),D("core-js/modules/es.typed-array.sort"),D("core-js/modules/es.typed-array.subarray"),D("core-js/modules/es.typed-array.to-locale-string"),D("core-js/modules/es.typed-array.to-string"),D("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.readPixelsWebGL=Q,c.readPixelWebGL=J,c.default=void 0;var a=b(D("../core/main")),d=function(Z){if(Z&&Z.__esModule)return Z;if(Z===null||f(Z)!=="object"&&typeof Z!="function")return{default:Z};var K=m();if(K&&K.has(Z))return K.get(Z);var re,oe={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(re in Z){var z;Object.prototype.hasOwnProperty.call(Z,re)&&((z=M?Object.getOwnPropertyDescriptor(Z,re):null)&&(z.get||z.set)?Object.defineProperty(oe,re,z):oe[re]=Z[re])}return oe.default=Z,K&&K.set(Z,oe),oe}(D("../core/constants")),_=b(D("./GeometryBuilder")),w=b(D("libtess")),h=(D("./p5.Shader"),D("./p5.Camera"),D("../core/p5.Renderer"),D("./p5.Matrix"),D("./p5.Framebuffer"),D("path"),D("./p5.Texture"));function m(){var Z;return typeof WeakMap!="function"?null:(Z=new WeakMap,m=function(){return Z},Z)}function b(Z){return Z&&Z.__esModule?Z:{default:Z}}function v(Z){return function(K){if(Array.isArray(K)){for(var re=0,oe=new Array(K.length);re<K.length;re++)oe[re]=K[re];return oe}}(Z)||function(K){if(Symbol.iterator in Object(K)||Object.prototype.toString.call(K)==="[object Arguments]")return Array.from(K)}(Z)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(Z,K){for(var re=0;re<K.length;re++){var oe=K[re];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(Z,oe.key,oe)}}function p(Z,K,re){return(p=typeof Reflect<"u"&&Reflect.get?Reflect.get:function($,M,z){var $=function(ee,le){for(;!Object.prototype.hasOwnProperty.call(ee,le)&&(ee=A(ee))!==null;);return ee}($,M);if($)return($=Object.getOwnPropertyDescriptor($,M)).get?$.get.call(z):$.value})(Z,K,re||Z)}function y(Z,K){return(y=Object.setPrototypeOf||function(re,oe){return re.__proto__=oe,re})(Z,K)}function S(Z){return function(){var K,re,oe=A(Z);return K=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(K=A(this).constructor,Reflect.construct(oe,arguments,K)):oe.apply(this,arguments),oe=this,!(re=K)||f(re)!=="object"&&typeof re!="function"?j(oe):re}}function j(Z){if(Z===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Z}function A(Z){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(K){return K.__proto__||Object.getPrototypeOf(K)})(Z)}function N(Z,K,re){K in Z?Object.defineProperty(Z,K,{value:re,enumerable:!0,configurable:!0,writable:!0}):Z[K]=re}function C(Z,K){F+="#define STROKE_CAP_".concat(Z," ").concat(K,`
`),P[d[Z]]=K}function T(Z,K){F+="#define STROKE_JOIN_".concat(Z," ").concat(K,`
`),k[d[Z]]=K}var R,P={},k={},F="",D=(C("ROUND",0),C("PROJECT",1),C("SQUARE",2),T("ROUND",0),T("MITER",1),T("BEVEL",2),`#define PI 3.141592

precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];
uniform mat3 uCameraRotation;
uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;
uniform float uMetallic;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

// setting from  _setImageLightUniforms()
// boolean to initiate the calculateImageDiffuse and calculateImageSpecular
uniform bool uUseImageLight;
// texture for use in calculateImageDiffuse
uniform sampler2D environmentMapDiffused;
// texture for use in calculateImageSpecular
uniform sampler2D environmentMapSpecular;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector, float shininess, float metallic) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  float specularIntensity = mix(1.0, 0.4, metallic);
  float diffuseIntensity = mix(1.0, 0.1, metallic);
  if (uSpecular)
    lr.specular = (_phongSpecular(lightDir, viewDirection, normal, shininess)) * specularIntensity;
    lr.diffuse = _lambertDiffuse(lightDir, normal) * diffuseIntensity;
  return lr;
}

// converts the range of "value" from [min1 to max1] to [min2 to max2]
float map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

vec2 mapTextureToNormal( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );
  return angles;
}


vec3 calculateImageDiffuse(vec3 vNormal, vec3 vViewPosition, float metallic){
  // make 2 seperate builds 
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position
  vec3 worldNormal = normalize(vNormal * uCameraRotation);
  vec2 newTexCoor = mapTextureToNormal( worldNormal );
  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(smoothstep(vec3(0.0), vec3(1.0), texture.xyz), vec3(0.0), metallic);
}

vec3 calculateImageSpecular(vec3 vNormal, vec3 vViewPosition, float shininess, float metallic){
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);
  vec3 worldNormal = normalize(vNormal);
  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );
  vec3 R = reflect(lightDirection, worldNormal) * uCameraRotation;
  vec2 newTexCoor = mapTextureToNormal( R );
#ifdef WEBGL2
  // In p5js the range of shininess is >= 1,
  // Therefore roughness range will be ([0,1]*8)*20 or [0, 160]
  // The factor of 8 is because currently the getSpecularTexture
  // only calculated 8 different levels of roughness
  // The factor of 20 is just to spread up this range so that,
  // [1, max] of shininess is converted to [0,160] of roughness
  float roughness = 20. / shininess;
  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, roughness * 8.);
#else
  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);
#endif
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(
    pow(outColor.xyz, vec3(10)),
    pow(outColor.xyz, vec3(1.2)),
    metallic 
  );
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  float shininess,
  float metallic,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  if( uUseImageLight ){
    totalDiffuse += calculateImageDiffuse(normal, modelPosition, metallic);
    totalSpecular += calculateImageSpecular(normal, modelPosition, shininess, metallic);
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`),q={sphereMappingFrag:`#define PI 3.141592

precision highp float;
  
uniform sampler2D uSampler;
uniform mat3 uNewNormalMatrix;
uniform float uFovY;
uniform float uAspect;

varying vec2 vTexCoord;
  
void main() {
    float uFovX = uFovY * uAspect; 
    vec4 newTexColor = texture2D(uSampler, vTexCoord);
    float angleY = mix(uFovY/2.0,  -uFovY/2.0, vTexCoord.y);
    float angleX = mix(uFovX/2.0, -uFovX/2.0, vTexCoord.x);
    vec3 rotatedNormal = vec3( angleX, angleY, 1.0 );
    rotatedNormal = uNewNormalMatrix * normalize(rotatedNormal);
    float temp = rotatedNormal.z;
    rotatedNormal.z = rotatedNormal.x;
    rotatedNormal.x = -temp;
    vec2 suv;
    suv.y = 0.5 + 0.5 * (-rotatedNormal.y);
    suv.x = atan(rotatedNormal.z, rotatedNormal.x) / (2.0 * PI) + 0.5;
    newTexColor = texture2D(uSampler, suv.xy);
    gl_FragColor = newTexColor;
}
`,immediateVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

OUT vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,normalVert:`IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform vec4 uMaterialColor;
uniform bool uUseVertexColor;

OUT vec3 vVertexNormal;
OUT highp vec2 vVertTexCoord;
OUT vec4 vColor;

void main(void) {
  HOOK_beforeVertex();
  vec4 positionVec4 = vec4(HOOK_getWorldPosition(
    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz
  ), 1.);

  gl_Position = uProjectionMatrix * positionVec4;

  vVertexNormal = HOOK_getWorldNormal(normalize(uNormalMatrix * HOOK_getLocalNormal(aNormal)));
  vVertTexCoord = HOOK_getUV(aTexCoord);
  vColor = HOOK_getVertexColor(uUseVertexColor ? aVertexColor : uMaterialColor);
  HOOK_afterVertex();
}
`,normalFrag:`IN vec3 vVertexNormal;
void main(void) {
  HOOK_beforeFragment();
  OUT_COLOR = HOOK_getFinalColor(vec4(vVertexNormal, 1.0));
  HOOK_afterFragment();
}
`,basicFrag:`IN vec4 vColor;
void main(void) {
  HOOK_beforeFragment();
  OUT_COLOR = HOOK_getFinalColor(vec4(vColor.rgb, 1.) * vColor.a);
  HOOK_afterFragment();
}
`,lightVert:D+`// include lighting.glgl

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT highp vec2 vVertTexCoord;
OUT vec3 vDiffuseColor;
OUT vec3 vSpecularColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,lightTextureFrag:`uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

IN highp vec2 vVertTexCoord;
IN vec3 vDiffuseColor;
IN vec3 vSpecularColor;
IN vec4 vColor;

void main(void) {
  if(uEmissive && !isTexture) {
    OUT_COLOR = vColor;
  }
  else {
    vec4 baseColor = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);
  }
}
`,phongVert:`precision highp int;

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT vec3 vNormal;
OUT vec2 vTexCoord;
OUT vec3 vViewPosition;
OUT vec3 vAmbientColor;
OUT vec4 vColor;

void main(void) {
  HOOK_beforeVertex();
  vec4 viewModelPosition = vec4(HOOK_getWorldPosition(
    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz
  ), 1.);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = HOOK_getWorldNormal(uNormalMatrix * HOOK_getLocalNormal(aNormal));
  vTexCoord = HOOK_getUV(aTexCoord);

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
  
  vColor = HOOK_getVertexColor((uUseVertexColor ? aVertexColor : uMaterialColor));
  HOOK_afterVertex();
}
`,phongFrag:D+`// include lighting.glsl
precision highp int;

uniform bool uHasSetAmbient;
uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

IN vec3 vNormal;
IN vec2 vTexCoord;
IN vec3 vViewPosition;
IN vec3 vAmbientColor;
IN vec4 vColor;

struct ColorComponents {
  vec3 baseColor;
  float opacity;
  vec3 ambientColor;
  vec3 specularColor;
  vec3 diffuse;
  vec3 ambient;
  vec3 specular;
  vec3 emissive;
};

struct Inputs {
  vec3 normal;
  vec2 texCoord;
  vec3 ambientLight;
  vec3 ambientMaterial;
  vec3 specularMaterial;
  vec3 emissiveMaterial;
  vec4 color;
  float shininess;
  float metalness;
};

void main(void) {
  HOOK_beforeFragment();

  Inputs inputs;
  inputs.normal = normalize(vNormal);
  inputs.texCoord = vTexCoord;
  inputs.ambientLight = vAmbientColor;
  inputs.color = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
  inputs.shininess = uShininess;
  inputs.metalness = uMetallic;
  inputs.ambientMaterial = uHasSetAmbient ? uAmbientMatColor.rgb : inputs.color.rgb;
  inputs.specularMaterial = uSpecularMatColor.rgb;
  inputs.emissiveMaterial = uEmissiveMatColor.rgb;
  inputs = HOOK_getPixelInputs(inputs);

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, inputs.normal, inputs.shininess, inputs.metalness, diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  vec2 texCoord = inputs.texCoord;
  vec4 baseColor = inputs.color;
  ColorComponents c;
  c.opacity = baseColor.a;
  c.baseColor = baseColor.rgb;
  c.ambientColor = inputs.ambientMaterial;
  c.specularColor = inputs.specularMaterial;
  c.diffuse = diffuse;
  c.ambient = inputs.ambientLight;
  c.specular = specular;
  c.emissive = inputs.emissiveMaterial;
  OUT_COLOR = HOOK_getFinalColor(HOOK_combineColors(c));
  HOOK_afterFragment();
}
`,fontVert:`IN vec3 aPosition;
IN vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

OUT vec2 vTexCoord;
OUT float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // Expand glyph bounding boxes by 1px on each side to give a bit of room
  // for antialiasing
  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;
  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;
  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;
  vec2 pixelScale = vec2(
    1. / length(newOrigin - newDX),
    1. / length(newOrigin - newDY)
  );
  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);
  vec2 textureOffset = offset * (1. / vec2(
    uGlyphRect.z - uGlyphRect.x,
    uGlyphRect.w - uGlyphRect.y
  ));

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;

  positionVec4.xy += offset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord + textureOffset;
  w = gl_Position.w;
}
`,fontFrag:`#ifndef WEBGL2
#extension GL_OES_standard_derivatives : enable
#endif

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

IN vec2 vTexCoord;

// some helper functions
int ROUND(float v) { return ifloor(v + 0.5); }
ivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = ROUND(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
  OUT_COLOR *= saturate(max(antialias, cover));
}
`,lineVert:F+`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

precision mediump int;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform bool uUseLineColor;
uniform vec4 uMaterialColor;

uniform vec4 uViewport;
uniform int uPerspective;
uniform int uStrokeJoin;

IN vec4 aPosition;
IN vec3 aTangentIn;
IN vec3 aTangentOut;
IN float aSide;
IN vec4 aVertexColor;

OUT vec4 vColor;
OUT vec2 vTangent;
OUT vec2 vCenter;
OUT vec2 vPosition;
OUT float vMaxDist;
OUT float vCap;
OUT float vJoin;
OUT float vStrokeWeight;

vec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {
  // Rotate and translate so a starts at the origin and goes out to the right
  bPoint -= aPoint;
  vec2 rotatedBFrom = vec2(
    bPoint.x*aDir.x + bPoint.y*aDir.y,
    bPoint.y*aDir.x - bPoint.x*aDir.y
  );
  vec2 bTo = bPoint + bDir;
  vec2 rotatedBTo = vec2(
    bTo.x*aDir.x + bTo.y*aDir.y,
    bTo.y*aDir.x - bTo.x*aDir.y
  );
  float intersectionDistance =
    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /
    (rotatedBTo.y - rotatedBFrom.y);
  return aPoint + aDir * intersectionDistance;
}

void main() {
  HOOK_beforeVertex();
  // Caps have one of either the in or out tangent set to 0
  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))
    ? 1. : 0.;

  // Joins have two unique, defined tangents
  vJoin = (
    aTangentIn != vec3(0.) &&
    aTangentOut != vec3(0.) &&
    aTangentIn != aTangentOut
  ) ? 1. : 0.;

  vec4 localPosition = vec4(HOOK_getLocalPosition(aPosition.xyz), 1.);
  vec4 posp = vec4(HOOK_getWorldPosition((uModelViewMatrix * localPosition).xyz), 1.);
  vec4 posqIn = posp + uModelViewMatrix * vec4(aTangentIn, 0);
  vec4 posqOut = posp + uModelViewMatrix * vec4(aTangentOut, 0);
  float strokeWeight = HOOK_getStrokeWeight(uStrokeWeight);
  vStrokeWeight = strokeWeight;

  float facingCamera = pow(
    // The word space tangent's z value is 0 if it's facing the camera
    abs(normalize(posqIn-posp).z),

    // Using pow() here to ramp \`facingCamera\` up from 0 to 1 really quickly
    // so most lines get scaled and don't get clipped
    0.25
  );

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // A mix of scaling and offsetting is used based on distance
  // Discussion here:
  // https://github.com/processing/p5.js/issues/7200 

  // using a scale <1 moves the lines towards nearby camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  float zDistance = -posp.z; 
  float distanceFactor = smoothstep(0.0, 800.0, zDistance); 
  
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  float scale = mix(1., 0.995, facingCamera);
  float dynamicScale = mix(scale, 1.0, distanceFactor); // Closer = more scale, farther = less

  posp.xyz = posp.xyz * dynamicScale;
  posqIn.xyz = posqIn.xyz * dynamicScale;
  posqOut.xyz = posqOut.xyz * dynamicScale;

  // Moving vertices slightly toward camera when far away 
  // https://github.com/processing/p5.js/issues/6956 
  float zOffset = mix(-0.00045, -1., facingCamera);
  float dynamicZAdjustment = mix(0.0, zOffset, distanceFactor); // Closer = less zAdjustment, farther = more

  posp.z -= dynamicZAdjustment;
  posqIn.z -= dynamicZAdjustment;
  posqOut.z -= dynamicZAdjustment;
  
  vec4 p = uProjectionMatrix * posp;
  vec4 qIn = uProjectionMatrix * posqIn;
  vec4 qOut = uProjectionMatrix * posqOut;
  vCenter = HOOK_getLineCenter(p.xy);

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);
  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);

  vec2 curPerspScale;
  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)

    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.
    // Multiplying again by its sign here negates the flip to get just the scale.
    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  vec2 offset;
  if (vJoin == 1.) {
    vTangent = normalize(tangentIn + tangentOut);
    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);
    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);
    float side = sign(aSide);
    float sideEnum = abs(aSide);

    // We generate vertices for joins on either side of the centerline, but
    // the "elbow" side is the only one needing a join. By not setting the
    // offset for the other side, all its vertices will end up in the same
    // spot and not render, effectively discarding it.
    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {
      // Side enums:
      //   1: the side going into the join
      //   2: the middle of the join
      //   3: the side going out of the join
      if (sideEnum == 2.) {
        // Calculate the position + tangent on either side of the join, and
        // find where the lines intersect to find the elbow of the join
        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;
        vec2 intersection = lineIntersection(
          c + (side * normalIn * strokeWeight / 2.),
          tangentIn,
          c + (side * normalOut * strokeWeight / 2.),
          tangentOut
        );
        offset = (intersection - c);

        // When lines are thick and the angle of the join approaches 180, the
        // elbow might be really far from the center. We'll apply a limit to
        // the magnitude to avoid lines going across the whole screen when this
        // happens.
        float mag = length(offset);
        float maxMag = 3. * strokeWeight;
        if (mag > maxMag) {
          offset *= maxMag / mag;
        }
      } else if (sideEnum == 1.) {
        offset = side * normalIn * strokeWeight / 2.;
      } else if (sideEnum == 3.) {
        offset = side * normalOut * strokeWeight / 2.;
      }
    }
    if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);
      vMaxDist = abs(dot(avgNormal, normalIn * strokeWeight / 2.));
    } else {
      vMaxDist = strokeWeight / 2.;
    }
  } else {
    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;
    vTangent = tangent;
    vec2 normal = vec2(-tangent.y, tangent.x);

    float normalOffset = sign(aSide);
    // Caps will have side values of -2 or 2 on the edge of the cap that
    // extends out from the line
    float tangentOffset = abs(aSide) - 1.;
    offset = (normal * normalOffset + tangent * tangentOffset) *
      strokeWeight * 0.5;
    vMaxDist = strokeWeight / 2.;
  }
  vPosition = HOOK_getLinePosition(vCenter + offset);

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
  
  vColor = HOOK_getVertexColor(uUseLineColor ? aVertexColor : uMaterialColor);
  HOOK_afterVertex();
}
`,lineFrag:F+`precision mediump int;

uniform vec4 uMaterialColor;
uniform int uStrokeCap;
uniform int uStrokeJoin;

IN vec4 vColor;
IN vec2 vTangent;
IN vec2 vCenter;
IN vec2 vPosition;
IN float vStrokeWeight;
IN float vMaxDist;
IN float vCap;
IN float vJoin;

float distSquared(vec2 a, vec2 b) {
  vec2 aToB = b - a;
  return dot(aToB, aToB);
}

struct Inputs {
  vec4 color;
  vec2 tangent;
  vec2 center;
  vec2 position;
  float strokeWeight;
};

void main() {
  HOOK_beforeFragment();

  Inputs inputs;
  inputs.color = vColor;
  inputs.tangent = vTangent;
  inputs.center = vCenter;
  inputs.position = vPosition;
  inputs.strokeWeight = vStrokeWeight;
  inputs = HOOK_getPixelInputs(inputs);

  if (vCap > 0.) {
    if (
      uStrokeCap == STROKE_CAP_ROUND &&
      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)
    ) {
      discard;
    } else if (
      uStrokeCap == STROKE_CAP_SQUARE &&
      HOOK_shouldDiscard(dot(inputs.position - inputs.center, inputs.tangent) > 0.)
    ) {
      discard;
    // Use full area for PROJECT
    } else if (HOOK_shouldDiscard(false)) {
      discard;
    }
  } else if (vJoin > 0.) {
    if (
      uStrokeJoin == STROKE_JOIN_ROUND &&
      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)
    ) {
      discard;
    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 normal = vec2(-inputs.tangent.y, inputs.tangent.x);
      if (HOOK_shouldDiscard(abs(dot(inputs.position - inputs.center, normal)) > vMaxDist)) {
        discard;
      }
    // Use full area for MITER
    } else if (HOOK_shouldDiscard(false)) {
      discard;
    }
  }
  OUT_COLOR = HOOK_getFinalColor(vec4(inputs.color.rgb, 1.) * inputs.color.a);
  HOOK_afterFragment();
}
`,pointVert:`IN vec3 aPosition;
uniform float uPointSize;
OUT float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

void main() {
  HOOK_beforeVertex();
  vec4 viewModelPosition = vec4(HOOK_getWorldPosition(
    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz
  ), 1.);
  gl_Position = uProjectionMatrix * viewModelPosition;  

  float pointSize = HOOK_getPointSize(uPointSize);

	gl_PointSize = pointSize;
	vStrokeWeight = pointSize;
  HOOK_afterVertex();
}
`,pointFrag:`precision mediump int;
uniform vec4 uMaterialColor;
IN float vStrokeWeight;

void main(){
  HOOK_beforeFragment();
  float mask = 0.0;

  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

  // if strokeWeight is 1 or less lets just draw a square
  // this prevents weird artifacting from carving circles when our points are really small
  // if strokeWeight is larger than 1, we just use it as is

  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

  // throw away the borders of the mask
  // otherwise we get weird alpha blending issues

  if(HOOK_shouldDiscard(mask > 0.98)){
    discard;
  }

  OUT_COLOR = HOOK_getFinalColor(vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a);
  HOOK_afterFragment();
}
`,imageLightVert:`precision highp float;
attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

varying vec3 localPos;
varying vec3 vWorldNormal;
varying vec3 vWorldPosition;
varying vec2 vTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

void main() {
  // Multiply the position by the matrix.
  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;  
  
  // orient the normals and pass to the fragment shader
  vWorldNormal = uNormalMatrix * aNormal;
  
  // send the view position to the fragment shader
  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;
  
  localPos = vWorldPosition;
  vTexCoord = aTexCoord;
}


/*
in the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.
*/
`,imageLightDiffusedFrag:`precision highp float;
varying vec3 localPos;

// the HDR cubemap converted (can be from an equirectangular environment map.)
uniform sampler2D environmentMap;
varying vec2 vTexCoord;

const float PI = 3.14159265359;

vec2 nTOE( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( phi, theta );
  return angles;
}

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

void main()
{   	 
	// the sample direction equals the hemisphere's orientation
  float phi = vTexCoord.x * 2.0 * PI;
  float theta = vTexCoord.y * PI;
  float x = sin(theta) * cos(phi);
  float y = sin(theta) * sin(phi);
  float z = cos(theta);
  vec3 normal = vec3( x, y, z);

	// Discretely sampling the hemisphere given the integral's
  // spherical coordinates translates to the following fragment code:
	vec3 irradiance = vec3(0.0);  
	vec3 up	= vec3(0.0, 1.0, 0.0);
	vec3 right = normalize(cross(up, normal));
	up = normalize(cross(normal, right));

	//  We specify a fixed sampleDelta delta value to traverse
  // the hemisphere; decreasing or increasing the sample delta
  // will increase or decrease the accuracy respectively.
	const float sampleDelta = 0.100;
	float nrSamples = 0.0;
  float randomOffset = random(gl_FragCoord.xy) * sampleDelta;
	for(float rawPhi = 0.0; rawPhi < 2.0 * PI; rawPhi += sampleDelta)
	{
    float phi = rawPhi + randomOffset;
    for(float rawTheta = 0.0; rawTheta < ( 0.5 ) * PI; rawTheta += sampleDelta)
    {
      float theta = rawTheta + randomOffset;
      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance
      float x = sin(theta) * cos(phi);
      float y = sin(theta) * sin(phi);
      float z = cos(theta);
      vec3 tangentSample = vec3( x, y, z);
      
      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;
        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);
      nrSamples++;
    }
	}
	// divide by the total number of samples taken, giving us the average sampled irradiance.
	irradiance = PI * irradiance * (1.0 / float(nrSamples )) ;
  
 
	gl_FragColor = vec4(irradiance, 1.0);
}`,imageLightSpecularFrag:`precision highp float;\r
varying vec3 localPos;\r
varying vec2 vTexCoord;\r
\r
// our texture\r
uniform sampler2D environmentMap;\r
uniform float roughness;\r
\r
const float PI = 3.14159265359;\r
\r
float VanDerCorput(int bits);\r
vec2 HammersleyNoBitOps(int i, int N);\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r
\r
\r
vec2 nTOE( vec3 v ){\r
  // x = r sin(phi) cos(theta)   \r
  // y = r cos(phi)  \r
  // z = r sin(phi) sin(theta)\r
  float phi = acos( v.y );\r
  // if phi is 0, then there are no x, z components\r
  float theta = 0.0;\r
  // else \r
  theta = acos(v.x / sin(phi));\r
  float sinTheta = v.z / sin(phi);\r
  if (sinTheta < 0.0) {\r
    // Turn it into -theta, but in the 0-2PI range\r
    theta = 2.0 * PI - theta;\r
  }\r
  theta = theta / (2.0 * 3.14159);\r
  phi = phi / 3.14159 ;\r
  \r
  vec2 angles = vec2( phi, theta );\r
  return angles;\r
}\r
\r
\r
void main(){\r
  const int SAMPLE_COUNT = 400; // 4096\r
  int lowRoughnessLimit = int(pow(2.0,(roughness+0.1)*20.0));\r
  float totalWeight = 0.0;\r
  vec3 prefilteredColor = vec3(0.0);\r
  float phi = vTexCoord.x * 2.0 * PI;\r
  float theta = vTexCoord.y * PI;\r
  float x = sin(theta) * cos(phi);\r
  float y = sin(theta) * sin(phi);\r
  float z = cos(theta);\r
  vec3 N = vec3(x,y,z);\r
  vec3 V = N;\r
  for (int i = 0; i < SAMPLE_COUNT; ++i)\r
  {\r
    // break at smaller sample numbers for low roughness levels\r
    if(i == lowRoughnessLimit)\r
    {\r
      break;\r
    }\r
    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r
    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r
    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r
\r
    float NdotL = max(dot(N, L), 0.0);\r
    if (NdotL > 0.0)\r
    {\r
      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r
      totalWeight += NdotL;\r
    }\r
  }\r
  prefilteredColor = prefilteredColor / totalWeight;\r
\r
  gl_FragColor = vec4(prefilteredColor, 1.0);\r
}\r
\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r
  float a = roughness * roughness;\r
\r
  float phi = 2.0 * PI * Xi.x;\r
  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r
  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r
  // from spherical coordinates to cartesian coordinates\r
  vec3 H;\r
  H.x = cos(phi) * sinTheta;\r
  H.y = sin(phi) * sinTheta;\r
  H.z = cosTheta;\r
\r
  // from tangent-space vector to world-space sample vector\r
  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r
  vec3 tangent = normalize(cross(up, N));\r
  vec3 bitangent = cross(N, tangent);\r
\r
  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r
  return normalize(sampleVec);\r
}\r
\r
\r
float VanDerCorput(int n, int base)\r
{\r
#ifdef WEBGL2\r
\r
    uint bits = uint(n);\r
    bits = (bits << 16u) | (bits >> 16u);\r
    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\r
    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\r
    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\r
    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\r
    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\r
\r
#else\r
\r
  float invBase = 1.0 / float(base);\r
  float denom = 1.0;\r
  float result = 0.0;\r
\r
\r
  for (int i = 0; i < 32; ++i)\r
  {\r
        if (n > 0)\r
        {\r
        denom = mod(float(n), 2.0);\r
        result += denom * invBase;\r
        invBase = invBase / 2.0;\r
        n = int(float(n) / 2.0);\r
        }\r
  }\r
\r
\r
  return result;\r
\r
#endif\r
}\r
\r
vec2 HammersleyNoBitOps(int i, int N)\r
{\r
  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r
}\r
`},H=q.sphereMappingFrag;for(R in q)q[R]=`#ifdef WEBGL2

#define IN in
#define OUT out

#ifdef FRAGMENT_SHADER
out vec4 outColor;
#define OUT_COLOR outColor
#endif
#define TEXTURE texture

#else

#ifdef FRAGMENT_SHADER
#define IN varying
#else
#define IN attribute
#endif
#define OUT varying
#define TEXTURE texture2D

#ifdef FRAGMENT_SHADER
#define OUT_COLOR gl_FragColor
#endif

#endif
`+q[R];N(D={},d.GRAY,`precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 tex = texture2D(tex0, vTexCoord);
  float gray = luma(tex.rgb);
  gl_FragColor = vec4(gray, gray, gray, tex.a);
}
`),N(D,d.ERODE,`// Reduces the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the darkest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum < lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),N(D,d.DILATE,`// Increase the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the brightest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum > lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),N(D,d.BLUR,`precision highp float;

// Two-pass blur filter, unweighted kernel.
// See also a similar blur at Adam Ferriss' repo of shader examples:
// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag


uniform sampler2D tex0;
varying vec2 vTexCoord;
uniform vec2 direction;
uniform vec2 canvasSize;
uniform float radius;

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

// This isn't a real Gaussian weight, it's a quadratic weight. It's what the
// CPU mode's blur uses though, so we also use it here to match.
float quadWeight(float x, float e) {
  return pow(e-abs(x), 2.);
}

void main(){
  vec2 uv = vTexCoord;

  // A reasonable maximum number of samples
  const float maxSamples = 64.0;

  float numSamples = floor(7. * radius);
  if (fract(numSamples / 2.) == 0.) {
    numSamples++;
  }
  vec4 avg = vec4(0.0);
  float total = 0.0;

  // Calculate the spacing to avoid skewing if numSamples > maxSamples
  float spacing = 1.0;
  if (numSamples > maxSamples) {
    spacing = numSamples / maxSamples;
    numSamples = maxSamples;
  }

  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));
  for (float i = 0.0; i < maxSamples; i++) {
    if (i >= numSamples) break;

    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;
    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;
    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);

    avg += weight * texture2D(tex0, sampleCoord);
    total += weight;
  }

  avg /= total;
  gl_FragColor = avg;
}
`),N(D,d.POSTERIZE,`// Limit color space for a stylized cartoon / poster effect

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

vec3 quantize(vec3 color, float n) {
  // restrict values to N options/bins
  // and floor each channel to nearest value
  //
  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0
  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)

  color = color * n;
  color = floor(color);
  color = color / (n - 1.0);
  return color;
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);

  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);

  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);
}
`),N(D,d.OPAQUE,`// Set alpha channel to entirely opaque

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  gl_FragColor = vec4(color.rgb / color.a, 1.0);
}
`),N(D,d.INVERT,`// Set each pixel to inverse value
// Note that original INVERT does not change the opacity, so this follows suit

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
vec4 color = texture2D(tex0, vTexCoord);
vec3 origColor = color.rgb / color.a;
vec3 invertedColor = vec3(1.0) - origColor;
gl_FragColor = vec4(invertedColor * color.a, color.a);
}
`),N(D,d.THRESHOLD,`// Convert pixels to either white or black, 
// depending on if their luma is above or below filterParameter

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float gray = luma(color.rgb / color.a);
  // floor() used to match src/image/filters.js
  float threshold = floor(filterParameter * 255.0) / 255.0;
  float blackOrWhite = step(threshold, gray);
  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);
}
`);var W=D;function Q(Z,K,ve,oe,M,z,$,ee,le,ce){var me=K.getParameter(K.FRAMEBUFFER_BINDING),ve=(K.bindFramebuffer(K.FRAMEBUFFER,ve),ee===K.RGBA?4:3),ge=z*$*ve,we=le===K.UNSIGNED_BYTE?Uint8Array:Float32Array;if(Z instanceof we&&Z.length===ge||(Z=new we(ge)),K.readPixels(oe,ce?ce-M-$:M,z,$,ee,le,Z),K.bindFramebuffer(K.FRAMEBUFFER,me),ce)for(var xe=Math.floor($/2),fe=new we(z*ve),Se=0;Se<xe;Se++){var Ce=Se*z*4,Ne=($-Se-1)*z*4;fe.set(Z.subarray(Ce,Ce+4*z)),Z.copyWithin(Ce,Ne,Ne+4*z),Z.set(fe,Ne)}return Z}function J(Z,le,re,oe,M,z,$){var ee=Z.getParameter(Z.FRAMEBUFFER_BINDING),le=(Z.bindFramebuffer(Z.FRAMEBUFFER,le),M===Z.RGBA?4:3),le=new(z===Z.UNSIGNED_BYTE?Uint8Array:Float32Array)(le);return Z.readPixels(re,$?$-oe-1:oe,1,1,M,z,le),Z.bindFramebuffer(Z.FRAMEBUFFER,ee),Array.from(le)}a.default.prototype.setAttributes=function(Z,K){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var re=!0;if(K!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[Z]!==K&&(this._glAttributes[Z]=K,re=!1)):Z instanceof Object&&this._glAttributes!==Z&&(this._glAttributes=Z,re=!1),this._renderer.isP3D&&!re){if(!this._setupDone){for(var oe in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(oe))return void a.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},a.default.RendererGL=function(Z){var K=oe;if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function");K.prototype=Object.create(Z&&Z.prototype,{constructor:{value:K,writable:!0,configurable:!0}}),Z&&y(K,Z);var re=S(oe);function oe(M,z,$,ee){if(this instanceof oe)return(M=re.call(this,M,z,$))._setAttributeDefaults(z),M._initContext(),M.isP3D=!0,M.geometryBuilder=void 0,M.GL=M.drawingContext,M._pInst._setProperty("drawingContext",M.drawingContext),M._isErasing=!1,M._clipDepths=[],M._isClipApplied=!1,M._stencilTestOn=!1,M._enableLighting=!1,M.ambientLightColors=[],M.mixedAmbientLight=[],M.mixedSpecularColor=[],M.specularColors=[1,1,1],M.directionalLightDirections=[],M.directionalLightDiffuseColors=[],M.directionalLightSpecularColors=[],M.pointLightPositions=[],M.pointLightDiffuseColors=[],M.pointLightSpecularColors=[],M.spotLightPositions=[],M.spotLightDirections=[],M.spotLightDiffuseColors=[],M.spotLightSpecularColors=[],M.spotLightAngle=[],M.spotLightConc=[],M.activeImageLight=null,M.diffusedTextures=new Map,M.specularTextures=new Map,M.drawMode=d.FILL,M.curFillColor=M._cachedFillStyle=[1,1,1,1],M.curAmbientColor=M._cachedFillStyle=[1,1,1,1],M.curSpecularColor=M._cachedFillStyle=[0,0,0,0],M.curEmissiveColor=M._cachedFillStyle=[0,0,0,0],M.curStrokeColor=M._cachedStrokeStyle=[0,0,0,1],M.curBlendMode=d.BLEND,M.preEraseBlend=void 0,M._cachedBlendMode=void 0,M.webglVersion===d.WEBGL2?M.blendExt=M.GL:M.blendExt=M.GL.getExtension("EXT_blend_minmax"),M._isBlending=!1,M._hasSetAmbient=!1,M._useSpecularMaterial=!1,M._useEmissiveMaterial=!1,M._useNormalMaterial=!1,M._useShininess=1,M._useMetalness=0,M._useLineColor=!1,M._useVertexColor=!1,M.registerEnabled=new Set,M._tint=[255,255,255,255],M.constantAttenuation=1,M.linearAttenuation=0,M.quadraticAttenuation=0,M.uModelMatrix=new a.default.Matrix,M.uViewMatrix=new a.default.Matrix,M.uMVMatrix=new a.default.Matrix,M.uPMatrix=new a.default.Matrix,M.uNMatrix=new a.default.Matrix("mat3"),M.curMatrix=new a.default.Matrix("mat3"),M._currentNormal=new a.default.Vector(0,0,1),M._curCamera=new a.default.Camera(j(M)),M._curCamera._computeCameraDefaultSettings(),M._curCamera._setDefaultCamera(),M.filterCamera=new a.default.Camera(j(M)),M.filterCamera._computeCameraDefaultSettings(),M.filterCamera._setDefaultCamera(),M.prevTouches=[],M.zoomVelocity=0,M.rotateVelocity=new a.default.Vector(0,0),M.moveVelocity=new a.default.Vector(0,0),M.executeZoom=!1,M.executeRotateAndMove=!1,M.specularShader=void 0,M.sphereMapping=void 0,M.diffusedShader=void 0,M._defaultLightShader=void 0,M._defaultImmediateModeShader=void 0,M._defaultNormalShader=void 0,M._defaultColorShader=void 0,M._defaultPointShader=void 0,M.userFillShader=void 0,M.userStrokeShader=void 0,M.userPointShader=void 0,M.retainedMode={geometry:{},buffers:{stroke:[new a.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",j(M)),new a.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",j(M)),new a.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",j(M)),new a.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",j(M)),new a.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",j(M))],fill:[new a.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",j(M),M._vToNArray),new a.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",j(M),M._vToNArray),new a.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",j(M)),new a.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",j(M)),new a.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",j(M),M._flatten)],text:[new a.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",j(M),M._vToNArray),new a.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",j(M),M._flatten)]}},M.immediateMode={geometry:new a.default.Geometry,shapeMode:d.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new a.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",j(M),M._vToNArray),new a.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",j(M),M._vToNArray),new a.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",j(M)),new a.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",j(M)),new a.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",j(M),M._flatten)],stroke:[new a.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",j(M)),new a.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",j(M)),new a.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",j(M)),new a.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",j(M)),new a.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",j(M))],point:M.GL.createBuffer()}},M.pointSize=5,M.curStrokeWeight=1,M.curStrokeCap=d.ROUND,M.curStrokeJoin=d.ROUND,M.textures=new Map,M.framebuffers=new Set,M.activeFramebuffers=[],M.filterShader=void 0,M.filterLayer=void 0,M.filterLayerTemp=void 0,M.defaultFilterShaders={},M.textureMode=d.IMAGE,M.textureWrapX=d.CLAMP,M.textureWrapY=d.CLAMP,M._tex=null,M._curveTightness=6,M._lookUpTableBezier=[],M._lookUpTableQuadratic=[],M._lutBezierDetail=0,M._lutQuadraticDetail=0,M.isProcessingVertices=!1,M._tessy=M._initTessy(),M.fontInfos={},M._curShader=void 0,M;throw new TypeError("Cannot call a class as a function")}return K=oe,(Z=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new _.default(this)}},{key:"endGeometry",value:function(){var M;if(this.geometryBuilder)return M=this.geometryBuilder.finish(),this.geometryBuilder=void 0,M;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(M){return this.beginGeometry(),M(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(M){var z={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};M._glAttributes===null?M._glAttributes=z:M._glAttributes=Object.assign(z,M._glAttributes)}},{key:"_initContext",value:function(){if(this._pInst._glAttributes.version!==1&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?d.WEBGL2:d.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),this.drawingContext===null)throw new Error("Error creating webgl context");var M=this.drawingContext;M.enable(M.DEPTH_TEST),M.depthFunc(M.LEQUAL),M.viewport(0,0,M.drawingBufferWidth,M.drawingBufferHeight),M.pixelStorei(M.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_getParam",value:function(){var M=this.drawingContext;return M.getParameter(M.MAX_TEXTURE_SIZE)}},{key:"_adjustDimensions",value:function(M,z){this._maxTextureSize||(this._maxTextureSize=this._getParam());var ee=this._maxTextureSize,ee=(a.default.prototype._maxAllowedPixelDimensions,Math.floor(ee/this.pixelDensity())),$=Math.min(M,ee),ee=Math.min(z,ee);return $===M&&ee===z||console.warn("Warning: The requested width/height exceeds hardware limits. "+"Adjusting dimensions to width: ".concat($,", height: ").concat(ee,".")),{adjustedWidth:$,adjustedHeight:ee}}},{key:"_resetContext",value:function(M,z){var $,ee=this.width,le=this.height,me=this.canvas.id,ce=this._pInst instanceof a.default.Graphics,me=(ce?(($=this._pInst).canvas.parentNode.removeChild($.canvas),$.canvas=document.createElement("canvas"),($._pInst._userNode||document.body).appendChild($.canvas),a.default.Element.call($,$.canvas,$._pInst),$.width=ee,$.height=le):(($=this.canvas)&&$.parentNode.removeChild($),($=document.createElement("canvas")).id=me,(this._pInst._userNode||document.body).appendChild($),this._pInst.canvas=$,this.canvas=$),new a.default.RendererGL(this._pInst.canvas,this._pInst,!ce));this._pInst._setProperty("_renderer",me),me.resize(ee,le),me._applyDefaults(),ce||this._pInst._elements.push(me),typeof z=="function"&&setTimeout(function(){z.apply(window._renderer,M)},0)}},{key:"_update",value:function(){this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST)}},{key:"background",value:function(){var ee=(ee=this._pInst).color.apply(ee,arguments),M=ee.levels[0]/255,z=ee.levels[1]/255,$=ee.levels[2]/255,ee=ee.levels[3]/255;this.clear(M,z,$,ee)}},{key:"fill",value:function(M,z,$,ee){var le=a.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=le._array,this.drawMode=d.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(M,z,$,ee){var le=a.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=le._array}},{key:"strokeCap",value:function(M){this.curStrokeCap=M}},{key:"strokeJoin",value:function(M){this.curStrokeJoin=M}},{key:"getFilterLayer",value:function(){return this.filterLayer||(this.filterLayer=this._pInst.createFramebuffer()),this.filterLayer}},{key:"getFilterLayerTemp",value:function(){return this.filterLayerTemp||(this.filterLayerTemp=this._pInst.createFramebuffer()),this.filterLayerTemp}},{key:"matchSize",value:function(M,z){M.width===z.width&&M.height===z.height||M.resize(z.width,z.height),M.pixelDensity()!==z.pixelDensity()&&M.pixelDensity(z.pixelDensity())}},{key:"filter",value:function(){var M,z,$=this,ee=this.getFilterLayer(),le=void 0,ce=void 0,me=(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(ce=arguments.length<=0?void 0:arguments[0],N(M={},d.BLUR,3),N(M,d.POSTERIZE,4),N(M,d.THRESHOLD,.5),le=ce in(M=M)&&(arguments.length<=1?void 0:arguments[1])===void 0?M[ce]:arguments.length<=1?void 0:arguments[1],ce in this.defaultFilterShaders||(this.defaultFilterShaders[ce]=new a.default.Shader(ee._renderer,`uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

attribute vec3 aPosition;
// texcoords only come from p5 to vertex shader
// so pass texcoords on to the fragment shader in a varying variable
attribute vec2 aTexCoord;
varying vec2 vTexCoord;

void main() {
  // transferring texcoords for the frag shader
  vTexCoord = aTexCoord;

  // copy position with a fourth coordinate for projection (1.0 is normal)
  vec4 positionVec4 = vec4(aPosition, 1.0);

  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
}
`,W[ce])),this.filterShader=this.defaultFilterShaders[ce]):this.filterShader=arguments.length<=0?void 0:arguments[0],this.activeFramebuffer()||this),ve=(this.matchSize(ee,me),ee.draw(function(){return $._pInst.clear()}),[1/(me.width*me.pixelDensity()),1/(me.height*me.pixelDensity())]);ce===d.BLUR?(z=this.getFilterLayerTemp(),this.matchSize(z,me),this._pInst.push(),this._pInst.noStroke(),this._pInst.blendMode(d.BLEND),this._pInst.shader(this.filterShader),this.filterShader.setUniform("texelSize",ve),this.filterShader.setUniform("canvasSize",[me.width,me.height]),this.filterShader.setUniform("radius",Math.max(1,le)),z.draw(function(){$.filterShader.setUniform("direction",[1,0]),$.filterShader.setUniform("tex0",me),$._pInst.clear(),$._pInst.shader($.filterShader),$._pInst.noLights(),$._pInst.plane(me.width,me.height)}),ee.draw(function(){$.filterShader.setUniform("direction",[0,1]),$.filterShader.setUniform("tex0",z),$._pInst.clear(),$._pInst.shader($.filterShader),$._pInst.noLights(),$._pInst.plane(me.width,me.height)}),this._pInst.pop()):ee.draw(function(){$._pInst.noStroke(),$._pInst.blendMode(d.BLEND),$._pInst.shader($.filterShader),$.filterShader.setUniform("tex0",me),$.filterShader.setUniform("texelSize",ve),$.filterShader.setUniform("canvasSize",[me.width,me.height]),$.filterShader.setUniform("filterParameter",le),$._pInst.noLights(),$._pInst.plane(me.width,me.height)}),this._pInst.push(),this._pInst.noStroke(),this.clear(),this._pInst.push(),this._pInst.imageMode(d.CORNER),this._pInst.blendMode(d.BLEND),me.filterCamera._resize(),this._pInst.setCamera(me.filterCamera),this._pInst.resetMatrix(),this._pInst.image(ee,-me.width/2,-me.height/2,me.width,me.height),this._pInst.clearDepth(),this._pInst.pop(),this._pInst.pop()}},{key:"pixelDensity",value:function(M){return M?this._pInst.pixelDensity(M):this._pInst.pixelDensity()}},{key:"blendMode",value:function(M){M===d.DARKEST||M===d.LIGHTEST||M===d.ADD||M===d.BLEND||M===d.SUBTRACT||M===d.SCREEN||M===d.EXCLUSION||M===d.REPLACE||M===d.MULTIPLY||M===d.REMOVE?this.curBlendMode=M:M!==d.BURN&&M!==d.OVERLAY&&M!==d.HARD_LIGHT&&M!==d.SOFT_LIGHT&&M!==d.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(M,z){this._isErasing||(this.preEraseBlend=this.curBlendMode,this._isErasing=!0,this.blendMode(d.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,M/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,z/255])}},{key:"noErase",value:function(){this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.curBlendMode=this.preEraseBlend,this.blendMode(this.preEraseBlend),this._isErasing=!1,this._applyBlendMode())}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var M=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},M=(p(A(oe.prototype),"beginClip",this).call(this,M),this.drawTarget()._isClipApplied=!0,this.GL);M.clearStencil(0),M.clear(M.STENCIL_BUFFER_BIT),M.enable(M.STENCIL_TEST),this._stencilTestOn=!0,M.stencilFunc(M.ALWAYS,1,255),M.stencilOp(M.KEEP,M.KEEP,M.REPLACE),M.disable(M.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0)}},{key:"endClip",value:function(){this._pInst.pop();var M=this.GL;M.stencilOp(M.KEEP,M.KEEP,M.KEEP),M.stencilFunc(this._clipInvert?M.EQUAL:M.NOTEQUAL,0,255),M.enable(M.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),p(A(oe.prototype),"endClip",this).call(this)}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}},{key:"strokeWeight",value:function(M){this.curStrokeWeight!==M&&(this.pointSize=M,this.curStrokeWeight=M)}},{key:"_getPixel",value:function(M,z){var $=this.GL;return J($,null,M,z,$.RGBA,$.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var M,z,$=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(M=this._pInst._pixelDensity,z=this.GL,$._setProperty("pixels",Q($.pixels,z,null,0,0,this.width*M,this.height*M,z.RGBA,z.UNSIGNED_BYTE,this.height*M)))}},{key:"updatePixels",value:function(){var M=this._getTempFramebuffer();M.pixels=this._pixelsState.pixels,M.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(d.CENTER),this._pInst.image(M,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:d.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:d.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(M){return this.retainedMode.geometry[M]!==void 0}},{key:"viewport",value:function(M,z){this._viewport=[0,0,M,z],this.GL.viewport(0,0,M,z)}},{key:"resize",value:function(le,ee){a.default.Renderer.prototype.resize.call(this,le,ee),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var le=this._pixelsState,$=(le.pixels!==void 0&&le._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0),ee=!1,le=void 0;try{for(var ce,me=this.framebuffers[Symbol.iterator]();!($=(ce=me.next()).done);$=!0)ce.value._canvasSizeChanged()}catch(ve){ee=!0,le=ve}finally{try{$||me.return==null||me.return()}finally{if(ee)throw le}}}},{key:"clear",value:function(){var M=(arguments.length<=0?void 0:arguments[0])||0,z=(arguments.length<=1?void 0:arguments[1])||0,$=(arguments.length<=2?void 0:arguments[2])||0,ee=(arguments.length<=3?void 0:arguments[3])||0,le=this.activeFramebuffer();le&&le.format===d.UNSIGNED_BYTE&&!le.antialias&&ee===0&&(ee=1e-10),this.GL.clearColor(M*ee,z*ee,$*ee,ee),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"clearDepth",value:function(){this.GL.clearDepth(0<arguments.length&&arguments[0]!==void 0?arguments[0]:1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(M,z,$,ee,le,ce){arguments.length===16?a.default.Matrix.prototype.apply.apply(this.uModelMatrix,arguments):this.uModelMatrix.apply([M,z,0,0,$,ee,0,0,0,0,1,0,le,ce,0,1])}},{key:"translate",value:function(M,z,$){return M instanceof a.default.Vector&&($=M.z,z=M.y,M=M.x),this.uModelMatrix.translate([M,z,$]),this}},{key:"scale",value:function(M,z,$){return this.uModelMatrix.scale(M,z,$),this}},{key:"rotate",value:function(M,z){return z===void 0?this.rotateZ(M):(a.default.Matrix.prototype.rotate.apply(this.uModelMatrix,arguments),this)}},{key:"rotateX",value:function(M){return this.rotate(M,1,0,0),this}},{key:"rotateY",value:function(M){return this.rotate(M,0,1,0),this}},{key:"rotateZ",value:function(M){return this.rotate(M,0,0,1),this}},{key:"push",value:function(){var M=a.default.Renderer.prototype.push.apply(this),z=M.properties;return z.uModelMatrix=this.uModelMatrix.copy(),z.uViewMatrix=this.uViewMatrix.copy(),z.uPMatrix=this.uPMatrix.copy(),z._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),z.ambientLightColors=this.ambientLightColors.slice(),z.specularColors=this.specularColors.slice(),z.directionalLightDirections=this.directionalLightDirections.slice(),z.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),z.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),z.pointLightPositions=this.pointLightPositions.slice(),z.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),z.pointLightSpecularColors=this.pointLightSpecularColors.slice(),z.spotLightPositions=this.spotLightPositions.slice(),z.spotLightDirections=this.spotLightDirections.slice(),z.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),z.spotLightSpecularColors=this.spotLightSpecularColors.slice(),z.spotLightAngle=this.spotLightAngle.slice(),z.spotLightConc=this.spotLightConc.slice(),z.userFillShader=this.userFillShader,z.userStrokeShader=this.userStrokeShader,z.userPointShader=this.userPointShader,z.pointSize=this.pointSize,z.curStrokeWeight=this.curStrokeWeight,z.curStrokeColor=this.curStrokeColor,z.curFillColor=this.curFillColor,z.curAmbientColor=this.curAmbientColor,z.curSpecularColor=this.curSpecularColor,z.curEmissiveColor=this.curEmissiveColor,z._hasSetAmbient=this._hasSetAmbient,z._useSpecularMaterial=this._useSpecularMaterial,z._useEmissiveMaterial=this._useEmissiveMaterial,z._useShininess=this._useShininess,z._useMetalness=this._useMetalness,z.constantAttenuation=this.constantAttenuation,z.linearAttenuation=this.linearAttenuation,z.quadraticAttenuation=this.quadraticAttenuation,z._enableLighting=this._enableLighting,z._useNormalMaterial=this._useNormalMaterial,z._tex=this._tex,z.drawMode=this.drawMode,z._currentNormal=this._currentNormal,z.curBlendMode=this.curBlendMode,z.activeImageLight=this.activeImageLight,z.textureMode=this.textureMode,M}},{key:"pop",value:function(){var M;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var z=arguments.length,$=new Array(z),ee=0;ee<z;ee++)$[ee]=arguments[ee];(M=p(A(oe.prototype),"pop",this)).call.apply(M,[this].concat($)),this._applyStencilTestIfClipping()}},{key:"_applyStencilTestIfClipping",value:function(){var M=this.drawTarget();M._isClipApplied!==this._stencilTestOn&&(M._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1))}},{key:"resetMatrix",value:function(){return this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this}},{key:"_getImmediateStrokeShader",value:function(){var M=this.userStrokeShader;return M&&M.isStrokeShader()?M:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getSphereMapping",value:function(M){return this.sphereMapping||(this.sphereMapping=this._pInst.createFilterShader(H)),this.uNMatrix.inverseTranspose(this.uViewMatrix),this.uNMatrix.invert3x3(this.uNMatrix),this.sphereMapping.setUniform("uFovY",this._curCamera.cameraFOV),this.sphereMapping.setUniform("uAspect",this._curCamera.aspectRatio),this.sphereMapping.setUniform("uNewNormalMatrix",this.uNMatrix.mat3),this.sphereMapping.setUniform("uSampler",M),this.sphereMapping}},{key:"_getImmediateFillShader",value:function(){var M=this.userFillShader;if(this._useNormalMaterial&&(!M||!M.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!M||!M.isLightShader())return this._getLightShader()}else if(this._tex){if(!M||!M.isTextureShader())return this._getLightShader()}else if(!M)return this._getImmediateModeShader();return M}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var M=this.userFillShader;if(this._enableLighting){if(!M||!M.isLightShader())return this._getLightShader()}else if(this._tex){if(!M||!M.isTextureShader())return this._getLightShader()}else if(!M)return this._getColorShader();return M}},{key:"_getImmediatePointShader",value:function(){var M=this.userPointShader;return M&&M.isPointShader()?M:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"baseMaterialShader",value:function(){if(this._pInst._glAttributes.perPixelLighting)return this._getLightShader();throw new Error("The material shader does not support hooks without perPixelLighting. Try turning it back on.")}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+q.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+q.phongFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 combineColors":`(ColorComponents components) {
                vec4 color = vec4(0.);
                color.rgb += components.diffuse * components.baseColor;
                color.rgb += components.ambient * components.ambientColor;
                color.rgb += components.specular * components.specularColor;
                color.rgb += components.emissive;
                color.a = components.opacity;
                return color;
              }`,"vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}}):this._defaultLightShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+q.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+q.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.immediateVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"baseNormalShader",value:function(){return this._getNormalShader()}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.normalFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultNormalShader}},{key:"baseColorShader",value:function(){return this._getColorShader()}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.basicFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultColorShader}},{key:"pointShader",value:function(){return this._getPointShader()}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.pointFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","float getPointSize":"(float size) { return size; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultPointShader}},{key:"baseStrokeShader",value:function(){return this._getLineShader()}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.lineFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","float getStrokeWeight":"(float weight) { return weight; }","vec2 getLineCenter":"(vec2 center) { return center; }","vec2 getLinePosition":"(vec2 position) { return position; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===d.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new a.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.fontVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(M,z){var $="";return this.webglVersion===d.WEBGL2&&($+=`#version 300 es
#define WEBGL2
`),M==="vert"?$+=`#define VERTEX_SHADER
`:M==="frag"&&($+=`#define FRAGMENT_SHADER
`),z&&($+="precision ".concat(z,` float;
`)),$}},{key:"_getEmptyTexture",value:function(){var M;return this._emptyTexture||((M=new a.default.Image(1,1)).set(0,0,255),this._emptyTexture=new a.default.Texture(this,M)),this._emptyTexture}},{key:"getTexture",value:function(M){M instanceof a.default.Framebuffer&&(M=M.color);var z=this.textures.get(M);return z||(z=new a.default.Texture(this,M),this.textures.set(M,z),z)}},{key:"getDiffusedTexture",value:function(M){var z,$,ee=this;return this.diffusedTextures.get(M)!=null?this.diffusedTextures.get(M):(z=Math.floor(M.height/M.width*200),$=this._pInst.createFramebuffer({width:200,height:z,density:1}),this.diffusedShader||(this.diffusedShader=this._pInst.createShader(q.imageLightVert,q.imageLightDiffusedFrag)),$.draw(function(){ee._pInst.shader(ee.diffusedShader),ee.diffusedShader.setUniform("environmentMap",M),ee._pInst.noStroke(),ee._pInst.rectMode(d.CENTER),ee._pInst.noLights(),ee._pInst.rect(0,0,200,z)}),this.diffusedTextures.set(M,$),$)}},{key:"getSpecularTexture",value:function(M){var z=this;if(this.specularTextures.get(M)!=null)return this.specularTextures.get(M);for(var $,ee=[],le=this._pInst.createFramebuffer({width:512,height:512,density:1}),ce=Math.log(512)/Math.log(2),me=(this.specularShader||(this.specularShader=this._pInst.createShader(q.imageLightVert,q.imageLightSpecularFrag)),512);1<=me;me/=2)(function(ve){le.resize(ve,ve);var ge=1-Math.log(ve)/Math.log(2)/ce;le.draw(function(){z._pInst.shader(z.specularShader),z._pInst.clear(),z.specularShader.setUniform("environmentMap",M),z.specularShader.setUniform("roughness",ge),z._pInst.noStroke(),z._pInst.noLights(),z._pInst.plane(ve,ve)}),ee.push(le.get().drawingContext.getImageData(0,0,ve,ve))})(me);return le.remove(),$=new h.MipmapTexture(this,ee,{}),this.specularTextures.set(M,$),$}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(M){return new a.default.Framebuffer(this,M)}},{key:"_setStrokeUniforms",value:function(M){M.bindShader(),M.setUniform("uUseLineColor",this._useLineColor),M.setUniform("uMaterialColor",this.curStrokeColor),M.setUniform("uStrokeWeight",this.curStrokeWeight),M.setUniform("uStrokeCap",P[this.curStrokeCap]),M.setUniform("uStrokeJoin",k[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(M){var z=this,$=(M.bindShader(),this.mixedSpecularColor=v(this.curSpecularColor),0<this._useMetalness&&(this.mixedSpecularColor=this.mixedSpecularColor.map(function(ee,le){return z.curFillColor[le]*z._useMetalness+ee*(1-z._useMetalness)})),M.setUniform("uUseVertexColor",this._useVertexColor),M.setUniform("uMaterialColor",this.curFillColor),M.setUniform("isTexture",!!this._tex),this._tex&&M.setUniform("uSampler",this._tex),M.setUniform("uTint",this._tint),M.setUniform("uHasSetAmbient",this._hasSetAmbient),M.setUniform("uAmbientMatColor",this.curAmbientColor),M.setUniform("uSpecularMatColor",this.mixedSpecularColor),M.setUniform("uEmissiveMatColor",this.curEmissiveColor),M.setUniform("uSpecular",this._useSpecularMaterial),M.setUniform("uEmissive",this._useEmissiveMaterial),M.setUniform("uShininess",this._useShininess),M.setUniform("uMetallic",this._useMetalness),this._setImageLightUniforms(M),M.setUniform("uUseLighting",this._enableLighting),this.pointLightDiffuseColors.length/3),$=(M.setUniform("uPointLightCount",$),M.setUniform("uPointLightLocation",this.pointLightPositions),M.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),M.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),$=(M.setUniform("uDirectionalLightCount",$),M.setUniform("uLightingDirection",this.directionalLightDirections),M.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),M.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),$=(this.mixedAmbientLight=v(this.ambientLightColors),0<this._useMetalness&&(this.mixedAmbientLight=this.mixedAmbientLight.map(function(ee){return ee-=z._useMetalness,Math.max(0,ee)})),M.setUniform("uAmbientLightCount",$),M.setUniform("uAmbientColor",this.mixedAmbientLight),this.spotLightDiffuseColors.length/3);M.setUniform("uSpotLightCount",$),M.setUniform("uSpotLightAngle",this.spotLightAngle),M.setUniform("uSpotLightConc",this.spotLightConc),M.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),M.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),M.setUniform("uSpotLightLocation",this.spotLightPositions),M.setUniform("uSpotLightDirection",this.spotLightDirections),M.setUniform("uConstantAttenuation",this.constantAttenuation),M.setUniform("uLinearAttenuation",this.linearAttenuation),M.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),M.bindTextures()}},{key:"_setImageLightUniforms",value:function(M){var z;M.setUniform("uUseImageLight",this.activeImageLight!=null),this.activeImageLight&&(z=this.getDiffusedTexture(this.activeImageLight),M.setUniform("environmentMapDiffused",z),z=this.getSpecularTexture(this.activeImageLight),M.setUniform("environmentMapSpecular",z))}},{key:"_setPointUniforms",value:function(M){M.bindShader(),M.setUniform("uMaterialColor",this.curStrokeColor),M.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(M,z,$,ee,le){z=z||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(z,M),$!==void 0&&((M=$)instanceof a.default.DataArray?M=$.dataArray():M instanceof(ee||Float32Array)||(M=new(ee||Float32Array)(M)),this.GL.bufferData(z,M,le||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(M,z){return M.length===z.length&&M.every(function($,ee){return $===z[ee]})}},{key:"_isTypedArray",value:function(M){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(z){return M instanceof z})}},{key:"_flatten",value:function(M){return M.flat()}},{key:"_vToNArray",value:function(M){return M.flatMap(function(z){return[z.x,z.y,z.z]})}},{key:"_bezierCoefficients",value:function(M){var z=M*M,$=1-M,ee=$*$;return[ee*$,3*ee*M,3*$*z,z*M]}},{key:"_quadraticCoefficients",value:function(M){var z=1-M;return[z*z,2*z*M,M*M]}},{key:"_bezierToCatmull",value:function(M){return[M[1],M[1]+(M[2]-M[0])/this._curveTightness,M[2]-(M[3]-M[1])/this._curveTightness,M[2]]}},{key:"_initTessy",value:function(){var M=new w.default.GluTesselator;return M.gluTessCallback(w.default.gluEnum.GLU_TESS_VERTEX_DATA,function(z,$){var ee=!0,le=!1,ce=void 0;try{for(var me,ve=z[Symbol.iterator]();!(ee=(me=ve.next()).done);ee=!0){var ge=me.value;$.push(ge)}}catch(we){le=!0,ce=we}finally{try{ee||ve.return==null||ve.return()}finally{if(le)throw ce}}}),M.gluTessCallback(w.default.gluEnum.GLU_TESS_BEGIN,function(z){z!==w.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(z))}),M.gluTessCallback(w.default.gluEnum.GLU_TESS_ERROR,function(z){console.log("error callback"),console.log("error number: ".concat(z))}),M.gluTessCallback(w.default.gluEnum.GLU_TESS_COMBINE,function(z,$,ee){for(var le=new Array(a.default.RendererGL.prototype.tessyVertexSize).fill(0),ce=0;ce<ee.length;ce++)for(var me=0;me<le.length;me++)ee[ce]!==0&&$[ce]&&(le[me]+=$[ce][me]*ee[ce]);return le}),M.gluTessCallback(w.default.gluEnum.GLU_TESS_EDGE_FLAG,function(z){}),M.gluTessProperty(w.default.gluEnum.GLU_TESS_WINDING_RULE,w.default.windingRule.GLU_TESS_WINDING_NONZERO),M}},{key:"_triangulate",value:function(M){var z=M[0]?M[0][2]:void 0,$=!0,ee=!0,ge=!1,xe=void 0;try{for(var le,ce=M[Symbol.iterator]();!(ee=(le=ce.next()).done);ee=!0)for(var me=le.value,ve=0;ve<me.length;ve+=a.default.RendererGL.prototype.tessyVertexSize)if(me[ve+2]!==z){$=!1;break}}catch(Ue){ge=!0,xe=Ue}finally{try{ee||ce.return==null||ce.return()}finally{if(ge)throw xe}}$?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0);var ge=[],we=(this._tessy.gluTessBeginPolygon(ge),!0),xe=!1,fe=void 0;try{for(var Se,Ce=M[Symbol.iterator]();!(we=(Se=Ce.next()).done);we=!0){var Ne=Se.value;this._tessy.gluTessBeginContour();for(var Oe=0;Oe<Ne.length;Oe+=a.default.RendererGL.prototype.tessyVertexSize){var Me=Ne.slice(Oe,Oe+a.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(Me,Me)}this._tessy.gluTessEndContour()}}catch(Ue){xe=!0,fe=Ue}finally{try{we||Ce.return==null||Ce.return()}finally{if(xe)throw fe}}return this._tessy.gluTessEndPolygon(),ge}}])&&g(K.prototype,Z),oe}(a.default.Renderer),a.default.prototype._assert3d=function(Z){if(!this._renderer.isP3D)throw new Error("".concat(Z,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},a.default.RendererGL.prototype.tessyVertexSize=12,D=a.default.RendererGL,c.default=D},{"../core/constants":272,"../core/main":283,"../core/p5.Renderer":286,"./GeometryBuilder":327,"./p5.Camera":332,"./p5.Framebuffer":334,"./p5.Matrix":336,"./p5.Shader":342,"./p5.Texture":343,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.every":155,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.flat-map":159,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.array.unscopables.flat-map":172,"core-js/modules/es.map":175,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.float64-array":220,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int16-array":224,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,libtess:255,path:258}],342:[function(t,o,c){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(d,_){return function(w){if(Array.isArray(w))return w}(d)||function(w,h){if(Symbol.iterator in Object(w)||Object.prototype.toString.call(w)==="[object Arguments]"){var m=[],b=!0,v=!1,g=void 0;try{for(var p,y=w[Symbol.iterator]();!(b=(p=y.next()).done)&&(m.push(p.value),!h||m.length!==h);b=!0);}catch(S){v=!0,g=S}finally{try{b||y.return==null||y.return()}finally{if(v)throw g}}return m}}(d,_)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(d,_){for(var w=0;w<_.length;w++){var h=_[w];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(d,h.key,h)}}l.default.Shader=function(){function d(h,m,b){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},g=this,p=d;if(!(g instanceof p))throw new TypeError("Cannot call a class as a function");this._renderer=h,this._vertSrc=m,this._fragSrc=b,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[],this.hooks={uniforms:v.uniforms||{},declarations:v.declarations,helpers:v.helpers||{},vertex:v.vertex||{},fragment:v.fragment||{},modified:{vertex:v.modified&&v.modified.vertex||{},fragment:v.modified&&v.modified.fragment||{}}}}var _,w;return _=d,(w=[{key:"shaderSrc",value:function(j,m){var b,v,g,p,y,j=f(j.split("void main"),2),S=j[0],j=j[1],A="";for(b in this.hooks.uniforms)A+="uniform ".concat(b,`;
`);for(v in this.hooks.declarations&&(A+=this.hooks.declarations+`
`),this.hooks[m].declarations&&(A+=this.hooks[m].declarations+`
`),this.hooks.helpers)A+="".concat(v).concat(this.hooks.helpers[v],`
`);for(g in this.hooks[m])g!=="declarations"&&(p=(y=f(g.split(" "),2))[0],y=y[1],this.hooks.modified[m][g]&&(A+="#define AUGMENTED_HOOK_"+y+`
`),A+=p+" HOOK_"+y+this.hooks[m][g]+`
`);return S+A+"void main"+j}},{key:"version",value:function(){var h=/#version (.+)$/.exec(this.vertSrc());return h?h[1]:"100 es"}},{key:"vertSrc",value:function(){return this.shaderSrc(this._vertSrc,"vertex")}},{key:"fragSrc",value:function(){return this.shaderSrc(this._fragSrc,"fragment")}},{key:"inspectHooks",value:function(){for(var h in console.log("==== Vertex shader hooks: ===="),this.hooks.vertex)console.log((this.hooks.modified.vertex[h]?"[MODIFIED] ":"")+h+this.hooks.vertex[h]);for(var m in console.log(""),console.log("==== Fragment shader hooks: ===="),this.hooks.fragment)console.log((this.hooks.modified.fragment[m]?"[MODIFIED] ":"")+m+this.hooks.fragment[m]);for(var b in console.log(""),console.log("==== Helper functions: ===="),this.hooks.helpers)console.log(b+this.hooks.helpers[b])}},{key:"modify",value:function(h){l.default._validateParameters("p5.Shader.modify",arguments);var m,b={vertex:{},fragment:{},helpers:{}};for(m in h)m!=="declarations"&&m!=="uniforms"&&(m==="vertexDeclarations"?b.vertex.declarations=(b.vertex.declarations||"")+`
`+h[m]:m==="fragmentDeclarations"?b.fragment.declarations=(b.fragment.declarations||"")+`
`+h[m]:this.hooks.vertex[m]?b.vertex[m]=h[m]:this.hooks.fragment[m]?b.fragment[m]=h[m]:b.helpers[m]=h[m]);var v,g,p=Object.assign({},this.hooks.modified.vertex),y=Object.assign({},this.hooks.modified.fragment);for(v in b.vertex||{})v!=="declarations"&&(p[v]=!0);for(g in b.fragment||{})g!=="declarations"&&(y[g]=!0);return new l.default.Shader(this._renderer,this._vertSrc,this._fragSrc,{declarations:(this.hooks.declarations||"")+`
`+(h.declarations||""),uniforms:Object.assign({},this.hooks.uniforms,h.uniforms||{}),fragment:Object.assign({},this.hooks.fragment,b.fragment||{}),vertex:Object.assign({},this.hooks.vertex,b.vertex||{}),helpers:Object.assign({},this.hooks.helpers,b.helpers||{}),modified:{vertex:p,fragment:y}})}},{key:"init",value:function(){if(this._glProgram===0){var h,m=this._renderer.GL;if(this._vertShader=m.createShader(m.VERTEX_SHADER),m.shaderSource(this._vertShader,this.vertSrc()),m.compileShader(this._vertShader),!m.getShaderParameter(this._vertShader,m.COMPILE_STATUS))return h=m.getShaderInfoLog(this._vertShader),console.error(h),null;if(this._fragShader=m.createShader(m.FRAGMENT_SHADER),m.shaderSource(this._fragShader,this.fragSrc()),m.compileShader(this._fragShader),!m.getShaderParameter(this._fragShader,m.COMPILE_STATUS))return h=m.getShaderInfoLog(this._fragShader),console.error(h),null;this._glProgram=m.createProgram(),m.attachShader(this._glProgram,this._vertShader),m.attachShader(this._glProgram,this._fragShader),m.linkProgram(this._glProgram),m.getProgramParameter(this._glProgram,m.LINK_STATUS)||l.default._friendlyError("Snap! Error linking shader program: ".concat(m.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"setDefaultUniforms",value:function(){for(var h in this.hooks.uniforms){var m=f(h.split(" "),2)[1],h=this.hooks.uniforms[h],b=void 0;(b=h instanceof Function?h():h)!=null&&this.setUniform(m,b)}}},{key:"copyToContext",value:function(h){var m=new l.default.Shader(h._renderer,this._vertSrc,this._fragSrc);return m.ensureCompiledOnContext(h),m}},{key:"ensureCompiledOnContext",value:function(h){if(this._glProgram!==0&&this._renderer!==h._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");this._glProgram===0&&(this._renderer=h._renderer,this.init())}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var h=this._renderer.GL,m=h.getProgramParameter(this._glProgram,h.ACTIVE_ATTRIBUTES),b=0;b<m;++b){var v=h.getActiveAttrib(this._glProgram,b),g=v.name,p=h.getAttribLocation(this._glProgram,g),y={};y.name=g,y.location=p,y.index=b,y.type=v.type,y.size=v.size,this.attributes[g]=y}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var h=this._renderer.GL,m=h.getProgramParameter(this._glProgram,h.ACTIVE_UNIFORMS),b=0,v=0;v<m;++v){var g=h.getActiveUniform(this._glProgram,v),p={},y=(p.location=h.getUniformLocation(this._glProgram,g.name),p.size=g.size,g.name);1<g.size&&(y=y.substring(0,y.indexOf("[0]"))),p.name=y,p.type=g.type,p._cachedData=void 0,p.type===h.SAMPLER_2D&&(p.samplerIndex=b,b++,this.samplers.push(p)),p.isArray=1<g.size||p.type===h.FLOAT_MAT3||p.type===h.FLOAT_MAT4||p.type===h.FLOAT_VEC2||p.type===h.FLOAT_VEC3||p.type===h.FLOAT_VEC4||p.type===h.INT_VEC2||p.type===h.INT_VEC4||p.type===h.INT_VEC3,this.uniforms[y]=p}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var h=this._renderer.GL,m=!0,b=!1,v=void 0;try{for(var g,p=this.samplers[Symbol.iterator]();!(m=(g=p.next()).done);m=!0){var y=g.value,S=y.texture;S===void 0&&(S=this._renderer._getEmptyTexture()),h.activeTexture(h.TEXTURE0+y.samplerIndex),S.bindTexture(),S.update(),h.uniform1i(y.location,y.samplerIndex)}}catch(j){b=!0,v=j}finally{try{m||p.return==null||p.return()}finally{if(b)throw v}}}},{key:"updateTextures",value:function(){var h=!0,m=!1,b=void 0;try{for(var v,g=this.samplers[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var p=v.value.texture;p&&p.update()}}catch(y){m=!0,b=y}finally{try{h||g.return==null||g.return()}finally{if(m)throw b}}}},{key:"unbindTextures",value:function(){var h=!0,m=!1,b=void 0;try{for(var v,g=this.samplers[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var p=v.value;this.setUniform(p.name,this._renderer._getEmptyTexture())}}catch(y){m=!0,b=y}finally{try{h||g.return==null||g.return()}finally{if(m)throw b}}}},{key:"_setMatrixUniforms",value:function(){var h=this._renderer.uModelMatrix,m=this._renderer.uViewMatrix,b=this._renderer.uPMatrix,v=h.copy().mult(m),g=(this._renderer.uMVMatrix=v).copy();g.mult(b),this.isStrokeShader()&&this.setUniform("uPerspective",this._renderer._curCamera.useLinePerspective?1:0),this.setUniform("uViewMatrix",m.mat4),this.setUniform("uProjectionMatrix",b.mat4),this.setUniform("uModelMatrix",h.mat4),this.setUniform("uModelViewMatrix",v.mat4),this.setUniform("uModelViewProjectionMatrix",g.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3)),this.uniforms.uCameraRotation&&(this._renderer.curMatrix.inverseTranspose(this._renderer.uViewMatrix),this.setUniform("uCameraRotation",this._renderer.curMatrix.mat3))}},{key:"useProgram",value:function(){var h=this._renderer.GL;return this._renderer._curShader!==this&&(h.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(h,m){var b=this.uniforms[h];if(b){var v=this._renderer.GL;if(b.isArray){if(b._cachedData&&this._renderer._arraysEqual(b._cachedData,m))return;b._cachedData=m.slice(0)}else{if(b._cachedData&&b._cachedData===m)return;Array.isArray(m)?b._cachedData=m.slice(0):b._cachedData=m}var g=b.location;switch(this.useProgram(),b.type){case v.BOOL:m===!0?v.uniform1i(g,1):v.uniform1i(g,0);break;case v.INT:1<b.size?m.length&&v.uniform1iv(g,m):v.uniform1i(g,m);break;case v.FLOAT:1<b.size?m.length&&v.uniform1fv(g,m):v.uniform1f(g,m);break;case v.FLOAT_MAT3:v.uniformMatrix3fv(g,!1,m);break;case v.FLOAT_MAT4:v.uniformMatrix4fv(g,!1,m);break;case v.FLOAT_VEC2:1<b.size?m.length&&v.uniform2fv(g,m):v.uniform2f(g,m[0],m[1]);break;case v.FLOAT_VEC3:1<b.size?m.length&&v.uniform3fv(g,m):v.uniform3f(g,m[0],m[1],m[2]);break;case v.FLOAT_VEC4:1<b.size?m.length&&v.uniform4fv(g,m):v.uniform4f(g,m[0],m[1],m[2],m[3]);break;case v.INT_VEC2:1<b.size?m.length&&v.uniform2iv(g,m):v.uniform2i(g,m[0],m[1]);break;case v.INT_VEC3:1<b.size?m.length&&v.uniform3iv(g,m):v.uniform3i(g,m[0],m[1],m[2]);break;case v.INT_VEC4:1<b.size?m.length&&v.uniform4iv(g,m):v.uniform4i(g,m[0],m[1],m[2],m[3]);break;case v.SAMPLER_2D:v.activeTexture(v.TEXTURE0+b.samplerIndex),b.texture=m instanceof l.default.Texture?m:this._renderer.getTexture(m),v.uniform1i(g,b.samplerIndex),b.texture.src.gifProperties&&b.texture.src._animateGif(this._renderer._pInst)}return this}}},{key:"isLightShader",value:function(){return[this.attributes.aNormal,this.uniforms.uUseLighting,this.uniforms.uAmbientLightCount,this.uniforms.uDirectionalLightCount,this.uniforms.uPointLightCount,this.uniforms.uAmbientColor,this.uniforms.uDirectionalDiffuseColors,this.uniforms.uDirectionalSpecularColors,this.uniforms.uPointLightLocation,this.uniforms.uPointLightDiffuseColors,this.uniforms.uPointLightSpecularColors,this.uniforms.uLightingDirection,this.uniforms.uSpecular].some(function(h){return h!==void 0})}},{key:"isNormalShader",value:function(){return this.attributes.aNormal!==void 0}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return this.uniforms.uStrokeWeight!==void 0}},{key:"enableAttrib",value:function(h,m,b,v,g,p){var y;return h&&(h=h.location)!==-1&&(y=this._renderer.GL,this._renderer.registerEnabled.has(h)||(y.enableVertexAttribArray(h),this._renderer.registerEnabled.add(h)),this._renderer.GL.vertexAttribPointer(h,m,b||y.FLOAT,v||!1,g||0,p||0)),this}},{key:"disableRemainingAttributes",value:function(){var h=this,m=!0,b=!1,v=void 0;try{for(var g,p=this._renderer.registerEnabled.values()[Symbol.iterator]();!(m=(g=p.next()).done);m=!0)(function(){var y=g.value;Object.keys(h.attributes).some(function(S){return h.attributes[S].location===y})||(h._renderer.GL.disableVertexAttribArray(y),h._renderer.registerEnabled.delete(y))})()}catch(y){b=!0,v=y}finally{try{m||p.return==null||p.return()}finally{if(b)throw v}}}}])&&a(_.prototype,w),d}(),t=l.default.Shader,c.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],343:[function(t,o,c){function l(S){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(S)}function f(S){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(j){return l(j)}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":l(j)})(S)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(c,"__esModule",{value:!0}),c.checkWebGLCapabilities=y,c.default=c.MipmapTexture=void 0;var a=(p=t("../core/main"))&&p.__esModule?p:{default:p},d=function(S){if(S&&S.__esModule)return S;if(S===null||f(S)!=="object"&&typeof S!="function")return{default:S};var j=_();if(j&&j.has(S))return j.get(S);var A,N={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(A in S){var T;Object.prototype.hasOwnProperty.call(S,A)&&((T=C?Object.getOwnPropertyDescriptor(S,A):null)&&(T.get||T.set)?Object.defineProperty(N,A,T):N[A]=S[A])}return N.default=S,j&&j.set(S,N),N}(t("../core/constants"));function _(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,_=function(){return S},S)}function w(S,j){return(w=Object.setPrototypeOf||function(A,N){return A.__proto__=N,A})(S,j)}function h(S){return function(){var j,A=m(S),A=(j=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(j=m(this).constructor,Reflect.construct(A,arguments,j)):A.apply(this,arguments),this);if(!j||f(j)!=="object"&&typeof j!="function"){if(A!==void 0)return A;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return j}}function m(S){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(j){return j.__proto__||Object.getPrototypeOf(j)})(S)}function b(S,j){if(!(S instanceof j))throw new TypeError("Cannot call a class as a function")}function v(S,j){for(var A=0;A<j.length;A++){var N=j[A];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(S,N.key,N)}}function g(S,j,A){j&&v(S.prototype,j)}a.default.Texture=function(){function S(R,A,T){b(this,S),this._renderer=R;var C=this._renderer.GL,T=(T=T||{},this.src=A,this.glTex=void 0,this.glTarget=C.TEXTURE_2D,this.glFormat=T.format||C.RGBA,this.mipmaps=!1,this.glMinFilter=T.minFilter||C.LINEAR,this.glMagFilter=T.magFilter||C.LINEAR,this.glWrapS=T.wrapS||C.CLAMP_TO_EDGE,this.glWrapT=T.wrapT||C.CLAMP_TO_EDGE,this.glDataType=T.dataType||C.UNSIGNED_BYTE,y(R)),R=(this.glFormat!==C.HALF_FLOAT||T.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=C.FLOAT),this.glFormat!==C.HALF_FLOAT||this.glMinFilter!==C.LINEAR&&this.glMagFilter!==C.LINEAR||T.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===C.LINEAR&&(this.glMinFilter=C.NEAREST),this.glMagFilter===C.LINEAR&&(this.glMagFilter=C.NEAREST)),this.glFormat!==C.FLOAT||T.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=C.UNSIGNED_BYTE),this.glFormat!==C.FLOAT||this.glMinFilter!==C.LINEAR&&this.glMagFilter!==C.LINEAR||T.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===C.LINEAR&&(this.glMinFilter=C.NEAREST),this.glMagFilter===C.LINEAR&&(this.glMagFilter=C.NEAREST)),this.isSrcMediaElement=a.default.MediaElement!==void 0&&A instanceof a.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=a.default.Element!==void 0&&A instanceof a.default.Element&&!(A instanceof a.default.Graphics)&&!(A instanceof a.default.Renderer),this.isSrcP5Image=A instanceof a.default.Image,this.isSrcP5Graphics=A instanceof a.default.Graphics,this.isSrcP5Renderer=A instanceof a.default.Renderer,this.isImageData=typeof ImageData<"u"&&A instanceof ImageData,this.isFramebufferTexture=A instanceof a.default.FramebufferTexture,this._getTextureDataFromSource());return this.width=R.width,this.height=R.height,this.init(R),this}return g(S,[{key:"_getTextureDataFromSource",value:function(){var j;return this.isFramebufferTexture?j=this.src.rawTexture():this.isSrcP5Image?j=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?(this.src._ensureCanvas&&this.src._ensureCanvas(),j=this.src.canvas||this.src.elt):this.isImageData&&(j=this.src),j}},{key:"init",value:function(j){var A,N=this._renderer.GL;this.isFramebufferTexture||(this.glTex=N.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,this.glMagFilter),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(A=new Uint8Array([1,1,1,1]),N.texImage2D(this.glTarget,0,N.RGBA,1,1,0,this.glFormat,this.glDataType,A)):N.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,j))}},{key:"update",value:function(){var j,A,N,C=this.src;return C.width!==0&&C.height!==0&&!this.isFramebufferTexture&&(j=this._getTextureDataFromSource(),A=!1,N=this._renderer.GL,j.width!==this.width||j.height!==this.height?(A=!0,this.width=j.width||C.width,this.height=j.height||C.height,this.isSrcP5Image?C.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&C.setModified(!0)):this.isSrcP5Image?C.isModified()&&C.setModified(!(A=!0)):this.isSrcMediaElement?C.isModified()?C.setModified(!(A=!0)):C.loadedmetadata&&this._videoPrevUpdateTime!==C.time()&&(this._videoPrevUpdateTime=C.time(),A=!0):this.isImageData?C._dirty&&(A=!(C._dirty=!1)):A=!0,A&&(this.bindTexture(),N.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,j)),A)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(j,A){var N=this._renderer.GL;this.glMinFilter=this.glFilter(j),this.glMagFilter=this.glFilter(A),this.bindTexture(),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,this.glMinFilter),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"glFilter",value:function(j){var A=this._renderer.GL;return j===d.NEAREST?A.NEAREST:A.LINEAR}},{key:"setWrapMode",value:function(j,A){function N(P){return(P&P-1)==0}var C=this._renderer.GL,R=this._getTextureDataFromSource(),R=R.naturalWidth&&R.naturalHeight?(T=R.naturalWidth,R.naturalHeight):(T=this.width,this.height),T=N(T),R=N(R);j===d.REPEAT?this._renderer.webglVersion===d.WEBGL2||T&&R?this.glWrapS=C.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=C.CLAMP_TO_EDGE):j===d.MIRROR?this._renderer.webglVersion===d.WEBGL2||T&&R?this.glWrapS=C.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=C.CLAMP_TO_EDGE):this.glWrapS=C.CLAMP_TO_EDGE,A===d.REPEAT?this._renderer.webglVersion===d.WEBGL2||T&&R?this.glWrapT=C.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=C.CLAMP_TO_EDGE):A===d.MIRROR?this._renderer.webglVersion===d.WEBGL2||T&&R?this.glWrapT=C.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=C.CLAMP_TO_EDGE):this.glWrapT=C.CLAMP_TO_EDGE,this.bindTexture(),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,this.glWrapS),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}]),S}();var p=function(S){var j=N;if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(S&&S.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),S&&w(j,S);var A=h(N);function N(C,T,R){return b(this,N),T=(C=A.call(this,C,T,R))._renderer.GL,C.glMinFilter===T.LINEAR&&(C.glMinFilter=T.LINEAR_MIPMAP_LINEAR),C}return g(N,[{key:"glFilter",value:function(C){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}},{key:"_getTextureDataFromSource",value:function(){return this.src}},{key:"init",value:function(C){var T=this._renderer.GL;this.glTex=T.createTexture(),this.bindTexture();for(var R=0;R<C.length;R++)T.texImage2D(this.glTarget,R,this.glFormat,this.glFormat,this.glDataType,C[R]);this.glMinFilter=T.LINEAR_MIPMAP_LINEAR,T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,this.glMagFilter),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture()}},{key:"update",value:function(){}}]),N}(a.default.Texture);function y(C){var j=C.GL,C=C.webglVersion,A=C===d.WEBGL2?j.getExtension("EXT_color_buffer_float")&&j.getExtension("EXT_float_blend"):j.getExtension("OES_texture_float"),N=A&&j.getExtension("OES_texture_float_linear"),C=C===d.WEBGL2?j.getExtension("EXT_color_buffer_float"):j.getExtension("OES_texture_half_float");return{float:A,floatLinear:N,halfFloat:C,halfFloatLinear:C&&j.getExtension("OES_texture_half_float_linear")}}c.MipmapTexture=p,t=a.default.Texture,c.default=t},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],344:[function(t,o,c){function l(S){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(S)}function f(S){return(f=typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?function(j){return l(j)}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":l(j)})(S)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.iterator");var a,d=(a=t("../core/main"))&&a.__esModule?a:{default:a},_=function(S){if(S&&S.__esModule)return S;if(S===null||f(S)!=="object"&&typeof S!="function")return{default:S};var j=w();if(j&&j.has(S))return j.get(S);var A,N={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(A in S){var T;Object.prototype.hasOwnProperty.call(S,A)&&((T=C?Object.getOwnPropertyDescriptor(S,A):null)&&(T.get||T.set)?Object.defineProperty(N,A,T):N[A]=S[A])}return N.default=S,j&&j.set(S,N),N}(t("../core/constants"));function w(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,w=function(){return S},S)}function h(S,j){if(!(S instanceof j))throw new TypeError("Cannot call a class as a function")}function m(S,j){for(var A=0;A<j.length;A++){var N=j[A];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(S,N.key,N)}}function b(S,j,A){j&&m(S.prototype,j)}t("./p5.Shader"),t("./p5.RendererGL.Retained"),d.default.RendererGL.prototype._applyTextProperties=function(){this._setProperty("_textAscent",null),this._setProperty("_textDescent",null)},d.default.RendererGL.prototype.textWidth=function(S){return this._isOpenType()?this._textFont._textWidth(S,this._textSize):0};var v=function(){function S(j,A){h(this,S),this.width=j,this.height=A,this.infos=[]}return b(S,[{key:"findImage",value:function(j){var A,N,C=this.width*this.height;if(C<j)throw new Error("font is too complex to render in 3D");for(var T=this.infos.length-1;0<=T;--T){var R=this.infos[T];if(R.index+j<C){N=(A=R).imageData;break}}if(!A){try{N=new ImageData(this.width,this.height)}catch{var P=document.getElementsByTagName("canvas")[0],k=!P,F=(P||((P=document.createElement("canvas")).style.display="none",document.body.appendChild(P)),P.getContext("2d"));F&&(N=F.createImageData(this.width,this.height)),k&&document.body.removeChild(P)}this.infos.push(A={index:0,imageData:N})}return F=A.index,A.index+=j,N._dirty=!0,{imageData:N,index:F}}}]),S}();function g(R,j,A,N,C){var T=R.imageData.data,R=4*R.index++;T[R++]=j,T[R++]=A,T[R++]=N,T[+R]=C}var p=Math.sqrt(3),y=function(){function S(j){h(this,S),this.font=j,this.strokeImageInfos=new v(64,64),this.colDimImageInfos=new v(64,64),this.rowDimImageInfos=new v(64,64),this.colCellImageInfos=new v(64,64),this.rowCellImageInfos=new v(64,64),this.glyphInfos={}}return b(S,[{key:"getGlyphInfo",value:function(j){var A=this.glyphInfos[j.index];if(!A){var N=j.getBoundingBox(),C=N.x1,T=N.y1,R=N.x2-C,P=N.y2-T,k=j.path.commands;if(R==0||P==0||!k.length)return this.glyphInfos[j.index]={};for(var F=[],D=[],q=[],H=8;0<=H;--H)q.push([]);for(H=8;0<=H;--H)D.push([]);var W,Q,J,Z,K=function(){function ut(it,ft,at,Le){h(this,ut),this.p0=it,this.c0=ft,this.c1=at,this.p1=Le}return b(ut,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return d.default.Vector.sub(d.default.Vector.sub(this.p1,this.p0),d.default.Vector.mult(d.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(Je){var ft=d.default.Vector.lerp(this.p0,this.c0,Je),Le=d.default.Vector.lerp(this.c0,this.c1,Je),at=d.default.Vector.lerp(ft,Le,Je),Le=(this.c1=d.default.Vector.lerp(this.c1,this.p1,Je),this.c0=d.default.Vector.lerp(Le,this.c1,Je),d.default.Vector.lerp(at,this.c0,Je)),Je=new ut(this.p0,ft,at,Le);return this.p0=Le,Je}},{key:"splitInflections",value:function(){var it=d.default.Vector.sub(this.c0,this.p0),ft=d.default.Vector.sub(d.default.Vector.sub(this.c1,this.c0),it),at=d.default.Vector.sub(d.default.Vector.sub(d.default.Vector.sub(this.p1,this.c1),it),d.default.Vector.mult(ft,2)),Le=[],Je=ft.x*at.y-ft.y*at.x;return Je!==0&&0<=(it=(at=it.x*at.y-it.y*at.x)*at-4*Je*(it.x*ft.y-it.y*ft.x))&&(Je<0&&(Je=-Je,at=-at),it=(-at+(ft=Math.sqrt(it)))/(2*Je),0<(at=(-at-ft)/(2*Je))&&at<1&&(Le.push(this.split(at)),it=1-(1-it)/(1-at)),0<it&&it<1&&Le.push(this.split(it))),Le.push(this),Le}}]),ut}(),re=!0,oe=!1,M=void 0;try{for(var z,$=k[Symbol.iterator]();!(re=(z=$.next()).done);re=!0){var ee=z.value,le=(ee.x-C)/R,ce=(ee.y-T)/P;if(!Fe(W,Q,le,ce)){switch(ee.type){case"M":J=le,Z=ce;break;case"L":et(W,Q,le,ce);break;case"Q":var me=(ee.x1-C)/R,ve=(ee.y1-T)/P;Me([W,le,me],[Q,ce,ve],{x:W,y:Q,cx:me,cy:ve});break;case"Z":Fe(W,Q,J,Z)?F.push({x:W,y:Q}):(et(W,Q,J,Z),F.push({x:J,y:Z}));break;case"C":for(var ge=function(he,Ve,$e,at,Le,Je,Ie,de){var he=new K(new d.default.Vector(he,Ve),new d.default.Vector($e,at),new d.default.Vector(Le,Je),new d.default.Vector(Ie,de)).splitInflections(),ie=[],ye=30/p,Pe=!0,Ve=!1,$e=void 0;try{for(var ct,yt=he[Symbol.iterator]();!(Pe=(ct=yt.next()).done);Pe=!0){for(var vt=ct.value,bt=[],Lt=void 0;!(.125<=(Lt=ye/vt.quadError()));){var Tt=Math.pow(Lt,.3333333333333333),jt=vt.split(Tt),Nt=vt.split(1-Tt/(1-Tt));ie.push(jt),bt.push(vt),vt=Nt}Lt<1&&ie.push(vt.split(.5)),ie.push(vt),Array.prototype.push.apply(ie,bt.reverse())}}catch(kt){Ve=!0,$e=kt}finally{try{Pe||yt.return==null||yt.return()}finally{if(Ve)throw $e}}return ie}(W,Q,(ee.x1-C)/R,(ee.y1-T)/P,(ee.x2-C)/R,(ee.y2-T)/P,le,ce),we=0;we<ge.length;we++){var xe=ge[we].toQuadratic();Me([xe.x,xe.x1,xe.cx],[xe.y,xe.y1,xe.cy],xe)}break;default:throw new Error("unknown command type: ".concat(ee.type))}W=le,Q=ce}}}catch(ut){oe=!0,M=ut}finally{try{re||$.return==null||$.return()}finally{if(oe)throw M}}for(var fe=F.length,Se=this.strokeImageInfos.findImage(fe),Ce=Se.index,Ne=0;Ne<fe;++Ne){var Oe=F[Ne];g(Se,Ue(Oe.x),Ue(Oe.y),Ue(Oe.cx),Ue(Oe.cy))}(A=this.glyphInfos[j.index]={glyph:j,uGlyphRect:[N.x1,-N.y1,N.x2,-N.y2],strokeImageInfo:Se,strokes:F,colInfo:mt(q,this.colDimImageInfos,this.colCellImageInfos),rowInfo:mt(D,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[A.colInfo.dimOffset,A.rowInfo.dimOffset]}return A;function Me(ut,it,ft){var at=F.length;function Le(ie,ye,Pe){for(var Ve=ie.length;0<Ve--;){var $e=ie[Ve];$e<ye&&(ye=$e),Pe<$e&&(Pe=$e)}return{min:ye,max:Pe}}F.push(ft);for(var ft=Le(ut,1,0),ut=Math.max(Math.floor(9*ft.min-.5),0),Je=Math.min(Math.ceil(9*ft.max+.5),9),Ie=ut;Ie<Je;++Ie)q[Ie].push(at);for(var ft=Le(it,1,0),ut=Math.max(Math.floor(9*ft.min-.5),0),de=Math.min(Math.ceil(9*ft.max+.5),9),he=ut;he<de;++he)D[he].push(at)}function Ue(ut){return(ut=(ft=255)*ut)<(it=0)?it:ft<ut?ft:ut;var it,ft}function et(ut,it,ft,at){Me([ut,ft],[it,at],{x:ut,y:it,cx:(ut+ft)/2,cy:(it+at)/2})}function Fe(ut,it,ft,at){return Math.abs(ft-ut)<1e-5&&Math.abs(at-it)<1e-5}function mt(ut,it,ft){for(var at=ut.length,Le=it.findImage(at),it=Le.index,Je=0,Ie=0;Ie<at;++Ie)Je+=ut[Ie].length;for(var de=ft.findImage(Je),he=0;he<at;++he){var ie=ut[he],ye=ie.length,Pe=de.index;g(Le,Pe>>7,127&Pe,ye>>7,127&ye);for(var Ve=0;Ve<ye;++Ve){var $e=ie[Ve]+Ce;g(de,$e>>7,127&$e,0,0)}}return{cellImageInfo:de,dimOffset:it,dimImageInfo:Le}}}}]),S}();d.default.RendererGL.prototype._renderText=function(S,j,A,N,C){if(this._textFont&&typeof this._textFont!="string"){if(!(C<=N)&&this._doFill){if(this._isOpenType()){S.push();var C=this._doStroke,T=this.drawMode,R=(this._doStroke=!1,this.drawMode=_.TEXTURE,this._textFont.font),P=(P=this._textFont._fontInfo)||(this._textFont._fontInfo=new y(R)),A=this._textFont._handleAlignment(this,j,A,N),N=this._textSize/R.unitsPerEm,k=(this.translate(A.x,A.y,0),this.scale(N,N,1),this.GL),A=!this._defaultFontShader,F=this._getFontShader(),D=(F.init(),F.bindShader(),A&&(F.setUniform("uGridImageSize",[64,64]),F.setUniform("uCellsImageSize",[64,64]),F.setUniform("uStrokeImageSize",[64,64]),F.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),q=(D||((N=this._textGeom=new d.default.Geometry(1,1,function(){for(var we=0;we<=1;we++)for(var xe=0;xe<=1;xe++)this.vertices.push(new d.default.Vector(xe,we,0)),this.uvs.push(xe,we)})).computeFaces().computeNormals(),D=this.createBuffers("glyph",N)),!0),A=!1,N=void 0;try{for(var H,W=this.retainedMode.buffers.text[Symbol.iterator]();!(q=(H=W.next()).done);q=!0)H.value._prepareBuffer(D,F)}catch(we){A=!0,N=we}finally{try{q||W.return==null||W.return()}finally{if(A)throw N}}this._bindBuffer(D.indexBuffer,k.ELEMENT_ARRAY_BUFFER),F.setUniform("uMaterialColor",this.curFillColor),k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var Q=0,J=null,Z=R.stringToGlyphs(j),K=!0,re=!1,oe=void 0;try{for(var M,z=Z[Symbol.iterator]();!(K=(M=z.next()).done);K=!0){var $,ee,le=M.value,ce=(J&&(Q+=R.getKerningValue(J,le)),P.getGlyphInfo(le));ce.uGlyphRect&&($=ce.rowInfo,ee=ce.colInfo,F.setUniform("uSamplerStrokes",ce.strokeImageInfo.imageData),F.setUniform("uSamplerRowStrokes",$.cellImageInfo.imageData),F.setUniform("uSamplerRows",$.dimImageInfo.imageData),F.setUniform("uSamplerColStrokes",ee.cellImageInfo.imageData),F.setUniform("uSamplerCols",ee.dimImageInfo.imageData),F.setUniform("uGridOffset",ce.uGridOffset),F.setUniform("uGlyphRect",ce.uGlyphRect),F.setUniform("uGlyphOffset",Q),F.bindTextures(),k.drawElements(k.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),Q+=le.advanceWidth,J=le}}catch(we){re=!0,oe=we}finally{try{K||z.return==null||z.return()}finally{if(re)throw oe}}}finally{F.unbindShader(),this._doStroke=C,this.drawMode=T,k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),S.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return S}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":272,"../core/main":283,"./p5.RendererGL.Retained":340,"./p5.Shader":342,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}]},{},[267])(267)})}(qg)),qg.exports}var AV=CV();const ky=Py(AV);var My=function(){return My=Object.assign||function(s){for(var r,n=1,t=arguments.length;n<t;n++)for(var o in r=arguments[n])Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=r[o]);return s},My.apply(this,arguments)},RV="react-p5-wrapper";function Gx(s){var r;(r=s.current)===null||r===void 0||r.remove(),s.current=null}function OV(s){var r=s.sketch,n=s.children,t=function(l,f){var a={};for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&f.indexOf(d)<0&&(a[d]=l[d]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function"){var _=0;for(d=Object.getOwnPropertySymbols(l);_<d.length;_++)f.indexOf(d[_])<0&&Object.prototype.propertyIsEnumerable.call(l,d[_])&&(a[d[_]]=l[d[_]])}return a}(s,["sketch","children"]),o=be.createRef(),c=be.useRef(null);return be.useEffect(function(){o.current!==null&&(Gx(c),c.current=function(l,f){return new ky(l,f)}(r,o.current))},[r]),be.useEffect(function(){var l,f;(f=(l=c.current)===null||l===void 0?void 0:l.updateWithProps)===null||f===void 0||f.call(l,t)},[t,o]),be.useEffect(function(){return function(){return Gx(c)}},[]),Pu.createElement("div",{ref:o,className:RV},n)}var h0=be.memo(function(s){return s.sketch===void 0?(console.error("[ReactP5Wrapper] The `sketch` prop is required."),null):Pu.createElement(OV,My({},s))},function(s,r){return wT(s,r).length===0});const xT=()=>{const s={waveType:"sine",direction:"static",angle:0,amplitude:10,frequency:10,speed:5,thickness:1,phaseOffset:0,numLines:1,distance:0,bgColor:"#FFFFFF",lineColor:"#FF0000",selectedPalette:"none",rotationSpeed:.02,rotationRadius:150,oscillationRange:100,groups:1,groupDistance:100},[r,n]=be.useState(s),[t,o]=be.useState(!0),c=be.useCallback(d=>{let _=0,w=d.height/2,h=0;const m={rainbow:["#FF0000","#FF7F00","#FFFF00","#7FFF00","#00FF00","#00FF7F","#00FFFF","#007FFF","#0000FF","#7F00FF","#FF00FF","#FF007F"],pastel:["#FFD1DC","#FFABAB","#FFC3A0","#FF677D","#D4A5A5","#392F5A","#31A2AC","#61C0BF","#6B4226","#ACD8AA"]};d.setup=()=>{d.createCanvas(d.windowWidth,d.windowHeight),d.noLoop()},d.updateWithProps=v=>{v.settings&&Object.assign(r,v.settings),v.isAnimating!==void 0&&(v.isAnimating?d.loop():d.noLoop())};const b=()=>{switch(r.direction){case"static":w=d.height/2;break;case"up":w-=r.speed,w<-d.height&&(w+=d.height);break;case"down":w+=r.speed,w>d.height&&(w-=d.height);break;case"left":_-=r.speed,_<-d.width&&(_+=d.width);break;case"right":_+=r.speed,_>d.width&&(_-=d.width);break;case"oscillateUpDown":w=d.height/2+r.oscillationRange*d.sin(h),h+=r.speed/100;break;case"oscillateRightLeft":_=d.width/2+r.oscillationRange*d.sin(h),h+=r.speed/100;break;case"circular":_=d.width/2+r.rotationRadius*d.cos(h*r.rotationSpeed),w=d.height/2+r.rotationRadius*d.sin(h*r.rotationSpeed),h+=r.speed/100;break}};d.draw=()=>{if(!t)return;d.noFill(),d.clear(),d.background(d.color(r.bgColor)),d.stroke(d.color(r.lineColor)),d.strokeWeight(r.thickness);const v=d.width/2,g=d.height/2;b();for(let p=0;p<r.groups;p++)for(let y=0;y<r.numLines;y++){d.beginShape();for(let S=0;S<=d.width;S++){const j=(S+_+r.phaseOffset*y)/r.frequency;let A;switch(r.waveType){case"sine":A=d.sin(j)*r.amplitude;break;case"tan":A=d.tan(j)*r.amplitude/4;break;case"cotan":A=1/d.tan(j)*r.amplitude/4;break;case"sawtooth":A=(j/d.PI%2-1)*r.amplitude;break;case"square":A=(d.sin(j)>=0?1:-1)*r.amplitude/2;break;case"triangle":A=2*r.amplitude/d.PI*d.asin(d.sin(j));break;default:A=d.sin(j)*r.amplitude}const N=w+p*r.groupDistance+y*r.distance,C=(S-v)*d.cos(r.angle)-A*d.sin(r.angle)+v,T=(S-v)*d.sin(r.angle)+(A+N-g)*d.cos(r.angle)+g;d.vertex(C,T)}r.selectedPalette!=="none"?d.stroke(d.color(m[r.selectedPalette][y%m[r.selectedPalette].length])):d.stroke(d.color(r.lineColor)),d.endShape()}},d.windowResized=()=>{d.resizeCanvas(d.windowWidth,d.windowHeight)}},[]),l=()=>o(!0),f=()=>o(!1),a=()=>{n(s),o(!0)};return B.jsxs("div",{className:"relative",children:[B.jsx(EV,{settings:r,setSettings:n,startAnimation:l,stopAnimation:f,resetAnimation:a}),B.jsx(h0,{sketch:c,settings:r,isAnimating:t})]})},IV=({settings:s,setSettings:r,startAnimation:n,stopAnimation:t,resetAnimation:o})=>{const[c,l]=be.useState(!0),[f,a]=be.useState(""),[d,_]=be.useState([]),[w,h]=be.useState(null),{currentUser:m}=Xo();be.useEffect(()=>{if(!m)return;const p=Ks(rs,`users/${m.uid}/shape-animation-settings`);Fv(p).then(y=>_(y.docs.map(S=>S.id))).catch(console.error)},[m]);const b=async()=>{if(!m||!f)return h({message:"Enter a name first.",type:"error"});const p=new Date().toISOString(),y={...s,presetName:f,userId:m.uid,timestamp:p};try{await Yo(gi(rs,`users/${m.uid}/shape-animation-settings/${f}`),y);const S=bp.unparse(Object.entries(y).map(([j,A])=>({setting:j,value:A})));await Od(La(Ua,`users/${m.uid}/shape-animation-settings/${f}.csv`),new Blob([S],{type:"text/csv"})),d.includes(f)||_(j=>[...j,f]),h({message:"Preset saved!",type:"success"})}catch(S){console.error(S),h({message:"Failed to save preset.",type:"error"})}},v=async()=>{if(!m||!f)return h({message:"Select a preset first.",type:"error"});try{const p=await Aj(gi(rs,`users/${m.uid}/shape-animation-settings/${f}`));p.exists()?(r(p.data()),h({message:"Preset loaded!",type:"success"})):h({message:"Preset not found.",type:"error"})}catch(p){console.error(p),h({message:"Failed to load preset.",type:"error"})}},g=p=>{const{name:y,value:S}=p.target;r(j=>({...j,[y]:S}))};return B.jsxs("div",{className:"fixed top-16 right-4 bottom-4 w-72 bg-white shadow-lg rounded-lg p-4 overflow-y-auto z-50",children:[B.jsx("button",{onClick:()=>l(p=>!p),className:"w-full bg-gray-200 text-gray-700 text-sm py-2 rounded mb-4",children:c?"Collapse Controls":"Expand Controls"}),B.jsx(_p.Collapse,{isOpened:c,children:B.jsxs("div",{className:"space-y-4",children:[B.jsxs("div",{className:"flex space-x-2 text-sm",children:[B.jsx("button",{onClick:n,className:"flex-1 bg-green-500 text-white py-2 rounded",children:"Start"}),B.jsx("button",{onClick:t,className:"flex-1 bg-red-500   text-white py-2 rounded",children:"Stop"}),B.jsx("button",{onClick:o,className:"flex-1 bg-gray-500  text-white py-2 rounded",children:"Reset"})]}),B.jsx("input",{type:"text",placeholder:"Preset name",value:f,onChange:p=>a(p.target.value),className:"w-full border px-2 py-1 rounded text-sm"}),B.jsxs("div",{className:"flex space-x-2 text-sm",children:[B.jsx("button",{onClick:b,className:"flex-1 bg-blue-600 text-white py-2 rounded",children:"Save Preset"}),B.jsx("button",{onClick:v,className:"flex-1 bg-yellow-600 text-white py-2 rounded",children:"Load Preset"})]}),B.jsxs("select",{value:f,onChange:p=>a(p.target.value),className:"w-full border px-2 py-1 rounded text-sm",children:[B.jsx("option",{value:"",children:"-- Select --"}),d.map(p=>B.jsx("option",{value:p,children:p},p))]}),w&&B.jsx("div",{className:`p-2 rounded text-sm ${w.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:w.message}),B.jsxs("div",{className:"space-y-1 text-sm",children:[B.jsx("label",{children:"Select Shape:"}),B.jsxs("select",{value:s.shapeType,onChange:p=>r(y=>({...y,shapeType:p.target.value})),className:"w-full border px-2 py-1 rounded",children:[B.jsx("option",{value:"circle",children:"Circle"}),B.jsx("option",{value:"square",children:"Square"}),B.jsx("option",{value:"triangle",children:"Triangle"}),B.jsx("option",{value:"chevron",children:"Chevron"}),B.jsx("option",{value:"diamond",children:"Diamond"})]})]}),B.jsxs("div",{className:"space-y-1 text-sm",children:[B.jsx("label",{children:"Direction:"}),B.jsxs("select",{value:s.direction,onChange:p=>r(y=>({...y,direction:p.target.value})),className:"w-full border px-2 py-1 rounded",children:[B.jsx("option",{value:"static",children:"Static"}),B.jsx("option",{value:"up",children:"Up"}),B.jsx("option",{value:"down",children:"Down"}),B.jsx("option",{value:"left",children:"Left"}),B.jsx("option",{value:"right",children:"Right"}),B.jsx("option",{value:"oscillateUpDown",children:"Oscillate Up/Down"}),B.jsx("option",{value:"oscillateRightLeft",children:"Oscillate L/R"}),B.jsx("option",{value:"circular",children:"Circular"}),B.jsx("option",{value:"3DVertical",children:"3D Vert."}),B.jsx("option",{value:"3DHorizontal",children:"3D Horz."})]})]}),s.direction==="circular"&&B.jsxs(B.Fragment,{children:[B.jsx(Ws,{label:"Rotation Speed",min:.01,max:1,step:.01,value:s.rotationSpeed,onChange:p=>r(y=>({...y,rotationSpeed:p}))}),B.jsx(Ws,{label:"Rotation Radius",min:10,max:500,value:s.rotationRadius,onChange:p=>r(y=>({...y,rotationRadius:p}))})]}),["oscillateUpDown","oscillateRightLeft","3DVertical","3DHorizontal"].includes(s.direction)&&B.jsx(Ws,{label:"Oscillation Range",min:0,max:window.innerWidth/4,value:s.oscillationRange,onChange:p=>r(y=>({...y,oscillationRange:p}))}),B.jsx(Ws,{label:"Angle ()",min:0,max:360,step:1,value:s.angle*180/Math.PI,onChange:p=>r(y=>({...y,angle:p*Math.PI/180}))}),B.jsx(Ws,{label:"Speed",min:1,max:20,step:1,value:s.speed,onChange:p=>r(y=>({...y,speed:p}))}),B.jsx(Ws,{label:"Size",min:20,max:200,step:1,value:s.size,onChange:p=>r(y=>({...y,size:p}))}),s.layoutSelect==="random"&&B.jsx(Ws,{label:"Number of Shapes",min:1,max:100,value:s.numShapes,onChange:p=>r(y=>({...y,numShapes:p}))}),B.jsxs("div",{className:"space-y-1 text-sm",children:[B.jsx("label",{children:"Background Color:"}),B.jsx("input",{name:"bgColor",type:"color",value:s.bgColor,onChange:g,className:"w-full h-8 p-0 border rounded"})]}),B.jsxs("div",{className:"space-y-1 text-sm",children:[B.jsx("label",{children:"Shape Color:"}),B.jsx("input",{name:"shapeColor",type:"color",value:s.shapeColor,onChange:g,className:"w-full h-8 p-0 border rounded"})]}),s.layoutSelect==="checkboard"&&B.jsxs("div",{className:"space-y-1 text-sm",children:[B.jsx("label",{children:"Second Color:"}),B.jsx("input",{name:"secondColor",type:"color",value:s.secondColor,onChange:g,className:"w-full h-8 p-0 border rounded"})]}),B.jsxs("div",{className:"space-y-1 text-sm",children:[B.jsx("label",{children:"Palette:"}),B.jsxs("select",{value:s.palette,onChange:p=>r(y=>({...y,palette:p.target.value})),className:"w-full border px-2 py-1 rounded",children:[B.jsx("option",{value:"none",children:"None"}),B.jsx("option",{value:"rainbow",children:"Rainbow"}),B.jsx("option",{value:"pastel",children:"Pastel"})]})]}),B.jsxs("div",{className:"space-y-1 text-sm",children:[B.jsx("label",{children:"Layout:"}),B.jsxs("select",{value:s.layoutSelect,onChange:p=>r(y=>({...y,layoutSelect:p.target.value})),className:"w-full border px-2 py-1 rounded",children:[B.jsx("option",{value:"random",children:"Random"}),B.jsx("option",{value:"regular",children:"Regular"}),B.jsx("option",{value:"checkboard",children:"Checkboard"})]})]}),s.layoutSelect!=="random"&&B.jsxs(B.Fragment,{children:[B.jsx(Ws,{label:"Row Offset",min:0,max:100,value:s.rowOffset,onChange:p=>r(y=>({...y,rowOffset:p}))}),B.jsx(Ws,{label:"Col Offset",min:0,max:100,value:s.columnOffset,onChange:p=>r(y=>({...y,columnOffset:p}))}),B.jsx(Ws,{label:"Row Distance",min:0,max:100,value:s.rowDistance,onChange:p=>r(y=>({...y,rowDistance:p}))}),B.jsx(Ws,{label:"Col Distance",min:0,max:100,value:s.columnDistance,onChange:p=>r(y=>({...y,columnDistance:p}))})]})]})})]})},ST=()=>{const s={shapeType:"circle",numShapes:10,size:50,direction:"static",angle:0,speed:5,rotationSpeed:.02,rotationRadius:150,bgColor:"#FFFFFF",shapeColor:"#007BFF",secondColor:"#FF0000",palette:"none",rowOffset:0,columnOffset:0,rowDistance:50,columnDistance:50,layoutSelect:"random",oscillationRange:100},[r,n]=be.useState(s),[t,o]=be.useState(!0),c=be.useCallback(d=>{let _=[],w=0,h=0;function m(){w=Math.floor(d.height/(r.size+r.rowDistance)),h=Math.floor(d.width/(r.size+r.columnDistance))}function b(){_=[];const g=r.layoutSelect==="random"?r.numShapes:w*h,p=new Array(g);if(r.layoutSelect==="checkboard")for(let y=0;y<g;y++){const S=Math.floor(y/h),j=y%h,A=(S+j)%2===0;p[y]=d.color(A?r.shapeColor:r.secondColor)}else if(r.palette==="rainbow")for(let y=0;y<g;y++){const S=y/g*360;p[y]=d.color(S,100,100)}else if(r.palette==="pastel")for(let y=0;y<g;y++){const S=y/g*360;p[y]=d.color(S,60,80)}else for(let y=0;y<g;y++)p[y]=d.color(r.shapeColor);for(let y=0;y<g;y++)_.push(new v(d,r,y,w,h,p[y])),_.push(new v(d,r,y,w,h,p[y]))}d.setup=()=>{d.createCanvas(d.windowWidth,d.windowHeight),d.colorMode(d.HSB,360,100,100),m(),b()},d.windowResized=()=>{d.resizeCanvas(d.windowWidth,d.windowHeight),m(),b()},d.updateWithProps=g=>{g.settings&&(Object.assign(r,g.settings),m(),b()),g.isAnimating!==void 0&&(g.isAnimating?d.loop():d.noLoop())},d.draw=()=>{d.background(r.bgColor);for(const g of _)g.move(),g.display()};class v{constructor(p,y,S,j,A,N){Qn(this,"p5");Qn(this,"settings");Qn(this,"index");Qn(this,"rows");Qn(this,"cols");Qn(this,"x");Qn(this,"y");Qn(this,"angle");Qn(this,"speed");Qn(this,"fillColor");this.p5=p,this.settings=y,this.index=S,this.rows=j,this.cols=A,this.fillColor=N,this.initPosition()}initPosition(){const{layoutSelect:p,size:y,columnDistance:S,rowDistance:j,rowOffset:A,columnOffset:N}=this.settings;if(p==="random")this.x=this.p5.random(this.p5.width),this.y=this.p5.random(this.p5.height);else{const C=Math.floor(this.p5.width/(y+S));Math.floor(this.p5.height/(y+j));const T=this.index%C,R=Math.floor(this.index/C),P=y+S,k=y+j;this.x=T*P+R*A,this.y=R*k+T*N}this.angle=this.settings.angle,this.speed=this.settings.speed}move(){switch(this.settings.direction){case"up":this.y-=this.speed;break;case"down":this.y+=this.speed;break;case"left":this.x-=this.speed;break;case"right":this.x+=this.speed;break;case"oscillateUpDown":this.y+=Math.sin(this.p5.frameCount*.05)*this.settings.speed*.01*this.settings.oscillationRange;break;case"oscillateRightLeft":this.x+=Math.sin(this.p5.frameCount*.05)*this.settings.speed*.01*this.settings.oscillationRange;break;case"circular":this.x+=Math.cos(this.p5.frameCount*this.settings.rotationSpeed*.001+this.index)*this.settings.rotationRadius*.1,this.y+=Math.sin(this.p5.frameCount*this.settings.rotationSpeed*.001+this.index)*this.settings.rotationRadius*.1;break}this.x>this.p5.width&&(this.x=0),this.x<0&&(this.x=this.p5.width),this.y>this.p5.height&&(this.y=0),this.y<0&&(this.y=this.p5.height)}display(){switch(this.p5.push(),this.p5.translate(this.x,this.y),this.p5.rotate(this.angle),this.p5.fill(this.fillColor),this.settings.shapeType){case"circle":this.p5.ellipse(0,0,this.settings.size);break;case"square":this.p5.rect(0,0,this.settings.size,this.settings.size);break;case"triangle":this.p5.triangle(-this.settings.size/2,this.settings.size/2,this.settings.size/2,this.settings.size/2,0,-this.settings.size/2);break;case"chevron":this.p5.beginShape(),this.p5.vertex(-this.settings.size/2,this.settings.size/2),this.p5.vertex(0,-this.settings.size/2),this.p5.vertex(this.settings.size/2,this.settings.size/2),this.p5.vertex(this.settings.size/4,this.settings.size/2),this.p5.vertex(0,0),this.p5.vertex(-this.settings.size/4,this.settings.size/2),this.p5.endShape(this.p5.CLOSE);break;case"diamond":this.p5.beginShape(),this.p5.vertex(0,-this.settings.size/2),this.p5.vertex(this.settings.size/2,0),this.p5.vertex(0,this.settings.size/2),this.p5.vertex(-this.settings.size/2,0),this.p5.endShape(this.p5.CLOSE);break}this.p5.pop()}}},[]),l=()=>o(!0),f=()=>o(!1),a=()=>{n(s),o(!0)};return B.jsxs("div",{className:"relative",children:[B.jsx(IV,{settings:r,setSettings:n,startAnimation:l,stopAnimation:f,resetAnimation:a}),B.jsx(h0,{sketch:c,settings:r,isAnimating:t})]})},kV=({settings:s,setSettings:r,startAnimation:n,stopAnimation:t,resetAnimation:o})=>{const[c,l]=be.useState(!0),{currentUser:f}=Xo(),[a,d]=be.useState(""),[_,w]=be.useState({message:"",type:"success"}),h=(p,y)=>{const S=[...s.colors];S[p]=y,r(j=>({...j,colors:S}))},m=p=>{r(y=>({...y,duration:parseFloat(p.target.value)}))},b=p=>{r(y=>({...y,animationStyle:p.target.value}))},v=async()=>{if(!a){w({message:"Please provide a name for the preset.",type:"error"});return}const p=new Date,y=p.toLocaleString(),S={...s,presetName:a,userId:f==null?void 0:f.uid,timestamp:p.toISOString(),localDateTime:y};try{const j=gi(Ks(rs,`users/${f==null?void 0:f.uid}/color-animation-settings`));await Yo(j,S);const A=Object.keys(s).map(R=>({setting:R,value:s[R]})),N=bp.unparse(A),C=new Blob([N],{type:"text/csv;charset=utf-8;"}),T=La(Ua,`users/${f==null?void 0:f.uid}/color-animation-settings/${p.toISOString()}.csv`);await Od(T,C),w({message:"Settings saved successfully!",type:"success"})}catch(j){console.error("Error saving settings:",j),w({message:"Error saving settings. Please try again.",type:"error"})}},g=async()=>{if(!a){w({message:"Please provide the name of the preset to load.",type:"error"});return}try{const p=Ks(rs,`users/${f==null?void 0:f.uid}/color-animation-settings`),y=w3(p,x3("presetName","==",a)),S=await Fv(y);if(S.empty)w({message:"No settings found with that preset name.",type:"error"});else{const A=S.docs[0].data();r(A),w({message:"Settings loaded successfully!",type:"success"})}}catch(p){console.error("Error loading settings:",p),w({message:"Error loading settings. Please try again.",type:"error"})}};return B.jsxs("div",{className:`fixed right-4 top-2 p-4 rounded ${c?"shadow-lg bg-transparent":""} w-60 z-50 h-full overflow-y-auto`,children:[B.jsx("button",{onClick:()=>l(!c),className:"mb-2 bg-gray-200 p-2 border rounded w-full",children:c?"Collapse Controls":"Expand Controls"}),B.jsx(_p.Collapse,{isOpened:c,children:B.jsxs("div",{className:"space-y-4",children:[B.jsxs("div",{className:"flex space-x-2",children:[B.jsx("button",{onClick:n,className:"bg-green-500 text-white p-2 rounded w-1/3",children:"Start"}),B.jsx("button",{onClick:t,className:"bg-red-500 text-white p-2 rounded w-1/3",children:"Stop"}),B.jsx("button",{onClick:o,className:"bg-gray-500 text-white p-2 rounded w-1/3",children:"Reset"})]}),B.jsx("div",{className:"flex space-x-2 mt-2",children:B.jsx("input",{type:"text",placeholder:"Preset Name",value:a,onChange:p=>d(p.target.value),className:"border p-2 rounded w-full"})}),B.jsxs("div",{className:"flex space-x-2 mt-2",children:[B.jsx("button",{onClick:v,className:"bg-blue-500 text-white p-2 rounded w-1/2",children:"Save"}),B.jsx("button",{onClick:g,className:"bg-yellow-500 text-white p-2 rounded w-1/2",children:"Load"})]}),_.message&&B.jsx("div",{className:`alert ${_.type==="error"?"bg-red-500":"bg-green-500"} text-white p-2 rounded`,children:_.message}),[0,1,2,3].map(p=>B.jsxs("div",{className:"control-group",children:[B.jsx("label",{className:"block mb-2",children:`Color ${p+1}:`}),B.jsx("input",{type:"color",value:s.colors[p],onChange:y=>h(p,y.target.value),className:"w-full"})]},p)),B.jsxs("div",{className:"control-group",children:[B.jsx("label",{className:"block mb-2",children:"Transition Duration (seconds):"}),B.jsx("input",{type:"range",min:"1",max:"60",value:s.duration,onChange:m,className:"w-full"})]}),B.jsxs("div",{className:"control-group",children:[B.jsx("label",{className:"block mb-2",children:"Animation Style:"}),B.jsxs("select",{value:s.animationStyle,onChange:b,className:"border p-2 rounded w-full",children:[B.jsx("option",{value:"sine",children:"Sine"}),B.jsx("option",{value:"linear",children:"Linear"}),B.jsx("option",{value:"circular",children:"Circular"}),B.jsx("option",{value:"fractal",children:"Fractal"})]})]})]})})]})},MV=({setCurrentAnimation:s})=>{const[r,n]=be.useState({colors:["#FF0000","#00FF00","#0000FF","#FFFF00"],animationStyle:"sine",duration:1}),t=be.useCallback(o=>{let c=0;o.setup=()=>{o.createCanvas(o.windowWidth,o.windowHeight),o.noStroke()},o.updateWithProps=l=>{l.settings&&n(l.settings)},o.draw=()=>{o.clear();const l=o.color(r.colors[0]),f=o.color(r.colors[1]),a=o.color(r.colors[2]),d=o.color(r.colors[3]);for(let _=0;_<=o.width;_+=10)for(let w=0;w<=o.height;w+=10){let h=0;switch(r.animationStyle){case"sine":h=o.map(o.sin(c+_*.01+w*.01),-1,1,0,1);break;case"linear":h=o.map(_+w,0,o.width+o.height,0,1);break;case"circular":const v=o.dist(_,w,o.width/2,o.height/2);h=o.map(v,0,o.width/2,0,1);break;case"fractal":const g=.005;h=o.noise(_*g,w*g,c*g);break;default:h=o.map(o.sin(c+_*.01+w*.01),-1,1,0,1)}const m=o.lerpColor(l,f,h),b=o.lerpColor(a,d,h);o.fill(o.lerpColor(m,b,h)),o.rect(_,w,10,10)}c+=.01*r.duration},o.windowResized=()=>{o.resizeCanvas(o.windowWidth,o.windowHeight)}},[]);return B.jsxs("div",{className:"relative",children:[B.jsxs("div",{className:"flex justify-center mb-4",children:[B.jsx("button",{onClick:()=>s("multifunction"),className:"p-2 mx-2 bg-gray-200",children:"Multifunction Animation"}),B.jsx("button",{onClick:()=>s("shape"),className:"p-2 mx-2 bg-gray-200",children:"Shape Animation"}),B.jsx("button",{onClick:()=>s("color"),className:"p-2 mx-2 bg-blue-500 text-white",children:"Color Animation"})]}),B.jsx(kV,{settings:r,setSettings:n}),B.jsx(h0,{sketch:t,settings:r})]})},Bf={backgroundColor:"blue",color:"white",border:"none",borderRadius:"5px",padding:"8px 12px",margin:"5px",cursor:"pointer",textAlign:"center",fontSize:"12px",fontWeight:"bold",transition:"background-color 0.3s ease"},PV=({displayText:s,setDisplayText:r,style:n,buttonContainerStyle:t})=>{const o=["It is a truth universally acknowledged, that a single man in possession of a good fortune, must be in want of a wife - Jane Austen.","All happy families are alike; each unhappy family is unhappy in its own way - Leo Tolstoy.","It was the best of times, it was the worst of times, it was the age of wisdom, it was the age of foolishness - Charles Dickens.","Call me Ishmael - Herman Melville.","It was a bright cold day in April, and the clocks were striking thirteen - George Orwell.","I am an invisible man - Ralph Ellison.","The sun shone, having no alternative, on the nothing new - Samuel Beckett.","If you really want to hear about it, the first thing you'll probably want to know is where I was born - J.D. Salinger.","It was a pleasure to burn - Ray Bradbury.","You don't know about me without you have read a book by the name of The Adventures of Tom Sawyer - Mark Twain.","When he was nearly thirteen, my brother Jem got his arm badly broken at the elbow - Harper Lee.","I had the story, bit by bit, from various people, and, as generally happens in such cases, each time it was a different story - Edith Wharton.","In my younger and more vulnerable years my father gave me some advice that I've been turning over in my mind ever since - F. Scott Fitzgerald.","You better not never tell nobody but God - Alice Walker.","There was no possibility of taking a walk that day - Charlotte Bront.","The past is a foreign country; they do things differently there - L.P. Hartley.","All children, except one, grow up - J.M. Barrie.","It was love at first sight - Joseph Heller.","Into the face of the young man who sat on the terrace of the Hotel Magnifique at Cannes there crept a look of furtive shame, the shifty, hangdog look which announces that an Englishman is about to speak French - P.G. Wodehouse.","A screaming comes across the sky - Thomas Pynchon."],c=["Veni, vidi, vici - Julius Caesar.","Carpe diem - Horace.","Amor vincit omnia - Virgil.","Audere est facere - To dare is to do.","Faber est suae quisque fortunae - Every man is the artisan of his own fortune.","Alea iacta est - The die is cast - Julius Caesar.","In vino veritas - In wine, there is truth.","Si vis pacem, para bellum - If you want peace, prepare for war.","Vivere est cogitare - To live is to think - Cicero.","Ad astra per aspera - Through hardships to the stars.","Dulce et decorum est pro patria mori - It is sweet and fitting to die for one's country - Horace.","Non ducor, duco - I am not led, I lead.","Sapere aude - Dare to be wise.","Vox populi, vox Dei - The voice of the people is the voice of God.","Panem et circenses - Bread and circuses - Juvenal.","Aurora Musis amica - Dawn is a friend of the muses.","Lux et veritas - Light and truth.","O tempora, o mores! - Oh the times! Oh the customs! - Cicero.","Per aspera ad astra - Through hardships to the stars.","Veritas vos liberabit - The truth will set you free."];return B.jsxs("div",{style:{width:"max-content",padding:"1rem",backgroundColor:"white",borderRadius:"0.5rem",boxShadow:"0 4px 8px rgba(0,0,0,0.1)",...n},children:[B.jsxs("div",{style:{display:"flex",gap:"0.5rem",...t},children:[B.jsx("button",{onClick:()=>r(o[Math.floor(Math.random()*o.length)]),style:Bf,children:"Historic Passage"}),B.jsx("button",{onClick:()=>r(c[Math.floor(Math.random()*c.length)]),style:Bf,children:"Latin Text"})]}),B.jsx("div",{style:{marginTop:"0.5rem",textAlign:"center"},children:s||"Select an option to display text"})]})},jT=({placeholder:s,displayText:r,setDisplayText:n,saveKeystrokeData:t})=>{const[o,c]=be.useState(""),[l,f]=be.useState([]),[a,d]=be.useState("Arial"),[_,w]=be.useState(16),[h,m]=be.useState(!1),[b,v]=be.useState("#000000"),[g,p]=be.useState("#FFFFFF"),[y,S]=be.useState(1),[j,A]=be.useState(!0),N=be.useRef(l);let C=null,T=null;be.useEffect(()=>{N.current=l},[l]);const R=q=>{const H=Date.now();if(!q.key.match(/^.$/))return;const W=T!==null?H-T:0,Q=C!==null?H-C:0;f(J=>[...J,{key:q.key,pressTime:H,releaseTime:null,holdTime:null,lagTime:W,totalLagTime:Q}]),C=H},P=q=>{const H=Date.now(),W=N.current.map(Q=>Q.key===q.key&&Q.releaseTime===null?{...Q,releaseTime:H,holdTime:H-Q.pressTime}:Q);f(W),T=H},k=q=>{c(q.target.value)},F=()=>{const q=D(o,r);t({keyData:l,errors:q})},D=(q,H)=>{const W=q.split(" "),Q=H.split(" ");let J=0;return W.forEach((Z,K)=>{Z!==Q[K]&&J++}),J};return be.useEffect(()=>(document.addEventListener("keydown",R),document.addEventListener("keyup",P),()=>{document.removeEventListener("keydown",R),document.removeEventListener("keyup",P)}),[]),B.jsxs("div",{className:"relative w-5/6  right-30 ",children:[B.jsx("div",{className:"flex flex-row justify-between items-start w-full space-x-4 p-4",children:B.jsx("div",{className:"flex-1 text-xs",children:B.jsx("textarea",{value:o,placeholder:s,onChange:k,style:{width:"100%",height:"300px",fontFamily:a,fontSize:`${_}px`,fontWeight:h?"bold":"normal",color:b,backgroundColor:`rgba(${parseInt(g.slice(1,3),16)}, ${parseInt(g.slice(3,5),16)}, ${parseInt(g.slice(5,7),16)}, ${y})`,border:"1px solid #ccc",outline:"none",padding:"10px",borderRadius:"4px",resize:"vertical",overflowY:"scroll"}})})}),B.jsx("button",{onClick:()=>A(!j),className:"flex mb-200 text-xs  bg-gray-100 p-2 border rounded w-1/4 ",children:j?" Hide Text Control":"Show Text Controls"}),B.jsx(_p.Collapse,{isOpened:j,children:B.jsxs("div",{className:"flex flex-wrap mb-200  text-xs bg-gray-200 p-200 border rounded w-1/4",children:[B.jsxs("div",{className:"w-full md:w-1/4",children:[B.jsx("label",{children:"Font:"}),B.jsxs("select",{value:a,onChange:q=>d(q.target.value),className:"border p-2 rounded w-full",children:[B.jsx("option",{value:"Arial",children:"Arial"}),B.jsx("option",{value:"Verdana",children:"Verdana"}),B.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),B.jsx("option",{value:"Courier New",children:"Courier New"}),B.jsx("option",{value:"Georgia",children:"Georgia"})]})]}),B.jsxs("div",{className:"w-full md:w-1/4 text -xs",children:[B.jsx("label",{children:"Font Size:"}),B.jsx("select",{value:_,onChange:q=>w(parseInt(q.target.value)),className:"border p-2 rounded w-full",children:[...Array(31)].map((q,H)=>B.jsx("option",{value:10+H,children:10+H},H))})]}),B.jsxs("div",{className:"w-half md:w-1/4 flex items-center space-x-2",children:[B.jsx("label",{children:"Bold:"}),B.jsx("input",{type:"checkbox",checked:h,onChange:q=>m(q.target.checked),className:"border p-2 rounded"})]}),B.jsxs("div",{className:"w-full md:w-1/4",children:[B.jsx("label",{children:"Text Color:"}),B.jsx("input",{type:"color",value:b,onChange:q=>v(q.target.value),className:"w-full"})]}),B.jsxs("div",{className:"w-full md:w-1/4",children:[B.jsx("label",{children:"Background Color:"}),B.jsx("input",{type:"color",value:g,onChange:q=>p(q.target.value),className:"w-full"})]}),B.jsxs("div",{className:"w-full md:w-1/4",children:[B.jsx("label",{children:"Background Opacity:"}),B.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:y,onChange:q=>S(parseFloat(q.target.value)),className:"border p-2 rounded w-full"})]})]})}),B.jsxs("div",{className:"bg-gray-200 p-200 border rounded w-1/4",children:[B.jsx("button",{onClick:F,style:Bf,children:"Submit"}),B.jsx("button",{onClick:()=>c(""),style:Bf,children:"Reset"})]})]})},DV=()=>{const[s,r]=be.useState("multifunction"),{currentUser:n}=Xo(),[t,o]=be.useState(null),[c,l]=be.useState({}),[f,a]=be.useState("");be.useEffect(()=>{if(!t)return;const _=setTimeout(()=>o(null),3e3);return()=>clearTimeout(_)},[t]);const d=async _=>{try{const w=new Date().toISOString(),h=gi(Ks(rs,`users/${n.uid}/keystroke-data`));await Yo(h,{keyData:_,timestamp:w}),o({message:"Keystroke data saved successfully!",type:"success"})}catch(w){console.error("Error saving keystroke data:",w),o({message:"Error saving keystroke data. Are you login? Please try again.",type:"error"})}};return B.jsxs("div",{className:"relative w-full ",children:[B.jsxs("div",{className:"flex justify-center text-sm text-gray-600 rounded p-2 mb-4 w-full",children:[B.jsx(Md,{}),B.jsx("button",{onClick:()=>r("multifunction"),className:`p-2 mx-2 ${s==="multifunction"?"bg-blue-500 text-white rounded":"bg-gray-200"}`,children:"Multifunction Animation"}),B.jsx("button",{onClick:()=>r("shape"),className:`p-2 mx-2 ${s==="shape"?"bg-blue-500 text-white rounded":"bg-gray-200"}`,children:"Shape Animation"}),B.jsx("button",{onClick:()=>r("color"),className:`p-2 mx-2 ${s==="color"?"bg-blue-500 text-m-white rounded":"bg-gray-200"}`,children:"Color Animation"})]}),s==="multifunction"&&B.jsx(xT,{settings:c,setSettings:l}),s==="shape"&&B.jsx(ST,{settings:c,setSettings:l}),s==="color"&&B.jsx(MV,{settings:c,setSettings:l}),B.jsxs("div",{className:"relative w-full ml-52  mt-4 ",children:[B.jsx(jT,{placeholder:"Type here",displayText:f,setDisplayText:a,saveKeystrokeData:d}),B.jsxs("div",{className:"absolute center-1920 right-22 w-1/3 z-7 p-4",children:[B.jsx(PV,{displayText:f,setDisplayText:a}),t&&B.jsx("div",{className:"mb-2 w-1/2 text-left",children:B.jsx("div",{className:`
          inline-block text-white text-xs px-4 py-2 rounded shadow
          ${t.type==="error"?"bg-red-500":"bg-green-500"}
        `,children:t.message})}),"   "]})]})]})};function NV(){const[s]=nR(),r=ms(),[n,t]=be.useState({text:"Verifying your email",type:"info"});return be.useEffect(()=>{const o=s.get("oobCode"),c=s.get("mode");(async()=>{try{if(!o||c!=="verifyEmail"){t({text:"Invalid verification link.",type:"error"});return}await HI(or,o),await zI(or,o),or.currentUser&&await Wf(or.currentUser),t({text:"Email verified! You can log in now.",type:"success"}),setTimeout(()=>r("/login"),1200)}catch(l){t({text:`Try verifying again. ${(l==null?void 0:l.code)||""} ${(l==null?void 0:l.message)||""}`,type:"error"})}})()},[s,r]),B.jsx("div",{className:"max-w-md mx-auto mt-10 space-y-4",children:B.jsx(sn,{message:n.text,type:n.type})})}const Kh=[{name:"testerId",label:"Tester ID",type:"input",inputType:"text",placeholder:"caltech-alias or initials",validate:[Qt]},{name:"email",label:"Email (optional)",type:"input",inputType:"email",validate:[]},{name:"sessionLabel",label:"Session Label",type:"input",inputType:"text",placeholder:"e.g., debug run #1"},{name:"consent",label:"Consent to store anonymized data",type:"select",options:["Yes","No"],validate:[Qt]},{name:"uiClarity",label:"UI clarity",type:"select",options:["1","2","3","4","5"],validate:[Qt]},{name:"performanceSmoothness",label:"Performance smoothness",type:"select",options:["1","2","3","4","5"],validate:[Qt]},{name:"difficultyCalibration",label:"Difficulty calibration",type:"select",options:["1","2","3","4","5"],validate:[Qt]},{name:"overall",label:"Overall",type:"select",options:["1","2","3","4","5"],validate:[Qt]},{name:"deviceType",label:"Device type",type:"select",options:["Laptop","Desktop","Tablet","Phone"],validate:[Qt]},{name:"os",label:"OS",type:"input",inputType:"text",validate:[Qt]},{name:"browser",label:"Browser",type:"input",inputType:"text",validate:[Qt]},{name:"screen",label:"Screen",type:"input",inputType:"text",placeholder:"e.g., 2560x1440 @ 2x",validate:[Qt]},{name:"connection",label:"Connection",type:"select",options:["WiFi","Ethernet","Cellular"]},{name:"inputMethod",label:"Input method",type:"select",options:["Builtin laptop keyboard","External USB keyboard","Bluetooth keyboard","Onscreen keyboard"]},{name:"keyboardLayout",label:"Keyboard layout",type:"select",options:["US QWERTY","UK","DVORAK","COLEMAK","Other"]},{name:"distanceFromScreenCm",label:"Distance from screen (cm)",type:"input",inputType:"number",placeholder:"e.g., 60"},{name:"posture",label:"Posture / seating",type:"select",options:["Desk chair","Standing desk","Couch/bed","Other"]},{name:"therapyMode",label:"Therapy mode",type:"select",options:["Baseline","Stabilization"]},{name:"movingBackground",label:"Moving background",type:"select",options:["On","Off"],validate:[Qt]},{name:"backgroundPattern",label:"Background pattern",type:"select",options:["Stripes","Dots","Grid","Image/Video","Solid color","Other"]},{name:"backgroundDirection",label:"Background direction",type:"select",options:["Left  Right","Up  Down","Diagonal","None/Static"]},{name:"backgroundSpeed",label:"Background speed",type:"select",options:["Very slow","Slow","Medium","Fast","Very fast"]},{name:"fontSizePx",label:"Font size (px)",type:"input",inputType:"number",placeholder:"e.g., 20"},{name:"contrastLevel",label:"Contrast level",type:"select",options:["Low","Medium","High"]},{name:"theme",label:"Color theme",type:"select",options:["Light","Dark","High contrast"]},{name:"tremorMode",label:"Tremor mode",type:"select",options:["Stabilization","Baseline","N/A"],validate:[Qt]},{name:"stabilizationStrength",label:"Stabilization strength (0100)",type:"input",inputType:"number",placeholder:"e.g., 60"},{name:"smoothingWindowMs",label:"Smoothing window (ms)",type:"input",inputType:"number",placeholder:"e.g., 150"},{name:"estimatedLatencyMs",label:"Estimated latency (ms)",type:"input",inputType:"number",placeholder:"e.g., 25"},{name:"typingTask",label:"Typing task",type:"select",options:["Copy provided text","Free typing","Random words","Numbers/symbols"]},{name:"textDifficulty",label:"Text difficulty",type:"select",options:["Simple","Intermediate","Complex"]},{name:"sessionDurationMin",label:"Session duration (min)",type:"input",inputType:"number",placeholder:"e.g., 10"},{name:"tremorBefore",label:"Tremor severity BEFORE (010)",type:"select",options:["0","1","2","3","4","5","6","7","8","9","10"]},{name:"tremorAfter",label:"Tremor severity AFTER (010)",type:"select",options:["0","1","2","3","4","5","6","7","8","9","10"]},{name:"fatigueLevel",label:"Fatigue (010)",type:"select",options:["0","1","2","3","4","5","6","7","8","9","10"]},{name:"painLevel",label:"Pain/discomfort (010)",type:"select",options:["0","1","2","3","4","5","6","7","8","9","10"]},{name:"nauseaLevel",label:"Motion sickness / nausea (010)",type:"select",options:["0","1","2","3","4","5","6","7","8","9","10"]},{name:"visionStrain",label:"Eye strain (010)",type:"select",options:["0","1","2","3","4","5","6","7","8","9","10"]},{name:"biggestPainPoint",label:"Biggest pain point",type:"textareascroll",placeholder:"What slowed you down the most?"},{name:"mostHelpfulSetting",label:"Most helpful therapy setting",type:"textareascroll"},{name:"unexpectedBehavior",label:"Any unexpected behaviors or glitches?",type:"textareascroll"},{name:"reproSteps",label:"If a bug occurred, how can we reproduce it?",type:"textareascroll"},{name:"improvementIdeas",label:"Top improvement ideas",type:"textareascroll"},{name:"wouldRecommend",label:"Would you recommend others test this build?",type:"select",options:["Yes","Maybe","No"]},{name:"followUpOk",label:"OK to follow up via email?",type:"select",options:["Yes","No"]}],LV=()=>{const s=ms(),{currentUser:r}=Xo(),[n,t]=be.useState({}),[o,c]=be.useState({}),[l,f]=be.useState(null),a=w=>{const{name:h,value:m}=w.target;t(v=>({...v,[h]:m}));const b=Kh.find(v=>v.name===h);if(b&&b.validate){const v=b.validate.map(g=>g(m,n)).flat();c(g=>({...g,[h]:v}))}else c(v=>({...v,[h]:[]}));f(null)},d=()=>{const w={};let h=!1;return Kh.forEach(m=>{const b=n[m.name];if(m.validate){const v=m.validate.map(g=>g(b,n)).flat();v.length>0&&(w[m.name]=v,h=!0)}}),c(w),!h},_=async w=>{if(w.preventDefault(),!d()){f({message:"Please fill all required fields.",type:"error"});return}try{const h=new Date,m=h.toLocaleString(),b={...n,userId:(r==null?void 0:r.uid)||"anonymous",timestamp:h.toISOString(),localDateTime:m},v=gi(Ks(rs,`users/${(r==null?void 0:r.uid)||"anonymous"}/progress-feedback`));await Yo(v,b);const p=Object.keys(b).map(S=>{const j=b[S],A=Array.isArray(j)?j.join(";"):j,N=String(A).replaceAll(`
`," ").replaceAll("\r"," ").replace(/,/g,";");return`${S},${N}`}).join(`
`),y=La(Ua,`users/${(r==null?void 0:r.uid)||"anonymous"}/progress-feedback/${h.toISOString()}.csv`);await qv(y,p),f({message:"Feedback submitted successfully.",type:"success"}),setTimeout(()=>s("/thank-you",{state:{type:"progress-feedback"}}),1500)}catch(h){console.error("Error submitting progress feedback:",h),f({message:"Error submitting data. Please try again.",type:"error"})}};return B.jsxs(In,{bgColor:"bg-blue-50",children:[B.jsx("h2",{className:"text-3xl font-bold mb-4 text-center",children:"Debug Feedback & Progress"}),B.jsx(Md,{}),B.jsxs("form",{onSubmit:_,children:[B.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-24",children:Kh.filter(w=>w.type!=="textareascroll").map(w=>w.type==="input"?B.jsx(Fn,{label:w.label,name:w.name,type:w.inputType,value:n[w.name]||"",onChange:a,placeholder:w.placeholder,errors:o[w.name]},w.name):w.type==="select"?B.jsx(Ii,{label:w.label,name:w.name,value:n[w.name]||"",onChange:a,options:w.options,errors:o[w.name]},w.name):w.type==="multiSelect"?B.jsx("div",{},w.name):null)}),B.jsxs("div",{className:"mt-4",children:[B.jsx("h3",{className:"text-xl font-bold mb-4",children:"Additional Information"}),Kh.filter(w=>w.type==="textareascroll").map(w=>B.jsx(Sa,{label:w.label,name:w.name,value:n[w.name]||"",onChange:a,errors:o[w.name]},w.name))]}),l&&B.jsx(sn,{message:l.message,type:l.type}),B.jsx("div",{className:"flex justify-between items-center mt-4",children:B.jsx(An,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 border border-blue-700",children:"Submit"})})]})]})},UV=()=>B.jsxs("div",{className:"text-justify",children:[B.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Clinical Trial Disclaimer and Acknowledgment of Risk"}),B.jsx("p",{children:"Welcome to our clinical trial aimed at stabilizing Parkinson's disease and other tremor disorders through innovative visual therapy. Our approach involves altering background textures and movements to potentially reduce tremor severity. This therapeutic intervention is designed to be engaging and enjoyable for participants, resembling a game-like experience."}),B.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Purpose and Scope"}),B.jsx("p",{children:"The purpose of this clinical trial is to evaluate the effectiveness of visual therapy in stabilizing tremors in individuals with Parkinson's disease and other tremor disorders. Participants will be exposed to various visual stimuli that may help reduce the severity of their tremors."}),B.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Potential Risks and Discomforts"}),B.jsx("p",{children:"While the therapy is designed to be safe and enjoyable, there are potential risks and discomforts that participants should be aware of:"}),B.jsxs("ul",{className:"list-disc list-inside ml-4",children:[B.jsx("li",{children:"Exposure to visual stimuli may trigger migraines in susceptible individuals."}),B.jsx("li",{children:"Participants with a history of epilepsy or other seizure disorders may be at risk of experiencing seizures due to visual stimuli."}),B.jsx("li",{children:"Other unforeseen risks associated with visual therapy and exposure to dynamic background textures."})]}),B.jsx("p",{children:"Participants are encouraged to report any discomfort or adverse reactions to the study staff immediately."}),B.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Confidentiality and Privacy"}),B.jsx("p",{children:"We are committed to protecting the privacy and confidentiality of all participants. All data collected during this study will be stored securely and only accessible to authorized personnel. Personal information will not be shared with any third parties without your explicit consent, except as required by law. This study is compliant with the Health Insurance Portability and Accountability Act (HIPAA) regulations to ensure the confidentiality and security of your health information."}),B.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Voluntary Participation"}),B.jsx("p",{children:"Your participation in this clinical trial is entirely voluntary. You may withdraw from the study at any time without any penalty or loss of benefits to which you are otherwise entitled. If you decide to withdraw, please inform the study staff immediately."}),B.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Acknowledgment of Understanding and Consent"}),B.jsx("p",{children:"By signing this form, you acknowledge that you have read and understood the information provided above, including the potential risks and discomforts associated with participating in this study. You agree to participate in this clinical trial and consent to the collection and use of your data as described."}),B.jsx("p",{children:"If you have any questions or concerns about this study or your rights as a participant, please contact the study staff at [Contact Information]."})]}),FV=()=>{const s=ms(),[r,n]=be.useState(!1),[t,o]=be.useState(""),[c,l]=be.useState(""),f=_=>{n(_.target.checked)},a=_=>{o(_.target.value)},d=async _=>{if(_.preventDefault(),!r||t.trim()===""){l("Please acknowledge the disclaimer and provide your signature.");return}try{await wy(Ks(rs,"disclaimers"),{acknowledged:r,signature:t,timestamp:new Date}),l(""),setTimeout(()=>{s("/thank-you",{state:{type:"disclaimer"}})},2e3)}catch(w){console.error("Error submitting disclaimer:",w),l("Error submitting disclaimer. Please try again.")}};return B.jsxs(zf,{children:[B.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Disclaimer"}),B.jsx(UV,{}),B.jsxs("form",{onSubmit:d,className:"mt-4",children:[B.jsx("div",{className:"mb-4",children:B.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[B.jsx("input",{type:"checkbox",checked:r,onChange:f,className:"mr-2"}),"I acknowledge that I have read and understood the disclaimer."]})}),B.jsx("div",{className:"mb-4",children:B.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Signature",B.jsx("input",{type:"text",value:t,onChange:a,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter your signature"})]})}),c&&B.jsx(sn,{message:c,type:"error"}),B.jsx(An,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 border border-blue-700",children:"Submit"})]})]})},VV=()=>B.jsx(In,{children:B.jsx(FV,{})});class BV extends be.Component{constructor(n){super(n);Qn(this,"myRef",Pu.createRef());Qn(this,"myP5",null);Qn(this,"Sketch",n=>{const{patternType:t,patterns:o}=this.props;n.setup=()=>{n.createCanvas(n.windowWidth,n.windowHeight),n.angleMode(n.DEGREES)},n.windowResized=()=>{n.resizeCanvas(n.windowWidth,n.windowHeight)},n.draw=()=>{switch(n.clear(),n.background(0,0,0,0),t){case"sineWave":this.drawSineWaves(n,o.sineWave);break;case"chevrons":this.drawChevrons(n,o.chevrons);break;case"checkerboard":this.drawCheckerboard(n,o.checkerboard);break;default:n.text("Select a pattern",n.width/2,n.height/2)}}});Qn(this,"drawSineWaves",(n,{translateSpeed:t,amplitude:o,frequency:c,rotation:l,duplicates:f})=>{n.translate(n.width/2,n.height/2),n.rotate(l);for(let a=0;a<f;a++){n.beginShape();for(let d=-n.width/2;d<n.width/2;d++){const _=o*n.sin(c*(d+n.frameCount));n.vertex(d,_)}n.endShape()}});Qn(this,"drawChevrons",(n,t)=>{});Qn(this,"drawCheckerboard",(n,t)=>{})}componentDidMount(){this.myP5=new ky(this.Sketch,this.myRef.current)}componentDidUpdate(){var n;(n=this.myP5)==null||n.remove(),this.myP5=new ky(this.Sketch,this.myRef.current)}componentWillUnmount(){var n;(n=this.myP5)==null||n.remove()}render(){const{inputValue:n,setInputValue:t,keystrokes:o,setKeystrokes:c,displayText:l,setDisplayText:f}=this.props;return B.jsxs("div",{ref:this.myRef,children:[this.props.children,B.jsx(jT,{displayText:l,setDisplayText:f,inputValue:n,setInputValue:t,keystrokes:o,setKeystrokes:c,placeholder:"Type here..."})]})}}const GV=()=>B.jsx(In,{children:B.jsx(zf,{children:B.jsxs("div",{className:"container mx-auto px-4 py-8",children:[B.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Privacy Policy"}),B.jsx("p",{className:"mb-4",children:'This Privacy Policy explains how [Your App Name] ("we", "us", "our") collects, uses, and discloses your personal data when you use our application or website.'}),B.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"1. Information We Collect"}),B.jsx("p",{className:"mb-4",children:"We collect the following types of information:"}),B.jsxs("ul",{className:"list-disc ml-6",children:[B.jsxs("li",{children:[B.jsx("strong",{children:"Personal Information:"})," This includes your name, email address, phone number, and other data that you provide directly to us when you create an account."]}),B.jsxs("li",{children:[B.jsx("strong",{children:"Usage Data:"})," We collect data on how you use the app, such as your browsing activity, preferences, and interactions with the app's features."]}),B.jsxs("li",{children:[B.jsx("strong",{children:"Cookies:"})," We use cookies and similar technologies to track your activity on our app and hold certain information."]})]}),B.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"2. How We Use Your Data"}),B.jsx("p",{className:"mb-4",children:"We use your personal data for the following purposes:"}),B.jsxs("ul",{className:"list-disc ml-6",children:[B.jsx("li",{children:"To provide and maintain our service, including user authentication and account management."}),B.jsx("li",{children:"To personalize your experience by remembering your preferences and providing tailored content."}),B.jsx("li",{children:"To send you promotional and marketing communications with your consent."})]}),B.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"3. Sharing Your Data"}),B.jsx("p",{className:"mb-4",children:"We do not share your personal information with third parties, except:"}),B.jsxs("ul",{className:"list-disc ml-6",children:[B.jsx("li",{children:"If required by law or in response to a valid legal request."}),B.jsx("li",{children:"With third-party services for analytics, marketing, and hosting our application (e.g., Google Analytics, Firebase, etc.)."})]}),B.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"4. Data Retention"}),B.jsx("p",{className:"mb-4",children:"We will retain your personal data for as long as necessary to provide the service and fulfill the purposes outlined in this policy. You can request the deletion of your data at any time (see Data Deletion section)."}),B.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"5. Security of Your Data"}),B.jsx("p",{className:"mb-4",children:"We are committed to securing your personal data and use industry-standard methods to protect it. However, no method of transmission over the internet is completely secure."}),B.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"6. Changes to This Policy"}),B.jsx("p",{className:"mb-4",children:"We may update our Privacy Policy from time to time. We will notify you of any changes by posting the new policy on this page."}),B.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"7. Contact Us"}),B.jsx("p",{className:"mb-4",children:"If you have any questions about this Privacy Policy, please contact us at [Your Contact Email]."})]})})}),zV=()=>B.jsx(In,{children:B.jsx(zf,{children:B.jsxs("div",{className:"container mx-auto px-4 py-8",children:[B.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Data Deletion Policy"}),B.jsx("p",{className:"mb-4",children:'This Data Deletion Policy outlines how you can request the deletion of your personal data from [Your App Name] ("we", "us", "our").'}),B.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"1. Right to Request Data Deletion"}),B.jsx("p",{className:"mb-4",children:"You have the right to request the deletion of your personal data at any time. This includes any information that you have provided to us during registration, profile updates, or any other interaction with our service."}),B.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"2. How to Request Data Deletion"}),B.jsx("p",{className:"mb-4",children:'To request the deletion of your personal data, please contact us via email at [Your Contact Email] with the subject line "Data Deletion Request". In your email, include:'}),B.jsxs("ul",{className:"list-disc ml-6",children:[B.jsx("li",{children:"Your full name"}),B.jsx("li",{children:"Your email address associated with the account"}),B.jsx("li",{children:"Any other relevant information that will help us locate your data"})]}),B.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"3. Processing Your Request"}),B.jsx("p",{className:"mb-4",children:"Once we receive your data deletion request, we will take the necessary steps to delete your personal data from our systems within 30 days. You will receive a confirmation email once your data has been deleted."}),B.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"4. Exceptions"}),B.jsx("p",{className:"mb-4",children:"In some cases, we may be required to retain certain information for legal, security, or operational reasons. For example, we may need to retain data to comply with financial regulations or to resolve disputes."}),B.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"5. Contact Us"}),B.jsx("p",{className:"mb-4",children:"If you have any questions about this Data Deletion Policy or need assistance with your request, please contact us at [Your Contact Email]."})]})})}),HV=()=>B.jsx(In,{children:B.jsx(zf,{children:B.jsxs("div",{className:"p-8",children:[B.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Terms of Service"}),B.jsx("p",{className:"mb-4",children:"Welcome to our application. By accessing or using our services, you agree to be bound by the following terms and conditions. Please read them carefully."}),B.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"1. Acceptance of Terms"}),B.jsx("p",{className:"mb-4",children:'By using our application, you agree to comply with and be legally bound by the terms and conditions of these Terms of Service ("Terms"). These Terms apply to all visitors, users, and others who access or use the service.'}),B.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"2. Modifications"}),B.jsx("p",{className:"mb-4",children:"We reserve the right, at our sole discretion, to modify or replace these Terms at any time. If a revision is material, we will notify you by email or via a notice on our service prior to the changes taking effect. What constitutes a material change will be determined at our sole discretion."}),B.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"3. User Responsibilities"}),B.jsx("p",{className:"mb-4",children:"You are responsible for safeguarding the password that you use to access the service and for any activities or actions under your password. You agree not to disclose your password to any third party. You must notify us immediately upon becoming aware of any breach of security or unauthorized use of your account."}),B.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"4. Prohibited Activities"}),B.jsx("p",{className:"mb-4",children:"You agree not to engage in any of the following prohibited activities:"}),B.jsxs("ul",{className:"list-disc list-inside mb-4",children:[B.jsx("li",{children:"Copying, distributing, or disclosing any part of the service in any medium."}),B.jsx("li",{children:'Using any automated system, including but not limited to "robots," "spiders," or "offline readers" to access the service.'}),B.jsx("li",{children:"Transmitting spam, chain letters, or other unsolicited email."}),B.jsx("li",{children:"Attempting to interfere with the servers or networks connected to the service."})]}),B.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"5. Termination"}),B.jsx("p",{className:"mb-4",children:"We may terminate or suspend access to our service immediately, without prior notice or liability, for any reason whatsoever, including without limitation if you breach the Terms. All provisions of the Terms which by their nature should survive termination shall survive termination, including, without limitation, ownership provisions, warranty disclaimers, indemnity, and limitations of liability."}),B.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"6. Limitation of Liability"}),B.jsx("p",{className:"mb-4",children:"In no event shall our company, nor its directors, employees, partners, agents, suppliers, or affiliates, be liable for any indirect, incidental, special, consequential, or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from (i) your use or inability to use the service; (ii) any unauthorized access to or use of our servers and/or any personal information stored therein."}),B.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"7. Governing Law"}),B.jsx("p",{className:"mb-4",children:"These Terms shall be governed and construed in accordance with the laws of the country in which we operate, without regard to its conflict of law provisions."}),B.jsx("h2",{className:"text-2xl font-bold mt-6 mb-2",children:"8. Contact Us"}),B.jsxs("p",{className:"mb-4",children:["If you have any questions about these Terms, please contact us at ",B.jsx("strong",{children:"support@yourapp.com"}),"."]})]})})});class ET extends Pu.Component{constructor(r){super(r),this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("ErrorBoundary caught an error:",r,n)}render(){var r;return this.state.hasError?B.jsxs("div",{className:"max-w-md mx-auto p-4 text-center",children:[B.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-500",children:"Something went wrong."}),B.jsx("p",{className:"text-gray-700",children:((r=this.state.error)==null?void 0:r.message)||"An unexpected error occurred."})]}):this.props.children}}const qV=()=>B.jsxs("div",{className:"max-w-3xl mx-auto bg-teal-100 p-6 rounded-lg shadow-md border border-gray-300",children:[B.jsx("h1",{className:"text-4xl font-bold text-center mb-6",children:"StableHand Typing Clinical Trial  EndUser Guide"}),B.jsx("p",{children:"Welcome to StableHands Clinical Trial Dashboard! This stepbystep guide will walk you through everything you need to knowfrom creating your account and logging in, to completing each module (Disclaimer, Background, Demographics, Interviews, Therapy, Progress Notes)."}),B.jsx("h2",{children:"1. Create Your Account & Verify Email"}),B.jsxs("ol",{children:[B.jsxs("li",{children:[B.jsx("strong",{children:"Visit:"})," ",B.jsx("a",{href:"https://stablehand-typing.web.app",target:"_blank",rel:"noopener noreferrer",children:"https://stablehand-typing.web.app"})]}),B.jsxs("li",{children:[B.jsx("strong",{children:"Click Register"})," and fill in:",B.jsxs("ul",{children:[B.jsx("li",{children:"Email, Password, Confirm Password"}),B.jsx("li",{children:"(Optional) Check Enable phone as 2nd factor and enter your mobile number to enroll SMSbased 2FA"})]})]}),B.jsx("li",{children:"Submit  Youll see Verification email sent."}),B.jsx("li",{children:"Open your email and click the link to verify your address."}),B.jsx("li",{children:"If you enabled phone 2FA, youll then be prompted to send and enter an SMS code before you can finish registration."})]}),B.jsx("h2",{children:"2. Log In"}),B.jsxs("ol",{children:[B.jsxs("li",{children:[B.jsx("strong",{children:"Email/Password:"})," enter your credentials, then click Login."]}),B.jsxs("li",{children:[B.jsx("strong",{children:"ThirdParty:"})," choose Login with Google, Facebook, etc., then follow the popup."]}),B.jsxs("li",{children:[B.jsx("strong",{children:"Forgot password?"})," Click Reset Password, type your email, then check your inbox for the reset link."]})]}),B.jsx("h2",{children:"3. Welcome Page & Navigation"}),B.jsx("p",{children:"Once logged in, youll land on the Welcome page. Youll see tiles for each section:"}),B.jsxs("table",{className:"table-auto border-collapse border border-gray-300",children:[B.jsx("thead",{children:B.jsxs("tr",{children:[B.jsx("th",{className:"border border-gray-300 px-2 py-1",children:"Section"}),B.jsx("th",{className:"border border-gray-300 px-2 py-1",children:"Purpose"})]})}),B.jsxs("tbody",{children:[B.jsxs("tr",{children:[B.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Disclaimer"}),B.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Read & accept the studys terms before proceeding."})]}),B.jsxs("tr",{children:[B.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Background"}),B.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Answer general background questions (education, work)."})]}),B.jsxs("tr",{children:[B.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Demographics"}),B.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Enter personal details (age, gender, etc.)."})]}),B.jsxs("tr",{children:[B.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Medical Interview"}),B.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Share your medical history and current health info."})]}),B.jsxs("tr",{children:[B.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Parkinson Interview (PDQ39)"}),B.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Complete the standard PDQ39 questionnaire."})]}),B.jsxs("tr",{children:[B.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Therapy"}),B.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Perform typing tasks on different backgrounds."})]}),B.jsxs("tr",{children:[B.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Progress Notes"}),B.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Add notes about your performance and observations."})]})]})]}),B.jsx("h2",{children:"4. Completing the Disclaimer"}),B.jsxs("ol",{children:[B.jsx("li",{children:"Read the study consent text carefully."}),B.jsx("li",{children:"Click the I Agree button at the bottom."}),B.jsx("li",{children:"Youll be automatically returned to the Welcome page."})]}),B.jsx("h2",{children:"5. Background & Demographics"}),B.jsxs("p",{children:[B.jsx("strong",{children:"Background:"})," fill out fields like Highest Education, Profession, etc."]}),B.jsxs("p",{children:[B.jsx("strong",{children:"Demographics:"})," enter your name, date of birth, gender, ethnicity, income bracket, etc."]}),B.jsx("p",{children:"All fields marked with a * are required. Inline error messages will appear if you leave something blank or mistype."}),B.jsx("h2",{children:"6. Medical & Parkinson Interviews"}),B.jsxs("ol",{children:[B.jsx("li",{children:"Medical Interview: answer questions about past illnesses, medications, allergies, and family history."}),B.jsx("li",{children:"Parkinson Interview (PDQ39): rate how Parkinsons affects you over the last month (mobility, daily activities, emotions)."}),B.jsx("li",{children:"Use the Next / Back buttons at the bottom to navigate between pages."})]}),B.jsx("h2",{children:"7. Therapy (Typing Tasks)"}),B.jsxs("ol",{children:[B.jsxs("li",{children:[B.jsx("strong",{children:"Select a Background"}),"use the dropdown or color picker on the left."]}),B.jsxs("li",{children:[B.jsx("strong",{children:"Start Typing"}),"a text passage appears; retype it as accurately and quickly as you can."]}),B.jsxs("li",{children:[B.jsx("strong",{children:"Submit"}),"click Submit when finished; your typing speed, accuracy, and keystrokes are recorded."]}),B.jsx("li",{children:"Feel free to switch backgrounds between passages to see which yields your best performance."})]}),B.jsx("h2",{children:"8. Progress Notes"}),B.jsx("p",{children:"After your typing tasks, jot down any observations in Progress Notesfor example, how you felt, any fatigue or discomfort, or environmental distractions."}),B.jsx("h2",{children:"9. Logging Out"}),B.jsxs("ol",{children:[B.jsx("li",{children:"Click your profile icon (top right)."}),B.jsx("li",{children:"Choose Sign Out."}),B.jsx("li",{children:"You can log back in anytime; youll return to where you left off."})]}),B.jsx("h2",{children:"Tips & Troubleshooting"}),B.jsxs("ul",{children:[B.jsxs("li",{children:[B.jsx("strong",{children:"Email not arriving?"})," Check your Spam folder or click Resend verification on the Registration page."]}),B.jsxs("li",{children:[B.jsx("strong",{children:"SMS code delayed?"})," Wait a minute, then click Resend SMS."]}),B.jsxs("li",{children:[B.jsx("strong",{children:"Form wont submit?"})," Look for red inline error messages identifying the problem."]}),B.jsxs("li",{children:[B.jsx("strong",{children:"Need help?"})," Use the Help link in the footer or open a GitHub Issue in the ",B.jsx("a",{href:"https://github.com/drorafreedom/StableHand-Typing",target:"_blank",rel:"noopener noreferrer",children:"repo"}),"."]})]})]}),WV=()=>B.jsx(In,{bgColor:"bg-teal-500",children:B.jsx(qV,{})}),YV=({onClick:s})=>B.jsx("button",{onClick:s,className:"absolute top-2 left-2 z-50 p-1 focus:outline-none",children:B.jsx("img",{src:fT,alt:"Toggle sidebar",className:"w-8 h-8"})}),$V=()=>{const s=Pa(),[r,n]=be.useState(!1),t=s.pathname==="/therapy";be.useEffect(()=>{const c=JSON.parse(localStorage.getItem("visitedPages")||"[]");c.includes(s.pathname)||(c.push(s.pathname),localStorage.setItem("visitedPages",JSON.stringify(c)))},[s]);const o=()=>{n(c=>!c)};return B.jsxs("div",{className:"flex flex-col min-h-screen",children:[B.jsx(DF,{isVisible:r,toggleSidebar:o}),t?B.jsx(YV,{onClick:o}):B.jsx(MF,{toggleSidebar:o}),B.jsx("div",{className:"flex flex-col flex-grow w-full p-4 ml-0",children:B.jsxs(qA,{children:[B.jsx(Br,{path:"/",element:B.jsx(iR,{})}),B.jsx(Br,{path:"/login",element:B.jsx(pF,{})}),B.jsx(Br,{path:"/register",element:B.jsx(vF,{})}),B.jsx(Br,{path:"/reset-password",element:B.jsx(bF,{})}),B.jsx(Br,{path:"/logout",element:B.jsx(IF,{})}),B.jsx(Br,{path:"/stablehand-welcome",element:B.jsx(VF,{})}),B.jsx(Br,{path:"/thank-you",element:B.jsx(UF,{})}),B.jsx(Br,{path:"/contact",element:B.jsx(BF,{})}),B.jsx(Br,{path:"/background",element:B.jsx(GF,{})}),B.jsx(Br,{path:"/demographics",element:B.jsx(eV,{})}),B.jsx(Br,{path:"/medical-interview",element:B.jsx(uV,{})}),B.jsx(Br,{path:"/parkinson-interview",element:B.jsx(fV,{})}),B.jsx(Br,{path:"/therapy",element:B.jsx(DV,{})}),B.jsx(Br,{path:"/progress-notes",element:B.jsx(xV,{})}),B.jsx(Br,{path:"/setting",element:B.jsx(pV,{})}),B.jsx(Br,{path:"/account",element:B.jsx(mV,{})}),B.jsx(Br,{path:"/disclaimer",element:B.jsx(VV,{})}),B.jsx(Br,{path:"/multifuncion-animation",element:B.jsx(xT,{})}),B.jsx(Br,{path:"/shape-animation",element:B.jsx(ST,{})}),B.jsx(Br,{path:"/background-animation",element:B.jsx(BV,{})}),B.jsx(Br,{path:"/privacy-policy",element:B.jsx(GV,{})}),B.jsx(Br,{path:"/data-deletion-instructions",element:B.jsx(zV,{})}),B.jsx(Br,{path:"/terms-of-service",element:B.jsx(HV,{})}),B.jsx(Br,{path:"/enduserguide",element:B.jsx(WV,{})}),B.jsx(Br,{path:"/verify-email-finish",element:B.jsx(NV,{})}),B.jsx(Br,{path:"/feedbackandprogress-notes",element:B.jsx(LV,{})})]})}),!t&&B.jsx(LF,{})]})},XV=()=>B.jsx(ET,{children:B.jsx(JA,{children:B.jsx(gT,{children:B.jsx($V,{})})})});function KV(){const s=document.getElementById("root");s?eA.createRoot(s).render(B.jsx(Pu.StrictMode,{children:B.jsx(ET,{children:B.jsx(gT,{children:B.jsx(XV,{})})})})):console.error("Root element not found")}KV();
